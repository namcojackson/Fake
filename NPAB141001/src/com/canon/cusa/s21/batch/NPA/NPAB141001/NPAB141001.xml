<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NPAB141001">

    <statement id="getRemoveRec" parameterClass="Map" resultClass="Map">
        SELECT 
            ELAN_RPT_WRK_PK
        FROM
            ELAN_RPT_WRK             EPW
        WHERE 
            EPW.GLBL_CMPY_CD         = #glblCmpyCd#
        AND EPW.EZINTIME             &lt; #purgeTs#
        AND EPW.EZCANCELFLAG         = '0'
    </statement>

    <statement id="getAsnInfo" parameterClass="Map" resultClass="Map">
        SELECT
            ADW.PO_ORD_NUM
            ,ADW.PO_ORD_DTL_LINE_NUM
            ,ADW.MDSE_CD
            ,POD.MDSE_DESC_SHORT_TXT
            ,ADW.ASN_SO_NUM
            ,ADW.ASN_SO_SLP_NUM
            ,ASW.SER_NUM
            ,ASW.SER_TAKE_DT_TM_TS
            ,POD.INVTY_LOC_CD
            ,POD.DEST_RTL_WH_CD
            ,POD.DEST_RTL_SWH_CD
<!--QC#28852 Add Start -->
            ,AHW.EZINTIME
<!--QC#28852 Add End -->
            ,AHW.ASN_EDI_PROC_STS_CD
            ,AHW.BR_FLG
            ,MDSE.SW_LIC_CTRL_TP_CD
            ,MDSE.INTNT_CONN_SW_CTRL_FLG
            ,POD.SHIP_TO_CUST_CD
            ,POD.SHIP_TO_LOC_NM
            ,POD.SHIP_TO_FIRST_LINE_ADDR
            ,POD.SHIP_TO_SCD_LINE_ADDR
            ,POD.SHIP_TO_THIRD_LINE_ADDR
            ,POD.SHIP_TO_FRTH_LINE_ADDR
            ,POD.SHIP_TO_CTY_ADDR
            ,POD.SHIP_TO_ST_CD
            ,POD.SHIP_TO_POST_CD
        FROM
            EDI_ASN_DTL_WRK      ADW
            ,PO_DTL              POD
            ,EDI_ASN_HDR_WRK     AHW
            ,EDI_ASN_SER_NUM_WRK ASW
            ,MDSE                MDSE
        WHERE
            ADW.GLBL_CMPY_CD        = #glblCmpyCd#
        AND ADW.GLBL_CMPY_CD        = POD.GLBL_CMPY_CD
        AND ADW.PO_ORD_NUM          = POD.PO_ORD_NUM
        AND ADW.PO_ORD_DTL_LINE_NUM = POD.PO_ORD_DTL_LINE_NUM
        AND ADW.GLBL_CMPY_CD        = AHW.GLBL_CMPY_CD
        AND ADW.ASN_SO_NUM          = AHW.ASN_SO_NUM
        AND AHW.ASN_EDI_PROC_STS_CD = #ediProcStsCd#
        AND AHW.ELAN_PRINT_STS_CD   IN (#initial#, #printError#)
        AND ADW.GLBL_CMPY_CD        = ASW.GLBL_CMPY_CD(+)
        AND ADW.ASN_SO_NUM          = ASW.ASN_SO_NUM(+)
        AND ADW.ASN_SO_SLP_NUM      = ASW.ASN_SO_SLP_NUM(+)
        AND ADW.GLBL_CMPY_CD        = MDSE.GLBL_CMPY_CD
        AND ADW.MDSE_CD             = MDSE.MDSE_CD
        AND ADW.EZCANCELFLAG        = '0'
        AND POD.EZCANCELFLAG        = '0'
        AND AHW.EZCANCELFLAG        = '0'
        AND ASW.EZCANCELFLAG(+)     = '0'
        AND MDSE.EZCANCELFLAG       = '0'
        ORDER BY
            ADW.PO_ORD_NUM
            ,ADW.ASN_SO_NUM
            ,ADW.PO_ORD_DTL_LINE_NUM
    </statement>

    <statement id="getRptId" parameterClass="Map" resultClass="String">
        SELECT
            PIC.RPT_ID
        FROM
            RPT_ITEM_CTRL      PIC
        WHERE
            PIC.GLBL_CMPY_CD   = #glblCmpyCd#
        AND PIC.MDSE_CD        = #mdseCd#
        AND PIC.EZCANCELFLAG   = '0'
    </statement>

    <statement id="getRptBrNum" parameterClass="Map" resultClass="String">
        SELECT
            RPC.RPT_BR_ID
        FROM
            RPT_PRINT_CTRL RPC
            ,EIP_RPT_CTRL  ERC
        WHERE
            RPC.GLBL_CMPY_CD      = #glblCmpyCd#
        AND RPC.RPT_ID            = #rptId#
        AND RPC.RPT_PRINT_CTRL_ID = #rtlWhCd#
        AND RPC.GLBL_CMPY_CD      = ERC.GLBL_CMPY_CD
        AND RPC.RPT_ID            = ERC.RPT_ID
        AND RPC.RPT_BR_ID         = ERC.RPT_BR_NUM
        AND RPC.EZCANCELFLAG      = '0'
        AND ERC.EZCANCELFLAG      = '0'
    </statement>

</sqlMap>
