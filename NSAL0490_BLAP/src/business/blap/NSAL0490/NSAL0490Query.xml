<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NSAL0490Query">

    <statement id="getMtrGrpList" parameterClass="Map" resultClass="Map">
        SELECT
            MG.MTR_GRP_PK AS MTR_GRP_PK
           ,MG.MTR_GRP_NM AS MTR_GRP_NM
        FROM
            MTR_GRP MG
        WHERE
            MG.GLBL_CMPY_CD     = #glblCmpyCd#
            AND MG.EZCANCELFLAG = '0'
        ORDER BY
            MG.MTR_GRP_PK
    </statement>

<!-- START 2016/02/10 A.Kohinata [QC#1157, DEL] -->
<!--
    <statement id="getSvcSklList" parameterClass="Map" resultClass="Map">
        SELECT
            SS.SVC_SKILL_NUM AS SVC_SKILL_NUM
           ,SS.SVC_SKILL_NM  AS SVC_SKILL_NM
        FROM
            SVC_SKILL SS
        WHERE
            SS.GLBL_CMPY_CD     = #glblCmpyCd#
            AND SS.EZCANCELFLAG = '0'
        ORDER BY
            SS.SVC_SKILL_NUM
    </statement>
-->
<!-- END 2016/02/10 A.Kohinata [QC#1157, DEL] -->

    <statement id="getSvcIstlRuleList" parameterClass="Map" resultClass="Map">
        SELECT
            SIR.SVC_ISTL_RULE_NUM AS SVC_ISTL_RULE_NUM
           ,SIR.SVC_ISTL_RULE_NM  AS SVC_ISTL_RULE_NM
        FROM
            SVC_ISTL_RULE SIR
        WHERE
            SIR.GLBL_CMPY_CD      = #glblCmpyCd#
            AND SIR.SVC_ISTL_RULE_FLG = #actvFlg#
            AND SIR.EZCANCELFLAG  = '0'
        ORDER BY
            SIR.SVC_ISTL_RULE_NUM
    </statement>

    <statement id="getHdrData" parameterClass="Map" resultMap="result.getHdrData">
        SELECT
            DM.MDL_ID                 AS MDL_ID
           ,DM.MDL_DESC_TXT           AS MDL_DESC_TXT
           ,DMG.MDL_GRP_NM            AS MDL_GRP_NM
           ,DM.SVC_SEG_CD             AS SVC_SEG_CD
           ,DM.MDL_ACTV_FLG           AS MDL_ACTV_FLG
           ,DM.EZINTIME               AS EZINTIME_DM
           ,DM.MTR_GRP_PK             AS MTR_GRP_PK
           ,DM.SVC_SKILL_NUM          AS SVC_SKILL_NUM
<!-- START 2016/02/10 A.Kohinata [QC#1157, ADD] -->
           ,SS.SVC_SKILL_DESC_TXT     AS SVC_SKILL_DESC_TXT
<!-- END 2016/02/10 A.Kohinata [QC#1157, ADD] -->
           ,DM.CUST_ISTL_FLG          AS CUST_ISTL_FLG
           ,DM.SVC_ISTL_RULE_NUM      AS SVC_ISTL_RULE_NUM
           ,DM.SITE_SRVY_REQ_FLG      AS SITE_SRVY_REQ_FLG
           ,DM.SVC_DEINS_RULE_NUM     AS SVC_DEINS_RULE_NUM
           ,DM.SVC_ISTL_REQ_FLG       AS SVC_ISTL_REQ_FLG
           ,DM.SVC_ISTL_CALL_GRP_NUM  AS SVC_ISTL_CALL_GRP_NUM
           ,DM.SVC_DEINS_CALL_GRP_NUM AS SVC_DEINS_CALL_GRP_NUM
<!-- START 2016/05/19 K.Kasai [QC#447, ADD] -->
           ,DM.EOL_SVC_CONTR_CMNT_TXT AS EOL_SVC_CONTR_CMNT_TXT
           ,DM.EOL_TM_MAT_CMNT_TXT    AS EOL_TM_MAT_CMNT_TXT
           ,DM.EOL_TECH_SPRT_CMNT_TXT AS EOL_TECH_SPRT_CMNT_TXT
           ,DM.EOL_OTH_CMNT_TXT       AS EOL_OTH_CMNT_TXT
<!-- START 2017/12/22 U.Kim [QC#22448, ADD] -->
           ,DM.EOL_DISPT_CMNT_TXT     AS EOL_DISPT_CMNT_TXT
<!-- END 2017/12/22 U.Kim [QC#22448, ADD] -->
<!-- END 2016/05/19 K.Kasai [QC#447, ADD] -->
           ,DM.EZUPTIMEZONE           AS EZUPTIMEZONE_DM
           ,DM.EZUPTIME               AS EZUPTIME_DM
           <!-- START 2016/12/02 K.Kojima [QC#14204, ADD] -->
           ,DM.EZINTIME               AS XX_REC_HIST_CRAT_TS
           ,DM.EZINUSERID             AS XX_REC_HIST_CRAT_BY_NM
           ,DM.EZUPTIME               AS XX_REC_HIST_UPD_TS
           ,DM.EZUPUSERID             AS XX_REC_HIST_UPD_BY_NM
           ,DM.EZTABLEID              AS XX_REC_HIST_TBL_NM
           <!-- END 2016/12/02 K.Kojima [QC#14204, ADD] -->
           <!-- START 2017/11/02 S.Katsuma [SOL#170(QC#18624), ADD] -->
           ,DM.SVC_LB_GRP_CD          AS SVC_LB_GRP_CD
           <!-- END 2017/11/02 S.Katsuma [SOL#170(QC#18624), ADD] -->
           <!-- START 2018/01/15 K.Kojima [QC#23352, ADD] -->
           ,DM.SVC_MDL_TP_CD          AS SVC_MDL_TP_CD
           <!-- END 2018/01/15 K.Kojima [QC#23352, ADD] -->
        FROM
            MDL_NM        MN
           ,DS_MDL        DM
           ,DS_MDL_GRP    DMG
<!-- START 2016/02/10 A.Kohinata [QC#1157, ADD] -->
           ,SVC_SKILL     SS
<!-- END 2016/02/10 A.Kohinata [QC#1157, ADD] -->
        WHERE
            MN.T_GLBL_CMPY_CD   = #glblCmpyCd#
            AND MN.T_MDL_NM     = #mdlNm#
            AND MN.EZCANCELFLAG = '0'

            AND MN.T_GLBL_CMPY_CD = DM.GLBL_CMPY_CD
            AND MN.T_MDL_ID       = DM.MDL_ID
            AND DM.EZCANCELFLAG   = '0'

            AND DM.GLBL_CMPY_CD  = DMG.GLBL_CMPY_CD
            AND DM.MDL_GRP_ID    = DMG.MDL_GRP_ID
            AND DMG.EZCANCELFLAG = '0'
<!-- START 2016/02/10 A.Kohinata [QC#1157, ADD] -->
            AND DM.GLBL_CMPY_CD      = SS.GLBL_CMPY_CD  (+)
            AND DM.SVC_SKILL_NUM     = SS.SVC_SKILL_NUM (+)
            AND SS.EZCANCELFLAG  (+) = '0'
<!-- END 2016/02/10 A.Kohinata [QC#1157, ADD] -->
    </statement>

<!-- START 2017/01/16 T.Mizuki [QC#16618, DEL] -->
<!--
    <statement id="getPrntDataList" parameterClass="Map" resultClass="Map">
        SELECT
            DMC.DS_MDL_CONFIG_PK AS DS_MDL_CONFIG_PK
           ,DMC.PRNT_CONFIG_PK   AS PRNT_CONFIG_PK
           ,DMC.PRNT_MDSE_CD     AS PRNT_MDSE_CD
 START START 2016/09/16 N.Arai [QC#11616, MOD] 
       ,AMV.MDSE_NM          AS MDSE_NM        
           ,AMV.MDSE_DESC_SHORT_TXT     AS MDSE_DESC_SHORT_TXT
 END START 2016/09/16 N.Arai [QC#11616, MOD] 
           ,MC.MDSE_CATG_NM      AS MDSE_CATG_NM
           ,MT.MDSE_TP_NM        AS MDSE_TP_NM
           ,CP.COA_PROD_NM       AS COA_PROD_NM
           ,DMC.EFF_FROM_DT      AS EFF_FROM_DT
           ,DMC.EFF_THRU_DT      AS EFF_THRU_DT
           ,DMC.EZUPTIMEZONE     AS EZUPTIMEZONE
           ,DMC.EZUPTIME         AS EZUPTIME
           ,NVL(OTM.ORD_TAKE_MDSE_CD, DMC.PRNT_MDSE_CD)
                                 AS MDSE_CD
            START 2016/12/02 K.Kojima [QC#14204, ADD] 
           ,DMC.EZINTIME         AS XX_REC_HIST_CRAT_TS_A
           ,DMC.EZINUSERID       AS XX_REC_HIST_CRAT_BY_NM_A
           ,DMC.EZUPTIME         AS XX_REC_HIST_UPD_TS_A
           ,DMC.EZUPUSERID       AS XX_REC_HIST_UPD_BY_NM_A
           ,DMC.EZTABLEID        AS XX_REC_HIST_TBL_NM_A
            END 2016/12/02 K.Kojima [QC#14204, ADD] 
        FROM
            DS_MDL           DM
           ,DS_MDL_CONFIG    DMC
           ,ALL_MDSE_V       AMV
           ,ORD_TAKE_MDSE    OTM
           ,MDSE_CATG        MC
           ,MDSE_TP          MT
           ,COA_PROD         CP
        WHERE
            DM.GLBL_CMPY_CD              = #glblCmpyCd#
            AND DM.MDL_ID                = #mdlId#
            AND DM.EZCANCELFLAG          = '0'
            
            AND DM.GLBL_CMPY_CD          = DMC.GLBL_CMPY_CD
            AND DM.MDL_ID                = DMC.MDL_ID
            AND DMC.CHILD_MDSE_CD        IS NULL
            AND DMC.EZCANCELFLAG         = '0'
            
            AND DMC.GLBL_CMPY_CD         = AMV.GLBL_CMPY_CD
            AND DMC.PRNT_MDSE_CD         = AMV.MDSE_CD
            AND AMV.EZCANCELFLAG         = '0'
            
            AND DMC.GLBL_CMPY_CD         = OTM.GLBL_CMPY_CD(+)
 START 2016/10/11 N.Arai [QC#14671, MOD] 
        AND OTM.ORD_TAKE_MDSE_CD(+)  LIKE SUBSTR(DMC.PRNT_MDSE_CD, 1, 8) || '%'     
            AND OTM.ORD_TAKE_MDSE_CD(+)  = SUBSTR(DMC.PRNT_MDSE_CD, 1, 8)
 END 2016/10/11 N.Arai [QC#14671, MOD] 
            AND OTM.EZCANCELFLAG(+)      = '0'
            
            AND AMV.GLBL_CMPY_CD         = MC.GLBL_CMPY_CD (+)
            AND AMV.MDSE_CATG_CD         = MC.MDSE_CATG_CD (+)
            AND MC.EZCANCELFLAG (+)      = '0'
            
            AND AMV.GLBL_CMPY_CD         = MT.GLBL_CMPY_CD (+)
            AND AMV.MDSE_TP_CD           = MT.MDSE_TP_CD (+)
            AND MT.EZCANCELFLAG (+)      = '0'
            
            AND AMV.GLBL_CMPY_CD         = CP.GLBL_CMPY_CD (+)
            AND AMV .COA_PROD_CD         = CP.COA_PROD_CD (+)
            AND CP.EZCANCELFLAG (+)      = '0'
        ORDER BY
            DMC.PRNT_MDSE_CD
    </statement>

    <statement id="getChildDataList" parameterClass="Map" resultClass="Map">
        SELECT
            DMCC.DS_MDL_CONFIG_PK AS DS_MDL_CONFIG_PK
           ,DMCC.PRNT_CONFIG_PK   AS PRNT_CONFIG_PK
           ,DMCC.CHILD_MDSE_CD    AS CHILD_MDSE_CD
 START START 2016/09/16 N.Arai [QC#11616, MOD] 
       ,AMV.MDSE_NM           AS MDSE_NM       
           ,AMV.MDSE_DESC_SHORT_TXT     AS MDSE_DESC_SHORT_TXT
 END START 2016/09/16 N.Arai [QC#11616, MOD] 
           ,MC.MDSE_CATG_NM       AS MDSE_CATG_NM
           ,MT.MDSE_TP_NM         AS MDSE_TP_NM
           ,CP.COA_PROD_NM        AS COA_PROD_NM
           ,DMCC.EFF_FROM_DT      AS EFF_FROM_DT
           ,DMCC.EFF_THRU_DT      AS EFF_THRU_DT
           ,DMCC.EZUPTIMEZONE     AS EZUPTIMEZONE
           ,DMCC.EZUPTIME         AS EZUPTIME
           ,NVL(OTM.ORD_TAKE_MDSE_CD, DMCC.CHILD_MDSE_CD)
                                  AS MDSE_CD
            START 2016/12/02 K.Kojima [QC#14204, ADD] 
           ,DMCC.EZINTIME         AS XX_REC_HIST_CRAT_TS_A
           ,DMCC.EZINUSERID       AS XX_REC_HIST_CRAT_BY_NM_A
           ,DMCC.EZUPTIME         AS XX_REC_HIST_UPD_TS_A
           ,DMCC.EZUPUSERID       AS XX_REC_HIST_UPD_BY_NM_A
           ,DMCC.EZTABLEID        AS XX_REC_HIST_TBL_NM_A
            END 2016/12/02 K.Kojima [QC#14204, ADD] 
        FROM
            DS_MDL           DM
           ,DS_MDL_CONFIG    DMCP
           ,DS_MDL_CONFIG    DMCC
           ,ALL_MDSE_V       AMV
           ,ORD_TAKE_MDSE    OTM
           ,MDSE_CATG        MC
           ,MDSE_TP          MT
           ,COA_PROD         CP
        WHERE
            DM.GLBL_CMPY_CD              = #glblCmpyCd#
            AND DM.MDL_ID                = #mdlId#
            AND DM.EZCANCELFLAG          = '0'
            
            AND DM.GLBL_CMPY_CD          = DMCP.GLBL_CMPY_CD
            AND DM.MDL_ID                = DMCP.MDL_ID
            AND DMCP.CHILD_MDSE_CD       IS NULL
            AND DMCP.EZCANCELFLAG        = '0'
            
            AND DM.GLBL_CMPY_CD          = DMCC.GLBL_CMPY_CD
            AND DM.MDL_ID                = DMCC.MDL_ID
            AND DMCP.PRNT_CONFIG_PK      = DMCC.PRNT_CONFIG_PK
            AND DMCP.PRNT_MDSE_CD        = DMCC.PRNT_MDSE_CD
            AND DMCC.CHILD_MDSE_CD       IS NOT NULL
            AND DMCC.EZCANCELFLAG        = '0'
            AND DMCC.PRNT_CONFIG_PK      = #prntConfigPk#
            AND DMCC.PRNT_MDSE_CD        = #prntMdseCd#
            
            AND DMCC.GLBL_CMPY_CD        = AMV.GLBL_CMPY_CD
            AND DMCC.CHILD_MDSE_CD       = AMV.MDSE_CD
            AND DMCP.GLBL_CMPY_CD        = OTM.GLBL_CMPY_CD(+)
 START 2016/10/11 N.Arai [QC#14671, MOD] 
        AND OTM.ORD_TAKE_MDSE_CD(+)  LIKE SUBSTR(DMCC.CHILD_MDSE_CD, 1, 8) || '%'   
            AND OTM.ORD_TAKE_MDSE_CD(+)  = SUBSTR(DMCC.CHILD_MDSE_CD, 1, 8)
 END 2016/10/11 N.Arai [QC#14671, MOD] 
            AND OTM.EZCANCELFLAG(+)      = '0'
            
            AND AMV.GLBL_CMPY_CD         = MC.GLBL_CMPY_CD (+)
            AND AMV.MDSE_CATG_CD         = MC.MDSE_CATG_CD (+)
            AND MC.EZCANCELFLAG (+)      = '0'
            
            AND AMV.GLBL_CMPY_CD         = MT.GLBL_CMPY_CD (+)
            AND AMV.MDSE_TP_CD           = MT.MDSE_TP_CD (+)
            AND MT.EZCANCELFLAG (+)      = '0'
            
            AND AMV.GLBL_CMPY_CD         = CP.GLBL_CMPY_CD (+)
            AND AMV .COA_PROD_CD         = CP.COA_PROD_CD (+)
            AND CP.EZCANCELFLAG (+)      = '0'
        ORDER BY
            DMCC.CHILD_MDSE_CD
    </statement>-->
<!-- END 2017/01/16 T.Mizuki [QC#16618, DEL] -->

    <statement id="getMdseInfoForItemConfig" parameterClass="Map" resultClass="Map">
        SELECT
<!-- START START 2016/09/16 N.Arai [QC#11616, MOD] -->
<!--        MD.MDSE_NM      AS MDSE_NM             -->
            MD.MDSE_DESC_SHORT_TXT     AS MDSE_DESC_SHORT_TXT
<!-- END START 2016/09/16 N.Arai [QC#11616, MOD] -->
           ,MC.MDSE_CATG_NM AS MDSE_CATG_NM
           ,MT.MDSE_TP_NM   AS MDSE_TP_NM
           ,CP.COA_PROD_NM  AS COA_PROD_NM
        FROM
            MDSE          MD
           ,MDSE_CATG     MC
           ,MDSE_TP       MT
           ,COA_PROD      CP
        WHERE
            MD.GLBL_CMPY_CD      = #glblCmpyCd#
            AND MD.MDSE_CD       = #mdseCd#
            AND MD.EZCANCELFLAG  = '0'

            AND MD.GLBL_CMPY_CD     = MC.GLBL_CMPY_CD (+)
            AND MD.MDSE_CATG_CD     = MC.MDSE_CATG_CD (+)
            AND MC.EZCANCELFLAG (+) = '0'

            AND MD.GLBL_CMPY_CD     = MT.GLBL_CMPY_CD (+)
            AND MD.MDSE_TP_CD       = MT.MDSE_TP_CD (+)
            AND MT.EZCANCELFLAG (+) = '0'

            AND MD.GLBL_CMPY_CD     = CP.GLBL_CMPY_CD (+)
            AND MD.COA_PROD_CD      = CP.COA_PROD_CD (+)
            AND CP.EZCANCELFLAG (+) = '0'
    </statement>

    <statement id="isExistMdlNm" parameterClass="Map" resultClass="Integer">
        SELECT
            COUNT(MN.T_MDL_ID)
        FROM
            MDL_NM MN
        WHERE
            MN.T_GLBL_CMPY_CD   = #glblCmpyCd#
            AND MN.T_MDL_NM     = #mdlNm#
            AND MN.EZCANCELFLAG = '0'
    </statement>

    <statement id="isExistMdlGrp" parameterClass="Map" resultClass="Integer">
        SELECT
            COUNT(DMG.MDL_GRP_ID)
        FROM
            DS_MDL_GRP DMG
        WHERE
            DMG.GLBL_CMPY_CD     = #glblCmpyCd#
            AND DMG.MDL_GRP_NM   = #mdlGrpNm#
            AND DMG.EZCANCELFLAG = '0'
    </statement>

    <statement id="getMdlGrpId" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            DMG.MDL_GRP_ID
        FROM
            (
             SELECT
                 MDL_GRP_ID
             FROM
                 DS_MDL_GRP
             WHERE
                 GLBL_CMPY_CD     = #glblCmpyCd#
                 AND MDL_GRP_NM   = #mdlGrpNm#
                 AND EZCANCELFLAG = '0'
             ORDER BY
                 MDL_GRP_ID DESC
            ) DMG
        WHERE
            ROWNUM = 1
    </statement>

    <statement id="getNextMdlId" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            MAX(MN.T_MDL_ID) + 1 AS NEXT_MDL_ID
        FROM
            MDL_NM MN
        WHERE
            MN.T_GLBL_CMPY_CD   = #glblCmpyCd#
            AND MN.EZCANCELFLAG = '0'
    </statement>

    <statement id="getSvcRulesData" parameterClass="Map" resultMap="result.getSvcRulesData">
        SELECT
            DM.RCLL_INTVL_DAYS_AOT        AS RCLL_INTVL_DAYS_AOT
           ,DM.RCLL_COPY_VOL_CNT          AS RCLL_COPY_VOL_CNT
           ,DM.RCLL_GLBL_INTVL_DAYS_AOT   AS RCLL_GLBL_INTVL_DAYS_AOT
           ,DM.RCLL_GLBL_COPY_VOL_CNT     AS RCLL_GLBL_COPY_VOL_CNT
           <!-- START 2016/05/19 K.Kasai [QC#6675, ADD] -->
           ,TRUNC(DM.RSP_TM_UP_MN_AOT / #minute#, 1)
                                          AS RSP_TM_UP_MN_AOT
           <!-- END 2016/05/19 K.Kasai [QC#6675, ADD] -->
           ,DM.XS_VISIT_CNT               AS XS_VISIT_CNT
           ,DM.PHONE_FIX_FLG              AS PHONE_FIX_FLG
           ,DM.PHONE_FIX_INTVL_DAYS_AOT   AS PHONE_FIX_INTVL_DAYS_AOT
           ,DM.AFTER_HOUR_ALLW_FLG        AS AFTER_HOUR_ALLW_FLG
           ,DM.MACH_IN_FLD_INAC_MTH_AOT   AS MACH_IN_FLD_INAC_MTH_AOT
           ,DM.MDL_DURN_TM_NUM            AS MDL_DURN_TM_NUM
           ,DM.COPY_VOL_DAYS_AOT          AS COPY_VOL_DAYS_AOT
           ,DM.MAX_COPY_PER_DAY_TOT_CNT   AS MAX_COPY_PER_DAY_TOT_CNT
           ,DM.MAX_COPY_PER_DAY_BLACK_CNT AS MAX_COPY_PER_DAY_BLACK_CNT
           ,DM.MAX_COPY_TEST_CNT          AS MAX_COPY_TEST_CNT
           ,DM.MDL_SPEED_BLACK_RATE       AS MDL_SPEED_BLACK_RATE
           ,DM.MDL_SPEED_COLOR_RATE       AS MDL_SPEED_COLOR_RATE
           ,DM.DS_MDL_PAPER_SIZE_CD       AS DS_MDL_PAPER_SIZE_CD
           ,DM.EZUPTIMEZONE               AS EZUPTIMEZONE_DM
           ,DM.EZUPTIME                   AS EZUPTIME_DM
        FROM
            DS_MDL        DM
        WHERE
            DM.GLBL_CMPY_CD     = #glblCmpyCd#
            AND DM.MDL_ID       = #mdlId#
            AND DM.EZCANCELFLAG = '0'
    </statement>

    <statement id="getSupplyMapData" parameterClass="Map" resultMap="result.getSupplyMapData">
        SELECT
            DMSR.DS_MDL_SPLY_RELN_PK  AS DS_MDL_SPLY_RELN_PK
           ,DMSR.MDSE_CD              AS MDSE_CD
           ,MD.IMG_SPLY_OEM_CD        AS IMG_SPLY_OEM_CD
<!-- START START 2016/09/16 N.Arai [QC#11616, MOD] -->
<!--       ,MD.MDSE_NM                AS MDSE_NM   -->
           ,MD.MDSE_DESC_SHORT_TXT    AS MDSE_DESC_SHORT_TXT
<!-- END START 2016/09/16 N.Arai [QC#11616, MOD] -->
           ,MICT.MDSE_ITEM_CLS_TP_NM  AS MDSE_ITEM_CLS_TP_NM
           ,IST.IMG_SPLY_TP_NM        AS IMG_SPLY_TP_NM
           ,ISCT.IMG_SPLY_COLOR_TP_NM AS IMG_SPLY_COLOR_TP_NM
           ,MD.IMG_SPLY_YIELD_CNT     AS IMG_SPLY_YIELD_CNT
           ,ISYT.IMG_SPLY_YIELD_TP_NM AS IMG_SPLY_YIELD_TP_NM
           ,DMSR.SPLY_TOL_PCT         AS SPLY_TOL_PCT
           ,DMSR.CUST_STK_QTY         AS CUST_STK_QTY
           ,DMSR.EFF_FROM_DT          AS EFF_FROM_DT
           ,DMSR.EFF_THRU_DT          AS EFF_THRU_DT
           ,DMSR.SPLY_INIT_QTY        AS SPLY_INIT_QTY
           ,DMSR.SPLY_CONTR_QTY       AS SPLY_CONTR_QTY
           ,DMSR.EZUPTIMEZONE         AS EZUPTIMEZONE_DMSR
           ,DMSR.EZUPTIME             AS EZUPTIME_DMSR
           <!-- START 2016/12/02 K.Kojima [QC#14204, ADD] -->
           ,DMSR.EZINTIME             AS XX_REC_HIST_CRAT_TS_B
           ,DMSR.EZINUSERID           AS XX_REC_HIST_CRAT_BY_NM_B
           ,DMSR.EZUPTIME             AS XX_REC_HIST_UPD_TS_B
           ,DMSR.EZUPUSERID           AS XX_REC_HIST_UPD_BY_NM_B
           ,DMSR.EZTABLEID            AS XX_REC_HIST_TBL_NM_B
           <!-- END 2016/12/02 K.Kojima [QC#14204, ADD] -->
        FROM
            DS_MDL_SPLY_RELN  DMSR
           ,MDSE              MD
           ,MDSE_ITEM_CLS_TP  MICT
           ,IMG_SPLY_TP       IST
           ,IMG_SPLY_COLOR_TP ISCT
           ,IMG_SPLY_YIELD_TP ISYT
        WHERE
            DMSR.GLBL_CMPY_CD            = #glblCmpyCd#
            AND DMSR.MDL_ID              = #mdlId#
            AND DMSR.ORD_TAKE_MDSE_FLG   = 'N'
            AND DMSR.EZCANCELFLAG        = '0'

            AND DMSR.GLBL_CMPY_CD        = MD.GLBL_CMPY_CD
            AND DMSR.MDSE_CD             = MD.MDSE_CD
            AND MD.EZCANCELFLAG          = '0'

            AND MD.GLBL_CMPY_CD          = MICT.GLBL_CMPY_CD (+)
            AND MD.MDSE_ITEM_CLS_TP_CD   = MICT.MDSE_ITEM_CLS_TP_CD (+)
            AND MICT.EZCANCELFLAG (+)    = '0'

            AND MD.GLBL_CMPY_CD          = IST.GLBL_CMPY_CD (+)
            AND MD.IMG_SPLY_TP_CD        = IST.IMG_SPLY_TP_CD (+)
            AND IST.EZCANCELFLAG (+)     = '0'

            AND MD.GLBL_CMPY_CD          = ISCT.GLBL_CMPY_CD (+)
            AND MD.IMG_SPLY_COLOR_TP_CD  = ISCT.IMG_SPLY_COLOR_TP_CD (+)
            AND ISCT.EZCANCELFLAG (+)    = '0'

            AND MD.GLBL_CMPY_CD          = ISYT.GLBL_CMPY_CD (+)
            AND MD.IMG_SPLY_YIELD_TP_CD  = ISYT.IMG_SPLY_YIELD_TP_CD (+)
            AND ISYT.EZCANCELFLAG (+)    = '0'
        UNION ALL
        SELECT
            DMSR.DS_MDL_SPLY_RELN_PK  AS DS_MDL_SPLY_RELN_PK
           ,DMSR.ORD_TAKE_MDSE_CD     AS MDSE_CD
           ,MD.IMG_SPLY_OEM_CD        AS IMG_SPLY_OEM_CD
<!-- START START 2016/09/16 N.Arai [QC#11616, MOD] -->
<!--       ,MD.MDSE_NM                AS MDSE_NM   -->
           ,MD.MDSE_DESC_SHORT_TXT    AS MDSE_DESC_SHORT_TXT
<!-- END START 2016/09/16 N.Arai [QC#11616, MOD] -->
           ,MICT.MDSE_ITEM_CLS_TP_NM  AS MDSE_ITEM_CLS_TP_NM
           ,IST.IMG_SPLY_TP_NM        AS IMG_SPLY_TP_NM
           ,ISCT.IMG_SPLY_COLOR_TP_NM AS IMG_SPLY_COLOR_TP_NM
           ,MD.IMG_SPLY_YIELD_CNT     AS IMG_SPLY_YIELD_CNT
           ,ISYT.IMG_SPLY_YIELD_TP_NM AS IMG_SPLY_YIELD_TP_NM
           ,DMSR.SPLY_TOL_PCT         AS SPLY_TOL_PCT
           ,DMSR.CUST_STK_QTY         AS CUST_STK_QTY
           ,DMSR.EFF_FROM_DT          AS EFF_FROM_DT
           ,DMSR.EFF_THRU_DT          AS EFF_THRU_DT
           ,DMSR.SPLY_INIT_QTY        AS SPLY_INIT_QTY
           ,DMSR.SPLY_CONTR_QTY       AS SPLY_CONTR_QTY
           ,DMSR.EZUPTIMEZONE         AS EZUPTIMEZONE_DMSR
           ,DMSR.EZUPTIME             AS EZUPTIME_DMSR
           <!-- START 2016/12/02 K.Kojima [QC#14204, ADD] -->
           ,DMSR.EZINTIME             AS XX_REC_HIST_CRAT_TS_B
           ,DMSR.EZINUSERID           AS XX_REC_HIST_CRAT_BY_NM_B
           ,DMSR.EZUPTIME             AS XX_REC_HIST_UPD_TS_B
           ,DMSR.EZUPUSERID           AS XX_REC_HIST_UPD_BY_NM_B
           ,DMSR.EZTABLEID            AS XX_REC_HIST_TBL_NM_B
           <!-- END 2016/12/02 K.Kojima [QC#14204, ADD] -->
        FROM
            DS_MDL_SPLY_RELN  DMSR
           ,ORD_TAKE_MDSE     OTM
           ,MDSE              MD
           ,MDSE_ITEM_CLS_TP  MICT
           ,IMG_SPLY_TP       IST
           ,IMG_SPLY_COLOR_TP ISCT
           ,IMG_SPLY_YIELD_TP ISYT
        WHERE
            DMSR.GLBL_CMPY_CD            = #glblCmpyCd#
            AND DMSR.MDL_ID              = #mdlId#
            AND DMSR.ORD_TAKE_MDSE_FLG   = 'Y'
            AND DMSR.EZCANCELFLAG        = '0'

            AND DMSR.GLBL_CMPY_CD        = OTM.GLBL_CMPY_CD
            AND DMSR.ORD_TAKE_MDSE_CD    = OTM.ORD_TAKE_MDSE_CD
            AND OTM.EZCANCELFLAG         = '0'

            AND DMSR.GLBL_CMPY_CD        = MD.GLBL_CMPY_CD
            AND OTM.MDSE_CD              = MD.MDSE_CD
            AND MD.EZCANCELFLAG          = '0'

            AND MD.GLBL_CMPY_CD          = MICT.GLBL_CMPY_CD (+)
            AND MD.MDSE_ITEM_CLS_TP_CD   = MICT.MDSE_ITEM_CLS_TP_CD (+)
            AND MICT.EZCANCELFLAG (+)    = '0'


            AND MD.GLBL_CMPY_CD          = IST.GLBL_CMPY_CD (+)
            AND MD.IMG_SPLY_TP_CD        = IST.IMG_SPLY_TP_CD (+)
            AND IST.EZCANCELFLAG (+)     = '0'
            
            AND MD.GLBL_CMPY_CD          = ISCT.GLBL_CMPY_CD (+)
            AND MD.IMG_SPLY_COLOR_TP_CD  = ISCT.IMG_SPLY_COLOR_TP_CD (+)
            AND ISCT.EZCANCELFLAG (+)    = '0'

            AND MD.GLBL_CMPY_CD          = ISYT.GLBL_CMPY_CD (+)
            AND MD.IMG_SPLY_YIELD_TP_CD  = ISYT.IMG_SPLY_YIELD_TP_CD (+)
            AND ISYT.EZCANCELFLAG (+)    = '0'
        ORDER BY
            MDSE_CD
    </statement>

    <statement id="getMdseInfoForSupplyMap" parameterClass="Map" resultClass="Map">
        SELECT
            MD.IMG_SPLY_OEM_CD        AS IMG_SPLY_OEM_CD
<!-- START START 2016/09/16 N.Arai [QC#11616, MOD] -->
<!--       ,MD.MDSE_NM                AS MDSE_NM   -->
           ,MD.MDSE_DESC_SHORT_TXT    AS MDSE_DESC_SHORT_TXT
<!-- END START 2016/09/16 N.Arai [QC#11616, MOD] -->
           ,MICT.MDSE_ITEM_CLS_TP_NM  AS MDSE_ITEM_CLS_TP_NM
           ,IST.IMG_SPLY_TP_NM        AS IMG_SPLY_TP_NM
           ,ISCT.IMG_SPLY_COLOR_TP_NM AS IMG_SPLY_COLOR_TP_NM
           ,MD.IMG_SPLY_YIELD_CNT     AS IMG_SPLY_YIELD_CNT
           ,ISYT.IMG_SPLY_YIELD_TP_NM AS IMG_SPLY_YIELD_TP_NM
        FROM
            MDSE              MD
           ,MDSE_ITEM_CLS_TP  MICT
           ,IMG_SPLY_TP       IST
           ,IMG_SPLY_COLOR_TP ISCT
           ,IMG_SPLY_YIELD_TP ISYT
        WHERE
            MD.GLBL_CMPY_CD      = #glblCmpyCd#
            AND MD.MDSE_CD       = #mdseCd#
            AND MD.EZCANCELFLAG  = '0'

            AND MD.GLBL_CMPY_CD         = MICT.GLBL_CMPY_CD (+)
            AND MD.MDSE_ITEM_CLS_TP_CD  = MICT.MDSE_ITEM_CLS_TP_CD (+)
            AND MICT.EZCANCELFLAG (+)   = '0'

            AND MD.GLBL_CMPY_CD      = IST.GLBL_CMPY_CD (+)
            AND MD.IMG_SPLY_TP_CD    = IST.IMG_SPLY_TP_CD (+)
            AND IST.EZCANCELFLAG (+) = '0'

            AND MD.GLBL_CMPY_CD          = ISCT.GLBL_CMPY_CD (+)
            AND MD.IMG_SPLY_COLOR_TP_CD  = ISCT.IMG_SPLY_COLOR_TP_CD (+)
            AND ISCT.EZCANCELFLAG (+)    = '0'

            AND MD.GLBL_CMPY_CD          = ISYT.GLBL_CMPY_CD (+)
            AND MD.IMG_SPLY_YIELD_TP_CD  = ISYT.IMG_SPLY_YIELD_TP_CD (+)
            AND ISYT.EZCANCELFLAG (+)    = '0'
    </statement>

    <statement id="isExsitMdlSplyReln" parameterClass="Map" resultClass="Integer">
        SELECT
            COUNT(SR.DS_MDL_SPLY_RELN_PK)
        FROM
            DS_MDL_SPLY_RELN SR
        WHERE
            SR.GLBL_CMPY_CD     = #glblCmpyCd#
            AND SR.MDL_ID       = #mdlId#
            AND SR.MDSE_CD      = #mdseCd#
            AND SR.EZCANCELFLAG = '0'
    </statement>

    <statement id="getPrntInfoOfOtherMdl" parameterClass="Map" resultClass="Map">
        SELECT
            DMC.MDL_ID           AS MDL_ID
           ,DMC.PRNT_MDSE_CD     AS PRNT_MDSE_CD
           ,DMC.DS_MDL_CONFIG_PK AS DS_MDL_CONFIG_PK
        FROM
            DS_MDL        DM
           ,DS_MDL_CONFIG DMC
        WHERE
            DM.GLBL_CMPY_CD     = #glblCmpyCd#
            <isNotNull property="mdlId">
                AND DM.MDL_ID  != #mdlId#
            </isNotNull>
            AND DM.MDL_ACTV_FLG = 'Y'
            AND DM.EZCANCELFLAG = '0'

            AND DM.GLBL_CMPY_CD   = DMC.GLBL_CMPY_CD
            AND DM.MDL_ID         = DMC.MDL_ID      
            AND DMC.PRNT_MDSE_CD  = #prntMdseCd#
            AND DMC.CHILD_MDSE_CD IS NULL
            AND DMC.EZCANCELFLAG  = '0'
        ORDER BY
            DMC.MDL_ID
           ,DMC.DS_MDL_CONFIG_PK
    </statement>

    <statement id="getMdseCombination" parameterClass="Map" resultClass="Map">
        SELECT
            DMC.PRNT_MDSE_CD  AS PRNT_MDSE_CD
           ,DMC.CHILD_MDSE_CD AS CHILD_MDSE_CD
           ,DMC.EFF_FROM_DT   AS EFF_FROM_DT
           ,DMC.EFF_THRU_DT   AS EFF_THRU_DT
        FROM
            DS_MDL_CONFIG DMC
        WHERE
            DMC.GLBL_CMPY_CD       = #glblCmpyCd#
            AND DMC.MDL_ID         = #mdlId#
            AND DMC.PRNT_MDSE_CD   = #prntMdseCd#
            AND DMC.PRNT_CONFIG_PK = #dsMdlConfigPk#
            AND DMC.EZCANCELFLAG   = '0'
        ORDER BY
            DMC.DS_MDL_CONFIG_PK
    </statement>

    <statement id="getAllMdseV" parameterClass="Map" resultClass="Map">
        SELECT
            AMV.MDSE_CD  AS PRNT_MDSE_CD
        FROM
            ALL_MDSE_V AMV
        WHERE
            AMV.GLBL_CMPY_CD       = #glblCmpyCd#
            AND AMV.MDSE_CD        = #mdseCd#
    </statement>

    <statement id="getMercuryMdse" parameterClass="Map" resultClass="String">
        SELECT
            AMV.MDSE_CD AS MDSE_CD
        FROM
            ALL_MDSE_V AMV
        WHERE
            AMV.GLBL_CMPY_CD    = #glblCmpyCd#
        AND AMV.MDSE_CD         = #mdseCd#
        AND AMV.MDSE_RGTN_TP_CD = #mdseRgtnTpCd#
        ORDER BY
            AMV.MDSE_CD
    </statement>

    <statement id="getMachineOnlyInfo" parameterClass="Map" resultClass="Map">
        SELECT
            DMC.PRNT_MDSE_CD  AS PRNT_MDSE_CD
        FROM
            DS_MDL_CONFIG DMC
        WHERE
            DMC.GLBL_CMPY_CD            = #glblCmpyCd#
            AND DMC.PRNT_MDSE_CD        = #mdseCd#
            AND DMC.CHILD_MDSE_CD       IS NULL
            AND DMC.EZCANCELFLAG        = '0'
            AND NOT EXISTS (SELECT 
                                   *
                            FROM
                                 DS_MDL_CONFIG DMCC
                            WHERE
                                DMC.GLBL_CMPY_CD         = DMCC.GLBL_CMPY_CD
                                AND DMC.PRNT_MDSE_CD     = DMCC.PRNT_MDSE_CD
                                AND DMC.PRNT_CONFIG_PK   = DMCC.PRNT_CONFIG_PK
                                AND DMCC.CHILD_MDSE_CD   IS NOT NULL
                                AND DMCC.EZCANCELFLAG    = '0'
                            )
    </statement>

    <statement id="getSvcIstlCallGrpList" parameterClass="Map" resultClass="Map">
        SELECT
            SG.SVC_ISTL_CALL_GRP_NUM AS SVC_ISTL_CALL_GRP_NUM
           ,SG.SVC_ISTL_CALL_GRP_NM  AS SVC_ISTL_CALL_GRP_NM
        FROM
            SVC_ISTL_CALL_GRP SG
        WHERE
            SG.GLBL_CMPY_CD              = #glblCmpyCd#
            AND SG.SVC_ISTL_CALL_GRP_FLG = #svcIstlCallGrpFlg#
            AND SG.EZCANCELFLAG          = '0'
        ORDER BY
            SG.SVC_ISTL_CALL_GRP_NUM
    </statement>

    <statement id="getItemConfigDataList" parameterClass="Map" resultClass="Map">
        SELECT
            CASE WHEN DMCC.CHILD_MDSE_CD is null THEN DMC.DS_MDL_CONFIG_PK
                 else DMCC.DS_MDL_CONFIG_PK END DS_MDL_CONFIG_PK
           ,CASE WHEN DMCC.CHILD_MDSE_CD is null THEN DMC.PRNT_CONFIG_PK
                 else DMCC.PRNT_CONFIG_PK END PRNT_CONFIG_PK
           ,DMC.PRNT_MDSE_CD      AS PRNT_MDSE_CD
           ,DMCC.CHILD_MDSE_CD    AS CHILD_MDSE_CD
           ,CASE WHEN DMCC.CHILD_MDSE_CD is null THEN AMV.MDSE_DESC_SHORT_TXT 
                 else AMVC.MDSE_DESC_SHORT_TXT END MDSE_DESC_SHORT_TXT
           ,CASE WHEN DMCC.CHILD_MDSE_CD is null THEN MC.MDSE_CATG_NM 
                 else MCC.MDSE_CATG_NM END MDSE_CATG_NM
           ,CASE WHEN DMCC.CHILD_MDSE_CD is null THEN MT.MDSE_TP_NM 
                 else MTC.MDSE_TP_NM END MDSE_TP_NM
           ,CASE WHEN DMCC.CHILD_MDSE_CD is null THEN CP.COA_PROD_NM
                 else CPC.COA_PROD_NM END COA_PROD_NM
           ,CASE WHEN DMCC.CHILD_MDSE_CD is null THEN DMC.EFF_FROM_DT
                 else DMCC.EFF_FROM_DT END EFF_FROM_DT
           ,CASE WHEN DMCC.CHILD_MDSE_CD is null THEN DMC.EFF_THRU_DT
                 else DMCC.EFF_THRU_DT END EFF_THRU_DT
           ,DMC.EZUPTIMEZONE     AS EZUPTIMEZONE
           ,DMC.EZUPTIME         AS EZUPTIME
           ,CASE WHEN DMCC.CHILD_MDSE_CD is null THEN NVL(OTM.ORD_TAKE_MDSE_CD, DMC.PRNT_MDSE_CD)
                 else NVL(OTMC.ORD_TAKE_MDSE_CD, DMCC.CHILD_MDSE_CD) END MDSE_CD
           ,CASE WHEN DMCC.CHILD_MDSE_CD is null THEN DMC.EZINTIME
                 else DMCC.EZINTIME END XX_REC_HIST_CRAT_TS_A
           ,CASE WHEN DMCC.CHILD_MDSE_CD is null THEN DMC.EZINUSERID
                 else DMCC.EZINUSERID END XX_REC_HIST_CRAT_BY_NM_A
           ,CASE WHEN DMCC.CHILD_MDSE_CD is null THEN DMC.EZUPTIME
                 else DMCC.EZUPTIME END XX_REC_HIST_UPD_TS_A
           ,CASE WHEN DMCC.CHILD_MDSE_CD is null THEN DMC.EZUPUSERID
                 else DMCC.EZUPUSERID END XX_REC_HIST_UPD_BY_NM_A
           ,CASE WHEN DMCC.CHILD_MDSE_CD is null THEN DMC.EZTABLEID
                 else DMCC.EZTABLEID END XX_REC_HIST_TBL_NM_A
        FROM
            DS_MDL           DM
           ,DS_MDL_CONFIG    DMC
           ,DS_MDL_CONFIG    DMCC
           ,ALL_MDSE_V       AMV
           ,ORD_TAKE_MDSE    OTM
           ,MDSE_CATG        MC
           ,MDSE_TP          MT
           ,COA_PROD         CP
           ,ORD_TAKE_MDSE    OTMC
           ,ALL_MDSE_V       AMVC
           ,MDSE_CATG        MCC
           ,MDSE_TP          MTC
           ,COA_PROD         CPC
        WHERE
                DM.GLBL_CMPY_CD          = #glblCmpyCd#
            AND DM.MDL_ID                = #mdlId#
            AND DM.EZCANCELFLAG          = '0'
            
            AND DM.GLBL_CMPY_CD          = DMC.GLBL_CMPY_CD
            AND DM.MDL_ID                = DMC.MDL_ID
            AND DMC.CHILD_MDSE_CD        IS NULL
            AND DMC.EZCANCELFLAG         = '0'
            
            AND DM.GLBL_CMPY_CD          = DMCC.GLBL_CMPY_CD(+)
            AND DM.MDL_ID                = DMCC.MDL_ID(+)
            AND DMC.PRNT_CONFIG_PK       = DMCC.PRNT_CONFIG_PK(+)
            AND DMC.PRNT_MDSE_CD         = DMCC.PRNT_MDSE_CD(+)
            AND DMCC.EZCANCELFLAG(+)     = '0'

            AND DMC.GLBL_CMPY_CD         = AMV.GLBL_CMPY_CD
            AND DMC.PRNT_MDSE_CD         = AMV.MDSE_CD
            AND AMV.EZCANCELFLAG         = '0'
            AND DMC.GLBL_CMPY_CD         = OTM.GLBL_CMPY_CD(+)
            AND OTM.ORD_TAKE_MDSE_CD(+)  = SUBSTR(DMC.PRNT_MDSE_CD, 1, 8)
            AND OTM.EZCANCELFLAG(+)      = '0'

            AND AMV.GLBL_CMPY_CD         = MC.GLBL_CMPY_CD (+)
            AND AMV.MDSE_CATG_CD         = MC.MDSE_CATG_CD (+)
            AND MC.EZCANCELFLAG (+)      = '0'

            AND AMV.GLBL_CMPY_CD         = MT.GLBL_CMPY_CD (+)
            AND AMV.MDSE_TP_CD           = MT.MDSE_TP_CD (+)
            AND MT.EZCANCELFLAG (+)      = '0'

            AND AMV.GLBL_CMPY_CD         = CP.GLBL_CMPY_CD (+)
            AND AMV .COA_PROD_CD         = CP.COA_PROD_CD (+)
            AND CP.EZCANCELFLAG (+)      = '0'

            AND DMCC.GLBL_CMPY_CD        = OTMC.GLBL_CMPY_CD(+)
            AND OTMC.ORD_TAKE_MDSE_CD(+) = SUBSTR(DMCC.CHILD_MDSE_CD, 1, 8)
            AND OTMC.EZCANCELFLAG(+)     = '0'

            AND DMCC.GLBL_CMPY_CD        = AMVC.GLBL_CMPY_CD(+)
            AND DMCC.CHILD_MDSE_CD       = AMVC.MDSE_CD(+)
            AND AMVC.EZCANCELFLAG(+)     = '0'

            AND AMVC.GLBL_CMPY_CD        = MCC.GLBL_CMPY_CD (+)
            AND AMVC.MDSE_CATG_CD        = MCC.MDSE_CATG_CD (+)
            AND MCC.EZCANCELFLAG (+)     = '0'

            AND AMVC.GLBL_CMPY_CD        = MTC.GLBL_CMPY_CD (+)
            AND AMVC.MDSE_TP_CD          = MTC.MDSE_TP_CD (+)
            AND MTC.EZCANCELFLAG (+)     = '0'

            AND AMVC.GLBL_CMPY_CD        = CPC.GLBL_CMPY_CD (+)
            AND AMVC .COA_PROD_CD        = CPC.COA_PROD_CD (+)
            AND CPC.EZCANCELFLAG (+)     = '0'
        ORDER BY
             DMC.PRNT_MDSE_CD
            ,DMC.PRNT_CONFIG_PK
            ,DMCC.CHILD_MDSE_CD  ASC NULLS FIRST
    </statement>
    <!-- 08/03/2017 CITS S.Endo Add Sol#072(QC#18386) START-->
    <statement id="getMdlCriticality" parameterClass="Map" resultClass="Map">
        SELECT
            MDSE.MDSE_CD MDSE_CD
           ,MDSE.MDSE_DESC_SHORT_TXT MDSE_DESC_SHORT_TXT
           ,MDSE.BACK_ORD_IMPCT_TP_CD BACK_ORD_IMPCT_TP_CD
           ,BIT.BACK_ORD_IMPCT_TP_DESC_TXT BACK_ORD_IMPCT_TP_DESC_TXT
           ,MBO.BO_IMPCT_TP_CD MDL_BACK_ORD_IMPCT_TP_CD
           ,BIT2.BACK_ORD_IMPCT_TP_DESC_TXT MDL_BACK_ORD_IMPCT_TP_DESC_TXT
           ,MBO.MDL_BO_IMPCT_PK MDL_BO_PK
        FROM
            MDL_BO_IMPCT MBO
           ,MDSE MDSE
           ,BACK_ORD_IMPCT_TP BIT
           ,BACK_ORD_IMPCT_TP BIT2
        WHERE
            MBO.GLBL_CMPY_CD                            = #glblCmpyCd#
        AND MBO.MDL_ID                                  = #mdlId#
        AND MBO.MDSE_CD                                 = MDSE.MDSE_CD
        AND MBO.GLBL_CMPY_CD                            = MDSE.GLBL_CMPY_CD
        AND NVL(MDSE.BACK_ORD_IMPCT_TP_CD,#emptySpace#) = BIT.BACK_ORD_IMPCT_TP_CD(+)
        AND MDSE.GLBL_CMPY_CD                           = BIT.GLBL_CMPY_CD(+)
        AND NVL(MBO.BO_IMPCT_TP_CD,#emptySpace#)        = BIT2.BACK_ORD_IMPCT_TP_CD(+)
        AND MBO.GLBL_CMPY_CD                            = BIT2.GLBL_CMPY_CD(+)
        AND MBO.EZCANCELFLAG                            = '0'
        AND MDSE.EZCANCELFLAG                           = '0'
        AND BIT.EZCANCELFLAG(+)                         = '0'
        AND BIT2.EZCANCELFLAG(+)                        = '0'
        UNION ALL
        SELECT
            MBO.MDSE_CD MDSE_CD
           ,MDSE.MDSE_DESC_SHORT_TXT MDSE_DESC_SHORT_TXT
           ,MDSE.BACK_ORD_IMPCT_TP_CD BACK_ORD_IMPCT_TP_CD
           ,BIT.BACK_ORD_IMPCT_TP_DESC_TXT BACK_ORD_IMPCT_TP_DESC_TXT
           ,MBO.BO_IMPCT_TP_CD MDL_BACK_ORD_IMPCT_TP_CD
           ,BIT2.BACK_ORD_IMPCT_TP_DESC_TXT MDL_BACK_ORD_IMPCT_TP_DESC_TXT
           ,MBO.MDL_BO_IMPCT_PK MDL_BO_PK
        FROM
            MDL_BO_IMPCT MBO
           ,ORD_TAKE_MDSE OT
           ,MDSE MDSE
           ,BACK_ORD_IMPCT_TP BIT
           ,BACK_ORD_IMPCT_TP BIT2
        WHERE
            MBO.GLBL_CMPY_CD                            = #glblCmpyCd#
        AND MBO.MDL_ID                                  = #mdlId#
        AND MBO.MDSE_CD                                 = OT.ORD_TAKE_MDSE_CD
        AND MBO.GLBL_CMPY_CD                            = OT.GLBL_CMPY_CD
        AND OT.MDSE_CD                                  = MDSE.MDSE_CD
        AND OT.GLBL_CMPY_CD                             = MDSE.GLBL_CMPY_CD
        AND NVL(MDSE.BACK_ORD_IMPCT_TP_CD,#emptySpace#) = BIT.BACK_ORD_IMPCT_TP_CD(+)
        AND MDSE.GLBL_CMPY_CD                           = BIT.GLBL_CMPY_CD(+)
        AND NVL(MBO.BO_IMPCT_TP_CD,#emptySpace#)        = BIT2.BACK_ORD_IMPCT_TP_CD(+)
        AND MBO.GLBL_CMPY_CD                            = BIT2.GLBL_CMPY_CD(+)
        AND MBO.EZCANCELFLAG                            = '0'
        AND OT.EZCANCELFLAG                             = '0'
        AND MDSE.EZCANCELFLAG                           = '0'
        AND BIT.EZCANCELFLAG(+)                         = '0'
        AND BIT2.EZCANCELFLAG(+)                        = '0'
        ORDER BY MDL_BO_PK ASC
    </statement>

    <statement id="getCriticalityMstList" parameterClass="Map" resultClass="Map">
        SELECT
            BIT.BACK_ORD_IMPCT_TP_CD BACK_ORD_IMPCT_TP_CD
           ,BIT.BACK_ORD_IMPCT_TP_DESC_TXT BACK_ORD_IMPCT_TP_DESC_TXT
        FROM
            BACK_ORD_IMPCT_TP BIT
        WHERE
            BIT.GLBL_CMPY_CD          = #glblCmpyCd#
        AND BIT.EZCANCELFLAG          = '0'
        ORDER BY 
            BACK_ORD_IMPCT_TP_SORT_NUM
    </statement>

    <statement id="getItemInfoForCriticality" parameterClass="Map" resultClass="Map">
        SELECT
            MDSE.MDSE_DESC_SHORT_TXT MDSE_DESC_SHORT_TXT
           ,MDSE.BACK_ORD_IMPCT_TP_CD BACK_ORD_IMPCT_TP_CD
           ,BIT.BACK_ORD_IMPCT_TP_DESC_TXT BACK_ORD_IMPCT_TP_DESC_TXT
        FROM
            MDSE MDSE
           ,BACK_ORD_IMPCT_TP BIT
        WHERE
            MDSE.MDSE_CD              = #mdseCd#
        AND MDSE.GLBL_CMPY_CD         = #glblCmpyCd#
        AND MDSE.BACK_ORD_IMPCT_TP_CD = BIT.BACK_ORD_IMPCT_TP_CD(+)
        AND MDSE.GLBL_CMPY_CD         = BIT.GLBL_CMPY_CD(+)
        AND MDSE.EZCANCELFLAG         = '0'
        AND BIT.EZCANCELFLAG(+)       = '0'
        UNION ALL
        SELECT
            MDSE.MDSE_DESC_SHORT_TXT MDSE_DESC_SHORT_TXT
           ,MDSE.BACK_ORD_IMPCT_TP_CD BACK_ORD_IMPCT_TP_CD
           ,BIT.BACK_ORD_IMPCT_TP_DESC_TXT BACK_ORD_IMPCT_TP_DESC_TXT
        FROM
            ORD_TAKE_MDSE OT
           ,MDSE MDSE
           ,BACK_ORD_IMPCT_TP BIT
        WHERE
            OT.ORD_TAKE_MDSE_CD       = #mdseCd#
        AND OT.GLBL_CMPY_CD           = #glblCmpyCd#
        AND OT.MDSE_CD                = MDSE.MDSE_CD
        AND OT.GLBL_CMPY_CD           = MDSE.GLBL_CMPY_CD
        AND MDSE.BACK_ORD_IMPCT_TP_CD = BIT.BACK_ORD_IMPCT_TP_CD(+)
        AND MDSE.GLBL_CMPY_CD         = BIT.GLBL_CMPY_CD(+)
        AND MDSE.EZCANCELFLAG         = '0'
        AND BIT.EZCANCELFLAG(+)       = '0'
    </statement>
    <!-- 08/30/2017 CITS S.Endo Mod QC#20732 START -->
    <statement id="checkItemIsSetParent" parameterClass="Map" resultClass="Map">
        SELECT
            1
        FROM 
            ALL_MDSE_V
        WHERE
            GLBL_CMPY_CD    = #glblCmpyCd#
        AND MDSE_CD         = #mdseCd#
        AND MDSE_ITEM_TP_CD = #setParentCd#
        AND EZCANCELFLAG    = '0'
    </statement>
    <!-- 08/30/2017 CITS S.Endo Mod QC#20732 END -->
    <statement id="getModelBoImpctPk" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            MDL_BO_IMPCT_PK
        FROM 
            MDL_BO_IMPCT
        WHERE
            GLBL_CMPY_CD  = #glblCmpyCd#
        AND MDL_ID        = #mdlId#
        <isNotNull property="mdseCd">
        AND MDSE_CD       = #mdseCd#
        </isNotNull>
        AND EZCANCELFLAG  = '0'
    </statement>

    <statement id="getModelBoImpctData" parameterClass="Map" resultClass="Map">
        SELECT
            MDL_BO_IMPCT_PK
           ,MDSE_CD
        FROM 
            MDL_BO_IMPCT
        WHERE
            GLBL_CMPY_CD  = #glblCmpyCd#
        AND MDL_ID        = #mdlId#
        AND EZCANCELFLAG  = '0'
    </statement>
     <!-- 08/03/2017 CITS S.Endo Add Sol#072(QC#18386) END-->
    <typeAlias alias="NSAL0490CMsg"  type="business.blap.NSAL0490.NSAL0490CMsg"/>
    <typeAlias alias="NSAL0490_BSMsg" type="business.blap.NSAL0490.NSAL0490_BSMsg"/>

    <resultMap id="result.getHdrData" class="NSAL0490CMsg">
        <result property="mdlId"                    column="MDL_ID"                 javaType="EZDCBigDecimalItem"/>
        <result property="mdlDescTxt"               column="MDL_DESC_TXT"           javaType="EZDCStringItem"/>
        <result property="mdlGrpNm"                 column="MDL_GRP_NM"             javaType="EZDCStringItem"/>
        <result property="svcSegCd"                 column="SVC_SEG_CD"             javaType="EZDCStringItem"/>
        <result property="mdlActvFlg"               column="MDL_ACTV_FLG"           javaType="EZDCStringItem"/>
        <result property="ezInTime_CD"              column="EZINTIME_DM"            javaType="EZDCStringItem"/>
        <result property="mtrGrpPk"                 column="MTR_GRP_PK"             javaType="EZDCBigDecimalItem"/>
        <result property="svcSkillNum"              column="SVC_SKILL_NUM"          javaType="EZDCStringItem"/>
<!-- START 2016/02/10 A.Kohinata [QC#1157, ADD] -->
        <result property="svcSkillDescTxt"          column="SVC_SKILL_DESC_TXT"     javaType="EZDCStringItem"/>
<!-- END 2016/02/10 A.Kohinata [QC#1157, ADD] -->
        <result property="svcIstlRuleNum"           column="SVC_ISTL_RULE_NUM"      javaType="EZDCStringItem"/>
        <result property="svcDeinsRuleNum"          column="SVC_DEINS_RULE_NUM"     javaType="EZDCStringItem"/>
        <result property="svcIstlReqFlg"            column="SVC_ISTL_REQ_FLG"       javaType="EZDCStringItem"/>
        <result property="ezUpTimeZone_DM"          column="EZUPTIMEZONE_DM"        javaType="EZDCStringItem"/>
        <result property="ezUpTime_DM"              column="EZUPTIME_DM"            javaType="EZDCStringItem"/>
<!-- START 2016/04/28 M.Gotou [QC#6089, ADD] -->
        <result property="custIstlFlg"              column="CUST_ISTL_FLG"          javaType="EZDCStringItem"/>
<!-- END 2016/04/28 M.Gotou [QC#6089, ADD] -->
        <result property="siteSrvyReqFlg"           column="SITE_SRVY_REQ_FLG"      javaType="EZDCStringItem"/>
        <result property="svcIstlCallGrpNum_IN"     column="SVC_ISTL_CALL_GRP_NUM"  javaType="EZDCStringItem"/>
        <result property="svcIstlCallGrpNum_DE"     column="SVC_DEINS_CALL_GRP_NUM" javaType="EZDCStringItem"/>
<!-- START 2016/05/19 K.Kasai [QC#447, ADD] -->
        <result property="eolSvcContrCmntTxt"       column="EOL_SVC_CONTR_CMNT_TXT" javaType="EZDCStringItem"/>
        <result property="eolTmMatCmntTxt"          column="EOL_TM_MAT_CMNT_TXT"    javaType="EZDCStringItem"/>
        <result property="eolTechSprtCmntTxt"       column="EOL_TECH_SPRT_CMNT_TXT" javaType="EZDCStringItem"/>
        <result property="eolOthCmntTxt"            column="EOL_OTH_CMNT_TXT"       javaType="EZDCStringItem"/>
<!-- START 2017/12/22 U.Kim [QC#22448, ADD] -->
        <result property="eolDisptCmntTxt"          column="EOL_DISPT_CMNT_TXT"     javaType="EZDCStringItem"/>
<!-- END 2017/12/22 U.Kim [QC#22448, ADD] -->
<!-- END 2016/05/19 K.Kasai [QC#447, ADD] -->
        <!-- START 2016/12/02 K.Kojima [QC#14204, ADD] -->
        <result property="xxRecHistCratTs"          column="XX_REC_HIST_CRAT_TS"    javaType="EZDSStringItem"/>
        <result property="xxRecHistCratByNm"        column="XX_REC_HIST_CRAT_BY_NM" javaType="EZDSStringItem"/>
        <result property="xxRecHistUpdTs"           column="XX_REC_HIST_UPD_TS"     javaType="EZDSStringItem"/>
        <result property="xxRecHistUpdByNm"         column="XX_REC_HIST_UPD_BY_NM"  javaType="EZDSStringItem"/>
        <result property="xxRecHistTblNm"           column="XX_REC_HIST_TBL_NM"     javaType="EZDSStringItem"/>
        <!-- END 2016/12/02 K.Kojima [QC#14204, ADD] -->
        <!-- START 2017/11/02 S.Katsuma [SOL#170(QC#18624), ADD] -->
        <result property="svcLbGrpCd"               column="SVC_LB_GRP_CD"          javaType="EZDSStringItem"/>
        <!-- END 2017/11/02 S.Katsuma [SOL#170(QC#18624), ADD] -->
        <!-- START 2018/01/15 K.Kojima [QC#23352, ADD] -->
        <result property="svcMdlTpCd"               column="SVC_MDL_TP_CD"          javaType="EZDSStringItem"/>
        <!-- END 2018/01/15 K.Kojima [QC#23352, ADD] -->
    </resultMap>

    <resultMap id="result.getSvcRulesData" class="NSAL0490CMsg">
        <result property="rcllIntvlDaysAot"      column="RCLL_INTVL_DAYS_AOT"        javaType="EZDCBigDecimalItem"/>
        <result property="rcllCopyVolCnt"        column="RCLL_COPY_VOL_CNT"          javaType="EZDCBigDecimalItem"/>
        <result property="rcllGlblIntvlDaysAot"  column="RCLL_GLBL_INTVL_DAYS_AOT"   javaType="EZDCBigDecimalItem"/>
        <result property="rcllGlblCopyVolCnt"    column="RCLL_GLBL_COPY_VOL_CNT"     javaType="EZDCBigDecimalItem"/>
        <result property="xxRtoTaskTmNum"        column="RSP_TM_UP_MN_AOT"           javaType="EZDCBigDecimalItem"/>
        <result property="xsVisitCnt"            column="XS_VISIT_CNT"               javaType="EZDCBigDecimalItem"/>
        <result property="phoneFixFlg"           column="PHONE_FIX_FLG"              javaType="EZDCStringItem"/>
        <result property="phoneFixIntvlDaysAot"  column="PHONE_FIX_INTVL_DAYS_AOT"   javaType="EZDCBigDecimalItem"/>
        <result property="afterHourAllwFlg"      column="AFTER_HOUR_ALLW_FLG"        javaType="EZDCStringItem"/>
        <result property="machInFldInacMthAot"   column="MACH_IN_FLD_INAC_MTH_AOT"   javaType="EZDCBigDecimalItem"/>
        <result property="mdlDurnTmNum"          column="MDL_DURN_TM_NUM"            javaType="EZDCBigDecimalItem"/>
        <result property="copyVolDaysAot"        column="COPY_VOL_DAYS_AOT"          javaType="EZDCBigDecimalItem"/>
        <result property="maxCopyPerDayTotCnt"   column="MAX_COPY_PER_DAY_TOT_CNT"   javaType="EZDCBigDecimalItem"/>
        <result property="maxCopyPerDayBlackCnt" column="MAX_COPY_PER_DAY_BLACK_CNT" javaType="EZDCBigDecimalItem"/>
        <result property="maxCopyTestCnt"        column="MAX_COPY_TEST_CNT"          javaType="EZDCBigDecimalItem"/>
        <result property="mdlSpeedBlackRate"     column="MDL_SPEED_BLACK_RATE"       javaType="EZDCBigDecimalItem"/>
        <result property="mdlSpeedColorRate"     column="MDL_SPEED_COLOR_RATE"       javaType="EZDCBigDecimalItem"/>
        <result property="dsMdlPaperSizeCd"      column="DS_MDL_PAPER_SIZE_CD"       javaType="EZDCStringItem"/>
        <result property="ezUpTimeZone_DM"       column="EZUPTIMEZONE_DM"            javaType="EZDCStringItem"/>
        <result property="ezUpTime_DM"           column="EZUPTIME_DM"                javaType="EZDCStringItem"/>
    </resultMap>

    <resultMap id="result.getSupplyMapData" class="NSAL0490_BSMsg">
        <result property="dsMdlSplyRelnPk_B"  column="DS_MDL_SPLY_RELN_PK"  javaType="EZDCBigDecimalItem"/>
        <result property="mdseCd_B"           column="MDSE_CD"              javaType="EZDCStringItem"/>
        <result property="imgSplyOemCd_B"     column="IMG_SPLY_OEM_CD"      javaType="EZDCStringItem"/>
<!-- START START 2016/09/16 N.Arai [QC#11616, MOD] -->
<!--    <result property="mdseNm_B"           column="MDSE_NM"              javaType="EZDCStringItem"/> -->
        <result property="mdseDescShortTxt_B" column="MDSE_DESC_SHORT_TXT"  javaType="EZDCStringItem"/>
<!-- END START 2016/09/16 N.Arai [QC#11616, MOD] -->
        <result property="mdseItemClsTpNm_B"  column="MDSE_ITEM_CLS_TP_NM"  javaType="EZDCStringItem"/>
        <result property="imgSplyTpNm_B"      column="IMG_SPLY_TP_NM"       javaType="EZDCStringItem"/>
        <result property="imgSplyColorTpNm_B" column="IMG_SPLY_COLOR_TP_NM" javaType="EZDCStringItem"/>
        <result property="imgSplyYieldCnt_B"  column="IMG_SPLY_YIELD_CNT"   javaType="EZDCBigDecimalItem"/>
        <result property="imgSplyYieldTpNm_B" column="IMG_SPLY_YIELD_TP_NM" javaType="EZDCStringItem"/>
        <result property="splyTolPct_B"       column="SPLY_TOL_PCT"         javaType="EZDCBigDecimalItem"/>
        <result property="custStkQty_B"       column="CUST_STK_QTY"         javaType="EZDCBigDecimalItem"/>
        <result property="splyInitQty_B"      column="SPLY_INIT_QTY"        javaType="EZDCBigDecimalItem"/>
        <result property="splyContrQty_B"     column="SPLY_CONTR_QTY"       javaType="EZDCBigDecimalItem"/>
        <result property="effFromDt_B"        column="EFF_FROM_DT"          javaType="EZDCStringItem"/>
        <result property="effThruDt_B"        column="EFF_THRU_DT"          javaType="EZDCStringItem"/>
        <result property="ezUpTimeZone_B"     column="EZUPTIMEZONE_DMSR"    javaType="EZDCStringItem"/>
        <result property="ezUpTime_B"         column="EZUPTIME_DMSR"        javaType="EZDCStringItem"/>
        <!-- START 2016/12/02 K.Kojima [QC#14204, ADD] -->
        <result property="xxRecHistCratTs_B"   column="XX_REC_HIST_CRAT_TS_B"    javaType="EZDSStringItem"/>
        <result property="xxRecHistCratByNm_B" column="XX_REC_HIST_CRAT_BY_NM_B" javaType="EZDSStringItem"/>
        <result property="xxRecHistUpdTs_B"    column="XX_REC_HIST_UPD_TS_B"     javaType="EZDSStringItem"/>
        <result property="xxRecHistUpdByNm_B"  column="XX_REC_HIST_UPD_BY_NM_B"  javaType="EZDSStringItem"/>
        <result property="xxRecHistTblNm_B"    column="XX_REC_HIST_TBL_NM_B"     javaType="EZDSStringItem"/>
        <!-- END 2016/12/02 K.Kojima [QC#14204, ADD] -->
    </resultMap>

    <!-- START 2024/03/14 K.Watanabe [QC#63542, ADD] -->
    <statement id="getItemInfoForNotEnteredEndDate" parameterClass="Map" resultClass="Map">
        SELECT
            T.DS_MDL_SPLY_RELN_PK            AS DS_MDL_SPLY_RELN_PK
           ,T.MDSE_CD                        AS MDSE_CD
           ,T.IMG_SPLY_OEM_CD                AS IMG_SPLY_OEM_CD
           ,T.MDSE_DESC_SHORT_TXT            AS MDSE_DESC_SHORT_TXT
           ,T.MDSE_ITEM_CLS_TP_NM            AS MDSE_ITEM_CLS_TP_NM
           ,T.IMG_SPLY_TP_NM                 AS IMG_SPLY_TP_NM
           ,T.IMG_SPLY_COLOR_TP_NM           AS IMG_SPLY_COLOR_TP_NM
           ,T.IMG_SPLY_YIELD_CNT             AS IMG_SPLY_YIELD_CNT
           ,T.IMG_SPLY_YIELD_TP_NM           AS IMG_SPLY_YIELD_TP_NM
           ,T.SPLY_TOL_PCT                   AS SPLY_TOL_PCT
           ,T.CUST_STK_QTY                   AS CUST_STK_QTY
           ,T.EFF_FROM_DT                    AS EFF_FROM_DT
           ,T.EFF_THRU_DT                    AS EFF_THRU_DT
           ,T.SPLY_INIT_QTY                  AS SPLY_INIT_QTY
           ,T.SPLY_CONTR_QTY                 AS SPLY_CONTR_QTY
        FROM
            (
            SELECT
                DMSR.DS_MDL_SPLY_RELN_PK     AS DS_MDL_SPLY_RELN_PK
               ,DMSR.MDSE_CD                 AS MDSE_CD
               ,MD.IMG_SPLY_OEM_CD           AS IMG_SPLY_OEM_CD
               ,MD.MDSE_DESC_SHORT_TXT       AS MDSE_DESC_SHORT_TXT
               ,MICT.MDSE_ITEM_CLS_TP_NM     AS MDSE_ITEM_CLS_TP_NM
               ,IST.IMG_SPLY_TP_NM           AS IMG_SPLY_TP_NM
               ,ISCT.IMG_SPLY_COLOR_TP_NM    AS IMG_SPLY_COLOR_TP_NM
               ,MD.IMG_SPLY_YIELD_CNT        AS IMG_SPLY_YIELD_CNT
               ,ISYT.IMG_SPLY_YIELD_TP_NM    AS IMG_SPLY_YIELD_TP_NM
               ,DMSR.SPLY_TOL_PCT            AS SPLY_TOL_PCT
               ,DMSR.CUST_STK_QTY            AS CUST_STK_QTY
               ,DMSR.EFF_FROM_DT             AS EFF_FROM_DT
               ,DMSR.EFF_THRU_DT             AS EFF_THRU_DT
               ,DMSR.SPLY_INIT_QTY           AS SPLY_INIT_QTY
               ,DMSR.SPLY_CONTR_QTY          AS SPLY_CONTR_QTY
            FROM
                DS_MDL_SPLY_RELN             DMSR
               ,MDSE                         MD
               ,MDSE_ITEM_CLS_TP             MICT
               ,IMG_SPLY_TP                  IST
               ,IMG_SPLY_COLOR_TP            ISCT
               ,IMG_SPLY_YIELD_TP            ISYT
            WHERE
                DMSR.GLBL_CMPY_CD            = #glblCmpyCd#
                AND DMSR.MDL_ID              = #mdlId#
                AND DMSR.EFF_THRU_DT         IS NULL
                AND DMSR.ORD_TAKE_MDSE_FLG   = 'N'
                AND DMSR.EZCANCELFLAG        = '0'
                AND DMSR.GLBL_CMPY_CD        = MD.GLBL_CMPY_CD
                AND DMSR.MDSE_CD             = MD.MDSE_CD
                AND MD.EZCANCELFLAG          = '0'
                AND MD.GLBL_CMPY_CD          = MICT.GLBL_CMPY_CD (+)
                AND MD.MDSE_ITEM_CLS_TP_CD   = MICT.MDSE_ITEM_CLS_TP_CD (+)
                AND MICT.EZCANCELFLAG (+)    = '0'
                AND MD.GLBL_CMPY_CD          = IST.GLBL_CMPY_CD (+)
                AND MD.IMG_SPLY_TP_CD        = IST.IMG_SPLY_TP_CD (+)
                AND IST.EZCANCELFLAG (+)     = '0'
                AND MD.GLBL_CMPY_CD          = ISCT.GLBL_CMPY_CD (+)
                AND MD.IMG_SPLY_COLOR_TP_CD  = ISCT.IMG_SPLY_COLOR_TP_CD (+)
                AND ISCT.EZCANCELFLAG (+)    = '0'
                AND MD.GLBL_CMPY_CD          = ISYT.GLBL_CMPY_CD (+)
                AND MD.IMG_SPLY_YIELD_TP_CD  = ISYT.IMG_SPLY_YIELD_TP_CD (+)
                AND ISYT.EZCANCELFLAG (+)    = '0'
            UNION ALL
            SELECT
                DMSR.DS_MDL_SPLY_RELN_PK     AS DS_MDL_SPLY_RELN_PK
               ,DMSR.ORD_TAKE_MDSE_CD        AS MDSE_CD
               ,MD.IMG_SPLY_OEM_CD           AS IMG_SPLY_OEM_CD
               ,MD.MDSE_DESC_SHORT_TXT       AS MDSE_DESC_SHORT_TXT
               ,MICT.MDSE_ITEM_CLS_TP_NM     AS MDSE_ITEM_CLS_TP_NM
               ,IST.IMG_SPLY_TP_NM           AS IMG_SPLY_TP_NM
               ,ISCT.IMG_SPLY_COLOR_TP_NM    AS IMG_SPLY_COLOR_TP_NM
               ,MD.IMG_SPLY_YIELD_CNT        AS IMG_SPLY_YIELD_CNT
               ,ISYT.IMG_SPLY_YIELD_TP_NM    AS IMG_SPLY_YIELD_TP_NM
               ,DMSR.SPLY_TOL_PCT            AS SPLY_TOL_PCT
               ,DMSR.CUST_STK_QTY            AS CUST_STK_QTY
               ,DMSR.EFF_FROM_DT             AS EFF_FROM_DT
               ,DMSR.EFF_THRU_DT             AS EFF_THRU_DT
               ,DMSR.SPLY_INIT_QTY           AS SPLY_INIT_QTY
               ,DMSR.SPLY_CONTR_QTY          AS SPLY_CONTR_QTY
            FROM
                DS_MDL_SPLY_RELN             DMSR
               ,ORD_TAKE_MDSE                OTM
               ,MDSE                         MD
               ,MDSE_ITEM_CLS_TP             MICT
               ,IMG_SPLY_TP                  IST
               ,IMG_SPLY_COLOR_TP            ISCT
               ,IMG_SPLY_YIELD_TP            ISYT
            WHERE
                DMSR.GLBL_CMPY_CD            = #glblCmpyCd#
                AND DMSR.MDL_ID              = #mdlId#
                AND DMSR.EFF_THRU_DT         IS NULL
                AND DMSR.ORD_TAKE_MDSE_FLG   = 'Y'
                AND DMSR.EZCANCELFLAG        = '0'
                AND DMSR.GLBL_CMPY_CD        = OTM.GLBL_CMPY_CD
                AND DMSR.ORD_TAKE_MDSE_CD    = OTM.ORD_TAKE_MDSE_CD
                AND OTM.EZCANCELFLAG         = '0'
                AND DMSR.GLBL_CMPY_CD        = MD.GLBL_CMPY_CD
                AND OTM.MDSE_CD              = MD.MDSE_CD
                AND MD.EZCANCELFLAG          = '0'
                AND MD.GLBL_CMPY_CD          = MICT.GLBL_CMPY_CD (+)
                AND MD.MDSE_ITEM_CLS_TP_CD   = MICT.MDSE_ITEM_CLS_TP_CD (+)
                AND MICT.EZCANCELFLAG (+)    = '0'
                AND MD.GLBL_CMPY_CD          = IST.GLBL_CMPY_CD (+)
                AND MD.IMG_SPLY_TP_CD        = IST.IMG_SPLY_TP_CD (+)
                AND IST.EZCANCELFLAG (+)     = '0'
                AND MD.GLBL_CMPY_CD          = ISCT.GLBL_CMPY_CD (+)
                AND MD.IMG_SPLY_COLOR_TP_CD  = ISCT.IMG_SPLY_COLOR_TP_CD (+)
                AND ISCT.EZCANCELFLAG (+)    = '0'
                AND MD.GLBL_CMPY_CD          = ISYT.GLBL_CMPY_CD (+)
                AND MD.IMG_SPLY_YIELD_TP_CD  = ISYT.IMG_SPLY_YIELD_TP_CD (+)
                AND ISYT.EZCANCELFLAG (+)    = '0'
            ORDER BY
                MDSE_CD
            ) T
        WHERE
            ROWNUM                           &lt;= #rowNum#
        ORDER BY
            T.MDSE_CD
    </statement>
    <!-- END 2024/03/14 K.Watanabe [QC#63542, ADD] -->
</sqlMap>
