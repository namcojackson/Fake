<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NFCL3130Query">

    <!-- *********************************************************** -->
    <!-- ********** Bean Definition ******************************** -->
    <!-- *********************************************************** -->
    <typeAlias alias="NFCL3130CMsg"      type="business.blap.NFCL3130.NFCL3130CMsg"/>

    <statement id="findRcptSrc" parameterClass="Map" resultMap="result.findRcptSrc">
    SELECT
           INLINE1.AR_RCPT_SRC_CD                                     AR_RCPT_SRC_CD
          ,INLINE1.AR_RCPT_SRC_NM                                     AR_RCPT_SRC_NM
          ,INLINE1.AR_RCPT_SRC_SORT_NUM                               AR_RCPT_SRC_SORT_NUM
          ,INLINE1.AR_RCPT_SRC_DESC_TXT                               AR_RCPT_SRC_DESC_TXT
          ,INLINE1.AR_RCPT_SRC_TP_CD                                  AR_RCPT_SRC_TP_CD
          ,CASE WHEN INLINE1.EZCANCELFLAG = '0' THEN 'Y' ELSE 'N' END EZCANCELFLAG
          ,TO_CHAR(INLINE1.CASH_COA_CMPY_CD) || '.' || TO_CHAR(INLINE1.CASH_COA_BR_CD) || '.' || TO_CHAR(INLINE1.CASH_COA_CC_CD) || '.' || TO_CHAR(INLINE1.CASH_COA_ACCT_CD) || '.' || TO_CHAR(INLINE1.CASH_COA_PROD_CD) || '.' || TO_CHAR(INLINE1.CASH_COA_CH_CD) || '.' || TO_CHAR(INLINE1.CASH_COA_AFFL_CD) || '.' || TO_CHAR(INLINE1.CASH_COA_PROJ_CD) || '.' || TO_CHAR(INLINE1.CASH_COA_EXTN_CD)                                              AS CASH_COA
          ,TO_CHAR(INLINE1.RCPT_CONF_COA_CMPY_CD) || '.' || TO_CHAR(INLINE1.RCPT_CONF_COA_BR_CD) || '.' || TO_CHAR(INLINE1.RCPT_CONF_COA_CC_CD) || '.' || TO_CHAR(INLINE1.RCPT_CONF_COA_ACCT_CD) || '.' || TO_CHAR(INLINE1.RCPT_CONF_COA_PROD_CD) || '.' || TO_CHAR(INLINE1.RCPT_CONF_COA_CH_CD) || '.' || TO_CHAR(INLINE1.RCPT_CONF_COA_AFFL_CD) || '.' || TO_CHAR(INLINE1.RCPT_CONF_COA_PROJ_CD) || '.' || TO_CHAR(INLINE1.RCPT_CONF_COA_EXTN_CD) AS RCPT_COA
          ,TO_CHAR(INLINE1.REM_COA_CMPY_CD) || '.' || TO_CHAR(INLINE1.REM_COA_BR_CD) || '.' || TO_CHAR(INLINE1.REM_COA_CC_CD) || '.' || TO_CHAR(INLINE1.REM_COA_ACCT_CD) || '.' || TO_CHAR(INLINE1.REM_COA_PROD_CD) || '.' || TO_CHAR(INLINE1.REM_COA_CH_CD) || '.' || TO_CHAR(INLINE1.REM_COA_AFFL_CD) || '.' || TO_CHAR(INLINE1.REM_COA_PROJ_CD) || '.' || TO_CHAR(INLINE1.REM_COA_EXTN_CD)                                                       AS REM_COA
          ,TO_CHAR(INLINE1.UNAPL_COA_CMPY_CD) || '.' || TO_CHAR(INLINE1.UNAPL_COA_BR_CD) || '.' || TO_CHAR(INLINE1.UNAPL_COA_CC_CD) || '.' || TO_CHAR(INLINE1.UNAPL_COA_ACCT_CD) || '.' || TO_CHAR(INLINE1.UNAPL_COA_PROD_CD) || '.' || TO_CHAR(INLINE1.UNAPL_COA_CH_CD) || '.' || TO_CHAR(INLINE1.UNAPL_COA_AFFL_CD) || '.' || TO_CHAR(INLINE1.UNAPL_COA_PROJ_CD) || '.' || TO_CHAR(INLINE1.UNAPL_COA_EXTN_CD)                                     AS UNAPL_COA
          ,TO_CHAR(INLINE1.UNID_COA_CMPY_CD) || '.' || TO_CHAR(INLINE1.UNID_COA_BR_CD) || '.' || TO_CHAR(INLINE1.UNID_COA_CC_CD) || '.' || TO_CHAR(INLINE1.UNID_COA_ACCT_CD) || '.' || TO_CHAR(INLINE1.UNID_COA_PROD_CD) || '.' || TO_CHAR(INLINE1.UNID_COA_CH_CD) || '.' || TO_CHAR(INLINE1.UNID_COA_AFFL_CD) || '.' || TO_CHAR(INLINE1.UNID_COA_PROJ_CD) || '.' || TO_CHAR(INLINE1.UNID_COA_EXTN_CD)                                              AS UNID_COA
          ,TO_CHAR(INLINE1.OACC_COA_CMPY_CD) || '.' || TO_CHAR(INLINE1.OACC_COA_BR_CD) || '.' || TO_CHAR(INLINE1.OACC_COA_CC_CD) || '.' || TO_CHAR(INLINE1.OACC_COA_ACCT_CD) || '.' || TO_CHAR(INLINE1.OACC_COA_PROD_CD) || '.' || TO_CHAR(INLINE1.OACC_COA_CH_CD) || '.' || TO_CHAR(INLINE1.OACC_COA_AFFL_CD) || '.' || TO_CHAR(INLINE1.OACC_COA_PROJ_CD) || '.' || TO_CHAR(INLINE1.OACC_COA_EXTN_CD)                                              AS OACC_COA
          ,INLINE1.CASH_COA_CMPY_CD
          ,INLINE1.CASH_COA_BR_CD
          ,INLINE1.CASH_COA_CC_CD
          ,INLINE1.CASH_COA_ACCT_CD
          ,INLINE1.CASH_COA_PROD_CD
          ,INLINE1.CASH_COA_CH_CD
          ,INLINE1.CASH_COA_AFFL_CD
          ,INLINE1.CASH_COA_PROJ_CD
          ,INLINE1.CASH_COA_EXTN_CD
          ,INLINE1.RCPT_CONF_COA_CMPY_CD
          ,INLINE1.RCPT_CONF_COA_BR_CD
          ,INLINE1.RCPT_CONF_COA_CC_CD
          ,INLINE1.RCPT_CONF_COA_ACCT_CD
          ,INLINE1.RCPT_CONF_COA_PROD_CD
          ,INLINE1.RCPT_CONF_COA_CH_CD
          ,INLINE1.RCPT_CONF_COA_AFFL_CD
          ,INLINE1.RCPT_CONF_COA_PROJ_CD
          ,INLINE1.RCPT_CONF_COA_EXTN_CD
          ,INLINE1.REM_COA_CMPY_CD
          ,INLINE1.REM_COA_BR_CD
          ,INLINE1.REM_COA_CC_CD
          ,INLINE1.REM_COA_ACCT_CD
          ,INLINE1.REM_COA_PROD_CD
          ,INLINE1.REM_COA_CH_CD
          ,INLINE1.REM_COA_AFFL_CD
          ,INLINE1.REM_COA_PROJ_CD
          ,INLINE1.REM_COA_EXTN_CD
          ,INLINE1.UNAPL_COA_CMPY_CD
          ,INLINE1.UNAPL_COA_BR_CD
          ,INLINE1.UNAPL_COA_CC_CD
          ,INLINE1.UNAPL_COA_ACCT_CD
          ,INLINE1.UNAPL_COA_PROD_CD
          ,INLINE1.UNAPL_COA_CH_CD
          ,INLINE1.UNAPL_COA_AFFL_CD
          ,INLINE1.UNAPL_COA_PROJ_CD
          ,INLINE1.UNAPL_COA_EXTN_CD
          ,INLINE1.UNID_COA_CMPY_CD
          ,INLINE1.UNID_COA_BR_CD
          ,INLINE1.UNID_COA_CC_CD
          ,INLINE1.UNID_COA_ACCT_CD
          ,INLINE1.UNID_COA_PROD_CD
          ,INLINE1.UNID_COA_CH_CD
          ,INLINE1.UNID_COA_AFFL_CD
          ,INLINE1.UNID_COA_PROJ_CD
          ,INLINE1.UNID_COA_EXTN_CD
          ,INLINE1.OACC_COA_CMPY_CD
          ,INLINE1.OACC_COA_BR_CD
          ,INLINE1.OACC_COA_CC_CD
          ,INLINE1.OACC_COA_ACCT_CD
          ,INLINE1.OACC_COA_PROD_CD
          ,INLINE1.OACC_COA_CH_CD
          ,INLINE1.OACC_COA_AFFL_CD
          ,INLINE1.OACC_COA_PROJ_CD
          ,INLINE1.OACC_COA_EXTN_CD
      FROM
           AR_RCPT_SRC INLINE1
     WHERE
           INLINE1.GLBL_CMPY_CD   = #glblCmpyCd#
       AND INLINE1.AR_RCPT_SRC_CD = #arRcptSrcCd#
    </statement>
    <resultMap id="result.findRcptSrc" class="NFCL3130CMsg">
        <result property="arRcptSrcCd"        column="AR_RCPT_SRC_CD"         javaType="EZDCDateItem"/>
        <result property="arRcptSrcNm"        column="AR_RCPT_SRC_NM"         javaType="EZDCDateItem"/>
        <result property="arRcptSrcDescTxt"   column="AR_RCPT_SRC_DESC_TXT"   javaType="EZDCDateItem"/>
        <result property="arRcptSrcTpCd_S1"   column="AR_RCPT_SRC_TP_CD"      javaType="EZDCDateItem"/>
        <result property="ezCancelFlag"       column="EZCANCELFLAG"           javaType="EZDCDateItem"/>
        <result property="xxScrItem61Txt_C1"  column="CASH_COA"               javaType="EZDCDateItem"/>
        <result property="xxScrItem61Txt_C2"  column="RCPT_COA"               javaType="EZDCDateItem"/>
        <result property="xxScrItem61Txt_C3"  column="REM_COA"                javaType="EZDCDateItem"/>
        <result property="xxScrItem61Txt_C4"  column="UNAPL_COA"              javaType="EZDCDateItem"/>
        <result property="xxScrItem61Txt_C5"  column="UNID_COA"               javaType="EZDCDateItem"/>
        <result property="xxScrItem61Txt_C6"  column="OACC_COA"               javaType="EZDCDateItem"/>
        <result property="xxScrItem61Txt_C1"  column="CASH_COA"               javaType="EZDCDateItem"/>
        <result property="cashCoaCmpyCd"      column="CASH_COA_CMPY_CD"       javaType="EZDCDateItem"/>
        <result property="cashCoaBrCd"        column="CASH_COA_BR_CD"         javaType="EZDCDateItem"/>
        <result property="cashCoaCcCd"        column="CASH_COA_CC_CD"         javaType="EZDCDateItem"/>
        <result property="cashCoaAcctCd"      column="CASH_COA_ACCT_CD"       javaType="EZDCDateItem"/>
        <result property="cashCoaProdCd"      column="CASH_COA_PROD_CD"       javaType="EZDCDateItem"/>
        <result property="cashCoaChCd"        column="CASH_COA_CH_CD"         javaType="EZDCDateItem"/>
        <result property="cashCoaAfflCd"      column="CASH_COA_AFFL_CD"       javaType="EZDCDateItem"/>
        <result property="cashCoaProjCd"      column="CASH_COA_PROJ_CD"       javaType="EZDCDateItem"/>
        <result property="cashCoaExtnCd"      column="CASH_COA_EXTN_CD"       javaType="EZDCDateItem"/>
        <result property="rcptConfCoaCmpyCd"  column="RCPT_CONF_COA_CMPY_CD"  javaType="EZDCDateItem"/>
        <result property="rcptConfCoaBrCd"    column="RCPT_CONF_COA_BR_CD"    javaType="EZDCDateItem"/>
        <result property="rcptConfCoaCcCd"    column="RCPT_CONF_COA_CC_CD"    javaType="EZDCDateItem"/>
        <result property="rcptConfCoaAcctCd"  column="RCPT_CONF_COA_ACCT_CD"  javaType="EZDCDateItem"/>
        <result property="rcptConfCoaProdCd"  column="RCPT_CONF_COA_PROD_CD"  javaType="EZDCDateItem"/>
        <result property="rcptConfCoaChCd"    column="RCPT_CONF_COA_CH_CD"    javaType="EZDCDateItem"/>
        <result property="rcptConfCoaAfflCd"  column="RCPT_CONF_COA_AFFL_CD"  javaType="EZDCDateItem"/>
        <result property="rcptConfCoaProjCd"  column="RCPT_CONF_COA_PROJ_CD"  javaType="EZDCDateItem"/>
        <result property="rcptConfCoaExtnCd"  column="RCPT_CONF_COA_EXTN_CD"  javaType="EZDCDateItem"/>
        <result property="remCoaCmpyCd"       column="REM_COA_CMPY_CD"        javaType="EZDCDateItem"/>
        <result property="remCoaBrCd"         column="REM_COA_BR_CD"          javaType="EZDCDateItem"/>
        <result property="remCoaCcCd"         column="REM_COA_CC_CD"          javaType="EZDCDateItem"/>
        <result property="remCoaAcctCd"       column="REM_COA_ACCT_CD"        javaType="EZDCDateItem"/>
        <result property="remCoaProdCd"       column="REM_COA_PROD_CD"        javaType="EZDCDateItem"/>
        <result property="remCoaChCd"         column="REM_COA_CH_CD"          javaType="EZDCDateItem"/>
        <result property="remCoaAfflCd"       column="REM_COA_AFFL_CD"        javaType="EZDCDateItem"/>
        <result property="remCoaProjCd"       column="REM_COA_PROJ_CD"        javaType="EZDCDateItem"/>
        <result property="remCoaExtnCd"       column="REM_COA_EXTN_CD"        javaType="EZDCDateItem"/>
        <result property="unaplCoaCmpyCd"     column="UNAPL_COA_CMPY_CD"      javaType="EZDCDateItem"/>
        <result property="unaplCoaBrCd"       column="UNAPL_COA_BR_CD"        javaType="EZDCDateItem"/>
        <result property="unaplCoaCcCd"       column="UNAPL_COA_CC_CD"        javaType="EZDCDateItem"/>
        <result property="unaplCoaAcctCd"     column="UNAPL_COA_ACCT_CD"      javaType="EZDCDateItem"/>
        <result property="unaplCoaProdCd"     column="UNAPL_COA_PROD_CD"      javaType="EZDCDateItem"/>
        <result property="unaplCoaChCd"       column="UNAPL_COA_CH_CD"        javaType="EZDCDateItem"/>
        <result property="unaplCoaAfflCd"     column="UNAPL_COA_AFFL_CD"      javaType="EZDCDateItem"/>
        <result property="unaplCoaProjCd"     column="UNAPL_COA_PROJ_CD"      javaType="EZDCDateItem"/>
        <result property="unaplCoaExtnCd"     column="UNAPL_COA_EXTN_CD"      javaType="EZDCDateItem"/>
        <result property="unidCoaCmpyCd"      column="UNID_COA_CMPY_CD"       javaType="EZDCDateItem"/>
        <result property="unidCoaBrCd"        column="UNID_COA_BR_CD"         javaType="EZDCDateItem"/>
        <result property="unidCoaCcCd"        column="UNID_COA_CC_CD"         javaType="EZDCDateItem"/>
        <result property="unidCoaAcctCd"      column="UNID_COA_ACCT_CD"       javaType="EZDCDateItem"/>
        <result property="unidCoaProdCd"      column="UNID_COA_PROD_CD"       javaType="EZDCDateItem"/>
        <result property="unidCoaChCd"        column="UNID_COA_CH_CD"         javaType="EZDCDateItem"/>
        <result property="unidCoaAfflCd"      column="UNID_COA_AFFL_CD"       javaType="EZDCDateItem"/>
        <result property="unidCoaProjCd"      column="UNID_COA_PROJ_CD"       javaType="EZDCDateItem"/>
        <result property="unidCoaExtnCd"      column="UNID_COA_EXTN_CD"       javaType="EZDCDateItem"/>
        <result property="oaccCoaCmpyCd"      column="OACC_COA_CMPY_CD"       javaType="EZDCDateItem"/>
        <result property="oaccCoaBrCd"        column="OACC_COA_BR_CD"         javaType="EZDCDateItem"/>
        <result property="oaccCoaCcCd"        column="OACC_COA_CC_CD"         javaType="EZDCDateItem"/>
        <result property="oaccCoaAcctCd"      column="OACC_COA_ACCT_CD"       javaType="EZDCDateItem"/>
        <result property="oaccCoaProdCd"      column="OACC_COA_PROD_CD"       javaType="EZDCDateItem"/>
        <result property="oaccCoaChCd"        column="OACC_COA_CH_CD"         javaType="EZDCDateItem"/>
        <result property="oaccCoaAfflCd"      column="OACC_COA_AFFL_CD"       javaType="EZDCDateItem"/>
        <result property="oaccCoaProjCd"      column="OACC_COA_PROJ_CD"       javaType="EZDCDateItem"/>
        <result property="oaccCoaExtnCd"      column="OACC_COA_EXTN_CD"       javaType="EZDCDateItem"/>
    </resultMap>
    <statement id="findBankAcct" parameterClass="Map" resultMap="result.findBankAcct">
    SELECT
           INLINE1.DS_BANK_ACCT_PK
          ,INLINE1.DS_BANK_ACCT_NM
      FROM
           DS_BANK_ACCT INLINE1
     WHERE
           INLINE1.EZCANCELFLAG = '0'
       AND INLINE1.GLBL_CMPY_CD = #glblCmpyCd#
       AND INLINE1.AR_RCPT_SRC_CD = #arRcptSrcCd#
       AND INLINE1.DS_BANK_ACCT_TP_CD = '02'
       AND #slsDt# BETWEEN INLINE1.EFF_FROM_DT AND DECODE(INLINE1.EFF_THRU_DT, NULL, '99991231')
       AND INLINE1.DS_BANK_ACCT_PK = (
                                       SELECT
                                              MAX(INLINE2.DS_BANK_ACCT_PK)
                                         FROM
                                              DS_BANK_ACCT INLINE2
                                        WHERE
                                              INLINE2.EZCANCELFLAG = '0'
                                          AND INLINE2.GLBL_CMPY_CD = #glblCmpyCd#
                                          AND INLINE2.AR_RCPT_SRC_CD = #arRcptSrcCd#
                                          AND INLINE2.DS_BANK_ACCT_TP_CD = '02'
                                          AND #slsDt# BETWEEN INLINE2.EFF_FROM_DT AND DECODE(INLINE2.EFF_THRU_DT, NULL, '99991231')
                                     )
    </statement>
    <resultMap id="result.findBankAcct" class="NFCL3130CMsg">
        <result property="dsBankAcctPk"   column="DS_BANK_ACCT_PK"    javaType="EZDCDateItem"/>
        <result property="dsBankAcctNm"   column="DS_BANK_ACCT_NM"    javaType="EZDCDateItem"/>
    </resultMap>
    <statement id="findBankAcctByRcptSrc" parameterClass="Map" resultClass="Map">
    SELECT
           INLINE1.DS_BANK_ACCT_PK
          ,INLINE1.DS_BANK_ACCT_NUM
          ,INLINE1.DS_BANK_ACCT_NM
      FROM
           DS_BANK_ACCT INLINE1
     WHERE
           INLINE1.EZCANCELFLAG = '0'
       AND INLINE1.GLBL_CMPY_CD = #glblCmpyCd#
       AND INLINE1.AR_RCPT_SRC_CD = #arRcptSrcCd#
    </statement>
    <statement id="findMaxCd" parameterClass="Map" resultClass="Map">
    SELECT
           MAX(INLINE1.AR_RCPT_SRC_CD) AS AR_RCPT_SRC_CD
      FROM
           AR_RCPT_SRC INLINE1
     WHERE
           INLINE1.GLBL_CMPY_CD = #glblCmpyCd#
    </statement>
</sqlMap>
