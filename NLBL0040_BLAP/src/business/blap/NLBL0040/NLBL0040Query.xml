<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NLBL0040Query">

	<typeAlias alias="NLBL0040CMsg"		type="business.blap.NLBL0040.NLBL0040CMsg"/>
	<typeAlias alias="NLBL0040SMsg"		type="business.blap.NLBL0040.NLBL0040SMsg"/>
	<typeAlias alias="NLBL0040_ASMsg"	type="business.blap.NLBL0040.NLBL0040_ASMsg"/>
	<typeAlias alias="NLBL0040_SSMsg"	type="business.blap.NLBL0040.NLBL0040_SSMsg"/>
	<typeAlias alias="NLBL0040_TSMsg"	type="business.blap.NLBL0040.NLBL0040_TSMsg"/>
	<typeAlias alias="NLBL0040_BSMsg"	type="business.blap.NLBL0040.NLBL0040_BSMsg"/>
	<typeAlias alias="NLBL0040_XSMsg"	type="business.blap.NLBL0040.NLBL0040_XSMsg"/>
	<typeAlias alias="NLBL0040_YSMsg"	type="business.blap.NLBL0040.NLBL0040_YSMsg"/>
	<typeAlias alias="NLBL0040_CSMsg"	type="business.blap.NLBL0040.NLBL0040_CSMsg"/>
	<typeAlias alias="AREA_LEAD_TMTMsg"	type="business.db.AREA_LEAD_TMTMsg"/>
	<typeAlias alias="TRNSP_LTTMsg"		type="business.db.TRNSP_LTTMsg"/>
	<typeAlias alias="NLBL0040F00FMsg"	type="business.file.NLBL0040F00FMsg"/>
	
	
	<statement id="getWHList" parameterClass="Map" resultClass="Map">
		SELECT
		        WH_CD
		      , LOC_NM
		
		FROM
		        WH
		
		WHERE
				GLBL_CMPY_CD	= #cMsg.glblCmpyCd_G1#
			AND EZCANCELFLAG	= '0'
			
		<isNotEqual property="cMsg.whCd_G1" compareValue="*">
			<iterate property="dataSecurityAttrList" var="elem[]" open="AND (" close=")" conjunction="OR">
				WH_CD = #elem[].value#
			</iterate>
		</isNotEqual>
		
		ORDER BY
		        WH_CD
	</statement>
	
	
	<statement id="getEffFromToList" parameterClass="Map" resultClass="Map">
		SELECT
		        EFF_FROM_DT
		      , EFF_THRU_DT
		
		FROM
		        AREA_LEAD_TM
		
		WHERE
				GLBL_CMPY_CD	= #cMsg.glblCmpyCd_G1#
			AND WH_CD	        = #cMsg.whCd_H2#
			AND EZCANCELFLAG	= '0'
			
		GROUP BY
		        EFF_FROM_DT
		      , EFF_THRU_DT
		      		
		ORDER BY
		        EFF_FROM_DT
		        
	</statement>
	
	<statement id="getEffFromToListForSearchSnapshot" parameterClass="NLBL0040SMsg" resultMap="result.NLBL0040_CSMsg">
		SELECT
		        EFF_FROM_DT
		      , EFF_THRU_DT
		
		FROM
		        AREA_LEAD_TM
		
		WHERE
				GLBL_CMPY_CD	= #glblCmpyCd_G1#
			AND WH_CD	        = #whCd_G1#
			AND EZCANCELFLAG	= '0'
			
		GROUP BY
		        EFF_FROM_DT
		      , EFF_THRU_DT
		      		
		ORDER BY
		        EFF_FROM_DT
		        
	</statement>
	
	<resultMap id="result.NLBL0040_CSMsg" class="NLBL0040_CSMsg">
		<result property="effFromDt_C1"		column="EFF_FROM_DT"	javaType="EZDSDateItem"/>
		<result property="effThruDt_C1"		column="EFF_THRU_DT"	javaType="EZDSDateItem"/>
	</resultMap>

    <statement id="getStList" parameterClass="Map" resultClass="Map">
		SELECT
		        ST_CD
		      , ST_NM
		
		FROM
		        ST
		
		WHERE
				GLBL_CMPY_CD	= #cMsg.glblCmpyCd_G1#
			AND EZCANCELFLAG	= '0'
		      		
		ORDER BY
		        ST_SORT_NUM
		        
	</statement>
	
	<statement id="getAreaLeadTmList" parameterClass="NLBL0040SMsg" resultMap="result.NLBL0040_ASMsg">
		SELECT
				A.ST_CD							AS	ST_CD
				,A.ST_NM						AS	ST_NM
				,A.SHPG_MODE_CD					AS	SHPG_MODE_CD
				,A.SHPG_MODE_NM					AS	SHPG_MODE_NM
				,B.WH_CD						AS	WH_CD
				,B.EFF_FROM_DT					AS	EFF_FROM_DT
				,B.EFF_THRU_DT					AS	EFF_THRU_DT
				,CEIL(B.DELY_LEAD_AOT / 24)		AS	DELY_LEAD_AOT
				,B.EZUPTIME						AS	EZUPTIME
				,B.EZUPTIMEZONE					AS	EZUPTIMEZONE
		
		FROM
				(
					SELECT
							ST.ST_CD				AS	ST_CD
							,ST.ST_NM				AS	ST_NM
							,ST.ST_SORT_NUM			AS	ST_SORT_NUM
							,SM.SHPG_MODE_CD		AS	SHPG_MODE_CD
							,SM.SHPG_MODE_NM		AS	SHPG_MODE_NM
							,SM.SHPG_MODE_SORT_NUM	AS	SHPG_MODE_SORT_NUM
					FROM
							ST			ST
							,SHPG_MODE	SM
					WHERE
							ST.GLBL_CMPY_CD		=	SM.GLBL_CMPY_CD
						AND	ST.GLBL_CMPY_CD		=	#glblCmpyCd_G1#
					<isNotEqual property="stCd_G1" compareValue="00">
						AND	ST.ST_CD			=	#stCd_G1#
					</isNotEqual>
						AND	ST.EZCANCELFLAG		=	'0'
						AND	SM.EZCANCELFLAG		=	'0'
				)	A
				,(
					SELECT
							ALT.ST_CD				AS	ST_CD
							,ALT.SHPG_MODE_CD		AS	SHPG_MODE_CD
							,ALT.WH_CD				AS	WH_CD
							,ALT.EFF_FROM_DT		AS	EFF_FROM_DT
							,ALT.EFF_THRU_DT		AS	EFF_THRU_DT
							,ALT.DELY_LEAD_AOT		AS	DELY_LEAD_AOT
							,ALT.EZUPTIME			AS	EZUPTIME
							,ALT.EZUPTIMEZONE		AS	EZUPTIMEZONE
					FROM
							 AREA_LEAD_TM	ALT
					WHERE
							ALT.GLBL_CMPY_CD	=	#glblCmpyCd_G1#
						AND	ALT.WH_CD			=	#whCd_G1#
					<isNotEqual property="stCd_G1" compareValue="00">
						AND	ALT.ST_CD			=	#stCd_G1#
					</isNotEqual>
						AND	ALT.EFF_FROM_DT		=	#effFromDt_G1#
						AND	ALT.EZCANCELFLAG	=	'0'
				)	B

		WHERE
				A.ST_CD			=	B.ST_CD(+)
			AND	A.SHPG_MODE_CD	=	B.SHPG_MODE_CD(+)
		
		ORDER BY
				A.ST_SORT_NUM
				,A.SHPG_MODE_SORT_NUM
				
	</statement>
	
	<statement id="getAreaLeadTmListNoValue" parameterClass="NLBL0040SMsg" resultMap="result.NLBL0040_ASMsg">
		SELECT
				 ST.ST_CD				AS	ST_CD
				,ST.ST_NM				AS	ST_NM
				,ST.ST_SORT_NUM			AS	ST_SORT_NUM
				,SM.SHPG_MODE_CD		AS	SHPG_MODE_CD
				,SM.SHPG_MODE_NM		AS	SHPG_MODE_NM
				,SM.SHPG_MODE_SORT_NUM	AS	SHPG_MODE_SORT_NUM
		FROM
				ST			ST
				,SHPG_MODE	SM
		WHERE
				ST.GLBL_CMPY_CD		=	SM.GLBL_CMPY_CD
			AND	ST.GLBL_CMPY_CD		=	#glblCmpyCd_G1#
			AND	ST.EZCANCELFLAG		=	'0'
			AND	SM.EZCANCELFLAG		=	'0'
		
		ORDER BY
				ST.ST_SORT_NUM
				,SM.SHPG_MODE_SORT_NUM
				
	</statement>
	
	<resultMap id="result.NLBL0040_ASMsg" class="NLBL0040_ASMsg">
		<result property="stCd_A1"			column="ST_CD"			javaType="EZDSStringItem"/>
		<result property="stNm_A1"			column="ST_NM"			javaType="EZDSStringItem"/>
		<result property="shpgModeCd_A1"	column="SHPG_MODE_CD"	javaType="EZDSStringItem"/>
		<result property="shpgModeNm_A1"	column="SHPG_MODE_NM"	javaType="EZDSStringItem"/>
		<result property="whCd_A1"			column="WH_CD"			javaType="EZDSStringItem"/>
		<result property="effFromDt_A1"		column="EFF_FROM_DT"	javaType="EZDSDateItem"/>
		<result property="effThruDt_A1"		column="EFF_THRU_DT"	javaType="EZDSDateItem"/>
		<result property="delyLeadAot_A1"	column="DELY_LEAD_AOT"	javaType="EZDSBigDecimalItem"/>
		<result property="ezUpTime_A1"		column="EZUPTIME"		javaType="EZDSStringItem"/>
		<result property="ezUpTimeZone_A1"	column="EZUPTIMEZONE"	javaType="EZDSStringItem"/>
	</resultMap>
	
	
	<statement id="getAreaLeadTmListForSearchSnapshot" parameterClass="NLBL0040SMsg" resultMap="result.NLBL0040_SSMsg">
		SELECT
				ALT.ST_CD				AS	ST_CD
				,ALT.SHPG_MODE_CD		AS	SHPG_MODE_CD
				,ALT.EFF_FROM_DT		AS	EFF_FROM_DT
				,ALT.EZUPTIME			AS	EZUPTIME
				,ALT.EZUPTIMEZONE		AS	EZUPTIMEZONE
		FROM
				AREA_LEAD_TM	ALT
		WHERE
				ALT.GLBL_CMPY_CD	=	#glblCmpyCd_G1#
			AND	ALT.WH_CD			=	#whCd_G1#
			AND	ALT.EZCANCELFLAG	=	'0'

		ORDER BY
				ALT.ST_CD
				,ALT.SHPG_MODE_CD
				,ALT.EFF_FROM_DT
	</statement>
	
	<resultMap id="result.NLBL0040_SSMsg" class="NLBL0040_SSMsg">
		<result property="stCd_S1"			column="ST_CD"			javaType="EZDSStringItem"/>
		<result property="shpgModeCd_S1"	column="SHPG_MODE_CD"	javaType="EZDSStringItem"/>
		<result property="effFromDt_S1"		column="EFF_FROM_DT"	javaType="EZDSDateItem"/>
		<result property="ezUpTime_S1"		column="EZUPTIME"		javaType="EZDSStringItem"/>
		<result property="ezUpTimeZone_S1"	column="EZUPTIMEZONE"	javaType="EZDSStringItem"/>
	</resultMap>
	
	
	<statement id="getAreaLeadTmListForSubmitSnapshot" parameterClass="NLBL0040SMsg" resultMap="result.NLBL0040_TSMsg">
		SELECT
				ALT.ST_CD				AS	ST_CD
				,ALT.SHPG_MODE_CD		AS	SHPG_MODE_CD
				,ALT.EFF_FROM_DT		AS	EFF_FROM_DT
				,ALT.EZUPTIME			AS	EZUPTIME
				,ALT.EZUPTIMEZONE		AS	EZUPTIMEZONE
		FROM
				 AREA_LEAD_TM	ALT
		WHERE
				ALT.GLBL_CMPY_CD	=	#glblCmpyCd_G1#
			AND	ALT.WH_CD			=	#whCd_G1#
			AND	ALT.EZCANCELFLAG	=	'0'

		ORDER BY
				ALT.ST_CD
				,ALT.SHPG_MODE_CD
				,ALT.EFF_FROM_DT
				
		FOR UPDATE NOWAIT
	</statement>
	
	<resultMap id="result.NLBL0040_TSMsg" class="NLBL0040_TSMsg">
		<result property="stCd_T1"			column="ST_CD"			javaType="EZDSStringItem"/>
		<result property="shpgModeCd_T1"	column="SHPG_MODE_CD"	javaType="EZDSStringItem"/>
		<result property="effFromDt_T1"		column="EFF_FROM_DT"	javaType="EZDSDateItem"/>
		<result property="ezUpTime_T1"		column="EZUPTIME"		javaType="EZDSStringItem"/>
		<result property="ezUpTimeZone_T1"	column="EZUPTIMEZONE"	javaType="EZDSStringItem"/>
	</resultMap>

	<statement id="getTrnspLtList" parameterClass="NLBL0040SMsg" resultMap="result.NLBL0040_BSMsg">
		SELECT
				TL.ZIP_SQ_NUM					AS	ZIP_SQ_NUM
				,TL.FROM_ZIP_CD					AS	FROM_ZIP_CD
				,TL.TO_ZIP_CD					AS	TO_ZIP_CD
				,CEIL(TL.TRNSP_LT_AOT / 24)		AS	TRNSP_LT_AOT
				,TL.EZCANCELFLAG				AS	EZCANCELFLAG
				,TL.EZUPTIME					AS	EZUPTIME
				,TL.EZUPTIMEZONE				AS	EZUPTIMEZONE
		
		FROM
				TRNSP_LT	TL
		
		WHERE
				TL.GLBL_CMPY_CD		=	#glblCmpyCd_G1#
			AND	TL.WH_CD			=	#whCd_G1#
			AND	TL.ST_CD			=	#stCd_G2#
			AND	TL.SHPG_MODE_CD		=	#shpgModeCd_G2#
			AND	TL.EFF_FROM_DT		=	#effFromDt_G1#
			AND	TL.EZCANCELFLAG		=	'0'
		
		ORDER BY
				TL.FROM_ZIP_CD
				
	</statement>
	
	<resultMap id="result.NLBL0040_BSMsg" class="NLBL0040_BSMsg">
		<result property="zipSqNum_B1"			column="ZIP_SQ_NUM"			javaType="EZDSStringItem"/>
		<result property="fromZipCd_B1"			column="FROM_ZIP_CD"		javaType="EZDSStringItem"/>
		<result property="toZipCd_B1"			column="TO_ZIP_CD"			javaType="EZDSStringItem"/>
		<result property="trnspLtAot_B1"		column="TRNSP_LT_AOT"		javaType="EZDSBigDecimalItem"/>
		<result property="ezCancelFlag_B1"		column="EZCANCELFLAG"		javaType="EZDSStringItem"/>
		<result property="ezUpTime_B1"			column="EZUPTIME"			javaType="EZDSStringItem"/>
		<result property="ezUpTimeZone_B1"		column="EZUPTIMEZONE"		javaType="EZDSStringItem"/>
	</resultMap>
		
	
	<statement id="getTrnspLtListForDetailSnapshot" parameterClass="NLBL0040SMsg" resultMap="result.NLBL0040_XSMsg">
		SELECT
				TL.EFF_FROM_DT			AS	EFF_FROM_DT
				,TL.ZIP_SQ_NUM			AS	ZIP_SQ_NUM
				,TL.EZUPTIME			AS	EZUPTIME
				,TL.EZUPTIMEZONE		AS	EZUPTIMEZONE
		
		FROM
				TRNSP_LT	TL
		
		WHERE
				TL.GLBL_CMPY_CD		=	#glblCmpyCd_G1#
			AND	TL.WH_CD			=	#whCd_G1#
			AND	TL.ST_CD			=	#stCd_G2#
			AND	TL.SHPG_MODE_CD		=	#shpgModeCd_G2#
			AND	TL.EZCANCELFLAG		=	'0'
		
		ORDER BY
				TL.EFF_FROM_DT
				,TL.ZIP_SQ_NUM
				
	</statement>
	
	<resultMap id="result.NLBL0040_XSMsg" class="NLBL0040_XSMsg">
		<result property="zipSqNum_X1"			column="ZIP_SQ_NUM"			javaType="EZDSStringItem"/>
		<result property="effFromDt_X1"			column="EFF_FROM_DT"		javaType="EZDSDateItem"/>
		<result property="ezCancelFlag_X1"		column="EZCANCELFLAG"		javaType="EZDSStringItem"/>
		<result property="ezUpTime_X1"			column="EZUPTIME"			javaType="EZDSStringItem"/>
		<result property="ezUpTimeZone_X1"		column="EZUPTIMEZONE"		javaType="EZDSStringItem"/>
	</resultMap>
	
	
	<statement id="getTrnspLtListForSubmitSnapshot" parameterClass="NLBL0040SMsg" resultMap="result.NLBL0040_YSMsg">
		SELECT
				TL.EFF_FROM_DT			AS	EFF_FROM_DT
				,TL.ZIP_SQ_NUM			AS	ZIP_SQ_NUM
				,TL.EZUPTIME			AS	EZUPTIME
				,TL.EZUPTIMEZONE		AS	EZUPTIMEZONE
		
		FROM
				TRNSP_LT	TL
		
		WHERE
				TL.GLBL_CMPY_CD		=	#glblCmpyCd_G1#
			AND	TL.WH_CD			=	#whCd_G1#
			AND	TL.ST_CD			=	#stCd_G2#
			AND	TL.SHPG_MODE_CD		=	#shpgModeCd_G2#
			AND	TL.EZCANCELFLAG		=	'0'
		
		ORDER BY
				TL.EFF_FROM_DT
				,TL.ZIP_SQ_NUM
		
		FOR UPDATE NOWAIT
	</statement>
	
	<resultMap id="result.NLBL0040_YSMsg" class="NLBL0040_YSMsg">
		<result property="zipSqNum_Y1"			column="ZIP_SQ_NUM"			javaType="EZDSStringItem"/>
		<result property="effFromDt_Y1"			column="EFF_FROM_DT"		javaType="EZDSDateItem"/>
		<result property="ezCancelFlag_Y1"		column="EZCANCELFLAG"		javaType="EZDSStringItem"/>
		<result property="ezUpTime_Y1"			column="EZUPTIME"			javaType="EZDSStringItem"/>
		<result property="ezUpTimeZone_Y1"		column="EZUPTIMEZONE"		javaType="EZDSStringItem"/>
	</resultMap>
	
	
	<statement id="getAreaLeadTmListByWHAndEffFrom" parameterClass="AREA_LEAD_TMTMsg" resultMap="result.AREA_LEAD_TMTMsg">
		SELECT
				ALT.GLBL_CMPY_CD
				,ALT.WH_CD
				,ALT.ST_CD
				,ALT.SHPG_MODE_CD
				,ALT.EFF_FROM_DT
				,ALT.DELY_LEAD_AOT
				,ALT.EFF_THRU_DT
				,ALT.EZTABLEID
				,ALT.EZCANCELFLAG
				,ALT.EZINTIME
				,ALT.EZINTIMEZONE
				,ALT.EZINCOMPANYCODE
				,ALT.EZINUSERID
				,ALT.EZINAPLID
				,ALT.EZUPTIME
				,ALT.EZUPTIMEZONE
				,ALT.EZUPCOMPANYCODE
				,ALT.EZUPUSERID
				,ALT.EZUPAPLID
		FROM
		        AREA_LEAD_TM	ALT
		
		WHERE
				ALT.GLBL_CMPY_CD		= #glblCmpyCd#
			AND ALT.WH_CD	        	= #whCd#
			AND ALT.EFF_FROM_DT	    	= #effFromDt#
			AND	ALT.EZCANCELFLAG		= '0'
	</statement>
	
	<resultMap id="result.AREA_LEAD_TMTMsg" class="AREA_LEAD_TMTMsg">
		<result property="glblCmpyCd"			column="GLBL_CMPY_CD"		javaType="EZDTStringItem"/>
		<result property="whCd"					column="WH_CD"				javaType="EZDTStringItem"/>
		<result property="stCd"					column="ST_CD"				javaType="EZDTStringItem"/>
		<result property="shpgModeCd"			column="SHPG_MODE_CD"		javaType="EZDTStringItem"/>
		<result property="effFromDt"			column="EFF_FROM_DT"		javaType="EZDTDateItem"/>
		<result property="delyLeadAot"			column="DELY_LEAD_AOT"		javaType="EZDTBigDecimalItem"/>
		<result property="effThruDt"			column="EFF_THRU_DT"		javaType="EZDTDateItem"/>
		<result property="ezTableID"			column="EZTABLEID"			javaType="EZDTStringItem"/>
		<result property="ezCancelFlag"			column="EZCANCELFLAG"		javaType="EZDTStringItem"/>
		<result property="ezInTime"				column="EZINTIME"			javaType="EZDTStringItem"/>
		<result property="ezInTimeZone"			column="EZINTIMEZONE"		javaType="EZDTStringItem"/>
		<result property="ezInCompanyCode"		column="EZINCOMPANYCODE"	javaType="EZDTStringItem"/>
		<result property="ezInUserID"			column="EZINUSERID"			javaType="EZDTStringItem"/>
		<result property="ezInAplID"			column="EZINAPLID"			javaType="EZDTStringItem"/>
		<result property="ezUpTime"				column="EZUPTIME"			javaType="EZDTStringItem"/>
		<result property="ezUpTimeZone"			column="EZUPTIMEZONE"		javaType="EZDTStringItem"/>
		<result property="ezUpCompanyCode"		column="EZUPCOMPANYCODE"	javaType="EZDTStringItem"/>
		<result property="ezUpUserID"			column="EZUPUSERID"			javaType="EZDTStringItem"/>
		<result property="ezUpAplID"			column="EZUPAPLID"			javaType="EZDTStringItem"/>
	</resultMap>

	
	<statement id="getTrnspLtListByEffFrom" parameterClass="TRNSP_LTTMsg" resultMap="result.TRNSP_LTTMsg">
		SELECT
				TL.GLBL_CMPY_CD			AS	GLBL_CMPY_CD
				,TL.WH_CD				AS	WH_CD
				,TL.ST_CD				AS	ST_CD
				,TL.SHPG_MODE_CD		AS	SHPG_MODE_CD
				,TL.ZIP_SQ_NUM			AS	ZIP_SQ_NUM
				,TL.EFF_FROM_DT			AS	EFF_FROM_DT
				,TL.EFF_THRU_DT			AS	EFF_THRU_DT
				,TL.TRNSP_LT_AOT		AS	TRNSP_LT_AOT
				,TL.FROM_ZIP_CD			AS	FROM_ZIP_CD
				,TL.TO_ZIP_CD			AS	TO_ZIP_CD
				,TL.EZTABLEID			AS	EZTABLEID
				,TL.EZCANCELFLAG		AS	EZCANCELFLAG
				,TL.EZINTIME			AS	EZINTIME
				,TL.EZINTIMEZONE		AS	EZINTIMEZONE
				,TL.EZINCOMPANYCODE		AS	EZINCOMPANYCODE
				,TL.EZINUSERID			AS	EZINUSERID
				,TL.EZINAPLID			AS	EZINAPLID
				,TL.EZUPTIME			AS	EZUPTIME
				,TL.EZUPTIMEZONE		AS	EZUPTIMEZONE
				,TL.EZUPCOMPANYCODE		AS	EZUPCOMPANYCODE
				,TL.EZUPUSERID			AS	EZUPUSERID
				,TL.EZUPAPLID			AS	EZUPAPLID
		
		FROM
				TRNSP_LT	TL
		
		WHERE
				TL.GLBL_CMPY_CD		=	#glblCmpyCd#
			AND	TL.WH_CD			=	#whCd#
			AND TL.EFF_FROM_DT	  	=	#effFromDt#
			AND	TL.EZCANCELFLAG		=	'0'
		
		ORDER BY
				TL.EFF_FROM_DT
				,TL.ZIP_SQ_NUM
		
		FOR UPDATE NOWAIT
	</statement>
	
	<!-- 09/09/2010 D.Fukaya append start -->
	<statement id="getTrnspLtListByPartialKeyForInsert" parameterClass="Map" resultMap="result.TRNSP_LTTMsg">
		SELECT
				TL.GLBL_CMPY_CD			AS	GLBL_CMPY_CD
				,TL.WH_CD				AS	WH_CD
				,TL.ST_CD				AS	ST_CD
				,TL.SHPG_MODE_CD		AS	SHPG_MODE_CD
				,TL.ZIP_SQ_NUM			AS	ZIP_SQ_NUM
				,#effFromDt_new#		AS	EFF_FROM_DT
				,#effThruDt_new#		AS	EFF_THRU_DT
				,TL.TRNSP_LT_AOT		AS	TRNSP_LT_AOT
				,TL.FROM_ZIP_CD			AS	FROM_ZIP_CD
				,TL.TO_ZIP_CD			AS	TO_ZIP_CD
				,TL.EZTABLEID			AS	EZTABLEID
				,TL.EZCANCELFLAG		AS	EZCANCELFLAG
				,TL.EZINTIME			AS	EZINTIME
				,TL.EZINTIMEZONE		AS	EZINTIMEZONE
				,TL.EZINCOMPANYCODE		AS	EZINCOMPANYCODE
				,TL.EZINUSERID			AS	EZINUSERID
				,TL.EZINAPLID			AS	EZINAPLID
				,TL.EZUPTIME			AS	EZUPTIME
				,TL.EZUPTIMEZONE		AS	EZUPTIMEZONE
				,TL.EZUPCOMPANYCODE		AS	EZUPCOMPANYCODE
				,TL.EZUPUSERID			AS	EZUPUSERID
				,TL.EZUPAPLID			AS	EZUPAPLID
		
		FROM
				TRNSP_LT	TL
		
		WHERE
				TL.GLBL_CMPY_CD		=	#glblCmpyCd#
			AND	TL.WH_CD			=	#whCd#
			AND TL.EFF_FROM_DT	  	=	#effFromDt_old#
			<isNotNull property="stCd">
				<isNotNull property="shpgModeCd">
					AND (
					         TL.ST_CD        &lt;&gt; #stCd#
					      OR TL.SHPG_MODE_CD &lt;&gt; #shpgModeCd#
					    )
				</isNotNull>
			</isNotNull>
			AND	TL.EZCANCELFLAG		=	'0'
	</statement>
	<!-- 09/09/2010 D.Fukaya append start -->

	<resultMap id="result.TRNSP_LTTMsg" class="TRNSP_LTTMsg">
		<result property="glblCmpyCd"			column="GLBL_CMPY_CD"		javaType="EZDTStringItem"/>
		<result property="whCd"					column="WH_CD"				javaType="EZDTStringItem"/>
		<result property="stCd"					column="ST_CD"				javaType="EZDTStringItem"/>
		<result property="shpgModeCd"			column="SHPG_MODE_CD"		javaType="EZDTStringItem"/>
		<result property="zipSqNum"				column="ZIP_SQ_NUM"			javaType="EZDTStringItem"/>
		<result property="effFromDt"			column="EFF_FROM_DT"		javaType="EZDTDateItem"/>
		<result property="trnspLtAot"			column="TRNSP_LT_AOT"		javaType="EZDTBigDecimalItem"/>
		<result property="fromZipCd"			column="FROM_ZIP_CD"		javaType="EZDTStringItem"/>
		<result property="toZipCd"				column="TO_ZIP_CD"			javaType="EZDTStringItem"/>
		<result property="effThruDt"			column="EFF_THRU_DT"		javaType="EZDTDateItem"/>
		<result property="ezTableID"			column="EZTABLEID"			javaType="EZDTStringItem"/>
		<result property="ezCancelFlag"			column="EZCANCELFLAG"		javaType="EZDTStringItem"/>
		<result property="ezInTime"				column="EZINTIME"			javaType="EZDTStringItem"/>
		<result property="ezInTimeZone"			column="EZINTIMEZONE"		javaType="EZDTStringItem"/>
		<result property="ezInCompanyCode"		column="EZINCOMPANYCODE"	javaType="EZDTStringItem"/>
		<result property="ezInUserID"			column="EZINUSERID"			javaType="EZDTStringItem"/>
		<result property="ezInAplID"			column="EZINAPLID"			javaType="EZDTStringItem"/>
		<result property="ezUpTime"				column="EZUPTIME"			javaType="EZDTStringItem"/>
		<result property="ezUpTimeZone"			column="EZUPTIMEZONE"		javaType="EZDTStringItem"/>
		<result property="ezUpCompanyCode"		column="EZUPCOMPANYCODE"	javaType="EZDTStringItem"/>
		<result property="ezUpUserID"			column="EZUPUSERID"			javaType="EZDTStringItem"/>
		<result property="ezUpAplID"			column="EZUPAPLID"			javaType="EZDTStringItem"/>
	</resultMap>
	
	
	
	<statement id="getCSVDownloadData" parameterClass="NLBL0040SMsg" resultMap="result.NLBL0040F00FMsg">
		SELECT
				#whCd_G1#						AS	WH_CD
				,A.ST_CD						AS	ST_CD
				,A.SHPG_MODE_CD					AS	SHPG_MODE_CD
				,#effFromDt_G1#					AS	EFF_FROM_DT_TXT
				,#effThruDt_G1#					AS	EFF_THRU_DT_TXT
				,CEIL(B.DELY_LEAD_AOT / 24)		AS	DELY_LEAD_AOT
				,TL.FROM_ZIP_CD					AS	FROM_ZIP_CD
				,TL.TO_ZIP_CD					AS	TO_ZIP_CD
				,CEIL(TL.TRNSP_LT_AOT / 24)		AS	TRNSP_LT_AOT
		
		FROM
				(
					SELECT
							 ST.ST_CD				AS	ST_CD
							,ST.ST_SORT_NUM			AS	ST_SORT_NUM
							,SM.SHPG_MODE_CD		AS	SHPG_MODE_CD
							,SM.SHPG_MODE_SORT_NUM	AS	SHPG_MODE_SORT_NUM
					FROM
							ST			ST
							,SHPG_MODE	SM
					WHERE
							ST.GLBL_CMPY_CD		=	SM.GLBL_CMPY_CD
						AND	ST.GLBL_CMPY_CD		=	#glblCmpyCd_G1#
					<isNotEqual property="stCd_G1" compareValue="00">
						AND	ST.ST_CD			=	#stCd_G1#
					</isNotEqual>
						AND	ST.EZCANCELFLAG		=	'0'
						AND	SM.EZCANCELFLAG		=	'0'
				)	A
				,(
					SELECT
							ALT.ST_CD				AS	ST_CD
							,ALT.SHPG_MODE_CD		AS	SHPG_MODE_CD
							,ALT.DELY_LEAD_AOT		AS	DELY_LEAD_AOT
					FROM
							 AREA_LEAD_TM	ALT
					WHERE
							ALT.GLBL_CMPY_CD	=	#glblCmpyCd_G1#
						AND	ALT.WH_CD			=	#whCd_G1#
						AND	ALT.EFF_FROM_DT		=	#effFromDt_G1#
						AND	ALT.EZCANCELFLAG	=	'0'
				)	B
				,TRNSP_LT	TL

		WHERE
				A.ST_CD				=	B.ST_CD(+)
			AND	A.SHPG_MODE_CD		=	B.SHPG_MODE_CD(+)
			AND	A.ST_CD				=	TL.ST_CD(+)
			AND	A.SHPG_MODE_CD		=	TL.SHPG_MODE_CD(+)
			AND	TL.GLBL_CMPY_CD(+)	=	#glblCmpyCd_G1#
			AND	TL.WH_CD(+)			=	#whCd_G1#
			AND	TL.EFF_FROM_DT(+)	=	#effFromDt_G1#
			AND	TL.EZCANCELFLAG(+)	=	'0'

		ORDER BY
				A.ST_SORT_NUM
				,A.SHPG_MODE_SORT_NUM
				,TL.FROM_ZIP_CD

	</statement>
	
	<statement id="getCSVDownloadDataNoValue" parameterClass="NLBL0040SMsg" resultMap="result.NLBL0040F00FMsg">
		SELECT
				#whCd_G1#				AS	WH_CD
				,ST.ST_CD				AS	ST_CD
				,SM.SHPG_MODE_CD		AS	SHPG_MODE_CD
		FROM
				ST			ST
				,SHPG_MODE	SM
		WHERE
				ST.GLBL_CMPY_CD		=	SM.GLBL_CMPY_CD
			AND	ST.GLBL_CMPY_CD		=	#glblCmpyCd_G1#
			AND	ST.EZCANCELFLAG		=	'0'
			AND	SM.EZCANCELFLAG		=	'0'

		ORDER BY
				ST.ST_SORT_NUM
				,SM.SHPG_MODE_SORT_NUM
	</statement>
	
	<resultMap id="result.NLBL0040F00FMsg" class="NLBL0040F00FMsg">
		<result property="whCd"			column="WH_CD"				javaType="EZDFStringItem"/>
		<result property="stCd"			column="ST_CD"				javaType="EZDFStringItem"/>
		<result property="shpgModeCd"	column="SHPG_MODE_CD"		javaType="EZDFStringItem"/>
		<result property="moveEffFromDtTxt"	column="MOVE_EFF_FROM_DT_TXT"	javaType="EZDFStringItem"/>
		<result property="moveEffThruDtTxt"	column="MOVE_EFF_THRU_DT_TXT"	javaType="EZDFStringItem"/>
		<result property="delyLeadAot"	column="DELY_LEAD_AOT"		javaType="EZDFBigDecimalItem"/>
		<result property="fromZipCd"	column="FROM_ZIP_CD"		javaType="EZDFStringItem"/>
		<result property="toZipCd"		column="TO_ZIP_CD"			javaType="EZDFStringItem"/>
		<result property="trnspLtAot"	column="TRNSP_LT_AOT"		javaType="EZDFBigDecimalItem"/>
	</resultMap>
	
</sqlMap>
