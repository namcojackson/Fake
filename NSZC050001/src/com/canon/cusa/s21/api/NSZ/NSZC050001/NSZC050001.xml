<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NSZC050001">
    <statement id="getContrDtlInfo" parameterClass="Map" resultClass="Map">
        SELECT
             DTL.DS_CONTR_DTL_PK
        FROM
             DS_CONTR               HDR
            ,DS_CONTR_DTL           DTL
            ,DS_CONTR_DTL_TP        DTP
            ,DS_CONTR_DTL_STS_V     DTV
        WHERE
                HDR.GLBL_CMPY_CD                        = #glblCmpyCd#
            AND HDR.DS_CONTR_PK                         = DTL.DS_CONTR_PK
            AND HDR.DS_CONTR_CATG_CD             &lt;&gt; #dsContrCatgCd#
            AND HDR.EZCANCELFLAG                        = '0'
            AND HDR.DS_CONTR_PK                         = DTL.DS_CONTR_PK
            AND HDR.GLBL_CMPY_CD                        = DTL.GLBL_CMPY_CD
            AND DTL.SVC_MACH_MSTR_PK                    = #svcMachMstrPk#
            AND NVL(DTL.CONTR_EFF_THRU_DT, #slsDt#) &gt;= #slsDt#
            AND DTL.CONTR_EFF_FROM_DT               &lt;= #slsDt#
            AND NVL(DTL.CONTR_CLO_DT, #slsDt#)      &gt;= #slsDt#
            AND DTL.MTR_READ_METH_CD                    = #mtrReadMethCd#
            AND DTL.EZCANCELFLAG                        = '0'
            AND DTL.DS_CONTR_DTL_PK                     = DTV.DS_CONTR_DTL_PK
            AND DTL.GLBL_CMPY_CD                        = DTV.GLBL_CMPY_CD
            AND DTV.DS_CONTR_CTRL_STS_CD         &lt;&gt; #dsContrCtrlStsCd#
            AND DTV.EZCANCELFLAG                        = '0'
            AND DTL.DS_CONTR_DTL_TP_CD                  = DTP.DS_CONTR_DTL_TP_CD
            AND DTL.GLBL_CMPY_CD                        = DTP.GLBL_CMPY_CD
            AND DTP.USG_CHRG_FLG                        = 'Y'
            AND DTP.EZCANCELFLAG                        = '0'
        ORDER BY
            DTL.DS_CONTR_DTL_PK
    </statement>
</sqlMap>
