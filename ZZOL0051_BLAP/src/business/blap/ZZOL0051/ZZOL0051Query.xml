<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="ZZOL0051Query">

	<typeAlias alias="ZZOL0051SMsg"	    type="business.blap.ZZOL0051.ZZOL0051SMsg"/>
	<typeAlias alias="ZZOL0051_HSMsg"	type="business.blap.ZZOL0051.ZZOL0051_HSMsg"/>
	<typeAlias alias="ZZOL0051_BSMsg"	type="business.blap.ZZOL0051.ZZOL0051_BSMsg"/>
	<typeAlias alias="ZZOL0051_PSMsg"	type="business.blap.ZZOL0051.ZZOL0051_PSMsg"/>

	<!-- CSV Master -->
	<statement id="getCsvMstr" parameterClass="Map" resultMap="result.ZZOL0051SMsg">
		SELECT
				GLBL_CMPY_CD
			,	UPLD_CSV_ID
			,	UPLD_CSV_NM
			,	UPLD_CSV_FILE_ID
			,	UPLD_CSV_TEMP_TBL_ID
			,	EZREQBUSINESSID
			,	UPLD_CSV_FILE_CLS_NM
			,	DNLD_CSV_FILE_CLS_NM
			,	UPLD_CSV_TEMP_TBL_CLS_NM
			,	EZUPTIME
			,	EZUPTIMEZONE
		FROM
		        UPLD_CSV_MSTR
		WHERE
				EZCANCELFLAG  = '0'
			AND GLBL_CMPY_CD  = #glblCmpyCd#
			AND UPLD_CSV_ID   = #upldCsvId#
	
	</statement>

	<!-- TAB CSV Header -->
	<statement id="getCsvHeaderList" parameterClass="Map" resultMap="result.ZZOL0051_HSMsg">
		SELECT
				UPLD_CSV_HDR_NUM
			,	UPLD_CSV_HDR_NM
			,	UPLD_CSV_HDR_DATA_TP_NM
			,	UPLD_CSV_HDR_DATA_LG
			,	UPLD_CSV_HDR_DEF_NM
			,	EZUPTIME
			,	EZUPTIMEZONE
		FROM
		        UPLD_CSV_HDR
		WHERE
				EZCANCELFLAG  = '0'
			AND GLBL_CMPY_CD  = #glblCmpyCd#
			AND UPLD_CSV_ID   = #upldCsvId#
		ORDER BY
			UPLD_CSV_HDR_NUM
	
	</statement>

	<!-- TAB Application ID Relation -->
	<statement id="getCsvAppIdList" parameterClass="Map" resultMap="result.ZZOL0051_BSMsg">
		SELECT
				row_number() over(order by UPLD_CSV_RST_BIZ_APP_ID)	AS	ROW_NUM
			,	UPLD_CSV_RST_BIZ_APP_ID
			,	EZUPTIME
			,	EZUPTIMEZONE
		FROM
		        UPLD_CSV_RST_BIZ_APP_ID
		WHERE
				EZCANCELFLAG  = '0'
			AND GLBL_CMPY_CD  = #glblCmpyCd#
			AND UPLD_CSV_ID   = #upldCsvId#
	
	</statement>

	<!-- TAB Process ID Relation -->
	<statement id="getCsvProcIdList" parameterClass="Map" resultMap="result.ZZOL0051_PSMsg">
			SELECT
				row_number() over(order by M.MENU_PROC_ID)	AS ROW_NUM
			,	M.MENU_PROC_ID								AS MENU_PROC_ID
			,	U.UPLD_CSV_RST_PROC_NM						AS UPLD_CSV_RST_PROC_NM
			,	U.EZUPTIME									AS EZUPTIME
			,	U.EZUPTIMEZONE								AS EZUPTIMEZONE
		FROM
		        UPLD_CSV_RST_PROC U,
				MENU_PROC M
		WHERE
				U.EZCANCELFLAG         = M.EZCANCELFLAG(+)
			AND U.GLBL_CMPY_CD         = M.GLBL_CMPY_CD(+)
			AND U.UPLD_CSV_RST_PROC_NM = M.MENU_PROC_NM(+)			
			AND U.EZCANCELFLAG  = '0'
			AND U.GLBL_CMPY_CD  = #glblCmpyCd#
			AND U.UPLD_CSV_ID   = #upldCsvId#
	
	</statement>

	<resultMap id="result.ZZOL0051SMsg" 		class="ZZOL0051SMsg">
		<result property="glblCmpyCd"			column="GLBL_CMPY_CD"				javaType="EZDSStringItem"/>
		<result property="upldCsvId"			column="UPLD_CSV_ID"				javaType="EZDSStringItem"/>
		<result property="upldCsvNm"			column="UPLD_CSV_NM"				javaType="EZDSStringItem"/>
		<result property="upldCsvFileId"		column="UPLD_CSV_FILE_ID"			javaType="EZDSStringItem"/>
		<result property="upldCsvTempTblId"		column="UPLD_CSV_TEMP_TBL_ID"		javaType="EZDSStringItem"/>
		<result property="ezReqBusinessID"		column="EZREQBUSINESSID"			javaType="EZDSStringItem"/>
		<result property="upldCsvFileClsNm"		column="UPLD_CSV_FILE_CLS_NM"		javaType="EZDSStringItem"/>
		<result property="dnldCsvFileClsNm"		column="DNLD_CSV_FILE_CLS_NM"		javaType="EZDSStringItem"/>
		<result property="upldCsvTempTblClsNm"	column="UPLD_CSV_TEMP_TBL_CLS_NM"	javaType="EZDSStringItem"/>
		<result property="ezUpTime"				column="EZUPTIME"					javaType="EZDSStringItem"/>
		<result property="ezUpTimeZone"			column="EZUPTIMEZONE"				javaType="EZDSStringItem"/>
	</resultMap>
	
	<resultMap id="result.ZZOL0051_HSMsg" 		class="ZZOL0051_HSMsg">
		<result property="upldCsvHdrNum_H"		column="UPLD_CSV_HDR_NUM"			javaType="EZDSBigDecimalItem"/>
		<!-- <result property="upldCsvHdrNm_H"		column="UPLD_CSV_HDR_NM"			javaType="EZDSStringItem"/> -->
		<result property="upldCsvHdrDataTpNm_H"	column="UPLD_CSV_HDR_DATA_TP_NM"	javaType="EZDSStringItem"/>
		<result property="upldCsvHdrDataLg_H"	column="UPLD_CSV_HDR_DATA_LG"		javaType="EZDSStringItem"/>
		<!-- <result property="upldCsvHdrDefNm_H"	column="UPLD_CSV_HDR_DEF_NM"		javaType="EZDSStringItem"/> -->
		<result property="upldCsvHdrDefNm_H"	column="UPLD_CSV_HDR_NM"			javaType="EZDSStringItem"/>
		<result property="ezUpTime_H"			column="EZUPTIME"					javaType="EZDSStringItem"/>
		<result property="ezUpTimeZone_H"		column="EZUPTIMEZONE"				javaType="EZDSStringItem"/>
	</resultMap>

	<resultMap id="result.ZZOL0051_BSMsg" 		class="ZZOL0051_BSMsg">
		<result property="xxNum_B"				column="ROW_NUM"					javaType="EZDSBigDecimalItem"/>
		<result property="upldCsvRstBizAppId_B"	column="UPLD_CSV_RST_BIZ_APP_ID"	javaType="EZDSStringItem"/>
		<result property="ezUpTime_B"			column="EZUPTIME"					javaType="EZDSStringItem"/>
		<result property="ezUpTimeZone_B"		column="EZUPTIMEZONE"				javaType="EZDSStringItem"/>
	</resultMap>

	<resultMap id="result.ZZOL0051_PSMsg" 		class="ZZOL0051_PSMsg">
		<result property="xxNum_P"				column="ROW_NUM"					javaType="EZDSBigDecimalItem"/>
		<result property="menuProcId_P"			column="MENU_PROC_ID"				javaType="EZDSStringItem"/>
		<result property="upldCsvRstProcNm_P"	column="UPLD_CSV_RST_PROC_NM"		javaType="EZDSStringItem"/>
		<result property="ezUpTime_P"			column="EZUPTIME"					javaType="EZDSStringItem"/>
		<result property="ezUpTimeZone_P"		column="EZUPTIMEZONE"				javaType="EZDSStringItem"/>
	</resultMap>
	
</sqlMap>