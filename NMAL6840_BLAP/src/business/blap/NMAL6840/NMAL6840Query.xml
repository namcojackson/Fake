<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NMAL6840Query">

    <!-- Alias Definition -->
    <typeAlias alias="NMAL6840_ASMsg"      type="business.blap.NMAL6840.NMAL6840_ASMsg"/>

    <!-- Searches WH Category and Sub WH Relations. -->
    <statement id="searchSubWarehouseRelations" parameterClass="Map" resultMap="NMAL6840_ASMsg_Map">
        SELECT
                RHCSR.RTL_SWH_CD
              , RHCSR.RTL_SWH_NM
              , RHCSR.RTL_SWH_DESC_TXT
              , MCT.MDSE_COST_TP_NM
              , S.MDSE_INVTY_COST_PCT
              , RHCSR.RTL_SWH_SORT_NUM
              , RHCSR.RTL_SWH_DSBL_FLG
              , RHCSR.RTL_SWH_MND_FLG
              , RHCSR.EZUPTIME
              , RHCSR.EZUPTIMEZONE
        FROM
                RTL_WH_CATG_SWH_RELN RHCSR
              , SWH S
              , MDSE_COST_TP MCT
        WHERE
                RHCSR.GLBL_CMPY_CD             = #glblCmpyCd#
            AND RHCSR.RTL_WH_CATG_CD           = #rtlWhCatgCd#
            AND RHCSR.EZCANCELFLAG             = '0'
            AND RHCSR.GLBL_CMPY_CD             = S.GLBL_CMPY_CD(+)
            AND RHCSR.RTL_SWH_CD               = S.RTL_SWH_CD(+)
            AND S.EZCANCELFLAG(+)              = '0'
            AND S.GLBL_CMPY_CD                 = MCT.GLBL_CMPY_CD(+)
            AND S.MDSE_COST_TP_CD              = MCT.MDSE_COST_TP_CD(+)
            AND MCT.EZCANCELFLAG(+)            = '0'
        ORDER BY
                RHCSR.RTL_SWH_SORT_NUM
              , RHCSR.RTL_SWH_CD
    </statement>

    <resultMap id="NMAL6840_ASMsg_Map" class="NMAL6840_ASMsg">
        <result property="rtlSwhCd_A1"          column="RTL_SWH_CD"           javaType="EZDSStringItem"/>
        <result property="rtlSwhNm_A1"          column="RTL_SWH_NM"           javaType="EZDSStringItem"/>
        <result property="rtlSwhDescTxt_A1"     column="RTL_SWH_DESC_TXT"     javaType="EZDSStringItem"/>
        <result property="mdseCostTpNm_A1"      column="MDSE_COST_TP_NM"      javaType="EZDSStringItem"/>
        <result property="mdseInvtyCostPct_A1"  column="MDSE_INVTY_COST_PCT"  javaType="EZDSBigDecimalItem"/>
        <result property="rtlSwhSortNum_A1"     column="RTL_SWH_SORT_NUM"     javaType="EZDSBigDecimalItem"/>
        <result property="rtlSwhDsblFlg_A1"     column="RTL_SWH_DSBL_FLG"     javaType="EZDSStringItem"/>
        <result property="rtlSwhMndFlg_A1"      column="RTL_SWH_MND_FLG"      javaType="EZDSStringItem"/>
        <result property="ezUpTime_A1"          column="EZUPTIME"             javaType="EZDSStringItem"/>
        <result property="ezUpTimeZone_A1"      column="EZUPTIMEZONE"         javaType="EZDSStringItem"/>
    </resultMap>

    <!-- Searches the record count of Retail Sub WH. -->
    <statement id="searchSubWarehouseRecordCount" parameterClass="Map" resultClass="Integer">
        SELECT
                COUNT(RSWH.RTL_SWH_CD)
        FROM
                RTL_SWH RSWH
        WHERE
                RSWH.EZCANCELFLAG     = '0'
            AND RSWH.GLBL_CMPY_CD     = #glblCmpyCd#
            AND RSWH.RTL_WH_CATG_CD   = #rtlWhCatgCd#
            AND RSWH.RTL_SWH_CD       = #rtlSwhCd#
            AND RSWH.RTL_SWH_DSBL_FLG = 'N'
    </statement>

    <!-- Searches Sub WH. -->
    <statement id="searchSubWarehouse" parameterClass="Map" resultClass="Map">
        SELECT
                S.RTL_SWH_CD           AS RTL_SWH_CD
              , S.RTL_SWH_NM           AS RTL_SWH_NM
              , S.RTL_SWH_DESC_TXT     AS RTL_SWH_DESC_TXT
              , MCT.MDSE_COST_TP_NM    AS MDSE_COST_TP_NM
              , S.MDSE_INVTY_COST_PCT  AS MDSE_INVTY_COST_PCT
        FROM
                SWH S
              , MDSE_COST_TP MCT
        WHERE
                S.GLBL_CMPY_CD     = #glblCmpyCd#
            AND S.EZCANCELFLAG     = '0'
            AND S.GLBL_CMPY_CD     = MCT.GLBL_CMPY_CD
            AND S.MDSE_COST_TP_CD  = MCT.MDSE_COST_TP_CD
            AND MCT.EZCANCELFLAG   = '0'
        ORDER BY
                S.RTL_SWH_SORT_NUM
              , S.RTL_SWH_CD
    </statement>

</sqlMap>