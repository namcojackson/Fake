<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NPAL1500Query">
    
    <typeAlias alias="NPAL1500CMsg" type="business.blap.NPAL1500.NPAL1500CMsg"/>
    <typeAlias alias="NPAL1500_ACMsg" type="business.blap.NPAL1500.NPAL1500_ACMsg"/>
    <typeAlias alias="NPAL1500_ASMsg" type="business.blap.NPAL1500.NPAL1500_ASMsg"/>
    <typeAlias alias="NPAL1500_BSMsg" type="business.blap.NPAL1500.NPAL1500_BSMsg"/>
    <typeAlias alias="NPAL1500_CSMsg" type="business.blap.NPAL1500.NPAL1500_BSMsg"/>
    
    <statement id="getRtlWhNm" parameterClass="Map" resultClass="Map">
        SELECT
            RW.RTL_WH_CD
           ,RW.RTL_WH_NM
           ,RSW.RTL_SWH_CD
           ,RW.ST_CD
           ,RW.POST_CD
           ,RW.RTL_WH_CATG_CD
        FROM
            RTL_WH  RW
           ,RTL_SWH RSW
        WHERE
            RW.GLBL_CMPY_CD                        = #glblCmpyCd#
        AND RW.RTL_WH_CD                           = #rtlWhCd#
        AND RW.EFF_FROM_DT                     &lt;= #salesDate#
        AND NVL(RW.EFF_THRU_DT, '99991231')    &gt;= #salesDate#
        AND RW.GLBL_CMPY_CD                        = RSW.GLBL_CMPY_CD(+)
        AND RW.RTL_WH_CD                           = RSW.RTL_WH_CD(+)
        AND RSW.PRTY_LOC_FLG(+)                    = #prtyLocFlg#
        AND RW.EZCANCELFLAG                        = '0'
        AND RSW.EZCANCELFLAG(+)                    = '0'
    </statement>
    
    <statement id="getVendorInfo" parameterClass="Map" resultClass="Map">
        SELECT
             VND.VND_CD
            ,VND.LOC_NM
            ,VND.DEAL_CCY_CD
            ,VND.VND_PMT_TERM_DESC_TXT
            ,PV.PRNT_VND_CD
            ,PV.PRNT_VND_NM
        FROM
             VND      VND
            ,PRNT_VND PV
        WHERE
                VND.GLBL_CMPY_CD = #glblCmpyCd#
            AND VND.VND_CD       = #vndCd#
            AND VND.RGTN_STS_CD  = #rgtnStsCd#
            AND VND.GLBL_CMPY_CD  = PV.GLBL_CMPY_CD
            AND VND.PRNT_VND_PK   = PV.PRNT_VND_PK
            AND VND.EZCANCELFLAG = '0'
            AND PV.EZCANCELFLAG  = '0'
    </statement>
    
    <statement id="getPreferredCarrierInfo" parameterClass="Map" resultClass="Map">
        SELECT
             RW.PRF_CARR_CD
            ,OCV.CARR_NM
        FROM
             RTL_WH      RW
            ,OTBD_CARR_V OCV
        WHERE
                RW.GLBL_CMPY_CD  = #glblCmpyCd#
            AND RW.RTL_WH_CD     = #rtlWhCd#
            AND RW.PRF_CARR_CD   = OCV.CARR_CD
            AND RW.GLBL_CMPY_CD  = OCV.GLBL_CMPY_CD
            AND RW.EZCANCELFLAG  = '0'
            AND OCV.EZCANCELFLAG = '0'
    </statement>
    
    <statement id="getDsOrdTpList" parameterClass="Map" resultClass="Map">
        SELECT
            DPT.DS_PO_TP_CD
           ,DPT.DS_PO_TP_DESC_TXT
        FROM
            DS_PO_TP DPT
        WHERE
            DPT.GLBL_CMPY_CD      = #glblCmpyCd#
        <isNotNull property="dsPoTpDplyFlg">
        AND DPT.DS_PO_TP_DPLY_FLG = #dsPoTpDplyFlg#
        </isNotNull>
        AND DPT.EZCANCELFLAG      = '0'
        ORDER BY
            DPT.DS_PO_TP_SORT_NUM ASC
    </statement>
    
    <statement id="getBusinessUnitList" parameterClass="Map" resultClass="Map">
        SELECT
             PG.PRCH_GRP_CD
            ,PG.PRCH_GRP_DESC_TXT
        FROM 
             PRCH_GRP PG
        WHERE
             PG.GLBL_CMPY_CD  = #glblCmpyCd#
        AND  PG.EZCANCELFLAG  = '0'
        ORDER BY
             PG.PRCH_GRP_DESC_TXT ASC
    </statement>
    
    <statement id="getFreightTermList" parameterClass="Map" resultClass="Map">
        SELECT
            FRT_COND_CD
           ,FRT_COND_DESC_TXT
        FROM
            FRT_COND
        WHERE
            GLBL_CMPY_CD  = #glblCmpyCd#
        AND EZCANCELFLAG  = '0'
        ORDER BY
            FRT_COND_SORT_NUM ASC
    </statement>
    
    <statement id="getShippingMethodList" parameterClass="Map" resultClass="Map">
        SELECT
            SSL.SHPG_SVC_LVL_CD
           ,SSL.SHPG_SVC_LVL_DESC_TXT
        FROM
            SHPG_SVC_LVL SSL
        WHERE
            SSL.GLBL_CMPY_CD  = #glblCmpyCd#
        AND SSL.EZCANCELFLAG  = '0'
        ORDER BY
            SSL.SHPG_SVC_LVL_SORT_NUM ASC
    </statement>
    
    <statement id="getStockStatusList" parameterClass="Map" resultClass="Map">
        SELECT
            SS.STK_STS_CD
           ,SS.STK_STS_DESC_TXT
        FROM
            STK_STS SS
        WHERE
            SS.GLBL_CMPY_CD  = #glblCmpyCd#
        AND SS.EZCANCELFLAG  = '0'
        ORDER BY
            SS.STK_STS_SORT_NUM ASC
    </statement>
    
    <statement id="getTransmissionMethodTypeList" parameterClass="Map" resultClass="Map">
        SELECT
            TP.TRSMT_METH_TP_CD
           ,TP.TRSMT_METH_TP_DESC_TXT
        FROM
            TRSMT_METH_TP   TP
        WHERE
            TP.GLBL_CMPY_CD  = #glblCmpyCd#
        AND TP.DISP_FLG      = 'Y'
        AND TP.EZCANCELFLAG  = '0'
        ORDER BY
            TP.TRSMT_METH_TP_SORT_NUM ASC
    </statement>

    <statement id="getPoShipToCustList" parameterClass="Map" resultClass="Map">
        SELECT
            PSC.SHIP_TO_CUST_CD
           ,PSC.SHIP_TO_LOC_NM
        FROM
            PO_SHIP_TO_CUST_V PSC
        WHERE
            PSC.GLBL_CMPY_CD = #glblCmpyCd#
        AND PSC.SHIP_TO_CUST_CD LIKE #shipToCustCode#
        AND PSC.EZCANCELFLAG = '0'
    </statement>

    
    <statement id="getPoLineTypeList" parameterClass="Map" resultClass="Map">
        SELECT
            PLT.PO_LINE_TP_CD
           ,PLT.PO_LINE_TP_DESC_TXT
        FROM
            PO_LINE_TP PLT
        WHERE
            PLT.GLBL_CMPY_CD     = #glblCmpyCd#
        <isNotNull property="scrEntAvalFlg">
        AND PLT.SCR_ENT_AVAL_FLG = #scrEntAvalFlg#
        </isNotNull>
        AND PLT.EZCANCELFLAG     = '0'
        ORDER BY
            PLT.PO_LINE_TP_SORT_NUM ASC
    </statement>

    <statement id="countValidRws" parameterClass="Map" resultClass="BigDecimal">
        SELECT
             COUNT(RD.RWS_NUM) AS RWS_CNT
        FROM
             PO         PH
            ,PO_DTL     PD
            ,RWS_HDR    RH
            ,RWS_DTL    RD
            ,RWS_STS    RS
        WHERE
             PH.GLBL_CMPY_CD        = #GLBL_CMPY_CD#
        AND  PH.PO_ORD_NUM          = #PO_ORD_NUM#
        AND  PH.GLBL_CMPY_CD        = PD.GLBL_CMPY_CD
        AND  PH.PO_ORD_NUM          = PD.PO_ORD_NUM
        AND  PD.PO_ORD_DTL_LINE_NUM = #PO_ORD_DTL_LINE_NUM#
        AND  PD.GLBL_CMPY_CD        = RH.GLBL_CMPY_CD
        AND  PD.PO_ORD_NUM          = RH.PO_RCV_TRX_HDR_NUM
        AND  RH.GLBL_CMPY_CD        = RD.GLBL_CMPY_CD
        AND  RH.RWS_NUM             = RD.RWS_NUM
        AND  RD.PO_RCV_TRX_LINE_NUM = PD.PO_ORD_DTL_LINE_NUM
        AND  RD.GLBL_CMPY_CD        = RS.GLBL_CMPY_CD
        AND  RD.RWS_STS_CD          = RS.RWS_STS_CD
        AND  RS.RWS_OPEN_FLG        = #RWS_OPEN_FLG#
        AND  PH.EZCANCELFLAG        = '0'
        AND  PD.EZCANCELFLAG        = '0'
        AND  RH.EZCANCELFLAG        = '0'
        AND  RD.EZCANCELFLAG        = '0'
        AND  RS.EZCANCELFLAG        = '0'
    </statement>

    <statement id="countValidRwsSet" parameterClass="Map" resultClass="BigDecimal">
        SELECT
             COUNT(RD.RWS_NUM) AS RWS_CNT
        FROM
             PO         PH
            ,PO_DTL     PD
            ,RWS_HDR    RH
            ,RWS_DTL    RD
            ,RWS_STS    RS
        WHERE
             PH.GLBL_CMPY_CD                = #GLBL_CMPY_CD#
        AND  PH.PO_ORD_NUM                  = #PO_ORD_NUM#
        AND  PH.GLBL_CMPY_CD                = PD.GLBL_CMPY_CD
        AND  PH.PO_ORD_NUM                  = PD.PO_ORD_NUM
        AND  PD.GLBL_CMPY_CD                = RH.GLBL_CMPY_CD
        AND  PD.PO_ORD_NUM                  = RH.PO_RCV_TRX_HDR_NUM
        AND  RH.GLBL_CMPY_CD                = RD.GLBL_CMPY_CD
        AND  RH.RWS_NUM                     = RD.RWS_NUM
        AND  RD.PO_RCV_TRX_LINE_NUM         = PD.PO_ORD_DTL_LINE_NUM
        AND  RD.GLBL_CMPY_CD                = RS.GLBL_CMPY_CD
        AND  RD.RWS_STS_CD                  = RS.RWS_STS_CD
        AND  RS.RWS_OPEN_FLG                = #RWS_OPEN_FLG#
        AND  PD.SET_PO_ORD_DTL_LINE_NUM     = #PO_ORD_DTL_LINE_NUM#
        AND  PH.EZCANCELFLAG                = '0'
        AND  PD.EZCANCELFLAG                = '0'
        AND  RH.EZCANCELFLAG                = '0'
        AND  RD.EZCANCELFLAG                = '0'
        AND  RS.EZCANCELFLAG                = '0'
    </statement>

    <!-- START 2022/09/12 T.NEMA [QC#60413, ADD] -->
    <statement id="countValidAPInvoiceSetItemForCancel" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            COUNT(*)
        FROM
            PO_DTL          PD
           ,CM_AP_INV_HDR   CAIH
           ,CM_AP_INV_DTL   CAID
        WHERE
               PD.GLBL_CMPY_CD            = #GLBL_CMPY_CD#
           AND PD.PO_ORD_NUM              = #PO_ORD_NUM#
           AND PD.SET_PO_ORD_DTL_LINE_NUM = #PO_ORD_DTL_LINE_NUM#
           AND PD.EZCANCELFLAG            = '0'
           AND PD.GLBL_CMPY_CD            = CAIH.GLBL_CMPY_CD
           AND PD.PO_ORD_NUM              = CAIH.PO_NUM
           AND CAIH.GLBL_CMPY_CD          = CAID.GLBL_CMPY_CD
           AND CAIH.ACCT_INV_STS_CD       = #ACCT_INV_STS_CD#
           AND CAIH.AP_VND_INV_NUM        = CAID.AP_VND_INV_NUM
           AND CAIH.PO_NUM                = CAID.PO_NUM
           AND CAID.PO_ORD_DTL_LINE_NUM   = PD.PO_ORD_DTL_LINE_NUM
           AND CAID.EZCANCELFLAG          = '0'
    </statement>
  
    <statement id="countValidAPInvoiceForCancel" parameterClass="Map" resultClass="BigDecimal">
        SELECT
             COUNT(*)
        FROM
             CM_AP_INV_HDR      CAIH
            ,CM_AP_INV_DTL      CAID
        WHERE 
             CAIH.GLBL_CMPY_CD        = #GLBL_CMPY_CD#
        AND  CAIH.PO_NUM              = #PO_ORD_NUM#
        AND  CAIH.ACCT_INV_STS_CD     = #ACCT_INV_STS_CD#
        AND  CAIH.EZCANCELFLAG        = '0'
        AND  CAIH.GLBL_CMPY_CD        = CAID.GLBL_CMPY_CD
        AND  CAIH.AP_VND_INV_NUM      = CAID.AP_VND_INV_NUM
        AND  CAIH.PO_NUM              = CAID.PO_NUM
        AND  CAID.PO_ORD_DTL_LINE_NUM = #PO_ORD_DTL_LINE_NUM#
        AND  CAID.EZCANCELFLAG        = '0'
    </statement>
    <!-- END   2022/09/12 T.NEMA [QC#60413, ADD] -->
    <!-- QC#25314 MOD Start-->
    <!-- 
    <statement id="countValidRwsForSubmmit" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            COUNT(*)
        FROM
             PO             PH
            ,PO_RCV_HDR     PRH
            ,RWS_HDR        RH
        WHERE 1=1
        AND PH.GLBL_CMPY_CD             = #glblCmpyCd#
        AND PH.PO_ORD_NUM               = #poOrdNum#
        AND PH.GLBL_CMPY_CD             = PRH.GLBL_CMPY_CD
        AND PH.PO_ORD_NUM               = PRH.PO_RCV_TRX_HDR_NUM
        AND PRH.GLBL_CMPY_CD            = RH.GLBL_CMPY_CD
        AND PRH.RWS_REF_NUM             = RH.RWS_REF_NUM
        <iterate property="rwsStsCdList" var="rwsStsCd[]" open="AND RH.RWS_STS_CD IN (" close=") " conjunction=",">
            #rwsStsCd[]#
        </iterate>
        AND PH.EZCANCELFLAG             = '0'
        AND PRH.EZCANCELFLAG            = '0'
        AND RH.EZCANCELFLAG             = '0'
    </statement>
     -->
    <statement id="countValidRwsForSubmmit" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            <!-- QC#53811 MOD Start-->
            <!--SUM(RD.RWS_PUT_AWAY_QTY)-->
<!-- START 04/03/2020 T.Ogura [QC#56386,MOD] -->
<!--        SUM(RD.RWS_QTY) -->
            SUM(
               CASE WHEN RD.RWS_STS_CD IN (#rwsStsPrinted#, #rwsStsReceiving#) THEN RD.RWS_QTY
                    WHEN RD.RWS_STS_CD = #rwsStsReceived# THEN RD.RWS_PUT_AWAY_QTY
                    ELSE 0
               END
            ) QTY
<!-- END   04/03/2020 T.Ogura [QC#56386,MOD] -->
            <!-- QC#53811 MOD End-->
        FROM
             PO             PH
            ,PO_RCV_HDR     PRH
            ,RWS_HDR        RH
            ,RWS_DTL        RD
        WHERE 1=1
        AND PH.GLBL_CMPY_CD             = #glblCmpyCd#
        AND PH.PO_ORD_NUM               = #poOrdNum#
        AND RD.MDSE_CD                 = #mdseCd#
        AND PH.GLBL_CMPY_CD             = PRH.GLBL_CMPY_CD
        AND PH.PO_ORD_NUM               = PRH.PO_RCV_TRX_HDR_NUM
        AND PRH.GLBL_CMPY_CD            = RH.GLBL_CMPY_CD
        AND PRH.RWS_REF_NUM             = RH.RWS_REF_NUM
        AND RH.GLBL_CMPY_CD             = RD.GLBL_CMPY_CD
        AND RH.RWS_NUM                  = RD.RWS_NUM
        <iterate property="rwsStsCdList" var="rwsStsCd[]" open="AND RH.RWS_STS_CD IN (" close=") " conjunction=",">
            #rwsStsCd[]#
        </iterate>
        AND RD.PO_RCV_TRX_LINE_NUM      = #poOrdDtlLineNum#
        AND PH.EZCANCELFLAG             = '0'
        AND PRH.EZCANCELFLAG            = '0'
        AND RH.EZCANCELFLAG             = '0'
        AND RD.EZCANCELFLAG            = '0'
    </statement>
    <!-- QC#25314 MOD End-->

    <statement id="getInventoryReq" parameterClass="Map" resultClass="Map">
        SELECT 
            PD.PO_ORD_DTL_LINE_NUM
           ,PR.PRCH_REQ_STS_CD
        FROM 
            PRCH_REQ  PR
           ,PO_DTL    PD
        WHERE
            PR.GLBL_CMPY_CD        = #glblCmpyCd#
        AND PR.PRCH_REQ_NUM        = PD.PRCH_REQ_NUM(+)
        AND PR.GLBL_CMPY_CD        = PD.GLBL_CMPY_CD(+)
        AND PD.PO_ORD_NUM          = #poOrdNum#
        <iterate property="PO_MDSE_CMPSN_TP_CD" var="elem[]" open="AND PD.PO_MDSE_CMPSN_TP_CD IN (" close=")" conjunction=",">
             #elem[]#
        </iterate>
        AND PR.EZCANCELFLAG        = '0'
        AND PD.EZCANCELFLAG(+)     = '0'
    </statement>

    <statement id="getConfigComponents" parameterClass="Map" resultClass="Map">
        SELECT
            SMM.SVC_MACH_MSTR_PK
           ,SMM.SVC_MACH_MAINT_AVAL_FLG
           ,SMM.TRX_HDR_NUM
           ,SMM.MDSE_CD
           ,SMM.CUR_LOC_NUM
           ,SMM.SER_NUM
           ,SMM.STK_STS_CD
           ,SMM.SVC_MACH_MSTR_STS_CD
           ,SMM.SVC_MACH_MSTR_LOC_STS_CD
           ,RS.RTL_WH_CD
           ,RS.RTL_SWH_CD
           ,SMM.EZUPTIME
           ,SMM.EZUPTIMEZONE
        FROM
            SVC_MACH_MSTR SMM
           ,RTL_SWH       RS
        WHERE
            SMM.GLBL_CMPY_CD       = #glblCmpyCd#
        AND SMM.SVC_CONFIG_MSTR_PK = #svcConfigMstrPk#
        AND SMM.GLBL_CMPY_CD       = RS.GLBL_CMPY_CD(+)
        AND SMM.CUR_LOC_NUM        = RS.INVTY_LOC_CD(+)
        AND SMM.EZCANCELFLAG       = '0'
        AND RS.EZCANCELFLAG(+)     = '0'
        ORDER BY
            SMM.MDSE_CD
           ,SMM.SER_NUM
           ,SMM.SVC_MACH_MAINT_AVAL_FLG
           ,SMM.TRX_HDR_NUM
           ,SMM.CUR_LOC_NUM
    </statement>

    <statement id="getSvcMachMstrForSer" parameterClass="Map" resultClass="Map">
SELECT
            SMM.SVC_MACH_MSTR_PK
           ,SMM.SVC_MACH_MAINT_AVAL_FLG
           ,SMM.TRX_HDR_NUM
           ,SMM.MDSE_CD
           ,SMM.CUR_LOC_NUM
           ,SMM.SER_NUM
           ,SMM.STK_STS_CD
           ,SMM.SVC_MACH_MSTR_STS_CD
           ,SMM.SVC_MACH_MSTR_LOC_STS_CD
           ,RS.RTL_WH_CD
           ,RS.RTL_SWH_CD
           ,SMM.EZUPTIME
           ,SMM.EZUPTIMEZONE
        FROM
            SVC_MACH_MSTR SMM
           ,RTL_SWH       RS
        WHERE
            SMM.GLBL_CMPY_CD          = #glblCmpyCd#
        AND SMM.SER_NUM               = #serNum#
        AND SMM.MDSE_CD               = #mdseCd#
        <iterate property="SVC_MACH_MSTR_STS_CD_LIST" var="elem[]" open="AND SMM.SVC_MACH_MSTR_STS_CD IN (" close=")" conjunction=",">
           #elem[]#
        </iterate>
        AND SMM.GLBL_CMPY_CD          = RS.GLBL_CMPY_CD
        AND SMM.CUR_LOC_NUM           = RS.INVTY_LOC_CD
        AND RS.RTL_WH_CD              = #srcRtlWhCd#
        AND SMM.EZCANCELFLAG          = '0'
        AND RS.EZCANCELFLAG           = '0'
        ORDER BY
            SMM.MDSE_CD
           ,SMM.SER_NUM
           ,SMM.SVC_MACH_MAINT_AVAL_FLG
           ,SMM.TRX_HDR_NUM
           ,SMM.CUR_LOC_NUM
    </statement>

    <statement id="getPoData" parameterClass="Map" resultClass="Map">
        SELECT
             PO.PO_ORD_NUM
            ,PO.DS_PO_TP_CD
            ,DPT.DS_PO_TP_DESC_TXT
            ,PO.PO_HDR_STS_CD
            ,PHS.PO_HDR_STS_DESC_TXT
            ,PO.PO_APVL_STS_CD
            ,PAS.PO_APVL_STS_DESC_TXT
            ,PO.PO_APVL_DT
            ,PO.PO_SUBMT_TS
            ,PO.RQST_RCV_DT
            ,PO.RQST_RCV_TM
            <!-- START 2023/02/14 S.Dong [QC#60966, ADD] -->
            ,PO.RQST_SHIP_DT
            <!-- END 2023/02/14 S.Dong [QC#60966, ADD] -->
            ,PO.PO_ORD_SRC_CD
            ,POS.PO_ORD_SRC_DESC_TXT
            ,PO.PO_QLFY_CD
            ,PO.PO_SUBMT_PSN_CD
            <!-- START 01/05/2023 F.Fadriquela [QC#60992,MOD] -->
            <!-- ,NVL2(SSUL.FULL_PSN_NM,SSUL.FULL_PSN_NM,AP.FIRST_NM || (NVL2(AP.MID_NM, ' '||AP.MID_NM||' ', ' ')) || AP.LAST_NM) AS FULL_PSN_NM -->
            ,NVL2(SSUL.FULL_PSN_NM,SSUL.FULL_PSN_NM,NVL2(SP.PSN_FIRST_NM, SP.PSN_FIRST_NM, PO.PO_SUBMT_PSN_CD) || (NVL2(SP.PSN_MID_NM, ' '||SP.PSN_MID_NM||' ', ' ')) || SP.PSN_LAST_NM) AS FULL_PSN_NM
            <!-- END 01/05/2023 F.Fadriquela [QC#60992,MOD] -->
            ,PO.PRCH_GRP_CD
            ,PG.PRCH_GRP_DESC_TXT
            ,PO.PO_ORD_CMNT_TXT
            ,PO.PRNT_VND_CD
            ,PO.PRNT_VND_NM
            ,PO.VND_CD
            ,PO.VND_NM
            ,PO.PO_STS_CD
            ,SRC_RTL_WH_CD
            ,SRW.RTL_WH_NM        AS SRC_RTL_WH_NM
            ,PO.DEST_RTL_WH_CD
            ,DRW.RTL_WH_NM        AS DEST_RTL_WH_NM
            ,PO.RTRN_SHIP_TO_RTL_WH_CD
            ,RRW.RTL_WH_NM
            ,RRW.ADDL_LOC_NM
            ,RRW.FIRST_LINE_ADDR
            ,RRW.SCD_LINE_ADDR
            ,RRW.THIRD_LINE_ADDR
            ,RRW.FRTH_LINE_ADDR
            ,RRW.POST_CD
            ,RRW.CTY_ADDR
            ,RWC.CTRY_NM
            ,RRW.ST_CD
            ,RRW.PROV_NM
            ,RRW.CTRY_CD
            ,RWC.CTRY_DESC_TXT
            ,PO.CARR_ACCT_NUM
            ,PO.VND_PMT_TERM_DESC_TXT
            ,PO.EZUPTIME       AS PH_EZUPTIME
            ,PO.EZUPTIMEZONE   AS PH_EZUPTIMEZONE
            ,PO.EZUPTIME      AS DPH_EZUPTIME
            ,PO.EZUPTIMEZONE  AS DPH_EZUPTIMEZONE
            ,CNT.CNTY_NM
            <!-- START 2017/11/28 K.Kameoka [QC#22666,MOD] -->            
            --,RRW.FIRST_LINE_ADDR
            --   || RRW.SCD_LINE_ADDR
            --   || RRW.THIRD_LINE_ADDR
            --   || RRW.FRTH_LINE_ADDR AS ALL_LINE_ADDR
            ,RRW.FIRST_LINE_ADDR || ' ' || RRW.SCD_LINE_ADDR || ' ' || RRW.THIRD_LINE_ADDR || ' ' || RRW.FRTH_LINE_ADDR AS ALL_LINE_ADDR
            <!-- END 2017/11/28 K.Kameoka [QC#22666,MOD] -->                        
            ,PO.PO_SEND_FLG
            ,PO.VND_ISS_ORD_NUM
            ,PO.PO_SEND_TS
        FROM
             PO               PO
            ,DS_PO_TP         DPT
            ,PO_HDR_STS       PHS
            ,PO_APVL_STS      PAS
            ,PO_ORD_SRC       POS
            <!-- START 01/05/2023 F.Fadriquela [QC#60992,MOD] -->
            <!-- ,AUTH_PSN         AP -->
            ,S21_PSN          SP
            <!-- END 01/05/2023 F.Fadriquela [QC#60992,MOD] -->
            ,SCE_SYS_USR_LIST SSUL
            ,PRCH_GRP         PG
            ,RTL_WH           SRW
            ,RTL_WH           DRW
            ,RTL_WH           RRW
            ,CTRY             RWC
            ,CNTY             CNT
        WHERE
             PO.GLBL_CMPY_CD               = #GLBL_CMPY_CD#
        AND  PO.PO_ORD_NUM                 = #PO_ORD_NUM#
        AND  PO.GLBL_CMPY_CD               = DPT.GLBL_CMPY_CD(+)
        AND  PO.DS_PO_TP_CD                = DPT.DS_PO_TP_CD(+)
        AND  PO.GLBL_CMPY_CD               = PHS.GLBL_CMPY_CD(+)
        AND  PO.PO_HDR_STS_CD              = PHS.PO_HDR_STS_CD(+)
        AND  PO.GLBL_CMPY_CD               = PAS.GLBL_CMPY_CD(+)
        AND  PO.PO_APVL_STS_CD             = PAS.PO_APVL_STS_CD(+)
        AND  PO.GLBL_CMPY_CD               = POS.GLBL_CMPY_CD(+)
        AND  PO.PO_ORD_SRC_CD              = POS.PO_ORD_SRC_CD(+)
        <!-- START 01/05/2023 F.Fadriquela [QC#60992,MOD] -->
        <!-- AND  PO.GLBL_CMPY_CD               = AP.GLBL_CMPY_CD(+) -->
        <!-- AND  PO.PO_SUBMT_PSN_CD            = AP.USR_NM(+) -->
        AND  PO.GLBL_CMPY_CD               = SP.GLBL_CMPY_CD(+)
        AND  PO.PO_SUBMT_PSN_CD            = SP.PSN_CD(+)
        <!-- END 01/05/2023 F.Fadriquela [QC#60992,MOD] -->
        AND  PO.GLBL_CMPY_CD               = SSUL.GLBL_CMPY_CD(+)
        AND  PO.PO_SUBMT_PSN_CD            = SSUL.FULL_PSN_NM(+)  
        AND  PO.GLBL_CMPY_CD               = PG.GLBL_CMPY_CD(+)
        AND  PO.PRCH_GRP_CD                = PG.PRCH_GRP_CD(+)
        AND  PO.GLBL_CMPY_CD               = SRW.GLBL_CMPY_CD(+)
        AND  PO.SRC_RTL_WH_CD              = SRW.RTL_WH_CD(+)
        AND  PO.GLBL_CMPY_CD               = DRW.GLBL_CMPY_CD(+)
        AND  PO.DEST_RTL_WH_CD             = DRW.RTL_WH_CD(+)
        AND  PO.GLBL_CMPY_CD               = RRW.GLBL_CMPY_CD(+)
        AND  PO.RTRN_SHIP_TO_RTL_WH_CD     = RRW.RTL_WH_CD(+)
        AND  PO.GLBL_CMPY_CD               = RWC.GLBL_CMPY_CD(+)
        AND  RRW.CTRY_CD                   = RWC.CTRY_CD(+)
        AND  RRW.CNTY_PK                   = CNT.CNTY_PK(+)
        AND  PO.EZCANCELFLAG               = '0'
        AND  DPT.EZCANCELFLAG(+)           = '0'
        AND  PHS.EZCANCELFLAG(+)           = '0'
        AND  PAS.EZCANCELFLAG(+)           = '0'
        AND  POS.EZCANCELFLAG(+)           = '0'
        <!-- START 01/05/2023 F.Fadriquela [QC#60992,MOD] -->
        <!-- AND  AP.EZCANCELFLAG(+)            = '0' -->
        AND  SP.EZCANCELFLAG(+)            = '0'
        <!-- END 01/05/2023 F.Fadriquela [QC#60992,MOD] -->
        AND  SSUL.EZCANCELFLAG(+)          = '0'
        AND  PG.EZCANCELFLAG(+)            = '0'
        AND  SRW.EZCANCELFLAG(+)           = '0'
        AND  DRW.EZCANCELFLAG(+)           = '0'
        AND  RRW.EZCANCELFLAG(+)           = '0'
        AND  RWC.EZCANCELFLAG(+)           = '0'
        AND  CNT.EZCANCELFLAG(+)           = '0'
    </statement>
    
    <statement id="getDsPoDtlData" parameterClass="Map" resultClass="Map">
        SELECT
             PD.PO_ORD_NUM
            ,PD.PO_ORD_DTL_LINE_NUM
            ,PD.TRX_REF_NUM
            ,PD.FRT_COND_CD
            ,FC.FRT_COND_DESC_TXT
            ,PD.CTAC_PSN_NM
            ,PD.PO_SEND_TS
        FROM
             PO_DTL      PD
            ,FRT_COND    FC
        WHERE 
             PD.GLBL_CMPY_CD    = #GLBL_CMPY_CD#
        AND  PD.PO_ORD_NUM      = #PO_ORD_NUM#
        AND  PD.GLBL_CMPY_CD    = FC.GLBL_CMPY_CD(+)
        AND  PD.FRT_COND_CD     = FC.FRT_COND_CD(+)
        AND  PD.EZCANCELFLAG    = '0'
        AND  FC.EZCANCELFLAG(+) = '0'
        ORDER BY
             PO_ORD_DTL_LINE_NUM
    </statement>

    <statement id="getPoDtlData" parameterClass="Map" resultClass="Map">
        SELECT
             POD.PO_ORD_NUM
            ,POD.PO_ORD_DTL_LINE_NUM
            ,POD.SHIP_TO_CUST_CD
            ,POD.SHIP_TO_LOC_NM
            ,POD.SHIP_TO_ADDL_LOC_NM
            ,POD.SHIP_TO_FIRST_LINE_ADDR
                  || CASE WHEN TRIM(POD.SHIP_TO_SCD_LINE_ADDR) IS NOT NULL THEN ' '   || TRIM(POD.SHIP_TO_SCD_LINE_ADDR) END
                  || CASE WHEN TRIM(POD.SHIP_TO_THIRD_LINE_ADDR) IS NOT NULL THEN ' ' || TRIM(POD.SHIP_TO_THIRD_LINE_ADDR) END
                  || CASE WHEN TRIM(POD.SHIP_TO_FRTH_LINE_ADDR) IS NOT NULL THEN ' '  || TRIM(POD.SHIP_TO_FRTH_LINE_ADDR) END
             AS LINE_ADDR 
            ,POD.SHIP_TO_FIRST_LINE_ADDR
            ,POD.SHIP_TO_SCD_LINE_ADDR
            ,POD.SHIP_TO_THIRD_LINE_ADDR
            ,POD.SHIP_TO_FRTH_LINE_ADDR
            ,POD.SHIP_TO_POST_CD
            ,POD.SHIP_TO_CTY_ADDR
            ,POD.SHIP_TO_CNTY_NM
            ,POD.SHIP_TO_ST_CD
            ,POD.SHIP_TO_PROV_NM
            ,POD.SHIP_TO_CTRY_CD
            ,CTR.CTRY_DESC_TXT
            ,POD.BILL_TO_CUST_CD
            ,POD.SHPG_SVC_LVL_CD
            ,SSL.SHPG_SVC_LVL_DESC_TXT
            ,POD.CARR_CD
            ,OCV.CARR_NM
            ,POD.PO_STS_CD
        FROM
             PO_DTL         POD
            ,CTRY           CTR
            ,SHPG_SVC_LVL   SSL
            ,OTBD_CARR_V    OCV
        WHERE 
             POD.GLBL_CMPY_CD    = #GLBL_CMPY_CD#
        AND  POD.PO_ORD_NUM      = #PO_ORD_NUM#
        AND  POD.GLBL_CMPY_CD    = CTR.GLBL_CMPY_CD(+)
        AND  POD.SHIP_TO_CTRY_CD = CTR.CTRY_CD(+)
        AND  POD.GLBL_CMPY_CD    = SSL.GLBL_CMPY_CD(+)
        AND  POD.SHPG_SVC_LVL_CD = SSL.SHPG_SVC_LVL_CD(+)
        AND  POD.GLBL_CMPY_CD    = OCV.GLBL_CMPY_CD(+)
        AND  POD.CARR_CD         = OCV.CARR_CD(+)
        AND  POD.EZCANCELFLAG    = '0'
        AND  CTR.EZCANCELFLAG(+) = '0'
        AND  SSL.EZCANCELFLAG(+) = '0'
        AND  OCV.EZCANCELFLAG(+) = '0'
        ORDER BY
             POD.PO_ORD_DTL_LINE_NUM
    </statement>
    
    <statement id="getPoMsgTxt" parameterClass="Map" resultClass="Map">
        SELECT
              PM.PO_MSG_PK
             ,PM.PO_ORD_NUM
             ,PM.PO_ORD_DTL_LINE_NUM
             ,PM.PO_MSG_TP_CD
             ,PM.PO_MSG_SEG_ID
             ,PM.PO_MSG_SUBMT_PSN_CD
             ,PM.PO_MSG_TXT 
        FROM 
              PO_MSG PM
        WHERE 
              PM.GLBL_CMPY_CD = #GLBL_CMPY_CD#
        AND   PM.PO_ORD_NUM   = #PO_ORD_NUM# 
        AND   PM.PO_MSG_TP_CD = #PO_MSG_TP_CD#
        AND   PM.EZCANCELFLAG = '0'
        ORDER BY
              PO_MSG_SEG_ID
    </statement>
    
    <statement id="getDetailListInfo" parameterClass="Map"  resultMap="result.getDetailListInfo">
        <!-- add start 2022/05/16 QC#57934 -->
        WITH WRITE_OFF_INFO AS (
            SELECT
                 E.PO_NUM
                ,E.PO_ORD_DTL_LINE_NUM
                ,SUM(E.RCV_WO_QTY) AS RCV_WO_QTY
                ,SUM(E.INV_WO_QTY) AS INV_WO_QTY
            FROM
                (
                 SELECT
                      D.PO_NUM
                     ,D.PO_ORD_DTL_LINE_NUM
                     ,D.WRT_OFF_DT
                     ,SUM(D.RCV_QTY) AS RCV_QTY
                     ,SUM(D.INV_QTY) AS INV_QTY
                     ,MAX(D.RCV_UNIT_PRC_AMT) AS RCV_UNIT_PRC_AMT
                     ,MAX(D.INV_UNIT_PRC_AMT) AS INV_UNIT_PRC_AMT
                     ,CASE WHEN SUM(D.INV_QTY) &lt; SUM(D.RCV_QTY)
                               THEN SUM(D.RCV_QTY) - SUM(D.INV_QTY)
                           <!-- mod start 2022/08/05 QC#59245 -->
                           <!-- WHEN SUM(D.INV_QTY) = SUM(D.RCV_QTY) AND MAX(D.INV_UNIT_PRC_AMT) &lt; MAX(D.RCV_UNIT_PRC_AMT) -->
                           WHEN SUM(D.INV_QTY) = SUM(D.RCV_QTY) AND SUM(D.INV_AMT) &lt; SUM(D.RCV_AMT)
                           <!-- mod end 2022/08/05 QC#59245 -->
                               THEN SUM(D.RCV_QTY)
                           ELSE 0
                      END AS RCV_WO_QTY
                     ,CASE WHEN SUM(D.INV_QTY) &gt; SUM(D.RCV_QTY)
                               THEN SUM(D.INV_QTY) - SUM(D.RCV_QTY)
                           <!-- mod start 2022/08/05 QC#59245 -->
                           <!-- WHEN SUM(D.INV_QTY) = SUM(D.RCV_QTY) AND MAX(D.INV_UNIT_PRC_AMT) &gt; MAX(D.RCV_UNIT_PRC_AMT) -->
                           WHEN SUM(D.INV_QTY) = SUM(D.RCV_QTY) AND SUM(D.INV_AMT) &gt; SUM(D.RCV_AMT)
                           <!-- mod end 2022/08/05 QC#59245 -->
                               THEN SUM(D.INV_QTY)
                           ELSE 0
                      END AS INV_WO_QTY
                 FROM
                     (
                      SELECT
                           A.PO_NUM
                          ,A.PO_ORD_DTL_LINE_NUM
                          ,A.WRT_OFF_DT
                          ,CASE WHEN A.DR_CR_TP_CD = #drCrTpDr# THEN NVL(A.INV_RCV_QTY, 0) ELSE 0 END AS RCV_QTY
                          ,CASE WHEN A.DR_CR_TP_CD = #drCrTpCr# THEN NVL(A.INV_QTY, 0) ELSE 0 END AS INV_QTY
                          ,CASE WHEN A.DR_CR_TP_CD = #drCrTpDr# THEN NVL(A.ENT_DEAL_NET_UNIT_PRC_AMT, 0) ELSE 0 END AS RCV_UNIT_PRC_AMT
                          <!-- mod start 2022/08/05 QC#59245 -->
                          <!--
                          ,CASE WHEN A.DR_CR_TP_CD = #drCrTpCr#
                                    THEN
                                      CASE WHEN B.ENT_DEAL_NET_UNIT_PRC_AMT = C.ENT_DEAL_NET_UNIT_PRC_AMT
                                               THEN B.ENT_DEAL_NET_UNIT_PRC_AMT
                                           ELSE NVL(A.ENT_DEAL_NET_UNIT_PRC_AMT, 0)
                                      END
                                ELSE 0
                           END INV_UNIT_PRC_AMT
                          -->
                          ,CASE WHEN A.DR_CR_TP_CD = #drCrTpCr# THEN NVL(A.ENT_DEAL_NET_UNIT_PRC_AMT, 0) ELSE 0 END AS INV_UNIT_PRC_AMT
                          <!-- mod end 2022/08/05 QC#59245 -->
                          <!-- add start 2022/08/05 QC#59245 -->
                          ,CASE WHEN A.DR_CR_TP_CD = #drCrTpDr# THEN NVL(A.INV_RCV_QTY, 0) * NVL(A.ENT_DEAL_NET_UNIT_PRC_AMT, 0) ELSE 0 END AS RCV_AMT
                          ,CASE WHEN A.DR_CR_TP_CD = #drCrTpCr# THEN NVL(A.AC_INV_JRNL_COST_AMT, 0) ELSE 0 END AS INV_AMT
                          <!-- add end 2022/08/05 QC#59245 -->
                      FROM
                           CM_ACRL_WRITE_OFF  A
                          <!-- del start 2022/08/05 QC#59245 -->
                          <!-- ,CM_AP_INV_DTL      B -->
                          <!-- ,PO_DTL             C -->
                          <!-- del end 2022/08/05 QC#59245 -->
                      WHERE
                              A.GLBL_CMPY_CD        = #cMsg.glblCmpyCd#
                          AND A.PO_NUM              = #cMsg.poNum#
                          AND A.WRT_OFF_FLG         = #flgOnY#
                          <iterate property="coaAcctCdList" var="coaAcctCd[]" open="AND A.COA_ACCT_CD IN (" close=")" conjunction= "," >
                              #coaAcctCd[]#
                          </iterate>
                          AND A.AJE_CM_INTFC_TP_CD  IS NULL
                          AND A.EZCANCELFLAG        = '0'
                          <!-- del start 2022/08/05 QC#59245 -->
                          <!--
                          AND A.GLBL_CMPY_CD        = B.GLBL_CMPY_CD(+)
                          AND A.AP_VND_INV_NUM      = B.AP_VND_INV_NUM(+)
                          AND A.AP_VND_INV_LINE_NUM = B.AP_VND_INV_LINE_NUM(+)
                          AND B.EZCANCELFLAG(+)     = '0'
                          AND A.GLBL_CMPY_CD        = C.GLBL_CMPY_CD(+)
                          AND A.PO_NUM              = C.PO_ORD_NUM(+)
                          AND A.PO_ORD_DTL_LINE_NUM = C.PO_ORD_DTL_LINE_NUM(+)
                          AND C.EZCANCELFLAG(+)     = '0'
                          -->
                          <!-- del end 2022/08/05 QC#59245 -->
                     ) D
                 GROUP BY
                      D.PO_NUM
                     ,D.PO_ORD_DTL_LINE_NUM
                     ,D.WRT_OFF_DT
                 ) E
            GROUP BY
                 E.PO_NUM
                ,E.PO_ORD_DTL_LINE_NUM
        )
        <!-- add end 2022/05/16 QC#57934 -->
        SELECT
             PH.PO_ORD_NUM
            ,PD.PO_QTY
            ,PD.PO_RCV_QTY
            ,PD.PO_CANC_QTY
            ,PD.PO_ORD_DTL_CMNT_TXT
            ,PD.PO_ORD_DTL_LINE_NUM
            ,PD.PO_STS_CD
            ,PD.SHPG_PLN_NUM
            ,PD.MDSE_CD
            ,PD.DISP_PO_DTL_LINE_NUM
            ,PD.PO_MDSE_CMPSN_TP_CD
            ,PD.SET_PO_ORD_DTL_LINE_NUM
            ,PD.ASL_MDSE_CD
            ,PD.MDSE_DESC_SHORT_TXT
            ,PD.PO_LINE_TP_CD
            ,PD.ENT_DEAL_NET_UNIT_PRC_AMT
            ,PD.PO_DISP_QTY
            ,PD.PO_DISP_UOM_CD
            ,PD.RQST_RCV_DT
            <!-- START 2023/02/14 S.Dong [QC#60966, ADD] -->
            ,PD.RQST_SHIP_DT
            <!-- END 2023/02/14 S.Dong [QC#60966, ADD] -->
            ,PD.DEST_RTL_SWH_CD
            ,PD.ENT_PO_DTL_DEAL_NET_AMT
            ,PD.PO_INV_QTY
            ,PD.VND_INVTY_LOC_CD
            ,PD.SRC_RTL_SWH_CD
            ,PD.FROM_STK_STS_CD
            ,NVL((SELECT
                         PRD.PRCH_REQ_NUM
                     FROM
                         PRCH_REQ_DTL PRD
                     WHERE
                         PRD.GLBL_CMPY_CD = PD.GLBL_CMPY_CD
                     AND PRD.PO_ORD_NUM   = PD.PO_ORD_NUM
                     AND PRD.PRCH_REQ_LINE_STS_CD != #prchReqLineStsCdCancel#
                     AND PRD.EZCANCELFLAG = '0'
                     AND ROWNUM = 1)
                    , PD.PRCH_REQ_NUM) AS PRCH_REQ_NUM
            ,NVL((SELECT
                     PRD.PRCH_REQ_LINE_NUM
                 FROM
                     PRCH_REQ_DTL PRD
                 WHERE
                     PRD.GLBL_CMPY_CD = PD.GLBL_CMPY_CD
                 AND PRD.PO_ORD_NUM   = PD.PO_ORD_NUM
                 AND PRD.PO_ORD_DTL_LINE_NUM   = PD.PO_ORD_DTL_LINE_NUM
                 AND PRD.PRCH_REQ_LINE_STS_CD != #prchReqLineStsCdCancel#
                 AND PRD.EZCANCELFLAG = '0'
                 AND ROWNUM = 1)
                , PD.PRCH_REQ_LINE_NUM) AS PRCH_REQ_LINE_NUM
            ,NVL((SELECT
                     PRD.PRCH_REQ_LINE_SUB_NUM
                 FROM
                     PRCH_REQ_DTL PRD
                 WHERE
                     PRD.GLBL_CMPY_CD = PD.GLBL_CMPY_CD
                 AND PRD.PO_ORD_NUM   = PD.PO_ORD_NUM
                 AND PRD.PO_ORD_DTL_LINE_NUM   = PD.PO_ORD_DTL_LINE_NUM
                 AND PRD.PRCH_REQ_LINE_STS_CD != #prchReqLineStsCdCancel#
                 AND PRD.EZCANCELFLAG = '0'
                 AND ROWNUM = 1)
                , PD.PRCH_REQ_LINE_SUB_NUM) AS PRCH_REQ_LINE_SUB_NUM
            ,PD.SVC_CONFIG_MSTR_PK
            ,PD.PO_SEND_TS
            <!-- QC#13985 MOD START --> <!-- 2019/01/25 QC#30082 Delelete V.*, without any comments Start -->
            ,CASE WHEN PAC.COA_CMPY_CD IS NOT NULL THEN PAC.COA_CMPY_CD
                  ELSE PD.GLBL_CMPY_CD
             END AS SPLY_COA_CMPY_CD
            ,CASE WHEN PAC.COA_BR_CD IS NOT NULL THEN PAC.COA_BR_CD
                  ELSE ''
             END AS SPLY_COA_BR_CD
            ,CASE WHEN PAC.COA_CC_CD IS NOT NULL THEN PAC.COA_CC_CD
                  ELSE ''
             END AS SPLY_COA_CC_CD
            ,CASE WHEN PAC.COA_ACCT_CD IS NOT NULL THEN PAC.COA_ACCT_CD
                  ELSE ''
             END AS SPLY_COA_ACCT_CD
            ,CASE WHEN PAC.COA_PROD_CD IS NOT NULL THEN PAC.COA_PROD_CD
                  ELSE ''
             END AS SPLY_COA_PROD_CD
            ,CASE WHEN PAC.COA_CH_CD IS NOT NULL THEN PAC.COA_CH_CD
                  ELSE ''
             END AS SPLY_COA_CH_CD
            ,CASE WHEN PAC.COA_AFFL_CD IS NOT NULL THEN PAC.COA_AFFL_CD
                  ELSE ''
             END AS SPLY_COA_AFFL_CD
            ,CASE WHEN PAC.COA_PROJ_CD IS NOT NULL THEN PAC.COA_PROJ_CD
                  ELSE ''
             END AS SPLY_COA_PROJ_CD
            ,CASE WHEN PAC.COA_EXTN_CD IS NOT NULL THEN PAC.COA_EXTN_CD
                  ELSE ''
             END AS SPLY_COA_EXTN_CD
            <!-- 2019/01/25 QC#30082 Delelete V.*, without any comments End -->
            <!-- 2019/01/25 QC#30082 Del Start -->
<!--            ,CASE WHEN PAC.COA_CMPY_CD IS NOT NULL THEN-->
<!--                       PAC.COA_CMPY_CD-->
<!--                       || '.' || PAC.COA_BR_CD-->
<!--                       || '.' || PAC.COA_CC_CD-->
<!--                       || '.' || PAC.COA_ACCT_CD-->
<!--                       || '.' || PAC.COA_PROD_CD-->
<!--                       || '.' || PAC.COA_CH_CD-->
<!--                       || '.' || PAC.COA_AFFL_CD-->
<!--                       || '.' || PAC.COA_PROJ_CD-->
<!--                       || '.' || PAC.COA_EXTN_CD-->
<!--                  ELSE V.SPLY_COA_CMPY_CD-->
<!--                       || '.' || V.SPLY_COA_BR_CD-->
<!--                       || '.' || V.SPLY_COA_CC_CD-->
<!--                       || '.' || V.SPLY_COA_ACCT_CD-->
<!--                       || '.' || V.SPLY_COA_PROD_CD-->
<!--                       || '.' || V.SPLY_COA_CH_CD-->
<!--                       || '.' || V.SPLY_COA_AFFL_CD-->
<!--                       || '.' || V.SPLY_COA_PROJ_CD-->
<!--                       || '.' || V.SPLY_COA_EXTN_CD-->
<!--             END AS CH_ACCT_CD-->
            <!-- 2019/01/25 QC#30082 Del End -->
            <!-- 2019/01/25 QC#30082 Add Start -->
            ,NVL(PAC.COA_CMPY_CD, PD.GLBL_CMPY_CD)
                       || '.' || PAC.COA_BR_CD
                       || '.' || PAC.COA_CC_CD
                       || '.' || PAC.COA_ACCT_CD
                       || '.' || PAC.COA_PROD_CD
                       || '.' || PAC.COA_CH_CD
                       || '.' || PAC.COA_AFFL_CD
                       || '.' || PAC.COA_PROJ_CD
                       || '.' || PAC.COA_EXTN_CD AS CH_ACCT_CD
            <!-- 2019/01/25 QC#30082 Add Start -->
            ,PAA.COA_CMPY_CD     COA_CMPY_CD_AC
            ,PAA.COA_BR_CD       COA_BR_CD_AC
            ,PAA.COA_CC_CD       COA_CC_CD_AC
            ,PAA.COA_ACCT_CD     COA_ACCT_CD_AC
            ,PAA.COA_PROD_CD     COA_PROD_CD_AC
            ,PAA.COA_CH_CD       COA_CH_CD_AC
            ,PAA.COA_AFFL_CD     COA_AFFL_CD_AC
            ,PAA.COA_PROJ_CD     COA_PROJ_CD_AC
            ,PAA.COA_EXTN_CD     COA_EXTN_CD_AC
            ,PAA.COA_CMPY_CD
             || '.' || PAA.COA_BR_CD
             || '.' || PAA.COA_CC_CD
             || '.' || PAA.COA_ACCT_CD
             || '.' || PAA.COA_PROD_CD
             || '.' || PAA.COA_CH_CD
             || '.' || PAA.COA_AFFL_CD
             || '.' || PAA.COA_PROJ_CD
             || '.' || PAA.COA_EXTN_CD AS AC_ACCT_CD
            ,CASE WHEN PAV.COA_CMPY_CD IS NOT NULL THEN PAV.COA_CMPY_CD
                  ELSE CDA.CM_COA_CMPY_CD
             END AS COA_CMPY_CD_VA
            ,CASE WHEN PAV.COA_BR_CD IS NOT NULL THEN PAV.COA_BR_CD
                  ELSE CDA.CM_COA_BR_CD
             END AS COA_BR_CD_VA
            ,CASE WHEN PAV.COA_CC_CD IS NOT NULL THEN PAV.COA_CC_CD
                  ELSE CDA.CM_COA_CC_CD
             END AS COA_CC_CD_VA
            ,CASE WHEN PAV.COA_ACCT_CD IS NOT NULL THEN PAV.COA_ACCT_CD
                  ELSE CPA.COA_ACCT_CD
             END AS COA_ACCT_CD_VA
            ,CASE WHEN PAV.COA_PROD_CD IS NOT NULL THEN PAV.COA_PROD_CD
                  ELSE CDA.CM_COA_PROD_CD
             END AS COA_PROD_CD_VA
            ,CASE WHEN PAV.COA_CH_CD IS NOT NULL THEN PAV.COA_CH_CD
                  ELSE CDA.CM_COA_CH_CD
             END AS COA_CH_CD_VA
            ,CASE WHEN PAV.COA_AFFL_CD IS NOT NULL THEN PAV.COA_AFFL_CD
                  ELSE CDA.CM_COA_AFFL_CD
             END AS COA_AFFL_CD_VA
            ,CASE WHEN PAV.COA_PROJ_CD IS NOT NULL THEN PAV.COA_PROJ_CD
                  ELSE CDA.CM_COA_PROJ_CD
             END AS COA_PROJ_CD_VA
            ,CASE WHEN PAV.COA_EXTN_CD IS NOT NULL THEN PAV.COA_EXTN_CD
                  ELSE CDA.CM_COA_EXTN_CD
             END AS COA_EXTN_CD_VA
            ,CASE WHEN PAV.COA_CMPY_CD IS NOT NULL THEN
                        PAV.COA_CMPY_CD
                        || '.' || PAV.COA_BR_CD
                        || '.' || PAV.COA_CC_CD
                        || '.' || PAV.COA_ACCT_CD
                        || '.' || PAV.COA_PROD_CD
                        || '.' || PAV.COA_CH_CD
                        || '.' || PAV.COA_AFFL_CD
                        || '.' || PAV.COA_PROJ_CD
                        || '.' || PAV.COA_EXTN_CD
                   ELSE CDA.CM_COA_CMPY_CD
                        || '.' || CDA.CM_COA_BR_CD
                        || '.' || CDA.CM_COA_CC_CD
                        || '.' || CPA.COA_ACCT_CD
                        || '.' || CDA.CM_COA_PROD_CD
                        || '.' || CDA.CM_COA_CH_CD
                        || '.' || CDA.CM_COA_AFFL_CD
                        || '.' || CDA.CM_COA_PROJ_CD
                        || '.' || CDA.CM_COA_EXTN_CD
             END AS VA_ACCT_CD
             <!-- QC#13985 MOD END -->
            ,PD.PO_LINE_STS_CD
            ,PLS.PO_LINE_STS_DESC_TXT
            ,PLT.RWS_AUTO_CRAT_FLG
            ,PD.PO_MATCH_TP_CD
            ,PMT.PO_MATCH_TP_DESC_TXT
            ,PUC.PKG_UOM_CLS_DESC_TXT
            ,PD.ORIG_PO_ORD_DTL_LINE_NUM
            ,PD.THIS_MTH_FOB_COST_AMT
            ,PD.PO_BAL_QTY
            ,PH.PO_STS_CD   PO_STS_CD_H
            ,DPT.DS_PO_TP_CD
            ,PD.PO_LINE_TP_CD
            ,PLT.PO_LINE_TP_DESC_TXT
            ,PUC.PKG_UOM_CLS_CD
            ,PD.EZUPTIME        PD_EZUPTIME
            ,PD.EZUPTIMEZONE    PD_EZUPTIMEZONE
            ,PD.EZUPTIME       DPD_EZUPTIME
            ,PD.EZUPTIMEZONE   DPD_EZUPTIMEZONE
            ,SP.EZUPTIME        SP_EZUPTIME
            ,SP.EZUPTIMEZONE    SP_EZUPTIMEZONE
            ,MD.INSTL_BASE_CTRL_FLG
            ,MD.RCV_SER_TAKE_FLG
            ,PD.VND_PO_ACK_STS_CD
            ,PD.PO_DTL_INTFC_ERR_MSG_TXT
            <!-- QC#18420 ADD START -->
            ,PD.ASL_UNIT_PRC_AMT
            ,PD.PO_DTL_DISC_PCT
            <!-- QC#18420 ADD END -->
            <!-- 2019/01/25 QC#30082 Add Start -->
            ,MD.MDSE_ITEM_TP_CD
            <!-- 2019/01/25 QC#30082 Add End -->
            <!-- 2019/10/05 QC#53392 Add Start -->
            ,PD.PO_DTL_DISC_PRC_AMT
            <!-- 2019/10/05 QC#53392 Add End -->
<!-- START 02/18/2020 T.Ogura [QC#55916,ADD] -->
            ,PS.OPEN_PO_FLG
<!-- END   02/18/2020 T.Ogura [QC#55916,ADD] -->
        <!-- add start 2022/05/16 QC#57934 -->
            ,NVL(WO.RCV_WO_QTY, 0) AS RCV_WO_QTY
            ,NVL(WO.INV_WO_QTY, 0) AS INV_WO_QTY
        <!-- add end 2022/05/16 QC#57934 -->
        FROM
             PO             PH
            ,PO_DTL         PD
            <!-- 2019/01/25 QC#30082 Del Start -->
            <!-- ,VND            V -->
            <!-- 2019/01/25 QC#30082 Del End -->
            ,RTL_WH         RW
            ,COA_PROJ_ACCT  CPA
            ,CM_DEF_ACCT    CDA
            ,DS_PO_TP       DPT
            ,PO_LINE_STS    PLS
            ,PO_LINE_TP     PLT
            ,PO_MATCH_TP    PMT
            ,PKG_UOM_CLS    PUC
            ,MDSE           MD
            ,SHPG_PLN       SP
            <!-- QC#13985 ADD START -->
            ,(SELECT
                   PA.GLBL_CMPY_CD
                  ,PA.PO_ORD_NUM
                  ,PA.PO_ORD_DTL_LINE_NUM
                  ,PA.COA_CMPY_CD
                  ,PA.COA_BR_CD
                  ,PA.COA_CC_CD
                  ,PA.COA_ACCT_CD
                  ,PA.COA_PROD_CD
                  ,PA.COA_CH_CD
                  ,PA.COA_AFFL_CD
                  ,PA.COA_PROJ_CD
                  ,PA.COA_EXTN_CD
              FROM
                PO_ACCT PA
              WHERE
                <!-- 2019/01/25 QC#30082 Add Start -->
                PA.GLBL_CMPY_CD            = #cMsg.glblCmpyCd#
                AND PA.PO_ORD_NUM          = #cMsg.poNum#
                <!-- 2019/01/25 QC#30082 Add End -->
                AND PA.PO_ACCT_TP_CD       = #poAcctTpCdCharge#
                AND PA.EZCANCELFLAG        = '0'
            ) PAC
            ,(SELECT
                   PA.GLBL_CMPY_CD
                  ,PA.PO_ORD_NUM
                  ,PA.PO_ORD_DTL_LINE_NUM
                  ,PA.COA_CMPY_CD
                  ,PA.COA_BR_CD
                  ,PA.COA_CC_CD
                  ,PA.COA_ACCT_CD
                  ,PA.COA_PROD_CD
                  ,PA.COA_CH_CD
                  ,PA.COA_AFFL_CD
                  ,PA.COA_PROJ_CD
                  ,PA.COA_EXTN_CD
              FROM
                PO_ACCT PA
              WHERE
                <!-- 2019/01/25 QC#30082 Add Start -->
                PA.GLBL_CMPY_CD            = #cMsg.glblCmpyCd#
                AND PA.PO_ORD_NUM          = #cMsg.poNum#
                <!-- 2019/01/25 QC#30082 Add End -->
                AND PA.PO_ACCT_TP_CD       = #poAcctTpCdAccrual#
                AND PA.EZCANCELFLAG        = '0'
            ) PAA
            ,(SELECT
                   PA.GLBL_CMPY_CD
                  ,PA.PO_ORD_NUM
                  ,PA.PO_ORD_DTL_LINE_NUM
                  ,PA.COA_CMPY_CD
                  ,PA.COA_BR_CD
                  ,PA.COA_CC_CD
                  ,PA.COA_ACCT_CD
                  ,PA.COA_PROD_CD
                  ,PA.COA_CH_CD
                  ,PA.COA_AFFL_CD
                  ,PA.COA_PROJ_CD
                  ,PA.COA_EXTN_CD
              FROM
                PO_ACCT PA
              WHERE
                <!-- 2019/01/25 QC#30082 Add Start -->
                PA.GLBL_CMPY_CD            = #cMsg.glblCmpyCd#
                AND PA.PO_ORD_NUM          = #cMsg.poNum#
                <!-- 2019/01/25 QC#30082 Add End -->
                AND PA.PO_ACCT_TP_CD       = #poAcctTpCdVariance#
                AND PA.EZCANCELFLAG        = '0'
            ) PAV
            <!-- QC#13985 ADD END -->
<!-- START 02/18/2020 T.Ogura [QC#55916,ADD] -->
            ,PO_STS         PS
<!-- END   02/18/2020 T.Ogura [QC#55916,ADD] -->
        <!-- add start 2022/05/16 QC#57934 -->
            ,WRITE_OFF_INFO  WO
        <!-- add end 2022/05/16 QC#57934 -->
        WHERE 1=1
        AND PH.GLBL_CMPY_CD             = #cMsg.glblCmpyCd#
        AND PH.PO_ORD_NUM               = #cMsg.poNum#
        AND PH.GLBL_CMPY_CD             = PD.GLBL_CMPY_CD
        AND PH.PO_ORD_NUM               = PD.PO_ORD_NUM
        <!-- QC#13985 ADD START -->
        AND PH.GLBL_CMPY_CD             = PAC.GLBL_CMPY_CD(+)
        AND PH.PO_ORD_NUM               = PAC.PO_ORD_NUM(+)
        AND PD.PO_ORD_DTL_LINE_NUM      = PAC.PO_ORD_DTL_LINE_NUM(+)
        AND PH.GLBL_CMPY_CD             = PAA.GLBL_CMPY_CD(+)
        AND PH.PO_ORD_NUM               = PAA.PO_ORD_NUM(+)
        AND PD.PO_ORD_DTL_LINE_NUM      = PAA.PO_ORD_DTL_LINE_NUM(+)
        AND PH.GLBL_CMPY_CD             = PAV.GLBL_CMPY_CD(+)
        AND PH.PO_ORD_NUM               = PAV.PO_ORD_NUM(+)
        AND PD.PO_ORD_DTL_LINE_NUM      = PAV.PO_ORD_DTL_LINE_NUM(+)
        <!-- QC#13985 ADD END -->
        <!-- 2019/01/25 QC#30082 Del Start -->
        <!-- AND PH.GLBL_CMPY_CD             = V.GLBL_CMPY_CD -->
        <!-- AND PH.VND_CD                   = V.VND_CD -->
        <!-- 2019/01/25 QC#30082 Del End -->
        AND PH.GLBL_CMPY_CD             = RW.GLBL_CMPY_CD
        AND PH.DEST_RTL_WH_CD           = RW.RTL_WH_CD
        AND PH.GLBL_CMPY_CD             = MD.GLBL_CMPY_CD
        AND PD.MDSE_CD                  = MD.MDSE_CD
        AND PH.GLBL_CMPY_CD             = CPA.GLBL_CMPY_CD(+)
        AND MD.COA_MDSE_TP_CD           = CPA.COA_PROJ_CD(+)
        AND CPA.COA_PROJ_ACCT_TP_CD(+)  = #poVarCoaProjAcctTpCd#
        AND PH.GLBL_CMPY_CD             = CDA.GLBL_CMPY_CD
        AND CDA.CM_DEF_ACCT_CD          = PLT.ACRL_CM_DEF_ACCT_CD
        AND PH.GLBL_CMPY_CD             = DPT.GLBL_CMPY_CD (+)
        AND PH.DS_PO_TP_CD              = DPT.DS_PO_TP_CD (+)
        AND PH.GLBL_CMPY_CD             = PLS.GLBL_CMPY_CD (+)
        AND PD.PO_LINE_STS_CD           = PLS.PO_LINE_STS_CD (+)
        AND PH.GLBL_CMPY_CD             = PLT.GLBL_CMPY_CD (+)
        AND PD.PO_LINE_TP_CD            = PLT.PO_LINE_TP_CD (+)
        AND PH.GLBL_CMPY_CD             = PMT.GLBL_CMPY_CD (+)
        AND PD.PO_MATCH_TP_CD           = PMT.PO_MATCH_TP_CD (+)
        AND PH.GLBL_CMPY_CD             = PUC.GLBL_CMPY_CD (+)
        AND PD.PO_DISP_UOM_CD           = PUC.BASE_PKG_UOM_CD (+)
        AND PH.GLBL_CMPY_CD             = SP.GLBL_CMPY_CD (+)
        AND PD.SHPG_PLN_NUM             = SP.SHPG_PLN_NUM (+)
<!-- START 02/18/2020 T.Ogura [QC#55916,ADD] -->
        AND PH.GLBL_CMPY_CD             = PS.GLBL_CMPY_CD (+)
        AND PD.PO_STS_CD                = PS.PO_STS_CD (+)
<!-- END   02/18/2020 T.Ogura [QC#55916,ADD] -->
        AND PH.EZCANCELFLAG             = '0'
        AND PD.EZCANCELFLAG             = '0'
        <!-- 2019/01/25 QC#30082 Del Start -->
        <!-- AND V.EZCANCELFLAG              = '0' -->
        <!-- 2019/01/25 QC#30082 Del End -->
        AND RW.EZCANCELFLAG             = '0'
        AND MD.EZCANCELFLAG             = '0'
        AND CPA.EZCANCELFLAG(+)         = '0'
        AND CDA.EZCANCELFLAG            = '0'
        AND DPT.EZCANCELFLAG(+)         = '0'
        AND PLS.EZCANCELFLAG(+)         = '0'
        AND PLT.EZCANCELFLAG(+)         = '0'
        AND PMT.EZCANCELFLAG(+)         = '0'
        AND PUC.EZCANCELFLAG(+)         = '0'
        AND SP.EZCANCELFLAG(+)          = '0'
<!-- START 02/18/2020 T.Ogura [QC#55916,ADD] -->
        AND PS.EZCANCELFLAG(+)          = '0'
<!-- END   02/18/2020 T.Ogura [QC#55916,ADD] -->
        <!-- add start 2022/05/16 QC#57934 -->
        AND PH.PO_ORD_NUM               = WO.PO_NUM(+)
        AND PD.PO_ORD_DTL_LINE_NUM      = WO.PO_ORD_DTL_LINE_NUM(+)
        <!-- add end 2022/05/16 QC#57934 -->
        ORDER BY
            TO_NUMBER(PD.PO_ORD_DTL_LINE_NUM)
    </statement>

    <resultMap id="result.getDetailListInfo"     class="NPAL1500_ASMsg">
        <result property="poQty_HD"                 column="PO_QTY"                     javaType="EZDCBigDecimalItem"/>
        <result property="poRcvQty_A1"              column="PO_RCV_QTY"                 javaType="EZDCBigDecimalItem"/>
        <result property="poCancQty_A1"             column="PO_CANC_QTY"                javaType="EZDCBigDecimalItem"/>
        <result property="poOrdDtlCmntTxt_A1"       column="PO_ORD_DTL_CMNT_TXT"        javaType="EZDCStringItem"/>
        <result property="poOrdDtlLineNum_A1"       column="PO_ORD_DTL_LINE_NUM"        javaType="EZDCStringItem"/>
        <result property="poStsCd_HD"               column="PO_STS_CD"                  javaType="EZDCStringItem"/>
        <result property="mdseCd_A1"                column="MDSE_CD"                    javaType="EZDCStringItem"/>
        <result property="dispPoDtlLineNum_A1"      column="DISP_PO_DTL_LINE_NUM"       javaType="EZDCStringItem"/>
        <result property="origDispPoDtlLineNum"     column="DISP_PO_DTL_LINE_NUM"       javaType="EZDCStringItem"/>
        <result property="poMdseCmpsnTpCd_HD"       column="PO_MDSE_CMPSN_TP_CD"        javaType="EZDCStringItem"/>
        <result property="setPoOrdDtlLineNum"       column="SET_PO_ORD_DTL_LINE_NUM"    javaType="EZDCStringItem"/>
        <result property="aslMdseCd_A1"             column="ASL_MDSE_CD"                javaType="EZDCStringItem"/>
        <result property="mdseDescShortTxt_A1"      column="MDSE_DESC_SHORT_TXT"        javaType="EZDCStringItem"/>
        <result property="poLineTpCd_A1"            column="PO_LINE_TP_CD"              javaType="EZDCStringItem"/>
        <result property="entDealNetUnitPrcAmt_A1"  column="ENT_DEAL_NET_UNIT_PRC_AMT"  javaType="EZDCBigDecimalItem"/>
        <result property="poDispQty_A1"             column="PO_DISP_QTY"                javaType="EZDCBigDecimalItem"/>
        <result property="poDispUomCd_A1"           column="PO_DISP_UOM_CD"             javaType="EZDCStringItem"/>
        <result property="rqstRcvDt_A1"             column="RQST_RCV_DT"                javaType="EZDCStringItem"/>
        <!-- START 2023/02/14 S.Dong [QC#60966, ADD] -->
        <result property="rqstShipDt_A1"             column="RQST_SHIP_DT"                javaType="EZDCStringItem"/>
        <!-- END 2023/02/14 S.Dong [QC#60966, ADD] -->
        <result property="destRtlSwhCd_A1"          column="DEST_RTL_SWH_CD"            javaType="EZDCStringItem"/>
        <result property="entPoDtlDealNetAmt_A1"    column="ENT_PO_DTL_DEAL_NET_AMT"    javaType="EZDCBigDecimalItem"/>
        <result property="poInvQty_A1"              column="PO_INV_QTY"                 javaType="EZDCBigDecimalItem"/>
        <result property="vndInvtyLocCd_A1"         column="VND_INVTY_LOC_CD"           javaType="EZDCStringItem"/>
        <result property="srcRtlSwhCd_A1"           column="SRC_RTL_SWH_CD"             javaType="EZDCStringItem"/>
        <result property="stkStsCd_A1"              column="FROM_STK_STS_CD"            javaType="EZDCStringItem"/>
        <result property="prchReqNum_A1"            column="PRCH_REQ_NUM"               javaType="EZDCStringItem"/>
        <result property="prchReqLineNum_A1"        column="PRCH_REQ_LINE_NUM"          javaType="EZDCStringItem"/>
        <result property="prchReqLineSubNum"        column="PRCH_REQ_LINE_SUB_NUM"      javaType="EZDCStringItem"/>
        <result property="svcConfigMstrPk_A1"       column="SVC_CONFIG_MSTR_PK"         javaType="EZDCBigDecimalItem"/>
        <result property="poSendTs"                 column="PO_SEND_TS"                 javaType="EZDCStringItem"/>
        <result property="splyCoaCmpyCd"            column="SPLY_COA_CMPY_CD"           javaType="EZDCStringItem"/>
        <result property="splyCoaBrCd"              column="SPLY_COA_BR_CD"             javaType="EZDCStringItem"/>
        <result property="splyCoaCcCd"              column="SPLY_COA_CC_CD"             javaType="EZDCStringItem"/>
        <result property="splyCoaAcctCd"            column="SPLY_COA_ACCT_CD"           javaType="EZDCStringItem"/>
        <result property="splyCoaProdCd"            column="SPLY_COA_PROD_CD"           javaType="EZDCStringItem"/>
        <result property="splyCoaChCd"              column="SPLY_COA_CH_CD"             javaType="EZDCStringItem"/>
        <result property="splyCoaAfflCd"            column="SPLY_COA_AFFL_CD"           javaType="EZDCStringItem"/>
        <result property="splyCoaProjCd"            column="SPLY_COA_PROJ_CD"           javaType="EZDCStringItem"/>
        <result property="splyCoaExtnCd"            column="SPLY_COA_EXTN_CD"           javaType="EZDCStringItem"/>
        <result property="coaCmpyCd_AC"             column="COA_CMPY_CD_AC"             javaType="EZDCStringItem"/>
        <result property="coaBrCd_AC"               column="COA_BR_CD_AC"               javaType="EZDCStringItem"/>
        <result property="coaCcCd_AC"               column="COA_CC_CD_AC"               javaType="EZDCStringItem"/>
        <result property="coaAcctCd_AC"             column="COA_ACCT_CD_AC"             javaType="EZDCStringItem"/>
        <result property="coaProdCd_AC"             column="COA_PROD_CD_AC"             javaType="EZDCStringItem"/>
        <result property="coaChCd_AC"               column="COA_CH_CD_AC"               javaType="EZDCStringItem"/>
        <result property="coaAfflCd_AC"             column="COA_AFFL_CD_AC"             javaType="EZDCStringItem"/>
        <result property="coaProjCd_AC"             column="COA_PROJ_CD_AC"             javaType="EZDCStringItem"/>
        <result property="coaExtnCd_AC"             column="COA_EXTN_CD_AC"             javaType="EZDCStringItem"/>
        <result property="acrlCoaCmpyCd_HD"         column="COA_CMPY_CD_AC"             javaType="EZDCStringItem"/>
        <result property="acrlCoaBrCd_HD"           column="COA_BR_CD_AC"               javaType="EZDCStringItem"/>
        <result property="acrlCoaCcCd_HD"           column="COA_CC_CD_AC"               javaType="EZDCStringItem"/>
        <result property="acrlCoaAcctCd_HD"         column="COA_ACCT_CD_AC"             javaType="EZDCStringItem"/>
        <result property="acrlCoaProdCd_HD"         column="COA_PROD_CD_AC"             javaType="EZDCStringItem"/>
        <result property="acrlCoaChCd_HD"           column="COA_CH_CD_AC"               javaType="EZDCStringItem"/>
        <result property="acrlCoaAfflCd_HD"         column="COA_AFFL_CD_AC"             javaType="EZDCStringItem"/>
        <result property="acrlCoaProjCd_HD"         column="COA_PROJ_CD_AC"             javaType="EZDCStringItem"/>
        <result property="acrlCoaExtnCd_HD"         column="COA_EXTN_CD_AC"             javaType="EZDCStringItem"/>
        <result property="coaCmpyCd_VA"             column="COA_CMPY_CD_VA"             javaType="EZDCStringItem"/>
        <result property="coaBrCd_VA"               column="COA_BR_CD_VA"               javaType="EZDCStringItem"/>
        <result property="coaCcCd_VA"               column="COA_CC_CD_VA"               javaType="EZDCStringItem"/>
        <result property="coaAcctCd_VA"             column="COA_ACCT_CD_VA"             javaType="EZDCStringItem"/>
        <result property="coaProdCd_VA"             column="COA_PROD_CD_VA"             javaType="EZDCStringItem"/>
        <result property="coaChCd_VA"               column="COA_CH_CD_VA"               javaType="EZDCStringItem"/>
        <result property="coaAfflCd_VA"             column="COA_AFFL_CD_VA"             javaType="EZDCStringItem"/>
        <result property="coaProjCd_VA"             column="COA_PROJ_CD_VA"             javaType="EZDCStringItem"/>
        <result property="coaExtnCd_VA"             column="COA_EXTN_CD_VA"             javaType="EZDCStringItem"/>
        <result property="poLineStsCd_A1"           column="PO_LINE_STS_CD"             javaType="EZDCStringItem"/>
        <result property="poLineStsDescTxt_A1"      column="PO_LINE_STS_DESC_TXT"       javaType="EZDCStringItem"/>
        <result property="rwsAutoCratFlg"           column="RWS_AUTO_CRAT_FLG"          javaType="EZDCStringItem"/>
        <result property="poMatchTpCd_A1"           column="PO_MATCH_TP_CD"             javaType="EZDCStringItem"/>
        <result property="poMatchTpDescTxt_A1"      column="PO_MATCH_TP_DESC_TXT"       javaType="EZDCStringItem"/>
        <result property="pkgUomClsDescTxt_A1"      column="PKG_UOM_CLS_DESC_TXT"       javaType="EZDCStringItem"/>
        <result property="shpgPlnNum_D3"            column="SHPG_PLN_NUM"               javaType="EZDCStringItem"/>
        <result property="ezUpTime_D1"              column="PH_EZUPTIME"                javaType="EZDCStringItem"/>
        <result property="ezUpTimeZone_D1"          column="PH_EZUPTIMEZONE"            javaType="EZDCStringItem"/>
        <result property="ezUpTime_D2"              column="PD_EZUPTIME"                javaType="EZDCStringItem"/>
        <result property="ezUpTimeZone_D2"          column="PD_EZUPTIMEZONE"            javaType="EZDCStringItem"/>
        <result property="ezUpTime_D3"              column="SP_EZUPTIME"                javaType="EZDCStringItem"/>
        <result property="ezUpTimeZone_D3"          column="SP_EZUPTIMEZONE"            javaType="EZDCStringItem"/>
        <result property="xxScrItem130Txt_CH"       column="CH_ACCT_CD"                 javaType="EZDCStringItem"/>
        <result property="xxScrItem130Txt_AC"       column="AC_ACCT_CD"                 javaType="EZDCStringItem"/>
        <result property="xxScrItem130Txt_VA"       column="VA_ACCT_CD"                 javaType="EZDCStringItem"/>
        <result property="ezUpTime_D1"              column="PD_EZUPTIME"                javaType="EZDCStringItem"/>
        <result property="ezUpTimeZone_D1"          column="PD_EZUPTIMEZONE"            javaType="EZDCStringItem"/>
        <result property="ezUpTime_D2"              column="DPD_EZUPTIME"               javaType="EZDCStringItem"/>
        <result property="ezUpTimeZone_D2"          column="DPD_EZUPTIMEZONE"           javaType="EZDCStringItem"/>
        <result property="rcvSerTakeFlg_IB"         column="RCV_SER_TAKE_FLG"           javaType="EZDCStringItem"/>
        <result property="instlBaseCtrlFlg_IB"      column="INSTL_BASE_CTRL_FLG"        javaType="EZDCStringItem"/>
        <result property="poDispQty_HD"             column="PO_DISP_QTY"                javaType="EZDCBigDecimalItem"/>
        <result property="vndPoAckStsCd"            column="VND_PO_ACK_STS_CD"          javaType="EZDCStringItem"/>
        <result property="poDtlIntfcErrMsgTxt_A1"   column="PO_DTL_INTFC_ERR_MSG_TXT"   javaType="EZDCStringItem"/>
        <result property="aslUnitPrcAmt_A1"         column="ASL_UNIT_PRC_AMT"           javaType="EZDCBigDecimalItem"/>
        <result property="poDtlDiscPct_A1"          column="PO_DTL_DISC_PCT"            javaType="EZDCBigDecimalItem"/>
        <!-- 2019/01/25 QC#30082 Add Start -->
        <result property="mdseItemTpCd_A1"          column="MDSE_ITEM_TP_CD"            javaType="EZDSStringItem"/>
        <!-- 2019/01/25 QC#30082 Add End -->
        <!-- 2019/10/05 QC#53392 Add Start -->
        <result property="poDtlDiscPrcAmt_A1"       column="PO_DTL_DISC_PRC_AMT"        javaType="EZDCBigDecimalItem"/>
        <!-- 2019/10/05 QC#53392 Add End -->
<!-- START 02/18/2020 T.Ogura [QC#55916,ADD] -->
        <result property="openPoFlg_A1"             column="OPEN_PO_FLG"                javaType="EZDSStringItem"/>
<!-- END   02/18/2020 T.Ogura [QC#55916,ADD] -->
         <!-- add start 2022/05/16 QC#57934 -->
         <result property="poRcvQty_WO"             column="RCV_WO_QTY"                 javaType="EZDCBigDecimalItem"/>
         <result property="poInvQty_WO"             column="INV_WO_QTY"                 javaType="EZDCBigDecimalItem"/>
         <!-- add end 2022/05/16 QC#57934 -->
    </resultMap>

    <statement id="getShipToAddress" parameterClass="Map" resultClass="Map">
        SELECT
               STC.LOC_NM
              ,STC.ADDL_LOC_NM
              ,STC.FIRST_LINE_ADDR
              ,STC.SCD_LINE_ADDR
              ,STC.THIRD_LINE_ADDR
              ,STC.FRTH_LINE_ADDR
              <!-- START 2017/11/28 K.Kameoka [QC#22666,MOD] -->            
              --,STC.FIRST_LINE_ADDR
              -- || STC.SCD_LINE_ADDR
              -- || STC.THIRD_LINE_ADDR
              -- || STC.FRTH_LINE_ADDR AS ALL_SHIP_TO_LINE_ADDR
              ,STC.FIRST_LINE_ADDR || ' ' || STC.SCD_LINE_ADDR || ' ' || STC.THIRD_LINE_ADDR || ' ' || STC.FRTH_LINE_ADDR AS ALL_SHIP_TO_LINE_ADDR
              <!-- END 2017/11/28 K.Kameoka [QC#22666,MOD] -->            
              ,STC.CTRY_CD
              ,STC.POST_CD
              ,STC.CTY_ADDR
              ,STC.ST_CD
              ,STC.PROV_NM
              ,CTRY.CTRY_NM
              ,CNTY.CNTY_NM
        FROM
               SHIP_TO_CUST  STC
              ,CTRY          CTRY
              ,CNTY          CNTY
        WHERE
               STC.GLBL_CMPY_CD        = #glblCmpyCd#
           AND STC.SHIP_TO_CUST_CD     = #shipToCustCd#
           AND STC.GLBL_CMPY_CD        = CTRY.GLBL_CMPY_CD(+)
           AND STC.CTRY_CD             = CTRY.CTRY_CD(+)
           AND STC.GLBL_CMPY_CD        = CNTY.GLBL_CMPY_CD(+)
           AND STC.CNTY_PK             = CNTY.CNTY_PK(+)
           AND CTRY.EZCANCELFLAG(+)    = '0'
           AND STC.EZCANCELFLAG        = '0'
           AND CNTY.EZCANCELFLAG(+)    = '0'
    </statement>

    <statement id="countShipToCustAddr" parameterClass="Map" resultClass="BigDecimal">
        SELECT
               COUNT(*)
        FROM
               CSA_TRD_PTNR_LOC_X_REF_V  LOC_V
        WHERE
               LOC_V.GLBL_CMPY_CD      = #glblCmpyCd#
           AND LOC_V.TRD_PTNR_LOC_CD   = #shipToCustCd#
           AND LOC_V.EZCANCELFLAG      = '0'
    </statement>

    <statement id="getRtrnShipToRtlWHCd" parameterClass="Map" resultClass="String">
        SELECT A.RTRN_SHIP_TO_RTL_WH_CD FROM (
            SELECT
                   RWH.RTRN_SHIP_TO_RTL_WH_CD
            FROM
                   RTRN_SHIP_TO_RTL_WH_XREF  RWH
            WHERE
                   RWH.GLBL_CMPY_CD             = #glblCmpyCd#
               AND RWH.SHIP_TO_ST_CD            = #shipToStCd#
               AND RWH.FROM_SHIP_TO_POST_CD &lt;= #shipToPostCd#
               AND RWH.TO_SHIP_TO_POST_CD   &gt;= #shipToPostCd#
               AND RWH.EZCANCELFLAG             = '0'
            ORDER BY
                   RWH.FROM_SHIP_TO_POST_CD
                  ,RWH.TO_SHIP_TO_POST_CD
              ) A
        WHERE  ROWNUM=1
    </statement>

    <statement id="getDefRtrnShipToRtlWHCd" parameterClass="Map" resultClass="String">
        SELECT
               RWH.RTRN_SHIP_TO_RTL_WH_CD
        FROM
               RTRN_SHIP_TO_RTL_WH_XREF  RWH
        WHERE
               RWH.GLBL_CMPY_CD             = #glblCmpyCd#
           AND RWH.SHIP_TO_ST_CD            = #asta#
           AND RWH.FROM_SHIP_TO_POST_CD     = #asta#
           AND RWH.TO_SHIP_TO_POST_CD       = #asta#
           AND RWH.EZCANCELFLAG             = '0'
    </statement>

    <statement id="getAddressInfoByRtlWh" parameterClass="Map" resultClass="Map">
        SELECT
               RW.FIRST_LINE_ADDR
              ,RW.SCD_LINE_ADDR
              ,RW.THIRD_LINE_ADDR
              ,RW.FRTH_LINE_ADDR
              <!-- START 2017/11/28 K.Kameoka [QC#22666,MOD] -->            
              --,RW.FIRST_LINE_ADDR
              -- || RW.SCD_LINE_ADDR
              -- || RW.THIRD_LINE_ADDR
              -- || RW.FRTH_LINE_ADDR AS ALL_LINE_ADDR
              ,RW.FIRST_LINE_ADDR || ' ' || RW.SCD_LINE_ADDR || ' ' || RW.THIRD_LINE_ADDR || ' ' || RW.FRTH_LINE_ADDR AS ALL_LINE_ADDR
              <!-- END 2017/11/28 K.Kameoka [QC#22666,MOD] -->            
              ,RW.CTRY_CD
              ,RW.POST_CD
              ,RW.CTY_ADDR
              ,RW.ST_CD
              ,RW.PROV_NM
              ,CTRY.CTRY_NM
              ,CNTY.CNTY_NM
              ,RW.RTL_WH_CD
              ,RW.RTL_WH_NM
              ,RW.ADDL_LOC_NM
        FROM
               RTL_WH        RW
              ,CTRY          CTRY
              ,CNTY          CNTY
        WHERE
               RW.GLBL_CMPY_CD        = #glblCmpyCd#
           AND RW.RTL_WH_CD           = #rtlWHCd#
           AND RW.GLBL_CMPY_CD        = CTRY.GLBL_CMPY_CD(+)
           AND RW.CTRY_CD             = CTRY.CTRY_CD(+)
           AND RW.GLBL_CMPY_CD        = CNTY.GLBL_CMPY_CD(+)
           AND RW.CNTY_PK             = CNTY.CNTY_PK(+)
           AND RW.EZCANCELFLAG        = '0'
           AND CTRY.EZCANCELFLAG(+)   = '0'
           AND CNTY.EZCANCELFLAG(+)   = '0'
    </statement>

    <statement id="getDeriveItemInfo" parameterClass="Map" resultClass="Map">
        SELECT
               MDSE.MDSE_CD
              ,MDSE.MDSE_NM
              ,MDSE.DSCTN_FLG
              ,MDSE.INVTY_CTRL_FLG
              ,MDSE.RCV_SER_TAKE_FLG
              ,MDSE.MDSE_DESC_SHORT_TXT
              ,MDSE.PRNT_CMPY_SET_MDSE_FLG
              ,MDSE.INSTL_BASE_CTRL_FLG
        FROM
               MDSE          MDSE
        WHERE
               MDSE.GLBL_CMPY_CD      = #glblCmpyCd#
           AND MDSE.MDSE_CD           = #mdseCd#
    <!-- START 2017/12/06 QC#14858(Sol#060) ADD -->
    <!-- TEXT ITEM(16) -->
           AND MDSE.MDSE_ITEM_TP_CD   != '16'
        <iterate property="mdseCdList" var="mdseCd[]" open="AND MDSE.MDSE_CD IN (" close=") " conjunction=",">
            #mdseCd[]#
        </iterate>
    <!-- END   2017/12/06 QC#14858(Sol#060) ADD -->
        <iterate property="RGTN_STS" var="elem[]" open="AND MDSE.RGTN_STS_CD IN (" close=")" conjunction=",">
           #elem[]#
        </iterate>
           AND MDSE.EZCANCELFLAG      = '0'
    </statement>

    <statement id="getComponent" parameterClass="Map" resultClass="Map">
        SELECT
               CMP.CHILD_MDSE_CD
              ,CMP.CHILD_MDSE_QTY
              ,MDSE.MDSE_NM
              ,MDSE.RCV_SER_TAKE_FLG
              ,MDSE.INVTY_CTRL_FLG
              ,MDSE.MDSE_DESC_SHORT_TXT
              ,MDSE.INSTL_BASE_CTRL_FLG
              ,CMP.CMPSN_PK
        FROM
               CMPSN         CMP
              ,MDSE          MDSE
              ,COA_PROJ      CP
              ,COA_PROJ_ACCT CPA
              ,PO_ACCT_TP    PAT
        WHERE
               CMP.GLBL_CMPY_CD                         = #glblCmpyCd#
           AND CMP.PRNT_MDSE_CD                         = #mdseCd#
           AND CMP.MDSE_CMPSN_TP_CD                     = #mdseCmpsnTpCd_setMdse#
           AND CMP.EFF_FROM_DT                      &lt;= #slsDt#
           AND NVL(CMP.EFF_THRU_DT, #effThruMaxDt#) &gt;= #slsDt#
           AND CMP.GLBL_CMPY_CD                         = MDSE.GLBL_CMPY_CD
           AND CMP.CHILD_MDSE_CD                        = MDSE.MDSE_CD
        <iterate property="RGTN_STS" var="elem[]" open="AND MDSE.RGTN_STS_CD IN (" close=")" conjunction=",">
           #elem[]#
        </iterate>
           AND MDSE.GLBL_CMPY_CD                        = CP.GLBL_CMPY_CD
           AND MDSE.COA_MDSE_TP_CD                      = CP.COA_PROJ_CD
           AND CP.GLBL_CMPY_CD                          = CPA.GLBL_CMPY_CD
           AND CP.COA_PROJ_CD                           = CPA.COA_PROJ_CD
           AND CPA.GLBL_CMPY_CD                         = PAT.GLBL_CMPY_CD
           AND CPA.COA_PROJ_ACCT_TP_CD                  = PAT.COA_PROJ_ACCT_TP_CD
           AND PAT.PO_ACCT_TP_CD                        = #poAcctTpCd#
           AND CMP.EZCANCELFLAG                         = '0'
           AND MDSE.EZCANCELFLAG                        = '0'
           AND CP.EZCANCELFLAG                          = '0'
           AND CPA.EZCANCELFLAG                         = '0'
           AND PAT.EZCANCELFLAG                         = '0'
        UNION
        SELECT
               MDSE.MDSE_CD     AS CHILD_MDSE_CD
              ,CMP.CHILD_MDSE_QTY
              ,MDSE.MDSE_NM
              ,MDSE.RCV_SER_TAKE_FLG
              ,MDSE.INVTY_CTRL_FLG
              ,MDSE.MDSE_DESC_SHORT_TXT
              ,MDSE.INSTL_BASE_CTRL_FLG
              ,CMP.CMPSN_PK
        FROM
               CMPSN         CMP
              ,ORD_TAKE_MDSE OTM
              ,MDSE          MDSE
              ,COA_PROJ      CP
              ,COA_PROJ_ACCT CPA
              ,PO_ACCT_TP    PAT
        WHERE
               CMP.GLBL_CMPY_CD                         = #glblCmpyCd#
           AND CMP.PRNT_MDSE_CD                         = #mdseCd#
           AND CMP.MDSE_CMPSN_TP_CD                     = #mdseCmpsnTpCd_ordTakeMdse#
           AND CMP.EFF_FROM_DT                      &lt;= #slsDt#
           AND NVL(CMP.EFF_THRU_DT, #effThruMaxDt#) &gt;= #slsDt#
           AND CMP.GLBL_CMPY_CD                         = OTM.GLBL_CMPY_CD
           AND CMP.CHILD_ORD_TAKE_MDSE_CD               = OTM.ORD_TAKE_MDSE_CD
           AND OTM.GLBL_CMPY_CD                         = MDSE.GLBL_CMPY_CD
           AND OTM.MDSE_CD                              = MDSE.MDSE_CD
        <iterate property="RGTN_STS" var="elem[]" open="AND MDSE.RGTN_STS_CD IN (" close=")" conjunction=",">
           #elem[]#
        </iterate>
           AND MDSE.GLBL_CMPY_CD                        = CP.GLBL_CMPY_CD
           AND MDSE.COA_MDSE_TP_CD                      = CP.COA_PROJ_CD
           AND CP.GLBL_CMPY_CD                          = CPA.GLBL_CMPY_CD
           AND CP.COA_PROJ_CD                           = CPA.COA_PROJ_CD
           AND CPA.GLBL_CMPY_CD                         = PAT.GLBL_CMPY_CD
           AND CPA.COA_PROJ_ACCT_TP_CD                  = PAT.COA_PROJ_ACCT_TP_CD
           AND PAT.PO_ACCT_TP_CD                        = #poAcctTpCd#
           AND CMP.EZCANCELFLAG                         = '0'
           AND OTM.EZCANCELFLAG                         = '0'
           AND MDSE.EZCANCELFLAG                        = '0'
           AND CP.EZCANCELFLAG                          = '0'
           AND CPA.EZCANCELFLAG                         = '0'
           AND PAT.EZCANCELFLAG                         = '0'
           ORDER BY CMPSN_PK ASC
    </statement>

    <statement id="getChargeAcct" parameterClass="Map" resultClass="Map">
        SELECT
               V.SPLY_COA_CMPY_CD
              ,V.SPLY_COA_BR_CD
              ,V.SPLY_COA_CC_CD
              ,V.SPLY_COA_ACCT_CD
              ,V.SPLY_COA_PROD_CD
              ,V.SPLY_COA_CH_CD
              ,V.SPLY_COA_AFFL_CD
              ,V.SPLY_COA_PROJ_CD
              ,V.SPLY_COA_EXTN_CD
        FROM
               VND     V
        WHERE
               V.GLBL_CMPY_CD             = #glblCmpyCd#
           AND V.VND_CD                   = #vndCd#
           AND V.RGTN_STS_CD              = #rgtnStsCd#
           AND V.EZCANCELFLAG             = '0'
    </statement>

    <statement id="getDefAcct" parameterClass="Map" resultClass="Map">
        SELECT
               CDA.CM_COA_CMPY_CD
              ,CDA.CM_COA_AFFL_CD
              ,CDA.CM_COA_BR_CD
              ,CDA.CM_COA_CH_CD
              ,CDA.CM_COA_CC_CD
              ,CDA.CM_COA_ACCT_CD
              ,CDA.CM_COA_PROD_CD
              ,CDA.CM_COA_PROJ_CD
              ,CDA.CM_COA_PROJ_CD
              ,CDA.CM_COA_EXTN_CD
        FROM
               PO_LINE_TP   PLT
              ,CM_DEF_ACCT  CDA
        WHERE
               PLT.GLBL_CMPY_CD             = #glblCmpyCd#
           AND PLT.PO_LINE_TP_CD            = #poLineTpCd#
           AND PLT.GLBL_CMPY_CD             = CDA.GLBL_CMPY_CD
           AND PLT.ACRL_CM_DEF_ACCT_CD      = CDA.CM_DEF_ACCT_CD
           AND PLT.EZCANCELFLAG             = '0'
           AND CDA.EZCANCELFLAG             = '0'
    </statement>

    <statement id="getAcctInfoFromHeader" parameterClass="Map" resultClass="Map">
        SELECT
              RW.COA_BR_CD        COA_BR_CD
<!--             , LBT.COA_CC_CD       COA_CC_CD  -->
            , STC.COA_AFFL_CD     COA_AFFL_CD
        FROM
            RTL_WH        RW
<!--            ,LINE_BIZ_TP  LBT -->
            ,SHIP_TO_CUST STC
         WHERE
               RW.GLBL_CMPY_CD      = #glblCmpyCd#
           AND RW.RTL_WH_CD         = #rtlWhCd#
           AND RW.EZCANCELFLAG      = '0'
<!--            AND LBT.GLBL_CMPY_CD     = RW.GLBL_CMPY_CD  -->
<!--           AND LBT.LINE_BIZ_TP_CD   = #lineBizTpCd#  -->
<!--           AND LBT.EZCANCELFLAG     = '0' -->
           AND STC.GLBL_CMPY_CD(+)  = RW.GLBL_CMPY_CD
           AND STC.SHIP_TO_CUST_CD(+) = #shipToCustCd#
           AND STC.EZCANCELFLAG(+)  = '0'
    </statement>

    <statement id="getVendorTrsmtInfo" parameterClass="Map" resultClass="Map">
        SELECT
               V.TRSMT_METH_TP_CD
              ,V.FAX_NUM
              ,V.SEND_PO_EML_ADDR
        FROM
               VND       V
              ,PRNT_VND  PV
        WHERE
               V.GLBL_CMPY_CD             = #glblCmpyCd#
           AND V.VND_CD                   = #vndCd#
           AND V.RGTN_STS_CD              = #rgtnStsCd#
           AND V.GLBL_CMPY_CD             = PV.GLBL_CMPY_CD
           AND V.PRNT_VND_PK              = PV.PRNT_VND_PK
           AND V.EZCANCELFLAG             = '0'
           AND PV.EZCANCELFLAG            = '0'
    </statement>

    <statement id="getEipRptInfo" parameterClass="Map" resultClass="Map">
        SELECT
               ERD.RPT_DEST_DESC_TXT
              ,ERD.RPT_DEST_ID
        FROM
               VAR_CHAR_CONST  VCC
              ,EIP_RPT_CTRL    ERC
              ,EIP_RPT_DEST    ERD
        WHERE
               VCC.GLBL_CMPY_CD             = #glblCmpyCd#
           AND VCC.VAR_CHAR_CONST_NM        = #poRptId#
           AND VCC.GLBL_CMPY_CD             = ERC.GLBL_CMPY_CD
           AND VCC.VAR_CHAR_CONST_VAL       = ERC.RPT_ID
           AND ERC.RPT_BR_NUM               = #rptBrNum#
           AND ERC.GLBL_CMPY_CD             = ERD.GLBL_CMPY_CD
           AND ERC.RPT_DEST_ID              = ERD.RPT_DEST_ID
           AND ERD.DEST_TP_CD               = #destTpCd#
           AND VCC.EZCANCELFLAG             = '0'
           AND ERC.EZCANCELFLAG             = '0'
           AND ERD.EZCANCELFLAG             = '0'
    </statement>

    <statement id="checkCarrShpgSvcLvlAndShpgSvcLvl" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            COUNT(*)
        FROM
            SHPG_SVC_LVL_CARR_RELN SSLCR
        WHERE
            SSLCR.GLBL_CMPY_CD    = #glblCmpyCd#
        AND SSLCR.SHPG_SVC_LVL_CD = #shpgSvcLvlCd#
        AND SSLCR.CARR_SVC_LVL_CD = #carrSvcLvlCd#
        AND SSLCR.EZCANCELFLAG    = '0'
    </statement>

    <statement id="getVndOrdQty" parameterClass="Map" resultClass="Map">
        SELECT
            A.VND_UOM_CD
           ,A.VND_MIN_ORD_QTY
           ,A.VND_INCR_ORD_QTY
        FROM (
            SELECT
                ASD.VND_UOM_CD
                ,ASD.VND_MIN_ORD_QTY
                ,ASD.VND_INCR_ORD_QTY
            FROM
                 ASL_HDR    ASH
                ,ASL_DTL    ASD
            WHERE
                    ASH.GLBL_CMPY_CD                         = #glblCmpyCd#
                AND ASH.PRNT_VND_CD                          = #prntVndCd#
                AND NVL(ASH.ASL_START_DT, #aslStartDt#)  &lt;= #tagDate#
                AND NVL(ASH.ASL_END_DT, #aslEndDt#)      &gt;= #tagDate#
                AND ASD.GLBL_CMPY_CD                         = ASH.GLBL_CMPY_CD
                AND ASD.ASL_HDR_PK                           = ASH.ASL_HDR_PK
                AND ASD.MDSE_CD                              = #mdseCd#
                AND ASD.VND_CD                               = #vndCd#
                AND NVL(ASD.EFF_FROM_DT, #effFromDt#)    &lt;= #tagDate#
                AND NVL(ASD.EFF_THRU_DT, #effThruDt#)    &gt;= #tagDate#
                AND ASH.EZCANCELFLAG                         = '0'
                AND ASD.EZCANCELFLAG                         = '0'
            ORDER BY
                ASH.ASL_HDR_PK DESC
               ,ASD.ASL_DTL_PK DESC
                   ) A
      WHERE ROWNUM = 1
    </statement>

    <statement id="getMaxPoDtlLineNum" parameterClass="Map" resultClass="Map">
        SELECT
            MAX(POD.PO_ORD_DTL_LINE_NUM) AS MAX_LINE_NUM
        FROM
            PO_DTL POD
        WHERE
            POD.GLBL_CMPY_CD = #glblCmpyCd#
        AND POD.PO_ORD_NUM   = #poOrdNum#
        AND POD.EZCANCELFLAG = '0'
    </statement>

    <statement id="getPoSerNum" parameterClass="Map" resultClass="Map">
        SELECT 
            PSN.PO_SER_NUM_PK
           ,PSN.SER_NUM
        FROM 
            PO_SER_NUM PSN
        WHERE
            PSN.GLBL_CMPY_CD   = #glblCmpyCd#
        AND PSN.KEY_INFO_CD_04 = #poOrdNum#
        AND PSN.KEY_INFO_CD_05 = #poOrdDtlLineNum#
        AND PSN.EZCANCELFLAG   = '0'
        ORDER BY
            PSN.SER_NUM
    </statement>

    <statement id="getPkgUomClsDescTxt" parameterClass="Map" resultClass="String">
        SELECT
            PUC.PKG_UOM_CLS_DESC_TXT
        FROM 
            PKG_UOM PU
           ,PKG_UOM_CLS PUC
        WHERE
            PU.GLBL_CMPY_CD    = #glblCmpyCd#
        AND PU.PKG_UOM_CD      = #pkgUomCd#
        AND PU.GLBL_CMPY_CD    = PUC.GLBL_CMPY_CD
        AND PU.PKG_UOM_CLS_CD  = PUC.PKG_UOM_CLS_CD
        AND PU.EZCANCELFLAG    = '0'
        AND PUC.EZCANCELFLAG   = '0'
    </statement>

    <statement id="getRtlSwhCd" parameterClass="Map" resultClass="String">
        SELECT
               RS.RTL_SWH_CD
        FROM
               RTL_SWH  RS
        WHERE
               RS.GLBL_CMPY_CD   = #glblCmpyCd#
           AND RS.RTL_WH_CD      = #rtlWhCd#
           AND RS.PRTY_LOC_FLG   = #prtyLocFlg#
           AND RS.EZCANCELFLAG   = '0'
    </statement>

    <statement id="chkTechnicianWh" parameterClass="Map" resultClass="String">
        SELECT
           1
        FROM
            RTL_WH WH
        WHERE
            WH.GLBL_CMPY_CD = #glblCmpyCd#
        AND WH.RTL_WH_CD    = #rtlWhCd#
        AND WH.LOC_TP_CD    = #locTpCd#
        AND WH.EZCANCELFLAG = '0'
    </statement>

    <statement id="getEnableAssetFlg" parameterClass="Map" resultClass="String">
        SELECT
            DPT.ENBL_ASSET_FLG
        FROM
            DS_PO_TP DPT
        WHERE
            DPT.GLBL_CMPY_CD = #glblCmpyCd#
        AND DPT.DS_PO_TP_CD  = #dsPoTpCd#
        AND DPT.EZCANCELFLAG = '0'
    </statement>

    <statement id="getRegularStkInvtyLocCd" parameterClass="Map" resultClass="String">
        SELECT
            DIL.INVTY_LOC_CD
        FROM
             DS_INVTY_LOC_V DIL
            ,LOC_USG LU
        WHERE
            DIL.GLBL_CMPY_CD  = #glblCmpyCd#
        AND DIL.RTL_WH_CD     = #rtlWhCd#
        AND DIL.RTL_SWH_CD    = #rtlSwhCd#
        AND DIL.RGTN_STS_CD   = #rgtnStsCd#
        AND DIL.GLBL_CMPY_CD  = LU.GLBL_CMPY_CD
        AND DIL.PTY_LOC_PK    = LU.PTY_LOC_PK
        <!-- QC#16080 MOD. -->
        <!-- AND LU.LOC_ROLE_TP_CD = #locRoleTpCd# -->
        <iterate property="locRoleTpCd" var="excludeWhList[]" open="AND LU.LOC_ROLE_TP_CD NOT IN (" conjunction= ", " close=")">
            #excludeWhList[]#
        </iterate>
        AND DIL.EZCANCELFLAG  = '0'
        AND LU.EZCANCELFLAG   = '0'
    </statement>

    <statement id="getMdseSerNumRng" parameterClass="Map" resultClass="Map">
        SELECT
            MDSE_CD
           ,FROM_SER_NUM
           ,THRU_SER_NUM
           ,LG_SER_NUM
        FROM
            MDSE_SER_NUM_RNG
        WHERE
            GLBL_CMPY_CD = #glblCmpyCd#
        AND MDSE_CD      = #mdseCd#
        AND EZCANCELFLAG = '0'
        ORDER BY
            MDSE_SER_NUM_RNG_PK
    </statement>

    <statement id="getPrtVndNm" parameterClass="Map" resultClass="String">
        SELECT
            PV.PRNT_VND_NM
        FROM
            PRNT_VND PV
        WHERE
            PV.GLBL_CMPY_CD =  #glblCmpyCd#
        AND PV.PRNT_VND_CD  =  #prntVndCd#
        AND (PV.INAC_DT IS NULL 
              OR PV.INAC_DT > #salesDate#)
        AND PV.EZCANCELFLAG = '0'
    </statement>

    <statement id="getVndNm" parameterClass="Map" resultClass="String">
        SELECT
            V.LOC_NM
        FROM
            VND V
        WHERE
            V.GLBL_CMPY_CD = #glblCmpyCd#
        AND V.VND_CD       = #vndCd#
        AND V.RGTN_STS_CD  = #rgtnStsCd#
        AND NVL(V.EFF_THRU_DT, '99991231') &gt;= #salesDate#
        AND V.EZCANCELFLAG = '0'
    </statement>

    <statement id="getStNm" parameterClass="Map" resultClass="String">
        SELECT
            ST.ST_NM
        FROM 
            ST
        WHERE
            ST.GLBL_CMPY_CD = #glblCmpyCd#
        AND ST.ST_CD        = #stCd#
        AND ST.EZCANCELFLAG = '0'
    </statement>

    <statement id="getPoSerNumPk" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            PSN.PO_SER_NUM_PK
        FROM
             PO_SER_NUM PSN
            ,PO_DTL PD
        WHERE
            PSN.GLBL_CMPY_CD       = #glblCmpyCd#
        AND PSN.SER_NUM            = #serNum#
        AND PSN.MDSE_CD            = #mdseCd#
        <isNotNull property="poOrdNum">
        AND PSN.KEY_INFO_CD_04    != #poOrdNum#
        </isNotNull>

        AND PSN.GLBL_CMPY_CD       = PD.GLBL_CMPY_CD
        AND PSN.KEY_INFO_CD_04     = PD.PO_ORD_NUM
        AND PSN.KEY_INFO_CD_05     = PD.PO_ORD_DTL_LINE_NUM
        <iterate property="PO_LINE_STS_CD" var="elem[]" open="AND PD.PO_LINE_STS_CD NOT IN (" close=")" conjunction=",">
             #elem[]#
        </iterate>
        AND PSN.EZCANCELFLAG = '0'
        AND PD.EZCANCELFLAG  = '0'
    </statement>

    <statement id="getAddrByPost" parameterClass="Map" resultClass="Map">
    SELECT DISTINCT
           P.CTY_ADDR
          ,P.ST_CD
          ,P.POST_CD
          ,C.CNTY_NM
      FROM 
           POST P
          ,CNTY_POST_RELN R
          ,CNTY C
     WHERE 
           P.GLBL_CMPY_CD    = #glblCmpyCd#
       AND P.POST_CD         = #postCd#
       AND P.GLBL_CMPY_CD    = R.GLBL_CMPY_CD(+)
       AND P.POST_PK         = R.POST_PK(+)
       AND R.GLBL_CMPY_CD    = C.GLBL_CMPY_CD(+)
       AND R.CNTY_PK         = C.CNTY_PK(+)
       AND P.EZCANCELFLAG    = '0'
       AND R.EZCANCELFLAG(+) = '0'
       AND C.EZCANCELFLAG(+) = '0'
     ORDER BY
           P.CTY_ADDR
          ,P.ST_CD
          ,P.POST_CD
          ,C.CNTY_NM
    </statement>

    <statement id="getSourceWH" parameterClass="Map" resultClass ="String">
    SELECT
           WH.RTL_WH_CD
    FROM
           RTL_WH WH
    WHERE
           WH.GLBL_CMPY_CD  = #glblCmpyCd#
       AND WH.RTL_WH_CD     = #rtlWhCd#
       AND WH.INVTY_OWNR_CD IN (
       <iterate property="invtyOwnrCdList" var="invtyOwnrCd[]" open="" close="" conjunction=",">
           #invtyOwnrCd[]#
       </iterate>
       )
       AND WH.EZCANCELFLAG = '0'
    </statement>
    <statement id="getBillToLocation" parameterClass="Map" resultClass="Map">
        SELECT
            BTC.LOC_NM
            , BTC.ADDL_LOC_NM
            , BTC.FIRST_LINE_ADDR || ' ' ||  BTC.SCD_LINE_ADDR || ' ' ||  BTC.THIRD_LINE_ADDR || ' ' ||  BTC.FRTH_LINE_ADDR AS XX_ALL_LINE_ADDR
            , BTC.POST_CD
            , BTC.CTY_ADDR
            , CN.CNTY_NM
            , BTC.ST_CD
            , BTC.PROV_NM
            , CT.CTRY_NM
            , BTC.CTRY_CD
        FROM
            BILL_TO_CUST BTC
            , CNTY CN
            , CTRY CT
        WHERE
        -- JOIN TO BILL_TO_CUST
            BTC.GLBL_CMPY_CD = #glblCmpyCd#
        AND BTC.BILL_TO_CUST_CD = #billToCustCd#
        AND BTC.EZCANCELFLAG = '0'
        -- LEFT JOIN TO CNTY
        AND BTC.GLBL_CMPY_CD = CN.GLBL_CMPY_CD(+)
        AND BTC.CNTY_PK = CN.CNTY_PK(+)
        AND CN.EZCANCELFLAG(+) = '0'
        -- LEFT JOIN TO CTRY
        AND BTC.GLBL_CMPY_CD = CT.GLBL_CMPY_CD(+)
        AND BTC.CTRY_CD = CT.CTRY_CD(+)
        AND CT.EZCANCELFLAG(+) = '0'
    </statement>
    <statement id="getSellToCustCd" parameterClass="Map" resultClass="String">
        SELECT
            SELL_TO_CUST_CD
        FROM
            SHIP_TO_CUST SC
        WHERE
            SC.GLBL_CMPY_CD = #glblCmpyCd#
        AND SC.SHIP_TO_CUST_CD=#shipToCustCd#
        AND SC.EZCANCELFLAG = '0'
    </statement>

    <statement id="getSvcMachMstr" parameterClass="Map" resultClass="Map">
        SELECT
            SMM.SVC_MACH_MSTR_PK
           ,SMM.GLBL_CMPY_CD
           ,SMM.EZUPTIME
           ,SMM.EZUPTIMEZONE
           ,SMM.SER_NUM
           ,SMM.MDSE_CD
           ,SMM.SVC_CONFIG_MSTR_PK
           ,SMM.SVC_MACH_TP_CD
           ,SMM.SVC_MACH_MSTR_STS_CD
           ,SMM.TRX_HDR_NUM
           ,SMM.TRX_LINE_NUM
           ,SMM.TRX_LINE_SUB_NUM
           ,SMM.SVC_MACH_MSTR_LOC_STS_CD
        FROM
            SVC_MACH_MSTR SMM
        WHERE
            SMM.GLBL_CMPY_CD       =    #glblCmpyCd#
        AND SMM.SVC_CONFIG_MSTR_PK =    #svcConfigMstrPk#
        AND SMM.MDSE_CD            =    #mdseCd#
        AND SMM.EZCANCELFLAG       =    '0'
        <isNotNull property="serNum">
        AND SMM.SER_NUM            =    #serNum#
        </isNotNull>
    </statement>

    <statement id="countRtlWhInWhOwnr" parameterClass="Map" resultClass="Integer">
        SELECT
            COUNT(*)
        FROM
            RTL_WH RW
        WHERE
            RW.GLBL_CMPY_CD = #glblCmpyCd#
        AND RW.RTL_WH_CD    = #rtlWhCd#
        <iterate property="whOwnrCdList" var="whOwnrCd[]" open="AND RW.WH_OWNR_CD IN (" close=")" conjunction=",">
            #whOwnrCd[]#
        </iterate>
        AND RW.EZCANCELFLAG = '0'
    </statement>
    <statement id="getSetChildMasterQty" parameterClass="Map" resultClass="Map">
        SELECT 
             OTM.MDSE_CD
            ,C.CHILD_MDSE_QTY
        FROM
              CMPSN C
             ,ORD_TAKE_MDSE OTM
        WHERE
                C.GLBL_CMPY_CD                     = #glblCmpyCd#
            AND C.EZCANCELFLAG                     = '0'
            AND C.PRNT_MDSE_CD                     = #mdseCd#
            AND C.EFF_FROM_DT                  &lt;= #slsDt#
            AND NVL(C.EFF_THRU_DT, '99991231') &gt;= #slsDt#
            AND C.GLBL_CMPY_CD                     = OTM.GLBL_CMPY_CD
            AND C.CHILD_ORD_TAKE_MDSE_CD           = OTM.ORD_TAKE_MDSE_CD
            AND OTM.EZCANCELFLAG                   = '0'
        ORDER BY C.CMPSN_PK
    </statement>

    <statement id="getMdseFromSupplierItem" parameterClass="Map" resultClass="Map">
        SELECT
            DISTINCT
                AD.MDSE_CD
               ,AD.VND_CD
        FROM
            ASL_HDR AH
           ,ASL_DTL AD
           ,(
             SELECT DISTINCT
                 AD.SPLY_ITEM_NUM
                ,AD.MDSE_CD
             FROM
                 ASL_DTL AD
             WHERE
                 AD.GLBL_CMPY_CD = #glblCmpyCd#
             AND AD.MDSE_CD      = #mdseCd#
             AND AD.VND_CD       = #vndCd#
             AND AD.EZCANCELFLAG = '0'
            ) SPLM
        WHERE
            AH.GLBL_CMPY_CD                     = #glblCmpyCd#
        AND AH.GLBL_CMPY_CD                     = AD.GLBL_CMPY_CD
        AND AH.ASL_HDR_PK                       = AD.ASL_HDR_PK
        AND AD.VND_CD                           = #vndCd#
        AND AD.SPLY_ITEM_NUM                    = SPLM.SPLY_ITEM_NUM
        AND AD.EFF_FROM_DT                  &lt;= #slsDt#
        AND NVL(AD.EFF_THRU_DT,'99999999')  &gt;= #slsDt#
        AND AH.ASL_START_DT                 &lt;= #slsDt#
        AND NVL(AH.ASL_END_DT,'99999999')   &gt;= #slsDt#
        AND AD.MDSE_CD                         != #mdseCd#
        AND AH.EZCANCELFLAG                     = '0'
        AND AD.EZCANCELFLAG                     = '0'
    </statement>

    <!-- START 2017/11/08 QC#21845 ADD -->
    <statement id="checkFMCustomer" parameterClass="Map" resultClass="String">
        SELECT
            SELL.SELL_TO_CUST_CD
        FROM
             SHIP_TO_CUST SHIP
            ,SELL_TO_CUST SELL
        WHERE
            SHIP.GLBL_CMPY_CD       = #glblCmpyCd#
        AND SHIP.SHIP_TO_CUST_CD    = #shipToCustCd#
        AND SHIP.GLBL_CMPY_CD       = SELL.GLBL_CMPY_CD
        AND SHIP.SELL_TO_CUST_CD    = SELL.SELL_TO_CUST_CD
        AND SELL.DS_ACCT_CLS_CD     = #dsAcctClsCd#
        AND SHIP.EZCANCELFLAG       = '0'
        AND SELL.EZCANCELFLAG       = '0'
    </statement>

    <statement id="getShipToAddressFromShipToCustomer" parameterClass="Map" resultClass="Map">
        SELECT
               STC.LOC_NM
              ,STC.ADDL_LOC_NM
              ,STC.FIRST_LINE_ADDR
              ,STC.SCD_LINE_ADDR
              ,STC.THIRD_LINE_ADDR
              ,STC.FRTH_LINE_ADDR
              <!-- START 2017/11/28 K.Kameoka [QC#22666,MOD] -->            
              --,STC.FIRST_LINE_ADDR
              -- || STC.SCD_LINE_ADDR
              -- || STC.THIRD_LINE_ADDR
              -- || STC.FRTH_LINE_ADDR AS ALL_SHIP_TO_LINE_ADDR
              ,STC.FIRST_LINE_ADDR || ' ' || STC.SCD_LINE_ADDR || ' ' || STC.THIRD_LINE_ADDR || ' ' || STC.FRTH_LINE_ADDR AS ALL_SHIP_TO_LINE_ADDR
              <!-- END 2017/11/28 K.Kameoka [QC#22666,MOD] -->            
              ,STC.CTRY_CD
              ,STC.POST_CD
              ,STC.CTY_ADDR
              ,STC.ST_CD
              ,STC.PROV_NM
              ,DAC.DS_ACCT_NM
              ,CTRY.CTRY_NM
              ,CNTY.CNTY_NM
        FROM
               SHIP_TO_CUST  STC
              ,SELL_TO_CUST  DAC
              ,CTRY          CTRY
              ,CNTY          CNTY
        WHERE
               STC.GLBL_CMPY_CD        = #glblCmpyCd#
           AND STC.SHIP_TO_CUST_CD     = #shipToCustCd#
           AND STC.GLBL_CMPY_CD        = CTRY.GLBL_CMPY_CD(+)
           AND STC.CTRY_CD             = CTRY.CTRY_CD(+)
           AND STC.GLBL_CMPY_CD        = CNTY.GLBL_CMPY_CD(+)
           AND STC.CNTY_PK             = CNTY.CNTY_PK(+)
           AND STC.GLBL_CMPY_CD        = DAC.GLBL_CMPY_CD
           AND STC.SELL_TO_CUST_CD     = DAC.SELL_TO_CUST_CD
           AND CTRY.EZCANCELFLAG(+)    = '0'
           AND STC.EZCANCELFLAG        = '0'
           AND CNTY.EZCANCELFLAG(+)    = '0'
           AND DAC.EZCANCELFLAG        = '0'
    </statement>
    <!-- END   2017/11/08 QC#21845 ADD -->

    <statement id="getAvailableTextItem" parameterClass="Map" resultClass="String">
        SELECT
               M.MDSE_CD
        FROM
               MDSE         M
        WHERE
               M.GLBL_CMPY_CD             = #glblCmpyCd#
           AND M.MDSE_CD                  = #mdseCd#
           AND M.MDSE_ITEM_TP_CD          = #mdseItemTpCd#
           AND M.EZCANCELFLAG             = '0'
    </statement>
    
    <statement id="getTextItem" parameterClass="Map" resultClass="Map">
        SELECT
               M.MDSE_CD
        FROM
               MDSE         M
        WHERE
               M.GLBL_CMPY_CD             = #glblCmpyCd#
        <iterate property="textItemList" var="mdseCd[]" open="AND M.MDSE_CD NOT IN (" close=") " conjunction=",">
            #mdseCd[]#
        </iterate>
           AND M.MDSE_ITEM_TP_CD          = #mdseItemTpCd#
           AND M.EZCANCELFLAG             = '0'
        ORDER BY M.MDSE_CD
    </statement>
    <!-- END 2017/12/04 QC#14858(Sol#060) ADD -->

    <!-- START 18602(Sol#102) ADD -->
    <statement id="getReOpenFlgDPT" parameterClass="Map" resultClass="BigDecimal">
        SELECT
               COUNT(DPT.DS_PO_TP_CD) AS CNT_DPT
        FROM
               DS_PO_TP         DPT
        WHERE
               DPT.GLBL_CMPY_CD    = #glblCmpyCd#
           AND DPT.DS_PO_TP_CD     = #dsPoTpCd#
           AND DPT.RE_OPEN_FLG     = #RE_OPEN_FLG#
           AND DPT.EZCANCELFLAG    = '0'
    </statement>    
    <statement id="getReOpenFlgPOS" parameterClass="Map" resultClass="BigDecimal">
        SELECT
               COUNT(POS.PO_ORD_SRC_CD) AS CNT_POS
        FROM
               PO_ORD_SRC         POS
        WHERE
               POS.GLBL_CMPY_CD    = #glblCmpyCd#
           AND POS.PO_ORD_SRC_CD   = #poOrdSrcCd#
           AND POS.RE_OPEN_FLG     = #RE_OPEN_FLG#
           AND POS.EZCANCELFLAG    = '0'
    </statement>    
    <statement id="getAPInvoiceData" parameterClass="Map" resultClass="Map">
        SELECT
              CIAD.AP_VND_INV_NUM
             ,CIAD.DELY_ORD_NUM
             <!-- START 2021/04/21 J.Evangelista [QC#57102,ADD] -->
             ,CIAD.PO_ORD_DTL_LINE_NUM
             ,PD.DISP_PO_DTL_LINE_NUM
             <!--   END 2021/04/21 J.Evangelista [QC#57102,ADD] -->
             ,CASE
                  WHEN M.MDSE_ITEM_TP_CD = #textItemTpCd# THEN NULL
                  ELSE CIAD.MDSE_CD
              END AS MDSE_CD 
             ,CIAD.MDSE_DESC_SHORT_TXT
             ,CAIH.INV_DT
             ,CAIH.PMT_DUE_DT
             <!-- QC#28521 MOD Start-->
             <!-- ,CIAD.AC_INV_JRNL_COST_AMT -->
             ,NVL(CAID.AC_SC_FOB_COST_AMT, CIAD.AC_INV_JRNL_COST_AMT)  AS AC_INV_JRNL_COST_AMT
             <!-- QC#28521 MOD End-->
             ,CIAD.AP_BILL_QTY
             ,CAIH.INV_AUTH_DT
             ,CAIH.PMT_HLD_FLG
             ,CAIH.AP_VND_CD
             ,CAIH.AP_VND_INV_SQ_NUM
        FROM
             CM_AP_INV_HDR         CAIH
            ,CM_INV_ACCT_DIST      CIAD
            ,MDSE M
            <!-- QC#28521 ADD Start-->
            ,CM_AP_INV_DTL         CAID
            <!-- QC#28521 ADD End-->
            <!-- START 2021/04/21 J.Evangelista [QC#57102,ADD] -->
            ,PO_DTL                PD
            <!--   END 2021/04/21 J.Evangelista [QC#57102,ADD] -->
        WHERE 
             CAIH.GLBL_CMPY_CD    = #GLBL_CMPY_CD#
        <!-- QC#53413 MOD START -->
        <!-- AND  CAIH.PO_NUM          = #PO_NUM# --> 
        AND  CAID.PO_NUM          = #PO_NUM#
        <!-- QC#53413 MOD END   -->
        AND  CIAD.AP_LINE_TP_CD   = #AP_LINE_TP_CD#
        AND  CAIH.GLBL_CMPY_CD    = CIAD.GLBL_CMPY_CD
        <!-- QC#53413 MOD START -->
        <!-- AND  CAIH.PO_NUM          = CIAD.PO_NUM -->
        AND  CAIH.AP_VND_CD       = CAID.AP_VND_CD
        <!-- QC#53413 MOD END   -->
        AND  CAIH.AP_VND_INV_NUM  = CIAD.AP_VND_INV_NUM
        AND  CAIH.ACCT_INV_STS_CD &lt;&gt; #ACCT_INV_STS_CD#
        AND  CIAD.GLBL_CMPY_CD    = M.GLBL_CMPY_CD(+)
        AND  CIAD.MDSE_CD         = M.MDSE_CD(+)
        AND  CAIH.EZCANCELFLAG    = '0'
        AND  CIAD.EZCANCELFLAG    = '0'
        AND  M.EZCANCELFLAG(+)    = '0'
        <!-- QC#28521 ADD Start-->
        AND  CIAD.GLBL_CMPY_CD         = CAID.GLBL_CMPY_CD
        AND  CIAD.AP_VND_CD            = CAID.AP_VND_CD
        AND  CIAD.AP_VND_INV_NUM       = CAID.AP_VND_INV_NUM
        AND  CIAD.AP_VND_INV_SQ_NUM    = CAID.AP_VND_INV_SQ_NUM
        AND  CIAD.AP_VND_INV_LINE_NUM  = CAID.AP_VND_INV_LINE_NUM
        AND  CAID.EZCANCELFLAG         = '0'
        <!-- QC#28521 ADD End-->
        <!-- START 2021/04/21 J.Evangelista [QC#57102,ADD] -->
        AND  CAID.GLBL_CMPY_CD         = PD.GLBL_CMPY_CD
        AND  CAID.PO_NUM               = PD.PO_ORD_NUM 
        AND  CAID.PO_ORD_DTL_LINE_NUM  = PD.PO_ORD_DTL_LINE_NUM
        AND  PD.EZCANCELFLAG           = '0'
        <!--   END 2021/04/21 J.Evangelista [QC#57102,ADD] -->
        ORDER BY
              CIAD.AP_VND_INV_NUM
             ,CIAD.AP_VND_INV_LINE_NUM
    </statement>
    <resultMap id="result.getAPInvoiceData"     class="NPAL1500_ASMsg">
        <result property="apVndInvNum_B1"       column="AP_VND_INV_NUM"        javaType="EZDCStringItem"/>
        <result property="delyOrdNum_B1"        column="DELY_ORD_NUM"          javaType="EZDCStringItem"/>
        <!-- START 2021/04/21 J.Evangelista [QC#57102,ADD] -->
        <result property="poOrdDtlLineNum_B1"   column="PO_ORD_DTL_LINE_NUM"   javaType="EZDCStringItem"/>
        <result property="dispPoDtlLineNum_B1"  column="DISP_PO_DTL_LINE_NUM"  javaType="EZDCStringItem"/>
        <!--   END 2021/04/21 J.Evangelista [QC#57102,ADD] -->
        <result property="mdseCd_B1"            column="MDSE_CD"               javaType="EZDCStringItem"/>
        <result property="mdseDescShortTxt_B1"  column="MDSE_DESC_SHORT_TXT"   javaType="EZDCStringItem"/>
        <result property="invDt_B1"             column="INV_DT"                javaType="EZDCStringItem"/>
        <result property="pmtDueDt_B1"          column="PMT_DUE_DT"            javaType="EZDCStringItem"/>
        <result property="acInvJrnlCostAmt_B1"  column="AC_INV_JRNL_COST_AMT"  javaType="EZDCBigDecimalItem"/>
        <result property="invQty_B1"            column="INV_QTY"               javaType="EZDCBigDecimalItem"/>
        <result property="invAuthDt_B1"         column="INV_AUTH_DT"           javaType="EZDCStringItem"/>
        <result property="pmtHldFlg_B1"         column="PMT_HLD_FLG"           javaType="EZDCStringItem"/>
    </resultMap>
    <!-- END 18602(Sol#102) ADD -->

    <statement id="searchSupplier" parameterClass="Map" resultClass="Map">
        SELECT
            RAV.RCV_ASN_VND_CD
        FROM
            RCV_ASN_VND RAV
        WHERE 1=1
        AND RAV.GLBL_CMPY_CD       = #glblCmpyCd#
        AND RAV.RCV_ASN_VND_CD     = #vndCd#
        AND RAV.EZCANCELFLAG       = '0'
        AND ROWNUM                 = 1
    </statement>
    
    <!-- START QC#21358 ADD -->
    <statement id="getContactInfo" parameterClass="Map" resultClass="Map">
        SELECT
                VD.VND_CD                     AS  VND_CD
              , VD.TRSMT_METH_TP_CD           AS  TRSMT_METH_TP_CD
              , CP.CTAC_PSN_PK                AS  CTAC_PSN_PK
              , CP.CTAC_PSN_LAST_NM           AS  CTAC_PSN_LAST_NM
              , CP.CTAC_PSN_FIRST_NM          AS  CTAC_PSN_FIRST_NM
              , DCR.CTAC_TP_CD                AS  CTAC_TP_CD
              , DECODE(DCR.EFF_THRU_DT
                          , NULL, NULL
                          , #defThruDt#, DCR.EFF_THRU_DT
                          , TO_CHAR(TO_DATE(DCR.EFF_THRU_DT, 'yyyymmdd') + 1, 'yyyymmdd'))
                                              AS INAC_DT
              , CP.DS_CTAC_PSN_DEPT_CD        AS  DS_CTAC_PSN_DEPT_CD
              , CP.DS_CTAC_PSN_TTL_CD         AS  DS_CTAC_PSN_TTL_CD
              , P_T.DS_CTAC_PNT_PK            AS  DS_CTAC_PNT_PK_TEL
              , P_T.DS_CTAC_PNT_VAL_TXT       AS  CTAC_PSN_TEL
              , P_F.DS_CTAC_PNT_PK            AS  DS_CTAC_PNT_PK_FAX
              , P_F.DS_CTAC_PNT_VAL_TXT       AS  CTAC_PSN_FAX
              , P_E.DS_CTAC_PNT_PK            AS  DS_CTAC_PNT_PK_EML
              , P_E.DS_CTAC_PNT_VAL_TXT       AS  CTAC_PSN_EML
              , DCR.LOC_NUM                   AS  LOC_NUM
          FROM
                VND               VD
              , DS_CTAC_PSN_RELN  DCR
              , CTAC_PSN          CP
              , DS_CTAC_PNT       P_T
              , DS_CTAC_PNT       P_F
              , DS_CTAC_PNT       P_E
         WHERE
            <!-- join condition. -->
                VD.GLBL_CMPY_CD             =       DCR.GLBL_CMPY_CD
            AND VD.LOC_NUM                  =       DCR.LOC_NUM
            AND DCR.GLBL_CMPY_CD            =       CP.GLBL_CMPY_CD
            AND DCR.CTAC_PSN_PK             =       CP.CTAC_PSN_PK
            <!-- START 2018/12/13 M.Naito [QC#29027,ADD] -->
            AND DCR.CTAC_TP_CD             !=       #ctacTpCdDI#
            <!-- END 2018/12/13 M.Naito [QC#29027,ADD] -->
            AND CP.GLBL_CMPY_CD             =       P_T.GLBL_CMPY_CD(+)
            AND CP.CTAC_PSN_PK              =       P_T.CTAC_PSN_PK(+)
            AND CP.GLBL_CMPY_CD             =       P_F.GLBL_CMPY_CD(+)
            AND CP.CTAC_PSN_PK              =       P_F.CTAC_PSN_PK(+)
            AND CP.GLBL_CMPY_CD             =       P_E.GLBL_CMPY_CD(+)
            AND CP.CTAC_PSN_PK              =       P_E.CTAC_PSN_PK(+)
            <!-- query condition. -->
            AND VD.GLBL_CMPY_CD             =       #glblCmpyCd#
            AND VD.VND_CD                   =       #vndCd#
            AND CP.CTAC_PSN_ACTV_FLG        =       #ctacPsnActvFlg#
            AND P_T.DS_CTAC_PNT_TP_CD(+)    =       #dsCtacPntTpCd_T#
            AND P_F.DS_CTAC_PNT_TP_CD(+)    =       #dsCtacPntTpCd_F#
            AND P_E.DS_CTAC_PNT_TP_CD(+)    =       #dsCtacPntTpCd_E#
            AND VD.EZCANCELFLAG             =       '0'
            AND DCR.EZCANCELFLAG            =       '0'
            AND CP.EZCANCELFLAG             =       '0'
            AND P_T.EZCANCELFLAG(+)         =       '0'
            AND P_F.EZCANCELFLAG(+)         =       '0'
            AND P_E.EZCANCELFLAG(+)         =       '0'
       ORDER BY
                VD.VND_CD
              , CP.CTAC_PSN_LAST_NM
              , CP.CTAC_PSN_FIRST_NM
    </statement>
    <!-- END QC#21358 ADD -->

    <!-- QC#23726 Add SQL -->
    <statement id="getCPOInfo" parameterClass="Map" resultClass="Map">
        SELECT
              C.CPO_ORD_NUM
            , C.DS_ORD_CATG_CD
            , C.DS_ORD_TP_CD
            , C.DS_ORD_RSN_CD
        FROM
            CPO C
            , ( SELECT DISTINCT
                      PD.GLBL_CMPY_CD
                    , PD.CPO_ORD_NUM
                FROM
                    PO_DTL PD
                WHERE
                    PD.GLBL_CMPY_CD = #glblCmpyCd#
                AND PD.PO_ORD_NUM   = #poNum#
                AND PD.CPO_ORD_NUM  IS NOT NULL
                AND PD.EZCANCELFLAG = '0'
              ) P
        WHERE
            C.GLBL_CMPY_CD = P.GLBL_CMPY_CD
        AND C.CPO_ORD_NUM  = P.CPO_ORD_NUM
        AND C.EZCANCELFLAG = '0'
    </statement>

    <!-- QC#23726 Add SQL -->
    <statement id="getCarrSvcLvlCd" parameterClass="Map" resultClass="String">
        SELECT
            SCR.CARR_SVC_LVL_CD
        FROM
            SHPG_SVC_LVL_CARR_RELN SCR
        WHERE
            SCR.GLBL_CMPY_CD    = #glblCmpyCd#
        AND SCR.CARR_CD         = #carrCd#
        AND SCR.SHPG_SVC_LVL_CD = #shpgSvcLvlCd#
        AND SCR.EZCANCELFLAG    = '0'
        ORDER BY SCR.CARR_SVC_LVL_CD
    </statement>

    <!-- QC#23726 Add SQL -->
    <statement id="getDsAcctNum" parameterClass="Map" resultClass="String">
        SELECT
            STC.SELL_TO_CUST_CD AS DS_ACCT_NUM
        FROM
             ( SELECT DISTINCT
                     PD.GLBL_CMPY_CD
                    ,PD.SHIP_TO_CUST_CD
               FROM PO_DTL PD
               WHERE PD.GLBL_CMPY_CD = #glblCmpyCd#
               AND   PD.PO_ORD_NUM   = #poNum#
               AND   PD.EZCANCELFLAG = '0'
             ) P
            , SHIP_TO_CUST STC
        WHERE
            STC.GLBL_CMPY_CD    = P.GLBL_CMPY_CD
        AND STC.SHIP_TO_CUST_CD = P.SHIP_TO_CUST_CD
        AND STC.EZCANCELFLAG    = '0'
    </statement>
    
    <!-- QC#25024 Add SQL -->    
    <statement id="getInbdVis" parameterClass="Map" resultClass="Map">
        SELECT
            INBD.INBD_VIS_PK
           ,INBD.ETA_ETD_DT
        FROM
            INBD_VIS_EVENT     IVE
           ,PO_RCV_DTL         PRD
           ,INBD_VIS           INBD
        WHERE
            INBD.GLBL_CMPY_CD          = #glblCmpyCd#
        AND INBD.RWS_REF_NUM        LIKE #poNum#
        AND PRD.PO_RCV_TRX_LINE_NUM    = #poOrdDtlLineNum#
        AND INBD.INBD_LTST_REC_FLG     = #inbdLtstRecFlg#
        AND IVE.ATP_CALC_FLG           = #calcFlg#
        AND INBD.INBD_VIS_EVENT_CD     = IVE.INBD_VIS_EVENT_CD
        AND INBD.PO_RCV_NUM            = PRD.PO_RCV_NUM
        AND INBD.PO_RCV_LINE_NUM       = PRD.PO_RCV_LINE_NUM
        AND INBD.GLBL_CMPY_CD          = IVE.GLBL_CMPY_CD
        AND INBD.GLBL_CMPY_CD          = PRD.GLBL_CMPY_CD
        AND INBD.EZCANCELFLAG          = '0'
        AND IVE.EZCANCELFLAG           = '0'
        AND PRD.EZCANCELFLAG           = '0'
    </statement>

    <!-- START 2018/07/12 S.Katsuma [QC#26867,ADD] -->
    <statement id="checkConfig" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            COUNT(1)
        FROM
            SVC_MACH_MSTR SMM
        WHERE
            SMM.GLBL_CMPY_CD     = #glblCmpyCd#
        AND SMM.SVC_CONFIG_MSTR_PK IS NOT NULL
        <isNotNull property="mdseCd">
        AND SMM.MDSE_CD            = #mdseCd#
        </isNotNull>
        <isNotNull property="serNum">
        AND SMM.SER_NUM            = #serNum#
        </isNotNull>
        AND SMM.EZCANCELFLAG       = '0'
    </statement>
    <!-- END 2018/07/12 S.Katsuma [QC#26867,ADD] -->
    
    <!-- START QC#27024 ADD -->
    <statement id="checkReceivedSerNum" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            COUNT(1)
        FROM
            SVC_MACH_MSTR SMM
        WHERE
            SMM.GLBL_CMPY_CD     = #glblCmpyCd#
        <isNotNull property="mdseCd">
        AND SMM.MDSE_CD            = #mdseCd#
        </isNotNull>
        <isNotNull property="serNum">
        AND SMM.SER_NUM            = #serNum#
        </isNotNull>
        AND SMM.EZCANCELFLAG       = '0'
    </statement>
    
    <statement id="checkPoSerNum" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            PSN.PO_SER_NUM_PK
            ,SER_NUM
        FROM
             PO_SER_NUM PSN
            ,PO_DTL PD
        WHERE
            PSN.GLBL_CMPY_CD       = #glblCmpyCd#
        AND PSN.SER_NUM            = #serNum#
        AND PSN.MDSE_CD            = #mdseCd#
        <isNotNull property="poOrdNum">
        AND PSN.KEY_INFO_CD_04    != #poOrdNum#
        AND PSN.KEY_INFO_CD_05    != #poOrdDtlLineNum#
        </isNotNull>

        AND PSN.GLBL_CMPY_CD       = PD.GLBL_CMPY_CD
        AND PSN.KEY_INFO_CD_04     = PD.PO_ORD_NUM
        AND PSN.KEY_INFO_CD_05     = PD.PO_ORD_DTL_LINE_NUM
        <iterate property="PO_LINE_STS_CD" var="elem[]" open="AND PD.PO_LINE_STS_CD NOT IN (" close=")" conjunction=",">
             #elem[]#
        </iterate>
        AND PSN.EZCANCELFLAG = '0'
        AND PD.EZCANCELFLAG  = '0'
    </statement>
    
    <!-- END QC#27024 ADD -->

    <statement id="chkRwsPutAwaySer" parameterClass="Map" resultClass="Map">
        SELECT
             RPAS.SER_NUM
            ,RPAS.RWS_NUM AS RWS_NUM_RPAS
            ,NULL         AS RWS_NUM_RSER
        FROM
             RWS_HDR          RH
            ,RWS_DTL          RD
            ,RWS_PUT_AWAY_SER RPAS
            ,RWS_STS          RS
        WHERE
            RH.GLBL_CMPY_CD          = #glblCmpyCd#
        AND RH.SRC_ORD_NUM           = #poOrdNum#
        AND RH.GLBL_CMPY_CD          = RD.GLBL_CMPY_CD
        AND RH.RWS_NUM               = RD.RWS_NUM
        AND RD.PO_RCV_TRX_LINE_NUM   = #poOrdDtlLineNum#
        AND RD.GLBL_CMPY_CD          = RPAS.GLBL_CMPY_CD
        AND RD.RWS_NUM               = RPAS.RWS_NUM
        AND RD.RWS_DTL_LINE_NUM      = RPAS.RWS_LINE_NUM
        AND RPAS.SER_NUM             = #serNum#
        AND RD.GLBL_CMPY_CD          = RS.GLBL_CMPY_CD
        AND RD.RWS_STS_CD            = RS.RWS_STS_CD
        AND RS.RCV_FLG               = 'Y'
        AND RH.EZCANCELFLAG          = '0'
        AND RD.EZCANCELFLAG          = '0'
        AND RPAS.EZCANCELFLAG        = '0'
        UNION ALL
        SELECT
             RSER.SER_NUM
            ,NULL         AS RWS_NUM_RPAS
            ,RSER.RWS_NUM AS RWS_NUM_RSER
        FROM
             RWS_HDR          RH
            ,RWS_DTL          RD
            ,RWS_SER          RSER
            ,RWS_STS          RS
        WHERE
            RH.GLBL_CMPY_CD          = #glblCmpyCd#
        AND RH.SRC_ORD_NUM           = #poOrdNum#
        AND RH.GLBL_CMPY_CD          = RD.GLBL_CMPY_CD
        AND RH.RWS_NUM               = RD.RWS_NUM
        AND RD.PO_RCV_TRX_LINE_NUM   = #poOrdDtlLineNum#
        AND RD.GLBL_CMPY_CD          = RSER.GLBL_CMPY_CD
        AND RD.RWS_NUM               = RSER.RWS_NUM
        AND RD.RWS_DTL_LINE_NUM      = RSER.RWS_LINE_NUM
        AND RSER.SER_NUM             = #serNum#
        AND RD.GLBL_CMPY_CD          = RS.GLBL_CMPY_CD
        AND RD.RWS_STS_CD            = RS.RWS_STS_CD
        AND RS.RWS_OPEN_FLG          = 'Y'
        AND RH.EZCANCELFLAG          = '0'
        AND RD.EZCANCELFLAG          = '0'
        AND RSER.EZCANCELFLAG        = '0'
    </statement>
    
    <!-- START QC#28460 ADD -->
    <statement id="checkWhOwnrCdForSc" parameterClass="Map" resultClass="Map">
        SELECT
            RW.RTL_WH_CD
        FROM
            RTL_WH  RW
        WHERE
            RW.GLBL_CMPY_CD                        = #glblCmpyCd#
        AND RW.RTL_WH_CD                           = #rtlWhCd#
        AND RW.EFF_FROM_DT                     &lt;= #salesDate#
        AND NVL(RW.EFF_THRU_DT, '99991231')    &gt;= #salesDate#
        AND RW.WH_OWNR_CD                          = #whOwnrCd#
        AND RW.EZCANCELFLAG                        = '0'
    </statement>
    <!-- END QC#28460 ADD -->

    <!-- START 2018/12/13 M.Naito [QC#29027,ADD] -->
    <statement id="checkPrntCmpySetMdse" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            COUNT(1)
        FROM
            CMPSN         CMP
           ,ALL_MDSE_V    MDSE
        WHERE
            CMP.GLBL_CMPY_CD                     = #glblCmpyCd#
        AND CMP.PRNT_MDSE_CD                     = #mdseCd#
        <iterate property="mdseCmpsnTpCd_setMdse" var="mdseCmpsnTpCd_setMdse[]" open="AND CMP.MDSE_CMPSN_TP_CD IN (" close=") " conjunction=",">
            #mdseCmpsnTpCd_setMdse[]#
        </iterate>
        AND CMP.EFF_FROM_DT                      &lt;= #salesDate#
        AND NVL(CMP.EFF_THRU_DT, #effThruMaxDt#) &gt;= #salesDate#
        AND CMP.GLBL_CMPY_CD                     = MDSE.GLBL_CMPY_CD
        AND CMP.PRNT_MDSE_CD                     = MDSE.MDSE_CD
        AND MDSE.PRNT_CMPY_SET_MDSE_FLG          = 'N'
        AND CMP.EZCANCELFLAG                     = '0'
        AND MDSE.EZCANCELFLAG                    = '0'
    </statement>
    <!-- END 2018/12/13 M.Naito [QC#29027,ADD] -->

    <!-- START  [QC#30436,ADD] -->
    <statement id="searchPrchReq" parameterClass="Map" resultClass="Map">
        SELECT
            PRD.PRCH_REQ_NUM
        FROM
            PRCH_REQ_DTL PRD
        WHERE 1=1
        AND PRD.GLBL_CMPY_CD       = #glblCmpyCd#
        AND PRD.PO_ORD_NUM         = #poOrdNum#
        AND PRD.EZCANCELFLAG       = '0'
        AND ROWNUM                 =  1
    </statement>
    <!-- END [QC#30436,ADD] -->

    <!-- 2022/12/09 QC#60604 Add Start -->
    <statement id="getCsaWhCount" parameterClass="Map" resultClass="BigDecimal">
        SELECT
               COUNT(*)
        FROM
            RTL_WH RW
        WHERE 
            RW.GLBL_CMPY_CD     = #glblCmpyCd#
        AND RW.EZCANCELFLAG     = '0'
        AND RW.RTL_WH_CD        = #shipToCustCd#
        AND RW.WH_OWNR_CD       = #whOwnr#
    </statement>
    <!-- 2022/12/09 QC#60604 Add End -->

    <!-- 2024/3/4 QC#62443 Add Start -->
    <statement id="getCoaCcCd" parameterClass="Map" resultClass="String">
        SELECT
            LBT.COA_CC_CD
        FROM
            MDSE M
            ,LINE_BIZ_TP LBT
        WHERE
            M.GLBL_CMPY_CD      = #glblCmpyCd#
        AND M.MDSE_CD           = #mdseCd#
        AND M.GLBL_CMPY_CD      = LBT.GLBL_CMPY_CD
        AND M.LINE_BIZ_TP_CD    = LBT.LINE_BIZ_TP_CD
        AND M.EZCANCELFLAG      = '0'
        AND LBT.EZCANCELFLAG    = '0'
    </statement>
    <!-- 2024/3/4 QC#62443 Add End -->
</sqlMap>
