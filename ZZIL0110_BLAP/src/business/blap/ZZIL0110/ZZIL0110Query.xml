<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="ZZIL0110Query">

	<typeAlias alias="ZZIL0110_ASMsg"	type="business.blap.ZZIL0110.ZZIL0110_ASMsg"/>
	<typeAlias alias="ZZIL0110_BSMsg"	type="business.blap.ZZIL0110.ZZIL0110_BSMsg"/>
	<typeAlias alias="HashMap"			type="java.util.HashMap"/>
	
	<statement id="getConfigNamesForSelf" parameterClass="Map" resultMap="configNames">
		SELECT
				C.ITRL_INTFC_TRX_CONFIG_ID
			,	C.ITRL_INTFC_TRX_CONFIG_NM
		FROM
				ITRL_INTFC_TRX_CONFIG C
		WHERE
				C.GLBL_CMPY_CD  = #glblCmpyCd#
				AND C.EZCANCELFLAG  = '0'
				AND C.ITRL_INTFC_TRX_CONFIG_ID != 'ITRL_ID_MYID'
				AND C.ITRL_INTFC_MSTR_TBL_ID LIKE #selfTblName#
	</statement>
	
	<statement id="getConfigNames" parameterClass="Map" resultMap="configNames">
		SELECT
				C.ITRL_INTFC_TRX_CONFIG_ID
			,	C.ITRL_INTFC_TRX_CONFIG_NM
		FROM
				ITRL_INTFC_TRX_CONFIG C
		WHERE
				C.GLBL_CMPY_CD  = #glblCmpyCd#
				AND C.ITRL_INTFC_TRX_CONFIG_ID != 'ITRL_ID_MYID'
				AND C.EZCANCELFLAG  = '0'
	</statement>
	
	<statement id="getMyId" parameterClass="Map" resultMap="myId">
		SELECT
				C.ITRL_INTFC_TRX_CONFIG_ID
			,	C.ITRL_INTFC_TRX_CONFIG_NM
			,	C.ITRL_INTFC_MSTR_TBL_ID
			,	C.ITRL_INTFC_TRX_TBL_ID
		FROM
				ITRL_INTFC_TRX_CONFIG C
		WHERE
				C.GLBL_CMPY_CD  = #glblCmpyCd#
				AND C.ITRL_INTFC_TRX_CONFIG_ID  = 'ITRL_ID_MYID'
				AND C.EZCANCELFLAG  = '0'
	</statement>
	
	
	<statement id="getItrlIntfcIdsFromMstr" parameterClass="Map" resultMap="result.ZZIL0110_ASMsg">
		SELECT
				#mstrTable#					AS	MSTR_TBL
			,	M.ITRL_INTFC_ID				AS	ITRL_INTFC_ID
			,	COUNT(*)					AS	TBL_COUNT
			,	MIN(M.EZINTIME)				AS	EZINTIME
			,	MAX(M.EZUPTIME)				AS	EZUPTIME
			<!--
			,	M.EZUPTIMEZONE				AS	EZUPTIMEZONE
			-->
		FROM
				$mstrTable$ M
		WHERE
				M.GLBL_CMPY_CD  = #glblCmpyCd#
				AND M.ITRL_INTFC_TRX_CONFIG_ID = #configId#
				AND M.EZCANCELFLAG  = '0'
		<isNotNull property="itrlIntfcId">
			AND M.ITRL_INTFC_ID LIKE #itrlIntfcId#
		</isNotNull>
		GROUP BY
			M.ITRL_INTFC_ID
		ORDER BY
			M.ITRL_INTFC_ID
	</statement>
	
	<statement id="getItrlIntfcTblsFromMstr" parameterClass="Map" resultMap="result.ZZIL0110_BSMsg">
		SELECT
				M.ITRL_INTFC_ID				AS	ITRL_INTFC_ID
			,	M.ITRL_INTFC_TBL_ID			AS	ITRL_INTFC_TBL_ID
			,	M.EZINTIME					AS	EZINTIME
			,	M.EZINTIMEZONE				AS	EZINTIMEZONE
			,	M.EZUPTIME					AS	EZUPTIME
			,	M.EZUPTIMEZONE				AS	EZUPTIMEZONE
		FROM
				$mstrTable$ M
		WHERE
				M.GLBL_CMPY_CD  = #glblCmpyCd#
				AND M.ITRL_INTFC_TRX_CONFIG_ID = #configId#
				AND M.EZCANCELFLAG  = '0'
				AND M.ITRL_INTFC_ID = #itrlIntfcId#
		ORDER BY
			M.ITRL_INTFC_ID
	</statement>

	<resultMap id="result.ZZIL0110_ASMsg" 		class="ZZIL0110_ASMsg">
		<result property="itrlIntfcId_A"		column="ITRL_INTFC_ID"			javaType="EZDSStringItem"/>
		<result property="xxIntfcInterCntNum_A"	column="TBL_COUNT"				javaType="EZDSBigDecimalItem"/>
		<result property="xxDtTm_AC"			column="EZINTIME"				javaType="EZDSStringItem"/>
		<result property="xxDtTm_AU"			column="EZUPTIME"				javaType="EZDSStringItem"/>
	</resultMap>
	
	<resultMap id="result.ZZIL0110_BSMsg" 		class="ZZIL0110_BSMsg">
		<result property="itrlIntfcTblId_B"		column="ITRL_INTFC_TBL_ID"		javaType="EZDSStringItem"/>
		<result property="xxDtTm_BC"			column="EZINTIME"				javaType="EZDSStringItem"/>
		<result property="xxIntfcUpdTz_BC"		column="EZINTIMEZONE"			javaType="EZDSStringItem"/>
		<result property="xxDtTm_BU"			column="EZUPTIME"				javaType="EZDSStringItem"/>
		<result property="xxIntfcUpdTz_BU"		column="EZUPTIMEZONE"			javaType="EZDSStringItem"/>
	</resultMap>
	
	<resultMap id="configNames" class="HashMap">
		<result property="configId"				column="ITRL_INTFC_TRX_CONFIG_ID"	javaType="String" />
		<result property="configName"			column="ITRL_INTFC_TRX_CONFIG_NM"	javaType="String" />
	</resultMap>
	
	<resultMap id="myId" class="HashMap">
		<result property="configId"				column="ITRL_INTFC_TRX_CONFIG_ID"	javaType="String" />
		<result property="configName"			column="ITRL_INTFC_TRX_CONFIG_NM"	javaType="String" />
		<result property="mstrId"				column="ITRL_INTFC_MSTR_TBL_ID"	javaType="String" />
		<result property="trxId"				column="ITRL_INTFC_TRX_TBL_ID"	javaType="String" />
	</resultMap>

</sqlMap>