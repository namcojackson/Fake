<?xml version="1.0" encoding="UTF-8"?>

<sqlMap namespace="ZZIL0040Query">

	<typeAlias alias="ZZIL0040_ASMsg"	type="business.blap.ZZIL0040.ZZIL0040_ASMsg"/>
	
	<statement id="getRequestList" parameterClass="Map" resultMap="result.ZZIL0040_ASMsg">
		SELECT
			A.MDB_INBD_INTFC_RQST_PK	AS MDB_INBD_INTFC_RQST_PK,
			A.INTFC_ID					AS INTFC_ID,
			A.BIZ_API_ID				AS BIZ_API_ID,
			A.RQST_JMS_MSG_ID			AS RQST_JMS_MSG_ID,
			A.INTFC_RQST_STS_TXT		AS INTFC_RQST_STS_TXT,
			A.BIZ_API_START_TS			AS BIZ_API_START_TS,
			A.BIZ_API_END_TS			AS BIZ_API_END_TS,
			A.EZUPTIME					AS EZUPTIME
		FROM(
			SELECT
				MIIR.MDB_INBD_INTFC_RQST_PK	AS MDB_INBD_INTFC_RQST_PK,
				MIIR.INTFC_ID				AS INTFC_ID,
				MIIR.BIZ_API_ID				AS BIZ_API_ID,
				MIIR.RQST_JMS_MSG_ID		AS RQST_JMS_MSG_ID,
				MIIR.INTFC_RQST_STS_TXT		AS INTFC_RQST_STS_TXT,
				MIIR.BIZ_API_START_TS		AS BIZ_API_START_TS,
				MIIR.BIZ_API_END_TS			AS BIZ_API_END_TS,
				MIIR.EZUPTIME				AS EZUPTIME
			FROM
				MDB_INBD_INTFC_RQST MIIR
			WHERE
				MIIR.GLBL_CMPY_CD = #glblCmpyCd#
				AND MIIR.EZCANCELFLAG = '0'
				AND MIIR.INTFC_ID = #cMsg.intfcId_H#
			<!-- status -->
			<isNotNull property="intfcRqstStsTxt">
				AND MIIR.INTFC_RQST_STS_TXT = #intfcRqstStsTxt#
			</isNotNull>
			
			<!-- startDateFrom -->
			<isNotNull property="startDateFrom">
				AND MIIR.BIZ_API_START_TS &gt;= #startDateFrom#
			</isNotNull>
				
			<!-- startDateTo -->
			<isNotNull property="startDateTo">
				AND MIIR.BIZ_API_START_TS &lt;= #startDateTo#
			</isNotNull>

			<!-- endDateFrom -->
			<isNotNull property="endDateFrom">
				AND MIIR.BIZ_API_END_TS &gt;= #endDateFrom#
			</isNotNull>
				
			<!-- endDateTo -->
			<isNotNull property="endDateTo">
				AND MIIR.BIZ_API_END_TS &lt;= #endDateTo#
			</isNotNull>
				
			ORDER BY
					MIIR.BIZ_API_START_TS ASC
		) A
		WHERE
			ROWNUM &lt;= #rowNum#
	</statement>

	<resultMap id="result.ZZIL0040_ASMsg" 		class="ZZIL0040_ASMsg">
		<result property="intfcRqstStsTxt_A"		column="INTFC_RQST_STS_TXT"			javaType="EZDSStringItem"/>
		<result property="intfcId_A"				column="INTFC_ID"					javaType="EZDSStringItem"/>
		<result property="mdbInbdIntfcRqstPk_A"		column="MDB_INBD_INTFC_RQST_PK"		javaType="EZDSBigDecimalItem"/>
		<result property="bizApiId_A"		    	column="BIZ_API_ID"					javaType="EZDSStringItem"/>
		<result property="rqstJmsMsgId_A"			column="RQST_JMS_MSG_ID"			javaType="EZDSStringItem"/>
		<result property="xxDtTm_AS"		    	column="BIZ_API_START_TS"			javaType="EZDSStringItem"/>
		<result property="xxDtTm_AE"				column="BIZ_API_END_TS"				javaType="EZDSStringItem"/>
		<result property="ezUpTime_A"				column="EZUPTIME"					javaType="EZDSStringItem"/>
	</resultMap>

</sqlMap>
