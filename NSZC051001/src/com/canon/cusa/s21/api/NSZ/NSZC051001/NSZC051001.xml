<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<sqlMap namespace="NSZC051001">

    <statement id="getSvcMachMstrPk" parameterClass="Map" resultClass="Map">
        <!-- START 2016/12/22 K.Kojima [QC#16600,DEL] -->
        <!-- SELECT
             SVC_MACH_MSTR_PK
            ,MDSE_CD
            ,SER_NUM
        FROM
            ( -->
        <!-- END 2016/12/22 K.Kojima [QC#16600,DEL] -->
                SELECT
                     SMM.SVC_MACH_MSTR_PK
                    ,SMM.MDSE_CD
                    ,SMM.SER_NUM
                FROM
                    SVC_MACH_MSTR SMM
                WHERE
                        SMM.GLBL_CMPY_CD     = #glblCmpyCd#
                    <isNotNull property="svcMachMstrPk" >
                    AND SMM.SVC_MACH_MSTR_PK = #svcMachMstrPk#
                    </isNotNull>
                    <isNotNull property="serNum" >
                    AND SMM.SER_NUM          = #serNum#
                    </isNotNull>
                    <!-- START 2016/12/22 K.Kojima [QC#16600,ADD] -->
                    <isNotNull property="mdseCd" >
                    AND SMM.MDSE_CD          = #mdseCd#
                    </isNotNull>
                    <!-- END 2016/12/22 K.Kojima [QC#16600,ADD] -->
                    AND SMM.EZCANCELFLAG     = '0'
                ORDER BY
                    SMM.SVC_MACH_MSTR_PK
        <!-- START 2016/12/22 K.Kojima [QC#16600,DEL] -->
        <!--     )
        WHERE
            ROWNUM = 1 -->
        <!-- END 2016/12/22 K.Kojima [QC#16600,DEL] -->
    </statement>

    <statement id="getSvcPhysMtrPk" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            SVC_PHYS_MTR_PK
        FROM
            (
                SELECT
                    SPM.SVC_PHYS_MTR_PK
                FROM
                    SVC_PHYS_MTR SPM
                WHERE
                        SPM.GLBL_CMPY_CD     = #glblCmpyCd#
                    AND SPM.SVC_MACH_MSTR_PK = #svcMachMstrPk#
                    AND SPM.MDL_MTR_LB_CD    = #mdlMtrLbCd#
                    AND SPM.EZCANCELFLAG     = '0'
                ORDER BY
                    SPM.SVC_PHYS_MTR_PK
            )
        WHERE
            ROWNUM = 1
    </statement>

</sqlMap>