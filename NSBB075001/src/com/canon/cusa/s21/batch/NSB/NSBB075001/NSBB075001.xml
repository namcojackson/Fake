<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NSBB075001">
    <statement id="getInputData" parameterClass="Map" resultClass="Map">
        SELECT
             A.FSR_NUM              AS FSR_NUM
            ,A.MDSE_CD              AS MDSE_CD
            ,A.SER_NUM              AS SER_NUM
            ,A.MDL_NM               AS MDL_NM
            ,E.SVC_MOD_PLN_ID       AS SVC_MOD_PLN_ID
            ,'00'                   AS FILL_2_TXT_01
            ,B.FSR_VISIT_ARV_DT     AS FSR_VISIT_ARV_DT
            ,B.TECH_CD              AS TECH_CD
            ,D.SVC_MNF_MOD_NUM      AS SVC_MNF_MOD_NUM
        FROM
             SVC_TASK               A
            ,FSR_VISIT              B
            ,SVC_MOD_STS            C
            ,SVC_MOD_DTL            D
            ,SVC_MOD                E
        WHERE
                A.GLBL_CMPY_CD      = #glblCmpyCd#
            AND A.EZUPTIME      &gt; TO_CHAR(TO_TIMESTAMP(ADD_MONTHS(LAST_DAY(TO_DATE(#slsDt#, 'YYYYMMDD')), #addMonth#)), 'YYYYMMDDHH24MISSFF3')
            AND A.EZUPTIME      &lt; TO_CHAR(TO_TIMESTAMP(TO_DATE(#slsDt#, 'YYYYMMDD') + 1), 'YYYYMMDDHH24MISSFF3')
            AND A.SVC_MOD_NUM       IS NOT NULL
            AND A.GLBL_CMPY_CD      = B.GLBL_CMPY_CD
            AND A.SVC_TASK_NUM      = B.SVC_TASK_NUM
            AND A.GLBL_CMPY_CD      = C.GLBL_CMPY_CD
            AND A.SVC_MACH_MSTR_PK  = C.SVC_MACH_MSTR_PK
            AND A.SVC_TASK_NUM      = C.SVC_TASK_NUM
            AND C.GLBL_CMPY_CD      = D.GLBL_CMPY_CD
            AND C.SVC_MOD_DTL_PK    = D.SVC_MOD_DTL_PK
            AND D.GLBL_CMPY_CD      = E.GLBL_CMPY_CD
            AND D.SVC_MOD_PK        = E.SVC_MOD_PK
            AND A.EZCANCELFLAG      = '0'
            AND B.EZCANCELFLAG      = '0'
            AND C.EZCANCELFLAG      = '0'
            AND D.EZCANCELFLAG      = '0'
            AND E.EZCANCELFLAG      = '0'
        ORDER BY 
             A.FSR_NUM
            ,A.SER_NUM
            ,A.MDSE_CD
    </statement>
</sqlMap>
