<?xml version="1.0" encoding="UTF-8"?>

<sqlMap namespace="NFZC601001">

    <statement id="getApplyGrpKeyByIntfcId" parameterClass="Map" resultClass="Map">
        SELECT
            A.APPLY_GRP_KEY
           ,B.RCV_HDR_NUM
           ,MAX(B.RCV_SQ_PK) AS RCV_SQ_PK
        FROM
            AR_APPLY_INTFC_WRK A
        INNER JOIN
            AR_RCPT_IN_PROC_WRK  B
            ON  ( A.GLBL_CMPY_CD        =  B.GLBL_CMPY_CD
            AND   A.RCPT_IN_PROC_SQ_PK  =  B.RCPT_IN_PROC_SQ_PK
            AND   A.RCV_HDR_NUM         =  B.RCV_HDR_NUM
            AND   A.RCV_DTL_NUM         =  B.RCV_DTL_NUM  )
        WHERE
                 A.GLBL_CMPY_CD  =  #glblCmpyCd#
            AND  A.INTFC_ID      =  #intfcId#
            AND  A.PROC_STS_CD   =  #procStsCd#
            AND  A.EZCANCELFLAG  =  '0'
        GROUP BY
                 A.APPLY_GRP_KEY
                ,B.RCV_HDR_NUM
        ORDER BY
                 A.APPLY_GRP_KEY
                ,B.RCV_HDR_NUM
    </statement>
</sqlMap>
