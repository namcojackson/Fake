<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<sqlMap namespace="NMZC003001">

    <typeAlias alias="AddrValidationBean"   type="com.canon.cusa.s21.api.NMZ.NMZC003001.AddrValidationBean"/>

    <statement id="getCnty" parameterClass="Map" resultMap="result.getCnty">
        SELECT CNTY.CNTY_PK AS CNTY_PK
            , CNTY.CNTY_NM AS CNTY_NM
        FROM CNTY CNTY
        WHERE CNTY.GLBL_CMPY_CD = #glblCmpyCd#
        AND CNTY.EZCANCELFLAG = '0'
        AND CNTY.CNTY_NM = #cntyNm#
    </statement>
    <statement id="cntCtryUs" parameterClass="Map" resultMap="Integer">
        SELECT COUNT(*) AS CNT
        FROM GLBL_CMPY GLBL
        WHERE GLBL.GLBL_CMPY_CD = #glblCmpyCd#
        AND GLBL.CTRY_CD = #ctryCd#
        AND GLBL.EZCANCELFLAG = '0'

    </statement>
    <resultMap id="result.getCnty"    class="AddrValidationBean">
        <result property="cntyPk"              column="CNTY_PK"          javaType="BigDecimal"/>
        <result property="cntyNm"              column="CNTY_NM"          javaType="String"/>
    </resultMap>

    <!-- QC#4505 -->    
    <statement id="getPost" parameterClass="Map" resultClass="Map">
       SELECT P.POST_PK
         FROM POST P
        WHERE P.GLBL_CMPY_CD = #glblCmpyCd#
          AND P.EZCANCELFLAG = '0'
          AND P.POST_CD = #postCd#
          AND P.CTY_ADDR = #ctyAddr#
          AND P.ST_CD = #stCd#
    </statement>

    <statement id="getCntyPostReln" parameterClass="Map" resultClass="Map">
       SELECT C.CNTY_PK
            , C.CNTY_NM
         FROM CNTY_POST_RELN R
            , CNTY C
        WHERE R.GLBL_CMPY_CD = #glblCmpyCd#
          AND R.EZCANCELFLAG = '0'
          AND R.POST_PK = #postPk#
          AND C.CNTY_PK = R.CNTY_PK
          AND C.GLBL_CMPY_CD = R.GLBL_CMPY_CD
          AND C.EZCANCELFLAG = '0'
          <isNotNull property="cntyNm">
          AND C.CNTY_NM = #cntyNm#
          </isNotNull>
    </statement>
    
    <!-- QC#5360-2
    <statement id="getStByCtry" parameterClass="Map" resultClass="Map">
       SELECT S.ST_CD
         FROM ST S
        WHERE S.GLBL_CMPY_CD = #glblCmpyCd#
          AND S.EZCANCELFLAG = '0'
          AND S.CTRY_CD = #ctryCd#
    </statement>
     -->

</sqlMap>
