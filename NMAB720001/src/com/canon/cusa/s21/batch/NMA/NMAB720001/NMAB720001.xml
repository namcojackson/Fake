<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NMAB720001">
    <statement id="getCsmpContrIntfc" parameterClass="Map" resultClass="Map">
        SELECT
            CCI.CSMP_CONTR_INTFC_PK
            ,CCI.DLR_REF_NUM
            ,CCI.CUSA_END_USR_NUM
            ,CCI.CSMP_NUM
            ,CCI.CSMP_CONTR_STS_CD
            ,CCI.CSMP_RG_CD
            ,CCI.RTL_DLR_CD
            ,CCI.EFF_FROM_DT
            ,CCI.EFF_THRU_DT
            ,CCI.CSMP_CATG_CD
            ,CCI.CR_LIST_TXT
            ,CCI.CR_LIST_GNRN_NUM
            ,CCI.VLD_FROM_DT
            ,CCI.PREV_CSMP_NUM
            ,CCI.PREV_USR_TXT
            ,CCI.CSMP_TRX_STS_CD
            ,CCI.DS_ACCT_NM
            ,CCI.LAST_UPD_TS
            ,CCI.CSMP_PROC_STS_CD
        FROM
            CSMP_CONTR_INTFC CCI
        WHERE
                CCI.GLBL_CMPY_CD      = #glblCmpyCd#
            AND CCI.EZCANCELFLAG      = '0'
            <iterate property="csmpProcStsCd" var="elem[]" open="AND (" close=")" conjunction="OR">
                CCI.CSMP_PROC_STS_CD        = #elem[]#
            </iterate>
        ORDER BY
            CCI.EZINTIME
            ,CCI.CSMP_CONTR_INTFC_PK
    </statement>
    <statement id="getCsmpPrcXref" parameterClass="Map" resultClass="String">
        SELECT
            CPX.CSA_PRC_CATG_CD
        FROM
            CSMP_PRC_XREF CPX
        WHERE
                CPX.GLBL_CMPY_CD     = #glblCmpyCd#
            AND CPX.EZCANCELFLAG     = '0'
            AND CPX.CR_LIST_TXT      = #crListTxt#
            AND CPX.CR_LIST_GNRN_NUM = #crListGnrnNum#
            AND CPX.EFF_FROM_DT  &lt;= #procDt#
            AND NVL(CPX.EFF_THRU_DT, '99991231')  &gt;= #procDt#
    </statement>
    <statement id="getCsmpContrForCSA" parameterClass="Map" resultClass="Map">
        SELECT
            CC.CSMP_CONTR_PK
           ,CC.DS_ACCT_NUM
           ,CC.CSMP_NUM
        FROM
            CSMP_CONTR CC
        WHERE
                CC.GLBL_CMPY_CD        = #glblCmpyCd#
            AND CC.EZCANCELFLAG        = '0'
            AND CC.DLR_REF_NUM         = #dlrRefNum#
            AND CC.CSMP_CONTR_ACTV_FLG = 'Y'
    </statement>
    <statement id="getCsmpContrForCSMP" parameterClass="Map" resultClass="Map">
        SELECT
            CC.CSMP_CONTR_PK
        FROM
            CSMP_CONTR CC
        WHERE
                CC.GLBL_CMPY_CD        = #glblCmpyCd#
            AND CC.EZCANCELFLAG        = '0'
            AND CC.CSMP_NUM            = #csmpNum#
    </statement>
    <statement id="getCsmpContrIntfcForMail" parameterClass="Map" resultClass="Map">
        SELECT
            CSMP_NUM
            ,CUSA_END_USR_NUM
            ,CR_LIST_TXT
            ,CR_LIST_GNRN_NUM
            ,CSMP_ERR_MSG_TXT
        FROM
            (SELECT
                CCI.CSMP_NUM
                ,CCI.CUSA_END_USR_NUM
                ,CCI.CR_LIST_TXT
                ,CCI.CR_LIST_GNRN_NUM
                ,CCI.CSMP_ERR_MSG_TXT
            FROM
                CSMP_CONTR_INTFC CCI
            WHERE
                    CCI.GLBL_CMPY_CD      = #glblCmpyCd#
                AND CCI.EZCANCELFLAG      = '0'
                AND CCI.CSMP_PROC_STS_CD  = #csmpProcStsCd#
            ORDER BY
                CCI.EZUPTIME DESC
                ,CCI.CSMP_NUM ASC
                ,CCI.CUSA_END_USR_NUM ASC
                ,CCI.CR_LIST_TXT DESC
            ) A
        WHERE
            ROWNUM &lt;= #rowNum#
    </statement>
</sqlMap>
