<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NMAL6770Query">

    <typeAlias alias="NMAL6770CMsg"      type="business.blap.NMAL6770.NMAL6770CMsg"/>
    <typeAlias alias="NMAL6770_ASMsg"    type="business.blap.NMAL6770.NMAL6770_ASMsg"/>
    <typeAlias alias="NMAL6770_PSMsg"    type="business.blap.NMAL6770.NMAL6770_PSMsg"/>

    <statement id="getContact" parameterClass="Map" resultMap="result.getContact">
       <!-- 2018/10/11 QC#27869 Add Start -->
       WITH ALL_CONTACTS AS (
       <!-- 2018/10/11 QC#27869 Add End -->
        SELECT
            *
        FROM
            (
            <isNotEqual property="contSrchType" compareValue="2"> <!-- 2018/10/11 QC#27869 Add -->
             SELECT
                 CP.CTAC_PSN_PK
                ,CP.CTAC_PSN_NUM
                ,STC.DS_ACCT_NM AS DS_ACCT_NM
                <isNull property="acctSrch">
                    ,TRIM(PLW.FIRST_LINE_ADDR || ' ' || PLW.SCD_LINE_ADDR || ' ' || PLW.THIRD_LINE_ADDR || ' ' || PLW.FRTH_LINE_ADDR) AS LINE_ADDR
                    ,PLW.LOC_NUM
                    ,PLW.DS_LOC_NM
                </isNull>
                <isNotNull property="acctSrch">
	                <isNotNull property="inclLocFlg">
                        ,TRIM(PLW.FIRST_LINE_ADDR || ' ' || PLW.SCD_LINE_ADDR || ' ' || PLW.THIRD_LINE_ADDR || ' ' || PLW.FRTH_LINE_ADDR) AS LINE_ADDR
	                    ,PLW.LOC_NUM
	                    ,PLW.DS_LOC_NM
	                </isNotNull>
                </isNotNull>
                ,STC.SELL_TO_CUST_CD AS SELL_TO_CUST_CD
                ,DCPR.CTAC_TP_CD
                <!-- START 2017/12/06 Hd.Sugawara [QC#21897,MOD] -->
                <!-- ,CT.CTAC_TP_NM -->
                ,CT.CTAC_TP_DESC_TXT
                <!-- END 2017/12/06 Hd.Sugawara [QC#21897,MOD] -->
                ,CP.CTAC_PSN_FIRST_NM
                ,CP.CTAC_PSN_LAST_NM
                ,DCPS.DS_CTAC_PSN_SALT_NM
                ,CP.DS_CTAC_PSN_TTL_CD
                ,DCPT.DS_CTAC_PSN_TTL_NM
                <!-- 2019/03/20 QC#30808-1 Del Start -->
                <!--
                ,A.DS_CTAC_PNT_VAL_TXT_A2  AS PHONE
                ,A.DS_CTAC_PSN_EXTN_NUM_A2 AS EXT
                ,A.DS_CTAC_PNT_VAL_TXT_A4  AS EMAIL
                ,A.DS_CTAC_PNT_VAL_TXT_A5  AS FAX
                ,A.DS_CTAC_PNT_VAL_TXT_A3  AS ASSISTANT
                ,A.DS_CTAC_PNT_VAL_TXT_A1  AS MOBILE
                ,A.DS_CTAC_PNT_PK_A2       AS PHONE_PK
                ,A.DS_CTAC_PNT_PK_A4       AS EMAIL_PK
                ,A.DS_CTAC_PNT_PK_A5       AS FAX_PK
                -->
                <!-- 2019/03/20 QC#30808-1 Del End -->
                ,CPT.DS_CTAC_PNT_TP_NM
                ,CP.CTAC_PSN_CMNT_TXT
                <isNull property="acctSrch">
                    ,BTC.BILL_TO_CUST_CD
                    <!-- 2018/02/28 S21_NA#21075 Add Start -->
                    ,SHTC.SHIP_TO_CUST_CD
                    <!-- 2018/02/28 S21_NA#21075 Add End -->
                    <isNull property="locSrch">
                        ,STC2.DS_ACCT_NM  AS DS_ACCT_NM2
                        ,STC2.SELL_TO_CUST_CD AS SELL_TO_CUST_CD2
                    </isNull>
                </isNull>
                ,1                          AS SORT_NUM <!-- 2018/10/11 QC#27869 Add -->
             FROM
                <isNull property="inclLocFlg">
                 DS_CTAC_PSN_RELN DCPR
                </isNull>
                <isNotNull property="inclLocFlg">
                (SELECT
                     DCPR1.EZCANCELFLAG
                    ,DCPR1.GLBL_CMPY_CD
                    ,DCPR1.DS_CTAC_PSN_RELN_PK
                    ,DCPR1.CTAC_PSN_PK
                    ,DCPR1.DS_ACCT_NUM
                    ,DCPR1.LOC_NUM
                    ,DCPR1.EFF_FROM_DT
                    ,DCPR1.EFF_THRU_DT
                    ,DCPR1.DS_PRIM_LOC_FLG
                    ,DCPR1.CTAC_TP_CD
                FROM
                    DS_CTAC_PSN_RELN    DCPR1
                <!-- 2018/03/02 S21_NA#22387 Add Start -->
                    <isNotNull property="cMsg.dsAcctNm_H1">
                       ,SELL_TO_CUST        STC
                    </isNotNull>
                <!-- 2018/03/02 S21_NA#22387 Add End -->
                WHERE
                        DCPR1.GLBL_CMPY_CD  = #glblCmpyCd#
                <!-- 2018/03/02 S21_NA#22387 Mod Start -->
                <!--     AND DCPR1.DS_ACCT_NUM   = #cMsg.dsAcctNum_H1# -->
                    <isNotNull property="cMsg.dsAcctNum_H1">
                        AND DCPR1.DS_ACCT_NUM LIKE #cMsg.dsAcctNum_H1#
                    </isNotNull>
                <!-- 2018/03/02 S21_NA#22387 Mod End -->
                    AND DCPR1.EZCANCELFLAG  = '0'

                <!-- 2018/03/02 S21_NA#22387 Add Start -->
                    <isNotNull property="cMsg.dsAcctNm_H1">
                        AND DCPR1.GLBL_CMPY_CD  = STC.GLBL_CMPY_CD
                        AND DCPR1.DS_ACCT_NUM   = STC.SELL_TO_CUST_CD
                        AND STC.DS_ACCT_NM   LIKE #cMsg.dsAcctNm_H1#
                        AND STC.EZCANCELFLAG    = '0'
                    </isNotNull>
                <!-- 2018/03/02 S21_NA#22387 Add End -->
                UNION ALL 
                SELECT
                     DCPR2.EZCANCELFLAG
                    ,DCPR2.GLBL_CMPY_CD
                    ,DCPR2.DS_CTAC_PSN_RELN_PK
                    ,DCPR2.CTAC_PSN_PK
                <!-- 2018/03/02 S21_NA#22387 Mod Start -->
                <!--     ,#cMsg.dsAcctNum_H1# -->
                    ,AL.DS_ACCT_NUM
                <!-- 2018/03/02 S21_NA#22387 Mod End -->
                    ,DCPR2.LOC_NUM
                    ,DCPR2.EFF_FROM_DT
                    ,DCPR2.EFF_THRU_DT
                    ,DCPR2.DS_PRIM_LOC_FLG
                    ,DCPR2.CTAC_TP_CD
                FROM
                    DS_CTAC_PSN_RELN    DCPR2
                <!-- 2018/03/02 S21_NA#22387 Add Start -->
                   ,ACCT_LOC            AL
                   ,SELL_TO_CUST        STC
                <!-- 2018/03/02 S21_NA#22387 Add End -->
                WHERE
                       DCPR2.GLBL_CMPY_CD = 'ADB' 
                <!-- 2018/03/02 S21_NA#22387 Del Start -->
                <!--    AND DCPR2.LOC_NUM IN (  -->
                <!--         SELECT -->
                <!--             AL.LOC_NUM --> 
                <!--         FROM -->
                <!--             ACCT_LOC    AL -->
                <!--         WHERE -->
                <!--                 AL.GLBL_CMPY_CD      = #glblCmpyCd# --> 
                <!--             AND AL.DS_ACCT_NUM       = #cMsg.dsAcctNum_H1# -->
                <!--             AND AL.EFF_FROM_DT   &lt;= #salesDate# -->
                <!--             AND NVL(AL.EFF_THRU_DT, '99991231') &gt;= #salesDate# -->
                <!--             AND AL.EZCANCELFLAG      = '0' -->
                <!--         ) -->
                <!-- 2018/03/02 S21_NA#22387 Del End -->
                    AND DCPR2.EZCANCELFLAG  = '0'

                <!-- 2018/03/02 S21_NA#22387 Add Start -->
                    AND DCPR2.GLBL_CMPY_CD = AL.GLBL_CMPY_CD
                    AND DCPR2.LOC_NUM      = AL.LOC_NUM
                    <isNotNull property="cMsg.dsAcctNum_H1">
                        AND AL.DS_ACCT_NUM  LIKE #cMsg.dsAcctNum_H1#
                    </isNotNull>
                    AND AL.EFF_FROM_DT &lt;= #salesDate#
                    AND NVL(AL.EFF_THRU_DT, '99991231') &gt;= #salesDate#
                    AND AL.EZCANCELFLAG    = '0'

                    AND AL.GLBL_CMPY_CD    = STC.GLBL_CMPY_CD
                    AND AL.DS_ACCT_NUM     = STC.SELL_TO_CUST_CD
                    <isNotNull property="cMsg.dsAcctNm_H1">
                        AND STC.DS_ACCT_NM  LIKE #cMsg.dsAcctNm_H1#
                    </isNotNull>
                    AND STC.EZCANCELFLAG   = '0'
                <!-- 2018/03/02 S21_NA#22387 Add End -->
                ) DCPR
                </isNotNull>
                ,CTAC_PSN         CP
                ,SELL_TO_CUST     STC
                ,DS_CTAC_PSN_TTL  DCPT
                ,DS_CTAC_PSN_SALT DCPS
                ,CTAC_TP          CT
                ,DS_CTAC_PNT_TP   CPT
                <isNull property="acctSrch">
                    ,PTY_LOC_WRK      PLW
                    ,ACCT_LOC         AL
                    ,BILL_TO_CUST     BTC
                    <!-- 2018/02/28 S21_NA#21075 Add Start -->
                    ,SHIP_TO_CUST     SHTC
                    <!-- 2018/02/28 S21_NA#21075 Add End -->
                    <isNull property="locSrch">
                        ,SELL_TO_CUST STC2
                    </isNull>
                </isNull>
                <isNotNull property="acctSrch">
                    <isNotNull property="inclLocFlg">
                        ,PTY_LOC_WRK      PLW
                    </isNotNull>
                </isNotNull>
                <!-- 2019/03/20 QC#30808-1 Del Start -->
                <!--
                ,(
                  SELECT
                      B.CTAC_PSN_PK
                     ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_M# THEN P2.DS_CTAC_PNT_VAL_TXT  ELSE NULL END) DS_CTAC_PNT_VAL_TXT_A1
                     ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_P# THEN B.DS_CTAC_PNT_PK        ELSE NULL END) DS_CTAC_PNT_PK_A2
                     ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_P# THEN P2.DS_CTAC_PNT_VAL_TXT  ELSE NULL END) DS_CTAC_PNT_VAL_TXT_A2
                     ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_P# THEN P2.DS_CTAC_PSN_EXTN_NUM ELSE NULL END) DS_CTAC_PSN_EXTN_NUM_A2
                     ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_A# THEN P2.DS_CTAC_PNT_VAL_TXT  ELSE NULL END) DS_CTAC_PNT_VAL_TXT_A3
                     ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_E# THEN B.DS_CTAC_PNT_PK        ELSE NULL END) DS_CTAC_PNT_PK_A4
                     ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_E# THEN P2.DS_CTAC_PNT_VAL_TXT  ELSE NULL END) DS_CTAC_PNT_VAL_TXT_A4
                     ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_F# THEN B.DS_CTAC_PNT_PK        ELSE NULL END) DS_CTAC_PNT_PK_A5
                     ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_F# THEN P2.DS_CTAC_PNT_VAL_TXT  ELSE NULL END) DS_CTAC_PNT_VAL_TXT_A5
                  FROM
                      (
                       SELECT
                           P.GLBL_CMPY_CD
                          ,P.CTAC_PSN_PK
                          ,TP.DS_CTAC_PNT_TP_CD
                          ,MAX(P.DS_CTAC_PNT_PK) AS DS_CTAC_PNT_PK
                       FROM
                           DS_CTAC_PNT P
                          ,DS_CTAC_PNT_TP TP
                       WHERE
                           P.GLBL_CMPY_CD             = #glblCmpyCd#
                           AND P.DS_CTAC_PNT_ACTV_FLG = 'Y'
                           AND P.EZCANCELFLAG         = '0'
                           AND P.GLBL_CMPY_CD         = TP.GLBL_CMPY_CD
                           AND P.DS_CTAC_PNT_TP_CD    = TP.DS_CTAC_PNT_TP_CD
                           AND TP.EZCANCELFLAG        = '0'
                       GROUP BY
                           P.GLBL_CMPY_CD
                          ,P.CTAC_PSN_PK
                          ,TP.DS_CTAC_PNT_TP_CD
                      ) B
                     ,DS_CTAC_PNT P2
                  WHERE
                      P2.GLBL_CMPY_CD       = #glblCmpyCd#
                      AND P2.EZCANCELFLAG   = '0'
                      AND P2.GLBL_CMPY_CD   = B.GLBL_CMPY_CD
                      AND P2.DS_CTAC_PNT_PK = B.DS_CTAC_PNT_PK
                  GROUP BY
                      B.CTAC_PSN_PK
                 ) A
                -->
                <!-- 2019/03/20 QC#30808-1 Del End -->
             WHERE
                 DCPR.GLBL_CMPY_CD    = #glblCmpyCd#
                 AND DCPR.EFF_FROM_DT &lt;= #salesDate#
                 AND NVL(DCPR.EFF_THRU_DT, '99991231') &gt;= #salesDate#
                 <isNotNull property="acctSrch">
                     <isNotNull property="cMsg.dsAcctNum_H1">
                         AND DCPR.DS_ACCT_NUM LIKE #cMsg.dsAcctNum_H1#
                     </isNotNull>
                 </isNotNull>
                 <isNotNull property="locSrch">
                     <isNotNull property="cMsg.locNum_H1">
                         AND DCPR.LOC_NUM LIKE #cMsg.locNum_H1#
                     </isNotNull>
                 </isNotNull>
                 AND DCPR.EZCANCELFLAG    = '0'

                 AND DCPR.GLBL_CMPY_CD = CP.GLBL_CMPY_CD
                 AND DCPR.CTAC_PSN_PK  = CP.CTAC_PSN_PK
                 <isNotNull property="cMsg.xxChkBox_H1">
                     AND CP.CTAC_PSN_ACTV_FLG = #cMsg.xxChkBox_H1#
                 </isNotNull>
                 <isNotNull property="cMsg.dsCtacPsnTtlCd_H1">
                     AND CP.DS_CTAC_PSN_TTL_CD = #cMsg.dsCtacPsnTtlCd_H1#
                 </isNotNull>
                 <isNotNull property="cMsg.ctacPsnFirstNm_H1">
                     AND UPPER(CP.CTAC_PSN_FIRST_NM) LIKE UPPER(#cMsg.ctacPsnFirstNm_H1#)
                 </isNotNull>
                 <isNotNull property="cMsg.ctacPsnLastNm_H1">
                     AND UPPER(CP.CTAC_PSN_LAST_NM) LIKE UPPER(#cMsg.ctacPsnLastNm_H1#)
                 </isNotNull>
                 AND CP.EZCANCELFLAG   = '0'
                 <isNotNull property="acctSrch">
                     AND DCPR.GLBL_CMPY_CD = STC.GLBL_CMPY_CD
                     AND DCPR.DS_ACCT_NUM  = STC.SELL_TO_CUST_CD
                     <isNotNull property="cMsg.dsAcctNm_H1">
                         AND STC.DS_ACCT_NM LIKE #cMsg.dsAcctNm_H1#
                     </isNotNull>
                     AND STC.EZCANCELFLAG  = '0'
                 </isNotNull>
                 <isNull property="acctSrch">
                     <isNull property="locSrch">
                         AND DCPR.GLBL_CMPY_CD   = STC.GLBL_CMPY_CD(+)
                         AND DCPR.DS_ACCT_NUM    = STC.SELL_TO_CUST_CD(+)
                         AND STC.EZCANCELFLAG(+) = '0'
                     </isNull>
                 </isNull>

                 AND CP.GLBL_CMPY_CD       = DCPT.GLBL_CMPY_CD(+)
                 AND CP.DS_CTAC_PSN_TTL_CD = DCPT.DS_CTAC_PSN_TTL_CD(+)
                 AND DCPT.EZCANCELFLAG(+)   = '0'

                 AND CP.GLBL_CMPY_CD        = DCPS.GLBL_CMPY_CD(+)
                 AND CP.DS_CTAC_PSN_SALT_CD = DCPS.DS_CTAC_PSN_SALT_CD(+)
                 AND DCPS.EZCANCELFLAG(+)    = '0'

                 AND DCPR.GLBL_CMPY_CD       = CT.GLBL_CMPY_CD
                 AND DCPR.CTAC_TP_CD         = CT.CTAC_TP_CD
                 <isNotNull property="cMsg.ctacTpCd_H1">
                     AND CT.CTAC_TP_CD = #cMsg.ctacTpCd_H1#
                 </isNotNull>
                 AND CT.EZCANCELFLAG = '0'

                 AND CP.GLBL_CMPY_CD       = CPT.GLBL_CMPY_CD
                 AND CP.DS_PRIM_CTAC_TP_CD = CPT.DS_CTAC_PNT_TP_CD
                 AND CPT.EZCANCELFLAG       = '0'

                 <isNotNull property="locSrch">
                     AND DCPR.GLBL_CMPY_CD = PLW.GLBL_CMPY_CD
                     AND DCPR.LOC_NUM      = PLW.LOC_NUM
                     AND PLW.EZCANCELFLAG  = '0'

                     AND PLW.GLBL_CMPY_CD = AL.GLBL_CMPY_CD
                     AND PLW.LOC_NUM      = AL.LOC_NUM
                     <!-- Del Start 2017/09/06 QC#20810 -->
                     <!-- AND AL.RGTN_STS_CD   = #rgtnStsCd# -->
                     <!-- Del End 2017/09/06 QC#20810 -->
                     AND AL.EZCANCELFLAG  = '0'

                     AND AL.GLBL_CMPY_CD = STC.GLBL_CMPY_CD
                     AND AL.DS_ACCT_NUM  = STC.SELL_TO_CUST_CD
                     <!-- Del Start 2017/09/06 QC#20810 -->
                     <!-- AND STC.RGTN_STS_CD = #rgtnStsCd# -->
                     <!-- Del End 2017/09/06 QC#20810 -->
                     <isNotNull property="cMsg.dsAcctNum_H1">
                         AND STC.SELL_TO_CUST_CD LIKE #cMsg.dsAcctNum_H1#
                     </isNotNull>
                     <isNotNull property="cMsg.dsAcctNm_H1">
                         AND STC.DS_ACCT_NM LIKE #cMsg.dsAcctNm_H1#
                     </isNotNull>
                     AND STC.EZCANCELFLAG = '0'

                     <isNotNull property="cMsg.dsLocNm_H1">
                         AND UPPER(PLW.DS_LOC_NM)  LIKE #cMsg.dsLocNm_H1#
                     </isNotNull>

                     AND PLW.GLBL_CMPY_CD = BTC.GLBL_CMPY_CD(+)
                     AND PLW.LOC_NUM      = BTC.LOC_NUM(+)
                     <isNotNull property="cMsg.billToCustCd_H1">
                         AND BTC.BILL_TO_CUST_CD LIKE #cMsg.billToCustCd_H1#
                     </isNotNull>
                     AND BTC.EZCANCELFLAG(+) = '0'

                     <!-- 2018/02/28 S21_NA#21075 Add Start -->
                     AND PLW.GLBL_CMPY_CD = SHTC.GLBL_CMPY_CD(+)
                     AND PLW.LOC_NUM      = SHTC.LOC_NUM(+)
                     <isNotNull property="cMsg.shipToCustCd_H1">
                         AND SHTC.SHIP_TO_CUST_CD LIKE #cMsg.shipToCustCd_H1#
                     </isNotNull>
                     AND SHTC.EZCANCELFLAG(+) = '0'
                     <!-- 2018/02/28 S21_NA#21075 Add End -->
                 </isNotNull>

                 <isNull property="acctSrch">
                     <isNull property="locSrch">
                         AND DCPR.GLBL_CMPY_CD   = PLW.GLBL_CMPY_CD(+)
                         AND DCPR.LOC_NUM        = PLW.LOC_NUM(+)
                         AND PLW.EZCANCELFLAG(+) = '0'

                         AND PLW.GLBL_CMPY_CD   = AL.GLBL_CMPY_CD(+)
                         AND PLW.LOC_NUM        = AL.LOC_NUM(+)
                         <!-- Del Start 2017/09/06 QC#20810 -->
                         <!-- AND AL.RGTN_STS_CD(+)  = #rgtnStsCd# -->
                         <!-- Del End 2017/09/06 QC#20810 -->
                         AND AL.EZCANCELFLAG(+) = '0'

                         AND AL.GLBL_CMPY_CD      = STC2.GLBL_CMPY_CD(+)
                         AND AL.DS_ACCT_NUM       = STC2.SELL_TO_CUST_CD(+)
                         <!-- Del Start 2017/09/06 QC#20810 -->
                         <!-- AND STC2.RGTN_STS_CD(+)  = #rgtnStsCd# -->
                         <!-- Del End 2017/09/06 QC#20810 -->
                         AND STC2.EZCANCELFLAG(+) = '0'

                         AND PLW.GLBL_CMPY_CD    = BTC.GLBL_CMPY_CD(+)
                         AND PLW.LOC_NUM         = BTC.LOC_NUM(+)
                         <isNotNull property="cMsg.billToCustCd_H1">
                             AND BTC.BILL_TO_CUST_CD LIKE #cMsg.billToCustCd_H1#
                         </isNotNull>
                         AND BTC.EZCANCELFLAG(+) = '0'

                         <!-- 2018/02/28 S21_NA#21075 Add Start -->
                         AND PLW.GLBL_CMPY_CD    = SHTC.GLBL_CMPY_CD(+)
                         AND PLW.LOC_NUM         = SHTC.LOC_NUM(+)
                         <isNotNull property="cMsg.shipToCustCd_H1">
                             AND SHTC.SHIP_TO_CUST_CD LIKE #cMsg.shipToCustCd_H1#
                         </isNotNull>
                         AND SHTC.EZCANCELFLAG(+) = '0'
                         <!-- 2018/02/28 S21_NA#21075 Add End -->
                     </isNull>
                 </isNull>
                <isNotNull property="acctSrch">
                    <isNotNull property="inclLocFlg">
                         AND DCPR.GLBL_CMPY_CD   = PLW.GLBL_CMPY_CD(+)
                         AND DCPR.LOC_NUM        = PLW.LOC_NUM(+)
                         AND PLW.EZCANCELFLAG(+) = '0'
                    </isNotNull>
                </isNotNull>

                 <isNotNull property="cMsg.dsCtacPntValTxt_H1">
                     AND EXISTS
                               (
                                SELECT
                                    PNT.CTAC_PSN_PK
                                FROM
                                    DS_CTAC_PNT PNT
                                WHERE
                                    PNT.GLBL_CMPY_CD            = #glblCmpyCd#
                                    AND PNT.CTAC_PSN_PK         = CP.CTAC_PSN_PK
                                    AND PNT.DS_CTAC_PNT_TP_CD   = #dsCtacPntTpCd_P#
                                    AND UPPER(PNT.DS_CTAC_PNT_VAL_TXT) LIKE #cMsg.dsCtacPntValTxt_H1#
                                    AND PNT.EZCANCELFLAG        = '0'
                               )
                 </isNotNull>
                 <isNotNull property="emailFlg">
                     AND EXISTS
                               (
                                SELECT
                                    PNT.CTAC_PSN_PK
                                FROM
                                    DS_CTAC_PNT PNT
                                WHERE
                                    PNT.GLBL_CMPY_CD          = #glblCmpyCd#
                                    AND PNT.CTAC_PSN_PK       = CP.CTAC_PSN_PK
                                    AND PNT.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_E#
                                    <isNotNull property="cMsg.dsCtacPntValTxt_H2">
                                        AND UPPER(PNT.DS_CTAC_PNT_VAL_TXT) LIKE #cMsg.dsCtacPntValTxt_H2#
                                    </isNotNull>
                                    AND PNT.EZCANCELFLAG      = '0'
                               )
                 </isNotNull>

                <!-- 2019/03/20 QC#30808-1 Del Start -->
                <!--
                 AND A.CTAC_PSN_PK(+) = CP.CTAC_PSN_PK
                -->
                <!-- 2019/03/20 QC#30808-1 Del End -->
           <!-- 2018/10/11 QC#27869 Del Start -->
           <!--
             ORDER BY
                 STC.DS_ACCT_NM
                 <isNull property="acctSrch">
                     ,LINE_ADDR
                 </isNull>
           -->
                <!-- START 2017/12/06 Hd.Sugawara [QC#21897,MOD] -->
                <!-- ,CT.CTAC_TP_NM -->
           <!--
                ,CT.CTAC_TP_DESC_TXT
           -->
                <!-- END 2017/12/06 Hd.Sugawara [QC#21897,MOD] -->
           <!--
                ,DCPT.DS_CTAC_PSN_TTL_NM
                ,CP.CTAC_PSN_FIRST_NM
                ,CP.CTAC_PSN_LAST_NM
           -->
           <!-- 2018/10/11 QC#27869 Del End -->
           <!-- 2018/10/11 QC#27869 Add Start -->
             </isNotEqual>
             <isEqual property="contSrchType" compareValue="0">
              UNION ALL
             </isEqual>
             <isNotEqual property="contSrchType" compareValue="1">
              SELECT DISTINCT
                 CP.CTAC_PSN_PK
                ,CP.CTAC_PSN_NUM
                ,STC.DS_ACCT_NM AS DS_ACCT_NM
                <isNull property="acctSrch">
                    ,TRIM(PLW.FIRST_LINE_ADDR || ' ' || PLW.SCD_LINE_ADDR || ' ' || PLW.THIRD_LINE_ADDR || ' ' || PLW.FRTH_LINE_ADDR) AS LINE_ADDR
                    ,PLW.LOC_NUM
                    ,PLW.DS_LOC_NM
                </isNull>
                <isNotNull property="acctSrch">
	                <isNotNull property="inclLocFlg">
                        ,TRIM(PLW.FIRST_LINE_ADDR || ' ' || PLW.SCD_LINE_ADDR || ' ' || PLW.THIRD_LINE_ADDR || ' ' || PLW.FRTH_LINE_ADDR) AS LINE_ADDR
	                    ,PLW.LOC_NUM
	                    ,PLW.DS_LOC_NM
	                </isNotNull>
                </isNotNull>
                ,STC.SELL_TO_CUST_CD AS SELL_TO_CUST_CD
                ,SCT.SVC_CTAC_TP_CD        AS CTAC_TP_CD
                ,SCT.SVC_CTAC_TP_DESC_TXT  AS CTAC_TP_DESC_TXT
                ,CP.CTAC_PSN_FIRST_NM 
                ,CP.CTAC_PSN_LAST_NM
                ,DCPS.DS_CTAC_PSN_SALT_NM
                ,CP.DS_CTAC_PSN_TTL_CD
                ,DCPT.DS_CTAC_PSN_TTL_NM
                <!-- 2019/03/20 QC#30808-1 Del Start -->
                <!--
                ,A.DS_CTAC_PNT_VAL_TXT_A2  AS PHONE
                ,A.DS_CTAC_PSN_EXTN_NUM_A2 AS EXT
                ,A.DS_CTAC_PNT_VAL_TXT_A4  AS EMAIL
                ,A.DS_CTAC_PNT_VAL_TXT_A5  AS FAX
                ,A.DS_CTAC_PNT_VAL_TXT_A3  AS ASSISTANT
                ,A.DS_CTAC_PNT_VAL_TXT_A1  AS MOBILE
                ,A.DS_CTAC_PNT_PK_A2       AS PHONE_PK
                ,A.DS_CTAC_PNT_PK_A4       AS EMAIL_PK
                ,A.DS_CTAC_PNT_PK_A5       AS FAX_PK
                -->
                <!-- 2019/03/20 QC#30808-1 Del End -->
                ,CPT.DS_CTAC_PNT_TP_NM
                ,CP.CTAC_PSN_CMNT_TXT
                <isNull property="acctSrch">
                    ,BTC.BILL_TO_CUST_CD
                    ,SHTC.SHIP_TO_CUST_CD
                    <isNull property="locSrch">
                        ,STC2.DS_ACCT_NM  AS DS_ACCT_NM2
                        ,STC2.SELL_TO_CUST_CD AS SELL_TO_CUST_CD2
                    </isNull>
                </isNull>
                ,2                          AS SORT_NUM
             FROM
                <isNull property="inclLocFlg">
                 DS_CTAC_PSN_RELN DCPR
                </isNull>
                <isNotNull property="inclLocFlg">
                (SELECT
                     DCPR1.EZCANCELFLAG
                    ,DCPR1.GLBL_CMPY_CD
                    ,DCPR1.DS_CTAC_PSN_RELN_PK
                    ,DCPR1.CTAC_PSN_PK
                    ,DCPR1.DS_ACCT_NUM
                    ,DCPR1.LOC_NUM
                    ,DCPR1.EFF_FROM_DT
                    ,DCPR1.EFF_THRU_DT
                    ,DCPR1.DS_PRIM_LOC_FLG
                    ,DCPR1.CTAC_TP_CD
                FROM
                    DS_CTAC_PSN_RELN    DCPR1
                    <isNotNull property="cMsg.dsAcctNm_H1">
                       ,SELL_TO_CUST        STC
                    </isNotNull>
                WHERE
                        DCPR1.GLBL_CMPY_CD  = #glblCmpyCd#
                    <isNotNull property="cMsg.dsAcctNum_H1">
                        AND DCPR1.DS_ACCT_NUM LIKE #cMsg.dsAcctNum_H1#
                    </isNotNull>
                    AND DCPR1.EZCANCELFLAG  = '0'

                    <isNotNull property="cMsg.dsAcctNm_H1">
                        AND DCPR1.GLBL_CMPY_CD  = STC.GLBL_CMPY_CD
                        AND DCPR1.DS_ACCT_NUM   = STC.SELL_TO_CUST_CD
                        AND STC.DS_ACCT_NM   LIKE #cMsg.dsAcctNm_H1#
                        AND STC.EZCANCELFLAG    = '0'
                    </isNotNull>
                UNION ALL 
                SELECT
                     DCPR2.EZCANCELFLAG
                    ,DCPR2.GLBL_CMPY_CD
                    ,DCPR2.DS_CTAC_PSN_RELN_PK
                    ,DCPR2.CTAC_PSN_PK
                    ,AL.DS_ACCT_NUM
                    ,DCPR2.LOC_NUM
                    ,DCPR2.EFF_FROM_DT
                    ,DCPR2.EFF_THRU_DT
                    ,DCPR2.DS_PRIM_LOC_FLG
                    ,DCPR2.CTAC_TP_CD
                FROM
                    DS_CTAC_PSN_RELN    DCPR2
                   ,ACCT_LOC            AL
                   ,SELL_TO_CUST        STC
                WHERE
                       DCPR2.GLBL_CMPY_CD = 'ADB' 
                    AND DCPR2.EZCANCELFLAG  = '0'

                    AND DCPR2.GLBL_CMPY_CD = AL.GLBL_CMPY_CD
                    AND DCPR2.LOC_NUM      = AL.LOC_NUM
                    <isNotNull property="cMsg.dsAcctNum_H1">
                        AND AL.DS_ACCT_NUM  LIKE #cMsg.dsAcctNum_H1#
                    </isNotNull>
                    AND AL.EFF_FROM_DT &lt;= #salesDate#
                    AND NVL(AL.EFF_THRU_DT, '99991231') &gt;= #salesDate#
                    AND AL.EZCANCELFLAG    = '0'

                    AND AL.GLBL_CMPY_CD    = STC.GLBL_CMPY_CD
                    AND AL.DS_ACCT_NUM     = STC.SELL_TO_CUST_CD
                    <isNotNull property="cMsg.dsAcctNm_H1">
                        AND STC.DS_ACCT_NM  LIKE #cMsg.dsAcctNm_H1#
                    </isNotNull>
                    AND STC.EZCANCELFLAG   = '0'
                ) DCPR
                </isNotNull>
                ,CTAC_PSN         CP
                ,SELL_TO_CUST     STC
                ,DS_CTAC_PSN_TTL  DCPT
                ,DS_CTAC_PSN_SALT DCPS
                ,DS_CTAC_PNT      DCP
                ,SVC_MACH_CTAC_PSN SMCP
                ,SVC_CTAC_TP      SCT
                ,DS_CTAC_PNT_TP   CPT
                <isNull property="acctSrch">
                    ,PTY_LOC_WRK      PLW
                    ,ACCT_LOC         AL
                    ,BILL_TO_CUST     BTC
                    ,SHIP_TO_CUST     SHTC
                    <isNull property="locSrch">
                        ,SELL_TO_CUST STC2
                    </isNull>
                </isNull>
                <isNotNull property="acctSrch">
                    <isNotNull property="inclLocFlg">
                        ,PTY_LOC_WRK      PLW
                    </isNotNull>
                </isNotNull>
                <!-- 2019/03/20 QC#30808-1 Del Start -->
                <!--
                ,(
                  SELECT
                      B.CTAC_PSN_PK
                     ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_M# THEN P2.DS_CTAC_PNT_VAL_TXT  ELSE NULL END) DS_CTAC_PNT_VAL_TXT_A1
                     ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_P# THEN B.DS_CTAC_PNT_PK        ELSE NULL END) DS_CTAC_PNT_PK_A2
                     ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_P# THEN P2.DS_CTAC_PNT_VAL_TXT  ELSE NULL END) DS_CTAC_PNT_VAL_TXT_A2
                     ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_P# THEN P2.DS_CTAC_PSN_EXTN_NUM ELSE NULL END) DS_CTAC_PSN_EXTN_NUM_A2
                     ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_A# THEN P2.DS_CTAC_PNT_VAL_TXT  ELSE NULL END) DS_CTAC_PNT_VAL_TXT_A3
                     ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_E# THEN B.DS_CTAC_PNT_PK        ELSE NULL END) DS_CTAC_PNT_PK_A4
                     ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_E# THEN P2.DS_CTAC_PNT_VAL_TXT  ELSE NULL END) DS_CTAC_PNT_VAL_TXT_A4
                     ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_F# THEN B.DS_CTAC_PNT_PK        ELSE NULL END) DS_CTAC_PNT_PK_A5
                     ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_F# THEN P2.DS_CTAC_PNT_VAL_TXT  ELSE NULL END) DS_CTAC_PNT_VAL_TXT_A5
                  FROM
                      (
                       SELECT
                           P.GLBL_CMPY_CD
                          ,P.CTAC_PSN_PK
                          ,TP.DS_CTAC_PNT_TP_CD
                          ,MAX(P.DS_CTAC_PNT_PK) AS DS_CTAC_PNT_PK
                       FROM
                           DS_CTAC_PNT P
                          ,DS_CTAC_PNT_TP TP
                       WHERE
                           P.GLBL_CMPY_CD             = #glblCmpyCd#
                           AND P.DS_CTAC_PNT_ACTV_FLG = 'Y'
                           AND P.EZCANCELFLAG         = '0'
                           AND P.GLBL_CMPY_CD         = TP.GLBL_CMPY_CD
                           AND P.DS_CTAC_PNT_TP_CD    = TP.DS_CTAC_PNT_TP_CD
                           AND TP.EZCANCELFLAG        = '0'
                       GROUP BY
                           P.GLBL_CMPY_CD
                          ,P.CTAC_PSN_PK
                          ,TP.DS_CTAC_PNT_TP_CD
                      ) B
                     ,DS_CTAC_PNT P2
                  WHERE
                      P2.GLBL_CMPY_CD       = #glblCmpyCd#
                      AND P2.EZCANCELFLAG   = '0'
                      AND P2.GLBL_CMPY_CD   = B.GLBL_CMPY_CD
                      AND P2.DS_CTAC_PNT_PK = B.DS_CTAC_PNT_PK
                  GROUP BY
                      B.CTAC_PSN_PK
                 ) A
                -->
                <!-- 2019/03/20 QC#30808-1 Del End -->
             WHERE
                 DCPR.GLBL_CMPY_CD    = #glblCmpyCd#
                 AND DCPR.EFF_FROM_DT &lt;= #salesDate#
                 AND NVL(DCPR.EFF_THRU_DT, '99991231') &gt;= #salesDate#
                 <isNotNull property="acctSrch">
                     <isNotNull property="cMsg.dsAcctNum_H1">
                         AND DCPR.DS_ACCT_NUM LIKE #cMsg.dsAcctNum_H1#
                     </isNotNull>
                 </isNotNull>
                 <isNotNull property="locSrch">
                     <isNotNull property="cMsg.locNum_H1">
                         AND DCPR.LOC_NUM LIKE #cMsg.locNum_H1#
                     </isNotNull>
                 </isNotNull>
                 AND DCPR.EZCANCELFLAG    = '0'

                 AND DCPR.GLBL_CMPY_CD = CP.GLBL_CMPY_CD
                 AND DCPR.CTAC_PSN_PK  = CP.CTAC_PSN_PK
                 <isNotNull property="cMsg.xxChkBox_H1">
                     AND SMCP.EFF_FROM_DT &lt;= #salesDate# AND NVL(SMCP.EFF_THRU_DT, '99991231') &gt;= #salesDate#
                 </isNotNull>
                 <isNotNull property="cMsg.dsCtacPsnTtlCd_H1">
                     AND CP.DS_CTAC_PSN_TTL_CD = #cMsg.dsCtacPsnTtlCd_H1#
                 </isNotNull>
                 <isNotNull property="cMsg.ctacPsnFirstNm_H1">
                     AND UPPER(CP.CTAC_PSN_FIRST_NM) LIKE UPPER(#cMsg.ctacPsnFirstNm_H1#)
                 </isNotNull>
                 <isNotNull property="cMsg.ctacPsnLastNm_H1">
                     AND UPPER(CP.CTAC_PSN_LAST_NM) LIKE UPPER(#cMsg.ctacPsnLastNm_H1#)
                 </isNotNull>
                 AND CP.EZCANCELFLAG   = '0'
                 <isNotNull property="acctSrch">
                     AND DCPR.GLBL_CMPY_CD = STC.GLBL_CMPY_CD
                     AND DCPR.DS_ACCT_NUM  = STC.SELL_TO_CUST_CD
                     <isNotNull property="cMsg.dsAcctNm_H1">
                         AND STC.DS_ACCT_NM LIKE #cMsg.dsAcctNm_H1#
                     </isNotNull>
                     AND STC.EZCANCELFLAG  = '0'
                 </isNotNull>
                 <isNull property="acctSrch">
                     <isNull property="locSrch">
                         AND DCPR.GLBL_CMPY_CD   = STC.GLBL_CMPY_CD(+)
                         AND DCPR.DS_ACCT_NUM    = STC.SELL_TO_CUST_CD(+)
                         AND STC.EZCANCELFLAG(+) = '0'
                     </isNull>
                 </isNull>

                 AND CP.GLBL_CMPY_CD       = DCPT.GLBL_CMPY_CD(+)
                 AND CP.DS_CTAC_PSN_TTL_CD = DCPT.DS_CTAC_PSN_TTL_CD(+)
                 AND DCPT.EZCANCELFLAG(+)   = '0'

                 AND CP.GLBL_CMPY_CD        = DCPS.GLBL_CMPY_CD(+)
                 AND CP.DS_CTAC_PSN_SALT_CD = DCPS.DS_CTAC_PSN_SALT_CD(+)
                 AND DCPS.EZCANCELFLAG(+)    = '0'

                 AND CP.GLBL_CMPY_CD        = DCP.GLBL_CMPY_CD
                 AND CP.CTAC_PSN_PK         = DCP.CTAC_PSN_PK
                 AND DCP.EZCANCELFLAG = '0'

                 AND DCP.GLBL_CMPY_CD       = SMCP.GLBL_CMPY_CD
                 AND DCP.DS_CTAC_PNT_PK     = SMCP.DS_CTAC_PNT_PK
                 AND SMCP.EZCANCELFLAG = '0'

                 AND SMCP.GLBL_CMPY_CD      = SCT.GLBL_CMPY_CD
                 AND SMCP.SVC_CTAC_TP_CD    = SCT.SVC_CTAC_TP_CD
                 <isNotNull property="cMsg.ctacTpCd_H1">
                     AND SCT.SVC_CTAC_TP_CD = #cMsg.ctacTpCd_H1#
                 </isNotNull>
                 AND SCT.EZCANCELFLAG = '0'

                 AND CP.GLBL_CMPY_CD       = CPT.GLBL_CMPY_CD
                 AND CP.DS_PRIM_CTAC_TP_CD = CPT.DS_CTAC_PNT_TP_CD
                 AND CPT.EZCANCELFLAG       = '0'

                 AND EXISTS ( SELECT
                                1
                             FROM
                                 SVC_MACH_MSTR SMM
                             WHERE
                                (SMM.CUR_LOC_ACCT_NUM = DCPR.DS_ACCT_NUM
                              OR SMM.IND_CUR_LOC_NUM = DCPR.LOC_NUM)
                             AND SMM.GLBL_CMPY_CD = SMCP.GLBL_CMPY_CD
                             AND SMM.SVC_MACH_MSTR_PK = SMCP.SVC_MACH_MSTR_PK
                             AND SMM.EZCANCELFLAG = '0')
                             
                 <isNotNull property="locSrch">
                     AND DCPR.GLBL_CMPY_CD = PLW.GLBL_CMPY_CD
                     AND DCPR.LOC_NUM      = PLW.LOC_NUM
                     AND PLW.EZCANCELFLAG  = '0'

                     AND PLW.GLBL_CMPY_CD = AL.GLBL_CMPY_CD
                     AND PLW.LOC_NUM      = AL.LOC_NUM
                     AND AL.EZCANCELFLAG  = '0'

                     AND AL.GLBL_CMPY_CD = STC.GLBL_CMPY_CD
                     AND AL.DS_ACCT_NUM  = STC.SELL_TO_CUST_CD
                     <isNotNull property="cMsg.dsAcctNum_H1">
                         AND STC.SELL_TO_CUST_CD LIKE #cMsg.dsAcctNum_H1#
                     </isNotNull>
                     <isNotNull property="cMsg.dsAcctNm_H1">
                         AND STC.DS_ACCT_NM LIKE #cMsg.dsAcctNm_H1#
                     </isNotNull>
                     AND STC.EZCANCELFLAG = '0'

                     <isNotNull property="cMsg.dsLocNm_H1">
                         AND UPPER(PLW.DS_LOC_NM)  LIKE #cMsg.dsLocNm_H1#
                     </isNotNull>

                     AND PLW.GLBL_CMPY_CD = BTC.GLBL_CMPY_CD(+)
                     AND PLW.LOC_NUM      = BTC.LOC_NUM(+)
                     <isNotNull property="cMsg.billToCustCd_H1">
                         AND BTC.BILL_TO_CUST_CD LIKE #cMsg.billToCustCd_H1#
                     </isNotNull>
                     AND BTC.EZCANCELFLAG(+) = '0'

                     AND PLW.GLBL_CMPY_CD = SHTC.GLBL_CMPY_CD(+)
                     AND PLW.LOC_NUM      = SHTC.LOC_NUM(+)
                     <isNotNull property="cMsg.shipToCustCd_H1">
                         AND SHTC.SHIP_TO_CUST_CD LIKE #cMsg.shipToCustCd_H1#
                     </isNotNull>
                     AND SHTC.EZCANCELFLAG(+) = '0'
                 </isNotNull>

                 <isNull property="acctSrch">
                     <isNull property="locSrch">
                         AND DCPR.GLBL_CMPY_CD   = PLW.GLBL_CMPY_CD(+)
                         AND DCPR.LOC_NUM        = PLW.LOC_NUM(+)
                         AND PLW.EZCANCELFLAG(+) = '0'

                         AND PLW.GLBL_CMPY_CD   = AL.GLBL_CMPY_CD(+)
                         AND PLW.LOC_NUM        = AL.LOC_NUM(+)
                         AND AL.EZCANCELFLAG(+) = '0'

                         AND AL.GLBL_CMPY_CD      = STC2.GLBL_CMPY_CD(+)
                         AND AL.DS_ACCT_NUM       = STC2.SELL_TO_CUST_CD(+)
                         AND STC2.EZCANCELFLAG(+) = '0'

                         AND PLW.GLBL_CMPY_CD    = BTC.GLBL_CMPY_CD(+)
                         AND PLW.LOC_NUM         = BTC.LOC_NUM(+)
                         <isNotNull property="cMsg.billToCustCd_H1">
                             AND BTC.BILL_TO_CUST_CD LIKE #cMsg.billToCustCd_H1#
                         </isNotNull>
                         AND BTC.EZCANCELFLAG(+) = '0'

                         AND PLW.GLBL_CMPY_CD    = SHTC.GLBL_CMPY_CD(+)
                         AND PLW.LOC_NUM         = SHTC.LOC_NUM(+)
                         <isNotNull property="cMsg.shipToCustCd_H1">
                             AND SHTC.SHIP_TO_CUST_CD LIKE #cMsg.shipToCustCd_H1#
                         </isNotNull>
                         AND SHTC.EZCANCELFLAG(+) = '0'
                     </isNull>
                 </isNull>
                <isNotNull property="acctSrch">
                    <isNotNull property="inclLocFlg">
                         AND DCPR.GLBL_CMPY_CD   = PLW.GLBL_CMPY_CD(+)
                         AND DCPR.LOC_NUM        = PLW.LOC_NUM(+)
                         AND PLW.EZCANCELFLAG(+) = '0'
                    </isNotNull>
                </isNotNull>

                 <isNotNull property="cMsg.dsCtacPntValTxt_H1">
                     AND EXISTS
                               (
                                SELECT
                                    PNT.CTAC_PSN_PK
                                FROM
                                    DS_CTAC_PNT PNT
                                WHERE
                                    PNT.GLBL_CMPY_CD            = #glblCmpyCd#
                                    AND PNT.CTAC_PSN_PK         = CP.CTAC_PSN_PK
                                    AND PNT.DS_CTAC_PNT_TP_CD   = #dsCtacPntTpCd_P#
                                    AND UPPER(PNT.DS_CTAC_PNT_VAL_TXT) LIKE #cMsg.dsCtacPntValTxt_H1#
                                    AND PNT.EZCANCELFLAG        = '0'
                               )
                 </isNotNull>
                 <isNotNull property="emailFlg">
                     AND EXISTS
                               (
                                SELECT
                                    PNT.CTAC_PSN_PK
                                FROM
                                    DS_CTAC_PNT PNT
                                WHERE
                                    PNT.GLBL_CMPY_CD          = #glblCmpyCd#
                                    AND PNT.CTAC_PSN_PK       = CP.CTAC_PSN_PK
                                    AND PNT.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_E#
                                    <isNotNull property="cMsg.dsCtacPntValTxt_H2">
                                        AND UPPER(PNT.DS_CTAC_PNT_VAL_TXT) LIKE #cMsg.dsCtacPntValTxt_H2#
                                    </isNotNull>
                                    AND PNT.EZCANCELFLAG      = '0'
                               )
                 </isNotNull>

                <!-- 2019/03/20 QC#30808-1 Del Start -->
                <!--
                 AND A.CTAC_PSN_PK(+) = CP.CTAC_PSN_PK
                -->
                <!-- 2019/03/20 QC#30808-1 Del End -->
             </isNotEqual>
              )
            )
            <!-- 2019/03/20 QC#30808-1 Del Start -->
            <!--
            SELECT
               RESULT.*
            FROM (
               SELECT
                   *
               FROM
                   ALL_CONTACTS
               ORDER BY
                   DS_ACCT_NM
                  <isNull property="acctSrch">
                     ,LINE_ADDR
                  </isNull>
                  ,SORT_NUM
                  ,CTAC_TP_DESC_TXT
                  ,DS_CTAC_PSN_TTL_NM
                  ,CTAC_PSN_FIRST_NM
                  ,CTAC_PSN_LAST_NM
             ) RESULT
            -->
            <!-- 2019/03/20 QC#30808-1 Del End -->
           <!-- 2018/10/11 QC#27869 Add End-->
           <!-- ) 2018/10/11 QC#27869 Del -->
        <!-- 2019/03/20 QC#30808-1 Del Start -->
        <!--
        WHERE
            ROWNUM &lt;= #rowNum#
        -->
        <!-- 2019/03/20 QC#30808-1 Del End -->
        <!-- 2019/03/20 QC#30808-1 Add Start -->
        SELECT
            /*+
            LEADING(RESULT)
            PUSH_PRED(A)
            */
             RESULT.CTAC_PSN_PK
            ,RESULT.CTAC_PSN_NUM
            ,RESULT.DS_ACCT_NM
            <isNull property="acctSrch">
                ,RESULT.LINE_ADDR
                ,RESULT.LOC_NUM
                ,RESULT.DS_LOC_NM
            </isNull>
            <isNotNull property="acctSrch">
                <isNotNull property="inclLocFlg">
                    ,RESULT.LINE_ADDR
                    ,RESULT.LOC_NUM
                    ,RESULT.DS_LOC_NM
                </isNotNull>
            </isNotNull>
            ,RESULT.SELL_TO_CUST_CD
            ,RESULT.CTAC_TP_CD
            ,RESULT.CTAC_TP_DESC_TXT
            ,RESULT.CTAC_PSN_FIRST_NM 
            ,RESULT.CTAC_PSN_LAST_NM
            ,RESULT.DS_CTAC_PSN_SALT_NM
            ,RESULT.DS_CTAC_PSN_TTL_CD
            ,RESULT.DS_CTAC_PSN_TTL_NM
            ,A.DS_CTAC_PNT_VAL_TXT_A2  AS PHONE
            ,A.DS_CTAC_PSN_EXTN_NUM_A2 AS EXT
            ,A.DS_CTAC_PNT_VAL_TXT_A4  AS EMAIL
            ,A.DS_CTAC_PNT_VAL_TXT_A5  AS FAX
            ,A.DS_CTAC_PNT_VAL_TXT_A3  AS ASSISTANT
            ,A.DS_CTAC_PNT_VAL_TXT_A1  AS MOBILE
            ,A.DS_CTAC_PNT_PK_A2       AS PHONE_PK
            ,A.DS_CTAC_PNT_PK_A4       AS EMAIL_PK
            ,A.DS_CTAC_PNT_PK_A5       AS FAX_PK
            ,RESULT.DS_CTAC_PNT_TP_NM
            ,RESULT.CTAC_PSN_CMNT_TXT
            <isNull property="acctSrch">
                ,RESULT.BILL_TO_CUST_CD
                ,RESULT.SHIP_TO_CUST_CD
                <isNull property="locSrch">
                    ,RESULT.DS_ACCT_NM2
                    ,RESULT.SELL_TO_CUST_CD2
                </isNull>
            </isNull>
            ,RESULT.SORT_NUM
        FROM
            (
                SELECT
                    R1.*
                FROM
                    (
                        SELECT
                           AC.*
                        FROM
                            ALL_CONTACTS AC
                        ORDER BY
                            AC.DS_ACCT_NM
                            <isNull property="acctSrch">
                            ,AC.LINE_ADDR
                            </isNull>
                            ,AC.SORT_NUM
                            ,AC.CTAC_TP_DESC_TXT
                            ,AC.DS_CTAC_PSN_TTL_NM
                            ,AC.CTAC_PSN_FIRST_NM
                            ,AC.CTAC_PSN_LAST_NM
                    ) R1
                WHERE
                    ROWNUM &lt;= #rowNum#
            ) RESULT
            ,(
                SELECT
                    B.CTAC_PSN_PK
                    ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_M# THEN P2.DS_CTAC_PNT_VAL_TXT  ELSE NULL END) DS_CTAC_PNT_VAL_TXT_A1
                    ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_P# THEN B.DS_CTAC_PNT_PK        ELSE NULL END) DS_CTAC_PNT_PK_A2
                    ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_P# THEN P2.DS_CTAC_PNT_VAL_TXT  ELSE NULL END) DS_CTAC_PNT_VAL_TXT_A2
                    ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_P# THEN P2.DS_CTAC_PSN_EXTN_NUM ELSE NULL END) DS_CTAC_PSN_EXTN_NUM_A2
                    ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_A# THEN P2.DS_CTAC_PNT_VAL_TXT  ELSE NULL END) DS_CTAC_PNT_VAL_TXT_A3
                    ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_E# THEN B.DS_CTAC_PNT_PK        ELSE NULL END) DS_CTAC_PNT_PK_A4
                    ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_E# THEN P2.DS_CTAC_PNT_VAL_TXT  ELSE NULL END) DS_CTAC_PNT_VAL_TXT_A4
                    ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_F# THEN B.DS_CTAC_PNT_PK        ELSE NULL END) DS_CTAC_PNT_PK_A5
                    ,MAX(CASE WHEN B.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_F# THEN P2.DS_CTAC_PNT_VAL_TXT  ELSE NULL END) DS_CTAC_PNT_VAL_TXT_A5
                FROM
                    (
                        SELECT
                            P.GLBL_CMPY_CD
                            ,P.CTAC_PSN_PK
                            ,TP.DS_CTAC_PNT_TP_CD
                            ,MAX(P.DS_CTAC_PNT_PK) AS DS_CTAC_PNT_PK
                        FROM
                            DS_CTAC_PNT P
                            ,DS_CTAC_PNT_TP TP
                        WHERE
                            P.GLBL_CMPY_CD             = #glblCmpyCd#
                        AND P.DS_CTAC_PNT_ACTV_FLG = 'Y'
                        AND P.EZCANCELFLAG         = '0'
                        AND P.GLBL_CMPY_CD         = TP.GLBL_CMPY_CD
                        AND P.DS_CTAC_PNT_TP_CD    = TP.DS_CTAC_PNT_TP_CD
                        AND TP.EZCANCELFLAG        = '0'
                        GROUP BY
                            P.GLBL_CMPY_CD
                            ,P.CTAC_PSN_PK
                            ,TP.DS_CTAC_PNT_TP_CD
                    ) B
                    ,DS_CTAC_PNT P2
                WHERE
                    P2.GLBL_CMPY_CD       = #glblCmpyCd#
                AND P2.EZCANCELFLAG   = '0'
                AND P2.GLBL_CMPY_CD   = B.GLBL_CMPY_CD
                AND P2.DS_CTAC_PNT_PK = B.DS_CTAC_PNT_PK
                GROUP BY
                    B.CTAC_PSN_PK
            ) A
        WHERE
            A.CTAC_PSN_PK = RESULT.CTAC_PSN_PK
        ORDER BY
            RESULT.DS_ACCT_NM
            <isNull property="acctSrch">
            ,RESULT.LINE_ADDR
            </isNull>
            ,RESULT.SORT_NUM
            ,RESULT.CTAC_TP_DESC_TXT
            ,RESULT.DS_CTAC_PSN_TTL_NM
            ,RESULT.CTAC_PSN_FIRST_NM
            ,RESULT.CTAC_PSN_LAST_NM
        <!-- 2019/03/20 QC#30808-1 Add End -->
    </statement>

    <statement id="getDsCtacPnt" parameterClass="Map" resultMap="result.getDsCtacPnt">
        SELECT * 
        FROM
        (
            SELECT
                DCP.DS_CTAC_PNT_PK
              , DCP.DS_CTAC_PNT_TP_CD
              , DCP.DS_CTAC_PNT_VAL_TXT
              , DCP.DS_CTAC_PSN_EXTN_NUM
              , DCP.DS_OPS_OUT_FLG
              , DCP.DS_CTAC_PNT_ACTV_FLG
            FROM
                DS_CTAC_PNT DCP
            WHERE
                DCP.GLBL_CMPY_CD = #glblCmpyCd#
            AND DCP.CTAC_PSN_PK  = #ctacPsnPk#
            AND DCP.EZCANCELFLAG = '0'
        )
        WHERE
            ROWNUM &lt;= #rowNum#
    </statement>

    <resultMap id="result.getContact"  class="NMAL6770_ASMsg">
        <result property="ctacPsnPk_A1"        column="CTAC_PSN_PK"          javaType="EZDSStringItem"/>
        <result property="ctacPsnNum_A1"       column="CTAC_PSN_NUM"         javaType="EZDSStringItem"/>
        <result property="dsAcctNum_A1"        column="SELL_TO_CUST_CD"      javaType="EZDSStringItem"/>
        <result property="dsAcctNm_A1"         column="DS_ACCT_NM"           javaType="EZDSStringItem"/>
        <result property="xxDplyByItemNm_A1"   column="LINE_ADDR"            javaType="EZDSStringItem"/>
        <result property="locNum_A1"           column="LOC_NUM"              javaType="EZDSStringItem"/>
        <result property="dsLocNm_A1"          column="DS_LOC_NM"            javaType="EZDSStringItem"/>
        <result property="ctacTpCd_A1"         column="CTAC_TP_CD"           javaType="EZDSStringItem"/>
        <!-- START 2017/12/06 Hd.Sugawara [QC#21897,MOD] -->
        <!-- <result property="ctacTpNm_A1"         column="CTAC_TP_NM"           javaType="EZDSStringItem"/> -->
        <result property="ctacTpDescTxt_A1"    column="CTAC_TP_DESC_TXT"     javaType="EZDSStringItem"/>
        <!-- END 2017/12/06 Hd.Sugawara [QC#21897,MOD] -->
        <result property="ctacPsnFirstNm_A1"   column="CTAC_PSN_FIRST_NM"    javaType="EZDSStringItem"/>
        <result property="ctacPsnLastNm_A1"    column="CTAC_PSN_LAST_NM"     javaType="EZDSStringItem"/>
        <result property="dsCtacPsnSaltNm_A1"  column="DS_CTAC_PSN_SALT_NM"  javaType="EZDSStringItem"/>
        <result property="dsCtacPsnTtlCd_A1"   column="DS_CTAC_PSN_TTL_CD"   javaType="EZDSStringItem"/>
        <result property="dsCtacPsnTtlNm_A1"   column="DS_CTAC_PSN_TTL_NM"   javaType="EZDSStringItem"/>
        <result property="dsCtacPntValTxt_A1"  column="PHONE"                javaType="EZDSStringItem"/>
        <result property="dsCtacPsnExtnNum_A1" column="EXT"                  javaType="EZDSStringItem"/>
        <result property="dsCtacPntValTxt_A2"  column="EMAIL"                javaType="EZDSStringItem"/>
        <result property="dsCtacPntValTxt_A3"  column="FAX"                  javaType="EZDSStringItem"/>
        <result property="dsCtacPntValTxt_A4"  column="ASSISTANT"            javaType="EZDSStringItem"/>
        <result property="dsCtacPntValTxt_A5"  column="MOBILE"               javaType="EZDSStringItem"/>
        <result property="dsCtacPntPk_A1"      column="PHONE_PK"             javaType="EZDSBigDecimalItem"/>
        <result property="dsCtacPntPk_A2"      column="EMAIL_PK"             javaType="EZDSBigDecimalItem"/>
        <result property="dsCtacPntPk_A3"      column="FAX_PK"               javaType="EZDSBigDecimalItem"/>
        <result property="dsCtacPntTpNm_A1"    column="DS_CTAC_PNT_TP_NM"    javaType="EZDSStringItem"/>
        <result property="ctacPsnCmntTxt_A1"   column="CTAC_PSN_CMNT_TXT"    javaType="EZDSStringItem"/>
        <result property="billToCustCd_A1"     column="BILL_TO_CUST_CD"      javaType="EZDSStringItem"/>
        <!-- 2018/02/28 S21_NA#21075 Add Start -->
        <result property="shipToCustCd_A1"     column="SHIP_TO_CUST_CD"      javaType="EZDSStringItem"/>
        <!-- 2018/02/28 S21_NA#21075 Add End -->
        <result property="dsAcctNum_A2"        column="SELL_TO_CUST_CD2"     javaType="EZDSStringItem"/>
        <result property="dsAcctNm_A2"         column="DS_ACCT_NM2"          javaType="EZDSStringItem"/>
    </resultMap>

    <resultMap id="result.getDsCtacPnt"  class="NMAL6770_PSMsg">
        <result property="dsCtacPntPk_P1"      column="DS_CTAC_PNT_PK"       javaType="EZDSBigDecimalItem"/>
        <result property="dsCtacPntTpCd_P1"    column="DS_CTAC_PNT_TP_CD"    javaType="EZDSStringItem"/>
        <result property="dsCtacPntValTxt_P1"  column="DS_CTAC_PNT_VAL_TXT"  javaType="EZDSStringItem"/>
        <result property="dsCtacPsnExtnNum_P1" column="DS_CTAC_PSN_EXTN_NUM" javaType="EZDSStringItem"/>
        <result property="dsOpsOutFlg_P1"      column="DS_OPS_OUT_FLG"       javaType="EZDSStringItem"/>
        <result property="dsCtacPntActvFlg_P1"  column="DS_CTAC_PNT_ACTV_FLG" javaType="EZDSStringItem"/>
    </resultMap>
    
    <!-- QC#7781 -->
	<statement id="getContactDetail" parameterClass="Map" resultClass="Map">
        SELECT 
              CP.CTAC_PSN_PK
            , CP.CTAC_PSN_NUM
            , NVL(STC.DS_ACCT_NM, STC2.DS_ACCT_NM) DS_ACCT_NM 
            , NVL(STC.SELL_TO_CUST_CD, STC2.SELL_TO_CUST_CD) AS SELL_TO_CUST_CD 
            , CASE WHEN PLW.LOC_NUM IS NOT NULL THEN
                        TRIM(PLW.FIRST_LINE_ADDR || ' ' || PLW.SCD_LINE_ADDR || ' ' || PLW.THIRD_LINE_ADDR || ' ' || PLW.FRTH_LINE_ADDR)
              END AS LINE_ADDR
            , PLW.LOC_NUM
            , PLW.DS_LOC_NM
            , BTC.BILL_TO_CUST_CD
            <!-- 2018/02/28 S21_NA#21075 Add Start -->
            , SHTC.SHIP_TO_CUST_CD
            <!-- 2018/02/28 S21_NA#21075 Add End -->
            , DCPR.CTAC_TP_CD
            <!-- START 2017/12/06 Hd.Sugawara [QC#21897,MOD] -->
            <!-- , CT.CTAC_TP_NM -->
            , CT.CTAC_TP_DESC_TXT
            <!-- END 2017/12/06 Hd.Sugawara [QC#21897,MOD] -->
            , CP.CTAC_PSN_FIRST_NM
            , CP.CTAC_PSN_LAST_NM
            , DCPS.DS_CTAC_PSN_SALT_NM
            , CP.DS_CTAC_PSN_TTL_CD
            , DCPT.DS_CTAC_PSN_TTL_NM
            , CPT.DS_CTAC_PNT_TP_NM
            , CP.CTAC_PSN_CMNT_TXT
            , CPT.DS_CTAC_PNT_TP_NM
            , (
               SELECT P.DS_CTAC_PNT_VAL_TXT 
                 FROM DS_CTAC_PNT P 
                WHERE P.DS_CTAC_PNT_PK = (
                       SELECT MAX(P.DS_CTAC_PNT_PK) FROM DS_CTAC_PNT P 
                        WHERE P.CTAC_PSN_PK = CP.CTAC_PSN_PK AND P.GLBL_CMPY_CD = CP.GLBL_CMPY_CD AND P.EZCANCELFLAG = '0'
                          AND P.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_P#
                       )
              ) AS PHONE
            , (
               SELECT P.DS_CTAC_PSN_EXTN_NUM 
                 FROM DS_CTAC_PNT P 
                WHERE P.DS_CTAC_PNT_PK = (
                       SELECT MAX(P.DS_CTAC_PNT_PK) FROM DS_CTAC_PNT P 
                        WHERE P.CTAC_PSN_PK = CP.CTAC_PSN_PK AND P.GLBL_CMPY_CD = CP.GLBL_CMPY_CD AND P.EZCANCELFLAG = '0'
                          AND P.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_P#
                       )
              ) AS EXT
            , (
               SELECT P.DS_CTAC_PNT_VAL_TXT 
                 FROM DS_CTAC_PNT P 
                WHERE P.DS_CTAC_PNT_PK = (
                       SELECT MAX(P.DS_CTAC_PNT_PK) FROM DS_CTAC_PNT P 
                        WHERE P.CTAC_PSN_PK = CP.CTAC_PSN_PK AND P.GLBL_CMPY_CD = CP.GLBL_CMPY_CD AND P.EZCANCELFLAG = '0'
                          AND P.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_E#
                       )
              ) AS EMAIL
            , (
               SELECT P.DS_CTAC_PNT_VAL_TXT 
                 FROM DS_CTAC_PNT P 
                WHERE P.DS_CTAC_PNT_PK = (
                       SELECT MAX(P.DS_CTAC_PNT_PK) FROM DS_CTAC_PNT P 
                        WHERE P.CTAC_PSN_PK = CP.CTAC_PSN_PK AND P.GLBL_CMPY_CD = CP.GLBL_CMPY_CD AND P.EZCANCELFLAG = '0'
                          AND P.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_F#
                       )
              ) AS FAX
            , (
               SELECT P.DS_CTAC_PNT_VAL_TXT 
                 FROM DS_CTAC_PNT P 
                WHERE P.DS_CTAC_PNT_PK = (
                       SELECT MAX(P.DS_CTAC_PNT_PK) FROM DS_CTAC_PNT P 
                        WHERE P.CTAC_PSN_PK = CP.CTAC_PSN_PK AND P.GLBL_CMPY_CD = CP.GLBL_CMPY_CD AND P.EZCANCELFLAG = '0'
                          AND P.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_A#
                       )
              ) AS ASSISTANT
            , (
               SELECT P.DS_CTAC_PNT_VAL_TXT 
                 FROM DS_CTAC_PNT P 
                WHERE P.DS_CTAC_PNT_PK = (
                       SELECT MAX(P.DS_CTAC_PNT_PK) FROM DS_CTAC_PNT P 
                        WHERE P.CTAC_PSN_PK = CP.CTAC_PSN_PK AND P.GLBL_CMPY_CD = CP.GLBL_CMPY_CD AND P.EZCANCELFLAG = '0'
                          AND P.DS_CTAC_PNT_TP_CD = #dsCtacPntTpCd_M#
                       )
              ) AS MOBILE
        FROM
              CTAC_PSN         CP
            , DS_CTAC_PSN_TTL  DCPT
            , DS_CTAC_PSN_SALT DCPS
            , CTAC_TP          CT
            , DS_CTAC_PNT_TP   CPT
            , DS_CTAC_PSN_RELN DCPR
            , SELL_TO_CUST     STC
            , PTY_LOC_WRK      PLW
            , BILL_TO_CUST     BTC
            <!-- 2018/02/28 S21_NA#21075 Add Start -->
            , SHIP_TO_CUST     SHTC
            <!-- 2018/02/28 S21_NA#21075 Add End -->
            , ACCT_LOC         AL
            , SELL_TO_CUST     STC2
        WHERE
            CP.GLBL_CMPY_CD         = #glblCmpyCd#
        AND CP.EZCANCELFLAG         = '0'
        AND CP.CTAC_PSN_PK          = #ctacPsnPk#
        AND CP.GLBL_CMPY_CD         = DCPT.GLBL_CMPY_CD(+)
        AND CP.DS_CTAC_PSN_TTL_CD   = DCPT.DS_CTAC_PSN_TTL_CD(+)
        AND DCPT.EZCANCELFLAG(+)    = '0'
        AND CP.GLBL_CMPY_CD         = DCPS.GLBL_CMPY_CD(+)
        AND CP.DS_CTAC_PSN_SALT_CD  = DCPS.DS_CTAC_PSN_SALT_CD(+)
        AND DCPS.EZCANCELFLAG(+)    = '0'
        AND CP.GLBL_CMPY_CD         = CPT.GLBL_CMPY_CD(+)
        AND CP.DS_PRIM_CTAC_TP_CD   = CPT.DS_CTAC_PNT_TP_CD(+)
        AND CPT.EZCANCELFLAG(+)     = '0'
        AND CP.GLBL_CMPY_CD         = DCPR.GLBL_CMPY_CD(+)
        AND CP.CTAC_PSN_PK          = DCPR.CTAC_PSN_PK(+)
        AND DCPR.EZCANCELFLAG(+)    = '0'
        AND DCPR.EFF_FROM_DT(+) &lt;= #slsDt#
        AND NVL(DCPR.EFF_THRU_DT(+),'99991231') &gt;= #slsDt#
        AND DCPR.GLBL_CMPY_CD       = STC.GLBL_CMPY_CD(+)
        AND DCPR.DS_ACCT_NUM        = STC.SELL_TO_CUST_CD(+)
        AND STC.EZCANCELFLAG(+)     = '0'
        AND DCPR.GLBL_CMPY_CD       = CT.GLBL_CMPY_CD(+)
        AND DCPR.CTAC_TP_CD         = CT.CTAC_TP_CD(+)
        AND CT.EZCANCELFLAG(+)      = '0'
        AND DCPR.GLBL_CMPY_CD       = PLW.GLBL_CMPY_CD(+)
        AND DCPR.LOC_NUM            = PLW.LOC_NUM(+)
        AND PLW.EZCANCELFLAG(+)     = '0'
        AND PLW.GLBL_CMPY_CD        = BTC.GLBL_CMPY_CD(+)
        AND PLW.LOC_NUM             = BTC.LOC_NUM(+)
        AND BTC.EZCANCELFLAG(+)     = '0'
        <!-- 2018/02/28 S21)NA#21075 Add Start -->
        AND PLW.GLBL_CMPY_CD        = SHTC.GLBL_CMPY_CD(+)
        AND PLW.LOC_NUM             = SHTC.LOC_NUM(+)
        AND SHTC.EZCANCELFLAG(+)    = '0'
        <!-- 2018/02/28 S21)NA#21075 Add End -->
        AND PLW.GLBL_CMPY_CD        = AL.GLBL_CMPY_CD(+)
        AND PLW.LOC_NUM             = AL.LOC_NUM(+)
        <!-- Del Start 2017/09/06 QC#20810 -->
        <!-- AND AL.RGTN_STS_CD(+)       = #rgtnStsCd# -->
        <!-- Del End 2017/09/06 QC#20810 -->
        AND AL.EZCANCELFLAG(+)      = '0'
        AND AL.GLBL_CMPY_CD         = STC2.GLBL_CMPY_CD(+)
        AND AL.DS_ACCT_NUM          = STC2.SELL_TO_CUST_CD(+)
        <!-- Del Start 2017/09/06 QC#20810 -->
        <!-- AND STC2.RGTN_STS_CD(+)     = #rgtnStsCd# -->
        <!-- Del End 2017/09/06 QC#20810 -->
        AND STC2.EZCANCELFLAG(+)    = '0'
 
	</statement>

    <!-- 2018/10/11 QC#27869 Add Start -->
    <statement id="getSvcCatgTpList" parameterClass="Map" resultClass="Map">
        SELECT
            SCT.SVC_CTAC_TP_CD
           ,SCT.SVC_CTAC_TP_DESC_TXT
        FROM
            SVC_CTAC_TP SCT
        WHERE
            SCT.GLBL_CMPY_CD      = #glblCmpyCd#
        AND SCT.EZCANCELFLAG      = '0'
        ORDER BY
            SCT.SVC_CTAC_TP_SORT_NUM
    </statement>
    <!-- 2018/10/11 QC#27869 Add End -->
</sqlMap>
