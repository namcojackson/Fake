<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NPXC001001PoMsg">

    <typeAlias alias="PO_MSGTMsg" type="business.db.PO_MSGTMsg"/>
    
    <statement id="getPoMsg" parameterClass="Map" resultMap="result.getPoMsg">
    SELECT
        EZUPTIME
      , EZUPTIMEZONE
      , GLBL_CMPY_CD
      , PO_MSG_PK
      , PO_ORD_NUM
      , PO_ORD_DTL_LINE_NUM
      , PO_MSG_TP_CD
      , PO_MSG_SEG_ID
      , PO_MSG_TXT
    FROM
        PO_MSG
    WHERE
        PO_ORD_NUM          = #poOrdNum#
    <isNull property="poOrdDtlLineNum">
    AND PO_ORD_DTL_LINE_NUM IS NULL
    </isNull>
    <isNotNull property="poOrdDtlLineNum">
    AND PO_ORD_DTL_LINE_NUM = #poOrdDtlLineNum#
    </isNotNull>
    AND PO_MSG_TP_CD        = #poMsgTpCd#
    AND GLBL_CMPY_CD        = #glblCmpyCd#
    AND EZCANCELFLAG        = '0'
    ORDER BY
        PO_MSG_SEG_ID ASC
    <isEqual property="forUpdate" compareValue="Y">
    FOR UPDATE OF
        PO_MSG_TXT
    </isEqual>
    <isEqual property="noWait" compareValue="Y">
    NOWAIT
    </isEqual>
    </statement>
    
    <resultMap id="result.getPoMsg" class="PO_MSGTMsg">
        <result property="ezUpTime"         column="EZUPTIME"               javaType="EZDTStringItem"/>
        <result property="ezUpTimeZone"     column="EZUPTIMEZONE"           javaType="EZDTStringItem"/>
        <result property="glblCmpyCd"       column="GLBL_CMPY_CD"           javaType="EZDTStringItem"/>
        <result property="poMsgPk"          column="PO_MSG_PK"              javaType="EZDTBigDecimalItem"/>
        <result property="poOrdNum"         column="PO_ORD_NUM"             javaType="EZDTStringItem"/>
        <result property="poOrdDtlLineNum"  column="PO_ORD_DRL_LINE_NUM"    javaType="EZDTStringItem"/>
        <result property="poMsgTpCd"        column="PO_MSG_TP_CD"           javaType="EZDTStringItem"/>
        <result property="poMsgSegId"       column="PO_MSG_SEG_ID"          javaType="EZDTBigDecimalItem"/>
        <result property="poMsgTxt"         column="PO_MSG_TXT"             javaType="EZDTStringItem"/>
    </resultMap>

</sqlMap>
