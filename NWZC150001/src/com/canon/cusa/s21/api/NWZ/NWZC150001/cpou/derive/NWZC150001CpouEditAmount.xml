<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NWZC150001CpouEditAmount">

    <statement id="getSetMaxShpgStsCd" parameterClass="Map" resultClass="String">
        SELECT
               MAX(SH.SHPG_STS_CD)
        FROM
              SHPG_PLN        SH
        WHERE
                SH.GLBL_CMPY_CD            = #glblCmpyCd#
            AND SH.SET_SHPG_PLN_NUM        = #setShpgPlnNum#
            AND SH.SHPG_STS_CD NOT IN ('25','37','39','49','99')
    </statement>


    <statement id="getSetShpgStsCd" parameterClass="Map" resultClass="String">
        SELECT
               SH.SHPG_STS_CD
        FROM
              SHPG_PLN        SH
        WHERE
                SH.GLBL_CMPY_CD            = #glblCmpyCd#
            AND SH.SHPG_PLN_NUM          = #shpgPlnNum#
    </statement>

    <!-- 2017/10/11 S21_NA#21300 Add Start -->
    <statement id="getCantCancelPoData" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            COUNT(*) CNT
        FROM
            PO_DTL PD
        WHERE
                PD.GLBL_CMPY_CD         = #glblCmpyCd#
            AND PD.CPO_ORD_NUM          = #cpoOrdNum#
            AND PD.CPO_DTL_LINE_NUM     = #cpoDtlLineNum#
            AND PD.CPO_DTL_LINE_SUB_NUM = #cpoDtlLineSubNum#
            AND PD.PO_STS_CD NOT IN 
            <iterate property="poStsCdList" var="poStsCd[]" open="(" close=")" conjunction=",">
                #poStsCd[]#
            </iterate>
            AND PD.EZCANCELFLAG         = '0'
    </statement>
    <!-- 2017/10/11 S21_NA#21300 Add End -->
</sqlMap>
