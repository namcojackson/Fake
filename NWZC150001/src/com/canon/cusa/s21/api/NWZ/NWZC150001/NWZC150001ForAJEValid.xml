<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NWZC150001ForAJEValid">

    <typeAlias alias="DS_ORD_LINE_VLD_RULETMsg"                 type="business.db.DS_ORD_LINE_VLD_RULETMsg"/>

    <statement id="getOrdLineVldRule" parameterClass="Map" resultMap="result.getOrdLineVldRule">
        SELECT
            OLVR.GLBL_CMPY_CD
            , OLVR.DS_ORD_LINE_VLD_PRFL_CD
            , OLVR.DS_ORD_LINE_VLD_LINE_NUM
            , OLVR.DS_ORD_VLD_TP_CD
            , OLVR.DS_ORD_VLD_INCL_TP_CD
            , OLVR.DS_ORD_VLD_CLT_TP_CD
            , OLVR.DS_ORD_VLD_ACT_TP_CD
            , OLVR.DS_ORD_ALT_VLD_TRX_CD
            , OLVR.DS_ORD_ALT_VLD_TRX_RSN_CD
            , OLVR.DS_ORD_VLD_ERR_MSG_CD
        FROM
            DS_ORD_LINE_PROC_DFN OLPD
            , AJE_ACCT_BAT AAB
            , DS_ORD_LINE_VLD_PRFL OLVP
            , DS_ORD_LINE_VLD_RULE OLVR
        WHERE
                OLPD.GLBL_CMPY_CD               = #glblCmpyCd#
            AND OLPD.DS_ORD_TP_CD               = #dsOrdTpCd#
            AND OLPD.DS_ORD_LINE_CATG_CD        = #dsOrdLineCatgCd#
            AND OLPD.EZCANCELFLAG               = '0'

            AND OLPD.GLBL_CMPY_CD               = AAB.GLBL_CMPY_CD
            AND OLPD.AJE_ACCT_BAT_CD            = AAB.AJE_ACCT_BAT_CD
            AND AAB.EZCANCELFLAG                = '0'

            AND AAB.GLBL_CMPY_CD                = OLVP.GLBL_CMPY_CD
            AND AAB.AJE_ACCT_BAT_CD                 = OLVP.AJE_ACCT_BAT_CD
            AND OLVP.EZCANCELFLAG               = '0'

            AND OLVP.GLBL_CMPY_CD               = OLVR.GLBL_CMPY_CD
            AND OLVP.DS_ORD_LINE_VLD_PRFL_CD    = OLVR.DS_ORD_LINE_VLD_PRFL_CD
            AND OLVR.EZCANCELFLAG               = '0'
        ORDER BY
            OLVR.DS_ORD_LINE_VLD_LINE_NUM
    </statement>

    <resultMap id="result.getOrdLineVldRule" class="DS_ORD_LINE_VLD_RULETMsg" noCheckSet="True">
        <result property="glblCmpyCd"           column="GLBL_CMPY_CD"               javaType="EZDTStringItem"/>
        <result property="dsOrdLineVldPrflCd"   column="DS_ORD_LINE_VLD_PRFL_CD"    javaType="EZDTStringItem"/>
        <result property="dsOrdLineVldLineNum"  column="DS_ORD_LINE_VLD_LINE_NUM"   javaType="EZDTStringItem"/>
        <result property="dsOrdVldTpCd"         column="DS_ORD_VLD_TP_CD"           javaType="EZDTStringItem"/>
        <result property="dsOrdVldInclTpCd"     column="DS_ORD_VLD_INCL_TP_CD"      javaType="EZDTStringItem"/>
        <result property="dsOrdVldCltTpCd"      column="DS_ORD_VLD_CLT_TP_CD"       javaType="EZDTStringItem"/>
        <result property="dsOrdVldActTpCd"      column="DS_ORD_VLD_ACT_TP_CD"       javaType="EZDTStringItem"/>
        <result property="dsOrdAltVldTrxCd"     column="DS_ORD_ALT_VLD_TRX_CD"      javaType="EZDTStringItem"/>
        <result property="dsOrdAltVldTrxRsnCd"  column="DS_ORD_ALT_VLD_TRX_RSN_CD"  javaType="EZDTStringItem"/>
        <result property="dsOrdVldErrMsgCd"     column="DS_ORD_VLD_ERR_MSG_CD"      javaType="EZDTStringItem"/>
    </resultMap>

    <statement id="getMdseTpValueSetCount" parameterClass="Map" resultMap="BigDecimal">
        SELECT
            MTVS.MDSE_TP_VAL_SET_PK
        FROM
            MDSE_TP_VAL_SET MTVS
        WHERE
                MTVS.GLBL_CMPY_CD       = #glblCmpyCd#
            AND MTVS.MDSE_TP_CTX_TP_CD  = #mdseTpCtxTpCd#
            AND MTVS.COA_MDSE_TP_CD     = #coaMdseTpCd#
            AND MTVS.EZCANCELFLAG       = '0'
    </statement>

    <statement id="getInvtyOwnrTpTpValueSetCount" parameterClass="Map" resultMap="BigDecimal">
        SELECT
            IOVS.INVTY_OWNR_VAL_SET_PK
        FROM
            INVTY_OWNR_VAL_SET IOVS
        WHERE
                IOVS.GLBL_CMPY_CD           = #glblCmpyCd#
            AND IOVS.INVTY_OWNR_CTX_TP_CD   = #invtyOwnrCtxTpCd#
            AND IOVS.INVTY_OWNR_CD          = #invtyOwnrCd#
            AND IOVS.EZCANCELFLAG           = '0'
    </statement>

    <statement id="getMdseValueSetCount" parameterClass="Map" resultMap="BigDecimal">
        SELECT
            MVS.MDSE_VAL_SET_PK
        FROM
            MDSE_VAL_SET MVS
        WHERE
                MVS.GLBL_CMPY_CD    = #glblCmpyCd#
            AND MVS.MDSE_CTX_TP_CD  = #mdseCtxTpCd#
            AND MVS.MDSE_CD         IN (
                #mdseCd#
                , #ordTakeMdseCd#
            )
            AND MVS.EZCANCELFLAG    = '0'
    </statement>
</sqlMap>
