<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NWZC150001CpouInsRecRecord">

    <statement id="getBizProcLogPk" parameterClass="Map" resultClass="Map">
        SELECT
             MAX(A.BIZ_PROC_LOG_PK) AS BIZ_PROC_LOG_PK
            ,A.DOC_ID
        FROM
            BIZ_PROC_LOG A
        WHERE
                A.PRNT_DOC_ID        = #prntDocId#
            AND    A.EVENT_ID            = #eventId#
            <isNotNull property="docId">
            AND A.DOC_ID            = #docId#
            </isNotNull>
            <isNull property="docId">
            AND A.DOC_ID            IS NULL
            </isNull>
            AND    A.SUB_SYS_ID        = #subSysId#
            AND A.PROC_ID            = #procId#
            AND A.DOC_TP_CD            = #docTpCd#
            <isNotNull property="ezUpUserID"> <!-- 2017/06/06 S21_NA#18869 Add isNotNull -->
            AND A.EZUPUSERID        = #ezUpUserID#
            </isNotNull>
            <isNotNull property="ezUpTimeZone"> <!-- 2017/06/06 S21_NA#18869 Add isNotNull -->
            AND A.EZUPTIMEZONE      = #ezUpTimeZone#
            </isNotNull>
            <isNotNull property="ezUpTime"> <!-- 2017/06/06 S21_NA#18869 Add isNotNull -->
            AND A.EZUPTIME        <![CDATA[>=]]> #ezUpTime#
            </isNotNull>
        GROUP BY
            A.DOC_ID
    </statement>

</sqlMap>
