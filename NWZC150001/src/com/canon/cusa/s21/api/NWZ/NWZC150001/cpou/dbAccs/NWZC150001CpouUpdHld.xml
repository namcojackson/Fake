<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NWZC150001CpouUpdHld">

    <statement id="getCreditHldList" parameterClass="Map" resultClass="Map">
        SELECT
            H.HLD_RSN_CD
          , HR.HLD_RSN_NM
          , H.CPO_ORD_NUM
          , H.CPO_DTL_LINE_NUM
          , H.CPO_DTL_LINE_SUB_NUM
          , H.SHPG_PLN_NUM
          , H.HLD_QTY
          , HR.HLD_LVL_CD
          , H.HLD_PK
        
        FROM
            HLD_RSN    HR
          , HLD     H

        WHERE
              HR.GLBL_CMPY_CD = #glblCmpyCd#
          AND HR.EZCANCELFLAG = '0'
          AND HR.HLD_TP_CD    = #creditHoldTp# -- CREDIT_HOLD
          
          AND H.GLBL_CMPY_CD  = HR.GLBL_CMPY_CD
          AND H.EZCANCELFLAG  = '0'
          AND H.HLD_RSN_CD    = HR.HLD_RSN_CD
          AND H.CPO_ORD_NUM   = #cpoOrdNum#
          
        ORDER BY
            H.HLD_RSN_CD
          , H.CPO_ORD_NUM
          , H.CPO_DTL_LINE_NUM
          , H.CPO_DTL_LINE_SUB_NUM
          , H.SHPG_PLN_NUM
    </statement>

    <statement id="getShpgPlnNumList" parameterClass="Map" resultClass="String"><!-- cpouUpdHld -->
        SELECT
          SHPG_PLN_NUM

        FROM
          SHPG_PLN

        WHERE
              GLBL_CMPY_CD = #glblCmpyCd#
          AND EZCANCELFLAG = '0'
          AND TRX_HDR_NUM  = #trxHdrNum#
          <isNotNull property="shpgStsCds">
          AND SHPG_STS_CD IN (
              <iterate property="shpgStsSet" var="shpgSts[]" open="" close="" conjunction=",">
              #shpgSts[]#
              </iterate>
          )
          </isNotNull>
    </statement>    

    <statement id="getCreateHldRsnList" parameterClass="Map" resultClass="String">
        SELECT
            HR.HLD_RSN_CD
        FROM
             HLD_RSN      HR
            ,HLD_PROC_DFN HP
        WHERE
                HR.HLD_TP_CD           = #hldTpCdSH#
            AND HR.HLD_LVL_CD          = #hldLvlCdSP#
            AND HR.NIGHT_BAT_FLG       = #nightBatFlg#
            AND HR.DTM_BAT_FLG         = #dtmBatFlg#
            AND HP.CHK_PNT_ORD_VLD_FLG = #chkPntOrdVldFlg#
            AND HP.HLD_RSN_CD   = HR.HLD_RSN_CD
            AND HR.GLBL_CMPY_CD = #glblCmpyCd#
            AND HR.GLBL_CMPY_CD = HP.GLBL_CMPY_CD
            AND HR.EZCANCELFLAG = '0'
            AND HP.EZCANCELFLAG = '0'
    </statement>

</sqlMap>
