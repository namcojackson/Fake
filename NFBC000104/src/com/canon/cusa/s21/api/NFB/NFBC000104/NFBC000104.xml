<?xml version="1.0" encoding="UTF-8"?>
<sqlMap namespace="NFBC000104">

	<statement id="getVndPmtTermByCode" parameterClass="Map">
		SELECT 
		  VND_PMT_TERM_CD,
		  CLO_FROM_DAY,
		  CLO_THRU_DAY,
		  VND_PMT_TERM_NM,
		  PAY_DT_FIX_FLG,
		  PAY_DAY,
		  PAY_MTH_AOT,
		  PAY_DAY_AOT
		FROM VND_PMT_TERM
		WHERE ezcancelflag = '0'
		AND glbl_cmpy_cd = #glblCmpyCd#
		AND VND_PMT_TERM_CD = #vndPmtTermCd#
		AND ( 
		  PAY_DT_FIX_FLG = 'N'
		  OR (
		    PAY_DT_FIX_FLG = 'Y'
		    AND to_number(CLO_FROM_DAY) &lt;= to_number(CLO_THRU_DAY) 
		    AND to_number(CLO_FROM_DAY) &lt;= to_number(#inputDt#)
		    AND to_number(CLO_THRU_DAY) &gt;= to_number(#inputDt#)
		  ) 
		  OR (
		    PAY_DT_FIX_FLG = 'Y'
		    AND to_number(CLO_FROM_DAY) &gt; to_number(CLO_THRU_DAY) 
		    AND ( 
		    	to_number(CLO_FROM_DAY) &lt;= to_number(#inputDt#) 
		    	OR to_number(CLO_THRU_DAY) &gt;= to_number(#inputDt#) 
		    ) 
		  )
		)
	</statement>
	
</sqlMap>
