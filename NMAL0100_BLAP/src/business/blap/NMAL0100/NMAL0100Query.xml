<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NMAL0100Query">
    <!-- Item Status Pull Down List -->
    <statement id ="getItemStatusList" parameterClass="Map"  resultClass="Map">
        SELECT 
            MIS.MDSE_ITEM_STS_CD 
           ,MIS.MDSE_ITEM_STS_NM
        FROM 
            MDSE_ITEM_STS MIS
        WHERE 
            MIS.EZCANCELFLAG = '0'
        AND MIS.GLBL_CMPY_CD = #glblCmpyCd#
        ORDER BY
            MIS.MDSE_ITEM_STS_SORT_NUM
           ,MIS.MDSE_ITEM_STS_CD
    </statement>

    <!-- Planning Group Pull Down List -->
    <statement id ="getPlanningGroupList" parameterClass="Map"  resultClass="Map">
        SELECT 
            PG.PRCH_GRP_CD 
           ,PG.PRCH_GRP_NM
        FROM 
            PRCH_GRP PG
        WHERE 
            PG.EZCANCELFLAG = '0'
        AND PG.GLBL_CMPY_CD = #glblCmpyCd#
    </statement>

    <!-- Product Level Label Name -->
    <statement id ="getProductLevelName" parameterClass="Map"  resultClass="Map">
        SELECT 
            MSET.MDSE_STRU_ELMNT_TP_CD
           ,MSET.MDSE_STRU_ELMNT_TP_DESC_TXT MDSE_STRU_ELMNT_TP_NM
        FROM 
            MDSE_STRU_ELMNT_TP MSET
        WHERE 
            MSET.EZCANCELFLAG = '0'
        AND MSET.GLBL_CMPY_CD = #glblCmpyCd#
    </statement>

    <!-- Search -->
    <statement id ="search" parameterClass="Map" resultClass="Map">
        SELECT * FROM (
        SELECT 
            M.MDSE_CD
           ,M.MDSE_DESC_SHORT_TXT
           ,M.MNF_ITEM_CD
           ,M.MDSE_ITEM_TP_CD
           ,MIT.MDSE_ITEM_TP_NM
           ,M.MDSE_ITEM_CLS_TP_CD
           ,MICT.MDSE_ITEM_CLS_TP_NM
           ,M.COA_MDSE_TP_CD
           ,CMT.COA_PROJ_DESC_TXT
           ,M.COA_PROD_CD
           ,CP.COA_PROD_NM
           ,M.MDSE_ITEM_STS_CD
           ,MIS.MDSE_ITEM_STS_NM
           ,M.MKT_MDL_CD
           ,MM.MKT_MDL_NM
           ,M.MKT_MDL_SEG_CD
           ,MMS.MKT_MDL_SEG_NM
           ,M.ZEROTH_PROD_CTRL_CD
           ,M.ZEROTH_PROD_CTRL_NM
           ,M.FIRST_PROD_CTRL_CD
           ,M.FIRST_PROD_CTRL_NM
           ,M.SCD_PROD_CTRL_CD
           ,M.SCD_PROD_CTRL_NM
           ,M.THIRD_PROD_CTRL_CD
           ,M.THIRD_PROD_CTRL_NM
           ,M.FRTH_PROD_CTRL_CD
           ,M.FRTH_PROD_CTRL_NM
           ,M.MDSE_ITEM_MNF_CD
           ,MIM.MDSE_ITEM_MNF_NM
           ,M.UPC_CD
           ,M.MDSE_ITEM_ACTV_DT
           ,M.PRCH_GRP_CD
           ,PG.PRCH_GRP_NM
           ,M.MDSE_PRC_GRP_CD
           ,MPG.MDSE_PRC_GRP_NM
           ,M.MDSE_DESC_LONG_TXT
           ,'' MDSE_CRAT_TMPL_NM
           ,M.SLS_MAT_GRP_CD_01
           ,SMG1.SLS_MAT_GRP_DESC_TXT SLS_MAT_GRP_DESC_TXT_01
           ,M.SLS_MAT_GRP_CD_02
           ,SMG2.SLS_MAT_GRP_DESC_TXT SLS_MAT_GRP_DESC_TXT_02
           ,M.SLS_MAT_GRP_CD_03
           ,SMG3.SLS_MAT_GRP_DESC_TXT SLS_MAT_GRP_DESC_TXT_03
           ,M.DS_CMSN_GRP_CD
           ,DCG.DS_CMSN_GRP_DESC_TXT
        FROM 
            MDSE             M
           ,COA_PROD         CP
           ,PRCH_GRP         PG
           ,MDSE_PRC_GRP     MPG
           ,MDSE_ITEM_TP     MIT
           ,COA_PROJ         CMT
           ,MDSE_ITEM_STS    MIS
           ,MKT_MDL          MM
           ,MKT_MDL_SEG      MMS
           ,MDSE_ITEM_CLS_TP MICT
           ,MDSE_ITEM_MNF    MIM
           ,SLS_MAT_GRP      SMG1
           ,SLS_MAT_GRP      SMG2
           ,SLS_MAT_GRP      SMG3
           ,DS_CMSN_GRP      DCG
        WHERE 
            M.EZCANCELFLAG          = '0'
        AND M.GLBL_CMPY_CD          = #glblCmpyCd#
        AND M.EZCANCELFLAG          = CP.EZCANCELFLAG (+)
        AND M.GLBL_CMPY_CD          = CP.GLBL_CMPY_CD (+)
        AND M.COA_PROD_CD           = CP.COA_PROD_CD (+)
        AND M.EZCANCELFLAG        = PG.EZCANCELFLAG (+)
        AND M.GLBL_CMPY_CD        = PG.GLBL_CMPY_CD (+)
        AND M.PRCH_GRP_CD         = PG.PRCH_GRP_CD (+)
        AND M.EZCANCELFLAG        = MPG.EZCANCELFLAG (+)
        AND M.GLBL_CMPY_CD        = MPG.GLBL_CMPY_CD (+)
        AND M.MDSE_PRC_GRP_CD     = MPG.MDSE_PRC_GRP_CD (+)
        AND M.EZCANCELFLAG        = MIT.EZCANCELFLAG (+)
        AND M.GLBL_CMPY_CD        = MIT.GLBL_CMPY_CD (+)
        AND M.MDSE_ITEM_TP_CD     = MIT.MDSE_ITEM_TP_CD (+)
        AND M.EZCANCELFLAG        = CMT.EZCANCELFLAG (+)
        AND M.GLBL_CMPY_CD        = CMT.GLBL_CMPY_CD (+)
        AND M.COA_MDSE_TP_CD      = CMT.COA_PROJ_CD (+)
        AND M.EZCANCELFLAG        = MIS.EZCANCELFLAG (+)
        AND M.GLBL_CMPY_CD        = MIS.GLBL_CMPY_CD (+)
        AND M.MDSE_ITEM_STS_CD    = MIS.MDSE_ITEM_STS_CD (+)
        AND M.EZCANCELFLAG        = MM.EZCANCELFLAG (+)
        AND M.GLBL_CMPY_CD        = MM.GLBL_CMPY_CD (+)
        AND M.MKT_MDL_CD          = MM.MKT_MDL_CD (+)
        AND M.EZCANCELFLAG        = MMS.EZCANCELFLAG (+)
        AND M.GLBL_CMPY_CD        = MMS.GLBL_CMPY_CD (+)
        AND M.MKT_MDL_SEG_CD      = MMS.MKT_MDL_SEG_CD (+)
        AND M.EZCANCELFLAG        = MICT.EZCANCELFLAG (+)
        AND M.GLBL_CMPY_CD        = MICT.GLBL_CMPY_CD (+)
        AND M.MDSE_ITEM_CLS_TP_CD = MICT.MDSE_ITEM_CLS_TP_CD (+)
        AND M.EZCANCELFLAG        = MIM.EZCANCELFLAG (+)
        AND M.GLBL_CMPY_CD        = MIM.GLBL_CMPY_CD (+)
        AND M.MDSE_ITEM_MNF_CD    = MIM.MDSE_ITEM_MNF_CD (+)
        AND M.EZCANCELFLAG        = SMG1.EZCANCELFLAG (+)
        AND M.GLBL_CMPY_CD        = SMG1.GLBL_CMPY_CD (+)
        AND M.SLS_MAT_GRP_CD_01   = SMG1.SLS_MAT_GRP_CD (+)
        AND M.EZCANCELFLAG        = SMG2.EZCANCELFLAG (+)
        AND M.GLBL_CMPY_CD        = SMG2.GLBL_CMPY_CD (+)
        AND M.SLS_MAT_GRP_CD_02   = SMG2.SLS_MAT_GRP_CD (+)
        AND M.EZCANCELFLAG        = SMG3.EZCANCELFLAG (+)
        AND M.GLBL_CMPY_CD        = SMG3.GLBL_CMPY_CD (+)
        AND M.SLS_MAT_GRP_CD_03   = SMG3.SLS_MAT_GRP_CD (+)
        AND M.EZCANCELFLAG        = DCG.EZCANCELFLAG (+)
        AND M.GLBL_CMPY_CD        = DCG.GLBL_CMPY_CD (+)
        AND M.DS_CMSN_GRP_CD      = DCG.DS_CMSN_GRP_CD (+)
        <isNotNull property="mdseCd">
        <!-- 2018/08/31 QC#27942 Mod Start -->
        <!-- AND UPPER(M.MDSE_CD) like UPPER(#mdseCd#) -->
        AND M.MDSE_CD like UPPER(#mdseCd#)
        <!-- 2018/08/31 QC#27942 Mod End -->
        </isNotNull>
        <isNotNull property="mdseDescShortTxt">
        AND UPPER(M.MDSE_DESC_SHORT_TXT) like UPPER(#mdseDescShortTxt#)
        </isNotNull>
        <!-- MANUFACTURER -->
        <!-- 2019/10/18 QC#53815 Mod Start -->
        <!-- <isNotNull property="mdseItemMnfCd"> -->
        <!-- AND M.MDSE_ITEM_MNF_CD = #mdseItemMnfCd# -->
        <isNotNull property="mdseItemMnfNm">
        AND UPPER(MIM.MDSE_ITEM_MNF_NM) like UPPER(#mdseItemMnfNm#)
        <!-- 2019/10/18 QC#53815 Mod End -->
        </isNotNull>
        <!-- MANUFACTURER ITEM # -->
        <isNotNull property="mnfItemCd">
        AND M.MNF_ITEM_CD like #mnfItemCd#
        </isNotNull>
        <!-- UPC CODE -->
        <isNotNull property="upcCd">
        AND M.UPC_CD like #upcCd#
        </isNotNull>
        <!-- STATUS -->
        <isNotNull property="mdseItemStsCd">
        AND M.MDSE_ITEM_STS_CD = #mdseItemStsCd#
        </isNotNull>
        <!-- LONG DESCRIPTION -->
        <isNotNull property="mdseDescLongTxt">
        AND UPPER(M.MDSE_DESC_LONG_TXT) like UPPER(#mdseDescLongTxt#)
        </isNotNull>
        <!-- IMPLEMENTATION DATE -->
        <isNotNull property="mdseItemActvDtFrom">
        AND M.MDSE_ITEM_ACTV_DT &gt;= #mdseItemActvDtFrom#
        </isNotNull>
        <isNotNull property="mdseItemActvDtTo">
        AND M.MDSE_ITEM_ACTV_DT &lt;= #mdseItemActvDtTo#
        </isNotNull>
        <!-- ITEM TYPE -->
        <isNotNull property="mdseItemTpCd">
        AND M.MDSE_ITEM_TP_CD = #mdseItemTpCd#
        </isNotNull>
        <!-- ITEM CLASSIFICATION -->
        <isNotNull property="mdseItemClsTpCd">
        AND M.MDSE_ITEM_CLS_TP_CD = #mdseItemClsTpCd#
        </isNotNull>
        <!-- MERCHANDISE TYPE -->
        <isNotNull property="coaMdseTpCd">
        AND M.COA_MDSE_TP_CD like #coaMdseTpCd#
        </isNotNull>
        <!-- PRODUCT CODE -->
        <isNotNull property="coaProdCd">
        AND M.COA_PROD_CD like #coaProdCd#
        </isNotNull>
        <!-- PLANNING GROUP -->
        <isNotNull property="prchGrpCd">
        AND M.PRCH_GRP_CD = #prchGrpCd#
        </isNotNull>
        <!-- PRICING GROUP -->
        <isNotNull property="mdsePrcGrpCd">
        AND M.MDSE_PRC_GRP_CD = #mdsePrcGrpCd#
        </isNotNull>
        <!-- MARKETING MODEL -->
        <isNotNull property="mktMdlCd">
        AND M.MKT_MDL_CD like #mktMdlCd#
        </isNotNull>
        <!-- MARKETING SEGMENT -->
        <isNotNull property="mktMdlSegCd">
        AND M.MKT_MDL_SEG_CD like #mktMdlSegCd#
        </isNotNull>
        <!-- PRODUCT LEVEL 1 -->
        <isNotNull property="zerothProdCtrlNm">
        AND UPPER(M.ZEROTH_PROD_CTRL_NM) like UPPER(#zerothProdCtrlNm#)
        </isNotNull>
        <!-- PRODUCT LEVEL 2 -->
        <isNotNull property="firstProdCtrlNm">
        AND UPPER(M.FIRST_PROD_CTRL_NM) like UPPER(#firstProdCtrlNm#)
        </isNotNull>
        <!-- PRODUCT LEVEL 3 -->
        <isNotNull property="scdProdCtrlNm">
        AND UPPER(M.SCD_PROD_CTRL_NM) like UPPER(#scdProdCtrlNm#)
        </isNotNull>
        <!-- PRODUCT LEVEL 4 -->
        <isNotNull property="thirdProdCtrlNm">
        AND UPPER(M.THIRD_PROD_CTRL_NM) like UPPER(#thirdProdCtrlNm#)
        </isNotNull>
        <!-- PRODUCT LEVEL 5 -->
        <isNotNull property="frthProdCtrlNm">
        AND UPPER(M.FRTH_PROD_CTRL_NM) like UPPER(#frthProdCtrlNm#)
        </isNotNull>
        <!-- Material Group 1 -->
        <isNotNull property="slsMatGrpDescTxt_01">
        AND UPPER(SMG1.SLS_MAT_GRP_DESC_TXT) like UPPER(#slsMatGrpDescTxt_01#)
        </isNotNull>
        <!-- Material Group 2 -->
        <isNotNull property="slsMatGrpDescTxt_02">
        AND UPPER(SMG2.SLS_MAT_GRP_DESC_TXT) like UPPER(#slsMatGrpDescTxt_02#)
        </isNotNull>
        <!-- Material Group 3 -->
        <isNotNull property="slsMatGrpDescTxt_03">
        AND UPPER(SMG3.SLS_MAT_GRP_DESC_TXT) like UPPER(#slsMatGrpDescTxt_03#)
        </isNotNull>
        <!-- Commision Group -->
        <isNotNull property="dsCmsnGrpDescTxt">
        AND UPPER(DCG.DS_CMSN_GRP_DESC_TXT) like UPPER(#dsCmsnGrpDescTxt#)
        </isNotNull>
        <isNotNull property="thirdPtyItemFlg_Y">
            <isNull property="thirdPtyItemFlg_N">
        AND M.THIRD_PTY_ITEM_FLG = #thirdPtyItemFlg_Y#
            </isNull>
        </isNotNull>
        <isNotNull property="thirdPtyItemFlg_N">
            <isNull property="thirdPtyItemFlg_Y">
        AND M.THIRD_PTY_ITEM_FLG = #thirdPtyItemFlg_N#
            </isNull>
        </isNotNull>
        ORDER BY M.MDSE_CD
        ) TMP
        WHERE ROWNUM &lt;= #rowNum#
    </statement>

    <statement id="getSavedSearchOptionList" parameterClass="Map" resultClass="Map">
        SELECT
                  SSO.SRCH_OPT_PK
                , SSO.SRCH_OPT_NM
            FROM
                SAVE_SRCH_OPT SSO 
            WHERE
                SSO.GLBL_CMPY_CD        = #glblCmpyCd#
                AND SSO.SRCH_OPT_APL_ID = #srchOptAplId#
                AND SSO.SRCH_OPT_USR_ID = #srchOptUsrId#
                AND SSO.EZCANCELFLAG    = '0'
            ORDER BY
                  SSO.SRCH_OPT_NM
    </statement>
    <statement id ="getThirdProdHrch" parameterClass="Map"  resultClass="Map">
        SELECT
             PC3.PROD_CTRL_CD AS THIRD_PROD_CTRL_CD
            ,PC3.PROD_CTRL_DESC_TXT AS THIRD_PROD_CTRL_DESC_TXT
            ,PC2.PROD_CTRL_CD AS SCD_PROD_CTRL_CD
            ,PC2.PROD_CTRL_DESC_TXT AS SCD_PROD_CTRL_DESC_TXT
        FROM
            PROD_CTRL PC3
            ,PROD_CTRL PC2
        WHERE
                PC3.GLBL_CMPY_CD = 'ADB'
            AND PC3.EZCANCELFLAG = '0'
            AND PC3.PROD_CTRL_CD = #thirdProdCtrlCd#
            AND PC3.MDSE_STRU_ELMNT_TP_CD = #mdseStruElmntTpCdPL3#

            AND PC3.GLBL_CMPY_CD = PC2.GLBL_CMPY_CD
            AND PC3.EZCANCELFLAG = PC2.EZCANCELFLAG
            AND PC3.SCD_PROD_HRCH_CD = PC2.PROD_CTRL_CD
            AND PC2.MDSE_STRU_ELMNT_TP_CD  = #mdseStruElmntTpCdPL2#
    </statement>

</sqlMap>
