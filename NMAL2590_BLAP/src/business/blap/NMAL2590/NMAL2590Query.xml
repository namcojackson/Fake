<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NMAL2590Query">

    <typeAlias alias="NMAL2590SMsg"    type="business.blap.NMAL2590.NMAL2590SMsg"/>
    <typeAlias alias="NMAL2590_ASMsg"  type="business.blap.NMAL2590.NMAL2590_ASMsg"/>
    <resultMap id="result.searchList" class="NMAL2590_ASMsg">
        <result property="ctyAddr_A"   column="CTY_ADDR"        javaType="EZDSStringItem"/>
        <result property="stCd_A"      column="ST_CD"           javaType="EZDSStringItem"/>
        <result property="postCd_A"    column="POST_CD"         javaType="EZDSStringItem"/>
        <result property="cntyNm_A"    column="CNTY_NM"         javaType="EZDSStringItem"/>
    </resultMap>

    <statement id="searchList" parameterClass="Map"  resultMap="result.searchList">
        SELECT
            PST.CTY_ADDR  AS CTY_ADDR
           ,PST.ST_CD     AS ST_CD
           ,PST.POST_CD   AS POST_CD
           ,CTY.CNTY_NM   AS CNTY_NM
        FROM
              POST           PST
            , CNTY_POST_RELN CPR
            , CNTY           CTY
        WHERE
                PST.GLBL_CMPY_CD  = #glblCmpyCd#
            <isNotNull property="postCd" >
            AND PST.POST_CD    LIKE #postCd#
            </isNotNull>
            <isNotNull property="ctyAddr" >
            AND PST.CTY_ADDR   LIKE #ctyAddr#
            </isNotNull>
            <isNotNull property="stCd" >
            AND PST.ST_CD      LIKE #stCd#
            </isNotNull>
            AND PST.EZCANCELFLAG  = '0'
            AND PST.GLBL_CMPY_CD  = CPR.GLBL_CMPY_CD
            AND PST.POST_PK       = CPR.POST_PK
            AND CPR.EZCANCELFLAG  = '0'
            AND CPR.GLBL_CMPY_CD  = CTY.GLBL_CMPY_CD
            AND CPR.CNTY_PK       = CTY.CNTY_PK
            <isNotNull property="cntyNm" >
            AND CTY.CNTY_NM    LIKE #cntyNm#
            </isNotNull>
            AND CTY.EZCANCELFLAG  = '0'
        ORDER BY
              PST.CTY_ADDR
            , PST.ST_CD
            , PST.POST_CD
            , CTY.CNTY_NM
    </statement>

</sqlMap>
