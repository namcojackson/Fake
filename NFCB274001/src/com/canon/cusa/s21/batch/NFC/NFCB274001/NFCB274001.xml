<!--<?xml version="1.0" encoding="UTF-8"?>-->
<sqlMap namespace="NFCB274001">
    <statement id="getArTrxBal" parameterClass="Map">
     SELECT
          X.AR_TRX_BAL_PK
         ,X.BILL_TO_CUST_ACCT_CD
         ,X.BILL_TO_CUST_CD
         ,X.AR_TRX_TP_CD
         ,X.AR_TRX_NUM
         ,X.SELL_TO_CUST_CD
     FROM
         (SELECT
              ATB.AR_TRX_BAL_PK
             ,ATB.BILL_TO_CUST_ACCT_CD
             ,ATB.BILL_TO_CUST_CD
             ,ATB.AR_TRX_TP_CD
             ,ATB.AR_TRX_NUM
             ,BTC.SELL_TO_CUST_CD
          FROM
              AR_TRX_BAL   ATB
             ,BILL_TO_CUST BTC

          WHERE
                  ATB.GLBL_CMPY_CD         = #glblCmpyCd#
              AND ATB.AR_CASH_APPLY_STS_CD IN (#arCashAppStsUnApp#, #arCashAppStsPart#)
              AND ATB.BILL_TO_CUST_CD      = BTC.BILL_TO_CUST_CD
              AND ATB.EZCANCELFLAG         = '0'

              AND BTC.GLBL_CMPY_CD         = ATB.GLBL_CMPY_CD
              AND BTC.SELL_TO_CUST_CD      &lt;&gt; ATB.BILL_TO_CUST_ACCT_CD
              AND BTC.EFF_FROM_DT      &lt;= #batProcDate#
              AND NVL(BTC.EFF_THRU_DT, #maxEndDate#)    &gt;= #batProcDate#
              AND BTC.EZCANCELFLAG         = '0'

           ) X
     ORDER BY
         X.AR_TRX_NUM
    </statement>
</sqlMap>
