<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NLZC211001">

    <!-- ==== Type Aliases ==== -->
    <typeAlias alias="SHPG_ORD_CONF_DTLTMsg" type="business.db.SHPG_ORD_CONF_DTLTMsg"/>
    <typeAlias alias="SHPG_ORD_DTLTMsg"      type="business.db.SHPG_ORD_DTLTMsg"/>
    <!-- 06/14/2010 D.Fukaya append start -->
    <typeAlias alias="SHPG_ORD_MSGTMsg"     type="business.db.SHPG_ORD_MSGTMsg"/>
    <!-- 06/14/2010 D.Fukaya append end -->
    <!-- 12/08/2010 D.Fukaya append start -->
    <typeAlias alias="ShpgSvcInfo"      type="com.canon.cusa.s21.api.NLZ.NLZC211001.ShpgSvcInfo"/>
    <typeAlias alias="TRNSP_LTTMsg"     type="business.db.TRNSP_LTTMsg"/>
    <typeAlias alias="AREA_LEAD_TMTMsg" type="business.db.AREA_LEAD_TMTMsg"/>
    <!-- 12/08/2010 D.Fukaya append end -->
    <!-- 02/07/2011 D.Fukaya append start -->
    <typeAlias alias="CPOTMsg"            type="business.db.CPOTMsg"/>
    <typeAlias alias="SHPG_ORDTMsg"        type="business.db.SHPG_ORDTMsg"/>
    <!-- 02/07/2011 D.Fukaya append end -->
    <!-- START 2020/10/06 A.Marte [QC#59155,ADD] -->
    <typeAlias alias="SVC_MACH_MSTRTMsg"            type="business.db.SVC_MACH_MSTRTMsg"/>
    <!-- START 2020/10/06 A.Marte [QC#59155,ADD] -->

    <!-- ==== Result Mapping ==== -->
    <resultMap id="result.ShpgSvcLeadTm"    class="ShpgSvcInfo">
        <result property="delyLeadAot" column="DELY_LEAD_AOT"  javaType="BigDecimal"/>
        <result property="shpgSvcTpCd" column="SHPG_SVC_TP_CD" javaType="String"/>
    </resultMap>

    <resultMap id="result.TRNSP_LTTMsg"     class="TRNSP_LTTMsg">
        <result property="trnspLtAot"  column="TRNSP_LT_AOT"   javaType="EZDTBigDecimalItem"/>
    </resultMap>

    <resultMap id="result.AREA_LEAD_TMTMsg" class="AREA_LEAD_TMTMsg">
        <result property="delyLeadAot" column="DELY_LEAD_AOT"  javaType="EZDTBigDecimalItem"/>
    </resultMap>
    <!-- 12/08/2010 D.Fukaya append end -->

    <statement id="getShpgOrdConfWrk" parameterClass="Map">
        SELECT
            SOCW.GLBL_CMPY_CD
            ,SOCW.SO_NUM
            ,SOCW.WRK_TRX_ID
            ,SOCW.SQ_ID
            ,SOCW.PROC_STS_CD
            ,SOCW.ERR_MSG_CD
            ,SOCW.WH_CD
            ,SOCW.SCE_ORD_TP_CD
            ,SOCW.S80_ORD_TP_CD
            ,SOCW.SO_PROC_STS_CD
            ,SOCW.SO_DATA_ACT_TP_CD
            ,SOCW.SHIP_DT_TM_TS
            ,SOCW.TOT_SHIP_WT
            ,SOCW.TOT_FRT_AMT
            ,SOCW.SRC_TP_CD
        FROM
            SHPG_ORD_CONF_WRK SOCW
        WHERE
            SOCW.GLBL_CMPY_CD = #glblCmpyCd#
            AND SOCW.WRK_TRX_ID = #wrkTrxId#
            AND SOCW.SO_NUM = #soNum#
            AND SOCW.PROC_STS_CD = #procStsCd#
            AND SOCW.EZCANCELFLAG = '0'
    </statement>

    <statement id="getShpgOrdDtlCnt" parameterClass="Map">
        SELECT
            COUNT(SOD.SO_NUM) CNT
        FROM
            SHPG_ORD_DTL SOD
        WHERE
            SOD.GLBL_CMPY_CD = #glblCmpyCd#
            AND SOD.SO_NUM = #soNum#
            AND SOD.SHIP_QTY &gt; 0
            AND SOD.EZCANCELFLAG = '0'
    </statement>

    <statement id="getShpgOrdConfDtlWrk" parameterClass="Map">
        SELECT
            SOCDW.GLBL_CMPY_CD
            ,SOCDW.SO_NUM
            ,SOCDW.SO_SLP_NUM
            ,SOCDW.WRK_TRX_ID
            ,SOCDW.SQ_ID
            ,SOCDW.PRO_NUM
            ,SOCDW.VND_CD
            ,SOCDW.PROC_STS_CD
            ,SOCDW.ERR_MSG_CD
            ,SOCDW.MDSE_CD
            ,SOCDW.WH_CD
            ,SOCDW.FROM_STK_STS_CD
            ,SOCDW.S80_STK_STS_CD
            ,SOCDW.BOL_NUM
            ,SOCDW.TOT_SHIP_WT
            ,SOCDW.TOT_FRT_AMT
            ,SOCDW.SHIP_QTY
            ,SOCDW.SO_DATA_ACT_TP_CD
            ,SOCDW.SO_PROC_STS_CD
            ,SOCDW.SRC_TP_CD
            ,SOCDW.UCC128_CD
            ,SOCDW.SHIP_DT_TM_TS
            ,SOCDW.SHPG_SVC_LVL_CD
        FROM
            SHPG_ORD_CONF_DTL_WRK SOCDW
        WHERE
            SOCDW.GLBL_CMPY_CD = #glblCmpyCd#
            AND SOCDW.WRK_TRX_ID = #wrkTrxId#
            AND SOCDW.SO_NUM = #soNum#
            AND SOCDW.PROC_STS_CD = #procStsCd#
            AND SOCDW.EZCANCELFLAG = '0'
        ORDER BY 
            WH_CD, MDSE_CD, FROM_STK_STS_CD, S80_STK_STS_CD
    </statement>

    <statement id="getShipSerNumWrk" parameterClass="Map">
        SELECT
            SSNW.GLBL_CMPY_CD
            ,SSNW.SO_NUM
            ,SSNW.WRK_TRX_ID
            ,SSNW.SQ_ID
            ,SSNW.PROC_STS_CD
            ,SSNW.ERR_MSG_CD
            ,SSNW.MDSE_CD
            ,SSNW.WH_CD
            ,SSNW.SO_SER_ID
            ,SSNW.SER_NUM
            ,SSNW.SER_TAKE_DT_TM_TS
            ,SSNW.SO_SLP_NUM
            ,SSNW.SER_INTFC_PROC_STS_CD
            ,SSNW.SER_INTFC_ERR_CD
            ,SSNW.SRC_TP_CD
        FROM
            SHIP_SER_NUM_WRK SSNW
        WHERE
            SSNW.GLBL_CMPY_CD = #glblCmpyCd#
            AND SSNW.WRK_TRX_ID = #wrkTrxId#
            AND SSNW.SO_NUM = #soNum#
            AND SSNW.PROC_STS_CD = #procStsCd#
            AND SSNW.EZCANCELFLAG = '0'
        ORDER BY MDSE_CD
    </statement>

	<!-- 2010/09/21 D.Fukaya delete start -->
	<!--
	<statement id="getShipSerNumCntBySerNum" parameterClass="Map">
		SELECT
			COUNT(SER_NUM) AS CNT
		FROM
			SHIP_SER_NUM
		WHERE
			GLBL_CMPY_CD = #glblCmpyCd#
			AND SER_NUM = #serNum#
			AND MDSE_CD = #mdseCd#
			AND EZCANCELFLAG = '0'
	</statement>
	-->
	<!-- 2010/09/21 D.Fukaya delete end -->

    <!-- 2010/09/21 D.Fukaya append start -->
    <statement id="getSerNumForDuplicationChk" parameterClass="Map" resultClass="Map">
        SELECT
            SSN.SER_NUM
            ,'' AS SER_EVENT_CD
        FROM
            SHIP_SER_NUM SSN
        WHERE
            SSN.GLBL_CMPY_CD = #glblCmpyCd#
            AND SSN.SER_NUM = #serNum#
            AND SSN.MDSE_CD = #mdseCd#
            AND SSN.SER_INTFC_PROC_STS_CD = #procStsCd#
            AND SSN.EZCANCELFLAG = '0'

        UNION

        SELECT
            SESW.SER_NUM
            ,SESW.SER_EVENT_CD
        FROM
            SER_EVENT_STS_WRK SESW
        WHERE
            SESW.GLBL_CMPY_CD = #glblCmpyCd#
            AND SESW.SER_NUM = #serNum#
            AND SESW.MDSE_CD = #mdseCd#
            AND SESW.PROC_STS_CD = #procStsCd#
            AND SESW.EZCANCELFLAG = '0'

        UNION

        SELECT
            SES.SER_NUM
            ,SES.SER_EVENT_CD
        FROM
            SER_EVENT_STS SES
        WHERE
            SES.GLBL_CMPY_CD = #glblCmpyCd#
            AND SES.SER_NUM = #serNum#
            AND SES.MDSE_CD = #mdseCd#
            AND SES.EZCANCELFLAG = '0'
    </statement>
    <!-- 2010/09/21 D.Fukaya append end -->

    <statement id="getShipSerNumCntBySoNum" parameterClass="Map">
        SELECT
            COUNT(SSM.SER_NUM) AS CNT
        FROM
            SHIP_SER_NUM SSM
        WHERE
            SSM.GLBL_CMPY_CD = #glblCmpyCd#
            AND SSM.SO_NUM = #soNum#
            AND SSM.SO_SLP_NUM = #soSlpNum#
            AND SSM.EZCANCELFLAG = '0'
    </statement>

    <statement id="getMdseSerNumRng" parameterClass="Map" resultClass="Map">
        SELECT
            MSNR.MDSE_CD
            ,MSNR.FROM_SER_NUM
            ,MSNR.THRU_SER_NUM
        FROM
            MDSE_SER_NUM_RNG MSNR
        WHERE
            MSNR.GLBL_CMPY_CD = #glblCmpyCd#
            AND MSNR.MDSE_CD = #mdseCd#
            AND MSNR.EZCANCELFLAG = '0'
    </statement>

    <statement id="getMdseSerNumRngLngth" parameterClass="Map">
        SELECT
            LENGTH(MSNR.FROM_SER_NUM) FROM_SER_NUM,
            LENGTH(MSNR.THRU_SER_NUM) THRU_SER_NUM
        FROM
            MDSE_SER_NUM_RNG MSNR
        WHERE
            MSNR.GLBL_CMPY_CD = #glblCmpyCd#
            AND MSNR.MDSE_CD = #mdseCd#
            AND MSNR.EZCANCELFLAG = '0'
    </statement>

    <statement id="getMdseSerNumRngCnt" parameterClass="Map">
        SELECT
            COUNT(MSNR.MDSE_CD) AS CNT
        FROM
            MDSE_SER_NUM_RNG MSNR
        WHERE
            MSNR.GLBL_CMPY_CD = #glblCmpyCd#
            AND MSNR.MDSE_CD = #mdseCd#
            AND #serNum# BETWEEN MSNR.FROM_SER_NUM AND MSNR.THRU_SER_NUM
            AND MSNR.EZCANCELFLAG = '0'
    </statement>

    <statement id="getBolRelenCnt" parameterClass="Map">
        SELECT
            COUNT(BR.BOL_NUM) AS CNT
        FROM
            BOL_RELN BR
        WHERE
            BR.GLBL_CMPY_CD = #glblCmpyCd#
            AND BR.WH_CD = #whCd#
            AND BR.BOL_NUM = #bolNum#
            <isNotNull property="proNum">
                AND BR.PRO_NUM = #proNum#
            </isNotNull>
            <isNull property="proNum">
                AND BR.PRO_NUM IS NULL
            </isNull>
            <isNotNull property="carrCd">
            AND BR.CARR_CD = #carrCd#
            </isNotNull>
            <isNull property="carrCd">
                AND BR.CARR_CD IS NULL
            </isNull>
            AND BR.EZCANCELFLAG = '0'
    </statement>

    <statement id="getBolRelenMaxSqNum" parameterClass="Map">
        SELECT
            MAX(TO_NUMBER(BR.BOL_SQ_NUM)) AS BOL_SQ_NUM
        FROM
            BOL_RELN BR
        WHERE
            BR.GLBL_CMPY_CD = #glblCmpyCd#
            AND BR.WH_CD = #whCd#
            AND BR.BOL_NUM = #bolNum#
            AND BR.EZCANCELFLAG = '0'
    </statement>

    <statement id="getShpgOrdDtlByShpgStsCd" parameterClass="Map" resultMap="result.SHPG_ORD_DTLTMsg">
        SELECT
            SOD.GLBL_CMPY_CD
            ,SOD.SO_NUM
            ,SOD.SO_SLP_NUM
            ,SOD.MDSE_CD
            ,SOD.FROM_STK_STS_CD
            ,SOD.SHIP_QTY
            ,SOD.SYS_SRC_CD
            ,SOD.PRCH_REQ_NUM
            ,SOD.PRCH_REQ_LINE_NUM
            ,SOD.PRCH_REQ_LINE_SUB_NUM
            ,SOD.TO_INVTY_LOC_CD
            ,SOD.INVTY_LOC_CD
        FROM
            SHPG_ORD_DTL SOD
        WHERE
            SOD.GLBL_CMPY_CD = #glblCmpyCd#
            AND SOD.SO_NUM = #soNum#
            <isNotNull property="list">
                <iterate property="list" var="shpgStsCd[]" open="AND (" close=")" conjunction="OR">
                    SOD.SHPG_STS_CD = #shpgStsCd[]#
                </iterate>
            </isNotNull>
            AND SOD.EZCANCELFLAG = '0'
    </statement>

    <resultMap id="result.SHPG_ORD_DTLTMsg" class="SHPG_ORD_DTLTMsg">
        <result property="glblCmpyCd"         column="GLBL_CMPY_CD"                 javaType="EZDTStringItem"/>
        <result property="soNum"              column="SO_NUM"                       javaType="EZDTStringItem"/>
        <result property="soSlpNum"           column="SO_SLP_NUM"                   javaType="EZDTStringItem"/>
        <result property="mdseCd"             column="MDSE_CD"                      javaType="EZDTStringItem"/>
        <result property="fromStkStsCd"       column="FROM_STK_STS_CD"              javaType="EZDTStringItem"/>
        <result property="shipQty"            column="SHIP_QTY"                     javaType="EZDTBigDecimalItem"/>
        <result property="sysSrcCd"           column="SYS_SRC_CD"                   javaType="EZDTStringItem"/>
        <result property="prchReqNum"         column="PRCH_REQ_NUM"                 javaType="EZDTStringItem"/>
        <result property="prchReqLineNum"     column="PRCH_REQ_LINE_NUM"            javaType="EZDTStringItem"/>
        <result property="prchReqLineSubNum"  column="PRCH_REQ_LINE_SUB_NUM"        javaType="EZDTBigDecimalItem"/>
        <result property="toInvtyLocCd"       column="TO_INVTY_LOC_CD"              javaType="EZDTStringItem"/>
        <result property="invtyLocCd"         column="INVTY_LOC_CD"                 javaType="EZDTStringItem"/>
    </resultMap>

    <!-- 06/14/2010 D.Fukaya append start -->
    <statement id="getShpgOrdMsgList" parameterClass="Map" resultMap="result.SHPG_ORD_MSGTMsg">
        SELECT
            SOM.SO_MSG_DESC_TXT
        FROM
            SHPG_ORD_MSG SOM
        WHERE
            SOM.GLBL_CMPY_CD = #glblCmpyCd#
            AND SOM.SO_NUM = #soNum#
            AND SOM.SO_MSG_TP_CD = #soMsgTpCd#
            AND SOM.EZCANCELFLAG = '0'
        ORDER BY
            TXT_SQ_NUM
    </statement>

    <resultMap id="result.SHPG_ORD_MSGTMsg" class="SHPG_ORD_MSGTMsg">
        <result property="soMsgDescTxt" column="SO_MSG_DESC_TXT" javaType="EZDTStringItem"/>
    </resultMap>
    <!-- 06/14/2010 D.Fukaya append end -->

    <statement id="getShpgOrdDtl" parameterClass="Map">
        SELECT
            SOD.GLBL_CMPY_CD
           ,SOD.SHPG_STS_CD
           ,SOD.TRX_HDR_NUM
           ,SOD.TRX_LINE_NUM
           ,SOD.MDSE_CD
           ,SOD.FROM_STK_STS_CD
           ,SOD.SHIP_QTY
           ,SOD.SYS_SRC_CD
        FROM
            SHPG_ORD_DTL SOD
        WHERE
            SOD.GLBL_CMPY_CD = #glblCmpyCd#
        AND SOD.SO_NUM       = #soNum#
        AND SOD.EZCANCELFLAG = '0'
    </statement>

    <statement id="getRwsHdr" parameterClass="Map">
        <isNotEqual property="sceOrdTpCd" compareValue="RP">
        SELECT
            RH.GLBL_CMPY_CD
            ,RH.RWS_NUM
        FROM
            RWS_HDR RH
        WHERE
            RH.GLBL_CMPY_CD = #glblCmpyCd#
            <!-- 2022/04/11 K.Iwamoto Mod QC#59904 START -->
            <isNotNull property="rwsRefNum">
            AND RH.RWS_REF_NUM = #rwsRefNum#
            </isNotNull>
            AND RH.WH_CD = #whCd#
            <isNotNull property="poRcvTrxHdrNum">
            AND RH.PO_RCV_TRX_HDR_NUM = #poRcvTrxHdrNum#
            </isNotNull>
            <isNotNull property="trxOrdNum">
            AND RH.TRX_ORD_NUM = #trxOrdNum#
            </isNotNull>
            <isNotNull property="svcConfigMstrPk">
            AND RH.SVC_CONFIG_MSTR_PK = #svcConfigMstrPk#
            </isNotNull>
            <isNull property="svcConfigMstrPk">
            AND RH.SVC_CONFIG_MSTR_PK IS NULL
            </isNull>
            <isNotNull property="srcOrdNum">
            AND RH.SRC_ORD_NUM = #srcOrdNum#
            </isNotNull>
            <!-- 2022/04/11 K.Iwamoto Mod QC#59904 END -->
            <isNotNull property="list">
                <iterate property="list" var="rwsStsCd[]" open="AND (" close=")" conjunction="OR">
                    RH.RWS_STS_CD = #rwsStsCd[]#
                </iterate>
            </isNotNull>
            AND RH.EZCANCELFLAG = '0'
        </isNotEqual>
        <isEqual property="sceOrdTpCd" compareValue="RP">
        SELECT DISTINCT
              RH.GLBL_CMPY_CD
             ,RH.RWS_NUM
         FROM
              SHPG_ORD_DTL    DSOD
             ,RWS_HDR         RH
             ,PRCH_REQ_DTL    PRD
             ,PO_DTL          DPD
         WHERE
             DSOD.GLBL_CMPY_CD            = #glblCmpyCd#
         AND DSOD.SO_NUM                  = #soNum#
         AND PRD.GLBL_CMPY_CD             = DSOD.GLBL_CMPY_CD
         AND PRD.PRCH_REQ_NUM             = DSOD.PRCH_REQ_NUM
         AND PRD.PRCH_REQ_LINE_NUM        = DSOD.PRCH_REQ_LINE_NUM
         AND PRD.PRCH_REQ_LINE_SUB_NUM    = DSOD.PRCH_REQ_LINE_SUB_NUM
         AND PRD.EZCANCELFLAG             = '0'
         AND DPD.GLBL_CMPY_CD             = PRD.GLBL_CMPY_CD
         AND DPD.PO_ORD_NUM               = PRD.PO_ORD_NUM
         AND DPD.PO_ORD_DTL_LINE_NUM      = PRD.PO_ORD_DTL_LINE_NUM
         AND DPD.EZCANCELFLAG             = '0'
         AND DPD.GLBL_CMPY_CD             = PRD.GLBL_CMPY_CD
         AND RH.PO_RCV_TRX_HDR_NUM        = PRD.PO_ORD_NUM
         AND RH.WH_CD                     = DPD.DEST_RTL_WH_CD
         AND RH.EZCANCELFLAG              = '0'
        </isEqual>
    </statement>

    <statement id="getMaxSoSerId" parameterClass="Map">
        SELECT
            MAX(TO_NUMBER(SSN.SO_SER_ID)) SO_SER_ID
        FROM
            SHIP_SER_NUM SSN
        WHERE
            SSN.GLBL_CMPY_CD = #glblCmpyCd#
        AND SSN.SO_NUM       = #soNum#
        AND SSN.MDSE_CD      = #mdseCd#
    </statement>

    <statement id="getShpgOrdConfDtlWrkShipQty" parameterClass="Map">
        SELECT
            SUM(SOCDW.SHIP_QTY) AS SHIP_QTY
        FROM
            SHPG_ORD_CONF_DTL_WRK SOCDW
        WHERE
            SOCDW.GLBL_CMPY_CD = #glblCmpyCd#
        AND SOCDW.WRK_TRX_ID   = #wrkTrxId#
        AND SOCDW.SO_NUM       = #soNum#
        AND SOCDW.SO_SLP_NUM   = #soSlpNum#
        AND SOCDW.EZCANCELFLAG = '0'
    </statement>

    <statement id="getShipSerNumWrkCnt" parameterClass="Map">
        SELECT
            COUNT(SSNW.SO_NUM) AS CNT
        FROM
            SHIP_SER_NUM_WRK SSNW
        WHERE
            SSNW.GLBL_CMPY_CD = #glblCmpyCd#
        AND SSNW.WRK_TRX_ID   = #wrkTrxId#
        AND SSNW.SO_NUM       = #soNum#
        AND SSNW.SO_SLP_NUM   = #soSlpNum#
        AND SSNW.EZCANCELFLAG = '0'
    </statement>

    <statement id="getShpgOrdConfDtl" parameterClass="Map" resultMap="result.SHPG_ORD_CONF_DTLTMsg">
        SELECT
            SOCD.GLBL_CMPY_CD
           ,SOCD.SO_NUM
           ,SOCD.SO_SLP_NUM
           ,SOCD.WH_CD
           ,SOCD.MDSE_CD
           ,SOCD.FROM_STK_STS_CD
           ,SOCD.VND_CD
           ,SOCD.BOL_NUM
           ,SOCD.PRO_NUM
           ,SOCD.SHIP_QTY
           ,SOCD.TOT_FRT_AMT
           ,SOCD.FRT_RELN_FLG
           ,SOCD.SHIP_DT_TM_TS
           ,SOCD.SHPG_SVC_LVL_CD
        FROM
            SHPG_ORD_CONF_DTL SOCD
        WHERE
            SOCD.GLBL_CMPY_CD   = #glblCmpyCd#
        AND SOCD.SO_NUM         = #soNum#
        <isNotNull property="soSlpNum">
        AND SOCD.SO_SLP_NUM     = #soSlpNum#
        </isNotNull>
        <isNotNull property="mdseCd">
        AND SOCD.MDSE_CD        = #mdseCd#
        </isNotNull>
        <isNotNull property="soProcStsCd">
        AND SOCD.SO_PROC_STS_CD = #soProcStsCd#
        </isNotNull>
        AND SOCD.EZCANCELFLAG = '0'
        ORDER BY
            SHIP_DT_TM_TS
           ,SO_SLP_NUM
    </statement>

    <resultMap id="result.SHPG_ORD_CONF_DTLTMsg" class="SHPG_ORD_CONF_DTLTMsg">
        <result property="glblCmpyCd"   column="GLBL_CMPY_CD"    javaType="EZDTStringItem"/>
        <result property="soNum"        column="SO_NUM"          javaType="EZDTStringItem"/>
        <result property="soSlpNum"     column="SO_SLP_NUM"      javaType="EZDTStringItem"/>
        <result property="whCd"         column="WH_CD"           javaType="EZDTStringItem"/>
        <result property="mdseCd"       column="MDSE_CD"         javaType="EZDTStringItem"/>
        <result property="fromStkStsCd" column="FROM_STK_STS_CD" javaType="EZDTStringItem"/>
        <result property="vndCd"        column="VND_CD"          javaType="EZDTStringItem"/>
        <result property="bolNum"       column="BOL_NUM"         javaType="EZDTStringItem"/>
        <result property="proNum"       column="PRO_NUM"         javaType="EZDTStringItem"/>
        <result property="shipQty"      column="SHIP_QTY"        javaType="EZDTBigDecimalItem"/>
        <result property="totFrtAmt"    column="TOT_FRT_AMT"     javaType="EZDTBigDecimalItem"/>
        <result property="frtRelnFlg"   column="FRT_RELN_FLG"    javaType="EZDTStringItem"/>
        <result property="shipDtTmTs"   column="SHIP_DT_TM_TS"   javaType="EZDTStringItem"/>
        <result property="shpgSvcLvlCd" column="SHPG_SVC_LVL_CD" javaType="EZDTStringItem"/>
    </resultMap>

    <statement id="getShpgOrdDtlLineNum" parameterClass="SHPG_ORD_DTLTMsg" resultMap="result2.SHPG_ORD_DTLTMsg">
        SELECT
            SOD.TRX_LINE_NUM
            ,SOD.TRX_LINE_SUB_NUM
        FROM
            SHPG_ORD_DTL SOD
        WHERE
            SOD.GLBL_CMPY_CD = #glblCmpyCd#
            AND SOD.SO_NUM = #soNum#
            AND SOD.EZCANCELFLAG = '0'
    </statement>

    <resultMap id="result2.SHPG_ORD_DTLTMsg" class="SHPG_ORD_DTLTMsg">
        <result property="trxLineNum"       column="TRX_LINE_NUM"        javaType="EZDTStringItem"/>
        <result property="trxLineSubNum"    column="TRX_LINE_SUB_NUM"    javaType="EZDTStringItem"/>
    </resultMap>

    <!-- 12/08/2010 D.Fukaya append start -->
    <statement id="getAsnData" parameterClass="Map">
        SELECT
            SOC.GLBL_CMPY_CD
            ,SOC.SHIP_DT_TM_TS
            ,SOC.SO_NUM
            ,SOCD.SO_SLP_NUM
            ,SOCD.WH_CD
            ,DECODE(SOCD.PRO_NUM, '*', null, SOCD.PRO_NUM) AS PRO_NUM
            ,SOCD.VND_CD
            ,SOCD.BOL_NUM
            ,SOCD.MDSE_CD
            ,SOCD.SHIP_QTY
            ,SOCD.TOT_FRT_AMT
            ,SOCD.FROM_STK_STS_CD
            ,SOCD.TOT_SHIP_WT
            ,SOCD.SO_DATA_ACT_TP_CD
            ,SOCD.SO_PROC_STS_CD
            ,SOCD.FRT_RELN_FLG
            ,SOD.SHPG_PLN_NUM
        FROM 
            SHPG_ORD_CONF SOC
            ,SHPG_ORD_CONF_DTL SOCD
            ,SHPG_ORD_DTL SOD
        WHERE
            SOC.GLBL_CMPY_CD = SOCD.GLBL_CMPY_CD
        AND SOC.SO_NUM = SOCD.SO_NUM
        AND SOCD.GLBL_CMPY_CD = SOD.GLBL_CMPY_CD
        AND SOCD.SO_NUM = SOD.SO_NUM
        AND SOCD.SO_SLP_NUM = SOD.SO_SLP_NUM
        AND SOC.GLBL_CMPY_CD = #glblCmpyCd#
        AND SOC.SO_NUM = #soNum#
        AND SOC.EZCANCELFLAG = '0'
        AND SOCD.EZCANCELFLAG = '0'
        AND SOD.EZCANCELFLAG = '0'
        ORDER BY SOC.SO_NUM, SOCD.SO_SLP_NUM
    </statement>

    <statement id="getCntOfTrdPtnrForThreeLevelStruFile" parameterClass="Map">
        SELECT
            COUNT(C.EDI_TRD_PTNR_CD) AS CNT
        FROM
            SHPG_ORD A
            ,CPO B
            ,TRD_PTNR_LOC_X_REF C
            ,TRD_PTNR_TRX_ATTRB D
        WHERE
            
            A.GLBL_CMPY_CD = B.GLBL_CMPY_CD
            AND A.TRX_HDR_NUM = B.CPO_ORD_NUM
            AND A.GLBL_CMPY_CD = C.GLBL_CMPY_CD
            AND (
                        (A.SHIP_TO_CUST_CD = C.SELL_TO_SHIP_TO_CUST_CD AND C.EDI_CUST_TP_CD = #ediCustTpShipTo#)
                    OR  (A.SELL_TO_CUST_CD = C.SELL_TO_SHIP_TO_CUST_CD AND C.EDI_CUST_TP_CD = #ediCustTpSellTo#)
                )
            AND C.GLBL_CMPY_CD = D.GLBL_CMPY_CD
            AND C.EDI_TRD_PTNR_CD = D.EDI_TRD_PTNR_CD
            AND D.ANSI_TRX_NUM = #ansiTrxNumEDI856#
            AND D.TRD_PTNR_ASN_STRU_LVL_NUM = #trdPtnrAsnStruLvlNum3#
            AND (
                        B.CPO_SRC_TP_CD = #cpoSrcTpEDI#
                    OR  (B.CPO_SRC_TP_CD = #cpoSrcTpOrderEntryScreen# AND D.SEND_EDI_INV_MAN_ORD_FLG = 'Y')
                    OR  (B.CPO_SRC_TP_CD IN (#cpoSrcTpCPNet#,#cpoSrcTpCNA#) AND D.SEND_EDI_INV_ENET_ORD_FLG = 'Y')
            )
            AND A.GLBL_CMPY_CD = #glblCmpyCd#
            AND A.SO_NUM = #soNum#
            AND A.EZCANCELFLAG = '0'
            AND B.EZCANCELFLAG = '0'
            AND C.EZCANCELFLAG = '0'
            AND D.EZCANCELFLAG = '0'
    </statement>

    <statement id="getMinShpgModeCd" parameterClass="Map" resultClass="String">
        SELECT
            SHS.SHPG_MODE_CD
        FROM
            SHPG_SVC SHS
        WHERE
            SHS.GLBL_CMPY_CD     = #glblCmpyCd#
        AND SHS.SHPG_SVC_LVL_CD  = #shpgSvcLvlCd#
        AND SHS.FRT_CHRG_TO_CD   = #frtChrgToCd#
        AND SHS.FRT_CHRG_METH_CD = #frtChrgMethCd#
        AND SHS.EZCANCELFLAG     = '0'
        ORDER BY
            SHS.SHIP_PRTY
    </statement>

    <statement id="getShpgModeCdListFromShpgWt" parameterClass="Map" resultClass="String">
        SELECT
            SW.SHPG_MODE_CD
        FROM
            SHPG_WT SW
        WHERE
            SW.GLBL_CMPY_CD     = #glblCmpyCd#
        AND SW.FRT_CHRG_TO_CD   = #frtChrgToCd#
        AND SW.FRT_CHRG_METH_CD = #frtChrgMethCd#
        AND #effDt# BETWEEN EFF_FROM_DT AND EFF_THRU_DT
        AND SW.EZCANCELFLAG     = '0'
        ORDER BY
            TRANS_MAX_WT DESC
    </statement>

    <statement id="getShpgSvcLeadTm" parameterClass="Map" resultMap="result.ShpgSvcLeadTm">
        SELECT
            SLT.DELY_LEAD_AOT
          , SSL.SHPG_SVC_TP_CD
        FROM
            SHPG_SVC_LEAD_TM SLT
          , SHPG_SVC_LVL     SSL
        WHERE
            SLT.GLBL_CMPY_CD    = SSL.GLBL_CMPY_CD
        AND SLT.SHPG_SVC_LVL_CD = SSL.SHPG_SVC_LVL_CD
        AND SLT.GLBL_CMPY_CD    = #glblCmpyCd#
        AND SLT.SHPG_SVC_LVL_CD = #shpgSvcLvlCd#
        AND SLT.EZCANCELFLAG    = '0'
        AND SSL.EZCANCELFLAG    = '0'
    </statement>

    <statement id="getTrnspLt" parameterClass="Map" resultMap="result.TRNSP_LTTMsg">
        SELECT
            TL.TRNSP_LT_AOT
        FROM
            TRNSP_LT TL
        WHERE
            TL.GLBL_CMPY_CD =     #glblCmpyCd#
        AND TL.WH_CD        =     #whCd#
        AND TL.ST_CD        =     #shipToStCd#
        AND TL.SHPG_MODE_CD =     #shpgModeCd#
        AND TL.FROM_ZIP_CD  &lt;= #shipToPostCd#
        AND TL.TO_ZIP_CD    &gt;= #shipToPostCd#
        AND TL.EFF_FROM_DT  &lt;= #salesDate#
        AND TL.EFF_THRU_DT  &gt;= #salesDate#
        AND TL.EZCANCELFLAG =     '0'
    </statement>

    <statement id="getAreaLeadTm" parameterClass="Map" resultMap="result.AREA_LEAD_TMTMsg">
        SELECT
            ALT.DELY_LEAD_AOT
        FROM
            AREA_LEAD_TM ALT
        WHERE
            ALT.GLBL_CMPY_CD =     #glblCmpyCd#
        AND ALT.WH_CD        =     #whCd#
        AND ALT.ST_CD        =     #shipToStCd#
        AND ALT.SHPG_MODE_CD =     #shpgModeCd#
        AND ALT.EFF_FROM_DT  &lt;= #salesDate#
        AND ALT.EFF_THRU_DT  &gt;= #salesDate#
        AND ALT.EZCANCELFLAG =     '0'
    </statement>
    <!-- 12/08/2010 D.Fukaya append end -->

    <!-- 02/07/2011 D.Fukaya append start -->
    <statement id="getCpoInfo" parameterClass="SHPG_ORDTMsg" resultMap="result.CPOTMsg">
        SELECT
            C.CPO_ORD_TP_CD
        FROM
            CPO      C
           ,SHPG_ORD SO
        WHERE
            C.GLBL_CMPY_CD  = SO.GLBL_CMPY_CD
        AND C.CPO_ORD_NUM   = SO.TRX_HDR_NUM
        AND C.GLBL_CMPY_CD  = #glblCmpyCd#
        AND SO.SO_NUM       = #soNum#
        AND C.EZCANCELFLAG  = '0'
        AND SO.EZCANCELFLAG = '0'
    </statement>

    <resultMap id="result.CPOTMsg" class="CPOTMsg">
        <result property="cpoOrdTpCd"        column="CPO_ORD_TP_CD"        javaType="EZDTStringItem"/>
    </resultMap>
    <!-- 02/07/2011 D.Fukaya append end -->

    <statement id="countDsCondConst" parameterClass="Map" resultClass="Integer">
        SELECT
            COUNT(*)
        FROM
            DS_COND_CONST DCC
        WHERE
            DCC.GLBL_CMPY_CD             = #glblCmpyCd#
        AND DCC.DS_COND_CONST_GRP_ID     = #dsCondConstGrpId#
        AND DCC.DS_COND_CONST_CD         = #dsCondConstCd#
        <isNotNull property="constValTxt01">
        AND DCC.DS_COND_CONST_VAL_TXT_01 = #constValTxt01#
        </isNotNull>
        <isNotNull property="constValTxt02">
        AND DCC.DS_COND_CONST_VAL_TXT_02 = #constValTxt02#
        </isNotNull>
        <isNotNull property="constValTxt03">
        AND DCC.DS_COND_CONST_VAL_TXT_03 = #constValTxt03#
        </isNotNull>
        <isNotNull property="constValTxt04">
        AND DCC.DS_COND_CONST_VAL_TXT_04 = #constValTxt04#
        </isNotNull>
        <isNotNull property="constValTxt05">
        AND DCC.DS_COND_CONST_VAL_TXT_05 = #constValTxt05#
        </isNotNull>
        AND DCC.EZCANCELFLAG             = '0'
    </statement>

    <statement id="getSvcMachMstrPkFromSoSer" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            SMM.SVC_MACH_MSTR_PK
        FROM
             SO_SER SS
            ,SVC_MACH_MSTR SMM
        WHERE
            SS.GLBL_CMPY_CD      = #glblCmpyCd#
        AND SS.SO_NUM            = #soNum#
        AND SS.SO_SLP_NUM        = #soSlpNum#
        AND SS.EZCANCELFLAG      = '0'
        AND SMM.GLBL_CMPY_CD     = SS.GLBL_CMPY_CD
        AND SMM.SVC_MACH_MSTR_PK = SS.SVC_MACH_MSTR_PK
        AND SMM.TRX_HDR_NUM      = #trxHdrNum#
        AND SMM.TRX_LINE_NUM     = #trxLineNum#
        AND SMM.TRX_LINE_SUB_NUM = #trxLineSubNum#
        AND SMM.EZCANCELFLAG     = '0'
        <isNotNull property="notExistFlg">
        AND NOT EXISTS(
            SELECT
                *
            FROM
                SHIP_SER_NUM SSN
            WHERE
                SSN.GLBL_CMPY_CD = SS.GLBL_CMPY_CD
            AND SSN.SO_NUM       = SS.SO_NUM
            AND SSN.MDSE_CD      = SS.MDSE_CD
            AND SSN.SER_NUM      = SS.SER_NUM
            AND SSN.EZCANCELFLAG = '0'
        )
        </isNotNull>
    </statement>

    <!-- QC#14286 -->
    <statement id="getSvcMachMstrPkFromSoNoSer" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            SMM.SVC_MACH_MSTR_PK
        FROM
             SVC_MACH_MSTR SMM
        WHERE
            SMM.GLBL_CMPY_CD     = #glblCmpyCd#
        AND SMM.TRX_HDR_NUM      = #trxHdrNum#
        AND SMM.TRX_LINE_NUM     = #trxLineNum#
        <isNotNull property="trxLineSubNum">
        AND SMM.TRX_LINE_SUB_NUM = #trxLineSubNum#
        </isNotNull>
        AND SMM.SVC_MACH_MSTR_STS_CD != #svcMachMstrStsCdW4R#
        AND SMM.EZCANCELFLAG     = '0'
    </statement>

    <statement id="countConfigItemShip" parameterClass="Map" resultClass="Integer">
        SELECT
            COUNT(*)
        FROM
            SHPG_ORD_DTL    SOD
        WHERE
            SOD.GLBL_CMPY_CD            = #glblCmpyCd#
        AND SOD.SO_NUM                  = #soNum#
        AND SOD.PICK_SVC_CONFIG_MSTR_PK = #svcConfigMstrPk#
        AND SOD.EZCANCELFLAG            = '0'
        AND SOD.SHPG_QTY            &gt; SOD.SHIP_QTY
    </statement>

    <statement id="countSetItemShip" parameterClass="Map" resultClass="Integer">
        SELECT
            COUNT(*)
        FROM
            SHPG_ORD_DTL    SOD
        WHERE
            SOD.GLBL_CMPY_CD = #glblCmpyCd#
        AND SOD.SO_NUM       = #soNum#
        AND SOD.SET_MDSE_CD  = #setMdseCd#
        AND SOD.SHPG_QTY  &gt; SOD.SHIP_QTY
        AND SOD.EZCANCELFLAG = '0'
    </statement>

    <statement id="getInEachQty" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            MSP.IN_EACH_QTY
        FROM
             SHPG_PLN       SP
            ,MDSE_STORE_PKG MSP
        WHERE
            SP.GLBL_CMPY_CD  = #glblCmpyCd#
        AND SP.SHPG_PLN_NUM  = #shpgPlnNum#
        AND SP.EZCANCELFLAG  = '0'
        AND SP.GLBL_CMPY_CD  = MSP.GLBL_CMPY_CD
        AND SP.MDSE_CD       = MSP.MDSE_CD
        AND SP.CUST_UOM_CD   = MSP.PKG_UOM_CD
        AND MSP.EZCANCELFLAG = '0'
    </statement>

    <statement id="getRwsSerial" parameterClass="Map" resultClass="Map">
        SELECT
             RH.RWS_NUM
            ,RD.RWS_DTL_LINE_NUM
            ,RD.MDSE_CD
            ,SSN.SER_NUM
        FROM
             RWS_HDR      RH
            ,RWS_DTL      RD
            ,SHIP_SER_NUM SSN
        WHERE
            RH.GLBL_CMPY_CD        = #glblCmpyCd#
        AND RH.RWS_NUM             = #rwsNum#
        AND RH.EZCANCELFLAG        = '0'
        AND RH.GLBL_CMPY_CD        = RD.GLBL_CMPY_CD
        AND RH.RWS_NUM             = RD.RWS_NUM
        AND RD.EZCANCELFLAG        = '0'
        AND RD.GLBL_CMPY_CD        = SSN.GLBL_CMPY_CD
        AND RH.PO_RCV_TRX_HDR_NUM  = SSN.SO_NUM
        AND RD.PO_RCV_TRX_LINE_NUM = SSN.SO_SLP_NUM
        AND SSN.EZCANCELFLAG       = '0'
    </statement>

    <statement id="getWrkRwsSerKitAndRf" parameterClass="Map" resultClass="Map">
        SELECT
             RH.RWS_NUM
            ,#rwsDtlLineNum#       AS RWS_DTL_LINE_NUM
            ,WO.FNSH_GOODS_MDSE_CD AS MDSE_CD
            ,WOS.SER_NUM
        FROM
             RWS_HDR     RH
            ,SHPG_ORD    SO
            ,WRK_ORD     WO
            ,WRK_ORD_SER WOS
        WHERE
            RH.GLBL_CMPY_CD          = #glblCmpyCd#
        AND RH.RWS_NUM               = #rwsNum#
        AND RH.EZCANCELFLAG          = '0'
        AND RH.GLBL_CMPY_CD          = SO.GLBL_CMPY_CD
        AND RH.PO_RCV_TRX_HDR_NUM    = SO.SO_NUM
        AND SO.EZCANCELFLAG          = '0'
        AND SO.GLBL_CMPY_CD          = WO.GLBL_CMPY_CD
        AND SO.TRX_HDR_NUM           = WO.WRK_ORD_NUM
        AND WO.EZCANCELFLAG          = '0'
        AND WO.GLBL_CMPY_CD          = WOS.GLBL_CMPY_CD
        AND WO.WRK_ORD_NUM           = WOS.WRK_ORD_NUM
        AND WOS.WRK_ORD_DTL_LINE_NUM = #wrkOrdDtlLineNum#
        AND WOS.EZCANCELFLAG         = '0'
    </statement>

    <statement id="getWrkRwsSerUnKit" parameterClass="Map" resultClass="Map">
        SELECT
             RH.RWS_NUM
            ,RD.RWS_DTL_LINE_NUM
            ,RD.MDSE_CD
            ,WOS.SER_NUM
        FROM
             RWS_HDR     RH
            ,RWS_DTL     RD
            ,SHPG_ORD    SO
            ,WRK_ORD_SER WOS
        WHERE
            RH.GLBL_CMPY_CD        = #glblCmpyCd#
        AND RH.RWS_NUM             = #rwsNum#
        AND RH.EZCANCELFLAG        = '0'
        AND RH.GLBL_CMPY_CD        = RD.GLBL_CMPY_CD
        AND RH.RWS_NUM             = RD.RWS_NUM
        AND RD.EZCANCELFLAG        = '0'
        AND RH.GLBL_CMPY_CD        = SO.GLBL_CMPY_CD
        AND RH.PO_RCV_TRX_HDR_NUM  = SO.SO_NUM
        AND SO.EZCANCELFLAG        = '0'
        AND SO.GLBL_CMPY_CD        = WOS.GLBL_CMPY_CD
        AND SO.TRX_HDR_NUM         = WOS.WRK_ORD_NUM
        AND RD.PO_RCV_TRX_LINE_NUM = WOS.WRK_ORD_DTL_LINE_NUM
        AND WOS.EZCANCELFLAG       = '0'
    </statement>

    <statement id="getRwsCnt" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            COUNT(*)
        FROM
            RWS_HDR RH
        WHERE
            RH.GLBL_CMPY_CD = #glblCmpyCd#
        AND RH.WH_CD        = #whCd#
        AND RH.RWS_REF_NUM  = #rwsRefNum#
        AND RH.EZCANCELFLAG = '0'
    </statement>

    <statement id="getMaxRwsRefNum" parameterClass="Map" resultClass="String">
        SELECT
            MAX(R.RWS_REF_NUM)     R_RWS_REF_NUM
        FROM
            RWS_HDR  R
        WHERE
            R.GLBL_CMPY_CD     = #glblCmpyCd#
        AND R.WH_CD            = #whCd#
        AND REGEXP_LIKE(R.RWS_REF_NUM, #rwsRefNum#)
        AND R.EZCANCELFLAG     = '0'
        GROUP BY
            R.WH_CD
    </statement>

    <statement id="judgeLoan" parameterClass="Map" resultClass="Map">
        SELECT
            DOTPD.OUT_OF_WH_NODE_USG_FLG
           ,OPT.OUT_OF_WH_INVTY_PROC_FLG
        FROM
            CPO_DTL              DCD
           ,CPO                  DC
           ,DS_ORD_TP_PROC_DFN   DOTPD
           ,DS_ORD_LINE_PROC_DFN DOLPD
           ,ORD_PROC_TP          OPT
        WHERE
            DCD.GLBL_CMPY_CD          = #glblCmpyCd#
        AND DCD.CPO_ORD_NUM           = #cpoOrdNum#
        AND DCD.CPO_DTL_LINE_NUM      = #cpoDtlLineNum#
        AND DCD.CPO_DTL_LINE_SUB_NUM  = #cpoDtlLineSubNum#
        AND DCD.EZCANCELFLAG          = '0'
        AND DC.GLBL_CMPY_CD           = DCD.GLBL_CMPY_CD
        AND DC.CPO_ORD_NUM            = DCD.CPO_ORD_NUM
        AND DC.EZCANCELFLAG           = '0'
        AND DOTPD.GLBL_CMPY_CD        = DC.GLBL_CMPY_CD
        AND DOTPD.DS_ORD_TP_CD        = DC.DS_ORD_TP_CD
        AND DOTPD.EZCANCELFLAG        = '0'
        AND DOLPD.GLBL_CMPY_CD        = DC.GLBL_CMPY_CD
        AND DOLPD.DS_ORD_TP_CD        = DC.DS_ORD_TP_CD
        AND DOLPD.DS_ORD_LINE_CATG_CD = DCD.DS_ORD_LINE_CATG_CD
        AND DOLPD.EZCANCELFLAG        = '0'
        AND OPT.GLBL_CMPY_CD          = DOLPD.GLBL_CMPY_CD
        AND OPT.ORD_PROC_TP_CD        = DOLPD.ORD_PROC_TP_CD
        AND OPT.EZCANCELFLAG          = '0'
    </statement>

    <statement id="getShpgOrdDtlReClose" parameterClass="Map" resultClass="Map">
        SELECT
             SOD.GLBL_CMPY_CD
            ,SOD.SO_NUM
            ,SOD.SO_SLP_NUM
            ,SOD.MDSE_CD
            ,SOD.INVTY_LOC_CD
            ,SOD.FROM_STK_STS_CD
            ,SOC.SHIP_DT_TM_TS
        FROM
            SHPG_ORD_DTL      SOD
           ,SHPG_ORD_CONF     SOC
           ,SHPG_STS          SS
        WHERE
            SOD.GLBL_CMPY_CD  = #glblCmpyCd#
        AND SOD.SO_NUM        = #soNum#
        AND SOD.EZCANCELFLAG  = '0'
        AND SOD.GLBL_CMPY_CD  = SOC.GLBL_CMPY_CD
        AND SOD.SO_NUM        = SOC.SO_NUM
        AND SOC.EZCANCELFLAG  = '0'
        AND SOD.GLBL_CMPY_CD  = SS.GLBL_CMPY_CD
        AND SOD.SHPG_STS_CD   = SS.SHPG_STS_CD
        AND SS.SO_PRINT_FLG   = #flgY#
        AND SS.SHIP_FLG       = #flgN#
        AND SS.EZCANCELFLAG   = '0'
        ORDER BY 
            SOD.INVTY_LOC_CD
           ,SOD.MDSE_CD
           ,SOD.FROM_STK_STS_CD
    </statement>
<!--QC#63431 Add Start-->
    <statement id="getConfigQty" parameterClass="Map" resultClass="Map">
        SELECT
             SOD.PICK_SVC_CONFIG_MSTR_PK
            ,SUM(SOD.SHPG_QTY) AS TOT_SHPG_QTY
            ,SUM(SOD.SHIP_QTY) AS TOT_SHIP_QTY
        FROM
            SHPG_ORD_DTL      SOD
           ,SHPG_ORD_CONF     SOC
        WHERE
            SOD.GLBL_CMPY_CD  = #glblCmpyCd#
        AND SOD.SO_NUM        = #soNum#
        AND SOD.PICK_SVC_CONFIG_MSTR_PK IS NOT NULL
        AND SOD.EZCANCELFLAG  = '0'
        AND SOD.GLBL_CMPY_CD  = SOC.GLBL_CMPY_CD
        AND SOD.SO_NUM        = SOC.SO_NUM
        AND SOC.EZCANCELFLAG  = '0'
        GROUP BY PICK_SVC_CONFIG_MSTR_PK
    </statement>
<!--QC#63431 Add End-->
    <statement id="getShpgOrdDtlSetLine" parameterClass="Map" resultClass="Map">
        SELECT
            SOD.SO_NUM
           ,SOD.SO_SLP_NUM
           ,SS.SHIP_FLG
        FROM
            SHPG_ORD_DTL SOD
           ,SHPG_STS     SS
        WHERE
            SOD.GLBL_CMPY_CD      = #glblCmpyCd#
        AND SOD.SO_NUM            = #soNum#
        AND SOD.SO_SLP_NUM &lt;&gt; #soSlpNum#
        AND SOD.TRX_HDR_NUM       = #trxHdrNum#
        AND SOD.TRX_LINE_NUM      = #trxLineNum#
        AND SOD.SET_MDSE_CD       = #setMdseCd#
        AND SOD.EZCANCELFLAG      = '0'
        AND SOD.GLBL_CMPY_CD      = SS.GLBL_CMPY_CD
        AND SOD.SHPG_STS_CD       = SS.SHPG_STS_CD
        AND SS.EZCANCELFLAG       = '0'
    </statement>

    <statement id="getShpgOrdDtlConfigLine" parameterClass="Map" resultClass="Map">
        SELECT
            SOD.SO_NUM
           ,SOD.SO_SLP_NUM
           ,SS.SHIP_FLG
        FROM
            SHPG_ORD_DTL    SOD
           ,SHPG_STS        SS
        WHERE
            SOD.GLBL_CMPY_CD            = #glblCmpyCd#
        AND SOD.SO_NUM                  = #soNum#
        AND SOD.SO_SLP_NUM       &lt;&gt; #soSlpNum#
        AND SOD.PICK_SVC_CONFIG_MSTR_PK = #svcConfigMstrPk#
        AND SOD.EZCANCELFLAG            = '0'
        AND SOD.GLBL_CMPY_CD            = SS.GLBL_CMPY_CD
        AND SOD.SHPG_STS_CD             = SS.SHPG_STS_CD
        AND SS.EZCANCELFLAG             = '0'
    </statement>

    <statement id="getWrkOrdDtl" parameterClass="Map" resultClass="Map">
        SELECT
            WOD.ORIG_GOODS_MDSE_CD
           ,WOD.STK_STS_CD
           ,WOD.ORIG_GOODS_ORD_QTY
           ,WOD.WRK_ORD_DTL_LINE_NUM
           ,RS.INVTY_LOC_CD  AS RCV_INVTY_LOC_CD
        FROM
            WRK_ORD        WO
           ,WRK_ORD_DTL    WOD
           ,RTL_SWH        RS
           ,MDSE           MD
        WHERE
            WO.GLBL_CMPY_CD          = #glblCmpyCd#
        AND WO.WRK_ORD_NUM           = #wrkOrdNum#
        AND WO.EZCANCELFLAG          = '0'
        AND WO.GLBL_CMPY_CD          = WOD.GLBL_CMPY_CD
        AND WO.WRK_ORD_NUM           = WOD.WRK_ORD_NUM
        AND WOD.EZCANCELFLAG         = '0'
        AND WOD.GLBL_CMPY_CD         = RS.GLBL_CMPY_CD
        AND WO.INVTY_LOC_CD          = RS.RTL_WH_CD
        AND WOD.SPLY_RTL_SWH_CD      = RS.RTL_SWH_CD
        AND RS.EZCANCELFLAG          = '0'
        AND WOD.GLBL_CMPY_CD         = MD.GLBL_CMPY_CD
        AND WOD.ORIG_GOODS_MDSE_CD   = MD.MDSE_CD
        AND MD.INVTY_CTRL_FLG        = #flgY#
        AND MD.EZCANCELFLAG          = '0'
        ORDER BY
            WOD.WRK_ORD_DTL_LINE_NUM
    </statement>

    <statement id="getMachMstrAllocOffList" parameterClass="Map" resultClass="BigDecimal">
        SELECT DISTINCT
            SS.SVC_MACH_MSTR_PK
        FROM
            SO_SER        SS
           ,SVC_MACH_MSTR SMM
        WHERE
            SS.GLBL_CMPY_CD     = #glblCmpyCd#
        AND SS.SO_NUM           = #soNum#
        AND NOT EXISTS (SELECT
                            *
                        FROM
                            SHIP_SER_NUM SSN
                        WHERE
                            SSN.GLBL_CMPY_CD = SS.GLBL_CMPY_CD
                        AND SSN.SO_NUM       = SS.SO_NUM
                        AND SSN.MDSE_CD      = SS.MDSE_CD
<!--2017.06.09 QC#18661 Add Start-->
                        AND SSN.SER_NUM      = SS.SER_NUM
<!--2017.06.09 QC#18661 Add End-->
                        AND SSN.EZCANCELFLAG = '0'
                       )
        AND SS.EZCANCELFLAG     = '0'
        AND SS.GLBL_CMPY_CD     = SMM.GLBL_CMPY_CD
        AND SS.SVC_MACH_MSTR_PK = SMM.SVC_MACH_MSTR_PK
        AND SS.TRX_HDR_NUM      = SMM.TRX_HDR_NUM
        AND SMM.SVC_MACH_MSTR_STS_CD != #svcMachMstrStsCdW4R#
        AND SMM.EZCANCELFLAG    = '0'
    </statement>

    <statement id="getFsrTaskList" parameterClass="Map" resultClass="Map">
        SELECT
            PR.FSR_NUM                AS FSR_NUM
           ,PR.SVC_TASK_NUM           AS SVC_TASK_NUM
           ,PR.RQST_TECH_TOC_CD       AS RQST_TECH_TOC_CD
           ,ST.SVC_MACH_MSTR_PK       AS SVC_MACH_MSTR_PK
           ,MAX(RH.LTST_WH_IN_ETA_DT) AS LTST_WH_IN_ETA_DT
        FROM
            SHPG_ORD_DTL    DSOD
           ,RWS_HDR         RH
           ,PRCH_REQ        PR
           ,SVC_TASK        ST
        WHERE
            DSOD.GLBL_CMPY_CD  = #glblCmpyCd#
        AND DSOD.SO_NUM        = #soNum#
        AND DSOD.EZCANCELFLAG  = '0'
        AND DSOD.GLBL_CMPY_CD  = RH.GLBL_CMPY_CD
        AND DSOD.SO_NUM        = RH.PO_RCV_TRX_HDR_NUM
        AND RH.EZCANCELFLAG    = '0'
        AND DSOD.GLBL_CMPY_CD  = PR.GLBL_CMPY_CD
        AND DSOD.PRCH_REQ_NUM  = PR.PRCH_REQ_NUM
        AND PR.EZCANCELFLAG    = '0'
        AND PR.GLBL_CMPY_CD    = ST.GLBL_CMPY_CD
        AND PR.SVC_TASK_NUM    = ST.SVC_TASK_NUM
        AND PR.FSR_NUM         = ST.FSR_NUM
        AND ST.EZCANCELFLAG    = '0'
        AND EXISTS (SELECT
                        1
                    FROM
                        FSR_VISIT FV
                       ,FSR_VISIT NV
                    WHERE
                        FV.GLBL_CMPY_CD       = ST.GLBL_CMPY_CD
                    AND FV.FSR_NUM            = ST.FSR_NUM
                    AND FV.SVC_TASK_NUM       = ST.SVC_TASK_NUM
                    AND FV.EZCANCELFLAG       = '0'
                    AND FV.GLBL_CMPY_CD       = NV.GLBL_CMPY_CD
                    AND FV.FSR_NUM            = NV.FSR_NUM
                    AND FV.NEXT_FSR_VISIT_NUM = NV.FSR_VISIT_NUM
                    AND NV.FSR_VISIT_STS_CD   = #svcTaskStsPendPrt#
                    AND NV.EZCANCELFLAG       = '0'
                   )
        GROUP BY
            PR.FSR_NUM
           ,PR.SVC_TASK_NUM
           ,PR.RQST_TECH_TOC_CD
           ,ST.SVC_MACH_MSTR_PK
        ORDER BY
            FSR_NUM
           ,SVC_TASK_NUM
           ,LTST_WH_IN_ETA_DT
    </statement>

    <statement id="getRwsInfo" parameterClass="Map" resultClass="Map">
        SELECT
             RH.RWS_NUM
            ,RD.RWS_DTL_LINE_NUM
            ,RD.INVTY_STK_STS_CD
            ,RH.SCE_ORD_TP_CD
            ,RD.RWS_QTY
            ,RD.SHIP_FROM_INVTY_LOC_CD
            ,RD.INVTY_LOC_CD
            ,RH.WH_CD
            ,RD.MDSE_CD
            ,RH.RWS_REF_NUM
            ,RS.SER_NUM
        FROM
             RWS_HDR    RH
            ,RWS_DTL    RD
            ,RWS_SER    RS
            ,RWS_STS    STS
        WHERE
            RH.GLBL_CMPY_CD       = #glblCmpyCd#
        <isNotNull property="trxHdrNum">
        AND RH.PO_RCV_TRX_HDR_NUM = #trxHdrNum#
        AND RH.RWS_REF_NUM        = #rwsRefNum#
        </isNotNull>
        <isNotNull property="soNum">
        AND RH.TRX_ORD_NUM        = #soNum#
        </isNotNull>
        AND RH.SCE_ORD_TP_CD      = #sceOrdTpCd#
        AND RH.WH_CD              = #shipToCustCd#
        AND RH.EZCANCELFLAG       = '0'
        AND RH.GLBL_CMPY_CD       = RD.GLBL_CMPY_CD
        AND RH.RWS_NUM            = RD.RWS_NUM
        AND RD.EZCANCELFLAG       = '0'
        AND RD.GLBL_CMPY_CD       = RS.GLBL_CMPY_CD(+)
        AND RD.RWS_NUM            = RS.RWS_NUM(+)
        AND RD.RWS_DTL_LINE_NUM   = RS.RWS_LINE_NUM(+)
        AND RS.EZCANCELFLAG(+)    = '0'
        AND RH.GLBL_CMPY_CD       = STS.GLBL_CMPY_CD
        AND RH.RWS_STS_CD         = STS.RWS_STS_CD
        AND STS.RWS_OPEN_FLG      = #rwsOpenFlg#
        AND STS.EZCANCELFLAG      = '0'
        ORDER BY
             RD.RWS_NUM
            ,RD.RWS_DTL_LINE_NUM
    </statement>

    <statement id="getRwsInfoForRemanConfChg" parameterClass="Map" resultClass="Map">
        SELECT
            PRD.PO_RCV_NUM
           ,PRD.PO_RCV_LINE_NUM
           ,RH.RWS_NUM
           ,RH.RWS_REF_NUM
           ,RD.RWS_DTL_LINE_NUM
           ,RD.MDSE_CD
           ,RD.INVTY_STK_STS_CD
           ,RD.INVTY_LOC_CD
           ,RD.RWS_QTY
        FROM
            PO_RCV_HDR PRH
           ,PO_RCV_DTL PRD
           ,RWS_HDR    RH
           ,RWS_DTL    RD
        WHERE
            PRH.GLBL_CMPY_CD        = #glblCmpyCd#
        AND PRH.PO_RCV_TRX_HDR_NUM  = #trxHdrNum#
        AND PRH.EZCANCELFLAG        = '0'
        AND PRH.GLBL_CMPY_CD        = PRD.GLBL_CMPY_CD
        AND PRH.PO_RCV_NUM          = PRD.PO_RCV_NUM
        AND PRD.PO_RCV_TRX_LINE_NUM = #trxLineNum#
        AND PRD.EZCANCELFLAG        = '0'
        AND PRD.GLBL_CMPY_CD        = RH.GLBL_CMPY_CD
        AND PRD.PO_RCV_NUM          = RH.TRX_ORD_NUM
        AND RH.SCE_ORD_TP_CD        = #sceOrdTpCd#
        AND RH.EZCANCELFLAG         = '0'
        AND RH.GLBL_CMPY_CD         = RD.GLBL_CMPY_CD
        AND RH.RWS_NUM              = RD.RWS_NUM
        AND PRD.PO_RCV_LINE_NUM     = RD.TRX_LINE_NUM
        AND RD.EZCANCELFLAG         = '0'
    </statement>

    <statement id="getRwsInfoForRemanTrsf" parameterClass="Map" resultClass="Map">
        SELECT
             RH.RWS_NUM
            ,RH.RWS_REF_NUM
            ,RD.RWS_DTL_LINE_NUM
        FROM
             RWS_HDR RH
            ,RWS_DTL RD
        WHERE
            RH.GLBL_CMPY_CD = #glblCmpyCd#
        AND RH.TRX_ORD_NUM  = #soNum#
        AND RH.EZCANCELFLAG = '0'
        AND RH.GLBL_CMPY_CD = RD.GLBL_CMPY_CD
        AND RH.RWS_NUM      = RD.RWS_NUM
        AND RD.TRX_LINE_NUM = #soSlpNum#
        AND RD.EZCANCELFLAG = '0'
    </statement>

    <statement id="chkPrntSvcMachMstrItem" parameterClass="Map" resultClass="BigDecimal">
        SELECT
             SCM.SVC_MACH_MSTR_PK
        FROM
             RMNF_ORD        RH
            ,RMNF_ORD_DTL    RD
            ,SVC_CONFIG_MSTR SCM
        WHERE
            RH.GLBL_CMPY_CD          = #glblCmpyCd#
        AND RH.RMNF_ORD_NUM          = #trxHdrNum#
        AND RH.EZCANCELFLAG          = '0'
        AND RH.GLBL_CMPY_CD          = RD.GLBL_CMPY_CD
        AND RH.RMNF_ORD_NUM          = RD.RMNF_ORD_NUM
        AND RD.RMNF_ORD_DTL_LINE_NUM = #trxLineNum#
        AND RD.EZCANCELFLAG          = '0'
        AND RD.GLBL_CMPY_CD          = SCM.GLBL_CMPY_CD
        AND RH.SVC_CONFIG_MSTR_PK    = SCM.SVC_CONFIG_MSTR_PK
        AND RD.SVC_MACH_MSTR_PK      = SCM.SVC_MACH_MSTR_PK
        AND SCM.EZCANCELFLAG         = '0'
    </statement>

    <statement id="getRmnfOrdNum" parameterClass="Map" resultClass="String">
        SELECT
            RO.RMNF_ORD_NUM
        FROM
             SHPG_ORD      SO
            ,RMNF_ORD      RO
        WHERE
            SO.GLBL_CMPY_CD = #glblCmpyCd#
        AND SO.SO_NUM       = #soNum#
        AND SO.EZCANCELFLAG = '0'
        AND SO.GLBL_CMPY_CD = RO.GLBL_CMPY_CD
        AND SO.TRX_HDR_NUM  = RO.RMNF_ORD_NUM
        AND RO.EZCANCELFLAG = '0'
    </statement>

    <statement id="getRmnfConfigCompList" parameterClass="Map" resultClass="Map">
        SELECT
             RH.SVC_CONFIG_MSTR_PK
            ,RD.SVC_MACH_MSTR_PK
            ,RD.RMNF_TO_CMPT_SER_NUM
            ,RD.RMNF_TO_CMPT_MDSE_CD
            ,RD.CMPT_SER_NUM
            ,RD.CMPT_MDSE_CD
            ,RD.RMV_CONFIG_FLG
            ,SMM.SVC_MACH_MSTR_STS_CD
            ,SMM.EFF_FROM_DT
            ,SMM.SVC_MACH_USG_STS_CD
            ,SMM.CUR_LOC_NUM
            ,CASE WHEN SMM.SVC_MACH_MSTR_PK = SCM.SVC_MACH_MSTR_PK THEN 'Y' 
                  WHEN SCM.SVC_CONFIG_MSTR_PK IS NULL AND RH.SVC_CONFIG_MSTR_PK IS NOT NULL AND RH.RMNF_MAIN_UNIT_SER_NUM = RD.CMPT_SER_NUM THEN 'Y'
             ELSE 'N'
             END AS MAIN_MACH_FLG
        FROM
             RMNF_ORD        RH
            ,RMNF_ORD_DTL    RD
            ,SVC_MACH_MSTR   SMM
            ,SVC_CONFIG_MSTR SCM
        WHERE
            RH.GLBL_CMPY_CD       = #glblCmpyCd#
        AND RH.RMNF_ORD_NUM       = #trxHdrNum#
        AND RH.EZCANCELFLAG       = '0'
        AND RH.GLBL_CMPY_CD       = RD.GLBL_CMPY_CD
        AND RH.RMNF_ORD_NUM       = RD.RMNF_ORD_NUM
        AND RD.EZCANCELFLAG       = '0'
        AND RD.GLBL_CMPY_CD       = SMM.GLBL_CMPY_CD
        AND RD.SVC_MACH_MSTR_PK   = SMM.SVC_MACH_MSTR_PK
        AND SMM.EZCANCELFLAG      = '0'
        AND RH.GLBL_CMPY_CD       = SCM.GLBL_CMPY_CD(+)
        AND RH.SVC_CONFIG_MSTR_PK = SCM.SVC_CONFIG_MSTR_PK(+)
        AND SCM.EZCANCELFLAG(+)   = '0'
    </statement>

    <statement id="getRmnfMainMachineSerial" parameterClass="Map" resultClass="String">
        SELECT
            RH.RMNF_MAIN_UNIT_SER_NUM
        FROM
             RMNF_ORD_DTL    RD
            ,RMNF_ORD        RH
        WHERE
            RD.GLBL_CMPY_CD = #glblCmpyCd#
        AND RD.RMNF_ORD_NUM = #trxHdrNum#
        AND RD.RMNF_ORD_DTL_LINE_NUM = #trxLineNum#
        AND RD.EZCANCELFLAG = '0'
        AND RD.GLBL_CMPY_CD = RH.GLBL_CMPY_CD
        AND RD.RMNF_ORD_NUM = RH.RMNF_ORD_NUM
        AND RD.CMPT_SER_NUM = RH.RMNF_MAIN_UNIT_SER_NUM
        AND RH.EZCANCELFLAG = '0'
    </statement>

    <statement id="getPrDetailRwsNumUpdateList" parameterClass="Map" resultClass="Map">
        SELECT
             DRD.RWS_NUM
            ,DRD.PRCH_REQ_NUM
            ,DRD.PRCH_REQ_LINE_NUM
            ,DRD.PRCH_REQ_LINE_SUB_NUM
        FROM
            RWS_DTL DRD
        WHERE
            DRD.GLBL_CMPY_CD          = #glblCmpyCd#
        <iterate property="rwsNumList" var="rwsNumList[]" open="AND DRD.RWS_NUM IN (" close=")" conjunction=",">
            #rwsNumList[]#
        </iterate>
        AND DRD.EZCANCELFLAG          = '0'
        ORDER BY
             DRD.PRCH_REQ_NUM
            ,DRD.PRCH_REQ_LINE_NUM
            ,DRD.PRCH_REQ_LINE_SUB_NUM
    </statement>

    <!-- QC#17029 Add  -->
    <statement id="getRtlWhCdFromRtlSwh" parameterClass="Map" resultMap="String">
        SELECT
            RS.RTL_WH_CD
        FROM
            RTL_SWH RS
        WHERE
            RS.GLBL_CMPY_CD     = #glblCmpyCd#
        AND RS.INVTY_LOC_CD     = #invtyLocCd#
        AND RS.EZCANCELFLAG     = '0'
    </statement>
    <!-- QC#17029 Add  -->

    <statement id="getShipSerNumLsit" parameterClass="Map" resultClass="String">
        SELECT
            SSNW.SER_NUM
        FROM
            SHIP_SER_NUM_WRK SSNW
        WHERE
            SSNW.GLBL_CMPY_CD     = #glblCmpyCd#
            AND SSNW.WRK_TRX_ID   = #wrkTrxId#
            AND SSNW.SO_NUM       = #soNum#
            AND SSNW.SO_SLP_NUM   = #soSlpNum#
            AND SSNW.EZCANCELFLAG = '0'
    </statement>

    <!-- QC#18302 Add  -->
    <statement id="checkPartiallyShippedFromNonCpo" parameterClass="Map">
        SELECT
            SOD.SO_NUM
           ,SOD.SO_SLP_NUM
           ,SOD.DS_SO_LINE_STS_CD
           ,DSLS.DS_SO_LINE_STS_DESC_TXT
           ,SP.SHPG_PLN_NUM
           ,SP.SHPG_STS_CD
           ,SS.SHPG_STS_DESC_TXT
           ,SOD.TRX_HDR_NUM
           ,SOD.TRX_LINE_NUM
           ,SOD.TRX_LINE_SUB_NUM
           ,SOD.RQST_ORD_QTY
           ,SOD.SHIP_QTY
           ,SOD.SHPG_BAL_QTY
           ,SP.TRX_SRC_TP_CD
           ,TST.TRX_SRC_TP_DESC_TXT
           ,TST.CPO_EXST_FLG
        FROM
            SHPG_ORD        SO
           ,SHPG_ORD_DTL    SOD
           ,DS_SO_LINE_STS  DSLS
           ,SHPG_PLN        SP
           ,SHPG_STS        SS
           ,TRX_SRC_TP      TST
        WHERE
            SO.GLBL_CMPY_CD          = #glblCmpyCd#
        AND SO.SO_NUM                = #soNum#
        AND SO.GLBL_CMPY_CD          = SOD.GLBL_CMPY_CD
        AND SO.SO_NUM                = SOD.SO_NUM
        AND SOD.RQST_ORD_QTY      &gt; SOD.SHIP_QTY
        AND SOD.DS_SO_LINE_STS_CD    = #shipped#
        AND SOD.GLBL_CMPY_CD         = DSLS.GLBL_CMPY_CD
        AND SOD.DS_SO_LINE_STS_CD    = DSLS.DS_SO_LINE_STS_CD
        AND SOD.GLBL_CMPY_CD         = SP.GLBL_CMPY_CD
        AND SOD.SO_NUM               = SP.SO_NUM
        AND SP.SHPG_STS_CD           = #soCancelled#
        AND SP.GLBL_CMPY_CD          = SS.GLBL_CMPY_CD
        AND SP.SHPG_STS_CD           = SS.SHPG_STS_CD
        AND SO.GLBL_CMPY_CD          = TST.GLBL_CMPY_CD
        AND SO.TRX_SRC_TP_CD         = TST.TRX_SRC_TP_CD
        AND TST.CPO_EXST_FLG         = #cpoExstFlgN#
        AND SOD.EZCANCELFLAG         = '0'
        AND DSLS.EZCANCELFLAG        = '0'
        AND SP.EZCANCELFLAG          = '0'
        AND SS.EZCANCELFLAG          = '0'
        AND SO.EZCANCELFLAG          = '0'
        AND TST.EZCANCELFLAG         = '0'
    </statement>
    <!-- QC#18302 Add  -->

    <statement id="getPoRcvDtl" parameterClass="Map" resultClass="Map">
        SELECT
             PRH.GLBL_CMPY_CD
            ,PRH.PO_RCV_NUM
            ,PRD.PO_RCV_LINE_NUM
        FROM
             PO_RCV_HDR PRH
            ,PO_RCV_DTL PRD
        WHERE
            PRH.GLBL_CMPY_CD        = #glblCmpyCd#
        AND PRH.PO_RCV_TRX_HDR_NUM  = #poRcvTrxHdrNum#
        AND PRH.GLBL_CMPY_CD        = PRD.GLBL_CMPY_CD
        AND PRH.PO_RCV_NUM          = PRD.PO_RCV_NUM
        AND PRD.PO_RCV_TRX_LINE_NUM = #poRcvTrxLineNum#
        AND PRH.EZCANCELFLAG        = '0'
        AND PRD.EZCANCELFLAG        = '0'
    </statement>


    <statement id="getPoRcvHdr" parameterClass="Map" resultClass="Map">
        SELECT
             PRH.GLBL_CMPY_CD
            ,PRH.PO_RCV_NUM
        FROM
             PO_RCV_HDR PRH
        WHERE
            PRH.GLBL_CMPY_CD        = #glblCmpyCd#
        AND PRH.PO_RCV_TRX_HDR_NUM  = #poRcvTrxHdrNum#
        AND PRH.EZCANCELFLAG        = '0'
    </statement>

    <!-- START 2020/10/06 A.Marte [QC#59155,ADD] -->
    <statement id="getDisposalNonAllocSvcMachMstr" parameterClass="Map" resultMap="result.SVC_MACH_MSTRTMsg">
        SELECT
             SMM.SVC_MACH_MSTR_PK
            ,SMM.SVC_CONFIG_MSTR_PK
            ,SMM.SER_NUM
            ,SMM.SVC_MACH_USG_STS_CD
        FROM
             SVC_MACH_MSTR SMM
        WHERE
            SMM.GLBL_CMPY_CD            = #glblCmpyCd#
        AND SMM.MDSE_CD                 = #mdseCd#
        AND SMM.CUR_LOC_NUM             = #curLocNum#
        AND SMM.SVC_MACH_MSTR_STS_CD    IN (#CRAT#,#RMV#)
        AND SMM.SVC_CONFIG_MSTR_PK      IS NULL
        AND SMM.TRX_HDR_NUM             IS NULL
        AND SMM.TRX_LINE_NUM            IS NULL
        AND SMM.TRX_LINE_SUB_NUM        IS NULL
        AND SMM.SVC_MACH_MAINT_AVAL_FLG = #svcMachMaintAvalFlg#
        AND SMM.STK_STS_CD              = #stkStsCd#
        AND SMM.EZCANCELFLAG            = '0'
        ORDER BY 
            SVC_MACH_MSTR_PK ASC
    </statement>

    <resultMap id="result.SVC_MACH_MSTRTMsg" class="SVC_MACH_MSTRTMsg">
        <result property="svcMachMstrPk"          column="SVC_MACH_MSTR_PK"           javaType="EZDTStringItem"/>
        <result property="svcConfigMstrPk"        column="SVC_CONFIG_MSTR_PK"         javaType="EZDTStringItem"/>
        <result property="serNum"                 column="SER_NUM"                    javaType="EZDTStringItem"/>
        <result property="svcMachUsgStsCd"        column="SVC_MACH_USG_STS_CD"        javaType="EZDTStringItem"/>
    </resultMap>
    <!-- END 2020/10/06 A.Marte [QC#59155,ADD] -->

    <!-- 2024/03/14 QC#63527 Add Start -->
    <statement id="getInvtyOwnrCd" parameterClass="Map" resultClass="String">
        SELECT
            RTL_WH.INVTY_OWNR_CD 
        FROM
            RTL_SWH              RTL_SWH
            ,RTL_WH              RTL_WH
        WHERE
            RTL_SWH.RTL_WH_CD            = RTL_WH.RTL_WH_CD
            AND RTL_SWH.INVTY_LOC_CD     = #whCd#
            AND RTL_SWH.GLBL_CMPY_CD     = #glblCmpyCd#
            AND RTL_SWH.EZCANCELFLAG     = '0'
            AND RTL_WH.GLBL_CMPY_CD      = #glblCmpyCd#
            AND RTL_WH.EZCANCELFLAG      = '0'
     </statement>
     <!-- 2024/03/14 QC#63527 Add End -->
</sqlMap>
