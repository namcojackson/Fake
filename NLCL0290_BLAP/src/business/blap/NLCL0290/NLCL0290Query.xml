<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NLCL0290Query">

    <typeAlias alias="NLCL0290CMsg"      type="business.blap.NLCL0290.NLCL0290CMsg"/>
    <typeAlias alias="NLCL0290_ASMsg"    type="business.blap.NLCL0290.NLCL0290_ASMsg"/>

    <statement id="getAdjustmentOrder" parameterClass="Map" resultMap="result.getAdjustmentOrder">
    SELECT 
         INVTY_ORD_NUM_AH
        ,CONFIG_FLG
        ,ADJ_TRX_TP_CD_AH
        ,RTL_WH_CD_AH
        ,RTL_WH_NM_AH
        ,LOC_STS_CD_AH
        ,STK_STS_CD_AH
        ,TO_STK_STS_CD_AH
        ,MDSE_CD_A
        ,MDSE_DESC_SHORT_TXT_A
        ,FROM_RTL_SWH_CD_A
        ,TO_RTL_SWH_CD_A
        ,ORD_QTY_A
        ,STK_STS_CD_A
        ,TO_STK_STS_CD_A
        ,XX_SCR_ITEM_130_TXT_A
        ,INVTY_ORD_LINE_CMNT_TXT_A
        ,SER_NUM_A
        ,INVTY_ORD_NUM_A
        ,INVTY_ORD_STS_DESC_TXT_A
        ,INVTY_ORD_LINE_COST_AMT_A
        ,INVTY_ORD_SUBMT_TS_A
        ,ADJ_CATG_CD_A
        ,SVC_CONFIG_MSTR_PK_A
        ,SVC_MACH_TP_DESC_TXT_A
        ,INVTY_AVAL_QTY_A
        <!-- START 2023/04/14 G.Quan [QC#61206, ADD] -->
        ,XX_REC_HIST_CRAT_TS
        ,XX_REC_HIST_CRAT_BY_NM
        ,XX_REC_HIST_UPD_TS
        ,XX_REC_HIST_UPD_BY_NM
        ,XX_REC_HIST_TBL_NM
        <!-- END 2023/04/14 G.Quan [QC#61206, ADD] -->
    FROM (
          SELECT '0'                    AS CONFIG_FLG
            ,IO.INVTY_ORD_NUM           AS INVTY_ORD_NUM_AH
            ,ID.INVTY_ORD_LINE_NUM      AS INVTY_ORD_LINE_NUM
            ,IO.ADJ_TRX_TP_CD           AS ADJ_TRX_TP_CD_AH
            ,IO.INVTY_LOC_CD            AS RTL_WH_CD_AH
            ,RWH.RTL_WH_NM              AS RTL_WH_NM_AH
            ,NULL                       AS LOC_STS_CD_AH
            ,NULL                       AS STK_STS_CD_AH
            ,NULL                       AS TO_STK_STS_CD_AH
            ,NULL                       AS MDSE_CD_A
            ,NULL                       AS MDSE_DESC_SHORT_TXT_A
            ,ID.FROM_RTL_SWH_CD         AS FROM_RTL_SWH_CD_A
            ,ID.TO_RTL_SWH_CD           AS TO_RTL_SWH_CD_A
            ,ID.ORD_QTY                 AS ORD_QTY_A
            ,NULL                       AS STK_STS_CD_A
            ,NULL                       AS TO_STK_STS_CD_A
            ,ID.COA_ACCT_CD             AS XX_SCR_ITEM_130_TXT_A
            ,ID.INVTY_ORD_LINE_CMNT_TXT AS INVTY_ORD_LINE_CMNT_TXT_A
            ,NULL                       AS SER_NUM_A
            ,IO.INVTY_ORD_NUM           AS INVTY_ORD_NUM_A
            ,NULL                       AS INVTY_ORD_STS_DESC_TXT_A
            ,NULL                       AS INVTY_ORD_LINE_COST_AMT_A
            ,NULL                       AS INVTY_ORD_SUBMT_TS_A
            ,ID.ADJ_CATG_CD             AS ADJ_CATG_CD_A
            ,ID.SVC_CONFIG_MSTR_PK      AS SVC_CONFIG_MSTR_PK_A
            ,NULL                       AS SVC_MACH_TP_DESC_TXT_A
            ,NULL                       AS INVTY_AVAL_QTY_A
            <!-- START 2023/04/14 G.Quan [QC#61206, ADD] -->
            ,ID.EZINTIME AS XX_REC_HIST_CRAT_TS
            ,ID.EZINUSERID AS XX_REC_HIST_CRAT_BY_NM
            ,ID.EZUPTIME AS XX_REC_HIST_UPD_TS
            ,ID.EZUPUSERID AS XX_REC_HIST_UPD_BY_NM
            ,ID.EZTABLEID AS XX_REC_HIST_TBL_NM
            <!-- END 2023/04/14 G.Quan [QC#61206, ADD] -->
        FROM INVTY_ORD     IO
            ,INVTY_ORD_DTL ID
            ,RTL_WH        RWH
        WHERE IO.GLBL_CMPY_CD       = #glblCmpyCd#
        AND IO.INVTY_ORD_NUM        = #invtyOrdNum#
        AND (IO.INVTY_ORD_TP_CD     = #adjustment#
        OR   IO.INVTY_ORD_TP_CD     = #subWhChange#
        OR   IO.INVTY_ORD_TP_CD     = #stockStatusChange#)
        AND IO.EZCANCELFLAG         = '0'

        AND IO.GLBL_CMPY_CD         = ID.GLBL_CMPY_CD
        AND IO.INVTY_ORD_NUM        = ID.INVTY_ORD_NUM
        AND ID.INVTY_ORD_LINE_NUM   = #firstLineNum#
        AND ID.SVC_CONFIG_MSTR_PK IS NOT NULL
        AND ID.EZCANCELFLAG         = '0'

        AND IO.GLBL_CMPY_CD         = RWH.GLBL_CMPY_CD (+)
        AND IO.INVTY_LOC_CD         = RWH.RTL_WH_CD (+)
        AND RWH.EZCANCELFLAG (+)    = '0'

        UNION ALL

        SELECT
             '1'                        AS CONFIG_FLG
            ,IO.INVTY_ORD_NUM           AS INVTY_ORD_NUM_AH
            ,ID.INVTY_ORD_LINE_NUM      AS INVTY_ORD_LINE_NUM
            ,IO.ADJ_TRX_TP_CD           AS ADJ_TRX_TP_CD_AH
            ,IO.INVTY_LOC_CD            AS RTL_WH_CD_AH
            ,RWH.RTL_WH_NM              AS RTL_WH_NM_AH
            ,ID.LOC_STS_CD              AS LOC_STS_CD_AH
            ,ID.STK_STS_CD              AS STK_STS_CD_AH
            ,ID.TO_STK_STS_CD           AS TO_STK_STS_CD_AH
            ,ID.MDSE_CD                 AS MDSE_CD_A
            ,MDSE.MDSE_DESC_SHORT_TXT   AS MDSE_DESC_SHORT_TXT_A
            ,ID.FROM_RTL_SWH_CD         AS FROM_RTL_SWH_CD_A
            ,ID.TO_RTL_SWH_CD           AS TO_RTL_SWH_CD_A
            ,ID.ORD_QTY                 AS ORD_QTY_A
            ,ID.STK_STS_CD              AS STK_STS_CD_A
            ,ID.TO_STK_STS_CD           AS TO_STK_STS_CD_A
            ,ID.COA_ACCT_CD             AS XX_SCR_ITEM_130_TXT_A
            ,ID.INVTY_ORD_LINE_CMNT_TXT AS INVTY_ORD_LINE_CMNT_TXT_A
            ,IOS.SER_NUM                AS SER_NUM_A
            ,IO.INVTY_ORD_NUM           AS INVTY_ORD_NUM_A
            ,STS.INVTY_ORD_STS_DESC_TXT AS INVTY_ORD_STS_DESC_TXT_A
            ,ID.INVTY_ORD_LINE_COST_AMT AS INVTY_ORD_LINE_COST_AMT_A
            ,IO.INVTY_ORD_SUBMT_TS      AS INVTY_ORD_SUBMT_TS_A
            ,ID.ADJ_CATG_CD             AS ADJ_CATG_CD_A
            ,ID.SVC_CONFIG_MSTR_PK      AS SVC_CONFIG_MSTR_PK_A
            ,SMM.SVC_MACH_TP_DESC_TXT   AS SVC_MACH_TP_DESC_TXT_A
            ,NVL(I.INVTY_AVAL_QTY,0)    AS INVTY_AVAL_QTY_A
            <!-- START 2023/04/14 G.Quan [QC#61206, ADD] -->
            ,ID.EZINTIME AS XX_REC_HIST_CRAT_TS
            ,ID.EZINUSERID AS XX_REC_HIST_CRAT_BY_NM
            ,ID.EZUPTIME AS XX_REC_HIST_UPD_TS
            ,ID.EZUPUSERID AS XX_REC_HIST_UPD_BY_NM
            ,ID.EZTABLEID AS XX_REC_HIST_TBL_NM
            <!-- END 2023/04/14 G.Quan [QC#61206, ADD] -->
        FROM
             INVTY_ORD     IO
            ,INVTY_ORD_DTL ID
            ,INVTY_ORD_STS STS
            ,RTL_WH        RWH
            ,INVTY         I
            ,MDSE          MDSE
            ,(SELECT SMM.TRX_HDR_NUM
                    ,SMM.TRX_LINE_NUM
                    ,SMT.SVC_MACH_TP_DESC_TXT
                    ,SMM.GLBL_CMPY_CD
                    ,SMM.EZCANCELFLAG
              FROM   SVC_MACH_MSTR SMM
                    ,SVC_MACH_TP   SMT
              WHERE SMM.GLBL_CMPY_CD     = #glblCmpyCd#
              AND   SMM.EZCANCELFLAG     = '0'
              AND   SMM.GLBL_CMPY_CD     = SMT.GLBL_CMPY_CD (+)
              AND   SMM.SVC_MACH_TP_CD   = SMT.SVC_MACH_TP_CD (+)
              AND   SMM.EZCANCELFLAG (+) = '0'
              GROUP BY SMM.TRX_HDR_NUM
                      ,SMM.TRX_LINE_NUM
                      ,SMT.SVC_MACH_TP_DESC_TXT
                      ,SMM.GLBL_CMPY_CD
                      ,SMM.EZCANCELFLAG
             ) SMM
            ,(SELECT
                     IOD.GLBL_CMPY_CD          GLBL_CMPY_CD
                    ,IOD.INVTY_ORD_NUM         INVTY_ORD_NUM
                    ,IOD.INVTY_ORD_LINE_NUM    INVTY_ORD_LINE_NUM
                    ,IOD.MDSE_CD               MDSE_CD
                    ,IOS.SER_NUM               SER_NUM
              FROM   INVTY_ORD_DTL IOD
                    ,INVTY_ORD_SER IOS
              WHERE  IOS.GLBL_CMPY_CD       = IOD.GLBL_CMPY_CD
              AND    IOS.INVTY_ORD_NUM      = IOD.INVTY_ORD_NUM
              AND    IOS.INVTY_ORD_LINE_NUM = IOD.INVTY_ORD_LINE_NUM
              AND    IOS.EZCANCELFLAG       = '0'
             ) IOS

        WHERE
            IO.GLBL_CMPY_CD         = #glblCmpyCd#
        AND IO.INVTY_ORD_NUM        = #invtyOrdNum#
        AND (IO.INVTY_ORD_TP_CD     = #adjustment#
        OR   IO.INVTY_ORD_TP_CD     = #subWhChange#
        OR   IO.INVTY_ORD_TP_CD     = #stockStatusChange#)
        AND IO.EZCANCELFLAG         = '0'

        AND ID.GLBL_CMPY_CD         = IO.GLBL_CMPY_CD
        AND ID.INVTY_ORD_NUM        = IO.INVTY_ORD_NUM
        AND ID.EZCANCELFLAG         = '0'

        AND ID.GLBL_CMPY_CD         = IOS.GLBL_CMPY_CD (+)
        AND ID.INVTY_ORD_NUM        = IOS.INVTY_ORD_NUM (+)
        AND ID.INVTY_ORD_LINE_NUM   = IOS.INVTY_ORD_LINE_NUM (+)

        AND IO.GLBL_CMPY_CD         = RWH.GLBL_CMPY_CD (+)
        AND IO.INVTY_LOC_CD         = RWH.RTL_WH_CD (+)
        AND RWH.EZCANCELFLAG (+)    = '0'

        AND ID.GLBL_CMPY_CD         = MDSE.GLBL_CMPY_CD (+)
        AND ID.MDSE_CD              = MDSE.MDSE_CD (+)
        AND MDSE.EZCANCELFLAG (+)   = '0'

        AND ID.GLBL_CMPY_CD         = STS.GLBL_CMPY_CD (+)
        AND ID.INVTY_ORD_DTL_STS_CD = STS.INVTY_ORD_STS_CD (+)
        AND STS.EZCANCELFLAG (+)    = '0'

        AND ID.GLBL_CMPY_CD         = SMM.GLBL_CMPY_CD (+)
        AND ID.INVTY_ORD_NUM        = SMM.TRX_HDR_NUM (+)
        AND ID.INVTY_ORD_LINE_NUM   = SMM.TRX_LINE_NUM (+)
        AND SMM.EZCANCELFLAG (+)    = '0'

        AND ID.GLBL_CMPY_CD         = I.GLBL_CMPY_CD (+)
        AND ID.MDSE_CD              = I.MDSE_CD (+)
        AND ID.INVTY_LOC_CD         = I.INVTY_LOC_CD (+)
        AND ID.LOC_STS_CD           = I.LOC_STS_CD (+)
        AND ID.STK_STS_CD           = I.STK_STS_CD (+)
        AND I.EZCANCELFLAG (+)      = '0'
    ) L
    ORDER BY CONFIG_FLG,INVTY_ORD_LINE_NUM
    </statement>

    <resultMap id="result.getAdjustmentOrder"     class="NLCL0290_ASMsg">
        <result property="invtyOrdNum_AH"         column="INVTY_ORD_NUM_AH"              javaType="EZDSStringItem" />
        <result property="xxConfigFlg_A"          column="CONFIG_FLG"                    javaType="EZDSStringItem" />
        <result property="adjTrxTpCd_AH"          column="ADJ_TRX_TP_CD_AH"              javaType="EZDSStringItem" />
        <result property="rtlWhCd_AH"             column="RTL_WH_CD_AH"                  javaType="EZDSStringItem" />
        <result property="rtlWhNm_AH"             column="RTL_WH_NM_AH"                  javaType="EZDSStringItem" />
        <result property="locStsCd_AH"            column="LOC_STS_CD_AH"                 javaType="EZDSStringItem" />
        <result property="stkStsCd_AH"            column="STK_STS_CD_AH"                 javaType="EZDSStringItem" />
        <result property="toStkStsCd_AH"          column="TO_STK_STS_CD_AH"              javaType="EZDSStringItem" />
        <result property="mdseCd_A"               column="MDSE_CD_A"                     javaType="EZDSStringItem" />
        <result property="mdseDescShortTxt_A"     column="MDSE_DESC_SHORT_TXT_A"         javaType="EZDSStringItem" />
        <result property="fromRtlSwhCd_A"         column="FROM_RTL_SWH_CD_A"             javaType="EZDSStringItem" />
        <result property="toRtlSwhCd_A"           column="TO_RTL_SWH_CD_A"               javaType="EZDSStringItem" />
        <result property="ordQty_A"               column="ORD_QTY_A"                     javaType="EZDSBigDecimalItem" />
        <result property="stkStsCd_A"             column="STK_STS_CD_A"                  javaType="EZDSStringItem" />
        <result property="toStkStsCd_A"           column="TO_STK_STS_CD_A"                  javaType="EZDSStringItem" />
        <result property="xxScrItem130Txt_A"      column="XX_SCR_ITEM_130_TXT_A"         javaType="EZDSStringItem" />
        <result property="adjCatgCd_A"            column="ADJ_CATG_CD_A"                 javaType="EZDSStringItem" />
        <result property="invtyOrdLineCmntTxt_A"  column="INVTY_ORD_LINE_CMNT_TXT_A"     javaType="EZDSStringItem" />
        <result property="serNum_A"               column="SER_NUM_A"                     javaType="EZDSStringItem" />
        <result property="invtyOrdNum_A"          column="INVTY_ORD_NUM_A"               javaType="EZDSStringItem" />
        <result property="invtyOrdStsDescTxt_A"   column="INVTY_ORD_STS_DESC_TXT_A"      javaType="EZDSStringItem" />
        <result property="invtyOrdLineCostAmt_A"  column="INVTY_ORD_LINE_COST_AMT_A"     javaType="EZDSBigDecimalItem" />
        <result property="invtyOrdSubmtTs_A"      column="INVTY_ORD_SUBMT_TS_A"          javaType="EZDSStringItem" />
        <result property="svcConfigMstrPk_A"      column="SVC_CONFIG_MSTR_PK_A"          javaType="EZDSBigDecimalItem" />
        <result property="svcMachTpDescTxt_A"     column="SVC_MACH_TP_DESC_TXT_A"        javaType="EZDSStringItem" />
        <result property="invtyAvalQty_A"         column="INVTY_AVAL_QTY_A"              javaType="EZDSBigDecimalItem" />
        <!-- START 2023/04/14 G.Quan [QC#61206, ADD] -->
        <result property="xxRecHistCratTs_A"     column="XX_REC_HIST_CRAT_TS"           javaType="EZDSStringItem"/>
        <result property="xxRecHistCratByNm_A"   column="XX_REC_HIST_CRAT_BY_NM"        javaType="EZDSStringItem"/>
        <result property="xxRecHistUpdTs_A"      column="XX_REC_HIST_UPD_TS"            javaType="EZDSStringItem"/>
        <result property="xxRecHistUpdByNm_A"    column="XX_REC_HIST_UPD_BY_NM"         javaType="EZDSStringItem"/>
        <result property="xxRecHistTblNm_A"      column="XX_REC_HIST_TBL_NM"            javaType="EZDSStringItem"/>
        <!-- END 2023/04/14 G.Quan [QC#61206, ADD] -->
    </resultMap>

    <statement id="getAddConfig" parameterClass="Map" resultMap="result.getAddConfig">
        SELECT
             CONFIG_FLG
            ,MDSE_CD
            ,MDSE_DESC_SHORT_TXT
            ,ORD_QTY
            ,RTL_WH_CD
            ,RTL_SWH_CD
            ,CUR_LOC_NUM
            ,LOC_STS_CD
            ,STK_STS_CD
            ,SER_NUM
            ,SVC_CONFIG_MSTR_PK
            ,SVC_MACH_MSTR_PK
            ,SVC_MACH_TP_DESC_TXT
            ,INVTY_AVAL_QTY
        FROM (
              SELECT
                   '0'  AS CONFIG_FLG
                  ,NULL AS MDSE_CD
                  ,NULL AS MDSE_DESC_SHORT_TXT
                  ,CASE WHEN #adjustment#        = #adjTrxTpCd# THEN -1
                        WHEN #subWhTransfer#     = #adjTrxTpCd# THEN  1 
                        WHEN #stockStatusChange# = #adjTrxTpCd# THEN  1  END AS ORD_QTY
                  ,RS.RTL_WH_CD
                  ,RS.RTL_SWH_CD
                  ,SMM.CUR_LOC_NUM
                  ,NULL AS LOC_STS_CD
                  ,NULL AS STK_STS_CD
                  ,NULL AS SER_NUM
                  ,SMM.SVC_CONFIG_MSTR_PK
                  ,NULL AS SVC_MACH_MSTR_PK
                  ,NULL AS SVC_MACH_TP_CD
                  ,NULL AS SVC_MACH_TP_DESC_TXT
                  ,NULL AS INVTY_AVAL_QTY
              FROM SVC_MACH_MSTR SMM
                  ,RTL_SWH RS
              WHERE SMM.GLBL_CMPY_CD           = #glblCmpyCd#
              AND SMM.SVC_CONFIG_MSTR_PK       = #svcConfigMstrPk#
              AND SMM.SVC_MACH_MAINT_AVAL_FLG  = #svcMachMaintAvalFlg#
              AND SMM.SVC_MACH_MSTR_LOC_STS_CD = #dcStock#
              AND (SMM.SVC_MACH_MSTR_STS_CD    = #crat#
              OR   SMM.SVC_MACH_MSTR_STS_CD    = #removed#)
              AND SMM.EZCANCELFLAG             = '0'

              AND SMM.GLBL_CMPY_CD   = RS.GLBL_CMPY_CD(+)
              AND SMM.CUR_LOC_NUM    = RS.INVTY_LOC_CD(+)
              AND RS.EZCANCELFLAG(+) = '0'
              AND ROWNUM             = 1

              UNION ALL

              SELECT 
                   '1'  AS CONFIG_FLG
                  ,SMM.MDSE_CD
                  ,M.MDSE_DESC_SHORT_TXT
                  ,CASE WHEN #adjustment#        = #adjTrxTpCd# THEN -1
                        WHEN #subWhTransfer#     = #adjTrxTpCd# THEN  1 
                        WHEN #stockStatusChange# = #adjTrxTpCd# THEN  1  END AS ORD_QTY
                  ,RS.RTL_WH_CD
                  ,RS.RTL_SWH_CD
                  ,SMM.CUR_LOC_NUM
                  ,#dcStock# AS LOC_STS_CD
                  ,SMM.STK_STS_CD
                  ,SMM.SER_NUM
                  ,SMM.SVC_CONFIG_MSTR_PK
                  ,SMM.SVC_MACH_MSTR_PK
                  ,SMM.SVC_MACH_TP_CD
                  ,SMT.SVC_MACH_TP_DESC_TXT
                  ,NVL(I.INVTY_AVAL_QTY,0) AS INVTY_AVAL_QTY
              FROM SVC_MACH_MSTR SMM
                  ,SVC_MACH_TP SMT
                  ,RTL_SWH RS
                  ,INVTY I
                  ,ALL_MDSE_V M
              WHERE SMM.GLBL_CMPY_CD           = #glblCmpyCd#
              AND SMM.SVC_CONFIG_MSTR_PK       = #svcConfigMstrPk#
              AND SMM.SVC_MACH_MAINT_AVAL_FLG  = #svcMachMaintAvalFlg#
              AND SMM.SVC_MACH_MSTR_LOC_STS_CD = #dcStock#
              AND (SMM.SVC_MACH_MSTR_STS_CD    = #crat#
              OR   SMM.SVC_MACH_MSTR_STS_CD    = #removed#)
              AND SMM.EZCANCELFLAG             = '0'
              AND SMM.GLBL_CMPY_CD             = SMT.GLBL_CMPY_CD(+)
              AND SMM.SVC_MACH_TP_CD           = SMT.SVC_MACH_TP_CD(+)
              AND SMT.EZCANCELFLAG(+)          = '0'

              AND SMM.GLBL_CMPY_CD             = RS.GLBL_CMPY_CD(+)
              AND SMM.CUR_LOC_NUM              = RS.INVTY_LOC_CD(+)
              AND RS.EZCANCELFLAG(+)           = '0'

              AND SMM.GLBL_CMPY_CD             = I.GLBL_CMPY_CD(+)
              AND SMM.CUR_LOC_NUM              = I.INVTY_LOC_CD(+)
              AND SMM.MDSE_CD                  = I.MDSE_CD(+)
              AND SMM.STK_STS_CD               = I.STK_STS_CD(+)
              AND I.LOC_STS_CD(+)              = #dcStock#
              AND I.EZCANCELFLAG(+)            = '0'

              AND SMM.GLBL_CMPY_CD             = M.GLBL_CMPY_CD(+)
              AND SMM.MDSE_CD                  = M.MDSE_CD(+)
              AND M.EZCANCELFLAG(+)            = '0'
              ) L
        ORDER BY
                 CONFIG_FLG
                ,SVC_MACH_TP_CD
                ,SER_NUM
                ,MDSE_CD
                ,SVC_MACH_MSTR_PK
    </statement>

    <resultMap id="result.getAddConfig"  class="NLCL0290_ASMsg">
        <result property="xxConfigFlg_A"          column="CONFIG_FLG"                  javaType="EZDSStringItem" />
        <result property="mdseCd_A"               column="MDSE_CD"                     javaType="EZDSStringItem" />
        <result property="mdseDescShortTxt_A"     column="MDSE_DESC_SHORT_TXT"         javaType="EZDSStringItem" />
        <result property="rtlWhCd_AH"             column="RTL_WH_CD"                   javaType="EZDSStringItem" />
        <result property="fromRtlSwhCd_A"         column="RTL_SWH_CD"                  javaType="EZDSStringItem" />
        <result property="fromInvtyLocCd_A"       column="CUR_LOC_NUM"                 javaType="EZDSStringItem" />
        <result property="ordQty_A"               column="ORD_QTY"                     javaType="EZDSBigDecimalItem" />
        <result property="locStsCd_AH"            column="LOC_STS_CD"                  javaType="EZDSStringItem" />
        <result property="stkStsCd_A"             column="STK_STS_CD"                  javaType="EZDSStringItem" />
        <result property="serNum_A"               column="SER_NUM"                     javaType="EZDSStringItem" />
        <result property="svcConfigMstrPk_A"      column="SVC_CONFIG_MSTR_PK"          javaType="EZDSBigDecimalItem" />
        <result property="svcMachMstrPk_A"        column="SVC_MACH_MSTR_PK"            javaType="EZDSBigDecimalItem" />
        <result property="svcMachTpDescTxt_A"     column="SVC_MACH_TP_DESC_TXT"        javaType="EZDSStringItem" />
        <result property="invtyAvalQty_A"         column="INVTY_AVAL_QTY"              javaType="EZDSBigDecimalItem" />
    </resultMap>

    <statement id="getAdjTrxTypeList" parameterClass="Map" resultClass="Map">
        SELECT 
            ATT.ADJ_TRX_TP_CD          ADJ_TRX_TP_CD
           ,ATT.ADJ_TRX_TP_DESC_TXT    ADJ_TRX_TP_DESC_TXT
           ,ATT.ADJ_TRX_TP_SORT_NUM    ADJ_TRX_TP_SORT_NUM
        FROM 
            ADJ_TRX_TP ATT
        WHERE
                ATT.GLBL_CMPY_CD          =     #glblCmpyCd#
            AND ATT.SCR_ENT_AVAL_FLG      =     'Y'
            AND ATT.EZCANCELFLAG          =     '0'
        ORDER BY
                ADJ_TRX_TP_SORT_NUM
    </statement>

    <statement id="getLocStsList" parameterClass="Map" resultClass="Map">
        SELECT 
            LS.LOC_STS_CD          LOC_STS_CD
           ,LS.LOC_STS_DESC_TXT    LOC_STS_DESC_TXT
           ,LS.LOC_STS_SORT_NUM    LOC_STS_SORT_NUM
        FROM 
            LOC_STS LS
        WHERE
                LS.GLBL_CMPY_CD          =     #glblCmpyCd#
            AND LS.EZCANCELFLAG          =     '0'
            AND EXISTS
                (SELECT 1
                 FROM  AVAL_INVTY_APP_ID A
                 WHERE A.GLBL_CMPY_CD = LS.GLBL_CMPY_CD
                 AND   A.BIZ_APP_ID   = #bizAppId#
                 AND   A.LOC_STS_CD   = LS.LOC_STS_CD
                 AND   A.EZCANCELFLAG = '0'
                )
        ORDER BY
                LOC_STS_SORT_NUM
    </statement>

    <statement id="getStkStsList" parameterClass="Map" resultClass="Map">
        SELECT 
            SS.STK_STS_CD          STK_STS_CD
           ,SS.STK_STS_DESC_TXT    STK_STS_DESC_TXT
           ,SS.STK_STS_SORT_NUM    STK_STS_SORT_NUM
        FROM 
            STK_STS SS
        WHERE
                SS.GLBL_CMPY_CD          =     #glblCmpyCd#
            AND SS.EZCANCELFLAG          =     '0'
            AND EXISTS
                (SELECT 1
                 FROM  AVAL_INVTY_APP_ID A
                 WHERE A.GLBL_CMPY_CD = SS.GLBL_CMPY_CD
                 AND   A.BIZ_APP_ID   = #bizAppId#
                 AND   A.STK_STS_CD   = SS.STK_STS_CD
                 AND   A.EZCANCELFLAG = '0'
                )
        ORDER BY
                STK_STS_SORT_NUM
    </statement>

    <statement id="getAdjAcctAliasList" parameterClass="Map" resultClass="Map">
        SELECT 
            AAA.ADJ_ACCT_ALIAS_NM   ADJ_ACCT_ALIAS_NM
        FROM 
            ADJ_ACCT_ALIAS AAA
        WHERE
                AAA.GLBL_CMPY_CD                     =     #glblCmpyCd#
            AND AAA.RTL_WH_CD                        =     #rtlWhCd#
            AND AAA.EFF_FROM_DT                  &lt;=     #slsDt#
            AND NVL(AAA.EFF_THRU_DT,'99991231')  &gt;=     #slsDt#
            AND AAA.EZCANCELFLAG                     =     '0'
        ORDER BY
                ADJ_ACCT_ALIAS_NM
    </statement>

    <statement id="getAdjAcctAliasMap" parameterClass="Map" resultClass="Map">
        SELECT 
                 AAA.COA_CMPY_CD                    COA_CMPY_CD
                ,AAA.COA_BR_CD                      COA_BR_CD
                ,AAA.COA_ACCT_CD                    COA_ACCT_CD
                ,AAA.COA_PROD_CD                    COA_PROD_CD
                ,AAA.COA_CH_CD                      COA_CH_CD
                ,AAA.COA_CC_CD                      COA_CC_CD
                ,AAA.COA_AFFL_CD                    COA_AFFL_CD
                ,AAA.COA_EXTN_CD                    COA_EXTN_CD
                ,AAA.COA_PROJ_CD                    COA_PROJ_CD
        FROM 
            ADJ_ACCT_ALIAS AAA
        WHERE
                AAA.GLBL_CMPY_CD                     =     #glblCmpyCd#
            AND AAA.RTL_WH_CD                        =     #rtlWhCd#
            AND AAA.ADJ_ACCT_ALIAS_NM                =     #adjAcctAliasNm#
            AND AAA.EFF_FROM_DT                  &lt;=     #slsDt#
            AND NVL(AAA.EFF_THRU_DT,'99991231')  &gt;=     #slsDt#
            AND AAA.EZCANCELFLAG                     =     '0'
            AND ROWNUM                           =     1
        ORDER BY
                ADJ_ACCT_ALIAS_NM
    </statement>

    <statement id="getAdjAcctAliasNm" parameterClass="Map" resultClass="Map">
        SELECT 
            AAA.ADJ_ACCT_ALIAS_NM   ADJ_ACCT_ALIAS_NM
        FROM 
            ADJ_ACCT_ALIAS AAA
        WHERE
                AAA.GLBL_CMPY_CD                     =     #glblCmpyCd#
            AND AAA.RTL_WH_CD                        =     #rtlWhCd#
            AND AAA.ADJ_ACCT_ALIAS_NM                =     #adjAcctAliasNm#
            AND AAA.EFF_FROM_DT                  &lt;=     #slsDt#
            AND NVL(AAA.EFF_THRU_DT,'99991231')  &gt;=     #slsDt#
            AND AAA.EZCANCELFLAG                     =     '0'
            AND ROWNUM                               =     1
        ORDER BY
                ADJ_ACCT_ALIAS_NM
    </statement>

    <statement id="getRtlSwhList" parameterClass="Map" resultClass="Map">
        SELECT 
            RSW.RTL_SWH_CD   RTL_SWH_CD
        FROM 
            RTL_SWH RSW
        WHERE
                RSW.GLBL_CMPY_CD                     =     #glblCmpyCd#
            AND RSW.RTL_WH_CD                        =     #rtlWhCd#
            AND RSW.RTL_SWH_DSBL_FLG                 =     'N'
            AND RSW.EFF_FROM_DT                  &lt;=     #slsDt#
            AND NVL(RSW.EFF_THRU_DT,'99991231')  &gt;=     #slsDt#
            AND RSW.EZCANCELFLAG                     =     '0'
        ORDER BY
                RTL_SWH_CD
    </statement>

    <statement id="getRtlWhMap" parameterClass="Map" resultClass="Map">
        SELECT 
            RWH.RTL_WH_CD                                RTL_WH_CD
           ,RWH.RTL_WH_NM                                RTL_WH_NM
           ,RSW.RTL_SWH_CD                               RTL_SWH_CD
           ,NVL(RSW.INVTY_LOC_CD, RWH.RTL_WH_CD)         INVTY_LOC_CD
        FROM 
            RTL_WH RWH
           ,RTL_SWH RSW
        WHERE
                RWH.GLBL_CMPY_CD          =     #glblCmpyCd#
            AND RWH.EZCANCELFLAG          =     '0'
            <isNotNull property="rtlWhCd">
            AND RWH.RTL_WH_CD             =     #rtlWhCd#
            </isNotNull>
            <isNotNull property="rtlWhNm">
            AND RWH.RTL_WH_NM             =     #rtlWhNm#
            </isNotNull>
            AND RWH.GLBL_CMPY_CD          =     RSW.GLBL_CMPY_CD (+)
            AND RWH.RTL_WH_CD             =     RSW.RTL_WH_CD (+)
            AND RSW.PRTY_LOC_FLG (+)      =     'Y'
            AND RSW.EZCANCELFLAG (+)      =     '0'
            AND ROWNUM                    =     1
    </statement>

    <statement id="getAdjTrxTypeMap" parameterClass="Map" resultClass="Map">
        SELECT 
            ATT.ADJ_TRX_TP_CD          ADJ_TRX_TP_CD
           ,ATT.ADJ_TRX_TP_DESC_TXT    ADJ_TRX_TP_DESC_TXT
           ,ATT.ADJ_TRX_TP_SORT_NUM    ADJ_TRX_TP_SORT_NUM
        FROM 
            ADJ_TRX_TP ATT
        WHERE
                ATT.GLBL_CMPY_CD          =     #glblCmpyCd#
            AND ATT.SCR_ENT_AVAL_FLG      =     'Y'
            AND ATT.EZCANCELFLAG          =     '0'
        ORDER BY
                ADJ_TRX_TP_SORT_NUM
    </statement>

    <statement id="getMdseMap" parameterClass="Map" resultClass="Map">
        SELECT 
            MDSE.SHPG_SER_TAKE_FLG    SHPG_SER_TAKE_FLG
           ,MDSE.MDSE_DESC_SHORT_TXT  MDSE_DESC_SHORT_TXT
           ,MDSE.INSTL_BASE_CTRL_FLG  INSTL_BASE_CTRL_FLG
           <!-- START 2018/03/02 S.Katsuma [QC#20688,ADD] -->
           ,MDSE.INVTY_CTRL_FLG       INVTY_CTRL_FLG
           <!-- END 2018/03/02 S.Katsuma [QC#20688,ADD] -->
        FROM 
            MDSE MDSE
        WHERE
            MDSE.GLBL_CMPY_CD         = #glblCmpyCd#
        AND MDSE.MDSE_CD              = #mdseCd#
        AND MDSE.EZCANCELFLAG         = '0'
    </statement>

    <statement id="getIbMap" parameterClass="Map" resultClass="Map">
        SELECT  
            SVC_MACH_MSTR_PK            SVC_MACH_MSTR_PK
           ,SVC_MACH_MSTR_STS_CD        SVC_MACH_MSTR_STS_CD
           ,CUR_LOC_NUM                 CUR_LOC_NUM
           ,SVC_MACH_MAINT_AVAL_FLG     SVC_MACH_MAINT_AVAL_FLG
           ,SVC_CONFIG_MSTR_PK          SVC_CONFIG_MSTR_PK
           ,SVC_MACH_TP_DESC_TXT        SVC_MACH_TP_DESC_TXT
           <!-- START 2019/06/03 M.Naito [QC#50408,ADD] -->
           ,SMT.SVC_MACH_TP_CD          SVC_MACH_TP_CD
           <!-- END 2019/06/03 M.Naito [QC#50408,ADD] -->
        FROM SVC_MACH_MSTR SMM
            ,SVC_MACH_TP SMT
        WHERE
            SMM.GLBL_CMPY_CD     =   #glblCmpyCd#
        AND SMM.SER_NUM          =   #serNum#
        AND SMM.MDSE_CD          =   #mdseCd#
        AND SMM.EZCANCELFLAG     =   '0'
        AND SMM.GLBL_CMPY_CD     =   SMT.GLBL_CMPY_CD (+)
        AND SMM.SVC_MACH_TP_CD   =   SMT.SVC_MACH_TP_CD (+)
         <isNotNull property="stkStsCd">
        AND SMM.STK_STS_CD       =   #stkStsCd#
         </isNotNull>
        AND SMT.EZCANCELFLAG (+) =   '0'
    </statement>

    <statement id="countSubWarehouseTransferControl" parameterClass="Map" resultClass="BigDecimal">
        SELECT COUNT(1) CNT
        FROM (
               SELECT 1
               FROM   SWH_TRNSF_CTRL STC
               WHERE  STC.GLBL_CMPY_CD = #glblCmpyCd#
               AND    STC.RTL_WH_CD    = #rtlWhCd#
               AND    STC.EZCANCELFLAG = '0'
               UNION
               SELECT 1
               FROM   RTL_WH RTW
                     ,SWH_TRNSF_CTRL STC
               WHERE  RTW.GLBL_CMPY_CD    = #glblCmpyCd#
               AND    RTW.RTL_WH_CD       = #rtlWhCd#
               AND    RTW.EZCANCELFLAG    = '0'
               AND    STC.GLBL_CMPY_CD    = RTW.GLBL_CMPY_CD
               AND    STC.RTL_WH_CATG_CD  = RTW.RTL_WH_CATG_CD
               AND    STC.WH_SYS_TP_CD    = RTW.WH_SYS_TP_CD
               AND    STC.EZCANCELFLAG    = '0'
              )
    </statement>

    <statement id="getAdjTrxTpCd" parameterClass="Map" resultClass="String">
        SELECT  
            ATT.ADJ_TRX_TP_CD            ADJ_TRX_TP_CD
        FROM ADJ_TRX_TP ATT
        WHERE
            ATT.GLBL_CMPY_CD         =   #glblCmpyCd#
        AND ATT.ADJ_TRX_TP_DESC_TXT  =   #adjTrxTpDescTxt#
        AND ATT.EZCANCELFLAG         =   '0'
        AND ROWNUM = 1
    </statement>

    <statement id="getLocStsCd" parameterClass="Map" resultClass="String">
        SELECT  
            LS.LOC_STS_CD            LOC_STS_CD
        FROM LOC_STS LS
        WHERE
            LS.GLBL_CMPY_CD         =   #glblCmpyCd#
        AND LS.LOC_STS_DESC_TXT     =   #locStsDescTxt#
        AND LS.EZCANCELFLAG         =   '0'
        AND ROWNUM = 1
    </statement>

    <statement id="getStkStsCd" parameterClass="Map" resultClass="String">
        SELECT  
             SS.STK_STS_CD            STK_STS_CD
        FROM STK_STS SS
        WHERE
            SS.GLBL_CMPY_CD         =   #glblCmpyCd#
        AND SS.STK_STS_DESC_TXT     =   #stkStsDescTxt#
        AND SS.EZCANCELFLAG         =   '0'
        AND ROWNUM = 1
    </statement>

    <statement id="getAdjCatgCd" parameterClass="Map" resultClass="String">
        SELECT  
             AC.ADJ_CATG_CD            ADJ_CATG_CD
        FROM ADJ_CATG AC
        WHERE
            AC.GLBL_CMPY_CD         =   #glblCmpyCd#
        AND AC.ADJ_CATG_DESC_TXT    =   #adjCatgDescTxt#
        AND AC.EZCANCELFLAG         =   '0'
        AND ROWNUM = 1
    </statement>

    <statement id="checkAllowAccount" parameterClass="Map" resultClass="BigDecimal">
        SELECT COUNT(1)
        FROM COA_GL_SEG_NOT_ALLW_SEC C
        WHERE C.GLBL_CMPY_CD = #glblCmpyCd#
        AND RESRC_OBJ_NM     = #resrcObjNm#
        AND C.ENBL_FLG       = #enblFlg#
        AND #coaAcctCd# BETWEEN COA_FROM_VAL_CD AND COA_TO_VAL_CD
        AND C.EZCANCELFLAG = '0'
    </statement>

    <statement id="checkConfig" parameterClass="Map" resultClass="BigDecimal">
        SELECT COUNT(1)
        FROM SVC_MACH_MSTR SMM
        WHERE SMM.GLBL_CMPY_CD     = #glblCmpyCd#
        AND SMM.SVC_CONFIG_MSTR_PK IS NOT NULL
        <isNotNull property="mdseCd">
        AND SMM.MDSE_CD            = #mdseCd#
        </isNotNull>
        <isNotNull property="serNum">
        AND SMM.SER_NUM            = #serNum#
        </isNotNull>
        AND SMM.EZCANCELFLAG       = '0'
    </statement>

<!-- START 2019/06/10 M.Naito [QC#50751,ADD] -->
    <statement id="cntInvtyDtlDly" parameterClass="Map" resultClass="Integer">
        SELECT SUM(IDD.INVTY_QTY)
        FROM
            INVTY_DTL_DLY IDD
        WHERE
            IDD.GLBL_CMPY_CD       = #glblCmpyCd#
        AND IDD.MDSE_CD            = #mdseCd#
        AND IDD.INVTY_LOC_CD       = #invtyLocCd#
        AND IDD.LOC_STS_CD         = #locStsCd#
        AND IDD.STK_STS_CD         = #stkStsCd#
        AND IDD.SVC_CONFIG_MSTR_PK IS NULL
        AND IDD.EZCANCELFLAG       = '0'
    </statement>
<!-- END 2019/06/10 M.Naito [QC#50751,ADD] -->

    <statement id="getInvtyOrdInfoList" parameterClass="Map" resultClass="Map">
        SELECT
             HDR.GLBL_CMPY_CD            AS GLBL_CMPY_CD
            ,HDR.INVTY_ORD_NUM           AS INVTY_ORD_NUM
            ,HDR.INVTY_ORD_TP_CD         AS INVTY_ORD_TP_CD
            ,HDR.INVTY_LOC_CD            AS RTL_WH_CD
            ,DTL.INVTY_ORD_LINE_NUM      AS INVTY_ORD_LINE_NUM
            ,DTL.MDSE_CD                 AS MDSE_CD
            ,DTL.STK_STS_CD              AS FROM_STK_STS_CD
            ,DTL.INVTY_LOC_CD            AS INVTY_LOC_CD
            ,DTL.LOC_STS_CD              AS LOC_STS_CD
            ,DTL.TO_STK_STS_CD           AS TO_STK_STS_CD
            ,DTL.ORD_QTY                 AS ORD_QTY
            ,DTL.INVTY_ORD_DTL_STS_CD    AS INVTY_ORD_DTL_STS_CD
            ,MDSE.INSTL_BASE_CTRL_FLG    AS INSTL_BASE_CTRL_FLG
            ,MDSE.SHPG_SER_TAKE_FLG      AS SHPG_SER_TAKE_FLG
            ,HDR.SVC_CONFIG_MSTR_PK      AS SVC_CONFIG_MSTR_PK
            ,SER.SER_NUM                 AS SER_NUM
        FROM
            INVTY_ORD         HDR
           ,INVTY_ORD_DTL     DTL
           ,INVTY_ORD_SER     SER
           ,MDSE              MDSE
        WHERE
            HDR.GLBL_CMPY_CD         = #glblCmpyCd#
        AND HDR.INVTY_ORD_NUM        = #invtyOrdNum#
        AND HDR.GLBL_CMPY_CD         = DTL.GLBL_CMPY_CD
        AND HDR.INVTY_ORD_NUM        = DTL.INVTY_ORD_NUM
        AND HDR.EZCANCELFLAG         = '0'
        AND DTL.EZCANCELFLAG         = '0'
        AND MDSE.EZCANCELFLAG        = '0'
        AND DTL.MDSE_CD              = MDSE.MDSE_CD
        AND DTL.GLBL_CMPY_CD         = MDSE.GLBL_CMPY_CD
        AND SER.EZCANCELFLAG(+)      = '0'
        AND DTL.GLBL_CMPY_CD         = SER.GLBL_CMPY_CD(+)
        AND DTL.INVTY_ORD_NUM        = SER.INVTY_ORD_NUM(+)
        AND DTL.INVTY_ORD_LINE_NUM   = SER.INVTY_ORD_LINE_NUM(+)
        ORDER BY 
          HDR.INVTY_ORD_NUM
         ,DTL.INVTY_ORD_LINE_NUM
    </statement>

    <statement id="getSerNumList" parameterClass="Map" resultClass="Map">
    SELECT
         INVTY_ORD_NUM
        ,INVTY_ORD_LINE_NUM
        ,SER_NUM
    FROM
        INVTY_ORD_SER
    WHERE 1=1
    AND EZCANCELFLAG        = '0'
    AND GLBL_CMPY_CD        = #glblCmpyCd#
    AND INVTY_ORD_NUM       = #invtyOrdNum#
    AND INVTY_ORD_LINE_NUM  = #invtyOrdLineNum#
    ORDER BY
        INVTY_ORD_NUM
       ,INVTY_ORD_LINE_NUM
       ,SER_NUM
    </statement>

    <statement id="getSvcMachMstrInfo" parameterClass="Map" resultClass="Map">
        SELECT
            SVC_MACH_MSTR_PK
           ,SVC_MACH_MSTR_STS_CD
           ,MDSE_CD
           ,CUR_LOC_NUM
           ,SVC_MACH_MSTR_LOC_STS_CD
           ,STK_STS_CD
           ,SVC_CONFIG_MSTR_PK
           ,SVC_MACH_MAINT_AVAL_FLG
           ,TRX_HDR_NUM
           ,EZUPTIME
           ,EZUPTIMEZONE
        FROM
            SVC_MACH_MSTR
        WHERE 1=1
        AND GLBL_CMPY_CD                = #glblCmpyCd#
        AND SER_NUM                     = #serNum#
        AND MDSE_CD                     = #mdseCd#
        AND EZCANCELFLAG                = '0'
    </statement>

    <statement id="searchConfig" parameterClass="Map" resultClass="Map">
    SELECT
        *
    FROM
        (
            SELECT
                SMM.SVC_MACH_MSTR_PK
               ,SMM.MDSE_CD
               ,SMM.SER_NUM
               ,SMM.SVC_MACH_MSTR_STS_CD
               ,SMM.CUR_LOC_NUM
               ,SMM.SVC_MACH_MSTR_LOC_STS_CD
               ,SMM.STK_STS_CD
               ,SMM.SVC_CONFIG_MSTR_PK
               ,SMM.SVC_MACH_MAINT_AVAL_FLG
               ,SMM.SVC_MACH_QTY
               ,SMM.EZUPTIME
               ,SMM.EZUPTIMEZONE
               ,MD.SHPG_SER_TAKE_FLG
               ,MD.MDSE_DESC_SHORT_TXT
               ,MD.INSTL_BASE_CTRL_FLG
               ,#invtyOrdNum#       AS TRX_HDR_NUM
               ,#invtyOrdLineNum#   AS TRX_LINE_NUM
            FROM
                SVC_MACH_MSTR SMM
               ,MDSE          MD
            WHERE
                SMM.GLBL_CMPY_CD                = #glblCmpyCd#
            AND SMM.SVC_CONFIG_MSTR_PK          = #configId#
            AND SMM.MDSE_CD                     = #mdseCd#
            AND SMM.SVC_MACH_MSTR_STS_CD IN (#svcMachMstrStsCrat#, #svcMachMstrStsRmv#)
            AND SMM.CUR_LOC_NUM                 = #invtyLocCd#
            AND SMM.SVC_MACH_MAINT_AVAL_FLG     = 'Y'
            AND SMM.TRX_HDR_NUM IS NULL
            AND SMM.STK_STS_CD                  = #fromStkStsCd#
            AND SMM.GLBL_CMPY_CD                = MD.GLBL_CMPY_CD
            AND SMM.MDSE_CD                     = MD.MDSE_CD
            AND SMM.EZCANCELFLAG                = '0'
            AND MD.EZCANCELFLAG                 = '0'
            ORDER BY
                SMM.SVC_MACH_MSTR_PK
           )
       WHERE ROWNUM &lt;= #rowNum#
    </statement>

    <statement id="searchNonConfig" parameterClass="Map" resultClass="Map">
        SELECT
            SMM.SVC_MACH_MSTR_PK
           ,SMM.MDSE_CD
           ,SMM.SER_NUM
           ,SMM.SVC_MACH_MSTR_STS_CD
           ,SMM.CUR_LOC_NUM
           ,SMM.SVC_MACH_MSTR_LOC_STS_CD
           ,SMM.STK_STS_CD
           ,SMM.SVC_CONFIG_MSTR_PK
           ,SMM.SVC_MACH_MAINT_AVAL_FLG
           ,SMM.TRX_HDR_NUM
           ,SMM.SVC_MACH_QTY
           ,SMM.EZUPTIME
           ,SMM.EZUPTIMEZONE
           ,MD.SHPG_SER_TAKE_FLG
           ,MD.MDSE_DESC_SHORT_TXT
           ,MD.INSTL_BASE_CTRL_FLG
           <isNotNull property="invtyOrdNum">
           ,#invtyOrdNum#       AS TRX_HDR_NUM
           </isNotNull>
           <isNotNull property="invtyOrdLineNum">
           ,#invtyOrdLineNum#   AS TRX_LINE_NUM
           </isNotNull>
        FROM
            SVC_MACH_MSTR SMM
           ,MDSE          MD
        WHERE
            SMM.GLBL_CMPY_CD                = #glblCmpyCd#
        AND SMM.MDSE_CD                     = #mdseCd#
        AND SMM.SVC_CONFIG_MSTR_PK IS NULL
        AND SMM.SVC_MACH_MAINT_AVAL_FLG     = 'Y'
        AND SMM.TRX_HDR_NUM IS NULL
        AND SMM.CUR_LOC_NUM                 = #invtyLocCd#
        AND SMM.STK_STS_CD                  = #wmsOldStkStsCd#
        AND SMM.SVC_MACH_MSTR_STS_CD IN (#svcMachMstrStsCrat#, #svcMachMstrStsRmv#)
        AND SMM.GLBL_CMPY_CD                = MD.GLBL_CMPY_CD
        AND SMM.MDSE_CD                     = MD.MDSE_CD
        AND SMM.EZCANCELFLAG                = '0'
        AND MD.EZCANCELFLAG                 = '0'
        AND ROWNUM                      &lt;= #rowNum#
    </statement>

    <statement id="getRwsDetailList" parameterClass="Map" resultClass="Map">
    SELECT
        RD.RWS_NUM
       ,RD.RWS_DTL_LINE_NUM
       ,RD.INVTY_STK_STS_CD
       ,RD.RWS_QTY
       ,RD.INVTY_LOC_CD
       ,RD.MDSE_CD
    FROM
        RWS_DTL RD
    WHERE 1=1
    AND RD.GLBL_CMPY_CD     = #glblCmpyCd#
    AND RD.EZCANCELFLAG     = '0'
    AND RD.RWS_NUM          = #rwsNum#
    ORDER BY
        RD.RWS_NUM
       ,RD.RWS_DTL_LINE_NUM
    </statement>

    <statement id="getRwsSerNumList" parameterClass="Map" resultClass="Map">
    SELECT
        RS.RWS_NUM
       ,RS.RWS_LINE_NUM
       ,RS.SER_NUM
       ,RS.MDSE_CD
    FROM
        RWS_SER RS
    WHERE 1=1
    AND RS.GLBL_CMPY_CD     = #glblCmpyCd#
    AND RS.EZCANCELFLAG     = '0'
    AND RS.RWS_NUM          = #rwsNum#
    ORDER BY
         RS.RWS_NUM
        ,RS.RWS_LINE_NUM
        ,RS.SER_NUM
    </statement>

    <statement id="getSerNumListFromInvtyOrd" parameterClass="Map" resultClass="Map">
    SELECT
        IOS.SER_NUM
       ,ORD.INVTY_ORD_NUM
       ,ORD.INVTY_ORD_LINE_NUM
       ,ORD.RWS_NUM
       ,ORD.MDSE_CD
       ,ORD.RWS_DTL_LINE_NUM
       ,ORD.RWS_QTY
    FROM
        INVTY_ORD_SER IOS
       ,(SELECT
             ID.INVTY_ORD_NUM
            ,ID.INVTY_ORD_LINE_NUM
            ,ID.MDSE_CD
            ,RD.RWS_NUM
            ,RD.RWS_DTL_LINE_NUM
            ,RD.RWS_QTY
         FROM
             INVTY_ORD       IH
            ,INVTY_ORD_DTL   ID
            ,SHPG_ORD        SO
            ,SHPG_ORD_DTL    SD
            ,RWS_HDR         RH
            ,RWS_DTL         RD
         WHERE 1=1
         AND IH.INVTY_ORD_NUM        = #invtyOrdNum#
         AND IH.GLBL_CMPY_CD         = #glblCmpyCd#
         AND IH.EZCANCELFLAG         = '0'
         AND IH.INVTY_ORD_NUM        = ID.INVTY_ORD_NUM
         AND IH.GLBL_CMPY_CD         = ID.GLBL_CMPY_CD
         AND ID.EZCANCELFLAG         = '0'
         AND IH.INVTY_ORD_NUM        = SO.TRX_HDR_NUM
         AND IH.GLBL_CMPY_CD         = SO.GLBL_CMPY_CD
         AND SO.EZCANCELFLAG         = '0'
         AND SO.SO_NUM               = SD.SO_NUM
         AND SD.EZCANCELFLAG         = '0'
         AND SO.GLBL_CMPY_CD         = SD.GLBL_CMPY_CD
         AND ID.INVTY_ORD_LINE_NUM   = SD.TRX_LINE_NUM
         AND ID.MDSE_CD              = SD.MDSE_CD
         AND SO.SO_NUM               = RH.RWS_REF_NUM
         AND RH.EZCANCELFLAG         = '0'
         AND RH.RWS_NUM              = RD.RWS_NUM
         AND RH.GLBL_CMPY_CD         = RD.GLBL_CMPY_CD
         AND RD.EZCANCELFLAG         = '0'
         AND SD.TRX_LINE_NUM         = RD.TRX_LINE_NUM
         AND SD.MDSE_CD              = RD.MDSE_CD
         ) ORD
    WHERE 1=1
    AND IOS.INVTY_ORD_NUM      = ORD.INVTY_ORD_NUM
    AND IOS.INVTY_ORD_LINE_NUM = ORD.INVTY_ORD_LINE_NUM
    ORDER BY
        ORD.RWS_NUM
       ,ORD.RWS_DTL_LINE_NUM
       ,IOS.SER_NUM
    </statement>

    <statement id="getToStkStsCd" parameterClass="Map" resultClass="Map">
        SELECT
            TO_STK_STS_CD
        FROM
            INVTY_ORD_DTL
        WHERE 1=1
        AND GLBL_CMPY_CD                = #glblCmpyCd#
        AND INVTY_ORD_NUM               = #invtyOrdNum#
        AND INVTY_ORD_LINE_NUM          = #invtyOrdLineNum#
        AND EZCANCELFLAG                = '0'
    </statement>

    <!-- START 2021/03/08 A.Marte [QC#58503,ADD] -->
    <statement id="getInvtyLocCd" parameterClass="Map" resultClass="Map">
        SELECT
            IOD.INVTY_LOC_CD
        FROM
            INVTY_ORD_DTL IOD
        WHERE 1=1
        AND IOD.GLBL_CMPY_CD                = #glblCmpyCd#
        AND IOD.INVTY_ORD_NUM               = #invtyOrdNum#
        AND IOD.INVTY_ORD_LINE_NUM          = #invtyOrdLineNum#
        AND IOD.EZCANCELFLAG                = '0'
    </statement>
    <!-- END 2021/03/08 A.Marte [QC#58503,ADD] -->

    <!-- QC#50008 -->
    <statement id="cntTechOrCustomersite" parameterClass="Map" resultClass="Integer">
        SELECT
             COUNT(*)
        FROM
             RTL_SWH RSW
            ,TECH_LOC TL
        WHERE
            RSW.GLBL_CMPY_CD = #glblCmpyCd#
        AND RSW.RTL_WH_CD    = #rtlWhCd#
        AND RSW.EZCANCELFLAG = '0'
        AND RSW.GLBL_CMPY_CD = TL.GLBL_CMPY_CD
        AND RSW.INVTY_LOC_CD = TL.TECH_LOC_CD
        AND TL.EZCANCELFLAG  = '0'
    </statement>

    <!-- QC#50008 -->
    <statement id="getFsrEmailAddress" parameterClass="Map" resultClass="String">
        SELECT
            MGR.EML_ADDR
        FROM
             RTL_WH RW
            ,S21_PSN TECH
            ,S21_PSN MGR
        WHERE
            RW.GLBL_CMPY_CD   = #glblCmpyCd#
        AND RW.RTL_WH_CD      = #rtlWhCd#
        AND RW.EZCANCELFLAG   = '0'
        AND RW.GLBL_CMPY_CD   = TECH.GLBL_CMPY_CD
        AND RW.TECH_TOC_CD    = TECH.PSN_CD
        AND TECH.EZCANCELFLAG = '0'
        AND TECH.GLBL_CMPY_CD = MGR.GLBL_CMPY_CD
        AND TECH.HR_SUPV_ID   = MGR.PSN_CD
        AND MGR.EZCANCELFLAG  = '0'
    </statement>

    <!-- QC#50008 -->
    <statement id="getTechEmailAddress" parameterClass="Map" resultClass="String">
        SELECT
            TECH.EML_ADDR
        FROM
             RTL_WH RW
            ,S21_PSN TECH
        WHERE
            RW.GLBL_CMPY_CD   = #glblCmpyCd#
        AND RW.RTL_WH_CD      = #rtlWhCd#
        AND RW.EZCANCELFLAG   = '0'
        AND RW.GLBL_CMPY_CD   = TECH.GLBL_CMPY_CD
        AND RW.TECH_TOC_CD    = TECH.PSN_CD
        AND TECH.EZCANCELFLAG = '0'
    </statement>

    <!-- QC#50008 -->
    <statement id="getAltEmailAddress" parameterClass="Map" resultClass="String">
        SELECT
            ALT.EML_ADDR
        FROM
             RTL_WH RW
            ,S21_PSN ALT
        WHERE
            RW.GLBL_CMPY_CD   = #glblCmpyCd#
        AND RW.RTL_WH_CD      = #rtlWhCd#
        AND RW.EZCANCELFLAG   = '0'
        AND RW.GLBL_CMPY_CD   = ALT.GLBL_CMPY_CD
        AND RW.ALT_PSN_CD     = ALT.PSN_CD
        AND ALT.EZCANCELFLAG = '0'
    </statement>

    <!-- QC#50008 -->
    <statement id="getFsrPersonName" parameterClass="Map" resultClass="String">
        SELECT
            FSR.FULL_PSN_NM
        FROM
             RTL_WH RW
            , S21_PSN TECH
            , S21_PSN_V FSR
        WHERE
            RW.GLBL_CMPY_CD   = #glblCmpyCd#
        AND RW.RTL_WH_CD      = #rtlWhCd#
        AND RW.EZCANCELFLAG   = '0'
        AND RW.GLBL_CMPY_CD   = TECH.GLBL_CMPY_CD
        AND RW.TECH_TOC_CD    = TECH.PSN_CD
        AND TECH.EZCANCELFLAG = '0'
        AND TECH.GLBL_CMPY_CD = FSR.GLBL_CMPY_CD
        AND TECH.HR_SUPV_ID   = FSR.PSN_CD
        AND FSR.EZCANCELFLAG  = '0'
    </statement>

    <!-- QC#50008 -->
    <statement id="getMdsePrimPkgUomCd" parameterClass="Map" resultClass="String">
        SELECT
            MSP.PKG_UOM_CD
        FROM
             MDSE_STORE_PKG MSP
            ,PKG_UOM PU
        WHERE
            MSP.GLBL_CMPY_CD     = #glblCmpyCd#
        AND MSP.MDSE_CD          = #mdseCd#
        AND MSP.PRIM_PKG_UOM_FLG = #flgOnY#
        AND MSP.EZCANCELFLAG     = '0'
    </statement>
    <!-- START 2022/10/21 N.Takatsu [QC#60603,ADD] -->
    <statement id="countSubWarehouseTransferControlList" parameterClass="Map" resultClass="BigDecimal">
        SELECT 
            COUNT(1) CNT
        FROM   RTL_WH RTW
             ,SWH_TRNSF_CTRL STC
        WHERE  
               RTW.GLBL_CMPY_CD    = #glblCmpyCd#
        AND    RTW.RTL_WH_CD       = #rtlWhCd#
        AND    RTW.EZCANCELFLAG    = '0'
        AND    STC.GLBL_CMPY_CD    = RTW.GLBL_CMPY_CD
        AND    STC.RTL_WH_CATG_CD  = RTW.RTL_WH_CATG_CD
        AND    STC.WH_SYS_TP_CD    = RTW.WH_SYS_TP_CD
        AND    STC.EZCANCELFLAG    = '0'
    </statement>
    <!-- END 2022/10/21 N.Takatsu [QC#60603,ADD] -->
</sqlMap>
