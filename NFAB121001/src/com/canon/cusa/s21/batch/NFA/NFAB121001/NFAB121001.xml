<?xml version="1.0" encoding="UTF-8"?>

<sqlMap namespace="NFAB121001">

    <statement id="getJrnlEntry" parameterClass="Map" resultClass="Map">
        SELECT
            JE.JRNL_ENTRY_PK
        FROM
            JRNL_ENTRY     JE
        WHERE
                JE.GLBL_CMPY_CD          = #glblCmpyCd#
            AND JE.GL_SEND_CPLT_FLG      = #glSendCpltFlgN#
            <iterate property="changeTargetCcList" var="coaCcCd[]" open="AND( JE.CR_COA_CC_CD IN (" close=")" conjunction=",">
            #coaCcCd[]#
            </iterate>
            <iterate property="changeTargetCcList" var="coaCcCd[]" open="OR JE.DR_COA_CC_CD IN (" close="))" conjunction=",">
            #coaCcCd[]#
            </iterate>
            AND JE.EZCANCELFLAG          = '0'
        ORDER BY
            JE.JRNL_ENTRY_PK
    </statement>

    <statement id="getPordCcMap" parameterClass="Map" resultClass="Map">
        SELECT
            R.RPT_COND_CONST_VAL_TXT_01 AS COA_PROD_CD
           ,R.RPT_COND_CONST_VAL_TXT_03 AS COA_CC_CD
        FROM
            RPT_COND_CONST R
        WHERE
                R.GLBL_CMPY_CD           = #glblCmpyCd#
            AND R.RPT_COND_CONST_GRP_ID  = #rptCondConstGrpId# 
            AND R.EZCANCELFLAG           = '0'
    </statement>

    <statement id="getAjeInvAcctDistPkCr" parameterClass="Map" resultClass="Map">
        SELECT
            AJE_CR.AJE_INV_ACCT_DIST_PK
        FROM
            AJE_INV_ACCT_DIST AJE_DR
           ,AJE_INV_ACCT_DIST AJE_CR
        WHERE
                AJE_DR.GLBL_CMPY_CD         = #glblCmpyCd#
            AND AJE_DR.AJE_INV_ACCT_DIST_PK = #ajeIntfcPk#
            AND AJE_DR.AJE_INV_ACCT_CLS_CD  &lt;&gt; #ajeInvAcctClsCd88#
            AND AJE_DR.EZCANCELFLAG         = '0'
            AND AJE_DR.GLBL_CMPY_CD         = AJE_CR.GLBL_CMPY_CD
            AND AJE_DR.INV_NUM              = AJE_CR.INV_NUM
            AND AJE_DR.INV_BOL_LINE_NUM     = AJE_CR.INV_BOL_LINE_NUM
            AND AJE_DR.INV_LINE_NUM         = AJE_CR.INV_LINE_NUM
            AND AJE_DR.INV_LINE_SUB_NUM     = AJE_CR.INV_LINE_SUB_NUM
            AND AJE_DR.INV_LINE_SUB_TRX_NUM = AJE_CR.INV_LINE_SUB_TRX_NUM
            AND AJE_DR.AJE_INV_ACCT_CLS_CD  = AJE_CR.AJE_INV_ACCT_CLS_CD
            AND AJE_DR.DS_INV_SLS_CR_PK     = AJE_CR.DS_INV_SLS_CR_PK 
            AND AJE_CR.DR_CR_TP_CD          = #crDrTpC#
            AND AJE_CR.EZCANCELFLAG         = '0'
    </statement>


    <statement id="getAjeInvAcctDistPkDr" parameterClass="Map" resultClass="Map">
        SELECT
            AJE_DR.AJE_INV_ACCT_DIST_PK
        FROM
            AJE_INV_ACCT_DIST AJE_DR
        WHERE
                AJE_DR.GLBL_CMPY_CD         = #glblCmpyCd#
            AND AJE_DR.AJE_INV_ACCT_DIST_PK = #ajeIntfcPk#
            AND AJE_DR.AJE_INV_ACCT_CLS_CD  &lt;&gt; #ajeInvAcctClsCd88#
            AND AJE_DR.EZCANCELFLAG         = '0'
    </statement>

</sqlMap>
