<?xml version="1.0" encoding="UTF-8"?>
<sqlMap namespace="NSAL0530Query">
    <typeAlias alias="NSAL0530_ASMsg"  type="business.blap.NSAL0530.NSAL0530_ASMsg"/>

    <statement id="getSearchData" parameterClass="Map" resultMap="result.getSearchData">
        WITH TRG_SLN_SQ AS (
            SELECT DISTINCT
                CONF.SVC_SLN_SQ      AS SVC_SLN_SQ
            FROM
                SVC_CONFIG_MSTR CONF
            WHERE
                    CONF.GLBL_CMPY_CD       =    #glblCmpyCd#
                AND CONF.EZCANCELFLAG       =    '0'
                <isNotNull property="svcSlnsq">
                AND CONF.SVC_SLN_SQ         LIKE #svcSlnsq#
                </isNotNull>
                <isNotNull property="svcSlnNm">
                AND CONF.SVC_SLN_NM         LIKE #svcSlnNm#
                </isNotNull>
                <isNotNull property="svcConfigMstrPk">
                AND CONF.SVC_CONFIG_MSTR_PK LIKE #svcConfigMstrPk#
                </isNotNull>
                <isEqual  property="srchMachFlg" compareValue="Y">
                AND EXISTS (
                    SELECT
                        *
                    FROM
                        SVC_MACH_MSTR MACH
                    WHERE
                            MACH.GLBL_CMPY_CD             =    CONF.GLBL_CMPY_CD
                        AND MACH.SVC_CONFIG_MSTR_PK       =    CONF.SVC_CONFIG_MSTR_PK
                        AND MACH.EZCANCELFLAG             =    '0'
                        <isNotNull property="svcMachMstrPk">
                        AND MACH.SVC_MACH_MSTR_PK         =    #svcMachMstrPk#
                        </isNotNull>
                        <isNotNull property="istlDt">
                        AND MACH.ISTL_DT                  =    #istlDt#
                        </isNotNull>
                        <isNotNull property="serNum">
                        AND MACH.SER_NUM                  LIKE #serNum#
                        </isNotNull>
                        <isNotNull property="custMachCtrlNum">
                        AND MACH.CUST_MACH_CTRL_NUM       LIKE #custMachCtrlNum#
                        </isNotNull>
                        <isNotNull property="custIssPoNum">
                        <!-- START 2019/03/13 S.Kitamura [QC#30747, MOD]  -->
                        <!-- AND MACH.CUST_ISS_PO_NUM          LIKE #custIssPoNum# -->
                        AND UPPER(MACH.CUST_ISS_PO_NUM)   LIKE #custIssPoNum#
                        <!-- END 2019/03/13 S.Kitamura [QC#30747, MOD]  -->
                        </isNotNull>
                        <isNotNull property="mdseCd">
                        AND MACH.MDSE_CD                  LIKE #mdseCd#
                        </isNotNull>
                        <isNotNull property="cpoOrdNum">
                        AND MACH.CPO_ORD_NUM              LIKE #cpoOrdNum#
                        </isNotNull>
                        <isNotNull property="billToCustCd">
                        AND MACH.OWNR_ACCT_NUM            LIKE #billToCustCd#
                        </isNotNull>
                        <isNotNull property="sellToCustCd">
                        AND MACH.BILL_TO_ACCT_NUM         LIKE #sellToCustCd#
                        </isNotNull>
                        <isNotNull property="shipToCustCd">
                        AND MACH.CUR_LOC_ACCT_NUM         LIKE #shipToCustCd#
                        </isNotNull>
                        <isNotNull property="shipToCustAddr">
                        AND EXISTS (
                            SELECT
                                *
                            FROM
                                SHIP_TO_CUST  SHIP
                            WHERE
                                    SHIP.GLBL_CMPY_CD             =    MACH.GLBL_CMPY_CD
                                AND SHIP.SHIP_TO_CUST_CD          =    MACH.CUR_LOC_NUM
                                AND SHIP.EZCANCELFLAG             =    '0'
                                AND (
                                        SHIP.FIRST_LINE_ADDR      LIKE #shipToCustAddr#
                                    OR  SHIP.SCD_LINE_ADDR        LIKE #shipToCustAddr#
                                    OR  SHIP.THIRD_LINE_ADDR      LIKE #shipToCustAddr#
                                    OR  SHIP.FRTH_LINE_ADDR       LIKE #shipToCustAddr#
                                    OR  SHIP.CTY_ADDR             LIKE #shipToCustAddr#
                                    OR  SHIP.ST_CD                LIKE #shipToCustAddr#
                                    OR  SHIP.POST_CD              LIKE #shipToCustAddr#
                                )
                        )
                        </isNotNull>
                        <isNotNull property="shipToCustLocNm">
                        AND EXISTS (
                            SELECT
                                *
                            FROM
                                SELL_TO_CUST  STC
                            WHERE
                                    STC.GLBL_CMPY_CD              =    MACH.GLBL_CMPY_CD
                                AND STC.SELL_TO_CUST_CD           =    MACH.CUR_LOC_ACCT_NUM
                                AND STC.EZCANCELFLAG              =    '0'
                                AND STC.DS_ACCT_NM                LIKE #shipToCustLocNm#
                        )
                        </isNotNull>
                )
                </isEqual>
                <isEqual  property="srchBillFlg" compareValue="Y">
                AND EXISTS (
                    SELECT
                        *
                    FROM
                        SVC_MACH_MSTR MACH
                    WHERE
                            MACH.GLBL_CMPY_CD             =    CONF.GLBL_CMPY_CD
                        AND MACH.SVC_CONFIG_MSTR_PK       =    CONF.SVC_CONFIG_MSTR_PK
                        AND MACH.EZCANCELFLAG             =    '0'
                        <isNotNull property="billToCustAddr">
                        AND EXISTS (
                            SELECT
                                *
                            FROM
                                BILL_TO_CUST  BILL
                            WHERE
                                    BILL.GLBL_CMPY_CD             =    MACH.GLBL_CMPY_CD
                                AND BILL.BILL_TO_CUST_CD          =    MACH.OWNR_LOC_NUM
                                AND BILL.EZCANCELFLAG             =    '0'
                                AND (
                                        BILL.FIRST_LINE_ADDR      LIKE #billToCustAddr#
                                    OR  BILL.SCD_LINE_ADDR        LIKE #billToCustAddr#
                                    OR  BILL.THIRD_LINE_ADDR      LIKE #billToCustAddr#
                                    OR  BILL.FRTH_LINE_ADDR       LIKE #billToCustAddr#
                                    OR  BILL.CTY_ADDR             LIKE #billToCustAddr#
                                    OR  BILL.ST_CD                LIKE #billToCustAddr#
                                    OR  BILL.POST_CD              LIKE #billToCustAddr#
                                )
                        )
                        </isNotNull>
                        <isNotNull property="billToCustLocNm">
                        AND EXISTS (
                            SELECT
                                *
                            FROM
                                SELL_TO_CUST  STC
                            WHERE
                                    STC.GLBL_CMPY_CD              =    MACH.GLBL_CMPY_CD
                                AND STC.SELL_TO_CUST_CD           =    MACH.OWNR_ACCT_NUM
                                AND STC.EZCANCELFLAG              =    '0'
                                AND STC.DS_ACCT_NM                LIKE #billToCustLocNm#
                        )
                        </isNotNull>
                )
                </isEqual>
                <isEqual  property="srchSellFlg" compareValue="Y">
                AND EXISTS (
                    SELECT
                        *
                    FROM
                        SVC_MACH_MSTR MACH
                    WHERE
                            MACH.GLBL_CMPY_CD             =    CONF.GLBL_CMPY_CD
                        AND MACH.SVC_CONFIG_MSTR_PK       =    CONF.SVC_CONFIG_MSTR_PK
                        AND MACH.EZCANCELFLAG             =    '0'
                        <isNotNull property="sellToCustAddr">
                        AND EXISTS (
                            SELECT
                                *
                            FROM
                                BILL_TO_CUST  BILL
                            WHERE
                                    BILL.GLBL_CMPY_CD             =    MACH.GLBL_CMPY_CD
                                AND BILL.BILL_TO_CUST_CD          =    MACH.BILL_TO_LOC_NUM
                                AND BILL.EZCANCELFLAG             =    '0'
                                AND (
                                        BILL.FIRST_LINE_ADDR      LIKE #sellToCustAddr#
                                    OR  BILL.SCD_LINE_ADDR        LIKE #sellToCustAddr#
                                    OR  BILL.THIRD_LINE_ADDR      LIKE #sellToCustAddr#
                                    OR  BILL.FRTH_LINE_ADDR       LIKE #sellToCustAddr#
                                    OR  BILL.CTY_ADDR             LIKE #sellToCustAddr#
                                    OR  BILL.ST_CD                LIKE #sellToCustAddr#
                                    OR  BILL.POST_CD              LIKE #sellToCustAddr#
                                )
                        )
                        </isNotNull>
                        <isNotNull property="sellToCustLocNm">
                        AND EXISTS (
                            SELECT
                                *
                            FROM
                                SELL_TO_CUST  STC
                            WHERE
                                    STC.GLBL_CMPY_CD              =    MACH.GLBL_CMPY_CD
                                AND STC.SELL_TO_CUST_CD           =    MACH.BILL_TO_ACCT_NUM
                                AND STC.EZCANCELFLAG              =    '0'
                                AND STC.DS_ACCT_NM                LIKE #sellToCustLocNm#
                        )
                        </isNotNull>
                )
                </isEqual>
                <isNotNull  property="tMdlNm">
                AND EXISTS (
                    SELECT
                        *
                    FROM
                        MDL_NM MDL
                    WHERE
                            MDL.T_GLBL_CMPY_CD          =    CONF.GLBL_CMPY_CD
                        AND MDL.T_MDL_ID                =    CONF.MDL_ID
                        AND MDL.EZCANCELFLAG            =    '0'
                        AND MDL.T_MDL_NM                LIKE #tMdlNm#
                )
                </isNotNull>
                <isNotNull  property="coaMdseTpCd">
                AND EXISTS (
                    SELECT
                        *
                    FROM
                         SVC_MACH_MSTR MACH
                        ,MDSE          MDS
                    WHERE
                            MACH.GLBL_CMPY_CD             =    CONF.GLBL_CMPY_CD
                        AND MACH.SVC_CONFIG_MSTR_PK       =    CONF.SVC_CONFIG_MSTR_PK
                        AND MACH.EZCANCELFLAG             =    '0'
                        AND MACH.GLBL_CMPY_CD             =    MDS.GLBL_CMPY_CD
                        AND MACH.MDSE_CD                  =    MDS.MDSE_CD
                        AND MDS.EZCANCELFLAG              =    '0'
                        AND MDS.COA_MDSE_TP_CD            =    #coaMdseTpCd#
                )
                </isNotNull>
                <isNotNull  property="dsContrNum">
                AND EXISTS (
                    SELECT
                        *
                    FROM
                         SVC_MACH_MSTR MACH
                        ,DS_CONTR_DTL  DCL
                        ,DS_CONTR      DC
                    WHERE
                            MACH.GLBL_CMPY_CD             =    CONF.GLBL_CMPY_CD
                        AND MACH.SVC_CONFIG_MSTR_PK       =    CONF.SVC_CONFIG_MSTR_PK
                        AND MACH.EZCANCELFLAG             =    '0'
                        AND MACH.GLBL_CMPY_CD             =    DCL.GLBL_CMPY_CD
                        AND MACH.SVC_MACH_MSTR_PK         =    DCL.SVC_MACH_MSTR_PK
                        AND DCL.EZCANCELFLAG              =    '0'
                        AND DCL.GLBL_CMPY_CD              =    DC.GLBL_CMPY_CD
                        AND DCL.DS_CONTR_PK               =    DC.DS_CONTR_PK
                        AND DC.EZCANCELFLAG               =    '0'
                        AND DC.DS_CONTR_NUM               LIKE #dsContrNum#
                )
                </isNotNull>
        )
        SELECT
             B.SVC_SLN_SQ_A            AS SVC_SLN_SQ_A
            ,B.SVC_SLN_NM_A            AS SVC_SLN_NM_A
            ,B.XX_LOC_NM_A1            AS XX_LOC_NM_A1
            ,B.XX_LOC_NM_A2            AS XX_LOC_NM_A2
            ,B.XX_LOC_NM_A3            AS XX_LOC_NM_A3
            ,B.SVC_SLN_CRAT_DT_A       AS SVC_SLN_CRAT_DT_A
            ,B.SVC_SLN_CRAT_PSN_CD_A   AS SVC_SLN_CRAT_PSN_CD_A
            ,B.SVC_SLN_UPD_DT_A        AS SVC_SLN_UPD_DT_A
            <!-- START 2016/11/28 K.Kojima [QC#14204, ADD] -->
            ,B.XX_REC_HIST_CRAT_TS_A
            ,B.XX_REC_HIST_CRAT_BY_NM_A
            ,B.XX_REC_HIST_UPD_TS_A
            ,B.XX_REC_HIST_UPD_BY_NM_A
            ,B.XX_REC_HIST_TBL_NM_A
            <!-- END 2016/11/28 K.Kojima [QC#14204, ADD] -->
        FROM
            (
                SELECT
                     CRAT_SLN.SVC_SLN_SQ           AS SVC_SLN_SQ_A
                    ,CRAT_SLN.SVC_SLN_NM           AS SVC_SLN_NM_A
                    ,(
                        SELECT
                            CASE WHEN A.CNT = 1
                                THEN (
                                    SELECT
                                         MIN(BILL1.LOC_NM)
                                    FROM
                                         SVC_CONFIG_MSTR CONF1
                                        ,SVC_MACH_MSTR   MACH1
                                        ,BILL_TO_CUST    BILL1
                                    WHERE
                                            CONF1.GLBL_CMPY_CD       = #glblCmpyCd#
                                        AND CONF1.SVC_SLN_SQ         = CRAT_SLN.SVC_SLN_SQ
                                        AND CONF1.EZCANCELFLAG       = '0'
                                        AND CONF1.GLBL_CMPY_CD       = MACH1.GLBL_CMPY_CD
                                        AND CONF1.SVC_CONFIG_MSTR_PK = MACH1.SVC_CONFIG_MSTR_PK
                                        AND MACH1.EZCANCELFLAG       = '0'
                                        AND MACH1.GLBL_CMPY_CD       = BILL1.GLBL_CMPY_CD
                                        AND MACH1.OWNR_LOC_NUM       = BILL1.BILL_TO_CUST_CD
                                        AND BILL1.EZCANCELFLAG       = '0'
                                    GROUP BY
                                        BILL1.BILL_TO_CUST_CD)
                                ELSE ''
                            END AS LOC_NM
                        FROM
                            (
                                SELECT
                                    COUNT(*) AS CNT
                                FROM (
                                    SELECT
                                         BILL1.BILL_TO_CUST_CD
                                    FROM
                                         SVC_CONFIG_MSTR CONF1
                                        ,SVC_MACH_MSTR   MACH1
                                        ,BILL_TO_CUST    BILL1
                                    WHERE
                                            CONF1.GLBL_CMPY_CD       = #glblCmpyCd#
                                        AND CONF1.SVC_SLN_SQ         = CRAT_SLN.SVC_SLN_SQ
                                        AND CONF1.EZCANCELFLAG       = '0'
                                        AND CONF1.GLBL_CMPY_CD       = MACH1.GLBL_CMPY_CD
                                        AND CONF1.SVC_CONFIG_MSTR_PK = MACH1.SVC_CONFIG_MSTR_PK
                                        AND MACH1.EZCANCELFLAG       = '0'
                                        AND MACH1.GLBL_CMPY_CD       = BILL1.GLBL_CMPY_CD
                                        AND MACH1.OWNR_LOC_NUM       = BILL1.BILL_TO_CUST_CD
                                        AND BILL1.EZCANCELFLAG       = '0'
                                    GROUP BY
                                        BILL1.BILL_TO_CUST_CD
                                )
                            ) A
                     ) AS XX_LOC_NM_A1
                    ,(
                        SELECT
                            CASE WHEN A.CNT = 1
                                THEN (
                                    SELECT
                                         MIN(BILL1.LOC_NM)
                                    FROM
                                         SVC_CONFIG_MSTR CONF1
                                        ,SVC_MACH_MSTR   MACH1
                                        ,BILL_TO_CUST    BILL1
                                    WHERE
                                            CONF1.GLBL_CMPY_CD       = #glblCmpyCd#
                                        AND CONF1.SVC_SLN_SQ         = CRAT_SLN.SVC_SLN_SQ
                                        AND CONF1.EZCANCELFLAG       = '0'
                                        AND CONF1.GLBL_CMPY_CD       = MACH1.GLBL_CMPY_CD
                                        AND CONF1.SVC_CONFIG_MSTR_PK = MACH1.SVC_CONFIG_MSTR_PK
                                        AND MACH1.EZCANCELFLAG       = '0'
                                        AND MACH1.GLBL_CMPY_CD       = BILL1.GLBL_CMPY_CD
                                        AND MACH1.BILL_TO_LOC_NUM    = BILL1.BILL_TO_CUST_CD
                                        AND BILL1.EZCANCELFLAG       = '0'
                                    GROUP BY
                                        BILL1.BILL_TO_CUST_CD)
                                ELSE ''
                            END AS LOC_NM
                        FROM
                            (
                                SELECT
                                    COUNT(*) AS CNT
                                FROM (
                                    SELECT
                                         BILL1.BILL_TO_CUST_CD
                                    FROM
                                         SVC_CONFIG_MSTR CONF1
                                        ,SVC_MACH_MSTR   MACH1
                                        ,BILL_TO_CUST    BILL1
                                    WHERE
                                            CONF1.GLBL_CMPY_CD       = #glblCmpyCd#
                                        AND CONF1.SVC_SLN_SQ         = CRAT_SLN.SVC_SLN_SQ
                                        AND CONF1.EZCANCELFLAG       = '0'
                                        AND CONF1.GLBL_CMPY_CD       = MACH1.GLBL_CMPY_CD
                                        AND CONF1.SVC_CONFIG_MSTR_PK = MACH1.SVC_CONFIG_MSTR_PK
                                        AND MACH1.EZCANCELFLAG       = '0'
                                        AND MACH1.GLBL_CMPY_CD       = BILL1.GLBL_CMPY_CD
                                        AND MACH1.BILL_TO_LOC_NUM    = BILL1.BILL_TO_CUST_CD
                                        AND BILL1.EZCANCELFLAG       = '0'
                                    GROUP BY
                                        BILL1.BILL_TO_CUST_CD
                                )
                            ) A
                     ) AS XX_LOC_NM_A2
                    ,(
                        SELECT
                            CASE WHEN A.CNT = 1
                                THEN (
                                    SELECT
                                        MIN(CASE WHEN MACH1.ISTL_LOC_OVRD_FLG = 'Y' THEN MACH1.LOC_NM
                                                                                    ELSE SHIP1.LOC_NM
                                            END
                                        ) AS LOC_NM
                                    FROM
                                         SVC_CONFIG_MSTR CONF1
                                        ,SVC_MACH_MSTR   MACH1
                                        ,SHIP_TO_CUST    SHIP1
                                    WHERE
                                            CONF1.GLBL_CMPY_CD       = #glblCmpyCd#
                                        AND CONF1.SVC_SLN_SQ         = CRAT_SLN.SVC_SLN_SQ
                                        AND CONF1.EZCANCELFLAG       = '0'
                                        AND CONF1.GLBL_CMPY_CD       = MACH1.GLBL_CMPY_CD
                                        AND CONF1.SVC_CONFIG_MSTR_PK = MACH1.SVC_CONFIG_MSTR_PK
                                        AND MACH1.EZCANCELFLAG       = '0'
                                        AND MACH1.GLBL_CMPY_CD       = SHIP1.GLBL_CMPY_CD
                                        AND MACH1.CUR_LOC_NUM        = SHIP1.SHIP_TO_CUST_CD
                                        AND SHIP1.EZCANCELFLAG       = '0'
                                    GROUP BY
                                        SHIP1.SHIP_TO_CUST_CD)
                                ELSE ''
                            END AS LOC_NM
                        FROM
                            (
                                SELECT
                                    COUNT(*) AS CNT
                                FROM (
                                    SELECT
                                         SHIP1.SHIP_TO_CUST_CD
                                    FROM
                                         SVC_CONFIG_MSTR CONF1
                                        ,SVC_MACH_MSTR   MACH1
                                        ,SHIP_TO_CUST    SHIP1
                                    WHERE
                                            CONF1.GLBL_CMPY_CD       = #glblCmpyCd#
                                        AND CONF1.SVC_SLN_SQ         = CRAT_SLN.SVC_SLN_SQ
                                        AND CONF1.EZCANCELFLAG       = '0'
                                        AND CONF1.GLBL_CMPY_CD       = MACH1.GLBL_CMPY_CD
                                        AND CONF1.SVC_CONFIG_MSTR_PK = MACH1.SVC_CONFIG_MSTR_PK
                                        AND MACH1.EZCANCELFLAG       = '0'
                                        AND MACH1.GLBL_CMPY_CD       = SHIP1.GLBL_CMPY_CD
                                        AND MACH1.CUR_LOC_NUM        = SHIP1.SHIP_TO_CUST_CD
                                        AND SHIP1.EZCANCELFLAG       = '0'
                                    GROUP BY
                                        SHIP1.SHIP_TO_CUST_CD
                                )
                            ) A
                     ) AS XX_LOC_NM_A3
                    ,CRAT_SLN.SVC_SLN_CRAT_DT      AS SVC_SLN_CRAT_DT_A
                    ,CRAT_SLN.SVC_SLN_CRAT_PSN_CD  AS SVC_SLN_CRAT_PSN_CD_A
                    ,(
                        SELECT
                             MAX(CONF.SVC_SLN_UPD_DT)
                        FROM
                             SVC_CONFIG_MSTR CONF
                        WHERE
                                CONF.GLBL_CMPY_CD = #glblCmpyCd#
                            AND CONF.SVC_SLN_SQ   = CRAT_SLN.SVC_SLN_SQ
                            AND CONF.EZCANCELFLAG = '0'
                     ) AS SVC_SLN_UPD_DT_A
                    <!-- START 2016/11/28 K.Kojima [QC#14204, ADD] -->
                    ,CRAT_SLN.XX_REC_HIST_CRAT_TS_A
                    ,CRAT_SLN.XX_REC_HIST_CRAT_BY_NM_A
                    ,CRAT_SLN.XX_REC_HIST_UPD_TS_A
                    ,CRAT_SLN.XX_REC_HIST_UPD_BY_NM_A
                    ,CRAT_SLN.XX_REC_HIST_TBL_NM_A
                    <!-- END 2016/11/28 K.Kojima [QC#14204, ADD] -->
                FROM
                    (
                        SELECT
                             CONF.SVC_SLN_SQ           AS SVC_SLN_SQ
                            ,CONF.SVC_SLN_NM           AS SVC_SLN_NM
                            ,CONF.SVC_SLN_CRAT_DT      AS SVC_SLN_CRAT_DT
                            ,CONF.SVC_SLN_CRAT_PSN_CD  AS SVC_SLN_CRAT_PSN_CD
                            <!-- START 2016/11/28 K.Kojima [QC#14204, ADD] -->
                            ,CONF.XX_REC_HIST_CRAT_TS_A
                            ,CONF.XX_REC_HIST_CRAT_BY_NM_A
                            ,CONF.XX_REC_HIST_UPD_TS_A
                            ,CONF.XX_REC_HIST_UPD_BY_NM_A
                            ,CONF.XX_REC_HIST_TBL_NM_A
                            <!-- END 2016/11/28 K.Kojima [QC#14204, ADD] -->
                        FROM
                            (
                                SELECT
                                     CONF1.GLBL_CMPY_CD         AS GLBL_CMPY_CD
                                    ,CONF1.SVC_SLN_SQ           AS SVC_SLN_SQ
                                    ,CONF1.SVC_SLN_NM           AS SVC_SLN_NM
                                    ,CONF1.SVC_SLN_CRAT_DT      AS SVC_SLN_CRAT_DT
                                    ,CONF1.SVC_SLN_CRAT_PSN_CD  AS SVC_SLN_CRAT_PSN_CD
                                    <!-- START 2016/11/28 K.Kojima [QC#14204, ADD] -->
                                    ,CONF1.EZINTIME             AS XX_REC_HIST_CRAT_TS_A
                                    ,CONF1.EZINUSERID           AS XX_REC_HIST_CRAT_BY_NM_A
                                    ,CONF1.EZUPTIME             AS XX_REC_HIST_UPD_TS_A
                                    ,CONF1.EZUPUSERID           AS XX_REC_HIST_UPD_BY_NM_A
                                    ,CONF1.EZTABLEID            AS XX_REC_HIST_TBL_NM_A
                                    <!-- END 2016/11/28 K.Kojima [QC#14204, ADD] -->
                                    ,ROW_NUMBER() OVER(PARTITION BY CONF1.SVC_SLN_SQ ORDER BY CONF1.SVC_SLN_CRAT_DT) AS SQ_NO
                                FROM
                                     SVC_CONFIG_MSTR CONF1
                                    ,TRG_SLN_SQ
                                WHERE
                                        CONF1.GLBL_CMPY_CD = #glblCmpyCd#
                                    AND CONF1.SVC_SLN_SQ   = TRG_SLN_SQ.SVC_SLN_SQ
                                    AND CONF1.EZCANCELFLAG = '0'
                            ) CONF
                        WHERE
                                CONF.SQ_NO = 1
                    ) CRAT_SLN
                ORDER BY
                    SVC_SLN_SQ_A
            ) B
        WHERE
            ROWNUM &lt;= #rowNum#

    </statement>

    <resultMap id="result.getSearchData"      class="NSAL0530_ASMsg">
        <result property="svcSlnSq_A"         column="SVC_SLN_SQ_A"           javaType="EZDSBigDecimalItem"/>
        <result property="svcSlnNm_A"         column="SVC_SLN_NM_A"           javaType="EZDSStringItem"/>
        <result property="xxLocNm_A1"         column="XX_LOC_NM_A1"           javaType="EZDCStringItem"/>
        <result property="xxLocNm_A2"         column="XX_LOC_NM_A2"           javaType="EZDCStringItem"/>
        <result property="xxLocNm_A3"         column="XX_LOC_NM_A3"           javaType="EZDCStringItem"/>
        <result property="svcSlnCratDt_A"     column="SVC_SLN_CRAT_DT_A"      javaType="EZDSDateItem"/>
        <result property="svcSlnCratPsnCd_A"  column="SVC_SLN_CRAT_PSN_CD_A"  javaType="EZDSStringItem"/>
        <result property="svcSlnUpdDt_A"      column="SVC_SLN_UPD_DT_A"       javaType="EZDSDateItem"/>
        <!-- START 2016/11/28 K.Kojima [QC#14204, ADD] -->
        <result property="xxRecHistCratTs_A"   column="XX_REC_HIST_CRAT_TS_A"    javaType="EZDSStringItem"/>
        <result property="xxRecHistCratByNm_A" column="XX_REC_HIST_CRAT_BY_NM_A" javaType="EZDSStringItem"/>
        <result property="xxRecHistUpdTs_A"    column="XX_REC_HIST_UPD_TS_A"     javaType="EZDSStringItem"/>
        <result property="xxRecHistUpdByNm_A"  column="XX_REC_HIST_UPD_BY_NM_A"  javaType="EZDSStringItem"/>
        <result property="xxRecHistTblNm_A"    column="XX_REC_HIST_TBL_NM_A"     javaType="EZDSStringItem"/>
        <!-- END 2016/11/28 K.Kojima [QC#14204, ADD] -->
    </resultMap>

</sqlMap>
