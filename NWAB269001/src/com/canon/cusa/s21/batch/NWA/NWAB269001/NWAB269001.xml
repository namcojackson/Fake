<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NWAB269001">
    <statement id="getSearchAquNum" parameterClass="Map" resultClass="String">
        SELECT
              IO.AQU_NUM 
        FROM
              DS_IMPT_ORD IO 
        WHERE
                IO.GLBL_CMPY_CD  = #glblCmpyCd# 
            AND IO.EZCANCELFLAG  = '0' 
            AND IO.CPO_SRC_TP_CD = #cpoSrcTpCd# 
            <iterate property="imptStsCdList" var="imptStsCd[]" open="AND IO.IMPT_STS_CD IN (" close=")" conjunction= ", " > 
                #imptStsCd[]#
            </iterate>
            AND NOT EXISTS ( 
                SELECT
                      1 
                FROM
                      DOC_MGT_SCAN_TRX DMST 
                WHERE
                        IO.GLBL_CMPY_CD = DMST.GLBL_CMPY_CD 
                    AND IO.EZCANCELFLAG = DMST.EZCANCELFLAG 
                    AND IO.AQU_NUM      = DMST.AQU_NUM
            ) 
    </statement>

    <statement id="getSearchDocMgtFld" parameterClass="Map" resultClass="Map">
        SELECT
              DMD.DOC_MGT_CATG_CD
            , DMC.DOC_MGT_CATG_DESC_TXT
            , DMC.DOC_MGT_CATG_NUM
            , DMD.DOC_MGT_FLD_CD
            , DMF.DOC_MGT_FLD_DESC_TXT
            , DMF.DOC_MGT_FLD_NUM 
        FROM
              DOC_MGT_IDX_ATTRB_DFN DMD
            , DOC_MGT_CATG          DMC
            , DOC_MGT_FLD           DMF
        WHERE
                DMD.GLBL_CMPY_CD    = #glblCmpyCd#
            AND DMD.EZCANCELFLAG    = '0'
            AND DMD.DOC_MGT_CATG_CD = #docMgtCatgCd#

            AND DMD.GLBL_CMPY_CD    = DMC.GLBL_CMPY_CD
            AND DMC.EZCANCELFLAG    = '0'
            AND DMD.DOC_MGT_CATG_CD = DMC.DOC_MGT_CATG_CD

            AND DMD.GLBL_CMPY_CD    = DMF.GLBL_CMPY_CD
            AND DMF.EZCANCELFLAG    = '0'
            AND DMD.DOC_MGT_FLD_CD  = DMF.DOC_MGT_FLD_CD 
            <iterate property="docMgtFldDescTxtList" var="docMgtFldDescTxt[]" open="AND DMF.DOC_MGT_FLD_DESC_TXT IN (" close=")" conjunction= ", " >
                #docMgtFldDescTxt[]#
            </iterate>
        ORDER BY
              DMF.DOC_MGT_FLD_CD
    </statement>
</sqlMap>

