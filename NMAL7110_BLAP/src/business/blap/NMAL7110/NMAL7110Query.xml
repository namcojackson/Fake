<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NMAL7110Query">

    <typeAlias alias="NMAL7110_ASMsg"  type="business.blap.NMAL7110.NMAL7110_ASMsg"/>

    <statement id="getPrdcContrList" parameterClass="Map" resultMap="result.getPrdcContrList">
        SELECT
            PC.PRC_CONTR_PK                     -- Contract ID
            ,PC.PRC_CONTR_NM                    -- Price Contract Name
            ,PC.PRC_CONTR_NUM                   -- Price Contract
            ,PC.ASSN_PGM_CONTR_FLG              -- CSAP Contract
            ,PC.EFF_FROM_DT                     -- Effective Date From
            ,PC.EFF_THRU_DT                     -- Effective Date To
            ,PC.ACTV_FLG                        -- Status
        FROM
            PRC_CONTR   PC
        WHERE 
            PC.GLBL_CMPY_CD     = #glblCmpyCd#
            AND PC.EZCANCELFLAG = '0'
            <isNotNull property="prcContrNum">
                AND PC.PRC_CONTR_NUM LIKE #prcContrNum#
            </isNotNull>
            <isNotNull property="prcContrNm">
                AND PC.PRC_CONTR_NM LIKE #prcContrNm#
            </isNotNull>
            <isNotNull property="assnPgmContrFlg">
                AND PC.ASSN_PGM_CONTR_FLG = #assnPgmContrFlg#
            </isNotNull>
            <isNotNull property="prcContrCustBidNum">
                AND PC.PRC_CONTR_CUST_BID_NUM LIKE #prcContrCustBidNum#
            </isNotNull>
            <isNotNull property="lineBizTpCd">
                AND PC.LINE_BIZ_TP_CD = #lineBizTpCd#
            </isNotNull>
            <isNotNull property="effFromDt">
                AND PC.EFF_FROM_DT = #effFromDt#
            </isNotNull>
            <isNotNull property="effThruDt">
                AND NVL(PC.EFF_THRU_DT,'99991231') = #effThruDt#
            </isNotNull>
            <isNotNull property="actvFlg">
                AND PC.ACTV_FLG = #actvFlg#
            </isNotNull>
    </statement>

    <resultMap id="result.getPrdcContrList" class="NMAL7110_ASMsg">
        <result property="prcContrPk_A"         column="PRC_CONTR_PK"           javaType="EZDCBigDecimalItem"/>
        <result property="prcContrNm_A"         column="PRC_CONTR_NM"           javaType="EZDSStringItem"/>
        <result property="prcContrNum_A"        column="PRC_CONTR_NUM"          javaType="EZDSStringItem"/>
        <result property="assnPgmContrFlg_A"    column="ASSN_PGM_CONTR_FLG"     javaType="EZDSStringItem"/>
        <result property="effFromDt_A"          column="EFF_FROM_DT"            javaType="EZDCDateItem"/>
        <result property="effThruDt_A"          column="EFF_THRU_DT"            javaType="EZDCDateItem"/>
        <result property="actvFlg_A"            column="ACTV_FLG"               javaType="EZDSStringItem"/>
    </resultMap>

    <statement id="getSavedSearchOptionList" parameterClass="Map" resultClass="Map">
        SELECT
                  SSO.SRCH_OPT_PK
                , SSO.SRCH_OPT_NM
            FROM
                SAVE_SRCH_OPT SSO 
            WHERE
                SSO.GLBL_CMPY_CD        = #glblCmpyCd#
                AND SSO.SRCH_OPT_APL_ID = #srchOptAplId#
                AND SSO.SRCH_OPT_USR_ID = #srchOptUsrId#
                AND SSO.EZCANCELFLAG    = '0'
            ORDER BY
                  SSO.SRCH_OPT_NM
    </statement>
</sqlMap>

    