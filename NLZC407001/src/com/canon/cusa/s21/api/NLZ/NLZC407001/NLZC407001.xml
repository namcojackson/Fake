<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NLZC407001">

    <statement id="getRwsPutAwaySerWrkList" parameterClass="Map" resultClass="Map">
        SELECT
            RPAW.SCE_ORD_TP_CD                 SCE_ORD_TP_CD
           ,RPAW.RWS_NUM                       RWS_NUM
           ,RPAW.RWS_DTL_LINE_NUM              RWS_DTL_LINE_NUM
           ,RPAW.RWS_REF_NUM                   RWS_REF_NUM
           ,RPAW.MDSE_CD                       MDSE_CD
           ,RPAW.INVTY_STK_STS_CD              INVTY_STK_STS_CD
           ,RPAW.RWS_STK_DT_TM_TS              RWS_STK_DT_TM_TS
           ,RPAW.RWS_STK_QTY                   RWS_STK_QTY
           ,RPAW.WRK_TRX_ID                    WRK_TRX_ID
           ,RPAW.SQ_ID                         SQ_ID
           ,MD.INSTL_BASE_CTRL_FLG             INSTL_BASE_CTRL_FLG
           <!-- START 2022/1/17 A.Marte [QC#59357, MOD] -->
           <!--,RD.SER_NUM_TAKE_FLG                             AS SER_NUM_TAKE_FLG-->
           ,CASE
               WHEN MD.RCV_SER_TAKE_FLG  = 'Y' THEN 'Y'
               WHEN MD.SHPG_SER_TAKE_FLG = 'Y' THEN 'Y'
               ELSE 'N'
           END SER_NUM_TAKE_FLG
           <!-- END 2022/1/17 A.Marte [QC#59357, MOD] -->
           ,RH.PO_RCV_TRX_HDR_NUM              PO_RCV_TRX_HDR_NUM
           ,RD.PO_RCV_TRX_LINE_NUM             PO_RCV_TRX_LINE_NUM
           ,RH.SVC_CONFIG_MSTR_PK              SVC_CONFIG_MSTR_PK
           ,SO.TRX_HDR_NUM                     SO_TRX_HDR_NUM
           ,SO.TRX_LINE_NUM                    SO_TRX_LINE_NUM
           ,SO.TRX_LINE_SUB_NUM                SO_TRX_LINE_SUB_NUM
           ,SD.TRX_HDR_NUM                     SD_TRX_HDR_NUM
           ,SD.TRX_LINE_NUM                    SD_TRX_LINE_NUM
           ,RD.INVTY_LOC_CD                    INVTY_LOC_CD
           ,RD.SHIP_FROM_INVTY_LOC_CD          SHIP_FROM_INVTY_LOC_CD
           ,IO.CMPY_INVTY_FLG                  CMPY_INVTY_FLG
           ,RH.TRX_ORD_NUM                     TRX_ORD_NUM
           ,RD.TRX_LINE_NUM                    TRX_LINE_NUM
           ,RD.TRX_LINE_SUB_NUM                TRX_LINE_SUB_NUM
           ,RD.TRX_CD                          TRX_CD
           ,RH.FROM_LOC_CD                     FROM_LOC_CD
           ,RD.RTL_WH_CD                       RTL_WH_CD
           ,RH.SER_ALLOC_TRX_HDR_NUM           SER_ALLOC_TRX_HDR_NUM
           ,RH.SRC_ORD_NUM
           ,RWH.INVTY_ACCT_CD
           ,SD.RMV_CONFIG_FLG
           ,SD.PICK_SVC_CONFIG_MSTR_PK
           ,NVL(RH.SVC_CONFIG_MSTR_PK, DCRD.SVC_CONFIG_MSTR_PK) ORD_SVC_CONFIG_MSTR_PK
           ,NVL(RSCM.MDL_ID, OSCM.MDL_ID)                       ORD_MDL_ID
           ,DCRD.DS_ORD_POSN_NUM               DS_ORD_POSN_NUM
           ,S.MDL_ID AS SO_MDL_ID
        FROM
            RWS_PUT_AWAY_WRK RPAW
           ,RWS_HDR          RH
           ,RWS_DTL          RD
           ,MDSE             MD
           ,SHPG_ORD_DTL     SO
           ,SHPG_ORD_DTL     SD
           ,SHPG_ORD         S
           ,RTL_WH           RWH
           ,INVTY_OWNR       IO
           ,DS_CPO_RTRN_DTL  DCRD
           ,SVC_CONFIG_MSTR  RSCM
           ,SVC_CONFIG_MSTR  OSCM
        WHERE
            RPAW.GLBL_CMPY_CD          = #glblCmpyCd#
        AND RPAW.RWS_NUM               = #rwsNum#
        AND RPAW.WRK_TRX_ID            = #wrkTrxId#
        AND RPAW.SQ_ID                 = #sqId#
        AND RPAW.SVC_MACH_PROC_STS_CD  = #svcMachProcStsCd#
        AND RPAW.EZCANCELFLAG          = '0'
        AND RH.GLBL_CMPY_CD            = RPAW.GLBL_CMPY_CD
        AND RH.RWS_NUM                 = RPAW.RWS_NUM
        AND RH.EZCANCELFLAG            = '0'
        AND RD.GLBL_CMPY_CD            = RPAW.GLBL_CMPY_CD
        AND RD.RWS_NUM                 = RPAW.RWS_NUM
        AND RD.RWS_DTL_LINE_NUM        = RPAW.RWS_DTL_LINE_NUM
        AND RD.EZCANCELFLAG            = '0'
        AND RPAW.GLBL_CMPY_CD          = MD.GLBL_CMPY_CD
        AND RPAW.MDSE_CD               = MD.MDSE_CD
        AND MD.EZCANCELFLAG            = '0'
        AND RWH.GLBL_CMPY_CD           = RD.GLBL_CMPY_CD
        AND RWH.RTL_WH_CD              = RD.RTL_WH_CD
        AND RWH.EZCANCELFLAG           = '0'
        AND IO.GLBL_CMPY_CD            = RWH.GLBL_CMPY_CD
        AND IO.INVTY_OWNR_CD           = RWH.INVTY_OWNR_CD
        AND IO.EZCANCELFLAG            = '0'
        AND RH.GLBL_CMPY_CD            = SO.GLBL_CMPY_CD (+)
        AND RH.PO_RCV_TRX_HDR_NUM      = SO.SO_NUM (+)
        AND RD.PO_RCV_TRX_LINE_NUM     = SO.SO_SLP_NUM(+)
        AND SO.EZCANCELFLAG (+)        = '0'
        AND RD.GLBL_CMPY_CD            = SD.GLBL_CMPY_CD(+)
        AND RH.TRX_ORD_NUM             = SD.SO_NUM(+)
        AND RD.TRX_LINE_NUM            = SD.SO_SLP_NUM(+)
        AND SD.EZCANCELFLAG (+)        = '0'
        AND SD.GLBL_CMPY_CD            = S.GLBL_CMPY_CD(+)
        AND SD.SO_NUM                  = S.SO_NUM(+)
        AND S.EZCANCELFLAG (+)         = '0'
        AND RH.GLBL_CMPY_CD            = DCRD.GLBL_CMPY_CD(+)
        AND RH.TRX_ORD_NUM             = DCRD.CPO_ORD_NUM(+)
        AND RD.TRX_LINE_NUM            = DCRD.DS_CPO_RTRN_LINE_NUM(+)
        AND RD.TRX_LINE_SUB_NUM        = DCRD.DS_CPO_RTRN_LINE_SUB_NUM(+)
        AND DCRD.EZCANCELFLAG (+)      = '0'
        AND RH.GLBL_CMPY_CD            = RSCM.GLBL_CMPY_CD(+)
        AND RH.SVC_CONFIG_MSTR_PK      = RSCM.SVC_CONFIG_MSTR_PK(+)
        AND RSCM.EZCANCELFLAG (+)      = '0'
        AND DCRD.GLBL_CMPY_CD          = OSCM.GLBL_CMPY_CD(+)
        AND DCRD.SVC_CONFIG_MSTR_PK    = OSCM.SVC_CONFIG_MSTR_PK(+)
        AND OSCM.EZCANCELFLAG (+)      = '0'
    </statement>

    <statement id="getRwsPutAwaySerList" parameterClass="Map" resultClass="Map">
        SELECT
            RPASW.SER_NUM           SER_NUM
           ,RPASW.MDSE_CD           MDSE_CD
           ,RPASW.RWS_NUM           RWS_NUM
           ,RPASW.RWS_DTL_LINE_NUM  RWS_DTL_LINE_NUM
           ,RPASW.INVTY_STK_STS_CD  INVTY_STK_STS_CD
        FROM
            RWS_PUT_AWAY_SER_WRK RPASW
        WHERE
            RPASW.GLBL_CMPY_CD = #glblCmpyCd#
        AND RPASW.WRK_TRX_ID   = #wrkTrxId#
        AND RPASW.SQ_ID        = #sqId#
        AND RPASW.EZCANCELFLAG = '0'
    </statement>

    <statement id="getIbList" parameterClass="Map" resultClass="Map">
        SELECT
            SMM.SVC_MACH_MSTR_PK              IB_SVC_MACH_MSTR_PK
           ,SMM.SER_NUM                       IB_SER_NUM
           ,SMM.MDSE_CD                       IB_MDSE_CD
           ,SMM.SVC_CONFIG_MSTR_PK            IB_SVC_CONFIG_MSTR_PK
           ,SMM.SVC_MACH_MSTR_STS_CD          IB_SVC_MACH_MSTR_STS_CD
           ,SMM.CUR_LOC_NUM                   IB_CUR_LOC_NUM
           ,SMM.SVC_MACH_MAINT_AVAL_FLG       IB_SVC_MACH_MAINT_AVAL_FLG
           ,SMM.TRX_HDR_NUM                   IB_TRX_HDR_NUM
           ,SMM.TRX_LINE_NUM                  IB_TRX_LINE_NUM
           ,SMM.STK_STS_CD                    IB_STK_STS_CD
           ,SMM.SVC_MACH_MSTR_LOC_STS_CD      IB_SVC_MACH_MSTR_LOC_STS_CD
           ,SCM.MDL_ID                        IB_MDL_ID
        FROM
             SVC_MACH_MSTR SMM
            ,SVC_CONFIG_MSTR SCM
        WHERE
            SMM.GLBL_CMPY_CD       = #glblCmpyCd#
        AND SMM.TRX_HDR_NUM        = #trxHdrNum#
        <isNotNull property="trxLineNum">
        AND SMM.TRX_LINE_NUM       = #trxLineNum#
        </isNotNull>
        <isNotNull property="trxLineSubNum">
        AND SMM.TRX_LINE_SUB_NUM   = #trxLineSubNum#
        </isNotNull>
        AND SMM.EZCANCELFLAG       = '0'
        AND SMM.GLBL_CMPY_CD       = SCM.GLBL_CMPY_CD(+)
        AND SMM.SVC_CONFIG_MSTR_PK = SCM.SVC_CONFIG_MSTR_PK(+)
        AND SCM.EZCANCELFLAG(+)    = '0'
        ORDER BY
            SMM.SVC_MACH_MSTR_PK
    </statement>

    <statement id="getRwsSerialList" parameterClass="Map" resultClass="String">
        SELECT
            RS.SER_NUM         SER_NUM
        FROM
            RWS_SER RS
        WHERE
            RS.GLBL_CMPY_CD = #glblCmpyCd#
        AND RS.RWS_NUM      = #rwsNum#
        AND RS.RWS_LINE_NUM = #rwsDtlLineNum#
        AND RS.EZCANCELFLAG = '0'
        ORDER BY
            SER_NUM
    </statement>

    <statement id="getMachMstrOriginalItemForKT" parameterClass="Map" resultClass="Map">
        SELECT
            MM.SVC_CONFIG_MSTR_PK
           ,MM.SVC_MACH_MSTR_PK
           ,MM.SER_NUM
           ,MM.STK_STS_CD
           ,MM.SVC_MACH_USG_STS_CD
        FROM
            SHPG_ORD_DTL  SOD
           ,SVC_MACH_MSTR MM
        WHERE
            SOD.GLBL_CMPY_CD = #glblCmpyCd#
        AND SOD.SO_NUM       = #poRcvTrxNum#
        AND SOD.EZCANCELFLAG = '0'
        AND SOD.GLBL_CMPY_CD = MM.GLBL_CMPY_CD
        AND SOD.MDSE_CD      = MM.MDSE_CD
        AND SOD.TRX_HDR_NUM  = MM.TRX_HDR_NUM
        AND MM.EZCANCELFLAG  = '0'
    </statement>

    <statement id="getMachMstrOriginalItemForRM" parameterClass="Map" resultClass="Map">
        SELECT
             RO.SVC_CONFIG_MSTR_PK
            ,MM.SVC_CONFIG_MSTR_PK AS SVC_CONFIG_MSTR_PK_SMM
            ,MM.SVC_MACH_MSTR_PK
            ,MM.SER_NUM
            ,MM.STK_STS_CD
            ,MM.SVC_MACH_USG_STS_CD
            ,NVL(ROD.RMNF_TO_CMPT_MDSE_CD, ROD.CMPT_MDSE_CD) AS CONV_MDSE_CD
            ,NVL(ROD.RMNF_TO_CMPT_SER_NUM, ROD.CMPT_SER_NUM) AS CONV_SER_NUM
            ,M.INSTL_BASE_CTRL_FLG
            ,SO.SO_NUM
            ,SOD.SO_SLP_NUM
            ,ROD_MU.RMNF_TO_CMPT_SER_NUM AS PRNT_SER_NUM
        FROM
             RMNF_ORD      RO
            ,RMNF_ORD_DTL  ROD
            ,SVC_MACH_MSTR MM
            ,MDSE          M
            ,SHPG_ORD      SO
            ,SHPG_ORD_DTL  SOD
            ,RMNF_ORD_DTL  ROD_MU
        WHERE
            RO.GLBL_CMPY_CD           = #glblCmpyCd#
        AND RO.RMNF_ORD_NUM           = #poRcvTrxNum#
        AND RO.GLBL_CMPY_CD           = ROD.GLBL_CMPY_CD
        AND RO.RMNF_ORD_NUM           = ROD.RMNF_ORD_NUM
        AND ROD.RMNF_ORD_DTL_LINE_NUM = #poRcvTrxLineNum#
        AND RO.GLBL_CMPY_CD           = ROD_MU.GLBL_CMPY_CD
        AND RO.RMNF_ORD_NUM           = ROD_MU.RMNF_ORD_NUM
        AND ROD_MU.RMNF_ORD_DTL_LINE_NUM = #prntLineNum#
        AND ROD.GLBL_CMPY_CD          = MM.GLBL_CMPY_CD(+)
        AND ROD.RMNF_ORD_NUM          = MM.TRX_HDR_NUM(+)
        AND ROD.RMNF_ORD_DTL_LINE_NUM = MM.TRX_LINE_NUM(+)
        AND ROD.GLBL_CMPY_CD          = M.GLBL_CMPY_CD
        AND ROD.CMPT_MDSE_CD          = M.MDSE_CD
        AND RO.GLBL_CMPY_CD           = SO.GLBL_CMPY_CD
        AND RO.RMNF_ORD_NUM           = SO.TRX_HDR_NUM
        AND SO.GLBL_CMPY_CD           = SOD.GLBL_CMPY_CD
        AND SO.SO_NUM                 = SOD.SO_NUM
        AND ROD.RMNF_ORD_DTL_LINE_NUM = SOD.SO_SLP_NUM
        AND RO.EZCANCELFLAG           = '0'
        AND ROD.EZCANCELFLAG          = '0'
        AND MM.EZCANCELFLAG(+)        = '0'
        AND M.EZCANCELFLAG            = '0'
        AND SO.EZCANCELFLAG           = '0'
        AND SOD.EZCANCELFLAG          = '0'
        AND ROD_MU.EZCANCELFLAG       = '0'
    </statement>

    <statement id="getMachMstrOriginalItemForRP" parameterClass="Map" resultClass="Map">
        SELECT
            MM.SVC_CONFIG_MSTR_PK
           ,MM.SVC_MACH_MSTR_PK
           ,MM.SER_NUM
           ,MM.STK_STS_CD
           ,MM.SVC_MACH_USG_STS_CD
        FROM
            PRCH_REQ_DTL    PRD
           ,SHPG_ORD_DTL    SD
           ,SVC_MACH_MSTR   MM
        WHERE
            PRD.GLBL_CMPY_CD          = #glblCmpyCd#
        AND PRD.PO_ORD_NUM            = #poRcvTrxNum#
        AND PRD.PO_ORD_DTL_LINE_NUM   = #poRcvTrxLineNum#
        AND PRD.EZCANCELFLAG          = '0'
        AND PRD.GLBL_CMPY_CD          = SD.GLBL_CMPY_CD
        AND PRD.PRCH_REQ_NUM          = SD.PRCH_REQ_NUM
        AND PRD.PRCH_REQ_LINE_NUM     = SD.PRCH_REQ_LINE_NUM
        AND PRD.PRCH_REQ_LINE_SUB_NUM = SD.PRCH_REQ_LINE_SUB_NUM
        AND SD.EZCANCELFLAG          = '0'
        AND SD.GLBL_CMPY_CD           = MM.GLBL_CMPY_CD
        AND SD.MDSE_CD                = MM.MDSE_CD
        AND SD.TRX_HDR_NUM            = MM.TRX_HDR_NUM
        AND SD.TRX_LINE_NUM           = MM.TRX_LINE_NUM
        AND MM.EZCANCELFLAG           = '0'
    </statement>

    <statement id="getSvcExchgCatgList" parameterClass="Map" resultClass="String">
        SELECT DISTINCT
            DS_ORD_CATG_CD
        FROM
            ORD_CATG_BIZ_CTX
        WHERE
            GLBL_CMPY_CD       = #glblCmpyCd#
        AND ORD_CATG_CTX_TP_CD = #ordCatgCtxTpCd#
        AND EZCANCELFLAG       = '0'
    </statement>

    <statement id="getConfigCmptList" parameterClass="Map" resultClass="Map">
        WITH CONFIG_LIST AS (
            SELECT DISTINCT
                SMM.GLBL_CMPY_CD
               ,SMM.SVC_CONFIG_MSTR_PK
            FROM
                SVC_MACH_MSTR SMM
            WHERE
                SMM.GLBL_CMPY_CD = #glblCmpyCd#
            <iterate property="detachCmptMachList" var="detachCmptMachList[]" open="AND SMM.SVC_MACH_MSTR_PK IN (" conjunction= ", " close=")">
                #detachCmptMachList[]#
            </iterate>
            AND SMM.EZCANCELFLAG = '0'
        )
        SELECT
            MSM.SVC_CONFIG_MSTR_PK
           ,MSM.SVC_MACH_MSTR_PK         AS MAIN_SVC_MACH_MSTR_PK
           ,MSM.MDSE_CD                  AS MAIN_MDSE_CD
           ,MSM.SVC_MACH_MSTR_STS_CD     AS MAIN_SVC_MACH_MSTR_STS_CD
           ,MSM.LOC_NM                   AS MAIN_LOC_NM
           ,MSM.ADDL_LOC_NM              AS MAIN_ADDL_LOC_NM
           ,MSM.FIRST_LINE_ADDR          AS MAIN_FIRST_LINE_ADDR
           ,MSM.SCD_LINE_ADDR            AS MAIN_SCD_LINE_ADDR
           ,MSM.THIRD_LINE_ADDR          AS MAIN_THIRD_LINE_ADDR
           ,MSM.FRTH_LINE_ADDR           AS MAIN_FRTH_LINE_ADDR
           ,MSM.CTY_ADDR                 AS MAIN_CTY_ADDR
           ,MSM.ST_CD                    AS MAIN_ST_CD
           ,MSM.PROV_NM                  AS MAIN_PROV_NM
           ,MSM.CNTY_NM                  AS MAIN_CNTY_NM
           ,MSM.POST_CD                  AS MAIN_POST_CD
           ,MSM.CTRY_CD                  AS MAIN_CTRY_CD
           ,MSM.SVC_MACH_FL_NM           AS MAIN_SVC_MACH_FL_NM
           ,MSM.IWR_COND_CD              AS MAIN_IWR_COND_CD
           ,MSM.EFF_FROM_DT              AS MAIN_EFF_FROM_DT
           ,MSM.SVC_MACH_USG_STS_CD      AS MAIN_SVC_MACH_USG_STS_CD
           ,MSM.PRNT_SER_NUM             AS MAIN_PRNT_SER_NUM
           ,MSM.SVC_MACH_TRX_TP_CD       AS MAIN_SVC_MACH_TRX_TP_CD
           ,MSM.SVC_MACH_QTY             AS MAIN_SVC_MACH_QTY
           ,MSM.OWNR_ACCT_NUM            AS MAIN_OWNR_ACCT_NUM
           ,MSM.OWNR_LOC_NUM             AS MAIN_OWNR_LOC_NUM
           ,MSM.BILL_TO_ACCT_NUM         AS MAIN_BILL_TO_ACCT_NUM
           ,MSM.BILL_TO_LOC_NUM          AS MAIN_BILL_TO_LOC_NUM
           ,MSM.CUR_LOC_ACCT_NUM         AS MAIN_CUR_LOC_ACCT_NUM
           ,MSM.CUR_LOC_NUM              AS MAIN_CUR_LOC_NUM
           ,MSM.SVC_MACH_MSTR_LOC_STS_CD AS MAIN_MACH_LOC_STS_CD
           ,MSM.ISTL_DT                  AS MAIN_ISTL_DT
           ,SMC.SVC_MACH_MSTR_PK         AS CMPT_SVC_MACH_MSTR_PK
           ,SMC.MDSE_CD                  AS CMPT_MDSE_CD
           ,SMC.SVC_MACH_TP_CD           AS CMPT_SVC_MACH_TP_CD
        FROM
            CONFIG_LIST     CFL
           ,SVC_MACH_MSTR   SMC
           ,SVC_CONFIG_MSTR SCM
           ,SVC_MACH_MSTR   MSM
        WHERE
            CFL.GLBL_CMPY_CD       = SMC.GLBL_CMPY_CD
        AND CFL.SVC_CONFIG_MSTR_PK = SMC.SVC_CONFIG_MSTR_PK
        <!-- START 2022/11/03 F.Fadriquela [QC#60568, MOD] -->
        <!-- AND SCM.EZCANCELFLAG       = '0' -->
        AND SMC.EZCANCELFLAG       = '0'
        <!-- END 2022/11/03 F.Fadriquela [QC#60568, MOD] -->
        AND SMC.GLBL_CMPY_CD       = SCM.GLBL_CMPY_CD
        AND SMC.SVC_CONFIG_MSTR_PK = SCM.SVC_CONFIG_MSTR_PK
        AND SCM.EZCANCELFLAG       = '0'
        AND SCM.GLBL_CMPY_CD       = MSM.GLBL_CMPY_CD
        AND SCM.SVC_MACH_MSTR_PK   = MSM.SVC_MACH_MSTR_PK
        AND MSM.EZCANCELFLAG       = '0'
        ORDER BY
            MSM.SVC_CONFIG_MSTR_PK
           ,SMC.SVC_MACH_MSTR_PK
    </statement>

    <statement id="getRtrnSrcOrder" parameterClass="Map" resultClass="Map">
        SELECT
             DCRD.CPO_ORD_NUM
            ,DCRD.DS_CPO_RTRN_LINE_NUM
            ,DCRD.DS_CPO_RTRN_LINE_SUB_NUM
            ,DCRD.DS_ORD_POSN_NUM
        FROM
             RWS_HDR         RH
            ,RWS_DTL         RD
            ,DS_CPO_RTRN_DTL DCRD
        WHERE
            1 = 1
        AND RH.GLBL_CMPY_CD     = #glblCmpyCd#
        AND RH.RWS_NUM          = #rwsNum#
        AND RH.GLBL_CMPY_CD     = RD.GLBL_CMPY_CD
        AND RH.RWS_NUM          = RD.RWS_NUM
        AND RD.RWS_DTL_LINE_NUM = #rwsDtlLineNum#
        AND RD.GLBL_CMPY_CD     = DCRD.GLBL_CMPY_CD
        AND RH.TRX_ORD_NUM      = DCRD.CPO_ORD_NUM
        AND RD.TRX_LINE_NUM     = DCRD.DS_CPO_RTRN_LINE_NUM
        AND RD.TRX_LINE_SUB_NUM = DCRD.DS_CPO_RTRN_LINE_SUB_NUM
        AND RH.EZCANCELFLAG     = '0'
        AND RD.EZCANCELFLAG     = '0'
        AND DCRD.EZCANCELFLAG   = '0'
    </statement>

    <statement id="getNonAllocMachMstrWHT" parameterClass="Map" resultClass="Map">
        SELECT
            SMM.SVC_MACH_MSTR_PK
           ,SMM.MDSE_CD
           ,SMM.SER_NUM
           ,SMM.SVC_CONFIG_MSTR_PK
           ,SMM.SVC_MACH_MSTR_STS_CD
           ,SMM.STK_STS_CD
           ,SMM.SVC_MACH_USG_STS_CD
        FROM
            SVC_MACH_MSTR SMM
        WHERE
            SMM.GLBL_CMPY_CD             = #glblCmpyCd#
        <isNotNull property="svcConfigMstrPk">
            AND SMM.SVC_CONFIG_MSTR_PK   = #svcConfigMstrPk#
        </isNotNull>
        <isNull property="svcConfigMstrPk">
            AND SMM.SVC_CONFIG_MSTR_PK   IS NULL
        </isNull>
        AND SMM.MDSE_CD                  = #mdseCd#
        AND SMM.CUR_LOC_NUM              = #curlocNum#
        AND SMM.SVC_MACH_MSTR_LOC_STS_CD = #svcMachMstrLocStsCd#
        AND SMM.STK_STS_CD               = #stkStsCd#
        AND SMM.SVC_MACH_MAINT_AVAL_FLG  = #flgY#
        AND SMM.SVC_MACH_MSTR_STS_CD NOT IN (#svcMachMstrStsTrmn#, #svcMachMstrStsDup#)
        AND SMM.EZCANCELFLAG            = '0'
        ORDER BY
            SMM.SVC_MACH_MSTR_PK
    </statement>

    <statement id="getRwsStkStsCd" parameterClass="Map" resultClass="String">
        SELECT
            RD.INVTY_STK_STS_CD
        FROM
            RWS_DTL RD
        WHERE
            RD.GLBL_CMPY_CD            = #glblCmpyCd#
        AND RD.RWS_NUM                 = #rwsNum#
        AND RD.RWS_DTL_LINE_NUM        = #rwsDtlLineNum#
        AND RD.EZCANCELFLAG            = '0'
    </statement>

    <statement id="getNonAllocMachMstrNonSer" parameterClass="Map" resultClass="Map">
        SELECT
            SVC_MACH_MSTR_PK
           ,MDSE_CD
           ,SER_NUM
           ,SVC_CONFIG_MSTR_PK
           ,SVC_MACH_MSTR_STS_CD
           ,STK_STS_CD
           ,SVC_MACH_USG_STS_CD
        FROM
            SVC_MACH_MSTR
        WHERE
            GLBL_CMPY_CD            = #glblCmpyCd#
        AND MDSE_CD                 = #mdseCd#
        AND CUR_LOC_NUM             = #curlocNum#
        AND SVC_MACH_MAINT_AVAL_FLG = #flgY#
        AND SVC_MACH_MSTR_STS_CD NOT IN (#svcMachMstrStsTrmn#, #svcMachMstrStsDup#)
        <isNull property="pickSvcConfigMstrPk">
        AND SVC_CONFIG_MSTR_PK IS NULL
        </isNull>
        <isNotNull property="pickSvcConfigMstrPk">
        AND SVC_CONFIG_MSTR_PK      = #pickSvcConfigMstrPk#
        </isNotNull>
        <isNotNull property="stkStsCd">
        AND STK_STS_CD              = #stkStsCd#
        </isNotNull>
        AND EZCANCELFLAG            = '0'
        ORDER BY
            SVC_MACH_MSTR_PK
    </statement>

    <statement id="getTargetRwsCompletion" parameterClass="Map" resultClass="Map">
        SELECT
             RH.RWS_NUM
            ,RH.SCE_ORD_TP_CD
        FROM
            RWS_HDR RH
        WHERE
            RH.GLBL_CMPY_CD = #glblCmpyCd#
        AND RH.RWS_NUM      = #rwsNum#
        AND RH.EZCANCELFLAG = '0'
    </statement>

    <statement id="getMachMstrNotRecievedForRT" parameterClass="Map" resultClass="Map">
         SELECT
             RD.RWS_NUM
            ,RD.RWS_DTL_LINE_NUM
            ,NVL(RD.RWS_QTY, 0)          AS RWS_QTY
            ,NVL(RD.RWS_PUT_AWAY_QTY, 0) AS RWS_PUT_AWAY_QTY
            ,RH.SCE_ORD_TP_CD
            ,MM.SVC_MACH_MSTR_PK
            ,MM.MDSE_CD
            ,MM.SER_NUM
            ,MM.SVC_CONFIG_MSTR_PK
            ,MM.CUR_LOC_NUM
            ,RH.SVC_CONFIG_MSTR_PK       AS RWS_SVC_CONFIG_MSTR_PK
            ,SCM.SVC_MACH_MSTR_PK        AS MAIN_SVC_MACH_MSTR_PK
            ,RD.TRX_CD
            ,RD.TRX_RSN_CD
         FROM
             RWS_HDR         RH
            ,RWS_DTL         RD
            ,SVC_MACH_MSTR   MM
            ,SVC_CONFIG_MSTR SCM
         WHERE
             RH.GLBL_CMPY_CD        = #glblCmpyCd#
         AND RH.RWS_NUM             = #rwsNum#
         AND RH.EZCANCELFLAG        = '0'
         AND RH.GLBL_CMPY_CD        = SCM.GLBL_CMPY_CD(+)
         AND RH.SVC_CONFIG_MSTR_PK  = SCM.SVC_CONFIG_MSTR_PK(+)
         AND SCM.EZCANCELFLAG(+)    = '0'
         AND RH.GLBL_CMPY_CD        = RD.GLBL_CMPY_CD
         AND RH.RWS_NUM             = RD.RWS_NUM
         AND RD.RWS_QTY          &gt; RD.RWS_PUT_AWAY_QTY
         AND RD.EZCANCELFLAG        = '0'
         AND RD.GLBL_CMPY_CD        = MM.GLBL_CMPY_CD
         AND RH.TRX_ORD_NUM         = MM.TRX_HDR_NUM
         AND RD.TRX_LINE_NUM        = MM.TRX_LINE_NUM
         AND RD.TRX_LINE_SUB_NUM    = MM.TRX_LINE_SUB_NUM
<!-- QC#55273 Add Start -->
         AND MM.SVC_MACH_MSTR_STS_CD= #svcMachMstrStsCd#
         <isNotNull property="svcConfigMstrPk">
             AND MM.SVC_CONFIG_MSTR_PK = #svcConfigMstrPk#
         </isNotNull>
<!-- QC#55273 Add End -->
         AND MM.EZCANCELFLAG        = '0'
         AND EXISTS(
                 SELECT
                     1
                 FROM
                     MDSE M
                 WHERE
                     M.GLBL_CMPY_CD = MM.GLBL_CMPY_CD
                 AND M.MDSE_CD      = MM.MDSE_CD
                 AND M.INSTL_BASE_CTRL_FLG = #instlBaseCtrlFlg#
                 AND M.EZCANCELFLAG        = '0'
             )
         ORDER BY
             RD.RWS_DTL_LINE_NUM
            ,MM.SVC_MACH_MSTR_PK
    </statement>

    <statement id="getMachMstrNotRecievedForDT" parameterClass="Map" resultClass="Map">
        SELECT
            RD.RWS_NUM
           ,RD.RWS_DTL_LINE_NUM
           ,NVL(RD.RWS_QTY, 0)          AS RWS_QTY
           ,NVL(RD.RWS_PUT_AWAY_QTY, 0) AS RWS_PUT_AWAY_QTY
           ,RH.SCE_ORD_TP_CD
           ,MM.SVC_MACH_MSTR_PK
           ,MM.MDSE_CD
           ,MM.SER_NUM
           ,MM.SVC_CONFIG_MSTR_PK
           ,MM.CUR_LOC_NUM
           ,RH.SVC_CONFIG_MSTR_PK       AS RWS_SVC_CONFIG_MSTR_PK
           ,SCM.SVC_MACH_MSTR_PK        AS MAIN_SVC_MACH_MSTR_PK
           ,RD.TRX_CD
           ,RD.TRX_RSN_CD
        FROM
            RWS_HDR         RH
           ,RWS_DTL         RD
           ,SHPG_ORD_DTL    SD
           ,SVC_MACH_MSTR   MM
           ,SVC_CONFIG_MSTR SCM
        WHERE
            RH.GLBL_CMPY_CD        = #glblCmpyCd#
        AND RH.RWS_NUM             = #rwsNum#
        AND RH.EZCANCELFLAG        = '0'
        AND RH.GLBL_CMPY_CD        = SCM.GLBL_CMPY_CD(+)
        AND RH.SVC_CONFIG_MSTR_PK  = SCM.SVC_CONFIG_MSTR_PK(+)
        AND SCM.EZCANCELFLAG(+)    = '0'
        AND RH.GLBL_CMPY_CD        = RD.GLBL_CMPY_CD
        AND RH.RWS_NUM             = RD.RWS_NUM
        AND RD.RWS_QTY          &gt; RD.RWS_PUT_AWAY_QTY
        AND RD.EZCANCELFLAG        = '0'
        AND RD.GLBL_CMPY_CD        = SD.GLBL_CMPY_CD
        AND RH.PO_RCV_TRX_HDR_NUM  = SD.SO_NUM
        AND RD.PO_RCV_TRX_LINE_NUM = SD.SO_SLP_NUM
        AND SD.GLBL_CMPY_CD        = MM.GLBL_CMPY_CD
        AND SD.TRX_HDR_NUM         = MM.TRX_HDR_NUM
        AND SD.TRX_LINE_NUM        = MM.TRX_LINE_NUM
        AND SD.TRX_LINE_SUB_NUM    = MM.TRX_LINE_SUB_NUM
        AND MM.EZCANCELFLAG        = '0'
                 AND EXISTS(
                 SELECT
                     1
                 FROM
                     MDSE M
                 WHERE
                     M.GLBL_CMPY_CD = MM.GLBL_CMPY_CD
                 AND M.MDSE_CD      = MM.MDSE_CD
                 AND M.INSTL_BASE_CTRL_FLG = #instlBaseCtrlFlg#
                 AND M.EZCANCELFLAG        = '0'
             )
        ORDER BY
            RD.RWS_DTL_LINE_NUM
           ,MM.SVC_MACH_MSTR_PK
    </statement>

    <statement id="getMachMstrNotRecievedForTR" parameterClass="Map" resultClass="Map">
        SELECT
            RD.RWS_NUM
           ,RD.RWS_DTL_LINE_NUM
           ,NVL(RD.RWS_QTY, 0)          AS RWS_QTY
           ,NVL(RD.RWS_PUT_AWAY_QTY, 0) AS RWS_PUT_AWAY_QTY
           ,RH.SCE_ORD_TP_CD
           ,MM.SVC_MACH_MSTR_PK
           ,MM.MDSE_CD
           ,MM.SER_NUM
           ,MM.SVC_CONFIG_MSTR_PK
           ,MM.CUR_LOC_NUM
           ,RH.SVC_CONFIG_MSTR_PK       AS RWS_SVC_CONFIG_MSTR_PK
           ,SCM.SVC_MACH_MSTR_PK        AS MAIN_SVC_MACH_MSTR_PK
           ,RD.TRX_CD
           ,RD.TRX_RSN_CD
        FROM
            RWS_HDR         RH
           ,RWS_DTL         RD
           ,SHPG_ORD_DTL    SD
           ,SVC_MACH_MSTR   MM
           ,SVC_CONFIG_MSTR SCM
        WHERE
            RH.GLBL_CMPY_CD        = #glblCmpyCd#
        AND RH.RWS_NUM             = #rwsNum#
        AND RH.EZCANCELFLAG        = '0'
        AND RH.GLBL_CMPY_CD        = SCM.GLBL_CMPY_CD(+)
        AND RH.SVC_CONFIG_MSTR_PK  = SCM.SVC_CONFIG_MSTR_PK(+)
        AND SCM.EZCANCELFLAG(+)    = '0'
        AND RH.GLBL_CMPY_CD        = RD.GLBL_CMPY_CD
        AND RH.RWS_NUM             = RD.RWS_NUM
        AND RD.RWS_QTY          &gt; RD.RWS_PUT_AWAY_QTY
        AND RD.EZCANCELFLAG        = '0'
        AND RD.GLBL_CMPY_CD        = SD.GLBL_CMPY_CD
        AND RH.PO_RCV_TRX_HDR_NUM  = SD.SO_NUM
        AND RD.PO_RCV_TRX_LINE_NUM = SD.SO_SLP_NUM
        AND SD.GLBL_CMPY_CD        = MM.GLBL_CMPY_CD
        AND SD.TRX_HDR_NUM         = MM.TRX_HDR_NUM
        AND SD.TRX_LINE_NUM        = MM.TRX_LINE_NUM
        AND MM.EZCANCELFLAG        = '0'
                 AND EXISTS(
                 SELECT
                     1
                 FROM
                     MDSE M
                 WHERE
                     M.GLBL_CMPY_CD = MM.GLBL_CMPY_CD
                 AND M.MDSE_CD      = MM.MDSE_CD
                 AND M.INSTL_BASE_CTRL_FLG = #instlBaseCtrlFlg#
                 AND M.EZCANCELFLAG        = '0'
             )
        ORDER BY
            RD.RWS_DTL_LINE_NUM
           ,MM.SVC_MACH_MSTR_PK
    </statement>

    <statement id="getRwsDtlInfo" parameterClass="Map" resultClass="Map">
        SELECT
            RD.RWS_NUM
           ,RD.RWS_DTL_LINE_NUM
           ,NVL(RD.RWS_QTY, 0)          AS RWS_QTY
           ,NVL(RD.RWS_PUT_AWAY_QTY, 0) AS RWS_PUT_AWAY_QTY
           ,RD.RTL_WH_CD
           ,RD.SER_NUM_TAKE_FLG
           ,RH.SVC_CONFIG_MSTR_PK
           ,RD.MDSE_CD
           ,RD.INVTY_LOC_CD
           ,RD.INVTY_STK_STS_CD
           ,RD.TRX_CD
        FROM
            RWS_HDR         RH
           ,RWS_DTL         RD
        WHERE
            RH.GLBL_CMPY_CD        = #glblCmpyCd#
        AND RH.RWS_NUM             = #rwsNum#
        AND RH.EZCANCELFLAG        = '0'
        AND RH.GLBL_CMPY_CD        = RD.GLBL_CMPY_CD
        AND RH.RWS_NUM             = RD.RWS_NUM
        AND RD.RWS_DTL_LINE_NUM    = #rwsDtlLineNum#
        AND RD.EZCANCELFLAG        = '0'
    </statement>

    <statement id="getMachMstrNonAllocation" parameterClass="Map" resultClass="Map">
         SELECT
             SMM.SVC_MACH_MSTR_PK
            ,SMM.MDSE_CD
            ,SMM.SER_NUM
            ,SMM.SVC_CONFIG_MSTR_PK
            ,SMM.SVC_MACH_MSTR_STS_CD
            ,SMM.STK_STS_CD
            ,SMM.SVC_MACH_USG_STS_CD
         FROM
             SVC_MACH_MSTR SMM
         WHERE
             SMM.GLBL_CMPY_CD             = #glblCmpyCd#
         <isNotNull property="svcConfigMstrPk">
             AND SMM.SVC_CONFIG_MSTR_PK   = #svcConfigMstrPk#
         </isNotNull>
         <isNull property="svcConfigMstrPk">
             AND SMM.SVC_CONFIG_MSTR_PK   IS NULL
         </isNull>
         AND SMM.MDSE_CD                  = #mdseCd#
         AND SMM.CUR_LOC_NUM              = #curlocNum#
         AND SMM.SVC_MACH_MSTR_LOC_STS_CD = #svcMachMstrLocStsCd#
         AND SMM.STK_STS_CD               = #stkStsCd#
         AND SMM.SVC_MACH_MAINT_AVAL_FLG  = #flgY#
         AND SMM.SVC_MACH_MSTR_STS_CD NOT IN (#svcMachMstrStsTrmn#, #svcMachMstrStsDup#)
         AND SMM.EZCANCELFLAG             = '0'
         ORDER BY
             SMM.SVC_MACH_MSTR_PK
    </statement>

    <statement id="getMachMstrNotRecieved" parameterClass="Map" resultClass="Map">
        SELECT 
            MM.SVC_MACH_MSTR_PK
        FROM
            RWS_HDR       RH
           ,RWS_DTL       RD
           ,SHPG_ORD_DTL  SOD
           ,SVC_MACH_MSTR MM
        WHERE 
            RH.GLBL_CMPY_CD        = #glblCmpyCd#
        AND RH.RWS_NUM             = #rwsNum#
        AND RH.EZCANCELFLAG        = '0'
        AND RH.GLBL_CMPY_CD        = RD.GLBL_CMPY_CD
        AND RH.RWS_NUM             = RD.RWS_NUM
        AND RD.EZCANCELFLAG        = '0'
        AND RH.GLBL_CMPY_CD        = SOD.GLBL_CMPY_CD
        AND RH.PO_RCV_TRX_HDR_NUM  = SOD.SO_NUM
        AND RD.PO_RCV_TRX_LINE_NUM = SOD.SO_SLP_NUM
        AND SOD.EZCANCELFLAG       = '0'
        AND SOD.GLBL_CMPY_CD       = MM.GLBL_CMPY_CD
        AND SOD.TRX_HDR_NUM        = MM.TRX_HDR_NUM
        AND SOD.TRX_LINE_NUM       = MM.TRX_LINE_NUM
        AND MM.EZCANCELFLAG        = '0'
    </statement>

    <statement id="getConfigCmptListForAddConfig" parameterClass="Map" resultClass="Map">
        SELECT
            MSM.SVC_CONFIG_MSTR_PK
           ,MSM.SVC_MACH_MSTR_PK         AS MAIN_SVC_MACH_MSTR_PK
           ,MSM.MDSE_CD                  AS MAIN_MDSE_CD
           ,MSM.SVC_MACH_MSTR_STS_CD     AS MAIN_SVC_MACH_MSTR_STS_CD
           ,MSM.LOC_NM                   AS MAIN_LOC_NM
           ,MSM.ADDL_LOC_NM              AS MAIN_ADDL_LOC_NM
           ,MSM.FIRST_LINE_ADDR          AS MAIN_FIRST_LINE_ADDR
           ,MSM.SCD_LINE_ADDR            AS MAIN_SCD_LINE_ADDR
           ,MSM.THIRD_LINE_ADDR          AS MAIN_THIRD_LINE_ADDR
           ,MSM.FRTH_LINE_ADDR           AS MAIN_FRTH_LINE_ADDR
           ,MSM.CTY_ADDR                 AS MAIN_CTY_ADDR
           ,MSM.ST_CD                    AS MAIN_ST_CD
           ,MSM.PROV_NM                  AS MAIN_PROV_NM
           ,MSM.CNTY_NM                  AS MAIN_CNTY_NM
           ,MSM.POST_CD                  AS MAIN_POST_CD
           ,MSM.CTRY_CD                  AS MAIN_CTRY_CD
           ,MSM.SVC_MACH_FL_NM           AS MAIN_SVC_MACH_FL_NM
           ,MSM.IWR_COND_CD              AS MAIN_IWR_COND_CD
           ,MSM.EFF_FROM_DT              AS MAIN_EFF_FROM_DT
           ,MSM.SVC_MACH_USG_STS_CD      AS MAIN_SVC_MACH_USG_STS_CD
           ,MSM.PRNT_SER_NUM             AS MAIN_PRNT_SER_NUM
           ,MSM.SVC_MACH_TRX_TP_CD       AS MAIN_SVC_MACH_TRX_TP_CD
           ,MSM.SVC_MACH_QTY             AS MAIN_SVC_MACH_QTY
           ,MSM.OWNR_ACCT_NUM            AS MAIN_OWNR_ACCT_NUM
           ,MSM.OWNR_LOC_NUM             AS MAIN_OWNR_LOC_NUM
           ,MSM.BILL_TO_ACCT_NUM         AS MAIN_BILL_TO_ACCT_NUM
           ,MSM.BILL_TO_LOC_NUM          AS MAIN_BILL_TO_LOC_NUM
           ,MSM.CUR_LOC_ACCT_NUM         AS MAIN_CUR_LOC_ACCT_NUM
           ,MSM.CUR_LOC_NUM              AS MAIN_CUR_LOC_NUM
           ,MSM.SVC_MACH_MSTR_LOC_STS_CD AS MAIN_MACH_LOC_STS_CD
           ,SMC.SVC_MACH_MSTR_PK         AS CMPT_SVC_MACH_MSTR_PK
           ,SMC.MDSE_CD                  AS CMPT_MDSE_CD
           ,SMC.SVC_MACH_TP_CD           AS CMPT_SVC_MACH_TP_CD
        FROM
            SVC_MACH_MSTR   SMC
           ,SVC_CONFIG_MSTR SCM
           ,SVC_MACH_MSTR   MSM
        WHERE
            SCM.GLBL_CMPY_CD       = #glblCmpyCd#
        AND SCM.SVC_CONFIG_MSTR_PK = #svcConfigMsgrPk#
        AND SCM.GLBL_CMPY_CD       = SMC.GLBL_CMPY_CD
        AND SCM.SVC_CONFIG_MSTR_PK = SMC.SVC_CONFIG_MSTR_PK
        AND SCM.EZCANCELFLAG       = '0'
        AND SMC.GLBL_CMPY_CD       = SCM.GLBL_CMPY_CD
        AND SMC.SVC_CONFIG_MSTR_PK = SCM.SVC_CONFIG_MSTR_PK
        AND SCM.EZCANCELFLAG       = '0'
        AND SCM.GLBL_CMPY_CD       = MSM.GLBL_CMPY_CD
        AND SCM.SVC_MACH_MSTR_PK   = MSM.SVC_MACH_MSTR_PK
        AND MSM.EZCANCELFLAG       = '0'
        ORDER BY
            MSM.SVC_CONFIG_MSTR_PK
           ,SMC.SVC_MACH_TP_CD
           ,SMC.SVC_MACH_MSTR_PK
    </statement>

    <statement id="getSvcMachList" parameterClass="Map" resultClass="Map">
        SELECT
            SMM.GLBL_CMPY_CD
           ,SMM.SVC_CONFIG_MSTR_PK
           ,SMM.SER_NUM
           ,SMM.SVC_MACH_MSTR_PK         AS MAIN_SVC_MACH_MSTR_PK
           ,SMM.MDSE_CD                  AS MAIN_MDSE_CD
           ,SMM.SVC_MACH_MSTR_STS_CD     AS MAIN_SVC_MACH_MSTR_STS_CD
           ,SMM.LOC_NM                   AS MAIN_LOC_NM
           ,SMM.ADDL_LOC_NM              AS MAIN_ADDL_LOC_NM
           ,SMM.FIRST_LINE_ADDR          AS MAIN_FIRST_LINE_ADDR
           ,SMM.SCD_LINE_ADDR            AS MAIN_SCD_LINE_ADDR
           ,SMM.THIRD_LINE_ADDR          AS MAIN_THIRD_LINE_ADDR
           ,SMM.FRTH_LINE_ADDR           AS MAIN_FRTH_LINE_ADDR
           ,SMM.CTY_ADDR                 AS MAIN_CTY_ADDR
           ,SMM.ST_CD                    AS MAIN_ST_CD
           ,SMM.PROV_NM                  AS MAIN_PROV_NM
           ,SMM.CNTY_NM                  AS MAIN_CNTY_NM
           ,SMM.POST_CD                  AS MAIN_POST_CD
           ,SMM.CTRY_CD                  AS MAIN_CTRY_CD
           ,SMM.SVC_MACH_FL_NM           AS MAIN_SVC_MACH_FL_NM
           ,SMM.IWR_COND_CD              AS MAIN_IWR_COND_CD
           ,SMM.EFF_FROM_DT              AS MAIN_EFF_FROM_DT
           ,SMM.SVC_MACH_USG_STS_CD      AS MAIN_SVC_MACH_USG_STS_CD
           ,SMM.PRNT_SER_NUM             AS MAIN_PRNT_SER_NUM
           ,SMM.SVC_MACH_TRX_TP_CD       AS MAIN_SVC_MACH_TRX_TP_CD
           ,SMM.SVC_MACH_QTY             AS MAIN_SVC_MACH_QTY
           ,SMM.OWNR_ACCT_NUM            AS MAIN_OWNR_ACCT_NUM
           ,SMM.OWNR_LOC_NUM             AS MAIN_OWNR_LOC_NUM
           ,SMM.BILL_TO_ACCT_NUM         AS MAIN_BILL_TO_ACCT_NUM
           ,SMM.BILL_TO_LOC_NUM          AS MAIN_BILL_TO_LOC_NUM
           ,SMM.CUR_LOC_ACCT_NUM         AS MAIN_CUR_LOC_ACCT_NUM
           ,SMM.CUR_LOC_NUM              AS MAIN_CUR_LOC_NUM
           ,SMM.SVC_MACH_MSTR_LOC_STS_CD AS MAIN_MACH_LOC_STS_CD
        FROM
            SVC_MACH_MSTR SMM
        WHERE
            SMM.GLBL_CMPY_CD = #glblCmpyCd#
        <iterate property="attachCmptMachList" var="attachCmptMachList[]" open="AND SMM.SVC_MACH_MSTR_PK IN (" conjunction= ", " close=")">
            #attachCmptMachList[]#
        </iterate>
        AND SMM.EZCANCELFLAG = '0'
        ORDER BY
            SMM.SVC_CONFIG_MSTR_PK
           ,SMM.SVC_MACH_MSTR_PK
    </statement>

<!-- START 2017/11/2 M.Naito [QC#18216, ADD] -->
    <statement id="getRossShipItemInfo" parameterClass="Map" resultClass="Map">
        SELECT DISTINCT
            RSI.SO_NUM
           ,RSI.SO_SLP_NUM
        FROM
            RWS_DTL        RD
           ,PRCH_REQ_DTL   PRD
           ,ROSS_SHIP_ITEM RSI
        WHERE
            RD.GLBL_CMPY_CD      = #glblCmpyCd#
        AND RD.RWS_NUM           = #rwsNum#
        AND RD.RWS_DTL_LINE_NUM  = #rwsDtlLineNum#
        AND RD.EZCANCELFLAG      = '0'
        AND RD.GLBL_CMPY_CD      = PRD.GLBL_CMPY_CD
        AND RD.PRCH_REQ_NUM      = PRD.PRCH_REQ_NUM
        AND RD.PRCH_REQ_LINE_NUM = PRD.PRCH_REQ_LINE_NUM
        AND PRD.EZCANCELFLAG     = '0'
        AND PRD.GLBL_CMPY_CD     = RSI.GLBL_CMPY_CD
        AND PRD.TRX_REF_NUM      = RSI.SO_NUM
        AND PRD.TRX_REF_LINE_NUM = RSI.SO_SLP_NUM
        AND RSI.EZCANCELFLAG     = '0'
    </statement>
<!-- END 2017/11/2 M.Naito [QC#18216, ADD] -->

<!-- START 2019/10/2  [QC#53836, ADD] -->
    <statement id="isMainMachRmv" parameterClass="Map" resultClass="String">
        SELECT
            SD.RMV_CONFIG_FLG
        FROM
            SO_SER SS
            ,SHPG_ORD_DTL SD
        WHERE
            SS.GLBL_CMPY_CD = #glblCmpyCd#
        AND SS.SO_NUM       = #trxOrdNum#
        AND SS.SVC_MACH_MSTR_PK   = #svcMachMstrPk#
        AND SS.SO_NUM       = SD.SO_NUM
        AND SS.SO_SLP_NUM   = SD.SO_SLP_NUM
        AND SS.EZCANCELFLAG = '0'
        AND SD.EZCANCELFLAG = '0'
    </statement>
<!-- END 2019/10/2  [QC#53836, ADD] -->

<!-- START 2019/10/09  [QC#53385, ADD] -->
    <statement id="getSoNonSerialList" parameterClass="Map" resultClass="Map">
        SELECT
            SOD.INVTY_LOC_CD
           ,SOD.FROM_STK_STS_CD
           ,SOD.MDSE_CD
        FROM
            SHPG_ORD SO
           ,SHPG_ORD_DTL SOD
           ,MDSE M
        WHERE
            SO.GLBL_CMPY_CD               = #glblCmpyCd#
        AND SO.SO_NUM                     = #soNum#
        AND SO.GLBL_CMPY_CD               = SOD.GLBL_CMPY_CD
        AND SO.SO_NUM                     = SOD.SO_NUM
        AND SOD.GLBL_CMPY_CD              = M.GLBL_CMPY_CD
        AND SOD.MDSE_CD                   = M.MDSE_CD
        AND M.SHPG_SER_TAKE_FLG           = #flgN#
        AND M.INSTL_BASE_CTRL_FLG         = #flgY#
        AND SO.EZCANCELFLAG               = '0'
        AND SOD.EZCANCELFLAG              = '0'
        AND M.EZCANCELFLAG                = '0'
        ORDER BY
            MDSE_CD
    </statement>

    <statement id="getSoSer" parameterClass="Map" resultClass="Map">
        SELECT
            SS.MDSE_CD
           ,SS.SVC_MACH_MSTR_PK
        FROM
            SO_SER SS
        WHERE
            SS.GLBL_CMPY_CD = #glblCmpyCd#
        AND SS.SO_NUM       = #soNum#
        AND SS.EZCANCELFLAG = '0'
    </statement>
<!-- END 2019/10/9  [QC#53385, ADD] -->

<!-- START 2019/10/17  [QC#54247, ADD] -->
    <statement id="isCfgChgAllRmv" parameterClass="Map" resultClass="Map">
        SELECT
            SD.RMV_CONFIG_FLG
        FROM
            SHPG_ORD_DTL SD
        WHERE
            SD.GLBL_CMPY_CD = #glblCmpyCd#
        AND SD.SO_NUM       = #trxOrdNum#
        AND SD.EZCANCELFLAG = '0'
    </statement>
<!-- START 2019/10/17  [QC#54247, ADD] -->

    <statement id="getNonSerialSMMPK" parameterClass="Map" resultClass="BigDecimal">
    SELECT
        SVC_MACH_MSTR_PK
    FROM (
        SELECT
            SMM.SVC_MACH_MSTR_PK
        FROM
            SVC_MACH_MSTR SMM
        WHERE
            SMM.GLBL_CMPY_CD                  = #glblCmpyCd#
            AND SMM.CUR_LOC_NUM               = #curLocNum#
            AND SMM.STK_STS_CD                = #stkStsCd#
            AND SMM.MDSE_CD                   = #mdseCd#
            <iterate property="svcMachMstrPkList" var="svcMachMstrPkList[]" open="AND SMM.SVC_MACH_MSTR_PK NOT IN (" conjunction= ", " close=")">
                #svcMachMstrPkList[]#
            </iterate>
            AND SMM.SVC_MACH_MSTR_STS_CD     IN (#svcMachMstrStsCrat#, #svcMachMstrStsRmv#)
            AND SMM.SVC_MACH_MAINT_AVAL_FLG   = #flgY#
            AND SMM.SVC_CONFIG_MSTR_PK       IS NULL
            AND SMM.TRX_HDR_NUM              IS NULL
            <!-- START 2020/02/03 A.Marte [QC#58479,ADD] -->
            AND SMM.EZCANCELFLAG              = '0'
            <!-- END 2020/02/03 A.Marte [QC#58479,ADD] -->
        ORDER BY
            SVC_MACH_MSTR_PK ASC
    )
    WHERE ROWNUM = 1
    </statement>

</sqlMap>
