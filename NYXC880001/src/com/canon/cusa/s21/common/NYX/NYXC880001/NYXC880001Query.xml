<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NYXC880001Query">
    <statement id="getFullPsnNm" parameterClass="Map" resultClass="Map">
        SELECT
                 P.FIRST_NM || ' ' || P.LAST_NM   FULL_PSN_NM
            FROM
                 AUTH_PSN P 
            WHERE
                 P.USR_NM       = #psnCd#
            AND  P.GLBL_CMPY_CD = #glblCmpyCd#
            AND  P.EZCANCELFLAG = '0'
    </statement>


	<!-- *********************************************************** -->
	<!-- ********** findUpTabName ********************************** -->
	<!-- *********************************************************** -->
	<statement id="findUpTabName" parameterClass="Map" resultClass="Map">
        SELECT
               UP_TAB_NM
        FROM
               UP_TAB      TAB
        WHERE
               TAB.GLBL_CMPY_CD    = #glblCmpyCd#
        AND    TAB.BIZ_APP_ID       = #BIZ_APP_ID#
        AND    TAB.EZCANCELFLAG    = '0'
	</statement>

    <statement id="getProcList" parameterClass="Map" resultClass="Map">
       SELECT   PRC.MENU_PROC_ID   AS MENU_PROC_ID
        FROM    MENU_PROC_GRP  GRP
               ,MENU_PROC_RELN PRE
               ,MENU_PROC      PRC
               ,UP_TAB_RELN    REL
               ,UP_TAB         TAB
        WHERE   GRP.GLBL_CMPY_CD     = #GLBL_CMPY_CD#
          AND   GRP.MENU_PROC_GRP_CD = #MENU_PROC_GRP_CD#
          AND   GRP.EZCANCELFLAG     = '0' 
          AND   PRE.GLBL_CMPY_CD_G0  = GRP.GLBL_CMPY_CD
          AND   PRE.MENU_PROC_GRP_CD = GRP.MENU_PROC_GRP_CD
          AND   PRE.EZCANCELFLAG     = '0'
          AND   PRC.GLBL_CMPY_CD     = PRE.GLBL_CMPY_CD_P0
          AND   PRC.MENU_PROC_ID     = PRE.MENU_PROC_ID
          AND   PRC.EZCANCELFLAG     = '0'
          AND   REL.GLBL_CMPY_CD_P0  = PRC.GLBL_CMPY_CD
          AND   REL.MENU_PROC_ID     = PRC.MENU_PROC_ID
          AND   REL.EZCANCELFLAG     = '0'
          AND   TAB.GLBL_CMPY_CD     = REL.GLBL_CMPY_CD_T0
          AND   TAB.UP_TAB_CD        = REL.UP_TAB_CD
          AND   TAB.BIZ_APP_ID       = #BIZ_APP_ID#
          AND   TAB.EZCANCELFLAG     = '0'

    </statement>
    
    <statement id="getAssigners" parameterClass="Map" resultClass="Map">
      SELECT
          USR_NM
          , LAST_NM
          , FIRST_NM
          , GLBL_CMPY_CD
          , EZCANCELFLAG
      FROM
      (
           SELECT
               H.HR_PSN_INTFC_EMP_ID USR_NM
             , H.HR_PSN_INTFC_PSN_FIRST_NM FIRST_NM
             , H.HR_PSN_INTFC_PSN_LAST_NM LAST_NM
             , H.GLBL_CMPY_CD GLBL_CMPY_CD
             , H.EZCANCELFLAG EZCANCELFLAG
           FROM
               HR_PSN_INTFC H
           START WITH
               H.HR_PSN_INTFC_SUPV_ID = #myUser#
               AND H.GLBL_CMPY_CD  = #glblCmpyCd#
               AND H.EZCANCELFLAG  = '0'
           CONNECT BY
               PRIOR H.HR_PSN_INTFC_EMP_ID = H.HR_PSN_INTFC_SUPV_ID
               AND H.GLBL_CMPY_CD  = #glblCmpyCd#
               AND H.EZCANCELFLAG  = '0'
           UNION
           SELECT
               A.USR_NM USR_NM
             , A.FIRST_NM FIRST_NM
             , A.LAST_NM LAST_NM
             , A.GLBL_CMPY_CD GLBL_CMPY_CD
             , A.EZCANCELFLAG EZCANCELFLAG
           FROM
               AUTH_PSN A
           WHERE
               A.USR_NM = #myUser#
               AND A.GLBL_CMPY_CD  = #glblCmpyCd#
               AND A.EZCANCELFLAG  = '0'
      )
      WHERE
           1=1
           <isNotNull property = "usrNm" > 
           AND USR_NM = #usrNm#
           </isNotNull>
           <isNotNull property = "lastNm" > 
           AND UPPER(LAST_NM) like #lastNm#
           </isNotNull>
           <isNotNull property = "firstNm" > 
           AND UPPER(FIRST_NM) like #firstNm#
           </isNotNull>
           AND ROWNUM &lt;= #maxRowNum#
    </statement>

    <statement id="getAssignersForAdmin" parameterClass="Map" resultClass="Map">
      SELECT
          USR_NM
          , LAST_NM
          , FIRST_NM
          , GLBL_CMPY_CD
          , EZCANCELFLAG
      FROM
      (
           SELECT
               H.HR_PSN_INTFC_EMP_ID USR_NM
             , H.HR_PSN_INTFC_PSN_FIRST_NM FIRST_NM
             , H.HR_PSN_INTFC_PSN_LAST_NM LAST_NM
             , H.GLBL_CMPY_CD GLBL_CMPY_CD
             , H.EZCANCELFLAG EZCANCELFLAG
           FROM
               HR_PSN_INTFC H
           WHERE
               H.GLBL_CMPY_CD  = #glblCmpyCd#
               AND H.EZCANCELFLAG  = '0'
           UNION
           SELECT
               A.USR_NM USR_NM
             , A.FIRST_NM FIRST_NM
             , A.LAST_NM LAST_NM
             , A.GLBL_CMPY_CD GLBL_CMPY_CD
             , A.EZCANCELFLAG EZCANCELFLAG
           FROM
               AUTH_PSN A
           WHERE
               A.USR_NM = #myUser#
               AND A.GLBL_CMPY_CD  = #glblCmpyCd#
               AND A.EZCANCELFLAG  = '0'
      )
      WHERE
           1=1
           <isNotNull property = "usrNm" > 
           AND USR_NM = #usrNm#
           </isNotNull>
           <isNotNull property = "lastNm" > 
           AND UPPER(LAST_NM) like #lastNm#
           </isNotNull>
           <isNotNull property = "firstNm" > 
           AND UPPER(FIRST_NM) like #firstNm#
           </isNotNull>
           AND ROWNUM &lt;= #maxRowNum#
    </statement>

</sqlMap>