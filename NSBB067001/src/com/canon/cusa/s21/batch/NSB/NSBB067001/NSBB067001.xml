<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NSBB067001">
    <statement id="getInputData" parameterClass="Map" resultClass="Map">
        SELECT
             TECHM.TECH_TOC_CD          AS TECH_TOC_CD
            ,ORG.FIRST_ORG_CD           AS FIRST_ORG_CD
            ,ORG.ORG_FUNC_ROLE_TP_CD    AS ORG_FUNC_ROLE_TP_CD
            ,TECHM.TECH_NM              AS TECH_NM
            ,TECHL.FIRST_LINE_ADDR      AS FIRST_LINE_ADDR
            ,''                         AS FILL_10_TXT_01
            ,TECHL.POST_CD              AS POST_CD
            ,TECHL.CTY_ADDR             AS CTY_ADDR
            ,ORG.FRTH_ORG_CD            AS FRTH_ORG_CD
            ,ORG.SIXTH_ORG_CD           AS SIXTH_ORG_CD
            ,'1'                        AS FILL_1_TXT_01
            ,'1'                        AS FILL_1_TXT_02
            ,ORG.SVNTH_ORG_CD           AS SVNTH_ORG_CD
            ,''                         AS FILL_10_TXT_02
            ,TECHL.TECH_LOC_CD          AS TECH_LOC_CD
        FROM
             TECH_MSTR      TECHM
            ,TECH_LOC       TECHL
            ,TOC            TOC
            ,ORG_FUNC_ASG   ASG
            ,S21_ORG        ORG
            <!-- START 2016/12/21 K.Kojima [QC#15653,ADD] -->
            ,ORG_FUNC_ROLE_TP OFRT
            <!-- END 2016/12/21 K.Kojima [QC#15653,ADD] -->
        WHERE
                TECHM.GLBL_CMPY_CD              = #glblCmpyCd#
            AND ASG.GLBL_CMPY_CD                = TECHM.GLBL_CMPY_CD 
            AND ASG.PSN_CD                      = TECHM.TECH_TOC_CD
            AND TOC.GLBL_CMPY_CD                = ASG.GLBL_CMPY_CD
            AND TOC.TOC_CD                      = ASG.TOC_CD
            AND TECHL.GLBL_CMPY_CD              = TECHM.GLBL_CMPY_CD
            AND TECHL.TECH_TOC_CD               = TECHM.TECH_TOC_CD
            AND SUBSTR(TECHL.TECH_LOC_CD, -1)   = #techLocCd_tech#
            AND ORG.GLBL_CMPY_CD                = TOC.GLBL_CMPY_CD
            AND ORG.TOC_CD                      = TOC.TOC_CD
            <!-- START 2016/12/21 K.Kojima [QC#15653,ADD] -->
            AND TOC.GLBL_CMPY_CD                = OFRT.GLBL_CMPY_CD
            AND TOC.ORG_FUNC_ROLE_TP_CD         = OFRT.ORG_FUNC_ROLE_TP_CD
            AND OFRT.TECH_MSTR_REQ_FLG          = #flgY#
            AND OFRT.ACTV_FLG                   = #flgY#
            <!-- END 2016/12/21 K.Kojima [QC#15653,ADD] -->
            AND TECHM.EZCANCELFLAG              = '0'
            AND TECHL.EZCANCELFLAG              = '0'
            AND TOC.EZCANCELFLAG                = '0'
            AND ASG.EZCANCELFLAG                = '0'
            AND ORG.EZCANCELFLAG                = '0'
            <!-- START 2016/12/21 K.Kojima [QC#15653,ADD] -->
            AND OFRT.EZCANCELFLAG               = '0'
            <!-- END 2016/12/21 K.Kojima [QC#15653,ADD] -->
            <!-- START 2016/12/16 K.Kojima [QC#15653,ADD] -->
            AND ASG.EFF_FROM_DT               &lt;= #slsDt#
            AND NVL(ASG.EFF_THRU_DT, #slsDt#) &gt;= #slsDt#
            <!-- END 2016/12/16 K.Kojima [QC#15653,ADD] -->
        ORDER BY
            TECHM.TECH_TOC_CD
    </statement>
</sqlMap>
