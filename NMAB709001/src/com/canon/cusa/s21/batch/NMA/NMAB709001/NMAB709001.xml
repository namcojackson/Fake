<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NMAB709001">
    <statement id="getRequest" parameterClass="Map" resultClass="Map">
        SELECT
             PLR.PRC_LIST_EQUIP_RQST_PK
            ,PLR.OLD_MDSE_CD
            ,PLR.OLD_MDSE_DESC_SHORT_TXT
            ,PLR.OLD_TMTH_TOT_STD_COST_AMT
            ,PLR.NEW_MDSE_CD
            ,PLR.NEW_MDSE_DESC_SHORT_TXT
            ,PLR.NEW_TMTH_TOT_STD_COST_AMT
            ,PLR.PRC_LIST_TP_CD
            ,PLR.PRC_LIST_ACT_TP_CD
            ,PLR.PRC_LISTS_DESC_TXT
            ,PLR.RETAN_ORIG_PRC_FLG
            ,PLR.NEW_PRC_AMT
            ,PLR.NEW_MIN_PRC_AMT
            ,PLR.NEW_MAX_PRC_AMT
            ,PLR.NEW_MLY_PMT_AMT
            ,PLR.NEW_MIN_LEASE_PMT_AMT
            ,PLR.NEW_MAX_LEASE_PMT_AMT
            ,PLR.LAST_UPD_DT
            ,PLR.LAST_UPD_USR_ID
          FROM 
            PRC_LIST_EQUIP_RQST PLR
          WHERE
                PLR.GLBL_CMPY_CD   = #GLBL_CMPY_CD#
            AND PLR.RQST_STS_TP_CD = #RQST_STS_TP_CD#
            AND PLR.EZCANCELFLAG   = '0'
    </statement>
    <statement id="getPrcListEquip" parameterClass="Map" resultClass="Map">
        SELECT
             PLE.GLBL_CMPY_CD
            ,PLE.PRC_LIST_EQUIP_PK
            ,PLE.PRC_CATG_CD
            ,PLE.PRC_LIST_EQUIP_CONFIG_NUM
            ,PLE.PRC_LIST_EQUIP_CONFIG_NM
            ,PLE.PRC_QLFY_TP_CD
            ,PLE.PRC_QLFY_VAL_TXT
            ,PLE.PKG_UOM_CD
            ,PLE.PRC_LIST_EQUIP_PRC_AMT
            ,PLE.MIN_PRC_AMT
            ,PLE.MAX_PRC_AMT
            ,PLE.PRC_TERM_UOM_CD
            ,PLE.PRC_TERM_AOT
            ,PLE.CUST_BID_QTY
            ,PLE.MLY_PMT_AMT
            ,PLE.MIN_LEASE_PMT_AMT
            ,PLE.MAX_LEASE_PMT_AMT
            ,PLE.PRC_FMLA_PK
            ,PLE.OPEN_MKT_FLG
            ,PLE.QUOT_REV_AMT
            ,PLE.COMP_CD
            ,PLE.EFF_FROM_DT
            ,PLE.EFF_THRU_DT
            ,PLE.DEL_FLG
          FROM
              PRC_LIST_EQUIP PLE
             ,PRC_CATG       DPC
             ,ORD_TAKE_MDSE  OTM
          WHERE
                PLE.GLBL_CMPY_CD      =  #GLBL_CMPY_CD#
        <isNotNull property="PRC_CATG_CD_EXCEPT">
            AND PLE.PRC_CATG_CD   NOT IN (#PRC_CATG_CD_EXCEPT#)
        </isNotNull>
        <isNotNull property="PRC_CATG_CD_SPECIFIC">
            AND PLE.PRC_CATG_CD       IN (#PRC_CATG_CD_SPECIFIC#)
        </isNotNull>
            AND PLE.PRC_QLFY_TP_CD    =  #PRC_QLFY_TP_CD#
            AND PLE.PRC_QLFY_VAL_TXT  =  #PRC_QLFY_VAL_TXT#
            AND PLE.EFF_FROM_DT <![CDATA[<=]]> #PROC_DATE#
            AND NVL(PLE.EFF_THRU_DT, '99991231') <![CDATA[>=]]> #PROC_DATE#
            AND PLE.PKG_UOM_CD        =  #PKG_UOM_CD#
            AND PLE.PRC_FMLA_PK       IS NULL
            AND PLE.DEL_FLG           =  #DEL_FLG#
            AND PLE.EZCANCELFLAG      =  '0'

            AND PLE.GLBL_CMPY_CD      =  DPC.GLBL_CMPY_CD
            AND PLE.PRC_CATG_CD       =  DPC.PRC_CATG_CD
            AND DPC.EFF_FROM_DT <![CDATA[<=]]> #PROC_DATE#
            AND NVL(DPC.EFF_THRU_DT, '99991231') <![CDATA[>=]]> #PROC_DATE#
            AND DPC.ACTV_FLG          =  #ACTV_FLG#
            AND DPC.DEL_FLG           =  #DEL_FLG#
            AND DPC.EZCANCELFLAG      =  '0'

            AND PLE.GLBL_CMPY_CD      =   OTM.GLBL_CMPY_CD(+)
            AND PLE.PRC_QLFY_VAL_TXT  =   OTM.ORD_TAKE_MDSE_CD(+)
            AND OTM.EZCANCELFLAG(+)   =   '0'
    </statement>
<!-- UPDATE START 2016/05/06 QC#7725 -->
    <statement id="getDuplicatePrcListEquip" parameterClass="Map" resultClass="Map">
        SELECT
            PRC_LIST_EQUIP_PK
          FROM PRC_LIST_EQUIP PLE
          WHERE 
               PLE.GLBL_CMPY_CD              = #GLBL_CMPY_CD#
           AND PLE.PRC_CATG_CD               = #PRC_CATG_CD#
        <isNotNull property="PRC_LIST_EQUIP_CONFIG_NUM">
           AND PLE.PRC_LIST_EQUIP_CONFIG_NUM = #PRC_LIST_EQUIP_CONFIG_NUM#
        </isNotNull>
        <isNull property="PRC_LIST_EQUIP_CONFIG_NUM">
           AND PLE.PRC_LIST_EQUIP_CONFIG_NUM IS NULL
        </isNull>
        <isNotNull property="PRC_LIST_EQUIP_CONFIG_NM">
           AND PLE.PRC_LIST_EQUIP_CONFIG_NM  = #PRC_LIST_EQUIP_CONFIG_NM#
        </isNotNull>
        <isNull property="PRC_LIST_EQUIP_CONFIG_NM">
           AND PLE.PRC_LIST_EQUIP_CONFIG_NM IS NULL
        </isNull>
        <isNotNull property="PRC_QLFY_TP_CD">
           AND PLE.PRC_QLFY_TP_CD            = #PRC_QLFY_TP_CD#
        </isNotNull>
        <isNull property="PRC_QLFY_TP_CD">
           AND PLE.PRC_QLFY_TP_CD IS NULL
        </isNull>
        <isNotNull property="PRC_QLFY_VAL_TXT">
           AND PLE.PRC_QLFY_VAL_TXT          = #PRC_QLFY_VAL_TXT#
        </isNotNull>
        <isNull property="PRC_QLFY_VAL_TXT">
           AND PLE.PRC_QLFY_VAL_TXT IS NULL
        </isNull>
        <isNotNull property="PKG_UOM_CD">
           AND PLE.PKG_UOM_CD                = #PKG_UOM_CD#
        </isNotNull>
        <isNull property="PKG_UOM_CD">
           AND PLE.PKG_UOM_CD IS NULL
        </isNull>
        <isNotNull property="PRC_TERM_UOM_CD">
           AND PLE.PRC_TERM_UOM_CD           = #PRC_TERM_UOM_CD#
        </isNotNull>
        <isNull property="PRC_TERM_UOM_CD">
           AND PLE.PRC_TERM_UOM_CD IS NULL
        </isNull>
        <isNotNull property="PRC_TERM_AOT">
           AND PLE.PRC_TERM_AOT              = #PRC_TERM_AOT#
        </isNotNull>
        <isNull property="PRC_TERM_AOT">
           AND PLE.PRC_TERM_AOT IS NULL
        </isNull>
<!--
         <isNotNull property="EFF_FROM_DT">
           AND PLE.EFF_FROM_DT               = #EFF_FROM_DT#
        </isNotNull>
        <isNull property="EFF_FROM_DT">
           AND PLE.EFF_FROM_DT IS NULL
        </isNull>
        <isNotNull	 property="EFF_THRU_DT">
           AND PLE.EFF_THRU_DT               = #EFF_THRU_DT#
        </isNotNull>
        <isNull property="EFF_THRU_DT">
           AND PLE.EFF_THRU_DT IS NULL
        </isNull>
 -->
           AND PLE.EFF_FROM_DT <![CDATA[<=]]> #PROC_DATE#
           AND NVL(PLE.EFF_THRU_DT, '99991231') <![CDATA[>=]]> #PROC_DATE#

           AND PLE.EZCANCELFLAG              = '0'
    </statement>
    <!-- UPDATE END 2016/05/06 QC#7725 -->
</sqlMap>