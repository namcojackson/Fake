<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NMAL7150Query">
    <statement id="getCsmpContrIntfc" parameterClass="Map" resultClass="Map">
        SELECT
            EZINTIME
            ,CSMP_PROC_STS_CD
            ,CSMP_ERR_MSG_TXT
            ,DLR_REF_NUM
            ,CSMP_TRX_STS_CD
            ,PREV_CSMP_NUM
            ,PREV_USR_TXT
            ,RTL_DLR_CD
            ,DS_ACCT_NM
            ,CSMP_NUM
            ,CUSA_END_USR_NUM
            ,EFF_FROM_DT
            ,EFF_THRU_DT
            ,CR_LIST_TXT
            ,CR_LIST_GNRN_NUM
            ,CSMP_CONTR_STS_CD
            ,CSMP_RG_CD
            ,CSMP_CATG_CD
            ,VLD_FROM_DT
            ,CSMP_CONTR_INTFC_PK
            ,CSMP_PROC_STS_DESC_TXT
            ,EZUPTIME
            ,EZUPTIMEZONE
        FROM
            (SELECT
                SUBSTR(CCI.EZINTIME,1,8) AS EZINTIME
                ,CCI.CSMP_PROC_STS_CD
                ,CCI.CSMP_ERR_MSG_TXT
                ,CCI.DLR_REF_NUM
                ,CCI.CSMP_TRX_STS_CD
                ,CCI.PREV_CSMP_NUM
                ,CCI.PREV_USR_TXT
                ,CCI.RTL_DLR_CD
                ,CCI.DS_ACCT_NM
                ,CCI.CSMP_NUM
                ,CCI.CUSA_END_USR_NUM
                ,CCI.EFF_FROM_DT
                ,CCI.EFF_THRU_DT
                ,CCI.CR_LIST_TXT
                ,CCI.CR_LIST_GNRN_NUM
                ,CCI.CSMP_CONTR_STS_CD
                ,CCI.CSMP_RG_CD
                ,CCI.CSMP_CATG_CD
                ,CCI.VLD_FROM_DT
                ,CCI.CSMP_CONTR_INTFC_PK
                ,CPS.CSMP_PROC_STS_DESC_TXT
                ,CCI.EZUPTIME
                ,CCI.EZUPTIMEZONE
            FROM
                CSMP_CONTR_INTFC CCI
                ,CSMP_PROC_STS CPS
            WHERE
                    CCI.GLBL_CMPY_CD             = #glblCmpyCd#
                AND CCI.EZCANCELFLAG             = '0'
                <isNotNull property="dateFrom">
                AND SUBSTR(CCI.EZINTIME,1,8) &gt;= #dateFrom#
                </isNotNull>
                <isNotNull property="dateTo">
                AND SUBSTR(CCI.EZINTIME,1,8) &lt;= #dateTo#
                </isNotNull>
                
                <isNotNull property="flagCd">
                <iterate property="flagCd" var="elem[]" open="AND (" close=")" conjunction="OR">
                    CCI.CSMP_PROC_STS_CD        = #elem[]#
                </iterate>
                </isNotNull>
                
                AND CCI.GLBL_CMPY_CD            = CPS.GLBL_CMPY_CD
                AND CCI.EZCANCELFLAG            = CPS.EZCANCELFLAG
                AND CCI.CSMP_PROC_STS_CD        = CPS.CSMP_PROC_STS_CD
            
            ORDER BY
                CPS.CSMP_PROC_STS_SORT_NUM
                ,CCI.EZINTIME
                ,CCI.CSMP_CONTR_INTFC_PK
            )
        WHERE
           ROWNUM &lt;= #rowNum#
    
    </statement>
</sqlMap>
