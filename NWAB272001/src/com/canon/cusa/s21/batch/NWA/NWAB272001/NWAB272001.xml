<?xml version="1.0" encoding="UTF-8"?>
<sqlMap namespace="NWAB272001">

    <statement id="getMlSendPrm" parameterClass="Map" resultClass="Map">
    SELECT
         A.*
        ,B.ML_GRP_ID
        ,B.ML_TMPL_ID
    FROM
         SO_TO_VND_NTFY_CTRL A
        ,SO_TO_VND_NTFY_MSTR B
    WHERE
            A.GLBL_CMPY_CD  = #glblCmpyCd#
        AND A.EZCANCELFLAG  = '0'
        AND B.GLBL_CMPY_CD  = A.GLBL_CMPY_CD
        AND B.EZCANCELFLAG  = '0'
        AND A.NTFY_PROC_STS_CD IN (#inNotCompleted#, #error#)
        AND A.WH_CD     = B.WH_CD
    ORDER BY
         A.WH_CD, A.NTFY_CRAT_TS
    </statement>

    <statement id="getNtfyMailAddress" parameterClass="Map" resultClass="String">
    SELECT
        A.ML_USR_ADDR
    FROM
        ML_USR_ADDR             A
    WHERE
            A.GLBL_CMPY_CD      = #glblCmpyCd#
        AND A.EZCANCELFLAG      = '0'
        AND A.ML_GRP_ID         = #mlGrpId#
    </statement>
</sqlMap>
