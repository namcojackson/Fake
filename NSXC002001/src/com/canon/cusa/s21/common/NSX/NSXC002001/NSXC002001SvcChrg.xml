<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NSXC002001SvcChrg">
    <statement id="getChrgTpFromTask" parameterClass="Map" resultClass="Map">
        SELECT
            CASE
                WHEN
                    SCT.SVC_BILL_TP_CD = '*'
                THEN
                    SCT.SVC_BILL_TP_CD
                ELSE
                     (SELECT
                         SBT.SVC_CHRG_TP_CD
                     FROM
                         SVC_BILL_TP SBT
                     WHERE
                         SBT.GLBL_CMPY_CD   = SCT.GLBL_CMPY_CD
                     AND SBT.SVC_BILL_TP_CD = SCT.SVC_BILL_TP_CD
                     AND SBT.EZCANCELFLAG   = '0')
            END AS SVC_CHRG_TP_CD
           ,SBI.SVC_CHRG_TP_CD AS SVC_TASK_CHRG_TP_CD
           ,STK.SVC_MACH_MSTR_PK
        FROM
            SVC_TASK       STK
           ,DS_SVC_CALL_TP SCT
           ,SVC_BILL_TP    SBI
        WHERE
            STK.GLBL_CMPY_CD      = #glblCmpyCd#
        AND STK.SVC_TASK_NUM      = #svcTaskNum#
        AND SCT.GLBL_CMPY_CD      = STK.GLBL_CMPY_CD
        AND SCT.DS_SVC_CALL_TP_CD = STK.DS_SVC_CALL_TP_CD
        AND SBI.GLBL_CMPY_CD      = STK.GLBL_CMPY_CD
        AND SBI.SVC_BILL_TP_CD    = STK.SVC_BILL_TP_CD
        AND SBI.EZCANCELFLAG      = '0'
        AND STK.EZCANCELFLAG      = '0'
        AND SCT.EZCANCELFLAG      = '0'
    </statement>
    <statement id="getChrgTpFromContr" parameterClass="Map" resultClass="String">
        SELECT
            SBT.SVC_CHRG_TP_CD
        FROM
            SVC_BILL_TP    SBT
        WHERE
            SBT.GLBL_CMPY_CD   = #glblCmpyCd#
        AND SBT.SVC_BILL_TP_CD = #svcBillTpCd#
        AND SBT.EZCANCELFLAG   = '0'
    </statement>
    <statement id="getTaskList" parameterClass="Map" resultClass="String">
        SELECT
            STK.SVC_TASK_NUM
        FROM
            SVC_TASK    STK
        WHERE
            STK.GLBL_CMPY_CD  = #glblCmpyCd#
        AND STK.FSR_NUM       = #fsrNum#
        AND STK.EZCANCELFLAG  = '0'
    </statement>
    <statement id="getSvcFlatChrgFlgList" parameterClass="Map" resultClass="String">
        SELECT
            DSC.SVC_FLAT_CHRG_FLG
        FROM
            DS_SVC_CALL_TP    DSC
           ,SVC_TASK          STK
        WHERE
            STK.GLBL_CMPY_CD      = #glblCmpyCd#
        <isNotNull property="fsrNum">
        AND STK.FSR_NUM           = #fsrNum#
        </isNotNull>
        <isNotNull property="svcTaskNum">
        AND STK.SVC_TASK_NUM      = #svcTaskNum#
        </isNotNull>
        AND DSC.GLBL_CMPY_CD      = STK.GLBL_CMPY_CD
        AND DSC.DS_SVC_CALL_TP_CD = STK.DS_SVC_CALL_TP_CD
        AND STK.EZCANCELFLAG      = '0'
        AND DSC.EZCANCELFLAG      = '0'
    </statement>
<!-- //NA#ASCC CLICK ADD Start -->
<!-- TODO Taizo Need to be modified due to logic for stub. -->
    <statement id="getStubParams" parameterClass="Map" resultClass="Map">
        SELECT
            VCC.VAR_CHAR_CONST_NM
           ,VCC.VAR_CHAR_CONST_VAL
        FROM
            VAR_CHAR_CONST VCC
        WHERE
            VCC.EZCANCELFLAG         = '0'
        AND VCC.GLBL_CMPY_CD         = #glblCmpyCd#
        AND VCC.VAR_CHAR_CONST_NM   IN ('DEF_SVC_BILL_TP_CD', 'AHS_AVAL_FLG', 'SVC_LBOR_UNIT_AMT')
    </statement>
<!-- //NA#ASCC CLICK ADD End -->
</sqlMap>
