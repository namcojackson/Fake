<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sqlMap namespace="NSXC002001GetCovInfo">
    <typeAlias alias="CovInfoBean"   type="com.canon.cusa.s21.common.NSX.NSXC002001.CovInfoBean"/>
    <statement id="getCovInfoBySvcTaskNum" parameterClass="Map" resultMap="result.CovInfoBean">
        SELECT
                 SBT.SVC_BILL_TP_CD      AS SVC_BILL_TP_CD
                ,SBT.LBOR_CHRG_FLG       AS LBOR_CHRG_FLG
                ,SBT.PRT_CHRG_FLG        AS PRT_CHRG_FLG
                ,SBT.EXP_CHRG_FLG        AS EXP_CHRG_FLG
                ,SBT.DRUM_CHRG_FLG       AS DRUM_CHRG_FLG
        FROM
                 SVC_TASK     ST
                ,SVC_BILL_TP  SBT
        WHERE
                ST.GLBL_CMPY_CD        = #glblCmpyCd#
            AND ST.SVC_TASK_NUM        = #svcTaskNum#
            AND ST.EZCANCELFLAG        = '0'
            AND ST.GLBL_CMPY_CD        = SBT.GLBL_CMPY_CD
            AND ST.SVC_BILL_TP_CD      = SBT.SVC_BILL_TP_CD
            AND SBT.EZCANCELFLAG       = '0'
    </statement>
    <statement id="getCovInfoBySvcMachMstrPk" parameterClass="Map" resultMap="result.CovInfoBean">
        SELECT
                 SBT.SVC_BILL_TP_CD      AS SVC_BILL_TP_CD
                ,SBT.LBOR_CHRG_FLG       AS LBOR_CHRG_FLG
                ,SBT.PRT_CHRG_FLG        AS PRT_CHRG_FLG
                ,SBT.EXP_CHRG_FLG        AS EXP_CHRG_FLG
                ,SBT.DRUM_CHRG_FLG       AS DRUM_CHRG_FLG
        FROM
                 DS_CONTR_DTL       DCD
                ,MDSE               MDS
                ,SVC_COV_TMPL_TP    SCT
                ,SVC_BILL_TP        SBT
        WHERE
                DCD.GLBL_CMPY_CD        = #glblCmpyCd#
            AND DCD.SVC_MACH_MSTR_PK    = #svcMachMstrPk#
            AND DCD.EZCANCELFLAG        = '0'
            AND DCD.GLBL_CMPY_CD        = MDS.GLBL_CMPY_CD
            AND DCD.SVC_PGM_MDSE_CD     = MDS.MDSE_CD
            AND MDS.EZCANCELFLAG        = '0'
            AND MDS.GLBL_CMPY_CD        = SCT.GLBL_CMPY_CD
--            AND MDS.SVC_PGM_MDSE_CD     = SCT.MDSE_CD
            AND MDS.EZCANCELFLAG        = '0'
            AND SCT.GLBL_CMPY_CD        = SBT.GLBL_CMPY_CD
--            AND SCT.SVC_COV_TMPL_TP_CD  = SBT.SVC_BILL_TP_CD
            AND SBT.EZCANCELFLAG        = '0'
    </statement>
    <resultMap id="result.CovInfoBean" class="CovInfoBean">
        <result property="svcBillTpCd"       column="SVC_BILL_TP_CD"        javaType="String"/>
        <result property="lborChrgFlg"       column="LBOR_CHRG_FLG"         javaType="String"/>
        <result property="prtChrgFlg"        column="PRT_CHRG_FLG"          javaType="String"/>
        <result property="expChrgFlg"        column="EXP_CHRG_FLG"          javaType="String"/>
        <result property="drumChrgFlg"       column="DRUM_CHRG_FLG"         javaType="String"/>
    </resultMap>
</sqlMap>
