<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NLBL0110Query">

	<typeAlias alias="NLBL0110SMsg"		type="business.blap.NLBL0110.NLBL0110SMsg"/>
	<typeAlias alias="NLBL0110_ASMsg"	type="business.blap.NLBL0110.NLBL0110_ASMsg"/>
	
	
	<statement id="getWHList" parameterClass="Map" resultClass="Map">
		SELECT
				WH_CD
		      	,LOC_NM
		
		FROM
		        WH
		
		WHERE
				GLBL_CMPY_CD	= #sMsg.glblCmpyCd#
			AND EZCANCELFLAG	= '0'
			
		<isNotEqual property="sMsg.whCd_H2" compareValue="*">
			<iterate property="dataSecurityAttrList" var="elem[]" open="AND (" close=")" conjunction="OR">
				WH_CD = #elem[].value#
			</iterate>
		</isNotEqual>
		
		ORDER BY
		        WH_CD
	</statement>

   	<!--  2013/05/24 R-OM025 Inventory Transaction Mod Start -->
	<!-- <statement id="getWHBizDaysOfEndOfMonth" parameterClass="NLBL0110SMsg" resultMap="result.NLBL0110_ASMsg"> -->
	<statement id="getWHBizDaysOfEndOfMonth" parameterClass="Map" resultMap="result.NLBL0110_ASMsg">
   	<!--  2013/05/24 R-OM025 Inventory Transaction Mod End -->

		SELECT
			<!--  10/07/2015 Mod Start -->
			<!--	WH.WH_CD								AS WH_CD -->
				RWH.RTL_WH_CD							AS WH_CD
			<!--  10/07/2015 Mod End -->
				,NVL(WHEM.END_MTH_BIZ_DAYS_AOT, 0)		AS END_MTH_BIZ_DAYS_AOT
				,WHEM.EZUPTIME							AS EZUPTIME
				,WHEM.EZUPTIMEZONE						AS EZUPTIMEZONE
		FROM
			<!--  10/07/2015 Mod Start -->
			<!--  	WH				WH -->
				RTL_WH			RWH
			<!--  10/07/2015 Mod End -->
				,WH_END_MTH		WHEM
		WHERE
			<!--  10/07/2015 Mod Start -->
			<!--	WH.GLBL_CMPY_CD			=	WHEM.GLBL_CMPY_CD(+) -->
				RWH.GLBL_CMPY_CD			=	WHEM.GLBL_CMPY_CD(+)
			<!--  10/07/2015 Mod End -->
			<!--  10/07/2015 Mod Start -->
			<!-- AND	WH.WH_CD			=	WHEM.WH_CD(+) -->
			AND	RWH.RTL_WH_CD			=	WHEM.WH_CD(+)
			<!--  10/07/2015 Mod End -->
			<!--  2013/05/24 R-OM025 Inventory Transaction Mod Start -->
			<!--  AND	WH.GLBL_CMPY_CD			=	#glblCmpyCd# -->

			<!-- <isNotEqual property="whCd_H2" compareValue="00"> -->
				<!-- AND WH.WH_CD			=	#whCd_H2# -->
			<!-- </isNotEqual> -->
			
			<!-- <isEqual property="whCd_H2" compareValue="00"> -->
				<!-- <iterate property="whCd_H1" var="elem[]" open="AND (" close=")" conjunction="OR"> -->
					<!-- WH.WH_CD = #elem[].value# -->
				<!-- </iterate> -->
			<!-- </isEqual> -->

			<!--  10/07/2015 Mod Start -->
			<!-- AND	WH.GLBL_CMPY_CD			=	sMsg.glblCmpyCd -->
			<!-- AND	WH.EZCANCELFLAG			=	'0' -->
			AND	RWH.GLBL_CMPY_CD			=	#sMsg.glblCmpyCd#
			AND	RWH.EZCANCELFLAG			=	'0'
			<!--  10/07/2015 Mod end -->
			AND	WHEM.EZCANCELFLAG(+)	=	'0'

			<isNotNull property="sMsg.whCd_H2">
			<!--  10/07/2015 Mod Start -->
			<!--	AND WH.WH_CD			=	sMsg.whCd_H2 -->
				AND RWH.RTL_WH_CD			=	#sMsg.whCd_H2#
			<!--  10/07/2015 Mod End -->
			</isNotNull>

			<iterate property="dataSecurityAttrList" var="elem[]" open="AND (" close=")" conjunction="OR">
			<!--  10/07/2015 Mod Start -->
			<!--	WH.WH_CD = #elem[].value# -->
				RWH.RTL_WH_CD = #elem[].value#
			<!--  10/07/2015 Mod End -->
			</iterate>
			<!--  2013/05/24 R-OM025 Inventory Transaction Mod End -->
			
		ORDER BY
			<!--  10/07/2015 Mod Start -->
			<!--	WH.WH_CD -->
				RWH.RTL_WH_CD
			<!--  10/07/2015 Mod End -->
	</statement>

	<resultMap id="result.NLBL0110_ASMsg" class="NLBL0110_ASMsg">
		<result property="whCd_A1"                  column="WH_CD"                      javaType="EZDSStringItem"/>
		<result property="endMthBizDaysAot_A1"      column="END_MTH_BIZ_DAYS_AOT"       javaType="EZDSBigDecimalItem"/>
		<result property="ezUpTime_A1"              column="EZUPTIME"                   javaType="EZDSStringItem"/>
		<result property="ezUpTimeZone_A1"          column="EZUPTIMEZONE"               javaType="EZDSStringItem"/>
	</resultMap>

	<statement id="getCalTpCd" parameterClass="Map" resultClass="String">
		SELECT 
			C.CAL_TP_CD
		FROM 
			CAL C
			,CAL_RELN CR
		WHERE 
				CR.GLBL_CMPY_CD = #glblCmpyCd#
			AND CR.CAL_SUB_TP_CD = #calSubTpCd#
			AND CR.CAL_MULT_CD = #calMultCd#
			AND C.DT_ATTRB_CD = #dtAttrbCd#
			AND C.CAL_DT LIKE #calDt#
			AND C.GLBL_CMPY_CD = CR.GLBL_CMPY_CD
			AND C.CAL_TP_CD = CR.CAL_TP_CD
			AND C.EZCANCELFLAG = '0'
			AND CR.EZCANCELFLAG = '0'	
	</statement>

	<!--  2013/05/24 R-OM025 Inventory Transaction Delete Start -->
	<!-- <statement id="getWHEndMthForUpdate" parameterClass="NLBL0110SMsg" resultMap="result2.NLBL0110_ASMsg"> -->
		<!-- SELECT -->
				<!-- WHEM.WH_CD						AS WH_CD -->
		<!-- FROM -->
				<!-- WH_END_MTH		WHEM -->
		<!-- WHERE -->
			<!-- WHEM.GLBL_CMPY_CD		=	#glblCmpyCd# -->
			<!-- AND	WHEM.EZCANCELFLAG		=	'0' -->
			<!-- <isNotEqual property="whCd_H2" compareValue="00"> -->
				<!-- AND WHEM.WH_CD			=	#whCd_H2# -->
			<!-- </isNotEqual> -->
			
			<!-- <isEqual property="whCd_H2" compareValue="00"> -->
				<!-- <iterate property="whCd_H1" var="elem[]" open="AND (" close=")" conjunction="OR"> -->
					<!-- WHEM.WH_CD = #elem[].value# -->
				<!-- </iterate> -->
			<!-- </isEqual> -->
		<!-- FOR UPDATE NOWAIT -->
		<!-- ORDER BY -->
				<!-- WHEM.WH_CD -->
	<!-- </statement> -->

	<!-- <resultMap id="result2.NLBL0110_ASMsg" class="NLBL0110_ASMsg"> -->
		<!-- <result property="whCd_A1"					column="WH_CD"						javaType="EZDSStringItem"/> -->
		<!-- <result property="ezUpTime_A1"				column="EZUPTIME"					javaType="EZDSStringItem"/> -->
		<!-- <result property="ezUpTimeZone_A1"			column="EZUPTIMEZONE"				javaType="EZDSStringItem"/> -->
	<!-- </resultMap> -->
	<!--  2013/05/24 R-OM025 Inventory Transaction Delete End -->
</sqlMap>
