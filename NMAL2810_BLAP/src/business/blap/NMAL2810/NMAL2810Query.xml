<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NMAL2810Query">

    <typeAlias alias="NMAL2810CMsg"    type="business.blap.NMAL2810.NMAL2810CMsg"/>

    <statement id="getDetailLocationInfo" parameterClass="Map" resultMap="result.getDetailLocationInfo">
        SELECT DISTINCT
            PLW.FIRST_LINE_ADDR       AS FIRST_LINE_ADDR
          , PLW.SCD_LINE_ADDR         AS SCD_LINE_ADDR
          , PLW.THIRD_LINE_ADDR       AS THIRD_LINE_ADDR
          , PLW.FRTH_LINE_ADDR        AS FRTH_LINE_ADDR
          , PLW.CTY_ADDR              AS CTY_ADDR
          , PLW.ST_CD                 AS ST_CD
          , PLW.POST_CD               AS POST_CD
          , PLW.TEL_NUM               AS TEL_NUM
          , DACP.DS_ACCT_DUNS_NM      AS DS_ACCT_DUNS_NM
          , PLW.DUNS_NUM              AS DUNS_NUM
          , PLW.DS_ULT_DUNS_NUM      AS DS_ULT_DUNS_NUM
          , PLW.DS_CUST_SIC_CD       AS DS_CUST_SIC_CD_DPLW
          , PLW.DS_CUST_SIC_DESC_TXT AS DS_CUST_SIC_DESC_TXT_DPLW
          , PLW.DS_LOC_REV_AMT       AS DS_LOC_REV_AMT
          , PLW.DS_LOC_EMP_NUM       AS DS_LOC_EMP_NUM
          , PLW.GLN_NUM               AS GLN_NUM
          , PLW.DS_PRNT_DUNS_NUM     AS DS_PRNT_DUNS_NUM
          , PLW.HQ_DUNS_NUM          AS HQ_DUNS_NUM
          , DACP.DS_CUST_SIC_CD       AS DS_CUST_SIC_CD_DACP
          , DACP.DS_CUST_SIC_DESC_TXT AS DS_CUST_SIC_DESC_TXT_DACP
        FROM
          ACCT_LOC         AL
          , PTY_LOC_WRK    PLW
          , ( 
            SELECT
                DAC.SELL_TO_CUST_CD AS DS_ACCT_NUM
              , DAC.DS_ACCT_DUNS_NM
              , DAC.DS_CUST_SIC_CD
              , DAC.DS_CUST_SIC_DESC_TXT 
            FROM
              SELL_TO_CUST DAC 
            WHERE
                DAC.GLBL_CMPY_CD = #glblCmpyCd# 
            AND DAC.RGTN_STS_CD = #rgtnStsP20# 
            AND DAC.EFF_FROM_DT &lt;= #slsDate# 
            AND NVL(DAC.EFF_THRU_DT, #max_date#) &gt;= #slsDate# 
            AND DAC.DS_ACCT_ACTV_CUST_FLG = 'Y' 
            AND DAC.EZCANCELFLAG = '0' 
          ) DACP 
        WHERE
            AL.GLBL_CMPY_CD = #glblCmpyCd# 
        AND AL.LOC_NUM = #locNum# 
        AND AL.EFF_FROM_DT &lt;= #slsDate# 
        AND NVL(AL.EFF_THRU_DT, #max_date#) &gt;= #slsDate# 
        AND AL.RGTN_STS_CD = #rgtnStsP20# 
        AND AL.EZCANCELFLAG = '0' 

        AND AL.GLBL_CMPY_CD = PLW.GLBL_CMPY_CD 
        AND AL.LOC_NUM = PLW.LOC_NUM 
        AND AL.EZCANCELFLAG = PLW.EZCANCELFLAG 

        AND AL.DS_ACCT_NUM = DACP.DS_ACCT_NUM

        UNION ALL

        SELECT DISTINCT
            PLW.FIRST_LINE_ADDR       AS FIRST_LINE_ADDR
          , PLW.SCD_LINE_ADDR         AS SCD_LINE_ADDR
          , PLW.THIRD_LINE_ADDR       AS THIRD_LINE_ADDR
          , PLW.FRTH_LINE_ADDR        AS FRTH_LINE_ADDR
          , PLW.CTY_ADDR              AS CTY_ADDR
          , PLW.ST_CD                 AS ST_CD
          , PLW.POST_CD               AS POST_CD
          , PLW.TEL_NUM               AS TEL_NUM
          , DACP.DS_ACCT_DUNS_NM      AS DS_ACCT_DUNS_NM
          , PLW.DUNS_NUM              AS DUNS_NUM
          , PLW.DS_ULT_DUNS_NUM      AS DS_ULT_DUNS_NUM
          , PLW.DS_CUST_SIC_CD       AS DS_CUST_SIC_CD_DPLW
          , PLW.DS_CUST_SIC_DESC_TXT AS DS_CUST_SIC_DESC_TXT_DPLW
          , PLW.DS_LOC_REV_AMT       AS DS_LOC_REV_AMT
          , PLW.DS_LOC_EMP_NUM       AS DS_LOC_EMP_NUM
          , PLW.GLN_NUM               AS GLN_NUM
          , PLW.DS_PRNT_DUNS_NUM     AS DS_PRNT_DUNS_NUM
          , PLW.HQ_DUNS_NUM          AS HQ_DUNS_NUM
          , DACP.DS_CUST_SIC_CD       AS DS_CUST_SIC_CD_DACP
          , DACP.DS_CUST_SIC_DESC_TXT AS DS_CUST_SIC_DESC_TXT_DACP
        FROM
          PROS_PTY_LOC_WRK    PLW
          , ( 
            SELECT
                DAP.LOC_NUM
              , DAP.DS_ACCT_DUNS_NM
              , DAP.DS_CUST_SIC_CD
              , DAP.DS_CUST_SIC_DESC_TXT 
            FROM
              DS_ACCT_PROS DAP 
            WHERE
                DAP.GLBL_CMPY_CD = #glblCmpyCd# 
            AND DAP.RGTN_STS_CD = #rgtnStsP01# 
            AND DAP.EFF_FROM_DT &lt;= #slsDate# 
            AND NVL(DAP.EFF_THRU_DT, #max_date#) &gt;= #slsDate# 
            AND DAP.DS_ACCT_ACTV_CUST_FLG = 'Y' 
            AND DAP.EZCANCELFLAG = '0'
          ) DACP 
        WHERE
            DACP.LOC_NUM = #locNum# 

        AND PLW.GLBL_CMPY_CD = #glblCmpyCd#
        AND DACP.LOC_NUM = PLW.LOC_NUM 
        AND PLW.EZCANCELFLAG = '0'
    </statement>

    <resultMap id="result.getDetailLocationInfo" class="NMAL2810CMsg">
        <result property="firstLineAddr_S"      column="FIRST_LINE_ADDR"            javaType="EZDSStringItem"/>
        <result property="scdLineAddr_S"        column="SCD_LINE_ADDR"              javaType="EZDSStringItem"/>
        <result property="thirdLineAddr_S"      column="THIRD_LINE_ADDR"            javaType="EZDSStringItem"/>
        <result property="frthLineAddr_S"       column="FRTH_LINE_ADDR"             javaType="EZDSStringItem"/>
        <result property="ctyAddr_S"            column="CTY_ADDR"                   javaType="EZDSStringItem"/>
        <result property="stCd_S"               column="ST_CD"                      javaType="EZDSStringItem"/>
        <result property="postCd_S"             column="POST_CD"                    javaType="EZDSStringItem"/>
        <result property="telNum_S"             column="TEL_NUM"                    javaType="EZDSStringItem"/>
        <result property="dsAcctDunsNm_S"       column="DS_ACCT_DUNS_NM"            javaType="EZDSStringItem"/>
        <result property="dunsNum_S"            column="DUNS_NUM"                   javaType="EZDSStringItem"/>
        <result property="dsUltDunsNum_S"       column="DS_ULT_DUNS_NUM"            javaType="EZDSStringItem"/>
        <result property="dsCustSicCd_S"        column="DS_CUST_SIC_CD_DPLW"        javaType="EZDSStringItem"/>
        <result property="dsCustSicDescTxt_S"   column="DS_CUST_SIC_DESC_TXT_DPLW"  javaType="EZDSStringItem"/>
        <result property="dsLocRevAmt_S"        column="DS_LOC_REV_AMT"             javaType="EZDCBigDecimalItem"/>
        <result property="dsLocEmpNum_S"        column="DS_LOC_EMP_NUM"             javaType="EZDCBigDecimalItem"/>
        <result property="glnNum_S"             column="GLN_NUM"                    javaType="EZDCBigDecimalItem"/>
        <result property="dsPrntDunsNum_S"      column="DS_PRNT_DUNS_NUM"           javaType="EZDSStringItem"/>
        <result property="hqDunsNum_S"          column="HQ_DUNS_NUM"                javaType="EZDSStringItem"/>
        <result property="dsCustSicCd_SC"       column="DS_CUST_SIC_CD_DACP"        javaType="EZDSStringItem"/>
        <result property="dsCustSicDescTxt_SC"  column="DS_CUST_SIC_DESC_TXT_DACP"  javaType="EZDSStringItem"/>
    </resultMap>

    <statement id="getDetailProspectInfo" parameterClass="Map" resultMap="result.getDetailProspectInfo">
        SELECT
            DARP.BEF_LOC_FIRST_LINE_ADDR  AS BEF_LOC_FIRST_LINE_ADDR
          , DARP.BEF_LOC_SCD_LINE_ADDR    AS BEF_LOC_SCD_LINE_ADDR
          , DARP.BEF_LOC_THIRD_LINE_ADDR  AS BEF_LOC_THIRD_LINE_ADDR
          , DARP.BEF_LOC_FRTH_LINE_ADDR   AS BEF_LOC_FRTH_LINE_ADDR
          , DARP.BEF_SHIP_TO_CTY_ADDR     AS BEF_SHIP_TO_CTY_ADDR
          , DARP.BEF_SHIP_TO_ST_NM        AS BEF_SHIP_TO_ST_NM
          , DARP.BEF_SHIP_TO_POST_CD      AS BEF_SHIP_TO_POST_CD
          , DARP.BEF_TEL_NUM              AS BEF_TEL_NUM
          , DARP.BEF_DUNS_NUM             AS BEF_DUNS_NUM
          , DARP.BEF_DS_ULT_DUNS_NUM      AS BEF_DS_ULT_DUNS_NUM
          , DARP.BEF_DS_CUST_SIC_CD       AS BEF_DS_CUST_SIC_CD
          , DARP.BEF_DS_CUST_SIC_DESC_TXT AS BEF_DS_CUST_SIC_DESC_TXT
          , DARP.BEF_DS_LOC_REV_AMT       AS BEF_DS_LOC_REV_AMT
          , DARP.BEF_DS_LOC_EMP_NUM       AS BEF_DS_LOC_EMP_NUM
          , DARP.AFT_LOC_FIRST_LINE_ADDR  AS AFT_LOC_FIRST_LINE_ADDR
          , DARP.AFT_LOC_SCD_LINE_ADDR    AS AFT_LOC_SCD_LINE_ADDR
          , DARP.AFT_LOC_THIRD_LINE_ADDR  AS AFT_LOC_THIRD_LINE_ADDR
          , DARP.AFT_LOC_FRTH_LINE_ADDR   AS AFT_LOC_FRTH_LINE_ADDR
          , DARP.AFT_LOC_CTY_ADDR         AS AFT_LOC_CTY_ADDR
          , DARP.AFT_LOC_ST_CD            AS AFT_LOC_ST_CD
          , DARP.AFT_LOC_POST_CD          AS AFT_LOC_POST_CD
          , DARP.AFT_TEL_NUM              AS AFT_TEL_NUM
          , DARP.AFT_DS_ACCT_DUNS_NM      AS AFT_DS_ACCT_DUNS_NM
          , DARP.AFT_DUNS_NUM             AS AFT_DUNS_NUM
          , DARP.AFT_DS_ULT_DUNS_NUM      AS AFT_DS_ULT_DUNS_NUM
          , DARP.AFT_DS_CUST_SIC_CD       AS AFT_DS_CUST_SIC_CD
          , DARP.AFT_DS_CUST_SIC_DESC_TXT AS AFT_DS_CUST_SIC_DESC_TXT
          , DARP.AFT_DS_LOC_REV_AMT       AS AFT_DS_LOC_REV_AMT
          , DARP.AFT_DS_LOC_EMP_NUM       AS AFT_DS_LOC_EMP_NUM
          , DARP.AFT_GLN_NUM              AS AFT_GLN_NUM
          , DARP.AFT_DS_PRNT_DUNS_NUM     AS AFT_DS_PRNT_DUNS_NUM
          , DARP.AFT_HQ_DUNS_NUM          AS AFT_HQ_DUNS_NUM
          , DARP.AFT_DS_CMPY_SIC_CD       AS AFT_DS_CMPY_SIC_CD
          , DARP.AFT_DS_CMPY_SIC_DESC_TXT AS AFT_DS_CMPY_SIC_DESC_TXT 
        FROM
            DS_ACCT_RVW_PROS DARP 
        WHERE
            DARP.GLBL_CMPY_CD = #glblCmpyCd# 
        AND DARP.RVW_PROS_NUM = #prosNum# 
        AND EZCANCELFLAG = '0' 
    </statement>

    <resultMap id="result.getDetailProspectInfo" class="NMAL2810CMsg">
        <result property="firstLineAddr_B"      column="BEF_LOC_FIRST_LINE_ADDR"   javaType="EZDSStringItem"/>
        <result property="scdLineAddr_B"        column="BEF_LOC_SCD_LINE_ADDR"     javaType="EZDSStringItem"/>
        <result property="thirdLineAddr_B"      column="BEF_LOC_THIRD_LINE_ADDR"   javaType="EZDSStringItem"/>
        <result property="frthLineAddr_B"       column="BEF_LOC_FRTH_LINE_ADDR"    javaType="EZDSStringItem"/>
        <result property="ctyAddr_B"            column="BEF_SHIP_TO_CTY_ADDR"      javaType="EZDSStringItem"/>
        <result property="stCd_B"               column="BEF_SHIP_TO_ST_NM"         javaType="EZDSStringItem"/>
        <result property="postCd_B"             column="BEF_SHIP_TO_POST_CD"       javaType="EZDSStringItem"/>
        <result property="telNum_B"             column="BEF_TEL_NUM"               javaType="EZDSStringItem"/>
        <result property="dunsNum_B"            column="BEF_DUNS_NUM"              javaType="EZDSStringItem"/>
        <result property="dsUltDunsNum_B"       column="BEF_DS_ULT_DUNS_NUM"       javaType="EZDSStringItem"/>
        <result property="dsCustSicCd_B"        column="BEF_DS_CUST_SIC_CD"        javaType="EZDSStringItem"/>
        <result property="dsCustSicDescTxt_B"   column="BEF_DS_CUST_SIC_DESC_TXT"  javaType="EZDSStringItem"/>
        <result property="dsLocRevAmt_B"        column="BEF_DS_LOC_REV_AMT"        javaType="EZDCBigDecimalItem"/>
        <result property="dsLocEmpNum_B"        column="BEF_DS_LOC_EMP_NUM"        javaType="EZDCBigDecimalItem"/>
        <result property="firstLineAddr_A"      column="AFT_LOC_FIRST_LINE_ADDR"   javaType="EZDSStringItem"/>
        <result property="scdLineAddr_A"        column="AFT_LOC_SCD_LINE_ADDR"     javaType="EZDSStringItem"/>
        <result property="thirdLineAddr_A"      column="AFT_LOC_THIRD_LINE_ADDR"   javaType="EZDSStringItem"/>
        <result property="frthLineAddr_A"       column="AFT_LOC_FRTH_LINE_ADDR"    javaType="EZDSStringItem"/>
        <result property="ctyAddr_A"            column="AFT_LOC_CTY_ADDR"          javaType="EZDSStringItem"/>
        <result property="stCd_A"               column="AFT_LOC_ST_CD"             javaType="EZDSStringItem"/>
        <result property="postCd_A"             column="AFT_LOC_POST_CD"           javaType="EZDSStringItem"/>
        <result property="telNum_A"             column="AFT_TEL_NUM"               javaType="EZDSStringItem"/>
        <result property="dsAcctDunsNm_A"       column="AFT_DS_ACCT_DUNS_NM"       javaType="EZDSStringItem"/>
        <result property="dunsNum_A"            column="AFT_DUNS_NUM"              javaType="EZDSStringItem"/>
        <result property="dsUltDunsNum_A"       column="AFT_DS_ULT_DUNS_NUM"       javaType="EZDSStringItem"/>
        <result property="dsCustSicCd_A"        column="AFT_DS_CUST_SIC_CD"        javaType="EZDSStringItem"/>
        <result property="dsCustSicDescTxt_A"   column="AFT_DS_CUST_SIC_DESC_TXT"  javaType="EZDSStringItem"/>
        <result property="dsLocRevAmt_A"        column="AFT_DS_LOC_REV_AMT"        javaType="EZDCBigDecimalItem"/>
        <result property="dsLocEmpNum_A"        column="AFT_DS_LOC_EMP_NUM"        javaType="EZDCBigDecimalItem"/>
        <result property="glnNum_A"             column="AFT_GLN_NUM"               javaType="EZDCBigDecimalItem"/>
        <result property="dsPrntDunsNum_A"      column="AFT_DS_PRNT_DUNS_NUM"      javaType="EZDSStringItem"/>
        <result property="hqDunsNum_A"          column="AFT_HQ_DUNS_NUM"           javaType="EZDSStringItem"/>
        <result property="dsCustSicCd_AC"       column="AFT_DS_CMPY_SIC_CD"        javaType="EZDSStringItem"/>
        <result property="dsCustSicDescTxt_AC"  column="AFT_DS_CMPY_SIC_DESC_TXT"  javaType="EZDSStringItem"/>
    </resultMap>

</sqlMap>
