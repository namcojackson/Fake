<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NFZC504001">

    <statement id="getAttDataGrpTxtByDocIdCatgNum" parameterClass="Map" resultClass="Map">
        SELECT
               A.ATT_DATA_GRP_TXT
        FROM
               ATT_DATA     A
              ,DOC_MGT_CATG B
        WHERE
               A.GLBL_CMPY_CD     = #glblCmpyCd#
        AND    A.ATT_DATA_NM      = #docMgtDocId#
        AND    A.EZCANCELFLAG     = '0'
        AND    B.GLBL_CMPY_CD     = A.GLBL_CMPY_CD
        AND    B.ATT_DOC_TP_CD    = A.ATT_DOC_TP_CD
        AND    B.DOC_MGT_CATG_NUM = #docMgtCatgNum#
        AND    B.EZCANCELFLAG     = '0'
        AND    ROWNUM             = 1
    </statement>

    <statement id="getValidInvoiceCount" parameterClass="Map" resultClass="Integer">
    <!-- START 2018/04/06 T.Kikuhara [QC#20316,MOD] -->
        SELECT
               COUNT(*)
        FROM
               CM_AP_INV_HDR    A
        WHERE
               A.GLBL_CMPY_CD      = #glblCmpyCd#
        AND    A.AP_VND_CD         = #apVndCd#
        AND    A.AP_VND_INV_NUM    = #apVndInvNum#
        AND    A.AP_VND_INV_SQ_NUM = #apVndInvSqNum#
        AND    A.EZCANCELFLAG      = '0'
        AND    ROWNUM              = 1
    <!-- END 2018/04/06 T.Kikuhara [QC#20316,MOD] -->
    </statement>

    <!-- START 2018/04/06 T.Kikuhara [QC#20316,ADD] -->
    <statement id="getThereforeHldApVndInvLineNumList" parameterClass="Map" resultClass="String">
        SELECT
               A.AP_VND_INV_LINE_NUM
        FROM
               CM_INV_PMT_HLD     A
        WHERE
               A.GLBL_CMPY_CD      = #glblCmpyCd#
        AND    A.AP_VND_CD         = #apVndCd#
        AND    A.AP_VND_INV_NUM    = #apVndInvNum#
        AND    A.AP_VND_INV_SQ_NUM = #apVndInvSqNum#
        AND    A.PMT_HLD_CD        = #pmtHldCd#
        AND    A.PMT_HLD_RSN_CD    = #pmtHldRsnCd#
        AND    A.PMT_HLD_FLG       = #pmtHldFlg#
        AND    A.EZCANCELFLAG      = '0'
        AND    ROWNUM              = 1
    </statement>
    <!-- END 2018/04/06 T.Kikuhara [QC#20316,ADD] -->

    <statement id="getThereforeHldCount" parameterClass="Map" resultClass="Integer">
        SELECT
               COUNT(*)
        FROM
               CM_INV_PMT_HLD     A
        WHERE
               A.GLBL_CMPY_CD      = #glblCmpyCd#
        AND    A.AP_VND_CD         = #apVndCd#
        AND    A.AP_VND_INV_NUM    = #apVndInvNum#
        AND    A.AP_VND_INV_SQ_NUM = #apVndInvSqNum#
        AND    A.PMT_HLD_CD        = #pmtHldCd#
        AND    A.PMT_HLD_RSN_CD    = #pmtHldRsnCd#
        AND    A.PMT_HLD_FLG       = #pmtHldFlg#
        AND    A.EZCANCELFLAG      = '0'
        AND    ROWNUM              = 1
    </statement>

    <statement id="getHldCount" parameterClass="Map" resultClass="Integer">
        SELECT
               COUNT(*)
        FROM
               CM_INV_PMT_HLD     A
        WHERE
               A.GLBL_CMPY_CD      = #glblCmpyCd#
        AND    A.AP_VND_CD         = #apVndCd#
        AND    A.AP_VND_INV_NUM    = #apVndInvNum#
        AND    A.AP_VND_INV_SQ_NUM = #apVndInvSqNum#
        AND    A.PMT_HLD_FLG       = #pmtHldFlg#
        AND    A.EZCANCELFLAG      = '0'
        AND    ROWNUM              = 1
    </statement>

    <statement id="getListCmApInvDtlByPartialKey" parameterClass="Map" resultClass="Map">
        SELECT
               AP_VND_CD
              ,AP_VND_INV_NUM
              ,AP_VND_INV_SQ_NUM
              ,VND_CD
              ,VND_INV_NUM
              ,MDSE_CD
              ,DELY_ORD_NUM
              ,AP_INV_TP_CD
              ,PO_NUM
              ,PO_ORD_DTL_LINE_NUM
              ,NVL(INV_QTY,0) INV_QTY
        FROM
               CM_AP_INV_DTL
        WHERE
               GLBL_CMPY_CD        = #glblCmpyCd#
        AND    AP_VND_CD           = #apVndCd#
        AND    AP_VND_INV_NUM      = #apVndInvNum#
        AND    AP_VND_INV_SQ_NUM   = #apVndInvSqNum#
        AND    EZCANCELFLAG        = '0'
        ORDER BY
               AP_VND_CD
              ,AP_VND_INV_NUM
              ,AP_VND_INV_SQ_NUM
              ,VND_CD
              ,VND_INV_NUM
              ,MDSE_CD
              ,DELY_ORD_NUM
              ,AP_INV_TP_CD
              ,PO_NUM
    </statement>

</sqlMap>
