<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NPAL1430Query">
    <statement id="search" parameterClass="Map" resultClass="Map">
        SELECT
             RMSP.RMNF_MDL_ID
            ,RMSP.MDSE_CD
            ,RMSP.RMNF_REQ_QTY
            ,RMSP.EZUPTIME
            ,RMSP.EZUPTIMEZONE
            ,RMSP.RMNF_MDL_STD_PRT_DESC_TXT
            ,MAX(RMSP.LAST_UPD_DT) AS LAST_UPD_DT
            ,MM.T_MDL_NM
            ,DMI.MDSE_DESC_SHORT_TXT
        FROM
             RMNF_MDL_STD_PRT RMSP
            ,MDL_NM MM
            ,MDSE DMI
        WHERE
                RMSP.GLBL_CMPY_CD = #glblCmpyCd#
            AND RMSP.EZCANCELFLAG = '0'
            AND RMSP.GLBL_CMPY_CD = MM.T_GLBL_CMPY_CD
            AND RMSP.RMNF_MDL_ID  = MM.T_MDL_ID
            AND MM.T_MDL_NM       = #tMdlNm#
            AND MM.EZCANCELFLAG   = '0'
            AND RMSP.GLBL_CMPY_CD = DMI.GLBL_CMPY_CD
            AND RMSP.MDSE_CD      = DMI.MDSE_CD
            AND DMI.EZCANCELFLAG  = '0'
        GROUP BY
             RMSP.RMNF_MDL_ID
            ,RMSP.MDSE_CD
            ,RMSP.RMNF_REQ_QTY
            ,RMSP.EZUPTIME
            ,RMSP.EZUPTIMEZONE
            ,RMSP.RMNF_MDL_STD_PRT_DESC_TXT
            ,MM.T_MDL_NM
            ,DMI.MDSE_DESC_SHORT_TXT
        ORDER BY
            RMSP.MDSE_CD ASC
    </statement>
    <statement id="searchModel" parameterClass="Map" resultClass="Map">
        SELECT
            M.T_MDL_ID
        FROM
            MDL_NM M
        WHERE
                M.T_GLBL_CMPY_CD   = #glblCmpyCd#
            AND M.T_MDL_NM         = #tMdlNm#
            AND M.EZCANCELFLAG     = '0'
    </statement>

    <statement id="chkMdseCd" parameterClass="Map" resultClass="Integer">
        SELECT
                COUNT(M.MDSE_CD)
        FROM
                MDSE M
        WHERE
                M.GLBL_CMPY_CD      = #glblCmpyCd#
            AND M.MDSE_CD           = #mdseCd#
        <iterate property="rgtnStsCdList" var="rgtnStsCd[]" open="AND M.RGTN_STS_CD IN (" close=")" conjunction=",">
            #rgtnStsCd[]#
        </iterate>
            AND M.EZCANCELFLAG      = '0'
    </statement>


    <statement id="chkMdseIntangible" parameterClass="Map" resultClass="Integer">
        SELECT
                COUNT(M.MDSE_CD)
        FROM
                ALL_MDSE_V M
        WHERE 1=1
            AND M.GLBL_CMPY_CD      = #glblCmpyCd#
            AND M.MDSE_CD           = #mdseCd#
            AND M.INVTY_CTRL_FLG    = 'Y'
            AND M.INVTY_VAL_FLG     = 'Y'
            AND M.EZCANCELFLAG      = '0'
    </statement>

</sqlMap>