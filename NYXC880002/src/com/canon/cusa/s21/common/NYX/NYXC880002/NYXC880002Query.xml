<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NYXC880002Query">


    <statement id="getWorklist" parameterClass="Map" resultClass="Map">
      SELECT
          XXWFAPRCHKFLG
          , XXWFFYICHKFLG
          , WFCANCCHKFLG
          , XXWFREASGCHKFLG
          , WFPROCDOCID
          , WFPROCNM
          , WFWRKITEMNM
          , WFWRKITEMSTSCD
          , WFTOKENBIZPK
          , WFPROCPK
          , WFWRKITEMPK
          , WFPROCSTSCD
          , FROMUSRID
          , ACTWFCONDNM
          , FROMUSRNM
          , WFSTARTTS
          , FROMUSER_ISADMIN
          , WF_USR_DLGT_FLG
          , WF_DUE_TS
          , WFUSRGRPNM_F
          , WFCMNTTXT
          , TOUSRID
          , TOUSRNM
          , TOUSER_ISADMIN
          , LEAVEWFCONDNM
          , WFENDTS
          , WFEVENTAUTOFLG
          , WF_BIZ_ATTRB_TXT_01
          , WF_BIZ_ATTRB_TXT_02
          , WF_BIZ_ATTRB_TXT_03
          , WF_BIZ_ATTRB_TXT_04
          , WF_BIZ_ATTRB_TXT_05
          , WF_BIZ_ATTRB_LB_TXT_01
          , WF_BIZ_ATTRB_LB_TXT_02
          , WF_BIZ_ATTRB_LB_TXT_03
          , WF_BIZ_ATTRB_LB_TXT_04
          , WF_BIZ_ATTRB_LB_TXT_05
          , WF_BIZ_SCR_ID
          , WF_BIZ_SCR_ID_01
          , WF_BIZ_SCR_ID_02
          , WF_BIZ_SCR_ID_03
          , WF_BIZ_SCR_ID_04
          , WF_BIZ_SCR_ID_05
      FROM
      (
          SELECT
            CASE 
              WHEN ( 
                D_V.WF_USR_ACCS_APVL_FLG = 'Y'
                AND (
                  NOT EXISTS
                  ( 
                    SELECT
                      BC.WF_PROC_NM 
                    FROM
                      WF_BTN_CTRL BC 
                    WHERE
                      BC.WF_PROC_NM = D_V.WF_PROC_NM 
                      AND BC.WF_BTN_NM = 'btn4' 
                      AND BC.WF_BTN_STS_CD = '0' 
                      AND BC.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND BC.EZCANCELFLAG = '0'
                  )
                ) 
                AND (D_V.WF_WRK_ITEM_STS_CD = '02')
              ) 
              THEN '1' 
              ELSE '0' 
              END xxWfAprChkFlg
           , CASE 
             WHEN ( 
               (
                 D_V.WF_PROC_STS_CD = '02'
                 AND 
                 EXISTS
                 ( 
                   SELECT
                     NCL.WF_WRK_ITEM_PK 
                   FROM
                     WF_NTFY_CONF_LOG NCL
                     , WF_USR NWU
                   WHERE
                     NCL.WF_WRK_ITEM_PK = D_V.WF_WRK_ITEM_PK 
                     AND NWU.WF_WRK_ITEM_PK = NCL.WF_WRK_ITEM_PK
                     AND NCL.WF_USR_PK = NWU.WF_USR_PK
                     AND NCL.WF_NTFY_EVENT_TP_CD IN ($wfNtfyEventTpCdList$) 
                     AND NCL.WF_NTFY_ACT_TP_CD = #wfNtfyActTpCd#
                     AND NWU.WF_USR_ID = #usrId#
                     AND NCL.WF_CONF_TS IS NULL 
                     AND NCL.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND NCL.EZCANCELFLAG = '0'
                     AND NWU.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND NWU.EZCANCELFLAG = '0'
                 )
               ) 
               AND (
                 NOT EXISTS
                 ( 
                   SELECT
                     BC.WF_PROC_NM
                   FROM
                     WF_BTN_CTRL BC 
                   WHERE
                     BC.WF_PROC_NM = D_V.WF_PROC_NM 
                     AND BC.WF_BTN_NM = 'btn2' 
                     AND BC.WF_BTN_STS_CD = '0' 
                     AND BC.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND BC.EZCANCELFLAG = '0'
                 )
               )
             ) 
             THEN '1' 
             WHEN ( 
               ( 
                 D_V.WF_PROC_STS_CD IN ('04','05','06')
                 AND 
                 EXISTS
                 ( 
                   SELECT
                     NCL.WF_WRK_ITEM_PK 
                   FROM
                     WF_NTFY_CONF_LOG_CPLT NCL
                     , WF_USR_CPLT NWU
                   WHERE
                     NCL.WF_WRK_ITEM_PK = D_V.WF_WRK_ITEM_PK 
                     AND NWU.WF_WRK_ITEM_PK = NCL.WF_WRK_ITEM_PK
                     AND NCL.WF_USR_PK = NWU.WF_USR_PK
                     AND NCL.WF_NTFY_EVENT_TP_CD IN ($wfNtfyEventTpCdList$) 
                     AND NCL.WF_NTFY_ACT_TP_CD = #wfNtfyActTpCd#
                     AND NWU.WF_USR_ID = #usrId#
                     AND NCL.WF_CONF_TS IS NULL 
                     AND NCL.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND NCL.EZCANCELFLAG = '0'
                     AND NWU.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND NWU.EZCANCELFLAG = '0'
                 )
               ) 
               AND (
                 NOT EXISTS
                 ( 
                   SELECT
                     BC.WF_PROC_NM
                   FROM
                     WF_BTN_CTRL BC 
                   WHERE
                     BC.WF_PROC_NM = D_V.WF_PROC_NM 
                     AND BC.WF_BTN_NM = 'btn2' 
                     AND BC.WF_BTN_STS_CD = '0' 
                     AND BC.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND BC.EZCANCELFLAG = '0'
                 )
               )
             ) 
             THEN '1' 
             ELSE '0' 
             END xxWfFyiChkFlg
            , CASE 
              WHEN ( 
                D_V.WF_USR_ACCS_CANC_FLG = 'Y'
                AND (
                  NOT EXISTS 
                  (
                    SELECT
                      BC.WF_PROC_NM
                    FROM
                      WF_BTN_CTRL BC 
                    WHERE
                      BC.WF_PROC_NM = D_V.WF_PROC_NM 
                      AND BC.WF_BTN_NM = 'btn7' 
                      AND BC.WF_BTN_STS_CD = '0' 
                      AND BC.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND BC.EZCANCELFLAG = '0'
                  )
                ) 
                AND (D_V.WF_PROC_STS_CD IN ('01', '02', '03'))
              ) 
              THEN '1' 
              ELSE '0' 
              END WFCANCCHKFLG
            ,CASE 
              WHEN ( 
                D_V.WF_USR_ACCS_ACT_RASG_FLG = 'Y'
                AND (
                  NOT EXISTS
                  ( 
                    SELECT
                      BC.WF_PROC_NM 
                    FROM
                      WF_BTN_CTRL BC 
                    WHERE
                      BC.WF_PROC_NM = D_V.WF_PROC_NM 
                      AND BC.WF_BTN_NM = 'Reassign' 
                      AND BC.WF_BTN_STS_CD = '0' 
                      AND BC.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND BC.EZCANCELFLAG = '0'
                  )
                ) 
                AND (D_V.WF_WRK_ITEM_STS_CD = '02')
              ) 
              THEN '1' 
              ELSE '0' 
              END XXWFREASGCHKFLG
            , D_V.WF_PROC_DOC_ID wfProcDocId
            , CASE WHEN D_V.WF_DESC_TXT IS NOT NULL THEN 
                D_V.WF_DESC_TXT 
              ELSE
                D_V.WF_PROC_NM 
              END wfProcNm
            , D_V.WF_WRK_ITEM_NM wfWrkItemNm
            , D_V.WF_WRK_ITEM_STS_CD wfWrkItemStsCd
            , D_V.WF_TOKEN_BIZ_PK wfTokenBizPk
            , D_V.WF_PROC_PK wfProcPk
            , D_V.WF_WRK_ITEM_PK wfWrkItemPk
            , D_V.WF_PROC_STS_CD wfProcStsCd
            , D_V.FROM_USR_ID fromUsrId
            , D_V.ACT_WF_COND_NM actWfCondNm
            , ( 
              SELECT
                P.FIRST_NM || ' ' || P.LAST_NM 
              FROM
                AUTH_PSN P 
              WHERE
                P.USR_NM = D_V.FROM_USR_ID 
                AND P.GLBL_CMPY_CD = #glblCmpyCd# 
                AND P.EZCANCELFLAG = '0' 
                AND ROWNUM = 1
            ) fromUsrNm
            , D_V.WF_START_TS wfStartTs
            , CASE 
              WHEN
              EXISTS 
              ( 
                SELECT
                  UG.WF_BIZ_APP_ID
                FROM
                  WF_UTIL_USR_GRP UG 
                WHERE
                  UG.USR_ID = D_V.FROM_USR_ID 
                  AND WF_BIZ_APP_ID = 'SYSTEM' 
                  AND WF_USR_GRP_NM = 'ADMIN' 
                  AND UG.GLBL_CMPY_CD = #glblCmpyCd# 
                  AND UG.EZCANCELFLAG = '0' 
              )
              THEN '1' 
              ELSE '0' 
              END FROMUSER_ISADMIN
            , D_V.WF_USR_DLGT_FLG
            , D_V.WF_DUE_TS
            , CASE WHEN D_V.FROM_WF_USR_GRP_DESC_TXT IS NOT NULL 
              THEN D_V.FROM_WF_USR_GRP_DESC_TXT 
              ELSE D_V.FROM_WF_USR_GRP_NM 
              END wfUsrGrpNm_f
            , CASE
              WHEN (D_V.WF_PROC_STS_CD IN ('04','05','06')) THEN (
                SELECT
                  AL.WF_CMNT_TXT wfCmntTxt
                FROM
                  WF_ACT_LOG_CPLT AL 
                WHERE
                  AL.GLBL_CMPY_CD = #glblCmpyCd#
                  AND AL.WF_PROC_PK = D_V.WF_PROC_PK
                  AND AL.WF_WRK_ITEM_PK = D_V.WF_WRK_ITEM_PK 
                  AND AL.WF_EVENT_TP_CD IN ('51','52','53','54','55','56','57','58','59','60','61','99')
                  AND AL.EZCANCELFLAG = '0'
                  AND ROWNUM = 1
              )
              ELSE (
                SELECT
                  AL.WF_CMNT_TXT wfCmntTxt
                FROM
                  WF_ACT_LOG AL 
                WHERE
                  AL.GLBL_CMPY_CD = #glblCmpyCd#
                  AND AL.WF_PROC_PK = D_V.WF_PROC_PK
                  AND AL.WF_WRK_ITEM_PK = D_V.WF_WRK_ITEM_PK 
                  AND AL.WF_EVENT_TP_CD IN ('51','52','53','54','55','56','57','58','59','60','61','99')
                  AND AL.EZCANCELFLAG = '0'
                  AND ROWNUM = 1
              ) END wfCmntTxt
            , D_V.TO_USR_ID toUsrId
            , (SELECT
                P.FIRST_NM || ' ' || P.LAST_NM
               FROM
                 AUTH_PSN P 
               WHERE
                 P.USR_NM       = D_V.TO_USR_ID
               AND  P.GLBL_CMPY_CD = #glblCmpyCd#
               AND  P.EZCANCELFLAG = '0'
               AND  ROWNUM = 1) toUsrNm
            , CASE 
              WHEN
              EXISTS 
              ( 
                SELECT
                  UG.WF_BIZ_APP_ID
                FROM
                  WF_UTIL_USR_GRP UG 
                WHERE
                  UG.USR_ID = D_V.TO_USR_ID
                  AND WF_BIZ_APP_ID = 'SYSTEM' 
                  AND WF_USR_GRP_NM = 'ADMIN' 
                  AND UG.GLBL_CMPY_CD = #glblCmpyCd# 
                  AND UG.EZCANCELFLAG = '0' 
              )
              THEN '1' 
              ELSE '0' 
              END TOUSER_ISADMIN
            , D_V.LEAVE_WF_COND_NM AS leaveWfCondNm
            , D_V.WF_END_TS wfEndTs
            , D_V.WF_LEAVE_EVENT_AUTO_FLG AS wfEventAutoFlg
            , D_V.WF_BIZ_ATTRB_TXT_01
            , D_V.WF_BIZ_ATTRB_TXT_02
            , D_V.WF_BIZ_ATTRB_TXT_03
            , D_V.WF_BIZ_ATTRB_TXT_04
            , D_V.WF_BIZ_ATTRB_TXT_05
            , D_V.WF_BIZ_ATTRB_LB_TXT_01
            , D_V.WF_BIZ_ATTRB_LB_TXT_02
            , D_V.WF_BIZ_ATTRB_LB_TXT_03
            , D_V.WF_BIZ_ATTRB_LB_TXT_04
            , D_V.WF_BIZ_ATTRB_LB_TXT_05
            , D_V.WF_BIZ_SCR_ID
            , D_V.WF_BIZ_SCR_ID_01
            , D_V.WF_BIZ_SCR_ID_02
            , D_V.WF_BIZ_SCR_ID_03
            , D_V.WF_BIZ_SCR_ID_04
            , D_V.WF_BIZ_SCR_ID_05
            --, ROW_NUMBER() OVER (PARTITION BY WF_WRK_ITEM_PK ORDER BY PRI) RNK 
            FROM
            (
      <isNotNull property = "PROC_STS_ACTIVE" > 
              SELECT
                ORG_V.PRI
                , ORG_V.WF_USR_ACCS_APVL_FLG
                , ORG_V.WF_USR_ACCS_ACT_RASG_FLG
                , ORG_V.WF_PROC_NM
                , ORG_V.WF_WRK_ITEM_STS_CD
                , ORG_V.WF_WRK_ITEM_PK
                , ORG_V.WF_USR_ID
                , ORG_V.WF_USR_PK
                , ORG_V.WF_PROC_DOC_ID
                , ORG_V.WF_DESC_TXT
                , ORG_V.WF_USR_ACCS_CANC_FLG
                , ORG_V.WF_WRK_ITEM_NM
                , ORG_V.WF_TOKEN_BIZ_PK
                , ORG_V.WF_PROC_PK
                , ORG_V.WF_PROC_STS_CD
                , ORG_V.FROM_USR_ID
                , ORG_V.FROM_WF_USR_GRP_DESC_TXT
                , ORG_V.FROM_WF_USR_GRP_NM
                , ORG_V.ACT_WF_COND_NM
                , ORG_V.WF_START_TS
                , ORG_V.WF_USR_DLGT_FLG
                , ORG_V.WF_DUE_TS
                , ORG_V.WF_CMNT_TXT
                , ORG_V.TO_USR_ID
                , ORG_V.LEAVE_WF_COND_NM
                , ORG_V.WF_END_TS
                , ORG_V.WF_LEAVE_EVENT_AUTO_FLG
                , ORG_V.WF_BIZ_ATTRB_TXT_01
                , ORG_V.WF_BIZ_ATTRB_TXT_02
                , ORG_V.WF_BIZ_ATTRB_TXT_03
                , ORG_V.WF_BIZ_ATTRB_TXT_04
                , ORG_V.WF_BIZ_ATTRB_TXT_05
                , ORG_V.WF_BIZ_ATTRB_LB_TXT_01
                , ORG_V.WF_BIZ_ATTRB_LB_TXT_02
                , ORG_V.WF_BIZ_ATTRB_LB_TXT_03
                , ORG_V.WF_BIZ_ATTRB_LB_TXT_04
                , ORG_V.WF_BIZ_ATTRB_LB_TXT_05
                , ORG_V.WF_BIZ_SCR_ID
                , ORG_V.WF_BIZ_SCR_ID_01
                , ORG_V.WF_BIZ_SCR_ID_02
                , ORG_V.WF_BIZ_SCR_ID_03
                , ORG_V.WF_BIZ_SCR_ID_04
                , ORG_V.WF_BIZ_SCR_ID_05
              FROM
              (
                SELECT
                  1 PRI
                  , U.WF_USR_ACCS_APVL_FLG
                  , U.WF_USR_ACCS_ACT_RASG_FLG
                  , P.WF_PROC_NM
                  , WI.WF_WRK_ITEM_STS_CD
                  , WI.WF_WRK_ITEM_PK
                  , U.WF_USR_ID
                  , U.WF_USR_PK
                  , P.WF_PROC_DOC_ID
                  , PDFN.WF_DESC_TXT
                  , U.WF_USR_ACCS_CANC_FLG
                  , WI.WF_WRK_ITEM_NM
                  , TB.WF_TOKEN_BIZ_PK
                  , P.WF_PROC_PK
                  , P.WF_PROC_STS_CD
                  , WI.FROM_USR_ID
                  , WI.FROM_WF_USR_GRP_DESC_TXT
                  , WI.FROM_WF_USR_GRP_NM
                  , WI.ACT_WF_COND_NM
                  , WI.WF_START_TS
                  , U.WF_USR_DLGT_FLG
                  , WI.WF_DUE_TS
                  , WI.WF_CMNT_TXT
                  , WI.TO_USR_ID
                  , WI.LEAVE_WF_COND_NM
                  , WI.WF_END_TS
                  , WI.WF_LEAVE_EVENT_AUTO_FLG
                  , TB.WF_BIZ_ATTRB_TXT_01
                  , TB.WF_BIZ_ATTRB_TXT_02
                  , TB.WF_BIZ_ATTRB_TXT_03
                  , TB.WF_BIZ_ATTRB_TXT_04
                  , TB.WF_BIZ_ATTRB_TXT_05
                  , TB.WF_BIZ_ATTRB_LB_TXT_01
                  , TB.WF_BIZ_ATTRB_LB_TXT_02
                  , TB.WF_BIZ_ATTRB_LB_TXT_03
                  , TB.WF_BIZ_ATTRB_LB_TXT_04
                  , TB.WF_BIZ_ATTRB_LB_TXT_05
                  , TB.WF_BIZ_SCR_ID
                  , TB.WF_BIZ_SCR_ID_01
                  , TB.WF_BIZ_SCR_ID_02
                  , TB.WF_BIZ_SCR_ID_03
                  , TB.WF_BIZ_SCR_ID_04
                  , TB.WF_BIZ_SCR_ID_05
                FROM
                  WF_WRK_ITEM WI
                  , WF_PROC P
                  , WF_USR U
                  , WF_TOKEN_BIZ TB
                  , WF_PROC_DFN PDFN
                WHERE
                  WI.WF_PROC_PK = P.WF_PROC_PK 
                  AND WI.WF_WRK_ITEM_PK = U.WF_WRK_ITEM_PK
                  AND WI.WF_TOKEN_BIZ_PK = TB.WF_TOKEN_BIZ_PK
                  AND P.WF_PROC_NM = PDFN.WF_PROC_NM
                  AND WI.EZCANCELFLAG = '0'
                  AND P.EZCANCELFLAG = '0'
                  AND U.EZCANCELFLAG = '0'
                  AND TB.EZCANCELFLAG = '0'
                  AND PDFN.EZCANCELFLAG = '0'
                  AND WI.GLBL_CMPY_CD = #glblCmpyCd# 
                  AND P.GLBL_CMPY_CD = #glblCmpyCd# 
                  AND U.GLBL_CMPY_CD = #glblCmpyCd#
                  AND TB.GLBL_CMPY_CD = #glblCmpyCd#
                  AND PDFN.GLBL_CMPY_CD = #glblCmpyCd#
                  AND U.WF_USR_ID = #usrId# 
                  <isNotNull property = "wfProcPk" > 
                  AND P.WF_PROC_PK = #wfProcPk#
                  </isNotNull>
                  <isNotNull property = "wfProcDocId" > 
                  AND UPPER(P.WF_PROC_DOC_ID) = UPPER(#wfProcDocId#)
                  </isNotNull>
                  <isNotNull property = "wfProcNm" > 
                  AND P.WF_PROC_NM = #wfProcNm#
                  </isNotNull>
                  <isNotNull property = "wfWrkItemNm" > 
                  AND WI.WF_WRK_ITEM_NM LIKE #wfWrkItemNm#
                  </isNotNull> 
                  AND
                  <!-- View -->
                  U.WF_USR_ACCS_VIS_FLG = 'Y'
                  AND
                  WI.WF_HUMAN_TASK_FLG ='Y'

                  <!-- Type -->
                  AND ( 
                    1 = 0 

                    <!-- 
                      Approve
                    -->
                    <isNotNull property = "xxWfAprChkFlg" > 
                    OR
                    ( 
                      U.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND (WI.WF_WRK_ITEM_STS_CD = '02')
                      AND U.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                    ) 
                    OR
                    <!--Cancel-->
                    ( 
                      U.WF_USR_ACCS_CANC_FLG = 'Y'
                      AND WI.LEAVE_WF_COND_NM = 'SUBMIT'
                    )
                    </isNotNull>

                    <isNotNull property = "xxWfSubChkFlg" > 
                    OR
                    (
                      U.WF_USR_ACCS_APVL_SUB_FLG = 'Y'
                      AND (WI.WF_WRK_ITEM_STS_CD = '02')
                    )
                    </isNotNull>

                    <!-- 
                      FYI
                    -->
                    <isNotNull property = "xxWfFyiChkFlg" > 
                    OR
                    ( 
                      ( 
                        EXISTS
                        ( 
                          SELECT
                            NCL.WF_WRK_ITEM_PK
                          FROM
                            WF_NTFY_CONF_LOG NCL 
                          WHERE
                            NCL.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK 
                            AND NCL.WF_NTFY_EVENT_TP_CD IN ($wfNtfyEventTpCdList$) 
                            AND NCL.WF_NTFY_ACT_TP_CD = #wfNtfyActTpCd# 
                            AND NCL.WF_USR_PK = U.WF_USR_PK
                            AND NCL.WF_CONF_TS IS NULL 
                            AND NCL.GLBL_CMPY_CD = #glblCmpyCd# 
                            AND NCL.EZCANCELFLAG = '0'
                        )
                      ) 
                      AND ( 
                        CASE 
                          WHEN P.FYI_HLD_QTY = 0 
                          THEN 1 
                          WHEN WI.WF_FYI_HLD_TS &gt;= TO_CHAR(CURRENT_TIMESTAMP, 'YYYYMMDD') 
                          THEN 1 
                          ELSE 0 
                          END
                      ) = 1
                    ) 
                    </isNotNull>

                    <!-- 
                      FYI(Confirmed)
                    -->
                    <isNotNull property = "xxWfConfFlg" > 
                    OR
                    ( 
                      ( 
                        EXISTS
                        ( 
                          SELECT
                            NCL.WF_WRK_ITEM_PK 
                          FROM
                            WF_NTFY_CONF_LOG NCL
                          WHERE
                            NCL.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK 
                            AND NCL.WF_NTFY_EVENT_TP_CD IN ($wfNtfyEventTpCdList$) 
                            AND NCL.WF_NTFY_ACT_TP_CD = #wfNtfyActTpCd# 
                            AND NCL.WF_USR_PK = U.WF_USR_PK
                            AND NCL.WF_CONF_TS IS NOT NULL 
                            AND NCL.GLBL_CMPY_CD = #glblCmpyCd# 
                            AND NCL.EZCANCELFLAG = '0'
                        )
                      ) 
                      AND ( 
                        CASE 
                          WHEN P.FYI_HLD_QTY = 0 
                          THEN 1 
                          WHEN WI.WF_FYI_HLD_TS &gt;= TO_CHAR(CURRENT_TIMESTAMP, 'YYYYMMDD') 
                          THEN 1 
                          ELSE 0 
                          END
                      ) = 1
                    )
                    </isNotNull>
                  )

                  <!-- 
                    Subject
                  -->
                  <isNotNull property = "wfBizAttrbTxt" > 
                  AND EXISTS( 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_01 LIKE #wfBizAttrbTxt# 
                       UNION ALL 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_02 LIKE #wfBizAttrbTxt# 
                       UNION ALL 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_03 LIKE #wfBizAttrbTxt# 
                       UNION ALL 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_04 LIKE #wfBizAttrbTxt#  
                       UNION ALL 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_05 LIKE #wfBizAttrbTxt# 
                  )
                  </isNotNull>

                  <!-- 
                    Start Date Start
                  -->
                  <isNotNull property = "xxFromDt_SS" > 
                  AND WI.WF_START_TS &gt;= #xxFromDt_SS#
                  </isNotNull>

                  <!-- 
                    Start Date End
                  -->
                  <isNotNull property = "xxThruDt_SE" > 
                  AND WI.WF_START_TS &lt;= #xxThruDt_SE# 
                  </isNotNull>

                  <!-- 
                    From Users
                  -->
                  <isNotNull property = "xxGrpFlg_F1" > 
                  AND ( 
                    WI.FROM_USR_ID = #xxGrpFlg_F1# 
                    OR WI.FROM_WF_USR_GRP_NM = #xxGrpFlg_F1# 
                  )
                  </isNotNull>
                  <isNotNull property = "xxGrpFlg_F2" > 
                  AND WI.FROM_WF_USR_GRP_NM = #xxGrpFlg_F1# 
                  </isNotNull>
                  <isNotNull property = "xxGrpFlg_F3" > 
                  AND WI.FROM_USR_ID = #xxGrpFlg_F3#
                  </isNotNull>

                  <!-- 
                    To Users
                  -->
                  <isNotNull property = "xxGrpFlg_T" >
                  AND EXISTS (
                    <isNotNull property = "xxGrpFlg_T1" >
                    SELECT
                       1
                    FROM
                      WF_USR IUT
                    WHERE
                      IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK 
                      AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                      AND IUT.WF_USR_GRP_NM = #xxGrpFlg_T1#
                      AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND IUT.EZCANCELFLAG = '0'
                    UNION ALL
                    SELECT
                       1
                    FROM
                      WF_USR IUT
                    WHERE
                      IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK 
                      AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                      AND IUT.WF_USR_ID = #xxGrpFlg_T1#
                      AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND IUT.EZCANCELFLAG = '0'
                    </isNotNull>
                    <isNotNull property = "xxGrpFlg_T2" >
                    SELECT
                       1
                    FROM
                      WF_USR IUT
                    WHERE
                      IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK 
                      AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                      AND IUT.WF_USR_GRP_NM = #xxGrpFlg_T2#
                      AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND IUT.EZCANCELFLAG = '0'
                    <!-- Dummy SQL (make it same execution plan as 'ALL') -->
                    UNION ALL
                    SELECT
                       1
                    FROM
                      WF_USR IUT
                    WHERE
                      IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                      AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                      AND IUT.WF_USR_ID = 'NOT_FOUND_USER'
                      AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND IUT.EZCANCELFLAG = '0'
                    </isNotNull>
                    <isNotNull property = "xxGrpFlg_T3" >
                    SELECT
                       1
                    FROM
                      WF_USR IUT
                    WHERE
                      IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                      AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                      AND IUT.WF_USR_ID = #xxGrpFlg_T3#
                      AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND IUT.EZCANCELFLAG = '0'
                    </isNotNull>
                  )
                  </isNotNull>

                  <!-- 
                   Due Date Start
                  -->
                  <isNotNull property = "xxFromDt_DS" > 
                  AND WI.WF_DUE_TS &gt;= #xxFromDt_DS# 
                  </isNotNull>

                  <!--
                   Due Date End
                  -->
                  <isNotNull property = "xxThruDt_DE" > 
                  AND WI.WF_DUE_TS &lt; = #xxThruDt_DE# 
                  </isNotNull>
                  
                  ORDER BY
                  WI.WF_PROC_PK
                  , WI.WF_WRK_ITEM_PK
                  , WI.WF_START_TS
                ) ORG_V
              WHERE
                ROWNUM &lt;= #maxRow# 

              UNION ALL

              SELECT
                DLE_V.PRI
                , DLE_V.WF_USR_ACCS_APVL_FLG
                , DLE_V.WF_USR_ACCS_ACT_RASG_FLG
                , DLE_V.WF_PROC_NM
                , DLE_V.WF_WRK_ITEM_STS_CD
                , DLE_V.WF_WRK_ITEM_PK
                , DLE_V.WF_USR_ID
                , DLE_V.WF_USR_PK
                , DLE_V.WF_PROC_DOC_ID
                , DLE_V.WF_DESC_TXT
                , DLE_V.WF_USR_ACCS_CANC_FLG
                , DLE_V.WF_WRK_ITEM_NM
                , DLE_V.WF_TOKEN_BIZ_PK
                , DLE_V.WF_PROC_PK
                , DLE_V.WF_PROC_STS_CD
                , DLE_V.FROM_USR_ID
                , DLE_V.FROM_WF_USR_GRP_DESC_TXT
                , DLE_V.FROM_WF_USR_GRP_NM
                , DLE_V.ACT_WF_COND_NM
                , DLE_V.WF_START_TS
                , DLE_V.WF_USR_DLGT_FLG
                , DLE_V.WF_DUE_TS
                , DLE_V.WF_CMNT_TXT
                , DLE_V.TO_USR_ID
                , DLE_V.LEAVE_WF_COND_NM
                , DLE_V.WF_END_TS
                , DLE_V.WF_LEAVE_EVENT_AUTO_FLG
                , DLE_V.WF_BIZ_ATTRB_TXT_01
                , DLE_V.WF_BIZ_ATTRB_TXT_02
                , DLE_V.WF_BIZ_ATTRB_TXT_03
                , DLE_V.WF_BIZ_ATTRB_TXT_04
                , DLE_V.WF_BIZ_ATTRB_TXT_05
                , DLE_V.WF_BIZ_ATTRB_LB_TXT_01
                , DLE_V.WF_BIZ_ATTRB_LB_TXT_02
                , DLE_V.WF_BIZ_ATTRB_LB_TXT_03
                , DLE_V.WF_BIZ_ATTRB_LB_TXT_04
                , DLE_V.WF_BIZ_ATTRB_LB_TXT_05
                , DLE_V.WF_BIZ_SCR_ID
                , DLE_V.WF_BIZ_SCR_ID_01
                , DLE_V.WF_BIZ_SCR_ID_02
                , DLE_V.WF_BIZ_SCR_ID_03
                , DLE_V.WF_BIZ_SCR_ID_04
                , DLE_V.WF_BIZ_SCR_ID_05
              FROM
              (
                SELECT
                  2 AS PRI
                  , U.WF_USR_ACCS_APVL_FLG
                  , U.WF_USR_ACCS_ACT_RASG_FLG
                  , P.WF_PROC_NM
                  , WI.WF_WRK_ITEM_STS_CD
                  , WI.WF_WRK_ITEM_PK
                  , U.WF_USR_ID
                  , U.WF_USR_PK
                  , P.WF_PROC_DOC_ID
                  , PDFN.WF_DESC_TXT
                  , U.WF_USR_ACCS_CANC_FLG
                  , WI.WF_WRK_ITEM_NM
                  , TB.WF_TOKEN_BIZ_PK
                  , P.WF_PROC_PK
                  , P.WF_PROC_STS_CD
                  , WI.FROM_USR_ID
                  , WI.FROM_WF_USR_GRP_DESC_TXT
                  , WI.FROM_WF_USR_GRP_NM
                  , WI.ACT_WF_COND_NM
                  , WI.WF_START_TS
                  , U.WF_USR_DLGT_FLG
                  , WI.WF_DUE_TS
                  , WI.WF_CMNT_TXT
                  , WI.TO_USR_ID
                  , WI.LEAVE_WF_COND_NM
                  , WI.WF_END_TS
                  , WI.WF_LEAVE_EVENT_AUTO_FLG
                  , TB.WF_BIZ_ATTRB_TXT_01
                  , TB.WF_BIZ_ATTRB_TXT_02
                  , TB.WF_BIZ_ATTRB_TXT_03
                  , TB.WF_BIZ_ATTRB_TXT_04
                  , TB.WF_BIZ_ATTRB_TXT_05
                  , TB.WF_BIZ_ATTRB_LB_TXT_01
                  , TB.WF_BIZ_ATTRB_LB_TXT_02
                  , TB.WF_BIZ_ATTRB_LB_TXT_03
                  , TB.WF_BIZ_ATTRB_LB_TXT_04
                  , TB.WF_BIZ_ATTRB_LB_TXT_05
                  , TB.WF_BIZ_SCR_ID
                  , TB.WF_BIZ_SCR_ID_01
                  , TB.WF_BIZ_SCR_ID_02
                  , TB.WF_BIZ_SCR_ID_03
                  , TB.WF_BIZ_SCR_ID_04
                  , TB.WF_BIZ_SCR_ID_05
                FROM
                  WF_WRK_ITEM WI
                  , WF_PROC P
                  , WF_USR U
                  , WF_TOKEN_BIZ TB
                  , WF_PROC_DFN PDFN
                  , ( 
                    SELECT
                      TOU.WF_USR_ID
                      , PD.WF_BIZ_APP_ID 
                    FROM
                      WF_DLGT_USR DU
                      , WF_USR DLU
                      , WF_USR TOU
                      , WF_PROC_DFN PD
                      , WF_PROC_DLGT_USR_RELN PDUR 
                    WHERE
                      DU.TO_WF_USR_PK = DLU.WF_USR_PK 
                      AND DU.WF_DLGT_USR_PK = PDUR.WF_DLGT_USR_PK 
                      AND PDUR.WF_PROC_DFN_PK = PD.WF_PROC_DFN_PK 
                      AND DLU.WF_USR_ID = #usrId#
                      AND TOU.WF_USR_PK =  DU.FROM_WF_USR_PK
                      AND #curDt# &gt;= DU.EFF_FROM_DT || DU.EFF_FROM_HOUR_MN 
                      AND #curDt# &lt;= DU.EFF_THRU_DT || DU.EFF_THRU_HOUR_MN
                      AND DU.GLBL_CMPY_CD = #glblCmpyCd#
                      AND DLU.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND PD.GLBL_CMPY_CD = #glblCmpyCd#
                      AND PDUR.GLBL_CMPY_CD = #glblCmpyCd#
                      AND TOU.GLBL_CMPY_CD = #glblCmpyCd#
                      AND DU.EZCANCELFLAG = '0' 
                      AND DLU.EZCANCELFLAG = '0' 
                      AND PD.EZCANCELFLAG = '0' 
                      AND PDUR.EZCANCELFLAG = '0'
                      AND TOU.EZCANCELFLAG = '0' 
                    GROUP BY
                      TOU.WF_USR_ID
                      , PD.WF_BIZ_APP_ID
                  ) DWU2 
                WHERE
                  WI.WF_PROC_PK = P.WF_PROC_PK 
                  AND WI.WF_WRK_ITEM_PK = U.WF_WRK_ITEM_PK
                  AND WI.WF_TOKEN_BIZ_PK = TB.WF_TOKEN_BIZ_PK
                  AND P.WF_PROC_NM = PDFN.WF_PROC_NM
                  AND WI.EZCANCELFLAG = '0'
                  AND P.EZCANCELFLAG = '0'
                  AND U.EZCANCELFLAG = '0'
                  AND TB.EZCANCELFLAG = '0' 
                  AND PDFN.EZCANCELFLAG = '0'
                  AND WI.GLBL_CMPY_CD = #glblCmpyCd# 
                  AND P.GLBL_CMPY_CD = #glblCmpyCd# 
                  AND U.GLBL_CMPY_CD = #glblCmpyCd#
                  AND TB.GLBL_CMPY_CD = #glblCmpyCd#
                  AND PDFN.GLBL_CMPY_CD = #glblCmpyCd#
                  AND U.WF_USR_ID IN (DWU2.WF_USR_ID)
                  AND DWU2.WF_BIZ_APP_ID IN (P.WF_PROC_NM, 'ALL') 
                  <isNotNull property = "wfProcPk" > 
                  AND P.WF_PROC_PK = #wfProcPk#
                  </isNotNull>
                  <isNotNull property = "wfProcDocId" > 
                  AND UPPER(P.WF_PROC_DOC_ID) = UPPER(#wfProcDocId#)
                  </isNotNull>
                  <isNotNull property = "wfProcNm" > 
                  AND P.WF_PROC_NM = #wfProcNm#
                  </isNotNull>
                  <isNotNull property = "wfWrkItemNm" > 
                  AND WI.WF_WRK_ITEM_NM LIKE #wfWrkItemNm#
                  </isNotNull> 
                  AND
                  <!-- View -->
                  U.WF_USR_ACCS_VIS_FLG = 'Y'
                  AND
                  WI.WF_HUMAN_TASK_FLG ='Y'

                  <!-- Type -->
                  AND ( 
                    1 = 0 

                    <!-- 
                      Approve
                    -->
                    <isNotNull property = "xxWfAprChkFlg" > 
                    OR
                    ( 
                      U.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND (WI.WF_WRK_ITEM_STS_CD = '02')
                      AND U.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                    ) 
                    OR
                    <!--Cancel-->
                    ( 
                      U.WF_USR_ACCS_CANC_FLG = 'Y'
                      AND WI.LEAVE_WF_COND_NM = 'SUBMIT'
                    )
                    </isNotNull>

                    <isNotNull property = "xxWfSubChkFlg" > 
                    OR
                    (
                      U.WF_USR_ACCS_APVL_SUB_FLG = 'Y'
                      AND (WI.WF_WRK_ITEM_STS_CD = '02')
                    )
                    </isNotNull>

                    <!-- 
                      FYI
                    -->
                    <isNotNull property = "xxWfFyiChkFlg" > 
                    OR
                    ( 
                      ( 
                        EXISTS
                        ( 
                          SELECT
                            NCL.WF_WRK_ITEM_PK
                          FROM
                            WF_NTFY_CONF_LOG NCL
                          WHERE
                            NCL.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                            AND NCL.WF_NTFY_EVENT_TP_CD IN ($wfNtfyEventTpCdList$) 
                            AND NCL.WF_NTFY_ACT_TP_CD = #wfNtfyActTpCd#
                            AND NCL.WF_USR_PK = U.WF_USR_PK
                            AND NCL.WF_CONF_TS IS NULL 
                            AND NCL.GLBL_CMPY_CD = #glblCmpyCd#
                            AND NCL.EZCANCELFLAG = '0'
                        )
                      ) 
                      AND ( 
                        CASE 
                          WHEN P.FYI_HLD_QTY = 0 
                          THEN 1 
                            WHEN WI.WF_FYI_HLD_TS &gt;= TO_CHAR(CURRENT_TIMESTAMP, 'YYYYMMDD') 
                          THEN 1 
                          ELSE 0 
                          END
                      ) = 1
                    ) 
                    </isNotNull>

                    <!-- 
                      FYI(Confirmed)
                    -->
                    <isNotNull property = "xxWfConfFlg" > 
                    OR
                    ( 
                      ( 
                        EXISTS
                        ( 
                          SELECT
                            NCL.WF_WRK_ITEM_PK 
                          FROM
                            WF_NTFY_CONF_LOG NCL
                          WHERE
                            NCL.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                            AND NCL.WF_NTFY_EVENT_TP_CD IN ($wfNtfyEventTpCdList$) 
                            AND NCL.WF_NTFY_ACT_TP_CD = #wfNtfyActTpCd# 
                            AND NCL.WF_USR_PK = U.WF_USR_PK
                            AND NCL.WF_CONF_TS IS NOT NULL
                            AND NCL.GLBL_CMPY_CD = #glblCmpyCd# 
                            AND NCL.EZCANCELFLAG = '0'
                        )
                      ) 
                      AND ( 
                        CASE 
                          WHEN P.FYI_HLD_QTY = 0 
                          THEN 1 
                          WHEN WI.WF_FYI_HLD_TS &gt;= TO_CHAR(CURRENT_TIMESTAMP, 'YYYYMMDD') 
                          THEN 1 
                          ELSE 0 
                          END
                      ) = 1
                    )
                    </isNotNull>
                  )

                  <!-- 
                    Subject
                  -->
                  <isNotNull property = "wfBizAttrbTxt" > 
                  AND EXISTS( 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_01 LIKE #wfBizAttrbTxt# 
                       UNION ALL 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_02 LIKE #wfBizAttrbTxt# 
                       UNION ALL 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_03 LIKE #wfBizAttrbTxt# 
                       UNION ALL 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_04 LIKE #wfBizAttrbTxt#  
                       UNION ALL 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_05 LIKE #wfBizAttrbTxt# 
                  )
                  </isNotNull>

                  <!-- 
                    Start Date Start
                  -->
                  <isNotNull property = "xxFromDt_SS" > 
                  AND WI.WF_START_TS &gt;= #xxFromDt_SS#
                  </isNotNull>

                  <!-- 
                    Start Date End
                  -->
                  <isNotNull property = "xxThruDt_SE" > 
                  AND WI.WF_START_TS &lt;= #xxThruDt_SE#
                  </isNotNull>

                  <!-- 
                    From Users
                  -->
                  <isNotNull property = "xxGrpFlg_F1" > 
                  AND ( 
                    WI.FROM_USR_ID = #xxGrpFlg_F1# 
                    OR WI.FROM_WF_USR_GRP_NM = #xxGrpFlg_F1# 
                  )
                  </isNotNull>
                  <isNotNull property = "xxGrpFlg_F2" > 
                  AND WI.FROM_WF_USR_GRP_NM = #xxGrpFlg_F2# 
                  </isNotNull>
                  <isNotNull property = "xxGrpFlg_F3" > 
                  AND WI.FROM_USR_ID = #xxGrpFlg_F3#
                  </isNotNull>

                  <!-- 
                    To Users
                  -->
                  <isNotNull property = "xxGrpFlg_T" >
                  AND EXISTS (
                    <isNotNull property = "xxGrpFlg_T1" >
                    SELECT
                       1
                    FROM
                      WF_USR IUT
                    WHERE
                      IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                      AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                      AND IUT.WF_USR_GRP_NM = #xxGrpFlg_T1#
                      AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND IUT.EZCANCELFLAG = '0'
                    UNION ALL
                    SELECT
                       1
                    FROM
                      WF_USR IUT
                    WHERE
                      IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                      AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                      AND IUT.WF_USR_ID = #xxGrpFlg_T1#
                      AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND IUT.EZCANCELFLAG = '0'
                    </isNotNull>
                    <isNotNull property = "xxGrpFlg_T2" >
                    SELECT
                       1
                    FROM
                      WF_USR IUT
                    WHERE
                      IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                      AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                      AND IUT.WF_USR_GRP_NM = #xxGrpFlg_T2#
                      AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND IUT.EZCANCELFLAG = '0'
                    <!-- Dummy SQL (make it same execution plan as 'ALL') -->
                    UNION ALL
                    SELECT
                       1
                    FROM
                      WF_USR IUT
                    WHERE
                      IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                      AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                      AND IUT.WF_USR_ID = 'NOT_FOUND_USER'
                      AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND IUT.EZCANCELFLAG = '0'
                    </isNotNull>
                    <isNotNull property = "xxGrpFlg_T3" >
                    SELECT
                       1
                    FROM
                      WF_USR IUT
                    WHERE
                      IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                      AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                      AND IUT.WF_USR_ID = #xxGrpFlg_T3#
                      AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND IUT.EZCANCELFLAG = '0'
                    </isNotNull>
                  )
                  </isNotNull>

                  <!-- 
                   Due Date Start
                  -->
                  <isNotNull property = "xxFromDt_DS" > 
                  AND WI.WF_DUE_TS &gt;= #xxFromDt_DS# 
                  </isNotNull>

                  <!--
                   Due Date End
                  -->
                  <isNotNull property = "xxThruDt_DE" > 
                  AND WI.WF_DUE_TS &lt; = #xxThruDt_DE# 
                  </isNotNull>

                  ORDER BY
                   WI.WF_PROC_PK
                   , WI.WF_WRK_ITEM_PK
                   , WI.WF_START_TS
                ) DLE_V
                WHERE
                  ROWNUM &lt;= #maxRow#
       <!--
            ) D_V 
       )
       WHERE
         RNK=1
         AND ROWNUM &lt;= #maxRow#
       -->
    </isNotNull> 

    <isNotNull property = "PROC_STS_COMPLETE"> 
     <isNotNull property = "PROC_STS_ACTIVE" > 
     UNION ALL
     </isNotNull>
              SELECT
                CMP_V.PRI
                , CMP_V.WF_USR_ACCS_APVL_FLG
                , CMP_V.WF_USR_ACCS_ACT_RASG_FLG
                , CMP_V.WF_PROC_NM
                , CMP_V.WF_WRK_ITEM_STS_CD
                , CMP_V.WF_WRK_ITEM_PK
                , CMP_V.WF_USR_ID
                , CMP_V.WF_USR_PK
                , CMP_V.WF_PROC_DOC_ID
                , CMP_V.WF_DESC_TXT
                , CMP_V.WF_USR_ACCS_CANC_FLG
                , CMP_V.WF_WRK_ITEM_NM
                , CMP_V.WF_TOKEN_BIZ_PK
                , CMP_V.WF_PROC_PK
                , CMP_V.WF_PROC_STS_CD
                , CMP_V.FROM_USR_ID
                , CMP_V.FROM_WF_USR_GRP_DESC_TXT
                , CMP_V.FROM_WF_USR_GRP_NM
                , CMP_V.ACT_WF_COND_NM
                , CMP_V.WF_START_TS
                , CMP_V.WF_USR_DLGT_FLG
                , CMP_V.WF_DUE_TS
                , CMP_V.WF_CMNT_TXT
                , CMP_V.TO_USR_ID
                , CMP_V.LEAVE_WF_COND_NM
                , CMP_V.WF_END_TS
                , CMP_V.WF_LEAVE_EVENT_AUTO_FLG
                , CMP_V.WF_BIZ_ATTRB_TXT_01
                , CMP_V.WF_BIZ_ATTRB_TXT_02
                , CMP_V.WF_BIZ_ATTRB_TXT_03
                , CMP_V.WF_BIZ_ATTRB_TXT_04
                , CMP_V.WF_BIZ_ATTRB_TXT_05
                , CMP_V.WF_BIZ_ATTRB_LB_TXT_01
                , CMP_V.WF_BIZ_ATTRB_LB_TXT_02
                , CMP_V.WF_BIZ_ATTRB_LB_TXT_03
                , CMP_V.WF_BIZ_ATTRB_LB_TXT_04
                , CMP_V.WF_BIZ_ATTRB_LB_TXT_05
                , CMP_V.WF_BIZ_SCR_ID
                , CMP_V.WF_BIZ_SCR_ID_01
                , CMP_V.WF_BIZ_SCR_ID_02
                , CMP_V.WF_BIZ_SCR_ID_03
                , CMP_V.WF_BIZ_SCR_ID_04
                , CMP_V.WF_BIZ_SCR_ID_05
              FROM
              (
                SELECT
                  1 PRI
                  , U.WF_USR_ACCS_APVL_FLG
                  , U.WF_USR_ACCS_ACT_RASG_FLG
                  , P.WF_PROC_NM
                  , WI.WF_WRK_ITEM_STS_CD
                  , WI.WF_WRK_ITEM_PK
                  , U.WF_USR_ID
                  , U.WF_USR_PK
                  , P.WF_PROC_DOC_ID
                  , PDFN.WF_DESC_TXT
                  , U.WF_USR_ACCS_CANC_FLG
                  , WI.WF_WRK_ITEM_NM
                  , TB.WF_TOKEN_BIZ_PK
                  , P.WF_PROC_PK
                  , P.WF_PROC_STS_CD
                  , WI.FROM_USR_ID
                  , WI.FROM_WF_USR_GRP_DESC_TXT
                  , WI.FROM_WF_USR_GRP_NM
                  , WI.ACT_WF_COND_NM
                  , WI.WF_START_TS
                  , U.WF_USR_DLGT_FLG
                  , WI.WF_DUE_TS
                  , WI.WF_CMNT_TXT
                  , WI.TO_USR_ID
                  , WI.LEAVE_WF_COND_NM
                  , WI.WF_END_TS
                  , WI.WF_LEAVE_EVENT_AUTO_FLG
                  , TB.WF_BIZ_ATTRB_TXT_01
                  , TB.WF_BIZ_ATTRB_TXT_02
                  , TB.WF_BIZ_ATTRB_TXT_03
                  , TB.WF_BIZ_ATTRB_TXT_04
                  , TB.WF_BIZ_ATTRB_TXT_05
                  , TB.WF_BIZ_ATTRB_LB_TXT_01
                  , TB.WF_BIZ_ATTRB_LB_TXT_02
                  , TB.WF_BIZ_ATTRB_LB_TXT_03
                  , TB.WF_BIZ_ATTRB_LB_TXT_04
                  , TB.WF_BIZ_ATTRB_LB_TXT_05
                  , TB.WF_BIZ_SCR_ID
                  , TB.WF_BIZ_SCR_ID_01
                  , TB.WF_BIZ_SCR_ID_02
                  , TB.WF_BIZ_SCR_ID_03
                  , TB.WF_BIZ_SCR_ID_04
                  , TB.WF_BIZ_SCR_ID_05
                FROM
                  WF_WRK_ITEM_CPLT WI
                  , WF_PROC_CPLT P
                  , WF_USR_CPLT U
                  , WF_TOKEN_BIZ_CPLT TB
                  , WF_PROC_DFN PDFN
                WHERE
                  WI.WF_PROC_PK = P.WF_PROC_PK 
                  AND WI.WF_WRK_ITEM_PK = U.WF_WRK_ITEM_PK
                  AND WI.WF_TOKEN_BIZ_PK = TB.WF_TOKEN_BIZ_PK
                  AND P.WF_PROC_NM = PDFN.WF_PROC_NM
                  AND WI.EZCANCELFLAG = '0'
                  AND P.EZCANCELFLAG = '0'
                  AND U.EZCANCELFLAG = '0'
                  AND TB.EZCANCELFLAG = '0'
                  AND PDFN.EZCANCELFLAG = '0'
                  AND WI.GLBL_CMPY_CD = #glblCmpyCd# 
                  AND P.GLBL_CMPY_CD = #glblCmpyCd# 
                  AND U.GLBL_CMPY_CD = #glblCmpyCd#
                  AND TB.GLBL_CMPY_CD = #glblCmpyCd#
                  AND PDFN.GLBL_CMPY_CD = #glblCmpyCd#
                  AND U.WF_USR_ID = #usrId# 
                  <isNotNull property = "wfProcPk" > 
                  AND P.WF_PROC_PK = #wfProcPk#
                  </isNotNull>
                  <isNotNull property = "wfProcDocId" > 
                  AND UPPER(P.WF_PROC_DOC_ID) = UPPER(#wfProcDocId#)
                  </isNotNull>
                  <isNotNull property = "wfProcNm" > 
                  AND P.WF_PROC_NM = #wfProcNm#
                  </isNotNull>
                  <isNotNull property = "wfWrkItemNm" > 
                  AND WI.WF_WRK_ITEM_NM LIKE #wfWrkItemNm#
                  </isNotNull> 
                  AND
                  <!-- View -->
                  U.WF_USR_ACCS_VIS_FLG = 'Y'
                  AND
                  WI.WF_HUMAN_TASK_FLG ='Y'

                  <!-- Type -->
                  AND ( 
                    1 = 0 

                    <!-- 
                      Approve
                    -->
                    <isNotNull property = "xxWfAprChkFlg" > 
                    OR 
                    (
                      U.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND WI.WF_WRK_ITEM_STS_CD IN ('03', '04')
                      AND U.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                    )
                    OR
                    <!--Cancel-->
                    ( 
                      U.WF_USR_ACCS_CANC_FLG = 'Y'
                      AND WI.LEAVE_WF_COND_NM = 'SUBMIT'
                    )
                    </isNotNull>

                    <isNotNull property = "xxWfSubChkFlg" > 
                    OR
                    (
                      U.WF_USR_ACCS_APVL_SUB_FLG = 'Y'
                      AND WI.WF_WRK_ITEM_STS_CD IN ('03', '04')
                    )
                    </isNotNull>

                    <isNotNull property = "xxWfVisChkFlg" > 
                    OR
                    (
                      U.WF_USR_ACCS_REJ_FLG = 'Y'
                      AND (WI.WF_WRK_ITEM_STS_CD IN ('03', '04')
                           AND WI.LEAVE_WF_COND_NM = 'REJECT')
                    )
                    </isNotNull>

                    <!-- 
                      FYI
                    -->
                    <isNotNull property = "xxWfFyiChkFlg" > 
                    OR
                    ( 
                      ( 
                        EXISTS
                        ( 
                          SELECT
                            NCL.WF_WRK_ITEM_PK
                          FROM
                            WF_NTFY_CONF_LOG_CPLT NCL 
                          WHERE
                            NCL.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK 
                            AND NCL.WF_NTFY_EVENT_TP_CD IN ($wfNtfyEventTpCdList$) 
                            AND NCL.WF_NTFY_ACT_TP_CD = #wfNtfyActTpCd# 
                            AND NCL.WF_USR_PK = U.WF_USR_PK
                            AND NCL.WF_CONF_TS IS NULL 
                            AND NCL.GLBL_CMPY_CD = #glblCmpyCd# 
                            AND NCL.EZCANCELFLAG = '0'
                        )
                      ) 
                      AND ( 
                        CASE 
                          WHEN P.FYI_HLD_QTY = 0 
                          THEN 1 
                          WHEN WI.WF_FYI_HLD_TS &gt;= TO_CHAR(CURRENT_TIMESTAMP, 'YYYYMMDD') 
                          THEN 1 
                          ELSE 0 
                          END
                      ) = 1
                    ) 
                    </isNotNull>

                    <!-- 
                      FYI(Confirmed)
                    -->
                    <isNotNull property = "xxWfConfFlg" > 
                    OR
                    ( 
                      ( 
                        EXISTS
                        ( 
                          SELECT
                            NCL.WF_WRK_ITEM_PK 
                          FROM
                            WF_NTFY_CONF_LOG_CPLT NCL
                          WHERE
                            NCL.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK 
                            AND NCL.WF_NTFY_EVENT_TP_CD IN ($wfNtfyEventTpCdList$) 
                            AND NCL.WF_NTFY_ACT_TP_CD = #wfNtfyActTpCd# 
                            AND NCL.WF_USR_PK = U.WF_USR_PK
                            AND NCL.WF_CONF_TS IS NOT NULL 
                            AND NCL.GLBL_CMPY_CD = #glblCmpyCd# 
                            AND NCL.EZCANCELFLAG = '0'
                        )
                      ) 
                      AND ( 
                        CASE 
                          WHEN P.FYI_HLD_QTY = 0 
                          THEN 1 
                          WHEN WI.WF_FYI_HLD_TS &gt;= TO_CHAR(CURRENT_TIMESTAMP, 'YYYYMMDD') 
                          THEN 1 
                          ELSE 0 
                          END
                      ) = 1
                    )
                    </isNotNull>
                  )

                  <!-- 
                    Subject
                  -->
                  <isNotNull property = "wfBizAttrbTxt" > 
                  AND EXISTS( 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ_CPLT TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_01 LIKE #wfBizAttrbTxt# 
                       UNION ALL 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ_CPLT TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_02 LIKE #wfBizAttrbTxt# 
                       UNION ALL 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ_CPLT TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_03 LIKE #wfBizAttrbTxt# 
                       UNION ALL 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ_CPLT TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_04 LIKE #wfBizAttrbTxt#  
                       UNION ALL 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ_CPLT TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_05 LIKE #wfBizAttrbTxt# 
                  )
                  </isNotNull>

                  <!-- 
                    Start Date Start
                  -->
                  <isNotNull property = "xxFromDt_SS" > 
                  AND WI.WF_START_TS &gt;= #xxFromDt_SS#
                  </isNotNull>

                  <!-- 
                    Start Date End
                  -->
                  <isNotNull property = "xxThruDt_SE" > 
                  AND WI.WF_START_TS &lt;= #xxThruDt_SE#
                  </isNotNull>

                  <!-- 
                    From Users
                  -->
                  <isNotNull property = "xxGrpFlg_F1" > 
                  AND ( 
                    WI.FROM_USR_ID = #xxGrpFlg_F1# 
                    OR WI.FROM_WF_USR_GRP_NM = #xxGrpFlg_F1# 
                  )
                  </isNotNull>
                  <isNotNull property = "xxGrpFlg_F2" > 
                  AND WI.FROM_WF_USR_GRP_NM = #xxGrpFlg_F2# 
                  </isNotNull>
                  <isNotNull property = "xxGrpFlg_F3" > 
                  AND WI.FROM_USR_ID = #xxGrpFlg_F3#
                  </isNotNull>

                  <!-- 
                    To Users
                  -->
                  <isNotNull property = "xxGrpFlg_T" >
                  AND EXISTS (
                    <isNotNull property = "xxGrpFlg_T1" >
                    SELECT
                       1
                    FROM
                      WF_USR_CPLT IUT
                    WHERE
                      IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                      AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                      AND IUT.WF_USR_GRP_NM = #xxGrpFlg_T1#
                      AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND IUT.EZCANCELFLAG = '0'
                    UNION ALL
                    SELECT
                       1
                    FROM
                      WF_USR_CPLT IUT
                    WHERE
                      IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                      AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                      AND IUT.WF_USR_ID = #xxGrpFlg_T1#
                      AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND IUT.EZCANCELFLAG = '0'
                    </isNotNull>
                    <isNotNull property = "xxGrpFlg_T2" >
                    SELECT
                       1
                    FROM
                      WF_USR_CPLT IUT
                    WHERE
                      IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                      AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                      AND IUT.WF_USR_GRP_NM = #xxGrpFlg_T2#
                      AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND IUT.EZCANCELFLAG = '0'
                    <!-- Dummy SQL (make it same execution plan as 'ALL') -->
                    UNION ALL
                    SELECT
                       1
                    FROM
                      WF_USR_CPLT IUT
                    WHERE
                      IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                      AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                      AND IUT.WF_USR_ID = 'NOT_FOUND_USER'
                      AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND IUT.EZCANCELFLAG = '0'
                    </isNotNull>
                    <isNotNull property = "xxGrpFlg_T3" >
                    SELECT
                       1
                    FROM
                      WF_USR_CPLT IUT
                    WHERE
                      IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                      AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                      AND IUT.WF_USR_ID = #xxGrpFlg_T3#
                      AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND IUT.EZCANCELFLAG = '0'
                    </isNotNull>
                  )
                  </isNotNull>
                  
                  <!-- 
                   Due Date Start
                  -->
                  <isNotNull property = "xxFromDt_DS" > 
                  AND WI.WF_DUE_TS &gt;= #xxFromDt_DS# 
                  </isNotNull>

                  <!--
                   Due Date End
                  -->
                  <isNotNull property = "xxThruDt_DE" > 
                  AND WI.WF_DUE_TS &lt; = #xxThruDt_DE# 
                  </isNotNull>
              ORDER BY
                WI.WF_PROC_PK
                , WI.WF_WRK_ITEM_PK
                , WI.WF_START_TS
              ) CMP_V
             WHERE
              ROWNUM &lt;= #maxRow#
    </isNotNull>
            ) D_V 
            ORDER BY
              D_V.WF_PROC_PK
              , D_V.WF_WRK_ITEM_PK
              , D_V.PRI
       )
       WHERE
         ROWNUM &lt;= #maxRow#
    </statement>

    <statement id="getWorklistForAdmin" parameterClass="Map" resultClass="Map">

      SELECT
          XXWFAPRCHKFLG
          , XXWFFYICHKFLG
          , WFCANCCHKFLG
          , XXWFREASGCHKFLG
          , WFPROCDOCID
          , WFPROCNM
          , WFWRKITEMNM
          , WFWRKITEMSTSCD
          , WFTOKENBIZPK
          , WFPROCPK
          , WFWRKITEMPK
          , WFPROCSTSCD
          , FROMUSRID
          , ACTWFCONDNM
          , FROMUSRNM
          , WFSTARTTS
          , FROMUSER_ISADMIN
          , WF_USR_DLGT_FLG
          , WF_DUE_TS
          , WFUSRGRPNM_F
          , WFCMNTTXT
          , TOUSRID
          , TOUSRNM
          , TOUSER_ISADMIN
          , LEAVEWFCONDNM
          , WFENDTS
          , WFEVENTAUTOFLG
          , WF_BIZ_ATTRB_TXT_01
          , WF_BIZ_ATTRB_TXT_02
          , WF_BIZ_ATTRB_TXT_03
          , WF_BIZ_ATTRB_TXT_04
          , WF_BIZ_ATTRB_TXT_05
          , WF_BIZ_ATTRB_LB_TXT_01
          , WF_BIZ_ATTRB_LB_TXT_02
          , WF_BIZ_ATTRB_LB_TXT_03
          , WF_BIZ_ATTRB_LB_TXT_04
          , WF_BIZ_ATTRB_LB_TXT_05
          , WF_BIZ_SCR_ID
          , WF_BIZ_SCR_ID_01
          , WF_BIZ_SCR_ID_02
          , WF_BIZ_SCR_ID_03
          , WF_BIZ_SCR_ID_04
          , WF_BIZ_SCR_ID_05
      FROM
      (
          SELECT
            CASE 
              WHEN ( 
                  NOT EXISTS
                  ( 
                    SELECT
                      BC.WF_PROC_NM 
                    FROM
                      WF_BTN_CTRL BC 
                    WHERE
                      BC.WF_PROC_NM = D_V.WF_PROC_NM 
                      AND BC.WF_BTN_NM = 'btn4' 
                      AND BC.WF_BTN_STS_CD = '0' 
                      AND BC.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND BC.EZCANCELFLAG = '0'
                  )
                AND (D_V.WF_WRK_ITEM_STS_CD = '02')
              ) 
              THEN '1' 
              ELSE '0' 
              END xxWfAprChkFlg
           , CASE 
             WHEN ( 
               (
                 D_V.WF_PROC_STS_CD = '02'
                 AND 
                 EXISTS
                 ( 
                   SELECT
                     NCL.WF_WRK_ITEM_PK 
                   FROM
                     WF_NTFY_CONF_LOG NCL
                     , WF_USR NWU
                   WHERE
                     NCL.WF_WRK_ITEM_PK = D_V.WF_WRK_ITEM_PK 
                     AND NWU.WF_WRK_ITEM_PK = NCL.WF_WRK_ITEM_PK
                     AND NCL.WF_USR_PK = NWU.WF_USR_PK
                     AND NCL.WF_NTFY_EVENT_TP_CD IN ($wfNtfyEventTpCdList$) 
                     AND NCL.WF_NTFY_ACT_TP_CD = #wfNtfyActTpCd#
                     AND NWU.WF_USR_ID = #usrId#
                     AND NCL.WF_CONF_TS IS NULL 
                     AND NCL.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND NCL.EZCANCELFLAG = '0'
                     AND NWU.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND NWU.EZCANCELFLAG = '0'
                 )
               ) 
               AND (
                 NOT EXISTS
                 ( 
                   SELECT
                     BC.WF_PROC_NM
                   FROM
                     WF_BTN_CTRL BC 
                   WHERE
                     BC.WF_PROC_NM = D_V.WF_PROC_NM 
                     AND BC.WF_BTN_NM = 'btn2' 
                     AND BC.WF_BTN_STS_CD = '0' 
                     AND BC.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND BC.EZCANCELFLAG = '0'
                 )
               )
             ) 
             THEN '1' 
             WHEN ( 
               ( 
                 D_V.WF_PROC_STS_CD IN ('04','05','06')
                 AND 
                 EXISTS
                 ( 
                   SELECT
                     NCL.WF_WRK_ITEM_PK 
                   FROM
                     WF_NTFY_CONF_LOG_CPLT NCL
                     , WF_USR_CPLT NWU
                   WHERE
                     NCL.WF_WRK_ITEM_PK = D_V.WF_WRK_ITEM_PK 
                     AND NWU.WF_WRK_ITEM_PK = NCL.WF_WRK_ITEM_PK
                     AND NCL.WF_USR_PK = NWU.WF_USR_PK
                     AND NCL.WF_NTFY_EVENT_TP_CD IN ($wfNtfyEventTpCdList$) 
                     AND NCL.WF_NTFY_ACT_TP_CD = #wfNtfyActTpCd#
                     AND NWU.WF_USR_ID = #usrId#
                     AND NCL.WF_CONF_TS IS NULL 
                     AND NCL.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND NCL.EZCANCELFLAG = '0'
                     AND NWU.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND NWU.EZCANCELFLAG = '0'
                 )
               ) 
               AND (
                 NOT EXISTS
                 ( 
                   SELECT
                     BC.WF_PROC_NM
                   FROM
                     WF_BTN_CTRL BC 
                   WHERE
                     BC.WF_PROC_NM = D_V.WF_PROC_NM 
                     AND BC.WF_BTN_NM = 'btn2' 
                     AND BC.WF_BTN_STS_CD = '0' 
                     AND BC.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND BC.EZCANCELFLAG = '0'
                 )
               )
             ) 
             THEN '1' 
             ELSE '0' 
             END xxWfFyiChkFlg
           , CASE 
             WHEN ( 
               (
                 NOT EXISTS 
                 (
                   SELECT
                     BC.WF_PROC_NM
                   FROM
                     WF_BTN_CTRL BC 
                   WHERE
                     BC.WF_PROC_NM = D_V.WF_PROC_NM 
                     AND BC.WF_BTN_NM = 'btn7' 
                     AND BC.WF_BTN_STS_CD = '0' 
                     AND BC.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND BC.EZCANCELFLAG = '0'
                 )
               ) 
               AND (D_V.WF_PROC_STS_CD IN ('01', '02', '03'))
             ) 
             THEN '1' 
             ELSE '0' 
             END WFCANCCHKFLG
            ,CASE 
              WHEN ( 
                (
                  NOT EXISTS
                  ( 
                    SELECT
                      BC.WF_PROC_NM 
                    FROM
                      WF_BTN_CTRL BC 
                    WHERE
                      BC.WF_PROC_NM = D_V.WF_PROC_NM 
                      AND BC.WF_BTN_NM = 'Reassign' 
                      AND BC.WF_BTN_STS_CD = '0' 
                      AND BC.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND BC.EZCANCELFLAG = '0'
                  )
                ) 
                AND (D_V.WF_WRK_ITEM_STS_CD = '02')
              ) 
              THEN '1' 
              ELSE '0' 
              END XXWFREASGCHKFLG
            , D_V.WF_PROC_DOC_ID wfProcDocId
            , CASE WHEN D_V.WF_DESC_TXT IS NOT NULL THEN 
                D_V.WF_DESC_TXT 
              ELSE
                D_V.WF_PROC_NM 
              END wfProcNm
            , D_V.WF_WRK_ITEM_NM wfWrkItemNm
            , D_V.WF_WRK_ITEM_STS_CD wfWrkItemStsCd
            , D_V.WF_TOKEN_BIZ_PK wfTokenBizPk
            , D_V.WF_PROC_PK wfProcPk
            , D_V.WF_WRK_ITEM_PK wfWrkItemPk
            , D_V.WF_PROC_STS_CD wfProcStsCd
            , D_V.FROM_USR_ID fromUsrId
            , D_V.ACT_WF_COND_NM actWfCondNm
            , ( 
              SELECT
                P.FIRST_NM || ' ' || P.LAST_NM 
              FROM
                AUTH_PSN P 
              WHERE
                P.USR_NM = D_V.FROM_USR_ID 
                AND P.GLBL_CMPY_CD = #glblCmpyCd# 
                AND P.EZCANCELFLAG = '0' 
                AND ROWNUM = 1
            ) fromUsrNm
            , D_V.WF_START_TS wfStartTs
            , CASE 
              WHEN
              EXISTS 
              ( 
                SELECT
                  UG.WF_BIZ_APP_ID
                FROM
                  WF_UTIL_USR_GRP UG 
                WHERE
                  UG.USR_ID = D_V.FROM_USR_ID 
                  AND WF_BIZ_APP_ID = 'SYSTEM' 
                  AND WF_USR_GRP_NM = 'ADMIN' 
                  AND UG.GLBL_CMPY_CD = #glblCmpyCd# 
                  AND UG.EZCANCELFLAG = '0' 
              )
              THEN '1' 
              ELSE '0' 
              END FROMUSER_ISADMIN
            , 'N' WF_USR_DLGT_FLG
            , D_V.WF_DUE_TS
            , CASE WHEN D_V.FROM_WF_USR_GRP_DESC_TXT IS NOT NULL 
              THEN D_V.FROM_WF_USR_GRP_DESC_TXT 
              ELSE D_V.FROM_WF_USR_GRP_NM 
              END wfUsrGrpNm_f
            , CASE
              WHEN (D_V.WF_PROC_STS_CD IN ('04','05','06')) THEN (
                SELECT
                  AL.WF_CMNT_TXT wfCmntTxt
                FROM
                  WF_ACT_LOG_CPLT AL 
                WHERE
                  AL.GLBL_CMPY_CD = #glblCmpyCd#
                  AND AL.WF_PROC_PK = D_V.WF_PROC_PK
                  AND AL.WF_WRK_ITEM_PK = D_V.WF_WRK_ITEM_PK 
                  AND AL.WF_EVENT_TP_CD IN ('51','52','53','54','55','56','57','58','59','60','61','99')
                  AND AL.EZCANCELFLAG = '0'
                  AND ROWNUM = 1
              )
              ELSE (
                SELECT
                  AL.WF_CMNT_TXT wfCmntTxt
                FROM
                  WF_ACT_LOG AL 
                WHERE
                  AL.GLBL_CMPY_CD = #glblCmpyCd#
                  AND AL.WF_PROC_PK = D_V.WF_PROC_PK
                  AND AL.WF_WRK_ITEM_PK = D_V.WF_WRK_ITEM_PK 
                  AND AL.WF_EVENT_TP_CD IN ('51','52','53','54','55','56','57','58','59','60','61','99')
                  AND AL.EZCANCELFLAG = '0'
                  AND ROWNUM = 1
              ) END wfCmntTxt
            , D_V.TO_USR_ID toUsrId
            , (SELECT
                P.FIRST_NM || ' ' || P.LAST_NM
               FROM
                 AUTH_PSN P 
               WHERE
                 P.USR_NM       = D_V.TO_USR_ID
               AND  P.GLBL_CMPY_CD = #glblCmpyCd#
               AND  P.EZCANCELFLAG = '0'
               AND  ROWNUM = 1) toUsrNm
            , CASE 
              WHEN
              EXISTS 
              ( 
                SELECT
                  UG.WF_BIZ_APP_ID
                FROM
                  WF_UTIL_USR_GRP UG 
                WHERE
                  UG.USR_ID = D_V.TO_USR_ID
                  AND WF_BIZ_APP_ID = 'SYSTEM' 
                  AND WF_USR_GRP_NM = 'ADMIN' 
                  AND UG.GLBL_CMPY_CD = #glblCmpyCd# 
                  AND UG.EZCANCELFLAG = '0' 
              )
              THEN '1' 
              ELSE '0' 
              END TOUSER_ISADMIN
            , D_V.LEAVE_WF_COND_NM AS leaveWfCondNm
            , D_V.WF_END_TS wfEndTs
            , D_V.WF_LEAVE_EVENT_AUTO_FLG AS wfEventAutoFlg
            , D_V.WF_BIZ_ATTRB_TXT_01
            , D_V.WF_BIZ_ATTRB_TXT_02
            , D_V.WF_BIZ_ATTRB_TXT_03
            , D_V.WF_BIZ_ATTRB_TXT_04
            , D_V.WF_BIZ_ATTRB_TXT_05
            , D_V.WF_BIZ_ATTRB_LB_TXT_01
            , D_V.WF_BIZ_ATTRB_LB_TXT_02
            , D_V.WF_BIZ_ATTRB_LB_TXT_03
            , D_V.WF_BIZ_ATTRB_LB_TXT_04
            , D_V.WF_BIZ_ATTRB_LB_TXT_05
            , D_V.WF_BIZ_SCR_ID
            , D_V.WF_BIZ_SCR_ID_01
            , D_V.WF_BIZ_SCR_ID_02
            , D_V.WF_BIZ_SCR_ID_03
            , D_V.WF_BIZ_SCR_ID_04
            , D_V.WF_BIZ_SCR_ID_05
          FROM
          ( --D_V
        <isNotNull property = "PROC_STS_ACTIVE" > 
            SELECT
              ACT_V.WF_PROC_NM
              , ACT_V.WF_WRK_ITEM_STS_CD
              , ACT_V.WF_WRK_ITEM_PK
              , ACT_V.WF_PROC_DOC_ID
              , ACT_V.WF_DESC_TXT
              , ACT_V.WF_WRK_ITEM_NM
              , ACT_V.WF_TOKEN_BIZ_PK
              , ACT_V.WF_PROC_PK
              , ACT_V.WF_PROC_STS_CD
              , ACT_V.FROM_USR_ID
              , ACT_V.FROM_WF_USR_GRP_DESC_TXT
              , ACT_V.FROM_WF_USR_GRP_NM
              , ACT_V.ACT_WF_COND_NM
              , ACT_V.WF_START_TS
              , ACT_V.WF_DUE_TS
              , ACT_V.WF_CMNT_TXT
              , ACT_V.TO_USR_ID
              , ACT_V.LEAVE_WF_COND_NM
              , ACT_V.WF_END_TS
              , ACT_V.WF_LEAVE_EVENT_AUTO_FLG
              , ACT_V.WF_BIZ_ATTRB_TXT_01
              , ACT_V.WF_BIZ_ATTRB_TXT_02
              , ACT_V.WF_BIZ_ATTRB_TXT_03
              , ACT_V.WF_BIZ_ATTRB_TXT_04
              , ACT_V.WF_BIZ_ATTRB_TXT_05
              , ACT_V.WF_BIZ_ATTRB_LB_TXT_01
              , ACT_V.WF_BIZ_ATTRB_LB_TXT_02
              , ACT_V.WF_BIZ_ATTRB_LB_TXT_03
              , ACT_V.WF_BIZ_ATTRB_LB_TXT_04
              , ACT_V.WF_BIZ_ATTRB_LB_TXT_05
              , ACT_V.WF_BIZ_SCR_ID
              , ACT_V.WF_BIZ_SCR_ID_01
              , ACT_V.WF_BIZ_SCR_ID_02
              , ACT_V.WF_BIZ_SCR_ID_03
              , ACT_V.WF_BIZ_SCR_ID_04
              , ACT_V.WF_BIZ_SCR_ID_05
            FROM
            ( --ACT_V
              SELECT
                P.WF_PROC_NM
                , WI.WF_WRK_ITEM_STS_CD
                , WI.WF_WRK_ITEM_PK
                , P.WF_PROC_DOC_ID
                , PDFN.WF_DESC_TXT
                , WI.WF_WRK_ITEM_NM
                , TB.WF_TOKEN_BIZ_PK
                , P.WF_PROC_PK
                , P.WF_PROC_STS_CD
                , WI.FROM_USR_ID
                , WI.FROM_WF_USR_GRP_DESC_TXT
                , WI.FROM_WF_USR_GRP_NM
                , WI.ACT_WF_COND_NM
                , WI.WF_START_TS
                , WI.WF_DUE_TS
                , WI.WF_CMNT_TXT
                , WI.TO_USR_ID
                , WI.LEAVE_WF_COND_NM
                , WI.WF_END_TS
                , WI.WF_LEAVE_EVENT_AUTO_FLG
                , TB.WF_BIZ_ATTRB_TXT_01
                , TB.WF_BIZ_ATTRB_TXT_02
                , TB.WF_BIZ_ATTRB_TXT_03
                , TB.WF_BIZ_ATTRB_TXT_04
                , TB.WF_BIZ_ATTRB_TXT_05
                , TB.WF_BIZ_ATTRB_LB_TXT_01
                , TB.WF_BIZ_ATTRB_LB_TXT_02
                , TB.WF_BIZ_ATTRB_LB_TXT_03
                , TB.WF_BIZ_ATTRB_LB_TXT_04
                , TB.WF_BIZ_ATTRB_LB_TXT_05
                , TB.WF_BIZ_SCR_ID
                , TB.WF_BIZ_SCR_ID_01
                , TB.WF_BIZ_SCR_ID_02
                , TB.WF_BIZ_SCR_ID_03
                , TB.WF_BIZ_SCR_ID_04
                , TB.WF_BIZ_SCR_ID_05
              FROM
                WF_WRK_ITEM WI
                , WF_PROC P
                , WF_TOKEN_BIZ TB
                , WF_PROC_DFN PDFN
              WHERE
                WI.WF_PROC_PK = P.WF_PROC_PK 
                AND WI.WF_TOKEN_BIZ_PK = TB.WF_TOKEN_BIZ_PK
                AND P.WF_PROC_NM = PDFN.WF_PROC_NM
                AND WI.EZCANCELFLAG = '0'
                AND P.EZCANCELFLAG = '0'
                AND TB.EZCANCELFLAG = '0'
                AND PDFN.EZCANCELFLAG = '0'
                AND WI.GLBL_CMPY_CD = #glblCmpyCd# 
                AND P.GLBL_CMPY_CD = #glblCmpyCd# 
                AND TB.GLBL_CMPY_CD = #glblCmpyCd#
                AND PDFN.GLBL_CMPY_CD = #glblCmpyCd#
                <isNotNull property = "wfProcPk" > 
                AND P.WF_PROC_PK = #wfProcPk#
                </isNotNull>
                <isNotNull property = "wfProcDocId" > 
                AND UPPER(P.WF_PROC_DOC_ID) = UPPER(#wfProcDocId#)
                </isNotNull>
                <isNotNull property = "wfProcNm" > 
                AND P.WF_PROC_NM = #wfProcNm#
                </isNotNull>
                <isNotNull property = "wfWrkItemNm" > 
                AND WI.WF_WRK_ITEM_NM LIKE #wfWrkItemNm#
                </isNotNull> 
                AND
                <!-- View -->
                WI.WF_HUMAN_TASK_FLG = 'Y'

                <!-- Type -->
                <!-- 
                  Approve
                -->
                <isNotNull property = "xxWfAprChkFlg" > 
                AND WI.WF_WRK_ITEM_STS_CD = '02'
                </isNotNull>

                <isNull property = "xxWfAprChkFlg" > 
                <isNotNull property = "xxWfVisChkFlg" >
                AND 
                (
                    WI.WF_WRK_ITEM_STS_CD IN ('02')
                    AND WI.LEAVE_WF_COND_NM = 'REJECT'
                )
                </isNotNull>
                </isNull>

                <!-- 
                  Start Date Start
                -->
                <isNotNull property = "xxFromDt_SS" > 
                AND WI.WF_START_TS &gt;= #xxFromDt_SS#
                </isNotNull>

                <!-- 
                  Start Date End
                -->
                <isNotNull property = "xxThruDt_SE" > 
                AND WI.WF_START_TS &lt;= #xxThruDt_SE#
                </isNotNull>

                <!-- 
                  From Users
                -->
                <isNotNull property = "xxGrpFlg_F1" > 
                AND ( 
                  WI.FROM_USR_ID = #xxGrpFlg_F1# 
                  OR WI.FROM_WF_USR_GRP_NM = #xxGrpFlg_F1# 
                  )
                </isNotNull>
                <isNotNull property = "xxGrpFlg_F2" > 
                AND WI.FROM_WF_USR_GRP_NM = #xxGrpFlg_F2#
                </isNotNull>
                <isNotNull property = "xxGrpFlg_F3" > 
                AND WI.FROM_USR_ID = #xxGrpFlg_F3#
                </isNotNull>

                <!-- 
                  To Users
                -->
                <isNotNull property = "xxGrpFlg_T" >
                AND EXISTS (
                  <isNotNull property = "xxGrpFlg_T1" >
                  SELECT
                     1
                  FROM
                    WF_USR IUT
                  WHERE
                    IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK 
                    AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                    AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                    AND IUT.WF_USR_GRP_NM = #xxGrpFlg_T1#
                    AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                    AND IUT.EZCANCELFLAG = '0'
                  UNION ALL
                  SELECT
                     1
                  FROM
                    WF_USR IUT
                  WHERE
                    IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK 
                    AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                    AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                    AND IUT.WF_USR_ID = #xxGrpFlg_T1#
                    AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                    AND IUT.EZCANCELFLAG = '0'
                  </isNotNull>
                  <isNotNull property = "xxGrpFlg_T2" >
                  SELECT
                     1
                  FROM
                    WF_USR IUT
                  WHERE
                    IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK 
                    AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                    AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                    AND IUT.WF_USR_GRP_NM = #xxGrpFlg_T2#
                    AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                    AND IUT.EZCANCELFLAG = '0'
                  </isNotNull>
                  <isNotNull property = "xxGrpFlg_T3" >
                  SELECT
                     1
                  FROM
                    WF_USR IUT
                  WHERE
                    IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                    AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                    AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                    AND IUT.WF_USR_ID = #xxGrpFlg_T3#
                    AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                    AND IUT.EZCANCELFLAG = '0'
                  </isNotNull>
                )
                </isNotNull>

                <!-- 
                 Due Date Start
                -->
                <isNotNull property = "xxFromDt_DS" > 
                AND WI.WF_DUE_TS &gt;= #xxFromDt_DS#
                </isNotNull>

                <!--
                 Due Date End
                -->
                <isNotNull property = "xxThruDt_DE" > 
                AND WI.WF_DUE_TS &lt; = #xxThruDt_DE#
                </isNotNull>

                <!-- 
                  Subject
                -->
                  <isNotNull property = "wfBizAttrbTxt" > 
                  AND EXISTS( 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_01 LIKE #wfBizAttrbTxt# 
                       UNION ALL 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_02 LIKE #wfBizAttrbTxt# 
                       UNION ALL 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_03 LIKE #wfBizAttrbTxt# 
                       UNION ALL 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_04 LIKE #wfBizAttrbTxt#  
                       UNION ALL 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_05 LIKE #wfBizAttrbTxt# 
                  )
                  </isNotNull>

                ORDER BY
                  WI.WF_PROC_PK
                  , WI.WF_WRK_ITEM_PK
                  , WI.WF_START_TS
           ) ACT_V
           WHERE
             ROWNUM &lt;= #maxRow#

        </isNotNull>

        <isNotNull property = "PROC_STS_COMPLETE"> 
        <isNotNull property = "PROC_STS_ACTIVE" > 
        UNION ALL
        </isNotNull>
            SELECT
              CMP_V.WF_PROC_NM
              , CMP_V.WF_WRK_ITEM_STS_CD
              , CMP_V.WF_WRK_ITEM_PK
              , CMP_V.WF_PROC_DOC_ID
              , CMP_V.WF_DESC_TXT
              , CMP_V.WF_WRK_ITEM_NM
              , CMP_V.WF_TOKEN_BIZ_PK
              , CMP_V.WF_PROC_PK
              , CMP_V.WF_PROC_STS_CD
              , CMP_V.FROM_USR_ID
              , CMP_V.FROM_WF_USR_GRP_DESC_TXT
              , CMP_V.FROM_WF_USR_GRP_NM
              , CMP_V.ACT_WF_COND_NM
              , CMP_V.WF_START_TS
              , CMP_V.WF_DUE_TS
              , CMP_V.WF_CMNT_TXT
              , CMP_V.TO_USR_ID
              , CMP_V.LEAVE_WF_COND_NM
              , CMP_V.WF_END_TS
              , CMP_V.WF_LEAVE_EVENT_AUTO_FLG
              , CMP_V.WF_BIZ_ATTRB_TXT_01
              , CMP_V.WF_BIZ_ATTRB_TXT_02
              , CMP_V.WF_BIZ_ATTRB_TXT_03
              , CMP_V.WF_BIZ_ATTRB_TXT_04
              , CMP_V.WF_BIZ_ATTRB_TXT_05
              , CMP_V.WF_BIZ_ATTRB_LB_TXT_01
              , CMP_V.WF_BIZ_ATTRB_LB_TXT_02
              , CMP_V.WF_BIZ_ATTRB_LB_TXT_03
              , CMP_V.WF_BIZ_ATTRB_LB_TXT_04
              , CMP_V.WF_BIZ_ATTRB_LB_TXT_05
              , CMP_V.WF_BIZ_SCR_ID
              , CMP_V.WF_BIZ_SCR_ID_01
              , CMP_V.WF_BIZ_SCR_ID_02
              , CMP_V.WF_BIZ_SCR_ID_03
              , CMP_V.WF_BIZ_SCR_ID_04
              , CMP_V.WF_BIZ_SCR_ID_05
           FROM
            ( --CMP_V
              SELECT
                P.WF_PROC_NM
                , WI.WF_WRK_ITEM_STS_CD
                , WI.WF_WRK_ITEM_PK
                , P.WF_PROC_DOC_ID
                , PDFN.WF_DESC_TXT
                , WI.WF_WRK_ITEM_NM
                , TB.WF_TOKEN_BIZ_PK
                , P.WF_PROC_PK
                , P.WF_PROC_STS_CD
                , WI.FROM_USR_ID
                , WI.FROM_WF_USR_GRP_DESC_TXT
                , WI.FROM_WF_USR_GRP_NM
                , WI.ACT_WF_COND_NM
                , WI.WF_START_TS
                , WI.WF_DUE_TS
                , WI.WF_CMNT_TXT
                , WI.TO_USR_ID
                , WI.LEAVE_WF_COND_NM
                , WI.WF_END_TS
                , WI.WF_LEAVE_EVENT_AUTO_FLG
                , TB.WF_BIZ_ATTRB_TXT_01
                , TB.WF_BIZ_ATTRB_TXT_02
                , TB.WF_BIZ_ATTRB_TXT_03
                , TB.WF_BIZ_ATTRB_TXT_04
                , TB.WF_BIZ_ATTRB_TXT_05
                , TB.WF_BIZ_ATTRB_LB_TXT_01
                , TB.WF_BIZ_ATTRB_LB_TXT_02
                , TB.WF_BIZ_ATTRB_LB_TXT_03
                , TB.WF_BIZ_ATTRB_LB_TXT_04
                , TB.WF_BIZ_ATTRB_LB_TXT_05
                , TB.WF_BIZ_SCR_ID
                , TB.WF_BIZ_SCR_ID_01
                , TB.WF_BIZ_SCR_ID_02
                , TB.WF_BIZ_SCR_ID_03
                , TB.WF_BIZ_SCR_ID_04
                , TB.WF_BIZ_SCR_ID_05
              FROM
                WF_WRK_ITEM_CPLT WI
                , WF_PROC_CPLT P
                , WF_TOKEN_BIZ_CPLT TB
                , WF_PROC_DFN PDFN
              WHERE
                WI.WF_PROC_PK = P.WF_PROC_PK 
                AND WI.WF_TOKEN_BIZ_PK = TB.WF_TOKEN_BIZ_PK
                AND P.WF_PROC_NM = PDFN.WF_PROC_NM
                AND WI.EZCANCELFLAG = '0'
                AND P.EZCANCELFLAG = '0'
                AND TB.EZCANCELFLAG = '0'
                AND PDFN.EZCANCELFLAG = '0'
                AND WI.GLBL_CMPY_CD = #glblCmpyCd# 
                AND P.GLBL_CMPY_CD = #glblCmpyCd# 
                AND TB.GLBL_CMPY_CD = #glblCmpyCd#
                AND PDFN.GLBL_CMPY_CD = #glblCmpyCd#
                <isNotNull property = "wfProcPk" > 
                AND P.WF_PROC_PK = #wfProcPk#
                </isNotNull>
                <isNotNull property = "wfProcDocId" > 
                AND UPPER(P.WF_PROC_DOC_ID) = UPPER(#wfProcDocId#)
                </isNotNull>
                <isNotNull property = "wfProcNm" > 
                AND P.WF_PROC_NM = #wfProcNm#
                </isNotNull>
                <isNotNull property = "wfWrkItemNm" > 
                AND WI.WF_WRK_ITEM_NM LIKE #wfWrkItemNm#
                </isNotNull> 
                AND
                <!-- View -->
                WI.WF_HUMAN_TASK_FLG = 'Y'

                <!-- Type -->
                <!-- 
                  Approve
                -->
                <isNotNull property = "xxWfAprChkFlg" > 
                AND WI.WF_WRK_ITEM_STS_CD IN ('03', '04')
                </isNotNull>

                <isNull property = "xxWfAprChkFlg" > 
                <isNotNull property = "xxWfVisChkFlg" >
                AND 
                (
                    WI.WF_WRK_ITEM_STS_CD IN ('03', '04')
                    AND WI.LEAVE_WF_COND_NM = 'REJECT'
                )
                </isNotNull>
                </isNull>

                <!-- 
                  Start Date Start
                -->
                <isNotNull property = "xxFromDt_SS" > 
                AND WI.WF_START_TS &gt;= #xxFromDt_SS#
                </isNotNull>

                <!-- 
                  Start Date End
                -->
                <isNotNull property = "xxThruDt_SE" > 
                AND WI.WF_START_TS &lt;= #xxThruDt_SE#
                </isNotNull>

                <!-- 
                  From Users
                -->
                <isNotNull property = "xxGrpFlg_F1" > 
                AND ( 
                  WI.FROM_USR_ID = #xxGrpFlg_F1# 
                  OR WI.FROM_WF_USR_GRP_NM = #xxGrpFlg_F1# 
                  )
                </isNotNull>
                <isNotNull property = "xxGrpFlg_F2" > 
                AND WI.FROM_WF_USR_GRP_NM = #xxGrpFlg_F2#
                </isNotNull>
                <isNotNull property = "xxGrpFlg_F3" > 
                AND WI.FROM_USR_ID = #xxGrpFlg_F3#
                </isNotNull>

                  <!-- 
                    To Users
                  -->
                  <isNotNull property = "xxGrpFlg_T" >
                  AND EXISTS (
                    <isNotNull property = "xxGrpFlg_T1" >
                    SELECT
                       1
                    FROM
                      WF_USR_CPLT IUT
                    WHERE
                      IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK 
                      AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                      AND IUT.WF_USR_GRP_NM = #xxGrpFlg_T1#
                      AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND IUT.EZCANCELFLAG = '0'
                    UNION ALL
                    SELECT
                       1
                    FROM
                      WF_USR_CPLT IUT
                    WHERE
                      IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                      AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                      AND IUT.WF_USR_ID = #xxGrpFlg_T1#
                      AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND IUT.EZCANCELFLAG = '0'
                    </isNotNull>
                    <isNotNull property = "xxGrpFlg_T2" >
                    SELECT
                       1
                    FROM
                      WF_USR_CPLT IUT
                    WHERE
                      IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                      AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                      AND IUT.WF_USR_GRP_NM = #xxGrpFlg_T2#
                      AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND IUT.EZCANCELFLAG = '0'
                    <!-- Dummy SQL (make it same execution plan as 'ALL') -->
                    UNION ALL
                    SELECT
                       1
                    FROM
                      WF_USR_CPLT IUT
                    WHERE
                      IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                      AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                      AND IUT.WF_USR_ID = 'NOT_FOUND_USER'
                      AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND IUT.EZCANCELFLAG = '0'
                    </isNotNull>
                    <isNotNull property = "xxGrpFlg_T3" >
                    SELECT
                       1
                    FROM
                      WF_USR_CPLT IUT
                    WHERE
                      IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                      AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                      AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                      AND IUT.WF_USR_ID = #xxGrpFlg_T3#
                      AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND IUT.EZCANCELFLAG = '0'
                    </isNotNull>
                  )
                  </isNotNull>

                <!-- 
                 Due Date Start
                -->
                <isNotNull property = "xxFromDt_DS" > 
                AND WI.WF_DUE_TS &gt;= #xxFromDt_DS# 
                </isNotNull>

                <!--
                 Due Date End
                -->
                <isNotNull property = "xxThruDt_DE" > 
                AND WI.WF_DUE_TS &lt; = #xxThruDt_DE# 
                </isNotNull>

                <!-- 
                  Subject
                -->
                  <isNotNull property = "wfBizAttrbTxt" > 
                  AND EXISTS( 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ_CPLT TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_01 LIKE #wfBizAttrbTxt# 
                       UNION ALL 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ_CPLT TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_02 LIKE #wfBizAttrbTxt# 
                       UNION ALL 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ_CPLT TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_03 LIKE #wfBizAttrbTxt# 
                       UNION ALL 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ_CPLT TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_04 LIKE #wfBizAttrbTxt#  
                       UNION ALL 
                       SELECT
                           1 
                       FROM
                         WF_TOKEN_BIZ_CPLT TBI 
                       WHERE
                         TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                         AND TB.WF_BIZ_ATTRB_TXT_05 LIKE #wfBizAttrbTxt# 
                  )
                  </isNotNull>

                ORDER BY
                  WI.WF_PROC_PK
                  , WI.WF_WRK_ITEM_PK
                  , WI.WF_START_TS
           ) CMP_V
           WHERE
             ROWNUM &lt;= #maxRow#

           ORDER BY
             WF_PROC_PK
             , WF_WRK_ITEM_PK
      </isNotNull>
       ) D_V

      <isNotNull property = "PROC_STS_COMPLETE"> 
      <isNotNull property = "PROC_STS_ACTIVE" >
       WHERE
         ROWNUM &lt;= #maxRow#
      </isNotNull>
      </isNotNull>
    )
    </statement>


    <statement id="getWorklistTaskPullDownForAdmin" parameterClass="Map" resultClass="Map">
      SELECT
        WI.WF_WRK_ITEM_NM wfWrkItemNm
      FROM
        WF_WRK_ITEM WI
        , WF_PROC P
      WHERE
        WI.WF_PROC_PK = P.WF_PROC_PK  
        AND WI.WF_HUMAN_TASK_FLG ='Y'
        AND P.WF_PROC_NM  = #wfProcNm#
        AND WI.EZCANCELFLAG = '0' 
        AND P.EZCANCELFLAG = '0' 
        AND WI.GLBL_CMPY_CD = #glblCmpyCd# 
        AND P.GLBL_CMPY_CD = #glblCmpyCd# 
      GROUP BY
        WI.WF_WRK_ITEM_NM
      UNION
      SELECT
        WI.WF_WRK_ITEM_NM wfWrkItemNm
      FROM
        WF_WRK_ITEM_CPLT WI
        , WF_PROC_CPLT P
      WHERE
        WI.WF_PROC_PK = P.WF_PROC_PK  
        AND WI.WF_HUMAN_TASK_FLG ='Y'
        AND P.WF_PROC_NM  = #wfProcNm#
        AND WI.EZCANCELFLAG = '0' 
        AND P.EZCANCELFLAG = '0' 
        AND WI.GLBL_CMPY_CD = #glblCmpyCd# 
        AND P.GLBL_CMPY_CD = #glblCmpyCd# 
      GROUP BY
        WI.WF_WRK_ITEM_NM
      ORDER BY
        wfWrkItemNm 
    </statement>

    <statement id="getWorklistPullDownForAdmin" parameterClass="Map" resultClass="Map">
       SELECT
         PD.WF_PROC_NM WFPROCNM
         , PD.WF_DESC_TXT wfProcNmDsp 
       FROM
         WF_PROC_DFN PD
       WHERE
         PD.EZCANCELFLAG='0'
         AND PD.GLBL_CMPY_CD=#glblCmpyCd# 
         AND PD.WF_PROC_NM != 'SYSTEM'
         AND PD.WF_PROC_NM != 'NWWP0009'
       ORDER BY
        PD.WF_PROC_NM
    </statement>

    <statement id="getUsrGrp" parameterClass="Map" resultClass="Map">
      SELECT
        UG.WF_USR_GRP_NM
        ,UG.WF_USR_GRP_DESC_TXT
      FROM
        WF_USR UG
      WHERE 
        UG.EZCANCELFLAG = '0' 
        AND UG.GLBL_CMPY_CD = #glblCmpyCd#
        AND UG.WF_USR_GRP_NM IS NOT NULL
        <isNotNull property="wfUsrGrpNm">
        AND UG.WF_USR_GRP_NM LIKE #wfUsrGrpNm#
        </isNotNull>
        <isNotNull property="wfUsrGrpDescTxt">
        AND UG.WF_USR_GRP_DESC_TXT LIKE #wfUsrGrpDescTxt#
        </isNotNull>
       GROUP BY
         UG.WF_USR_GRP_NM
         , UG.WF_USR_GRP_DESC_TXT
       ORDER BY
         UG.WF_USR_GRP_NM
         , UG.WF_USR_GRP_DESC_TXT
    </statement>
<!--
    <statement id="getActLog" parameterClass="Map" resultClass="Map">
       SELECT
         AL.WF_CMNT_TXT
         , AL.WF_EVENT_TP_CD 
       FROM
         WF_ACT_LOG AL 
       WHERE
         AL.GLBL_CMPY_CD = #glblCmpyCd#
         AND AL.WF_WRK_ITEM_PK = #wfWrkItemPk# 
         AND AL.WF_PROC_PK = #wfProcPk# 
         AND AL.WF_EVENT_TP_CD IN ('51','52','53','54','55','56','57','58','59','60','61','99')
         AND AL.EZCANCELFLAG = '0'
       ORDER BY
         WF_START_TS
    </statement>
-->

    <statement id="getToUsers" parameterClass="Map" resultClass="Map">
       SELECT
           WF_WRK_ITEM_PK
         , WF_USR_ID
         , WFUSRNM
         , MAX(ISADMIN) ISADMIN
         , MAX(ISGROUP) ISGROUP
       FROM
         ( 
       <isNotNull property = "PROC_STS_ACTIVE" >
       SELECT
         U.WF_WRK_ITEM_PK
         , U.WF_USR_ID
         , CASE WHEN EXISTS(
           SELECT
             WF_USR_ID
           FROM
             WF_UTIL_USR_GRP UG
           WHERE
             UG.USR_ID = U.WF_USR_ID
             AND UG.WF_BIZ_APP_ID='SYSTEM'
             AND UG.EZCANCELFLAG = '0'
             AND UG.GLBL_CMPY_CD = #glblCmpyCd#
           )
            THEN '1'
            ELSE '0'
            END ISADMIN
         , CASE 
            WHEN U.WF_USR_GRP_DESC_TXT IS NOT NULL THEN
               U.WF_USR_GRP_DESC_TXT
            WHEN U.WF_USR_GRP_NM IS NOT NULL THEN
               U.WF_USR_GRP_NM
            ELSE
               U.WF_USR_ID || ' ' ||
               (SELECT
                 P.FIRST_NM || ' ' || P.LAST_NM
                   FROM
                     AUTH_PSN P 
                   WHERE
                     P.USR_NM       = U.WF_USR_ID
                     AND  P.GLBL_CMPY_CD = 'ADB'
                     AND  P.EZCANCELFLAG = '0'
                     AND ROWNUM = 1) 
           END WFUSRNM
         , CASE 
            WHEN ((U.WF_USR_GRP_DESC_TXT IS NOT NULL) OR (U.WF_USR_GRP_NM IS NOT NULL)) THEN '1'
            ELSE  '0'
           END ISGROUP
       FROM
         WF_USR U
       WHERE
         1=1
         AND U.WF_WRK_ITEM_PK IN ($wfWrkItemPk$) 
         AND U.EZCANCELFLAG = '0'
         AND U.GLBL_CMPY_CD = #glblCmpyCd#
         AND U.WF_USR_ACCS_APVL_FLG = 'Y'
         AND U.WF_USR_ACCS_APVL_SUB_FLG = 'N'
       </isNotNull>
       <isNotNull property = "PROC_STS_COMPLETE">
       <isNotNull property = "PROC_STS_ACTIVE" >
       UNION ALL
       </isNotNull>
       SELECT
         U.WF_WRK_ITEM_PK
         , U.WF_USR_ID
         , CASE WHEN EXISTS(
           SELECT
             WF_USR_ID
           FROM
             WF_UTIL_USR_GRP UG
           WHERE
             UG.USR_ID = U.WF_USR_ID
             AND UG.WF_BIZ_APP_ID='SYSTEM'
             AND UG.EZCANCELFLAG = '0'
             AND UG.GLBL_CMPY_CD = #glblCmpyCd#
           )
            THEN '1'
            ELSE '0'
            END ISADMIN
         , CASE 
            WHEN U.WF_USR_GRP_DESC_TXT IS NOT NULL THEN
               U.WF_USR_GRP_DESC_TXT
            WHEN U.WF_USR_GRP_NM IS NOT NULL THEN
               U.WF_USR_GRP_NM
            ELSE
               U.WF_USR_ID || ' ' ||
               (SELECT
                 P.FIRST_NM || ' ' || P.LAST_NM
                   FROM
                     AUTH_PSN P 
                   WHERE
                     P.USR_NM       = U.WF_USR_ID
                     AND  P.GLBL_CMPY_CD = 'ADB'
                     AND  P.EZCANCELFLAG = '0'
                     AND ROWNUM = 1) 
           END WFUSRNM
         , CASE 
            WHEN ((U.WF_USR_GRP_DESC_TXT IS NOT NULL) OR (U.WF_USR_GRP_NM IS NOT NULL)) THEN '1'
            ELSE  '0'
           END ISGROUP
       FROM
         WF_USR_CPLT U
       WHERE
         1=1
         AND U.WF_WRK_ITEM_PK IN ($wfWrkItemPk$) 
         AND U.EZCANCELFLAG = '0'
         AND U.GLBL_CMPY_CD = #glblCmpyCd#
         AND U.WF_USR_ACCS_APVL_FLG = 'Y'
         AND U.WF_USR_ACCS_APVL_SUB_FLG = 'N'
       </isNotNull>
       )
       GROUP BY
         WF_WRK_ITEM_PK
         , WF_USR_ID
         , WFUSRNM
       ORDER BY 
         WF_WRK_ITEM_PK
    </statement>

    <statement id="getLeaveLog" parameterClass="Map" resultClass="Map">
       SELECT
         wfCmntTxt
         ,toUsrId
         , (SELECT
             P.FIRST_NM || ' ' || P.LAST_NM
            FROM
              AUTH_PSN P 
            WHERE
              P.USR_NM       = toUsrId
            AND  P.GLBL_CMPY_CD = #glblCmpyCd#
            AND  P.EZCANCELFLAG = '0'
            AND  ROWNUM = 1) toUsrNm
         ,wfEventTpCd
         ,wfEndTs
         ,wfEventAutoFlg
         , CASE WHEN EXISTS(SELECT
              UG.WF_BIZ_APP_ID
            FROM
              WF_UTIL_USR_GRP UG 
            WHERE
                UG.USR_ID = toUsrId
            AND WF_BIZ_APP_ID = 'SYSTEM'
            AND WF_USR_GRP_NM = 'ADMIN'
            AND UG.GLBL_CMPY_CD = #glblCmpyCd#
            AND UG.EZCANCELFLAG = '0') THEN '1'
            ELSE '0'
            END ISADMIN
         ,(SELECT
              CASE WHEN UF.WF_USR_GRP_DESC_TXT IS NOT NULL THEN
                UF.WF_USR_GRP_DESC_TXT
              ELSE
                UF.WF_USR_GRP_NM
              END
            FROM
              <isNotNull property = "PROC_STS_COMPLETE">
              WF_USR_CPLT UF 
              </isNotNull>
              <isNotNull property = "PROC_STS_ACTIVE" >
              WF_USR UF 
              </isNotNull>
            WHERE
               UF.WF_WRK_ITEM_PK = #wfWrkItemPk#
               AND UF.WF_USR_ID = toUsrId
               AND UF.WF_USR_TP_CD = '01'
               AND UF.GLBL_CMPY_CD = #glblCmpyCd#
               AND UF.EZCANCELFLAG = '0'
               AND ROWNUM = 1
            ) wfUsrGrpNm
       FROM
         ( 
           SELECT
             AL.WF_CMNT_TXT wfCmntTxt
             , AL.TO_USR_ID toUsrId
             , AL.WF_EVENT_TP_CD wfEventTpCd
             , AL.WF_END_TS wfEndTs
             , AL.WF_EVENT_AUTO_FLG wfEventAutoFlg
           FROM
             <isNotNull property = "PROC_STS_COMPLETE">
             WF_ACT_LOG_CPLT AL 
             </isNotNull>
             <isNotNull property = "PROC_STS_ACTIVE" >
             WF_ACT_LOG AL 
             </isNotNull>
           WHERE
             AL.GLBL_CMPY_CD = #glblCmpyCd#
             AND AL.WF_PROC_PK = #wfProcPk# 
             AND AL.WF_WRK_ITEM_PK = #wfWrkItemPk# 
             AND AL.WF_EVENT_TP_CD IN ('51','52','53','54','55','56','57','58','59','60','61','99')
             AND AL.EZCANCELFLAG = '0'
           ORDER BY
             AL.WF_START_TS
         ) 
       WHERE
         ROWNUM = 1
      </statement>

      <statement id="getProc" parameterClass="Map" resultClass="Map">
           SELECT
             P.WF_PROC_PK wfProcPk
             , CASE WHEN ( 
               SELECT
                 COUNT(PD.WF_DESC_TXT) 
               FROM
                 WF_PROC_DFN PD 
               WHERE
                 PD.WF_PROC_NM = P.WF_PROC_NM 
                 AND ROWNUM = 1
                ) = 1 THEN
                  (SELECT
                   PD.WF_DESC_TXT 
                 FROM
                   WF_PROC_DFN PD 
                 WHERE
                   PD.WF_PROC_NM = P.WF_PROC_NM
                   AND ROWNUM = 1)
               ELSE
                 P.WF_PROC_NM
               END wfProcNm
             , P.WF_PROC_STS_CD wfProcStCd
             , P.WF_END_TS wfEndTs
             , P.WF_CMNT_TXT wfCmntTxt
             , P.WF_PROC_DOC_ID wfProcDocId
           FROM
             <isNotNull property = "PROC_STS_COMPLETE">
             WF_PROC_CPLT P
             </isNotNull>
             <isNotNull property = "PROC_STS_ACTIVE" >
             WF_PROC P
             </isNotNull>
           WHERE
             P.GLBL_CMPY_CD = #glblCmpyCd#
             AND P.WF_PROC_PK = #wfProcPk#
             AND P.EZCANCELFLAG = '0'
             AND EXISTS( 
               SELECT
                 U.GLBL_CMPY_CD
               FROM
                  <isNotNull property = "PROC_STS_COMPLETE">
                  WF_USR_CPLT U
                  </isNotNull>
                  <isNotNull property = "PROC_STS_ACTIVE" >
                  WF_USR U
                  </isNotNull>
               WHERE
                 U.GLBL_CMPY_CD = #glblCmpyCd#  
                 <!--
                 <isNotNull property="wfUsrId">
                 AND U.WF_USR_ID = #wfUsrId#
                 </isNotNull>
                 -->
                 AND U.EZCANCELFLAG = '0'
                 AND U.WF_USR_ACCS_VIS_FLG = 'Y'
                 AND U.WF_WRK_ITEM_PK IN ( 
                   SELECT
                     WI.WF_WRK_ITEM_PK 
                   FROM
                     <isNotNull property = "PROC_STS_COMPLETE">
                     WF_WRK_ITEM_CPLT WI
                     </isNotNull>
                     <isNotNull property = "PROC_STS_ACTIVE" >
                     WF_WRK_ITEM WI
                     </isNotNull>
                   WHERE
                     WI.GLBL_CMPY_CD = #glblCmpyCd#
                     AND WI.WF_PROC_PK = #wfProcPk#
                     AND WI.EZCANCELFLAG = '0' 
                 )
             ) 
      </statement>

      <statement id="getProcByDocID" parameterClass="Map" resultClass="Map">
           <isNotNull property = "PROC_STS_ACTIVE" >
           SELECT
             P.WF_PROC_PK wfProcPk
             , CASE WHEN ( 
                 SELECT
                   COUNT(PD.WF_DESC_TXT)
                 FROM
                   WF_PROC_DFN PD 
                 WHERE
                   PD.WF_PROC_NM = P.WF_PROC_NM 
                   AND ROWNUM = 1
                  ) = 1 THEN
                  ( 
                 SELECT
                   PD.WF_DESC_TXT 
                 FROM
                   WF_PROC_DFN PD 
                 WHERE
                   PD.WF_PROC_NM = P.WF_PROC_NM 
                   AND ROWNUM = 1
                  )
               ELSE
                 P.WF_PROC_NM
               END wfProcNm
             , P.WF_PROC_STS_CD wfProcStCd
             , P.WF_END_TS wfEndTs
             , P.WF_CMNT_TXT wfCmntTxt
             , P.WF_PROC_DOC_ID wfProcDocId
           FROM
             WF_PROC P
           WHERE
             P.GLBL_CMPY_CD = #glblCmpyCd#
             AND UPPER(P.WF_PROC_DOC_ID) = UPPER(#wfProcDocId#)
             AND P.EZCANCELFLAG = '0'
             AND EXISTS( 
               SELECT
                 U.GLBL_CMPY_CD
               FROM
                 WF_USR U
               WHERE
                 U.GLBL_CMPY_CD = #glblCmpyCd# 
                 <!--
                 <isNotNull property="wfUsrId">
                 AND U.WF_USR_ID = #wfUsrId#
                 </isNotNull>
                 -->
                 AND U.EZCANCELFLAG = '0'
                 AND U.WF_USR_ACCS_VIS_FLG = 'Y'
                 AND U.WF_WRK_ITEM_PK IN ( 
                   SELECT
                     WI.WF_WRK_ITEM_PK 
                   FROM
                     WF_WRK_ITEM WI
                   WHERE
                     WI.GLBL_CMPY_CD = #glblCmpyCd#
                     AND WI.WF_PROC_PK = P.WF_PROC_PK
                     AND WI.EZCANCELFLAG = '0' 
                 )
             ) 
           </isNotNull>
           <isNotNull property = "PROC_STS_ACTIVE" >
             <isNotNull property = "PROC_STS_COMPLETE">
           UNION ALL
             </isNotNull>
           </isNotNull>
           <isNotNull property = "PROC_STS_COMPLETE">
           SELECT
             P.WF_PROC_PK wfProcPk
             , CASE WHEN ( 
                 SELECT
                   COUNT(PD.WF_DESC_TXT)
                 FROM
                   WF_PROC_DFN PD 
                 WHERE
                   PD.WF_PROC_NM = P.WF_PROC_NM 
                   AND ROWNUM = 1
                  ) = 1 THEN
                  ( 
                 SELECT
                   PD.WF_DESC_TXT 
                 FROM
                   WF_PROC_DFN PD 
                 WHERE
                   PD.WF_PROC_NM = P.WF_PROC_NM 
                   AND ROWNUM = 1
                  )
               ELSE
                 P.WF_PROC_NM
               END wfProcNm
             , P.WF_PROC_STS_CD wfProcStCd
             , P.WF_END_TS wfEndTs
             , P.WF_CMNT_TXT wfCmntTxt
             , P.WF_PROC_DOC_ID wfProcDocId
           FROM
             WF_PROC_CPLT P
           WHERE
             P.GLBL_CMPY_CD = #glblCmpyCd#
             AND UPPER(P.WF_PROC_DOC_ID) = UPPER(#wfProcDocId#)
             AND P.EZCANCELFLAG = '0'
             AND EXISTS( 
               SELECT
                 U.GLBL_CMPY_CD
               FROM
                 WF_USR_CPLT U
               WHERE
                 U.GLBL_CMPY_CD = #glblCmpyCd# 
                 <!--
                 <isNotNull property="wfUsrId">
                 AND U.WF_USR_ID = #wfUsrId#
                 </isNotNull>
                 -->
                 AND U.EZCANCELFLAG = '0'
                 AND U.WF_USR_ACCS_VIS_FLG = 'Y'
                 AND U.WF_WRK_ITEM_PK IN ( 
                   SELECT
                     WI.WF_WRK_ITEM_PK 
                   FROM
                     WF_WRK_ITEM_CPLT WI
                   WHERE
                     WI.GLBL_CMPY_CD = #glblCmpyCd#
                     AND WI.WF_PROC_PK = P.WF_PROC_PK
                     AND WI.EZCANCELFLAG = '0' 
                 )
             ) 
            </isNotNull>
             ORDER BY wfProcPk
      </statement>

      <statement id="getProcByGroupNm" parameterClass="Map" resultClass="Map">
           <isNotNull property = "PROC_STS_ACTIVE" >
           SELECT
             P.WF_PROC_PK wfProcPk
             , CASE WHEN ( 
                 SELECT
                   COUNT(PD.WF_DESC_TXT)
                 FROM
                   WF_PROC_DFN PD 
                 WHERE
                   PD.WF_PROC_NM = P.WF_PROC_NM 
                   AND ROWNUM = 1
                  ) = 1 THEN
                  ( 
                 SELECT
                   PD.WF_DESC_TXT 
                 FROM
                   WF_PROC_DFN PD 
                 WHERE
                   PD.WF_PROC_NM = P.WF_PROC_NM 
                   AND ROWNUM = 1
                  )
               ELSE
                 P.WF_PROC_NM
               END wfProcNm
             , P.WF_PROC_STS_CD wfProcStCd
             , P.WF_END_TS wfEndTs
             , P.WF_CMNT_TXT wfCmntTxt
             , P.WF_PROC_DOC_ID wfProcDocId
           FROM 
             WF_PROC P
             , WF_PROC_TAG_RELN PTR 
             , WF_PROC_TAG PT
           WHERE
             P.GLBL_CMPY_CD = #glblCmpyCd#
             AND PTR.GLBL_CMPY_CD = #glblCmpyCd#
             AND PT.GLBL_CMPY_CD = #glblCmpyCd#
             AND P.EZCANCELFLAG = '0'
             AND PTR.EZCANCELFLAG = '0'
             AND PT.EZCANCELFLAG = '0'
             AND P.WF_PROC_PK = PTR.WF_PROC_PK
             AND PTR.WF_PROC_TAG_PK = PT.WF_PROC_TAG_PK
             AND PT.WF_PROC_TAG_NM = #wfProcTagNm#
             AND EXISTS( 
               SELECT
                 U.GLBL_CMPY_CD
               FROM
                 WF_USR U
               WHERE
                 U.GLBL_CMPY_CD = #glblCmpyCd#
                 <!--
                 <isNotNull property="wfUsrId">
                 AND U.WF_USR_ID = #wfUsrId#
                 </isNotNull>
                 -->
                 AND U.EZCANCELFLAG = '0'
                 AND U.WF_USR_ACCS_VIS_FLG = 'Y'
                 AND U.WF_WRK_ITEM_PK IN ( 
                   SELECT
                     WI.WF_WRK_ITEM_PK 
                   FROM
                     WF_WRK_ITEM WI
                   WHERE
                     WI.GLBL_CMPY_CD = #glblCmpyCd#
                     AND WI.WF_PROC_PK = P.WF_PROC_PK
                     AND WI.EZCANCELFLAG = '0' 
                 )
             ) 
           </isNotNull>
           <isNotNull property = "PROC_STS_ACTIVE" >
             <isNotNull property = "PROC_STS_COMPLETE">
           UNION ALL
             </isNotNull>
           </isNotNull>
           <isNotNull property = "PROC_STS_COMPLETE">
           SELECT
             P.WF_PROC_PK wfProcPk
             , CASE WHEN ( 
                 SELECT
                   COUNT(PD.WF_DESC_TXT)
                 FROM
                   WF_PROC_DFN PD 
                 WHERE
                   PD.WF_PROC_NM = P.WF_PROC_NM 
                   AND ROWNUM = 1
                  ) = 1 THEN
                  ( 
                 SELECT
                   PD.WF_DESC_TXT 
                 FROM
                   WF_PROC_DFN PD 
                 WHERE
                   PD.WF_PROC_NM = P.WF_PROC_NM 
                   AND ROWNUM = 1
                  )
               ELSE
                 P.WF_PROC_NM
               END wfProcNm
             , P.WF_PROC_STS_CD wfProcStCd
             , P.WF_END_TS wfEndTs
             , P.WF_CMNT_TXT wfCmntTxt
             , P.WF_PROC_DOC_ID wfProcDocId
           FROM 
             WF_PROC_CPLT P
             , WF_PROC_TAG_RELN PTR 
             , WF_PROC_TAG PT
           WHERE
             P.GLBL_CMPY_CD = #glblCmpyCd#
             AND PTR.GLBL_CMPY_CD = #glblCmpyCd#
             AND PT.GLBL_CMPY_CD = #glblCmpyCd#
             AND P.EZCANCELFLAG = '0'
             AND PTR.EZCANCELFLAG = '0'
             AND PT.EZCANCELFLAG = '0'
             AND P.WF_PROC_PK = PTR.WF_PROC_PK
             AND PTR.WF_PROC_TAG_PK = PT.WF_PROC_TAG_PK
             AND PT.WF_PROC_TAG_NM = #wfProcTagNm#
             AND EXISTS( 
               SELECT
                 U.GLBL_CMPY_CD
               FROM
                 WF_USR_CPLT U
               WHERE
                 U.GLBL_CMPY_CD = #glblCmpyCd#
                 <!--
                 <isNotNull property="wfUsrId">
                 AND U.WF_USR_ID = #wfUsrId#
                 </isNotNull>
                 -->
                 AND U.EZCANCELFLAG = '0'
                 AND U.WF_USR_ACCS_VIS_FLG = 'Y'
                 AND U.WF_WRK_ITEM_PK IN ( 
                   SELECT
                     WI.WF_WRK_ITEM_PK 
                   FROM
                     WF_WRK_ITEM_CPLT WI
                   WHERE
                     WI.GLBL_CMPY_CD = #glblCmpyCd#
                     AND WI.WF_PROC_PK = P.WF_PROC_PK
                     AND WI.EZCANCELFLAG = '0' 
                 )
             ) 
             </isNotNull>
             ORDER BY wfProcPk
      </statement>

      <statement id="getGroupByProcPk" parameterClass="Map" resultClass="Map">
           SELECT
             PT.WF_PROC_TAG_NM wfProcTagNm
           FROM
             WF_PROC_TAG_RELN PTR
             , WF_PROC_TAG PT 
           WHERE
             PTR.GLBL_CMPY_CD = #glblCmpyCd#
             AND PT.GLBL_CMPY_CD = #glblCmpyCd#
             AND PTR.EZCANCELFLAG = '0'
             AND PT.EZCANCELFLAG = '0'
             AND PTR.WF_PROC_TAG_PK = PT.WF_PROC_TAG_PK
             AND PTR.WF_PROC_PK = #wfProcPk#
      </statement>

      <statement id="getTask" parameterClass="Map" resultClass="Map">
           SELECT
             WI.WF_WRK_ITEM_PK wfWrkItemPk
             , WI.WF_WRK_ITEM_STS_CD wfWrkItemStsCd
             , WI.WF_WRK_ITEM_ID wfWrkItemId
             , WI.WF_WRK_ITEM_NM wfWrkItemNm
             , AL.WF_TOKEN_BIZ_PK wfTokenBizPk
             , '1' xxWfAprChkVisFlg
             , TB.WF_BIZ_SCR_ID
             , TB.WF_BIZ_ATTRB_TXT_01
           FROM
             <isNotNull property = "PROC_STS_COMPLETE">
             WF_WRK_ITEM_CPLT WI
             , WF_ACT_LOG_CPLT AL
             , WF_TOKEN_BIZ_CPLT TB
             </isNotNull>
             <isNotNull property = "PROC_STS_ACTIVE" >
             WF_WRK_ITEM WI
             , WF_ACT_LOG AL
             , WF_TOKEN_BIZ TB
             </isNotNull>
           WHERE
             WI.WF_PROC_PK = AL.WF_PROC_PK(+)
             AND WI.WF_WRK_ITEM_PK = AL.WF_WRK_ITEM_PK(+)
             AND WI.WF_WRK_ITEM_TP_CD = '03'
             AND (
              AL.WF_EVENT_TP_CD(+) = '01'
              OR AL.WF_EVENT_TP_CD(+) = '02'
              OR AL.WF_EVENT_TP_CD(+) = '03'
              OR AL.WF_EVENT_TP_CD(+) = '04'
              OR AL.WF_EVENT_TP_CD(+) = '05'
              OR AL.WF_EVENT_TP_CD(+) = '06'
              OR AL.WF_EVENT_TP_CD(+) = '07'
              OR AL.WF_EVENT_TP_CD(+) = '08'
              OR AL.WF_EVENT_TP_CD(+) = '09'
              OR AL.WF_EVENT_TP_CD(+) = '10'
              OR AL.WF_EVENT_TP_CD(+) = '11'
              OR AL.WF_EVENT_TP_CD(+) = '49'
             )
             AND AL.WF_TOKEN_BIZ_PK = TB.WF_TOKEN_BIZ_PK(+)
             AND WI.GLBL_CMPY_CD = #glblCmpyCd#
             AND AL.GLBL_CMPY_CD(+) = #glblCmpyCd#
             AND TB.GLBL_CMPY_CD(+) = #glblCmpyCd#
             AND WI.EZCANCELFLAG = '0'
             AND AL.EZCANCELFLAG(+) = '0'
             AND TB.EZCANCELFLAG(+) = '0'
             AND WI.WF_PROC_PK = #wfProcPk#
           ORDER BY
             WI.EZINTIME
             , WI.WF_WRK_ITEM_PK
      </statement>

      <statement id="getHistory" parameterClass="Map" resultClass="Map">
           SELECT
             WI.WF_WRK_ITEM_PK wfWrkItemPk
             , WI.WF_WRK_ITEM_ID wfWrkItemId
             , WI.WF_WRK_ITEM_NM wfWrkItemNm
             , AL.FROM_USR_ID fromUsrId
             , CASE  AL.WF_EVENT_TP_CD  
                WHEN 'A0' THEN AL.WF_EVENT_TP_CD
                WHEN 'A1' THEN AL.WF_EVENT_TP_CD
                WHEN 'A2' THEN AL.WF_EVENT_TP_CD
                WHEN 'A3' THEN AL.WF_EVENT_TP_CD
                ELSE ALLV.WF_EVENT_TP_CD
               END wfEventTpCd
             , CASE  AL.WF_EVENT_TP_CD  
                WHEN 'A0' THEN AL.FROM_USR_ID
                WHEN 'A1' THEN AL.FROM_USR_ID
                WHEN 'A2' THEN AL.FROM_USR_ID
                WHEN 'A3' THEN AL.FROM_USR_ID
                ELSE ALLV.TO_USR_ID
               END wfActOpId
             , AL.FROM_USR_ID fromUsrId
             , CASE  AL.WF_EVENT_TP_CD  
                WHEN 'A0' THEN AL.TO_USR_ID
                WHEN 'A1' THEN AL.TO_USR_ID
                WHEN 'A2' THEN AL.TO_USR_ID
                WHEN 'A3' THEN AL.TO_USR_ID
                ELSE ALLV.TO_USR_ID
               END toUsrId
             , CASE  AL.WF_EVENT_TP_CD  
                WHEN 'A0' THEN AL.WF_CMNT_TXT
                WHEN 'A1' THEN AL.WF_CMNT_TXT
                WHEN 'A2' THEN AL.WF_CMNT_TXT
                WHEN 'A3' THEN AL.WF_CMNT_TXT
                ELSE ALLV.WF_CMNT_TXT
               END wfCmntTxt
             , AL.WF_TOKEN_BIZ_PK wfTokenBizPk
             , CASE  AL.WF_EVENT_TP_CD  
                WHEN 'A0' THEN AL.WF_END_TS
                WHEN 'A1' THEN AL.WF_END_TS
                WHEN 'A2' THEN AL.WF_END_TS
                WHEN 'A3' THEN AL.WF_END_TS
                ELSE ALLV.WF_END_TS
               END wfEndTs
             , '1' xxWfAprChkVisFlg
             , CASE  AL.WF_EVENT_TP_CD  
                WHEN 'A0' THEN AL.WF_EVENT_AUTO_FLG
                WHEN 'A1' THEN AL.WF_EVENT_AUTO_FLG
                WHEN 'A2' THEN AL.WF_EVENT_AUTO_FLG
                WHEN 'A3' THEN AL.WF_EVENT_AUTO_FLG
                ELSE ALLV.WF_EVENT_AUTO_FLG
               END wfEventAutoFlg
             , CASE WHEN (SELECT
                COUNT(*)
               FROM
                WF_UTIL_USR_GRP UG 
               WHERE
                UG.USR_ID = (
                 CASE  AL.WF_EVENT_TP_CD
                   WHEN 'A0' THEN AL.TO_USR_ID
                   WHEN 'A1' THEN AL.TO_USR_ID
                   WHEN 'A2' THEN AL.TO_USR_ID
                   WHEN 'A3' THEN AL.TO_USR_ID
                   ELSE ALLV.TO_USR_ID
                 END
                )
               AND WF_BIZ_APP_ID = 'SYSTEM'
               AND WF_USR_GRP_NM = 'ADMIN'
               AND UG.GLBL_CMPY_CD = #glblCmpyCd#
               AND UG.EZCANCELFLAG = '0'
               AND ROWNUM = 1) = 1 THEN '1'
               ELSE '0'
               END ISADMIN
             , CASE WHEN (SELECT
                  COUNT(*)
                FROM
                  WF_UTIL_USR_GRP UG 
                WHERE
                    UG.USR_ID = AL.FROM_USR_ID
                AND WF_BIZ_APP_ID = 'SYSTEM'
                AND WF_USR_GRP_NM = 'ADMIN'
                AND UG.GLBL_CMPY_CD = #glblCmpyCd#
                AND UG.EZCANCELFLAG = '0'
                AND ROWNUM = 1) = 1 THEN '1'
                ELSE '0'
                END FROMUSER_ISADMIN
             , CASE WHEN WI.FROM_WF_USR_GRP_DESC_TXT IS NOT NULL THEN
                   WI.FROM_WF_USR_GRP_DESC_TXT
               ELSE
                   WI.FROM_WF_USR_GRP_NM
               END wfUsrGrpNm_f
             , CASE WHEN WI.TO_WF_USR_GRP_DESC_TXT IS NOT NULL THEN
                   WI.TO_WF_USR_GRP_DESC_TXT
               ELSE
                   WI.TO_WF_USR_GRP_NM
               END wfUsrGrpNm_t
             , CASE  AL.WF_EVENT_TP_CD  
                WHEN 'A0' THEN TB.WF_BIZ_ATTRB_TXT_01
                WHEN 'A1' THEN TB.WF_BIZ_ATTRB_TXT_01
                WHEN 'A2' THEN TB.WF_BIZ_ATTRB_TXT_01
                WHEN 'A3' THEN TB.WF_BIZ_ATTRB_TXT_01
                ELSE TBLV.WF_BIZ_ATTRB_TXT_01
               END WF_BIZ_ATTRB_TXT_01
             , CASE  AL.WF_EVENT_TP_CD  
                WHEN 'A0' THEN TB.WF_BIZ_ATTRB_TXT_02
                WHEN 'A1' THEN TB.WF_BIZ_ATTRB_TXT_02
                WHEN 'A2' THEN TB.WF_BIZ_ATTRB_TXT_02
                WHEN 'A3' THEN TB.WF_BIZ_ATTRB_TXT_02
                ELSE TBLV.WF_BIZ_ATTRB_TXT_02
               END WF_BIZ_ATTRB_TXT_02
             , CASE  AL.WF_EVENT_TP_CD  
                WHEN 'A0' THEN TB.WF_BIZ_ATTRB_TXT_03
                WHEN 'A1' THEN TB.WF_BIZ_ATTRB_TXT_03
                WHEN 'A2' THEN TB.WF_BIZ_ATTRB_TXT_03
                WHEN 'A3' THEN TB.WF_BIZ_ATTRB_TXT_03
                ELSE TBLV.WF_BIZ_ATTRB_TXT_03
               END WF_BIZ_ATTRB_TXT_03
             , CASE  AL.WF_EVENT_TP_CD  
                WHEN 'A0' THEN TB.WF_BIZ_ATTRB_TXT_04
                WHEN 'A1' THEN TB.WF_BIZ_ATTRB_TXT_04
                WHEN 'A2' THEN TB.WF_BIZ_ATTRB_TXT_04
                WHEN 'A3' THEN TB.WF_BIZ_ATTRB_TXT_04
                ELSE TBLV.WF_BIZ_ATTRB_TXT_04
               END WF_BIZ_ATTRB_TXT_04
             , CASE  AL.WF_EVENT_TP_CD  
                WHEN 'A0' THEN TB.WF_BIZ_ATTRB_TXT_05
                WHEN 'A1' THEN TB.WF_BIZ_ATTRB_TXT_05
                WHEN 'A2' THEN TB.WF_BIZ_ATTRB_TXT_05
                WHEN 'A3' THEN TB.WF_BIZ_ATTRB_TXT_05
                ELSE TBLV.WF_BIZ_ATTRB_TXT_05
               END WF_BIZ_ATTRB_TXT_05
             , CASE  AL.WF_EVENT_TP_CD  
                WHEN 'A0' THEN TB.WF_BIZ_ATTRB_LB_TXT_01
                WHEN 'A1' THEN TB.WF_BIZ_ATTRB_LB_TXT_01
                WHEN 'A2' THEN TB.WF_BIZ_ATTRB_LB_TXT_01
                WHEN 'A3' THEN TB.WF_BIZ_ATTRB_LB_TXT_01
                ELSE TBLV.WF_BIZ_ATTRB_LB_TXT_01
               END WF_BIZ_ATTRB_LB_TXT_01
             , CASE  AL.WF_EVENT_TP_CD  
                WHEN 'A0' THEN TB.WF_BIZ_ATTRB_LB_TXT_02
                WHEN 'A1' THEN TB.WF_BIZ_ATTRB_LB_TXT_02
                WHEN 'A2' THEN TB.WF_BIZ_ATTRB_LB_TXT_02
                WHEN 'A3' THEN TB.WF_BIZ_ATTRB_LB_TXT_02
                ELSE TBLV.WF_BIZ_ATTRB_LB_TXT_02
               END WF_BIZ_ATTRB_LB_TXT_02
             , CASE  AL.WF_EVENT_TP_CD  
                WHEN 'A0' THEN TB.WF_BIZ_ATTRB_LB_TXT_03
                WHEN 'A1' THEN TB.WF_BIZ_ATTRB_LB_TXT_03
                WHEN 'A2' THEN TB.WF_BIZ_ATTRB_LB_TXT_03
                WHEN 'A3' THEN TB.WF_BIZ_ATTRB_LB_TXT_03
                ELSE TBLV.WF_BIZ_ATTRB_LB_TXT_03
               END WF_BIZ_ATTRB_LB_TXT_03
             , CASE  AL.WF_EVENT_TP_CD  
                WHEN 'A0' THEN TB.WF_BIZ_ATTRB_LB_TXT_04
                WHEN 'A1' THEN TB.WF_BIZ_ATTRB_LB_TXT_04
                WHEN 'A2' THEN TB.WF_BIZ_ATTRB_LB_TXT_04
                WHEN 'A3' THEN TB.WF_BIZ_ATTRB_LB_TXT_04
                ELSE TBLV.WF_BIZ_ATTRB_LB_TXT_04
               END WF_BIZ_ATTRB_LB_TXT_04
             , CASE  AL.WF_EVENT_TP_CD  
                WHEN 'A0' THEN TB.WF_BIZ_ATTRB_LB_TXT_05
                WHEN 'A1' THEN TB.WF_BIZ_ATTRB_LB_TXT_05
                WHEN 'A2' THEN TB.WF_BIZ_ATTRB_LB_TXT_05
                WHEN 'A3' THEN TB.WF_BIZ_ATTRB_LB_TXT_05
                ELSE TBLV.WF_BIZ_ATTRB_LB_TXT_05
               END WF_BIZ_ATTRB_LB_TXT_05
           FROM
             <isNotNull property = "PROC_STS_COMPLETE">
             WF_WRK_ITEM_CPLT WI
             , WF_ACT_LOG_CPLT AL 
             , WF_ACT_LOG_CPLT ALLV
             , WF_TOKEN_BIZ_CPLT TB
             , WF_TOKEN_BIZ_CPLT TBLV
             </isNotNull>
             <isNotNull property = "PROC_STS_ACTIVE" >
             WF_WRK_ITEM WI
             , WF_ACT_LOG AL 
             , WF_ACT_LOG ALLV
             , WF_TOKEN_BIZ TB
             , WF_TOKEN_BIZ TBLV
             </isNotNull>
           WHERE
             WI.WF_WRK_ITEM_PK = AL.WF_WRK_ITEM_PK 
             AND WI.WF_PROC_PK = AL.WF_PROC_PK 
             AND WI.WF_WRK_ITEM_PK = ALLV.WF_WRK_ITEM_PK(+)
             AND WI.WF_PROC_PK = ALLV.WF_PROC_PK(+)
             AND WI.WF_WRK_ITEM_TP_CD = '03'
             AND AL.WF_EVENT_TP_CD IN ('01','02','03','04','05','06','07','08','09','10','11','A0','A1','A2','A3','49')
             AND ( 
               ALLV.WF_EVENT_TP_CD(+) = '51' 
               OR ALLV.WF_EVENT_TP_CD(+) = '52' 
               OR ALLV.WF_EVENT_TP_CD(+) = '53' 
               OR ALLV.WF_EVENT_TP_CD(+) = '54' 
               OR ALLV.WF_EVENT_TP_CD(+) = '55' 
               OR ALLV.WF_EVENT_TP_CD(+) = '56' 
               OR ALLV.WF_EVENT_TP_CD(+) = '57' 
               OR ALLV.WF_EVENT_TP_CD(+) = '58' 
               OR ALLV.WF_EVENT_TP_CD(+) = '59' 
               OR ALLV.WF_EVENT_TP_CD(+) = '60' 
               OR ALLV.WF_EVENT_TP_CD(+) = '61' 
               OR ALLV.WF_EVENT_TP_CD(+) = '99'
             ) 
             AND AL.WF_TOKEN_BIZ_PK = TB.WF_TOKEN_BIZ_PK
             AND ALLV.WF_TOKEN_BIZ_PK = TBLV.WF_TOKEN_BIZ_PK(+)
             AND ( 
               CASE 
                 WHEN AL.WF_EVENT_TP_CD = 'A0' 
                 THEN 1 
                 WHEN AL.WF_EVENT_TP_CD = 'A1' 
                 THEN 1
                 WHEN AL.WF_EVENT_TP_CD = 'A2' 
                 THEN 1
                 WHEN AL.WF_EVENT_TP_CD = 'A3' 
                 THEN 1
                 WHEN ALLV.WF_EVENT_TP_CD IS NOT NULL 
                 THEN 1 
                 ELSE 0 
                 END
             ) > 0 
             AND WI.WF_PROC_PK = #wfProcPk#
             AND WI.GLBL_CMPY_CD = #glblCmpyCd#
             AND AL.GLBL_CMPY_CD = #glblCmpyCd# 
             AND ALLV.GLBL_CMPY_CD(+) = #glblCmpyCd#
             AND TB.GLBL_CMPY_CD = #glblCmpyCd#
             AND TBLV.GLBL_CMPY_CD(+) = #glblCmpyCd#
             AND WI.EZCANCELFLAG = '0'
             AND AL.EZCANCELFLAG = '0' 
             AND ALLV.EZCANCELFLAG(+) = '0'
             AND TB.EZCANCELFLAG = '0'
             AND TBLV.EZCANCELFLAG(+) = '0'
           ORDER BY
             CASE AL.WF_EVENT_TP_CD 
               WHEN 'A0' THEN AL.WF_END_TS 
               WHEN 'A1' THEN AL.WF_END_TS
               WHEN 'A2' THEN AL.WF_END_TS  
               WHEN 'A3' THEN AL.WF_END_TS
               ELSE ALLV.WF_END_TS 
               END
      </statement>

      <statement id="getDetail" parameterClass="Map" resultClass="Map">
           SELECT
             CASE WHEN EXISTS ( 
                 SELECT
                   PD.WF_DESC_TXT
                 FROM
                   WF_PROC_DFN PD 
                 WHERE
                   PD.WF_PROC_NM = P.WF_PROC_NM 
               ) THEN
                 ( 
                   SELECT
                     PD.WF_DESC_TXT 
                   FROM
                     WF_PROC_DFN PD 
                   WHERE
                     PD.WF_PROC_NM = P.WF_PROC_NM 
                     AND ROWNUM = 1
                 )
             ELSE
               P.WF_PROC_NM
             END wfProcNm
             , P.WF_PROC_NM wfProcNmTmpl
             , P.WF_PROC_PK wfProcPk
             , WI.WF_WRK_ITEM_PK wfWrkItemPk
             , P.WF_PROC_STS_CD wfProcStsCd
             , WI.WF_WRK_ITEM_NM wfWrkItemNm
             , WI.WF_WRK_ITEM_STS_CD wfWrkItemStsCd
             , WI.WF_CMNT_TXT wfCmntTxt
             , AL.WF_TOKEN_BIZ_PK wfTokenBizPk
             , WI.FROM_USR_ID fromUsrId
             , CASE  AL.WF_EVENT_TP_CD 
                 WHEN 'A0' THEN AL.WF_EVENT_TP_CD
                 WHEN 'A1' THEN AL.WF_EVENT_TP_CD
                 WHEN 'A2' THEN AL.WF_EVENT_TP_CD
                 ELSE NULL
                 END wfEventTpCd
             , CASE  AL.WF_EVENT_TP_CD  
                 WHEN 'A0' THEN AL.FROM_USR_ID
                 WHEN 'A1' THEN AL.FROM_USR_ID
                 WHEN 'A2' THEN AL.FROM_USR_ID
                 ELSE NULL
                 END wfActOpId
             , WI.ML_TMPL_ID mlTmplId
             , CASE WHEN EXISTS(SELECT
                   UG.WF_BIZ_APP_ID
                 FROM
                   WF_UTIL_USR_GRP UG 
                 WHERE
                     UG.USR_ID = WI.FROM_USR_ID
                 AND WF_BIZ_APP_ID = 'SYSTEM'
                 AND WF_USR_GRP_NM = 'ADMIN'
                 AND UG.GLBL_CMPY_CD = #glblCmpyCd#
                 AND UG.EZCANCELFLAG = '0') THEN '1'
                 ELSE '0'
                 END FROMUSER_ISADMIN
             , CASE WHEN WI.FROM_WF_USR_GRP_DESC_TXT IS NOT NULL THEN
                 WI.FROM_WF_USR_GRP_DESC_TXT
               ELSE
                 WI.FROM_WF_USR_GRP_NM
               END wfUsrGrpNm_f
             , TB.WF_BIZ_ATTRB_TXT_01
             , TB.WF_BIZ_ATTRB_TXT_02
             , TB.WF_BIZ_ATTRB_TXT_03
             , TB.WF_BIZ_ATTRB_TXT_04
             , TB.WF_BIZ_ATTRB_TXT_05
             , TB.WF_BIZ_ATTRB_LB_TXT_01
             , TB.WF_BIZ_ATTRB_LB_TXT_02
             , TB.WF_BIZ_ATTRB_LB_TXT_03
             , TB.WF_BIZ_ATTRB_LB_TXT_04
             , TB.WF_BIZ_ATTRB_LB_TXT_05
             , TB.WF_BIZ_SCR_ID
             , TB.WF_BIZ_SCR_ID_01
             , TB.WF_BIZ_SCR_ID_02
             , TB.WF_BIZ_SCR_ID_03
             , TB.WF_BIZ_SCR_ID_04
             , TB.WF_BIZ_SCR_ID_05
           FROM
             <isNotNull property = "PROC_STS_COMPLETE">
             WF_WRK_ITEM_CPLT WI
             , WF_PROC_CPLT P
             , WF_ACT_LOG_CPLT AL
             , WF_TOKEN_BIZ_CPLT TB
             </isNotNull>
             <isNotNull property = "PROC_STS_ACTIVE" >
             WF_WRK_ITEM WI
             , WF_PROC P
             , WF_ACT_LOG AL
             , WF_TOKEN_BIZ TB
             </isNotNull>
           WHERE
             WI.WF_PROC_PK = P.WF_PROC_PK  
             AND WI.WF_WRK_ITEM_PK = AL.WF_WRK_ITEM_PK(+)
             AND WI.WF_PROC_PK = AL.WF_PROC_PK(+)
             AND AL.WF_TOKEN_BIZ_PK=TB.WF_TOKEN_BIZ_PK(+)
             AND (
              AL.WF_EVENT_TP_CD(+) = '01'
              OR AL.WF_EVENT_TP_CD(+) = '02'
              OR AL.WF_EVENT_TP_CD(+) = '03'
              OR AL.WF_EVENT_TP_CD(+) = '04'
              OR AL.WF_EVENT_TP_CD(+) = '05'
              OR AL.WF_EVENT_TP_CD(+) = '06'
              OR AL.WF_EVENT_TP_CD(+) = '07'
              OR AL.WF_EVENT_TP_CD(+) = '08'
              OR AL.WF_EVENT_TP_CD(+) = '09'
              OR AL.WF_EVENT_TP_CD(+) = '10'
              OR AL.WF_EVENT_TP_CD(+) = '11'
              OR AL.WF_EVENT_TP_CD(+) = 'A0'
              OR AL.WF_EVENT_TP_CD(+) = 'A1'
              OR AL.WF_EVENT_TP_CD(+) = 'A2'
              OR AL.WF_EVENT_TP_CD(+) = '49'
             )
             AND WI.EZCANCELFLAG = '0'
             AND P.EZCANCELFLAG = '0'
             AND AL.EZCANCELFLAG(+) = '0'
             AND TB.EZCANCELFLAG(+) = '0'
             AND WI.GLBL_CMPY_CD = #glblCmpyCd#
             AND P.GLBL_CMPY_CD = #glblCmpyCd#
             AND AL.GLBL_CMPY_CD(+) = #glblCmpyCd#
             AND TB.GLBL_CMPY_CD(+) = #glblCmpyCd#
             AND P.WF_PROC_PK = #wfProcPk#
             AND WI.WF_WRK_ITEM_PK = #wfWrkItemPk#
      </statement>

      <statement id="getSubOrdinateList" parameterClass="Map" resultClass="Map">
           SELECT
             UG1.USR_ID
             , P.FIRST_NM
             , P.LAST_NM
             , P.FIRST_NM || ' ' || P.LAST_NM   FULL_PSN_NM
           FROM
             WF_UTIL_USR_GRP UG1 , AUTH_PSN P
           WHERE
             UG1.GLBL_CMPY_CD = #glblCmpyCd#
             AND P.GLBL_CMPY_CD = #glblCmpyCd#
             AND UG1.EZCANCELFLAG = '0'
             AND P.EZCANCELFLAG = '0'
             AND P.USR_NM = UG1.USR_ID
             <isNotNull property="subOrdinateId">
             AND UG1.USR_ID=#subOrdinateId#
             </isNotNull>
             AND UG1.WF_USR_LVL_CD &lt; ( 
               SELECT
                 UG2.WF_USR_LVL_CD 
               FROM
                 WF_UTIL_USR_GRP UG2 
               WHERE
                 UG2.GLBL_CMPY_CD = #glblCmpyCd#
                 AND UG2.EZCANCELFLAG = '0'
                 AND UG2.USR_ID = #usrId#
                 AND ROWNUM = 1
             ) 
             GROUP BY
             UG1.USR_ID,P.FIRST_NM,P.LAST_NM
      </statement>

      <statement id="isAdministrator" parameterClass="Map" resultClass="Map">
           SELECT
             CASE WHEN COUNT(*) > 0 THEN '1'
             ELSE '0'
             END ISADMIN
           FROM
             WF_UTIL_USR_GRP UG 
           WHERE
             UG.USR_ID = #usrId#
             AND WF_BIZ_APP_ID = 'SYSTEM' 
             AND WF_USR_GRP_NM = 'ADMIN' 
             AND UG.GLBL_CMPY_CD = #glblCmpyCd# 
             AND UG.EZCANCELFLAG = '0' 
             AND ROWNUM = 1
      </statement>

      <statement id="getAdministrators" parameterClass="Map" resultClass="Map">
           SELECT DISTINCT
             UG.USR_ID
           FROM
             WF_UTIL_USR_GRP UG 
           WHERE
             UG.EZCANCELFLAG = '0'
             AND UG.GLBL_CMPY_CD = #glblCmpyCd#
             AND UG.USR_ID IN ($usrIdList$)
             AND WF_BIZ_APP_ID = 'SYSTEM' 
             AND WF_USR_GRP_NM = 'ADMIN' 
      </statement>

      <statement id="isRecvReassignable" parameterClass="Map" resultClass="Map">
           SELECT
             CASE WHEN COUNT(*) > 0 THEN '1'
             ELSE '0'
             END ISRECVRASG
           FROM
             WF_WRK_ITEM WI, 
             WF_USR U
           WHERE
             WI.WF_WRK_ITEM_PK= #wfWrkItemPk#
             AND U.WF_USR_ID= #usrId#
             AND WI.WF_WRK_ITEM_PK = U.WF_WRK_ITEM_PK
             AND WI.WF_WRK_ITEM_STS_CD ='02'
             AND WI.GLBL_CMPY_CD = #glblCmpyCd#
             AND U.GLBL_CMPY_CD = #glblCmpyCd#
             AND WI.EZCANCELFLAG = '0'
             AND U.EZCANCELFLAG = '0'
             AND U.WF_USR_ACCS_RCV_RASG_FLG = 'Y'
      </statement>

      <statement id="getSavedSearchOptionList" parameterClass="Map" resultClass="Map">
        SELECT
                  SSO.SRCH_OPT_PK
                , SSO.SRCH_OPT_NM
            FROM
                SAVE_SRCH_OPT SSO 
            WHERE
                SSO.GLBL_CMPY_CD        = #glblCmpyCd#
                AND SSO.SRCH_OPT_APL_ID = #srchOptAplId#
                AND SSO.SRCH_OPT_USR_ID = #srchOptUsrId#
                AND SSO.EZCANCELFLAG    = '0'
            ORDER BY
                  SSO.SRCH_OPT_NM
      </statement>

      <statement id="getPsnNm" parameterClass="Map" resultClass="Map">
           SELECT
                 P.USR_NM
                 , P.FIRST_NM || ' ' || P.LAST_NM   FULL_PSN_NM
            FROM
                 AUTH_PSN P 
            WHERE
            1=1
            <isNotNull property="psnCd">
            AND  P.USR_NM       LIKE #psnCd#
            </isNotNull>
            <isNotNull property="usrNm">
            AND (FIRST_NM || LAST_NM LIKE #usrNm# 
                 OR FIRST_NM || ' ' || LAST_NM LIKE #usrNm#)
            </isNotNull>
            AND  P.GLBL_CMPY_CD = #glblCmpyCd#
            AND  P.EZCANCELFLAG = '0'
            ORDER BY P.USR_NM
      </statement>

      <statement id="getCommentList" parameterClass="Map" resultClass="Map">
         SELECT
             WF_WRK_ITEM_PK
             , WF_CMNT_TXT
         FROM
           ( 
         <isNotNull property = "PROC_STS_ACTIVE" >
              SELECT
                WI.WF_WRK_ITEM_PK
                , AL.WF_CMNT_TXT
                , AL.WF_END_TS
              FROM
                WF_WRK_ITEM WI
                , WF_ACT_LOG AL
              WHERE
                WI.GLBL_CMPY_CD = #glblCmpyCd#
                AND WI.EZCANCELFLAG = '0'
                AND AL.GLBL_CMPY_CD = #glblCmpyCd#
                AND AL.EZCANCELFLAG = '0'
                AND WI.WF_WRK_ITEM_PK IN ($wfWrkItemPk$) 
                AND AL.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                AND AL.WF_EVENT_TP_CD IN ('A3', '51', '52', '53', '54', '55', '56', '57', '58', '59', '60', '61', '99')
         </isNotNull>
         <isNotNull property = "PROC_STS_COMPLETE">
         <isNotNull property = "PROC_STS_ACTIVE" >
         UNION ALL
         </isNotNull>
              SELECT
                WI.WF_WRK_ITEM_PK
                , AL.WF_CMNT_TXT
                , AL.WF_END_TS
              FROM
                WF_WRK_ITEM_CPLT WI
                , WF_ACT_LOG_CPLT AL
              WHERE
                WI.GLBL_CMPY_CD = #glblCmpyCd#
                AND WI.EZCANCELFLAG = '0'
                AND AL.GLBL_CMPY_CD = #glblCmpyCd#
                AND AL.EZCANCELFLAG = '0'
                AND WI.WF_WRK_ITEM_PK IN ($wfWrkItemPk$) 
                AND AL.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                AND AL.WF_EVENT_TP_CD IN ('A3', '51', '52', '53', '54', '55', '56', '57', '58', '59', '60', '61', '99')
         </isNotNull>
         )
         ORDER BY 
           WF_WRK_ITEM_PK
           , WF_END_TS
      </statement>

    <statement id="getWorklistForCSVDownload" parameterClass="Map" resultClass="Map">
      SELECT
          XXWFAPRCHKFLG
          , XXWFFYICHKFLG
          , WFCANCCHKFLG
          , XXWFREASGCHKFLG
          , WFPROCDOCID
          , WFPROCNM
          , WFWRKITEMNM
          , WFWRKITEMSTSCD
          , WFTOKENBIZPK
          , WFPROCPK
          , WFWRKITEMPK
          , WFPROCSTSCD
          , FROMUSRID
          , ACTWFCONDNM
          , FROMUSRNM
          , WFSTARTTS
          , FROMUSER_ISADMIN
          , WF_USR_DLGT_FLG
          , WF_DUE_TS
          , WFUSRGRPNM_F
          , WFCMNTTXT
          , TOUSRID
          , TOUSRNM
          , TOUSER_ISADMIN
          , LEAVEWFCONDNM
          , WFENDTS
          , WFEVENTAUTOFLG
          , WF_BIZ_ATTRB_TXT_01
          , WF_BIZ_ATTRB_TXT_02
          , WF_BIZ_ATTRB_TXT_03
          , WF_BIZ_ATTRB_TXT_04
          , WF_BIZ_ATTRB_TXT_05
          , WF_BIZ_ATTRB_LB_TXT_01
          , WF_BIZ_ATTRB_LB_TXT_02
          , WF_BIZ_ATTRB_LB_TXT_03
          , WF_BIZ_ATTRB_LB_TXT_04
          , WF_BIZ_ATTRB_LB_TXT_05
          , TO_USRID
          , TO_WFUSRNM
          , TO_ISADMIN
          , TO_ISGROUP
      FROM
      (
          SELECT
            CASE 
              WHEN ( 
                D_V.WF_USR_ACCS_APVL_FLG = 'Y'
                AND (
                  NOT EXISTS
                  ( 
                    SELECT
                      BC.WF_PROC_NM 
                    FROM
                      WF_BTN_CTRL BC 
                    WHERE
                      BC.WF_PROC_NM = D_V.WF_PROC_NM 
                      AND BC.WF_BTN_NM = 'btn4' 
                      AND BC.WF_BTN_STS_CD = '0' 
                      AND BC.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND BC.EZCANCELFLAG = '0'
                  )
                ) 
                AND (D_V.WF_WRK_ITEM_STS_CD = '02')
              ) 
              THEN '1' 
              ELSE '0' 
              END xxWfAprChkFlg
           , CASE 
             WHEN ( 
               (
                 D_V.WF_PROC_STS_CD = '02'
                 AND 
                 EXISTS
                 ( 
                   SELECT
                     NCL.WF_WRK_ITEM_PK 
                   FROM
                     WF_NTFY_CONF_LOG NCL
                     , WF_USR NWU
                   WHERE
                     NCL.WF_WRK_ITEM_PK = D_V.WF_WRK_ITEM_PK 
                     AND NWU.WF_WRK_ITEM_PK = NCL.WF_WRK_ITEM_PK
                     AND NCL.WF_USR_PK = NWU.WF_USR_PK
                     AND NCL.WF_NTFY_EVENT_TP_CD IN ($wfNtfyEventTpCdList$) 
                     AND NCL.WF_NTFY_ACT_TP_CD = #wfNtfyActTpCd#
                     AND NWU.WF_USR_ID = #usrId#
                     AND NCL.WF_CONF_TS IS NULL 
                     AND NCL.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND NCL.EZCANCELFLAG = '0'
                     AND NWU.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND NWU.EZCANCELFLAG = '0'
                 )
               ) 
               AND (
                 NOT EXISTS
                 ( 
                   SELECT
                     BC.WF_PROC_NM
                   FROM
                     WF_BTN_CTRL BC 
                   WHERE
                     BC.WF_PROC_NM = D_V.WF_PROC_NM 
                     AND BC.WF_BTN_NM = 'btn2' 
                     AND BC.WF_BTN_STS_CD = '0' 
                     AND BC.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND BC.EZCANCELFLAG = '0'
                 )
               )
             ) 
             THEN '1' 
             WHEN ( 
               ( 
                 D_V.WF_PROC_STS_CD IN ('04','05','06')
                 AND 
                 EXISTS
                 ( 
                   SELECT
                     NCL.WF_WRK_ITEM_PK 
                   FROM
                     WF_NTFY_CONF_LOG_CPLT NCL
                     , WF_USR_CPLT NWU
                   WHERE
                     NCL.WF_WRK_ITEM_PK = D_V.WF_WRK_ITEM_PK 
                     AND NWU.WF_WRK_ITEM_PK = NCL.WF_WRK_ITEM_PK
                     AND NCL.WF_USR_PK = NWU.WF_USR_PK
                     AND NCL.WF_NTFY_EVENT_TP_CD IN ($wfNtfyEventTpCdList$) 
                     AND NCL.WF_NTFY_ACT_TP_CD = #wfNtfyActTpCd#
                     AND NWU.WF_USR_ID = #usrId#
                     AND NCL.WF_CONF_TS IS NULL 
                     AND NCL.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND NCL.EZCANCELFLAG = '0'
                     AND NWU.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND NWU.EZCANCELFLAG = '0'
                 )
               ) 
               AND (
                 NOT EXISTS
                 ( 
                   SELECT
                     BC.WF_PROC_NM
                   FROM
                     WF_BTN_CTRL BC 
                   WHERE
                     BC.WF_PROC_NM = D_V.WF_PROC_NM 
                     AND BC.WF_BTN_NM = 'btn2' 
                     AND BC.WF_BTN_STS_CD = '0' 
                     AND BC.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND BC.EZCANCELFLAG = '0'
                 )
               )
             ) 
             THEN '1' 
             ELSE '0' 
             END xxWfFyiChkFlg
            , CASE 
              WHEN ( 
                D_V.WF_USR_ACCS_CANC_FLG = 'Y'
                AND (
                  NOT EXISTS 
                  (
                    SELECT
                      BC.WF_PROC_NM
                    FROM
                      WF_BTN_CTRL BC 
                    WHERE
                      BC.WF_PROC_NM = D_V.WF_PROC_NM 
                      AND BC.WF_BTN_NM = 'btn7' 
                      AND BC.WF_BTN_STS_CD = '0' 
                      AND BC.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND BC.EZCANCELFLAG = '0'
                  )
                ) 
                AND (D_V.WF_PROC_STS_CD IN ('01', '02', '03'))
              ) 
              THEN '1' 
              ELSE '0' 
              END WFCANCCHKFLG
            ,CASE 
              WHEN ( 
                D_V.WF_USR_ACCS_ACT_RASG_FLG = 'Y'
                AND (
                  NOT EXISTS
                  ( 
                    SELECT
                      BC.WF_PROC_NM 
                    FROM
                      WF_BTN_CTRL BC 
                    WHERE
                      BC.WF_PROC_NM = D_V.WF_PROC_NM 
                      AND BC.WF_BTN_NM = 'Reassign' 
                      AND BC.WF_BTN_STS_CD = '0' 
                      AND BC.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND BC.EZCANCELFLAG = '0'
                  )
                ) 
                AND (D_V.WF_WRK_ITEM_STS_CD = '02')
              ) 
              THEN '1' 
              ELSE '0' 
              END XXWFREASGCHKFLG
            , D_V.WF_PROC_DOC_ID wfProcDocId
            , CASE WHEN D_V.WF_DESC_TXT IS NOT NULL THEN 
                D_V.WF_DESC_TXT 
              ELSE
                D_V.WF_PROC_NM 
              END wfProcNm
            , D_V.WF_WRK_ITEM_NM wfWrkItemNm
            , D_V.WF_WRK_ITEM_STS_CD wfWrkItemStsCd
            , D_V.WF_TOKEN_BIZ_PK wfTokenBizPk
            , D_V.WF_PROC_PK wfProcPk
            , D_V.WF_WRK_ITEM_PK wfWrkItemPk
            , D_V.WF_PROC_STS_CD wfProcStsCd
            , D_V.FROM_USR_ID fromUsrId
            , D_V.ACT_WF_COND_NM actWfCondNm
            , ( 
              SELECT
                P.FIRST_NM || ' ' || P.LAST_NM 
              FROM
                AUTH_PSN P 
              WHERE
                P.USR_NM = D_V.FROM_USR_ID 
                AND P.GLBL_CMPY_CD = #glblCmpyCd# 
                AND P.EZCANCELFLAG = '0' 
                AND ROWNUM = 1
            ) fromUsrNm
            , D_V.WF_START_TS wfStartTs
            , CASE 
              WHEN
              EXISTS 
              ( 
                SELECT
                  UG.WF_BIZ_APP_ID
                FROM
                  WF_UTIL_USR_GRP UG 
                WHERE
                  UG.USR_ID = D_V.FROM_USR_ID 
                  AND WF_BIZ_APP_ID = 'SYSTEM' 
                  AND WF_USR_GRP_NM = 'ADMIN' 
                  AND UG.GLBL_CMPY_CD = #glblCmpyCd# 
                  AND UG.EZCANCELFLAG = '0' 
              )
              THEN '1' 
              ELSE '0' 
              END FROMUSER_ISADMIN
            , D_V.WF_USR_DLGT_FLG
            , D_V.WF_DUE_TS
            , CASE WHEN D_V.FROM_WF_USR_GRP_DESC_TXT IS NOT NULL 
              THEN D_V.FROM_WF_USR_GRP_DESC_TXT 
              ELSE D_V.FROM_WF_USR_GRP_NM 
              END wfUsrGrpNm_f
            , CASE
              WHEN (D_V.WF_PROC_STS_CD IN ('04','05','06')) THEN (
                SELECT
                  LISTAGG(L.WF_CMNT_TXT,CHR(13) || CHR(10)) WITHIN GROUP ( ORDER BY L.WF_WRK_ITEM_PK ) wfCmntTxt
                FROM
                  (
                    SELECT
                      AL.WF_WRK_ITEM_PK WF_WRK_ITEM_PK
                      , AL.WF_ACT_LOG_PK WF_ACT_LOG_PK
                      , AL.WF_CMNT_TXT WF_CMNT_TXT
                    FROM
                      WF_ACT_LOG_CPLT AL
                    WHERE
                      AL.GLBL_CMPY_CD = #glblCmpyCd#
                      AND AL.WF_PROC_PK = D_V.WF_PROC_PK
                      AND AL.WF_WRK_ITEM_PK = D_V.WF_WRK_ITEM_PK 
                      AND AL.WF_EVENT_TP_CD IN ('51','52','53','54','55','56','57','58','59','60','61','99','A3')
                      AND AL.EZCANCELFLAG = '0'
                  ) L
                GROUP BY L.WF_WRK_ITEM_PK
              )
              ELSE (
                SELECT
                  LISTAGG(L.WF_CMNT_TXT,CHR(13) || CHR(10)) WITHIN GROUP ( ORDER BY L.WF_WRK_ITEM_PK ) wfCmntTxt
                FROM
                  (
                    SELECT
                      AL.WF_WRK_ITEM_PK WF_WRK_ITEM_PK
                      , AL.WF_ACT_LOG_PK WF_ACT_LOG_PK
                      , AL.WF_CMNT_TXT WF_CMNT_TXT
                    FROM
                      WF_ACT_LOG AL
                    WHERE
                      AL.GLBL_CMPY_CD = #glblCmpyCd#
                      AND AL.WF_PROC_PK = D_V.WF_PROC_PK
                      AND AL.WF_WRK_ITEM_PK = D_V.WF_WRK_ITEM_PK 
                      AND AL.WF_EVENT_TP_CD IN ('51','52','53','54','55','56','57','58','59','60','61','99','A3')
                      AND AL.EZCANCELFLAG = '0'
                  ) L
                GROUP BY L.WF_WRK_ITEM_PK
              ) END wfCmntTxt
            , D_V.TO_USR_ID toUsrId
            , (SELECT
                P.FIRST_NM || ' ' || P.LAST_NM
               FROM
                 AUTH_PSN P 
               WHERE
                 P.USR_NM       = D_V.TO_USR_ID
               AND  P.GLBL_CMPY_CD = #glblCmpyCd#
               AND  P.EZCANCELFLAG = '0'
               AND  ROWNUM = 1) toUsrNm
            , CASE 
              WHEN
              EXISTS 
              ( 
                SELECT
                  UG.WF_BIZ_APP_ID
                FROM
                  WF_UTIL_USR_GRP UG 
                WHERE
                  UG.USR_ID = D_V.TO_USR_ID
                  AND WF_BIZ_APP_ID = 'SYSTEM' 
                  AND WF_USR_GRP_NM = 'ADMIN' 
                  AND UG.GLBL_CMPY_CD = #glblCmpyCd# 
                  AND UG.EZCANCELFLAG = '0' 
              )
              THEN '1' 
              ELSE '0' 
              END TOUSER_ISADMIN
            , D_V.LEAVE_WF_COND_NM AS leaveWfCondNm
            , D_V.WF_END_TS wfEndTs
            , D_V.WF_LEAVE_EVENT_AUTO_FLG AS wfEventAutoFlg
            , D_V.WF_BIZ_ATTRB_TXT_01
            , D_V.WF_BIZ_ATTRB_TXT_02
            , D_V.WF_BIZ_ATTRB_TXT_03
            , D_V.WF_BIZ_ATTRB_TXT_04
            , D_V.WF_BIZ_ATTRB_TXT_05
            , D_V.WF_BIZ_ATTRB_LB_TXT_01
            , D_V.WF_BIZ_ATTRB_LB_TXT_02
            , D_V.WF_BIZ_ATTRB_LB_TXT_03
            , D_V.WF_BIZ_ATTRB_LB_TXT_04
            , D_V.WF_BIZ_ATTRB_LB_TXT_05
            , D_V.TO_USRID
            , D_V.TO_WFUSRNM
            , D_V.TO_ISADMIN
            , D_V.TO_ISGROUP
            FROM
            (
      <isNotNull property = "PROC_STS_ACTIVE" > 
                SELECT
                  TMP2.PRI
                  , TMP2.WF_USR_ACCS_APVL_FLG
                  , TMP2.WF_USR_ACCS_ACT_RASG_FLG
                  , TMP2.WF_PROC_NM
                  , TMP2.WF_WRK_ITEM_STS_CD
                  , TMP2.WF_WRK_ITEM_PK
                  , TMP2.WF_USR_ID
                  , TMP2.WF_USR_PK
                  , TMP2.WF_PROC_DOC_ID
                  , TMP2.WF_DESC_TXT
                  , TMP2.WF_USR_ACCS_CANC_FLG
                  , TMP2.WF_WRK_ITEM_NM
                  , TMP2.WF_TOKEN_BIZ_PK
                  , TMP2.WF_PROC_PK
                  , TMP2.WF_PROC_STS_CD
                  , TMP2.FROM_USR_ID
                  , TMP2.FROM_WF_USR_GRP_DESC_TXT
                  , TMP2.FROM_WF_USR_GRP_NM
                  , TMP2.ACT_WF_COND_NM
                  , TMP2.WF_START_TS
                  , TMP2.WF_USR_DLGT_FLG
                  , TMP2.WF_DUE_TS
                  , TMP2.TO_USR_ID
                  , TMP2.LEAVE_WF_COND_NM
                  , TMP2.WF_END_TS
                  , TMP2.WF_LEAVE_EVENT_AUTO_FLG
                  , TMP2.WF_BIZ_ATTRB_TXT_01
                  , TMP2.WF_BIZ_ATTRB_TXT_02
                  , TMP2.WF_BIZ_ATTRB_TXT_03
                  , TMP2.WF_BIZ_ATTRB_TXT_04
                  , TMP2.WF_BIZ_ATTRB_TXT_05
                  , TMP2.WF_BIZ_ATTRB_LB_TXT_01
                  , TMP2.WF_BIZ_ATTRB_LB_TXT_02
                  , TMP2.WF_BIZ_ATTRB_LB_TXT_03
                  , TMP2.WF_BIZ_ATTRB_LB_TXT_04
                  , TMP2.WF_BIZ_ATTRB_LB_TXT_05
                  , LISTAGG(TMP2.TO_WF_USR_ID, ',') WITHIN GROUP (order by null) TO_USRID
                  <!-- , LISTAGG(TMP2.WFUSRNM, ',') WITHIN GROUP (order by null) TO_WFUSRNM
                  , MAX(TMP2.ISADMIN) TO_ISADMIN
                  , MAX(TMP2.ISGROUP) TO_ISGROUP -->
                  , LISTAGG(TMP2.WFUSRNM, '","') WITHIN GROUP (order by null) TO_WFUSRNM
                  , LISTAGG(TMP2.ISADMIN, ',') WITHIN GROUP (order by null) TO_ISADMIN
                  , LISTAGG(TMP2.ISGROUP, ',') WITHIN GROUP (order by null) TO_ISGROUP
                FROM
                  ( -- TMP2
                    SELECT
                      TMP.PRI
                      , TMP.WF_USR_ACCS_APVL_FLG
                      , TMP.WF_USR_ACCS_ACT_RASG_FLG
                      , TMP.WF_PROC_NM
                      , TMP.WF_WRK_ITEM_STS_CD
                      , TMP.WF_WRK_ITEM_PK
                      , TMP.WF_USR_ID
                      , TMP.WF_USR_PK
                      , TMP.WF_PROC_DOC_ID
                      , TMP.WF_DESC_TXT
                      , TMP.WF_USR_ACCS_CANC_FLG
                      , TMP.WF_WRK_ITEM_NM
                      , TMP.WF_TOKEN_BIZ_PK
                      , TMP.WF_PROC_PK
                      , TMP.WF_PROC_STS_CD
                      , TMP.FROM_USR_ID
                      , TMP.FROM_WF_USR_GRP_DESC_TXT
                      , TMP.FROM_WF_USR_GRP_NM
                      , TMP.ACT_WF_COND_NM
                      , TMP.WF_START_TS
                      , TMP.WF_USR_DLGT_FLG
                      , TMP.WF_DUE_TS
                      , TMP.TO_USR_ID
                      , TMP.LEAVE_WF_COND_NM
                      , TMP.WF_END_TS
                      , TMP.WF_LEAVE_EVENT_AUTO_FLG
                      , TMP.WF_BIZ_ATTRB_TXT_01
                      , TMP.WF_BIZ_ATTRB_TXT_02
                      , TMP.WF_BIZ_ATTRB_TXT_03
                      , TMP.WF_BIZ_ATTRB_TXT_04
                      , TMP.WF_BIZ_ATTRB_TXT_05
                      , TMP.WF_BIZ_ATTRB_LB_TXT_01
                      , TMP.WF_BIZ_ATTRB_LB_TXT_02
                      , TMP.WF_BIZ_ATTRB_LB_TXT_03
                      , TMP.WF_BIZ_ATTRB_LB_TXT_04
                      , TMP.WF_BIZ_ATTRB_LB_TXT_05
                      , U.WF_USR_ID TO_WF_USR_ID
                      , CASE WHEN EXISTS(
                        SELECT
                          U.WF_USR_ID
                        FROM
                          WF_UTIL_USR_GRP UG
                        WHERE
                          UG.USR_ID = U.WF_USR_ID
                          AND UG.WF_BIZ_APP_ID='SYSTEM'
                          AND UG.EZCANCELFLAG = '0'
                          AND UG.GLBL_CMPY_CD = #glblCmpyCd#
                        )
                         THEN '1'
                         ELSE '0'
                         END ISADMIN
                      , CASE 
                         WHEN U.WF_USR_GRP_DESC_TXT IS NOT NULL THEN
                            U.WF_USR_GRP_DESC_TXT
                         WHEN U.WF_USR_GRP_NM IS NOT NULL THEN
                            U.WF_USR_GRP_NM
                         ELSE
                            U.WF_USR_ID || ' ' ||
                            (SELECT
                              P.FIRST_NM || ' ' || P.LAST_NM
                                FROM
                                  AUTH_PSN P 
                                WHERE
                                  P.USR_NM       = U.WF_USR_ID
                                  AND  P.GLBL_CMPY_CD = #glblCmpyCd#
                                  AND  P.EZCANCELFLAG = '0'
                                  AND ROWNUM = 1) 
                        END WFUSRNM
                      , CASE 
                         WHEN ((U.WF_USR_GRP_DESC_TXT IS NOT NULL) OR (U.WF_USR_GRP_NM IS NOT NULL)) THEN '1'
                         ELSE  '0'
                        END ISGROUP
                    FROM
                      ( -- TMP
                       SELECT
                         ORG_V.PRI
                         , ORG_V.WF_USR_ACCS_APVL_FLG
                         , ORG_V.WF_USR_ACCS_ACT_RASG_FLG
                         , ORG_V.WF_PROC_NM
                         , ORG_V.WF_WRK_ITEM_STS_CD
                         , ORG_V.WF_WRK_ITEM_PK
                         , ORG_V.WF_USR_ID
                         , ORG_V.WF_USR_PK
                         , ORG_V.WF_PROC_DOC_ID
                         , ORG_V.WF_DESC_TXT
                         , ORG_V.WF_USR_ACCS_CANC_FLG
                         , ORG_V.WF_WRK_ITEM_NM
                         , ORG_V.WF_TOKEN_BIZ_PK
                         , ORG_V.WF_PROC_PK
                         , ORG_V.WF_PROC_STS_CD
                         , ORG_V.FROM_USR_ID
                         , ORG_V.FROM_WF_USR_GRP_DESC_TXT
                         , ORG_V.FROM_WF_USR_GRP_NM
                         , ORG_V.ACT_WF_COND_NM
                         , ORG_V.WF_START_TS
                         , ORG_V.WF_USR_DLGT_FLG
                         , ORG_V.WF_DUE_TS
                         , ORG_V.WF_CMNT_TXT
                         , ORG_V.TO_USR_ID
                         , ORG_V.LEAVE_WF_COND_NM
                         , ORG_V.WF_END_TS
                         , ORG_V.WF_LEAVE_EVENT_AUTO_FLG
                         , ORG_V.WF_BIZ_ATTRB_TXT_01
                         , ORG_V.WF_BIZ_ATTRB_TXT_02
                         , ORG_V.WF_BIZ_ATTRB_TXT_03
                         , ORG_V.WF_BIZ_ATTRB_TXT_04
                         , ORG_V.WF_BIZ_ATTRB_TXT_05
                         , ORG_V.WF_BIZ_ATTRB_LB_TXT_01
                         , ORG_V.WF_BIZ_ATTRB_LB_TXT_02
                         , ORG_V.WF_BIZ_ATTRB_LB_TXT_03
                         , ORG_V.WF_BIZ_ATTRB_LB_TXT_04
                         , ORG_V.WF_BIZ_ATTRB_LB_TXT_05
                         , ORG_V.WF_BIZ_SCR_ID
                         , ORG_V.WF_BIZ_SCR_ID_01
                         , ORG_V.WF_BIZ_SCR_ID_02
                         , ORG_V.WF_BIZ_SCR_ID_03
                         , ORG_V.WF_BIZ_SCR_ID_04
                         , ORG_V.WF_BIZ_SCR_ID_05
                       FROM
                       (
                         SELECT
                           1 PRI
                           , U.WF_USR_ACCS_APVL_FLG
                           , U.WF_USR_ACCS_ACT_RASG_FLG
                           , P.WF_PROC_NM
                           , WI.WF_WRK_ITEM_STS_CD
                           , WI.WF_WRK_ITEM_PK
                           , U.WF_USR_ID
                           , U.WF_USR_PK
                           , P.WF_PROC_DOC_ID
                           , PDFN.WF_DESC_TXT
                           , U.WF_USR_ACCS_CANC_FLG
                           , WI.WF_WRK_ITEM_NM
                           , TB.WF_TOKEN_BIZ_PK
                           , P.WF_PROC_PK
                           , P.WF_PROC_STS_CD
                           , WI.FROM_USR_ID
                           , WI.FROM_WF_USR_GRP_DESC_TXT
                           , WI.FROM_WF_USR_GRP_NM
                           , WI.ACT_WF_COND_NM
                           , WI.WF_START_TS
                           , U.WF_USR_DLGT_FLG
                           , WI.WF_DUE_TS
                           , WI.WF_CMNT_TXT
                           , WI.TO_USR_ID
                           , WI.LEAVE_WF_COND_NM
                           , WI.WF_END_TS
                           , WI.WF_LEAVE_EVENT_AUTO_FLG
                           , TB.WF_BIZ_ATTRB_TXT_01
                           , TB.WF_BIZ_ATTRB_TXT_02
                           , TB.WF_BIZ_ATTRB_TXT_03
                           , TB.WF_BIZ_ATTRB_TXT_04
                           , TB.WF_BIZ_ATTRB_TXT_05
                           , TB.WF_BIZ_ATTRB_LB_TXT_01
                           , TB.WF_BIZ_ATTRB_LB_TXT_02
                           , TB.WF_BIZ_ATTRB_LB_TXT_03
                           , TB.WF_BIZ_ATTRB_LB_TXT_04
                           , TB.WF_BIZ_ATTRB_LB_TXT_05
                           , TB.WF_BIZ_SCR_ID
                           , TB.WF_BIZ_SCR_ID_01
                           , TB.WF_BIZ_SCR_ID_02
                           , TB.WF_BIZ_SCR_ID_03
                           , TB.WF_BIZ_SCR_ID_04
                           , TB.WF_BIZ_SCR_ID_05
                         FROM
                           WF_WRK_ITEM WI
                           , WF_PROC P
                           , WF_USR U
                           , WF_TOKEN_BIZ TB
                           , WF_PROC_DFN PDFN
                         WHERE
                           WI.WF_PROC_PK = P.WF_PROC_PK 
                           AND WI.WF_WRK_ITEM_PK = U.WF_WRK_ITEM_PK
                           AND WI.WF_TOKEN_BIZ_PK = TB.WF_TOKEN_BIZ_PK
                           AND P.WF_PROC_NM = PDFN.WF_PROC_NM
                           AND WI.EZCANCELFLAG = '0'
                           AND P.EZCANCELFLAG = '0'
                           AND U.EZCANCELFLAG = '0'
                           AND TB.EZCANCELFLAG = '0'
                           AND PDFN.EZCANCELFLAG = '0'
                           AND WI.GLBL_CMPY_CD = #glblCmpyCd# 
                           AND P.GLBL_CMPY_CD = #glblCmpyCd# 
                           AND U.GLBL_CMPY_CD = #glblCmpyCd#
                           AND TB.GLBL_CMPY_CD = #glblCmpyCd#
                           AND PDFN.GLBL_CMPY_CD = #glblCmpyCd#
                           AND U.WF_USR_ID = #usrId# 
                           <isNotNull property = "wfProcPk" > 
                           AND P.WF_PROC_PK = #wfProcPk#
                           </isNotNull>
                           <isNotNull property = "wfProcDocId" > 
                           AND UPPER(P.WF_PROC_DOC_ID) = UPPER(#wfProcDocId#)
                           </isNotNull>
                           <isNotNull property = "wfProcNm" > 
                           AND P.WF_PROC_NM = #wfProcNm#
                           </isNotNull>
                           <isNotNull property = "wfWrkItemNm" > 
                           AND WI.WF_WRK_ITEM_NM LIKE #wfWrkItemNm#
                           </isNotNull> 
                           AND
                           <!-- View -->
                           U.WF_USR_ACCS_VIS_FLG = 'Y'
                           AND
                           WI.WF_HUMAN_TASK_FLG ='Y'

                           <!-- Type -->
                           AND ( 
                             1 = 0 

                             <!-- 
                               Approve
                             -->
                             <isNotNull property = "xxWfAprChkFlg" > 
                             OR
                             ( 
                               U.WF_USR_ACCS_APVL_FLG = 'Y'
                               AND (WI.WF_WRK_ITEM_STS_CD = '02')
                               AND U.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                             ) 
                             OR
                             <!--Cancel-->
                             ( 
                               U.WF_USR_ACCS_CANC_FLG = 'Y'
                               AND WI.LEAVE_WF_COND_NM = 'SUBMIT'
                             )
                             </isNotNull>

                             <isNotNull property = "xxWfSubChkFlg" > 
                             OR
                             (
                               U.WF_USR_ACCS_APVL_SUB_FLG = 'Y'
                               AND (WI.WF_WRK_ITEM_STS_CD = '02')
                             )
                             </isNotNull>

                             <!-- 
                               FYI
                             -->
                             <isNotNull property = "xxWfFyiChkFlg" > 
                             OR
                             ( 
                               ( 
                                 EXISTS
                                 ( 
                                   SELECT
                                     NCL.WF_WRK_ITEM_PK
                                   FROM
                                     WF_NTFY_CONF_LOG NCL 
                                   WHERE
                                     NCL.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK 
                                     AND NCL.WF_NTFY_EVENT_TP_CD IN ($wfNtfyEventTpCdList$) 
                                     AND NCL.WF_NTFY_ACT_TP_CD = #wfNtfyActTpCd# 
                                     AND NCL.WF_USR_PK = U.WF_USR_PK
                                     AND NCL.WF_CONF_TS IS NULL 
                                     AND NCL.GLBL_CMPY_CD = #glblCmpyCd# 
                                     AND NCL.EZCANCELFLAG = '0'
                                 )
                               ) 
                               AND ( 
                                 CASE 
                                   WHEN P.FYI_HLD_QTY = 0 
                                   THEN 1 
                                   WHEN WI.WF_FYI_HLD_TS &gt;= TO_CHAR(CURRENT_TIMESTAMP, 'YYYYMMDD') 
                                   THEN 1 
                                   ELSE 0 
                                   END
                               ) = 1
                             ) 
                             </isNotNull>

                             <!-- 
                               FYI(Confirmed)
                             -->
                             <isNotNull property = "xxWfConfFlg" > 
                             OR
                             ( 
                               ( 
                                 EXISTS
                                 ( 
                                   SELECT
                                     NCL.WF_WRK_ITEM_PK 
                                   FROM
                                     WF_NTFY_CONF_LOG NCL
                                   WHERE
                                     NCL.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK 
                                     AND NCL.WF_NTFY_EVENT_TP_CD IN ($wfNtfyEventTpCdList$) 
                                     AND NCL.WF_NTFY_ACT_TP_CD = #wfNtfyActTpCd# 
                                     AND NCL.WF_USR_PK = U.WF_USR_PK
                                     AND NCL.WF_CONF_TS IS NOT NULL 
                                     AND NCL.GLBL_CMPY_CD = #glblCmpyCd# 
                                     AND NCL.EZCANCELFLAG = '0'
                                 )
                               ) 
                               AND ( 
                                 CASE 
                                   WHEN P.FYI_HLD_QTY = 0 
                                   THEN 1 
                                   WHEN WI.WF_FYI_HLD_TS &gt;= TO_CHAR(CURRENT_TIMESTAMP, 'YYYYMMDD') 
                                   THEN 1 
                                   ELSE 0 
                                   END
                               ) = 1
                             )
                             </isNotNull>
                           )

                           <!-- 
                             Subject
                           -->
                           <isNotNull property = "wfBizAttrbTxt" > 
                           AND EXISTS( 
                                SELECT
                                    1 
                                FROM
                                  WF_TOKEN_BIZ TBI 
                                WHERE
                                  TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                  AND TB.WF_BIZ_ATTRB_TXT_01 LIKE #wfBizAttrbTxt# 
                                UNION ALL 
                                SELECT
                                    1 
                                FROM
                                  WF_TOKEN_BIZ TBI 
                                WHERE
                                  TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                  AND TB.WF_BIZ_ATTRB_TXT_02 LIKE #wfBizAttrbTxt# 
                                UNION ALL 
                                SELECT
                                    1 
                                FROM
                                  WF_TOKEN_BIZ TBI 
                                WHERE
                                  TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                  AND TB.WF_BIZ_ATTRB_TXT_03 LIKE #wfBizAttrbTxt# 
                                UNION ALL 
                                SELECT
                                    1 
                                FROM
                                  WF_TOKEN_BIZ TBI 
                                WHERE
                                  TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                  AND TB.WF_BIZ_ATTRB_TXT_04 LIKE #wfBizAttrbTxt#  
                                UNION ALL 
                                SELECT
                                    1 
                                FROM
                                  WF_TOKEN_BIZ TBI 
                                WHERE
                                  TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                  AND TB.WF_BIZ_ATTRB_TXT_05 LIKE #wfBizAttrbTxt# 
                           )
                           </isNotNull>

                           <!-- 
                             Start Date Start
                           -->
                           <isNotNull property = "xxFromDt_SS" > 
                           AND WI.WF_START_TS &gt;= #xxFromDt_SS#
                           </isNotNull>

                           <!-- 
                             Start Date End
                           -->
                           <isNotNull property = "xxThruDt_SE" > 
                           AND WI.WF_START_TS &lt;= #xxThruDt_SE# 
                           </isNotNull>

                           <!-- 
                             From Users
                           -->
                           <isNotNull property = "xxGrpFlg_F1" > 
                           AND ( 
                             WI.FROM_USR_ID = #xxGrpFlg_F1# 
                             OR WI.FROM_WF_USR_GRP_NM = #xxGrpFlg_F1# 
                           )
                           </isNotNull>
                           <isNotNull property = "xxGrpFlg_F2" > 
                           AND WI.FROM_WF_USR_GRP_NM = #xxGrpFlg_F1# 
                           </isNotNull>
                           <isNotNull property = "xxGrpFlg_F3" > 
                           AND WI.FROM_USR_ID = #xxGrpFlg_F3#
                           </isNotNull>

                           <!-- 
                             To Users
                           -->
                           <isNotNull property = "xxGrpFlg_T" >
                           AND EXISTS (
                             <isNotNull property = "xxGrpFlg_T1" >
                             SELECT
                                1
                             FROM
                               WF_USR IUT
                             WHERE
                               IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK 
                               AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                               AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                               AND IUT.WF_USR_GRP_NM = #xxGrpFlg_T1#
                               AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                               AND IUT.EZCANCELFLAG = '0'
                             UNION ALL
                             SELECT
                                1
                             FROM
                               WF_USR IUT
                             WHERE
                               IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK 
                               AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                               AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                               AND IUT.WF_USR_ID = #xxGrpFlg_T1#
                               AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                               AND IUT.EZCANCELFLAG = '0'
                             </isNotNull>
                             <isNotNull property = "xxGrpFlg_T2" >
                             SELECT
                                1
                             FROM
                               WF_USR IUT
                             WHERE
                               IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK 
                               AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                               AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                               AND IUT.WF_USR_GRP_NM = #xxGrpFlg_T2#
                               AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                               AND IUT.EZCANCELFLAG = '0'
                             <!-- Dummy SQL (make it same execution plan as 'ALL') -->
                             UNION ALL
                             SELECT
                                1
                             FROM
                               WF_USR IUT
                             WHERE
                               IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                               AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                               AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                               AND IUT.WF_USR_ID = 'NOT_FOUND_USER'
                               AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                               AND IUT.EZCANCELFLAG = '0'
                             </isNotNull>
                             <isNotNull property = "xxGrpFlg_T3" >
                             SELECT
                                1
                             FROM
                               WF_USR IUT
                             WHERE
                               IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                               AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                               AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                               AND IUT.WF_USR_ID = #xxGrpFlg_T3#
                               AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                               AND IUT.EZCANCELFLAG = '0'
                             </isNotNull>
                           )
                           </isNotNull>

                           <!-- 
                            Due Date Start
                           -->
                           <isNotNull property = "xxFromDt_DS" > 
                           AND WI.WF_DUE_TS &gt;= #xxFromDt_DS# 
                           </isNotNull>

                           <!--
                            Due Date End
                           -->
                           <isNotNull property = "xxThruDt_DE" > 
                           AND WI.WF_DUE_TS &lt; = #xxThruDt_DE# 
                           </isNotNull>
                           
                           ORDER BY
                           WI.WF_PROC_PK
                           , WI.WF_WRK_ITEM_PK
                           , WI.WF_START_TS
                         ) ORG_V
                       WHERE
                         ROWNUM &lt;= #maxRow# 

                       UNION ALL

                       SELECT
                         DLE_V.PRI
                         , DLE_V.WF_USR_ACCS_APVL_FLG
                         , DLE_V.WF_USR_ACCS_ACT_RASG_FLG
                         , DLE_V.WF_PROC_NM
                         , DLE_V.WF_WRK_ITEM_STS_CD
                         , DLE_V.WF_WRK_ITEM_PK
                         , DLE_V.WF_USR_ID
                         , DLE_V.WF_USR_PK
                         , DLE_V.WF_PROC_DOC_ID
                         , DLE_V.WF_DESC_TXT
                         , DLE_V.WF_USR_ACCS_CANC_FLG
                         , DLE_V.WF_WRK_ITEM_NM
                         , DLE_V.WF_TOKEN_BIZ_PK
                         , DLE_V.WF_PROC_PK
                         , DLE_V.WF_PROC_STS_CD
                         , DLE_V.FROM_USR_ID
                         , DLE_V.FROM_WF_USR_GRP_DESC_TXT
                         , DLE_V.FROM_WF_USR_GRP_NM
                         , DLE_V.ACT_WF_COND_NM
                         , DLE_V.WF_START_TS
                         , DLE_V.WF_USR_DLGT_FLG
                         , DLE_V.WF_DUE_TS
                         , DLE_V.WF_CMNT_TXT
                         , DLE_V.TO_USR_ID
                         , DLE_V.LEAVE_WF_COND_NM
                         , DLE_V.WF_END_TS
                         , DLE_V.WF_LEAVE_EVENT_AUTO_FLG
                         , DLE_V.WF_BIZ_ATTRB_TXT_01
                         , DLE_V.WF_BIZ_ATTRB_TXT_02
                         , DLE_V.WF_BIZ_ATTRB_TXT_03
                         , DLE_V.WF_BIZ_ATTRB_TXT_04
                         , DLE_V.WF_BIZ_ATTRB_TXT_05
                         , DLE_V.WF_BIZ_ATTRB_LB_TXT_01
                         , DLE_V.WF_BIZ_ATTRB_LB_TXT_02
                         , DLE_V.WF_BIZ_ATTRB_LB_TXT_03
                         , DLE_V.WF_BIZ_ATTRB_LB_TXT_04
                         , DLE_V.WF_BIZ_ATTRB_LB_TXT_05
                         , DLE_V.WF_BIZ_SCR_ID
                         , DLE_V.WF_BIZ_SCR_ID_01
                         , DLE_V.WF_BIZ_SCR_ID_02
                         , DLE_V.WF_BIZ_SCR_ID_03
                         , DLE_V.WF_BIZ_SCR_ID_04
                         , DLE_V.WF_BIZ_SCR_ID_05
                       FROM
                       (
                         SELECT
                           2 AS PRI
                           , U.WF_USR_ACCS_APVL_FLG
                           , U.WF_USR_ACCS_ACT_RASG_FLG
                           , P.WF_PROC_NM
                           , WI.WF_WRK_ITEM_STS_CD
                           , WI.WF_WRK_ITEM_PK
                           , U.WF_USR_ID
                           , U.WF_USR_PK
                           , P.WF_PROC_DOC_ID
                           , PDFN.WF_DESC_TXT
                           , U.WF_USR_ACCS_CANC_FLG
                           , WI.WF_WRK_ITEM_NM
                           , TB.WF_TOKEN_BIZ_PK
                           , P.WF_PROC_PK
                           , P.WF_PROC_STS_CD
                           , WI.FROM_USR_ID
                           , WI.FROM_WF_USR_GRP_DESC_TXT
                           , WI.FROM_WF_USR_GRP_NM
                           , WI.ACT_WF_COND_NM
                           , WI.WF_START_TS
                           , U.WF_USR_DLGT_FLG
                           , WI.WF_DUE_TS
                           , WI.WF_CMNT_TXT
                           , WI.TO_USR_ID
                           , WI.LEAVE_WF_COND_NM
                           , WI.WF_END_TS
                           , WI.WF_LEAVE_EVENT_AUTO_FLG
                           , TB.WF_BIZ_ATTRB_TXT_01
                           , TB.WF_BIZ_ATTRB_TXT_02
                           , TB.WF_BIZ_ATTRB_TXT_03
                           , TB.WF_BIZ_ATTRB_TXT_04
                           , TB.WF_BIZ_ATTRB_TXT_05
                           , TB.WF_BIZ_ATTRB_LB_TXT_01
                           , TB.WF_BIZ_ATTRB_LB_TXT_02
                           , TB.WF_BIZ_ATTRB_LB_TXT_03
                           , TB.WF_BIZ_ATTRB_LB_TXT_04
                           , TB.WF_BIZ_ATTRB_LB_TXT_05
                           , TB.WF_BIZ_SCR_ID
                           , TB.WF_BIZ_SCR_ID_01
                           , TB.WF_BIZ_SCR_ID_02
                           , TB.WF_BIZ_SCR_ID_03
                           , TB.WF_BIZ_SCR_ID_04
                           , TB.WF_BIZ_SCR_ID_05
                         FROM
                           WF_WRK_ITEM WI
                           , WF_PROC P
                           , WF_USR U
                           , WF_TOKEN_BIZ TB
                           , WF_PROC_DFN PDFN
                           , ( 
                             SELECT
                               TOU.WF_USR_ID
                               , PD.WF_BIZ_APP_ID 
                             FROM
                               WF_DLGT_USR DU
                               , WF_USR DLU
                               , WF_USR TOU
                               , WF_PROC_DFN PD
                               , WF_PROC_DLGT_USR_RELN PDUR 
                             WHERE
                               DU.TO_WF_USR_PK = DLU.WF_USR_PK 
                               AND DU.WF_DLGT_USR_PK = PDUR.WF_DLGT_USR_PK 
                               AND PDUR.WF_PROC_DFN_PK = PD.WF_PROC_DFN_PK 
                               AND DLU.WF_USR_ID = #usrId#
                               AND TOU.WF_USR_PK =  DU.FROM_WF_USR_PK
                               AND #curDt# &gt;= DU.EFF_FROM_DT || DU.EFF_FROM_HOUR_MN 
                               AND #curDt# &lt;= DU.EFF_THRU_DT || DU.EFF_THRU_HOUR_MN
                               AND DU.GLBL_CMPY_CD = #glblCmpyCd#
                               AND DLU.GLBL_CMPY_CD = #glblCmpyCd# 
                               AND PD.GLBL_CMPY_CD = #glblCmpyCd#
                               AND PDUR.GLBL_CMPY_CD = #glblCmpyCd#
                               AND TOU.GLBL_CMPY_CD = #glblCmpyCd#
                               AND DU.EZCANCELFLAG = '0' 
                               AND DLU.EZCANCELFLAG = '0' 
                               AND PD.EZCANCELFLAG = '0' 
                               AND PDUR.EZCANCELFLAG = '0'
                               AND TOU.EZCANCELFLAG = '0' 
                             GROUP BY
                               TOU.WF_USR_ID
                               , PD.WF_BIZ_APP_ID
                           ) DWU2 
                         WHERE
                           WI.WF_PROC_PK = P.WF_PROC_PK 
                           AND WI.WF_WRK_ITEM_PK = U.WF_WRK_ITEM_PK
                           AND WI.WF_TOKEN_BIZ_PK = TB.WF_TOKEN_BIZ_PK
                           AND P.WF_PROC_NM = PDFN.WF_PROC_NM
                           AND WI.EZCANCELFLAG = '0'
                           AND P.EZCANCELFLAG = '0'
                           AND U.EZCANCELFLAG = '0'
                           AND TB.EZCANCELFLAG = '0' 
                           AND PDFN.EZCANCELFLAG = '0'
                           AND WI.GLBL_CMPY_CD = #glblCmpyCd# 
                           AND P.GLBL_CMPY_CD = #glblCmpyCd# 
                           AND U.GLBL_CMPY_CD = #glblCmpyCd#
                           AND TB.GLBL_CMPY_CD = #glblCmpyCd#
                           AND PDFN.GLBL_CMPY_CD = #glblCmpyCd#
                           AND U.WF_USR_ID IN (DWU2.WF_USR_ID)
                           AND DWU2.WF_BIZ_APP_ID IN (P.WF_PROC_NM, 'ALL') 
                           <isNotNull property = "wfProcPk" > 
                           AND P.WF_PROC_PK = #wfProcPk#
                           </isNotNull>
                           <isNotNull property = "wfProcDocId" > 
                           AND UPPER(P.WF_PROC_DOC_ID) = UPPER(#wfProcDocId#)
                           </isNotNull>
                           <isNotNull property = "wfProcNm" > 
                           AND P.WF_PROC_NM = #wfProcNm#
                           </isNotNull>
                           <isNotNull property = "wfWrkItemNm" > 
                           AND WI.WF_WRK_ITEM_NM LIKE #wfWrkItemNm#
                           </isNotNull> 
                           AND
                           <!-- View -->
                           U.WF_USR_ACCS_VIS_FLG = 'Y'
                           AND
                           WI.WF_HUMAN_TASK_FLG ='Y'

                           <!-- Type -->
                           AND ( 
                             1 = 0 

                             <!-- 
                               Approve
                             -->
                             <isNotNull property = "xxWfAprChkFlg" > 
                             OR
                             ( 
                               U.WF_USR_ACCS_APVL_FLG = 'Y'
                               AND (WI.WF_WRK_ITEM_STS_CD = '02')
                               AND U.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                             ) 
                             OR
                             <!--Cancel-->
                             ( 
                               U.WF_USR_ACCS_CANC_FLG = 'Y'
                               AND WI.LEAVE_WF_COND_NM = 'SUBMIT'
                             )
                             </isNotNull>

                             <isNotNull property = "xxWfSubChkFlg" > 
                             OR
                             (
                               U.WF_USR_ACCS_APVL_SUB_FLG = 'Y'
                               AND (WI.WF_WRK_ITEM_STS_CD = '02')
                             )
                             </isNotNull>

                             <!-- 
                               FYI
                             -->
                             <isNotNull property = "xxWfFyiChkFlg" > 
                             OR
                             ( 
                               ( 
                                 EXISTS
                                 ( 
                                   SELECT
                                     NCL.WF_WRK_ITEM_PK
                                   FROM
                                     WF_NTFY_CONF_LOG NCL
                                   WHERE
                                     NCL.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                                     AND NCL.WF_NTFY_EVENT_TP_CD IN ($wfNtfyEventTpCdList$) 
                                     AND NCL.WF_NTFY_ACT_TP_CD = #wfNtfyActTpCd#
                                     AND NCL.WF_USR_PK = U.WF_USR_PK
                                     AND NCL.WF_CONF_TS IS NULL 
                                     AND NCL.GLBL_CMPY_CD = #glblCmpyCd#
                                     AND NCL.EZCANCELFLAG = '0'
                                 )
                               ) 
                               AND ( 
                                 CASE 
                                   WHEN P.FYI_HLD_QTY = 0 
                                   THEN 1 
                                     WHEN WI.WF_FYI_HLD_TS &gt;= TO_CHAR(CURRENT_TIMESTAMP, 'YYYYMMDD') 
                                   THEN 1 
                                   ELSE 0 
                                   END
                               ) = 1
                             ) 
                             </isNotNull>

                             <!-- 
                               FYI(Confirmed)
                             -->
                             <isNotNull property = "xxWfConfFlg" > 
                             OR
                             ( 
                               ( 
                                 EXISTS
                                 ( 
                                   SELECT
                                     NCL.WF_WRK_ITEM_PK 
                                   FROM
                                     WF_NTFY_CONF_LOG NCL
                                   WHERE
                                     NCL.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                                     AND NCL.WF_NTFY_EVENT_TP_CD IN ($wfNtfyEventTpCdList$) 
                                     AND NCL.WF_NTFY_ACT_TP_CD = #wfNtfyActTpCd# 
                                     AND NCL.WF_USR_PK = U.WF_USR_PK
                                     AND NCL.WF_CONF_TS IS NOT NULL
                                     AND NCL.GLBL_CMPY_CD = #glblCmpyCd# 
                                     AND NCL.EZCANCELFLAG = '0'
                                 )
                               ) 
                               AND ( 
                                 CASE 
                                   WHEN P.FYI_HLD_QTY = 0 
                                   THEN 1 
                                   WHEN WI.WF_FYI_HLD_TS &gt;= TO_CHAR(CURRENT_TIMESTAMP, 'YYYYMMDD') 
                                   THEN 1 
                                   ELSE 0 
                                   END
                               ) = 1
                             )
                             </isNotNull>
                           )

                           <!-- 
                             Subject
                           -->
                           <isNotNull property = "wfBizAttrbTxt" > 
                           AND EXISTS( 
                                SELECT
                                    1 
                                FROM
                                  WF_TOKEN_BIZ TBI 
                                WHERE
                                  TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                  AND TB.WF_BIZ_ATTRB_TXT_01 LIKE #wfBizAttrbTxt# 
                                UNION ALL 
                                SELECT
                                    1 
                                FROM
                                  WF_TOKEN_BIZ TBI 
                                WHERE
                                  TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                  AND TB.WF_BIZ_ATTRB_TXT_02 LIKE #wfBizAttrbTxt# 
                                UNION ALL 
                                SELECT
                                    1 
                                FROM
                                  WF_TOKEN_BIZ TBI 
                                WHERE
                                  TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                  AND TB.WF_BIZ_ATTRB_TXT_03 LIKE #wfBizAttrbTxt# 
                                UNION ALL 
                                SELECT
                                    1 
                                FROM
                                  WF_TOKEN_BIZ TBI 
                                WHERE
                                  TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                  AND TB.WF_BIZ_ATTRB_TXT_04 LIKE #wfBizAttrbTxt#  
                                UNION ALL 
                                SELECT
                                    1 
                                FROM
                                  WF_TOKEN_BIZ TBI 
                                WHERE
                                  TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                  AND TB.WF_BIZ_ATTRB_TXT_05 LIKE #wfBizAttrbTxt# 
                           )
                           </isNotNull>

                           <!-- 
                             Start Date Start
                           -->
                           <isNotNull property = "xxFromDt_SS" > 
                           AND WI.WF_START_TS &gt;= #xxFromDt_SS#
                           </isNotNull>

                           <!-- 
                             Start Date End
                           -->
                           <isNotNull property = "xxThruDt_SE" > 
                           AND WI.WF_START_TS &lt;= #xxThruDt_SE#
                           </isNotNull>

                           <!-- 
                             From Users
                           -->
                           <isNotNull property = "xxGrpFlg_F1" > 
                           AND ( 
                             WI.FROM_USR_ID = #xxGrpFlg_F1# 
                             OR WI.FROM_WF_USR_GRP_NM = #xxGrpFlg_F1# 
                           )
                           </isNotNull>
                           <isNotNull property = "xxGrpFlg_F2" > 
                           AND WI.FROM_WF_USR_GRP_NM = #xxGrpFlg_F2# 
                           </isNotNull>
                           <isNotNull property = "xxGrpFlg_F3" > 
                           AND WI.FROM_USR_ID = #xxGrpFlg_F3#
                           </isNotNull>

                           <!-- 
                             To Users
                           -->
                           <isNotNull property = "xxGrpFlg_T" >
                           AND EXISTS (
                             <isNotNull property = "xxGrpFlg_T1" >
                             SELECT
                                1
                             FROM
                               WF_USR IUT
                             WHERE
                               IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                               AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                               AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                               AND IUT.WF_USR_GRP_NM = #xxGrpFlg_T1#
                               AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                               AND IUT.EZCANCELFLAG = '0'
                             UNION ALL
                             SELECT
                                1
                             FROM
                               WF_USR IUT
                             WHERE
                               IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                               AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                               AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                               AND IUT.WF_USR_ID = #xxGrpFlg_T1#
                               AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                               AND IUT.EZCANCELFLAG = '0'
                             </isNotNull>
                             <isNotNull property = "xxGrpFlg_T2" >
                             SELECT
                                1
                             FROM
                               WF_USR IUT
                             WHERE
                               IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                               AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                               AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                               AND IUT.WF_USR_GRP_NM = #xxGrpFlg_T2#
                               AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                               AND IUT.EZCANCELFLAG = '0'
                             <!-- Dummy SQL (make it same execution plan as 'ALL') -->
                             UNION ALL
                             SELECT
                                1
                             FROM
                               WF_USR IUT
                             WHERE
                               IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                               AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                               AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                               AND IUT.WF_USR_ID = 'NOT_FOUND_USER'
                               AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                               AND IUT.EZCANCELFLAG = '0'
                             </isNotNull>
                             <isNotNull property = "xxGrpFlg_T3" >
                             SELECT
                                1
                             FROM
                               WF_USR IUT
                             WHERE
                               IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                               AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                               AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                               AND IUT.WF_USR_ID = #xxGrpFlg_T3#
                               AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                               AND IUT.EZCANCELFLAG = '0'
                             </isNotNull>
                           )
                           </isNotNull>

                           <!-- 
                            Due Date Start
                           -->
                           <isNotNull property = "xxFromDt_DS" > 
                           AND WI.WF_DUE_TS &gt;= #xxFromDt_DS# 
                           </isNotNull>

                           <!--
                            Due Date End
                           -->
                           <isNotNull property = "xxThruDt_DE" > 
                           AND WI.WF_DUE_TS &lt; = #xxThruDt_DE# 
                           </isNotNull>

                           ORDER BY
                            WI.WF_PROC_PK
                            , WI.WF_WRK_ITEM_PK
                            , WI.WF_START_TS
                         ) DLE_V
                         WHERE
                           ROWNUM &lt;= #maxRow#
                        ) TMP
                      , WF_USR U
                    WHERE
                      U.WF_WRK_ITEM_PK(+) = TMP.WF_WRK_ITEM_PK
                      AND U.GLBL_CMPY_CD(+) = #glblCmpyCd#
                      AND U.EZCANCELFLAG(+) = '0'
                      AND U.WF_USR_ACCS_APVL_FLG(+) = 'Y'
                      AND U.WF_USR_ACCS_APVL_SUB_FLG(+) = 'N'
                  ) TMP2
                GROUP BY
                  TMP2.PRI
                  , TMP2.WF_USR_ACCS_APVL_FLG
                  , TMP2.WF_USR_ACCS_ACT_RASG_FLG
                  , TMP2.WF_PROC_NM
                  , TMP2.WF_WRK_ITEM_STS_CD
                  , TMP2.WF_WRK_ITEM_PK
                  , TMP2.WF_USR_ID
                  , TMP2.WF_USR_PK
                  , TMP2.WF_PROC_DOC_ID
                  , TMP2.WF_DESC_TXT
                  , TMP2.WF_USR_ACCS_CANC_FLG
                  , TMP2.WF_WRK_ITEM_NM
                  , TMP2.WF_TOKEN_BIZ_PK
                  , TMP2.WF_PROC_PK
                  , TMP2.WF_PROC_STS_CD
                  , TMP2.FROM_USR_ID
                  , TMP2.FROM_WF_USR_GRP_DESC_TXT
                  , TMP2.FROM_WF_USR_GRP_NM
                  , TMP2.ACT_WF_COND_NM
                  , TMP2.WF_START_TS
                  , TMP2.WF_USR_DLGT_FLG
                  , TMP2.WF_DUE_TS
                  , TMP2.TO_USR_ID
                  , TMP2.LEAVE_WF_COND_NM
                  , TMP2.WF_END_TS
                  , TMP2.WF_LEAVE_EVENT_AUTO_FLG
                  , TMP2.WF_BIZ_ATTRB_TXT_01
                  , TMP2.WF_BIZ_ATTRB_TXT_02
                  , TMP2.WF_BIZ_ATTRB_TXT_03
                  , TMP2.WF_BIZ_ATTRB_TXT_04
                  , TMP2.WF_BIZ_ATTRB_TXT_05
                  , TMP2.WF_BIZ_ATTRB_LB_TXT_01
                  , TMP2.WF_BIZ_ATTRB_LB_TXT_02
                  , TMP2.WF_BIZ_ATTRB_LB_TXT_03
                  , TMP2.WF_BIZ_ATTRB_LB_TXT_04
                  , TMP2.WF_BIZ_ATTRB_LB_TXT_05
    </isNotNull> 

    <isNotNull property = "PROC_STS_COMPLETE"> 
     <isNotNull property = "PROC_STS_ACTIVE" > 
     UNION ALL
     </isNotNull>
                SELECT
                  TMP2.PRI
                  , TMP2.WF_USR_ACCS_APVL_FLG
                  , TMP2.WF_USR_ACCS_ACT_RASG_FLG
                  , TMP2.WF_PROC_NM
                  , TMP2.WF_WRK_ITEM_STS_CD
                  , TMP2.WF_WRK_ITEM_PK
                  , TMP2.WF_USR_ID
                  , TMP2.WF_USR_PK
                  , TMP2.WF_PROC_DOC_ID
                  , TMP2.WF_DESC_TXT
                  , TMP2.WF_USR_ACCS_CANC_FLG
                  , TMP2.WF_WRK_ITEM_NM
                  , TMP2.WF_TOKEN_BIZ_PK
                  , TMP2.WF_PROC_PK
                  , TMP2.WF_PROC_STS_CD
                  , TMP2.FROM_USR_ID
                  , TMP2.FROM_WF_USR_GRP_DESC_TXT
                  , TMP2.FROM_WF_USR_GRP_NM
                  , TMP2.ACT_WF_COND_NM
                  , TMP2.WF_START_TS
                  , TMP2.WF_USR_DLGT_FLG
                  , TMP2.WF_DUE_TS
                  , TMP2.TO_USR_ID
                  , TMP2.LEAVE_WF_COND_NM
                  , TMP2.WF_END_TS
                  , TMP2.WF_LEAVE_EVENT_AUTO_FLG
                  , TMP2.WF_BIZ_ATTRB_TXT_01
                  , TMP2.WF_BIZ_ATTRB_TXT_02
                  , TMP2.WF_BIZ_ATTRB_TXT_03
                  , TMP2.WF_BIZ_ATTRB_TXT_04
                  , TMP2.WF_BIZ_ATTRB_TXT_05
                  , TMP2.WF_BIZ_ATTRB_LB_TXT_01
                  , TMP2.WF_BIZ_ATTRB_LB_TXT_02
                  , TMP2.WF_BIZ_ATTRB_LB_TXT_03
                  , TMP2.WF_BIZ_ATTRB_LB_TXT_04
                  , TMP2.WF_BIZ_ATTRB_LB_TXT_05
                  , LISTAGG(TMP2.TO_WF_USR_ID, ',') WITHIN GROUP (order by null) TO_USRID
                  <!-- , LISTAGG(TMP2.WFUSRNM, ',') WITHIN GROUP (order by null) TO_WFUSRNM
                  , MAX(TMP2.ISADMIN) TO_ISADMIN
                  , MAX(TMP2.ISGROUP) TO_ISGROUP -->
                  , LISTAGG(TMP2.WFUSRNM, '","') WITHIN GROUP (order by null) TO_WFUSRNM
                  , LISTAGG(TMP2.ISADMIN, ',') WITHIN GROUP (order by null) TO_ISADMIN
                  , LISTAGG(TMP2.ISGROUP, ',') WITHIN GROUP (order by null) TO_ISGROUP
                FROM
                  ( -- TMP2
                    SELECT
                      TMP.PRI
                      , TMP.WF_USR_ACCS_APVL_FLG
                      , TMP.WF_USR_ACCS_ACT_RASG_FLG
                      , TMP.WF_PROC_NM
                      , TMP.WF_WRK_ITEM_STS_CD
                      , TMP.WF_WRK_ITEM_PK
                      , TMP.WF_USR_ID
                      , TMP.WF_USR_PK
                      , TMP.WF_PROC_DOC_ID
                      , TMP.WF_DESC_TXT
                      , TMP.WF_USR_ACCS_CANC_FLG
                      , TMP.WF_WRK_ITEM_NM
                      , TMP.WF_TOKEN_BIZ_PK
                      , TMP.WF_PROC_PK
                      , TMP.WF_PROC_STS_CD
                      , TMP.FROM_USR_ID
                      , TMP.FROM_WF_USR_GRP_DESC_TXT
                      , TMP.FROM_WF_USR_GRP_NM
                      , TMP.ACT_WF_COND_NM
                      , TMP.WF_START_TS
                      , TMP.WF_USR_DLGT_FLG
                      , TMP.WF_DUE_TS
                      , TMP.TO_USR_ID
                      , TMP.LEAVE_WF_COND_NM
                      , TMP.WF_END_TS
                      , TMP.WF_LEAVE_EVENT_AUTO_FLG
                      , TMP.WF_BIZ_ATTRB_TXT_01
                      , TMP.WF_BIZ_ATTRB_TXT_02
                      , TMP.WF_BIZ_ATTRB_TXT_03
                      , TMP.WF_BIZ_ATTRB_TXT_04
                      , TMP.WF_BIZ_ATTRB_TXT_05
                      , TMP.WF_BIZ_ATTRB_LB_TXT_01
                      , TMP.WF_BIZ_ATTRB_LB_TXT_02
                      , TMP.WF_BIZ_ATTRB_LB_TXT_03
                      , TMP.WF_BIZ_ATTRB_LB_TXT_04
                      , TMP.WF_BIZ_ATTRB_LB_TXT_05
                      , U.WF_USR_ID TO_WF_USR_ID
                      , CASE WHEN EXISTS(
                        SELECT
                          U.WF_USR_ID
                        FROM
                          WF_UTIL_USR_GRP UG
                        WHERE
                          UG.USR_ID = U.WF_USR_ID
                          AND UG.WF_BIZ_APP_ID='SYSTEM'
                          AND UG.EZCANCELFLAG = '0'
                          AND UG.GLBL_CMPY_CD = #glblCmpyCd#
                        )
                         THEN '1'
                         ELSE '0'
                         END ISADMIN
                      , CASE 
                         WHEN U.WF_USR_GRP_DESC_TXT IS NOT NULL THEN
                            U.WF_USR_GRP_DESC_TXT
                         WHEN U.WF_USR_GRP_NM IS NOT NULL THEN
                            U.WF_USR_GRP_NM
                         ELSE
                            U.WF_USR_ID || ' ' ||
                            (SELECT
                              P.FIRST_NM || ' ' || P.LAST_NM
                                FROM
                                  AUTH_PSN P 
                                WHERE
                                  P.USR_NM       = U.WF_USR_ID
                                  AND  P.GLBL_CMPY_CD = #glblCmpyCd#
                                  AND  P.EZCANCELFLAG = '0'
                                  AND ROWNUM = 1) 
                        END WFUSRNM
                      , CASE 
                         WHEN ((U.WF_USR_GRP_DESC_TXT IS NOT NULL) OR (U.WF_USR_GRP_NM IS NOT NULL)) THEN '1'
                         ELSE  '0'
                        END ISGROUP
                    FROM
                      ( -- TMP
                        SELECT
                          CMP_V.PRI
                          , CMP_V.WF_USR_ACCS_APVL_FLG
                          , CMP_V.WF_USR_ACCS_ACT_RASG_FLG
                          , CMP_V.WF_PROC_NM
                          , CMP_V.WF_WRK_ITEM_STS_CD
                          , CMP_V.WF_WRK_ITEM_PK
                          , CMP_V.WF_USR_ID
                          , CMP_V.WF_USR_PK
                          , CMP_V.WF_PROC_DOC_ID
                          , CMP_V.WF_DESC_TXT
                          , CMP_V.WF_USR_ACCS_CANC_FLG
                          , CMP_V.WF_WRK_ITEM_NM
                          , CMP_V.WF_TOKEN_BIZ_PK
                          , CMP_V.WF_PROC_PK
                          , CMP_V.WF_PROC_STS_CD
                          , CMP_V.FROM_USR_ID
                          , CMP_V.FROM_WF_USR_GRP_DESC_TXT
                          , CMP_V.FROM_WF_USR_GRP_NM
                          , CMP_V.ACT_WF_COND_NM
                          , CMP_V.WF_START_TS
                          , CMP_V.WF_USR_DLGT_FLG
                          , CMP_V.WF_DUE_TS
                          , CMP_V.WF_CMNT_TXT
                          , CMP_V.TO_USR_ID
                          , CMP_V.LEAVE_WF_COND_NM
                          , CMP_V.WF_END_TS
                          , CMP_V.WF_LEAVE_EVENT_AUTO_FLG
                          , CMP_V.WF_BIZ_ATTRB_TXT_01
                          , CMP_V.WF_BIZ_ATTRB_TXT_02
                          , CMP_V.WF_BIZ_ATTRB_TXT_03
                          , CMP_V.WF_BIZ_ATTRB_TXT_04
                          , CMP_V.WF_BIZ_ATTRB_TXT_05
                          , CMP_V.WF_BIZ_ATTRB_LB_TXT_01
                          , CMP_V.WF_BIZ_ATTRB_LB_TXT_02
                          , CMP_V.WF_BIZ_ATTRB_LB_TXT_03
                          , CMP_V.WF_BIZ_ATTRB_LB_TXT_04
                          , CMP_V.WF_BIZ_ATTRB_LB_TXT_05
                          , CMP_V.WF_BIZ_SCR_ID
                          , CMP_V.WF_BIZ_SCR_ID_01
                          , CMP_V.WF_BIZ_SCR_ID_02
                          , CMP_V.WF_BIZ_SCR_ID_03
                          , CMP_V.WF_BIZ_SCR_ID_04
                          , CMP_V.WF_BIZ_SCR_ID_05
                        FROM
                        (
                          SELECT
                            1 PRI
                            , U.WF_USR_ACCS_APVL_FLG
                            , U.WF_USR_ACCS_ACT_RASG_FLG
                            , P.WF_PROC_NM
                            , WI.WF_WRK_ITEM_STS_CD
                            , WI.WF_WRK_ITEM_PK
                            , U.WF_USR_ID
                            , U.WF_USR_PK
                            , P.WF_PROC_DOC_ID
                            , PDFN.WF_DESC_TXT
                            , U.WF_USR_ACCS_CANC_FLG
                            , WI.WF_WRK_ITEM_NM
                            , TB.WF_TOKEN_BIZ_PK
                            , P.WF_PROC_PK
                            , P.WF_PROC_STS_CD
                            , WI.FROM_USR_ID
                            , WI.FROM_WF_USR_GRP_DESC_TXT
                            , WI.FROM_WF_USR_GRP_NM
                            , WI.ACT_WF_COND_NM
                            , WI.WF_START_TS
                            , U.WF_USR_DLGT_FLG
                            , WI.WF_DUE_TS
                            , WI.WF_CMNT_TXT
                            , WI.TO_USR_ID
                            , WI.LEAVE_WF_COND_NM
                            , WI.WF_END_TS
                            , WI.WF_LEAVE_EVENT_AUTO_FLG
                            , TB.WF_BIZ_ATTRB_TXT_01
                            , TB.WF_BIZ_ATTRB_TXT_02
                            , TB.WF_BIZ_ATTRB_TXT_03
                            , TB.WF_BIZ_ATTRB_TXT_04
                            , TB.WF_BIZ_ATTRB_TXT_05
                            , TB.WF_BIZ_ATTRB_LB_TXT_01
                            , TB.WF_BIZ_ATTRB_LB_TXT_02
                            , TB.WF_BIZ_ATTRB_LB_TXT_03
                            , TB.WF_BIZ_ATTRB_LB_TXT_04
                            , TB.WF_BIZ_ATTRB_LB_TXT_05
                            , TB.WF_BIZ_SCR_ID
                            , TB.WF_BIZ_SCR_ID_01
                            , TB.WF_BIZ_SCR_ID_02
                            , TB.WF_BIZ_SCR_ID_03
                            , TB.WF_BIZ_SCR_ID_04
                            , TB.WF_BIZ_SCR_ID_05
                          FROM
                            WF_WRK_ITEM_CPLT WI
                            , WF_PROC_CPLT P
                            , WF_USR_CPLT U
                            , WF_TOKEN_BIZ_CPLT TB
                            , WF_PROC_DFN PDFN
                          WHERE
                            WI.WF_PROC_PK = P.WF_PROC_PK 
                            AND WI.WF_WRK_ITEM_PK = U.WF_WRK_ITEM_PK
                            AND WI.WF_TOKEN_BIZ_PK = TB.WF_TOKEN_BIZ_PK
                            AND P.WF_PROC_NM = PDFN.WF_PROC_NM
                            AND WI.EZCANCELFLAG = '0'
                            AND P.EZCANCELFLAG = '0'
                            AND U.EZCANCELFLAG = '0'
                            AND TB.EZCANCELFLAG = '0'
                            AND PDFN.EZCANCELFLAG = '0'
                            AND WI.GLBL_CMPY_CD = #glblCmpyCd# 
                            AND P.GLBL_CMPY_CD = #glblCmpyCd# 
                            AND U.GLBL_CMPY_CD = #glblCmpyCd#
                            AND TB.GLBL_CMPY_CD = #glblCmpyCd#
                            AND PDFN.GLBL_CMPY_CD = #glblCmpyCd#
                            AND U.WF_USR_ID = #usrId# 
                            <isNotNull property = "wfProcPk" > 
                            AND P.WF_PROC_PK = #wfProcPk#
                            </isNotNull>
                            <isNotNull property = "wfProcDocId" > 
                            AND UPPER(P.WF_PROC_DOC_ID) = UPPER(#wfProcDocId#)
                            </isNotNull>
                            <isNotNull property = "wfProcNm" > 
                            AND P.WF_PROC_NM = #wfProcNm#
                            </isNotNull>
                            <isNotNull property = "wfWrkItemNm" > 
                            AND WI.WF_WRK_ITEM_NM LIKE #wfWrkItemNm#
                            </isNotNull> 
                            AND
                            <!-- View -->
                            U.WF_USR_ACCS_VIS_FLG = 'Y'
                            AND
                            WI.WF_HUMAN_TASK_FLG ='Y'

                            <!-- Type -->
                            AND ( 
                              1 = 0 

                              <!-- 
                                Approve
                              -->
                              <isNotNull property = "xxWfAprChkFlg" > 
                              OR 
                              (
                                U.WF_USR_ACCS_APVL_FLG = 'Y'
                                AND WI.WF_WRK_ITEM_STS_CD IN ('03', '04')
                                AND U.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                              )
                              OR
                              <!--Cancel-->
                              ( 
                                U.WF_USR_ACCS_CANC_FLG = 'Y'
                                AND WI.LEAVE_WF_COND_NM = 'SUBMIT'
                              )
                              </isNotNull>

                              <isNotNull property = "xxWfSubChkFlg" > 
                              OR
                              (
                                U.WF_USR_ACCS_APVL_SUB_FLG = 'Y'
                                AND WI.WF_WRK_ITEM_STS_CD IN ('03', '04')
                              )
                              </isNotNull>

                              <isNotNull property = "xxWfVisChkFlg" > 
                              OR
                              (
                                U.WF_USR_ACCS_REJ_FLG = 'Y'
                                AND (WI.WF_WRK_ITEM_STS_CD IN ('03', '04')
                                     AND WI.LEAVE_WF_COND_NM = 'REJECT')
                              )
                              </isNotNull>

                              <!-- 
                                FYI
                              -->
                              <isNotNull property = "xxWfFyiChkFlg" > 
                              OR
                              ( 
                                ( 
                                  EXISTS
                                  ( 
                                    SELECT
                                      NCL.WF_WRK_ITEM_PK
                                    FROM
                                      WF_NTFY_CONF_LOG_CPLT NCL 
                                    WHERE
                                      NCL.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK 
                                      AND NCL.WF_NTFY_EVENT_TP_CD IN ($wfNtfyEventTpCdList$) 
                                      AND NCL.WF_NTFY_ACT_TP_CD = #wfNtfyActTpCd# 
                                      AND NCL.WF_USR_PK = U.WF_USR_PK
                                      AND NCL.WF_CONF_TS IS NULL 
                                      AND NCL.GLBL_CMPY_CD = #glblCmpyCd# 
                                      AND NCL.EZCANCELFLAG = '0'
                                  )
                                ) 
                                AND ( 
                                  CASE 
                                    WHEN P.FYI_HLD_QTY = 0 
                                    THEN 1 
                                    WHEN WI.WF_FYI_HLD_TS &gt;= TO_CHAR(CURRENT_TIMESTAMP, 'YYYYMMDD') 
                                    THEN 1 
                                    ELSE 0 
                                    END
                                ) = 1
                              ) 
                              </isNotNull>

                              <isNotNull property = "xxWfVisChkFlg" > 
                              OR
                              (
                                U.WF_USR_ACCS_REJ_FLG = 'Y'
                                AND (WI.WF_WRK_ITEM_STS_CD IN ('03', '04')
                                AND WI.LEAVE_WF_COND_NM = 'REJECT')
                              )
                              </isNotNull>

                              <!-- 
                                FYI(Confirmed)
                              -->
                              <isNotNull property = "xxWfConfFlg" > 
                              OR
                              ( 
                                ( 
                                  EXISTS
                                  ( 
                                    SELECT
                                      NCL.WF_WRK_ITEM_PK 
                                    FROM
                                      WF_NTFY_CONF_LOG_CPLT NCL
                                    WHERE
                                      NCL.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK 
                                      AND NCL.WF_NTFY_EVENT_TP_CD IN ($wfNtfyEventTpCdList$) 
                                      AND NCL.WF_NTFY_ACT_TP_CD = #wfNtfyActTpCd# 
                                      AND NCL.WF_USR_PK = U.WF_USR_PK
                                      AND NCL.WF_CONF_TS IS NOT NULL 
                                      AND NCL.GLBL_CMPY_CD = #glblCmpyCd# 
                                      AND NCL.EZCANCELFLAG = '0'
                                  )
                                ) 
                                AND ( 
                                  CASE 
                                    WHEN P.FYI_HLD_QTY = 0 
                                    THEN 1 
                                    WHEN WI.WF_FYI_HLD_TS &gt;= TO_CHAR(CURRENT_TIMESTAMP, 'YYYYMMDD') 
                                    THEN 1 
                                    ELSE 0 
                                    END
                                ) = 1
                              )
                              </isNotNull>
                            )

                            <!-- 
                              Subject
                            -->
                            <isNotNull property = "wfBizAttrbTxt" > 
                            AND EXISTS( 
                                 SELECT
                                     1 
                                 FROM
                                   WF_TOKEN_BIZ_CPLT TBI 
                                 WHERE
                                   TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                   AND TB.WF_BIZ_ATTRB_TXT_01 LIKE #wfBizAttrbTxt# 
                                 UNION ALL 
                                 SELECT
                                     1 
                                 FROM
                                   WF_TOKEN_BIZ_CPLT TBI 
                                 WHERE
                                   TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                   AND TB.WF_BIZ_ATTRB_TXT_02 LIKE #wfBizAttrbTxt# 
                                 UNION ALL 
                                 SELECT
                                     1 
                                 FROM
                                   WF_TOKEN_BIZ_CPLT TBI 
                                 WHERE
                                   TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                   AND TB.WF_BIZ_ATTRB_TXT_03 LIKE #wfBizAttrbTxt# 
                                 UNION ALL 
                                 SELECT
                                     1 
                                 FROM
                                   WF_TOKEN_BIZ_CPLT TBI 
                                 WHERE
                                   TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                   AND TB.WF_BIZ_ATTRB_TXT_04 LIKE #wfBizAttrbTxt#  
                                 UNION ALL 
                                 SELECT
                                     1 
                                 FROM
                                   WF_TOKEN_BIZ_CPLT TBI 
                                 WHERE
                                   TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                   AND TB.WF_BIZ_ATTRB_TXT_05 LIKE #wfBizAttrbTxt# 
                            )
                            </isNotNull>

                            <!-- 
                              Start Date Start
                            -->
                            <isNotNull property = "xxFromDt_SS" > 
                            AND WI.WF_START_TS &gt;= #xxFromDt_SS#
                            </isNotNull>

                            <!-- 
                              Start Date End
                            -->
                            <isNotNull property = "xxThruDt_SE" > 
                            AND WI.WF_START_TS &lt;= #xxThruDt_SE#
                            </isNotNull>

                            <!-- 
                              From Users
                            -->
                            <isNotNull property = "xxGrpFlg_F1" > 
                            AND ( 
                              WI.FROM_USR_ID = #xxGrpFlg_F1# 
                              OR WI.FROM_WF_USR_GRP_NM = #xxGrpFlg_F1# 
                            )
                            </isNotNull>
                            <isNotNull property = "xxGrpFlg_F2" > 
                            AND WI.FROM_WF_USR_GRP_NM = #xxGrpFlg_F2# 
                            </isNotNull>
                            <isNotNull property = "xxGrpFlg_F3" > 
                            AND WI.FROM_USR_ID = #xxGrpFlg_F3#
                            </isNotNull>

                            <!-- 
                              To Users
                            -->
                            <isNotNull property = "xxGrpFlg_T" >
                            AND EXISTS (
                              <isNotNull property = "xxGrpFlg_T1" >
                              SELECT
                                 1
                              FROM
                                WF_USR_CPLT IUT
                              WHERE
                                IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                                AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                                AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                                AND IUT.WF_USR_GRP_NM = #xxGrpFlg_T1#
                                AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                                AND IUT.EZCANCELFLAG = '0'
                              UNION ALL
                              SELECT
                                 1
                              FROM
                                WF_USR_CPLT IUT
                              WHERE
                                IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                                AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                                AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                                AND IUT.WF_USR_ID = #xxGrpFlg_T1#
                                AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                                AND IUT.EZCANCELFLAG = '0'
                              </isNotNull>
                              <isNotNull property = "xxGrpFlg_T2" >
                              SELECT
                                 1
                              FROM
                                WF_USR_CPLT IUT
                              WHERE
                                IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                                AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                                AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                                AND IUT.WF_USR_GRP_NM = #xxGrpFlg_T2#
                                AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                                AND IUT.EZCANCELFLAG = '0'
                              <!-- Dummy SQL (make it same execution plan as 'ALL') -->
                              UNION ALL
                              SELECT
                                 1
                              FROM
                                WF_USR_CPLT IUT
                              WHERE
                                IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                                AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                                AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                                AND IUT.WF_USR_ID = 'NOT_FOUND_USER'
                                AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                                AND IUT.EZCANCELFLAG = '0'
                              </isNotNull>
                              <isNotNull property = "xxGrpFlg_T3" >
                              SELECT
                                 1
                              FROM
                                WF_USR_CPLT IUT
                              WHERE
                                IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                                AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                                AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                                AND IUT.WF_USR_ID = #xxGrpFlg_T3#
                                AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                                AND IUT.EZCANCELFLAG = '0'
                              </isNotNull>
                            )
                            </isNotNull>
                            
                            <!-- 
                             Due Date Start
                            -->
                            <isNotNull property = "xxFromDt_DS" > 
                            AND WI.WF_DUE_TS &gt;= #xxFromDt_DS# 
                            </isNotNull>

                            <!--
                             Due Date End
                            -->
                            <isNotNull property = "xxThruDt_DE" > 
                            AND WI.WF_DUE_TS &lt; = #xxThruDt_DE# 
                            </isNotNull>
                        ORDER BY
                          WI.WF_PROC_PK
                          , WI.WF_WRK_ITEM_PK
                          , WI.WF_START_TS
                        ) CMP_V
                       WHERE
                        ROWNUM &lt;= #maxRow#
                      ) TMP
                      , WF_USR_CPLT U
                    WHERE
                      U.WF_WRK_ITEM_PK(+) = TMP.WF_WRK_ITEM_PK
                      AND U.GLBL_CMPY_CD(+) = #glblCmpyCd#
                      AND U.EZCANCELFLAG(+) = '0'
                      AND U.WF_USR_ACCS_APVL_FLG(+) = 'Y'
                      AND U.WF_USR_ACCS_APVL_SUB_FLG(+) = 'N'
                  ) TMP2
                GROUP BY
                  TMP2.PRI
                  , TMP2.WF_USR_ACCS_APVL_FLG
                  , TMP2.WF_USR_ACCS_ACT_RASG_FLG
                  , TMP2.WF_PROC_NM
                  , TMP2.WF_WRK_ITEM_STS_CD
                  , TMP2.WF_WRK_ITEM_PK
                  , TMP2.WF_USR_ID
                  , TMP2.WF_USR_PK
                  , TMP2.WF_PROC_DOC_ID
                  , TMP2.WF_DESC_TXT
                  , TMP2.WF_USR_ACCS_CANC_FLG
                  , TMP2.WF_WRK_ITEM_NM
                  , TMP2.WF_TOKEN_BIZ_PK
                  , TMP2.WF_PROC_PK
                  , TMP2.WF_PROC_STS_CD
                  , TMP2.FROM_USR_ID
                  , TMP2.FROM_WF_USR_GRP_DESC_TXT
                  , TMP2.FROM_WF_USR_GRP_NM
                  , TMP2.ACT_WF_COND_NM
                  , TMP2.WF_START_TS
                  , TMP2.WF_USR_DLGT_FLG
                  , TMP2.WF_DUE_TS
                  , TMP2.TO_USR_ID
                  , TMP2.LEAVE_WF_COND_NM
                  , TMP2.WF_END_TS
                  , TMP2.WF_LEAVE_EVENT_AUTO_FLG
                  , TMP2.WF_BIZ_ATTRB_TXT_01
                  , TMP2.WF_BIZ_ATTRB_TXT_02
                  , TMP2.WF_BIZ_ATTRB_TXT_03
                  , TMP2.WF_BIZ_ATTRB_TXT_04
                  , TMP2.WF_BIZ_ATTRB_TXT_05
                  , TMP2.WF_BIZ_ATTRB_LB_TXT_01
                  , TMP2.WF_BIZ_ATTRB_LB_TXT_02
                  , TMP2.WF_BIZ_ATTRB_LB_TXT_03
                  , TMP2.WF_BIZ_ATTRB_LB_TXT_04
                  , TMP2.WF_BIZ_ATTRB_LB_TXT_05
    </isNotNull>
            ) D_V 
            ORDER BY
              D_V.WF_PROC_PK
              , D_V.WF_WRK_ITEM_PK
              , D_V.PRI
       )
       WHERE
         ROWNUM &lt;= #maxRow#
    </statement>

    <statement id="getWorklistForAdminForCSVDownload" parameterClass="Map" resultClass="Map">

      SELECT
          XXWFAPRCHKFLG
          , XXWFFYICHKFLG
          , WFCANCCHKFLG
          , XXWFREASGCHKFLG
          , WFPROCDOCID
          , WFPROCNM
          , WFWRKITEMNM
          , WFWRKITEMSTSCD
          , WFTOKENBIZPK
          , WFPROCPK
          , WFWRKITEMPK
          , WFPROCSTSCD
          , FROMUSRID
          , ACTWFCONDNM
          , FROMUSRNM
          , WFSTARTTS
          , FROMUSER_ISADMIN
          , WF_USR_DLGT_FLG
          , WF_DUE_TS
          , WFUSRGRPNM_F
          , WFCMNTTXT
          , TOUSRID
          , TOUSRNM
          , TOUSER_ISADMIN
          , LEAVEWFCONDNM
          , WFENDTS
          , WFEVENTAUTOFLG
          , WF_BIZ_ATTRB_TXT_01
          , WF_BIZ_ATTRB_TXT_02
          , WF_BIZ_ATTRB_TXT_03
          , WF_BIZ_ATTRB_TXT_04
          , WF_BIZ_ATTRB_TXT_05
          , WF_BIZ_ATTRB_LB_TXT_01
          , WF_BIZ_ATTRB_LB_TXT_02
          , WF_BIZ_ATTRB_LB_TXT_03
          , WF_BIZ_ATTRB_LB_TXT_04
          , WF_BIZ_ATTRB_LB_TXT_05
          , TO_USRID
          , TO_WFUSRNM
          , TO_ISADMIN
          , TO_ISGROUP
      FROM
      (
          SELECT
            CASE 
              WHEN ( 
                  NOT EXISTS
                  ( 
                    SELECT
                      BC.WF_PROC_NM 
                    FROM
                      WF_BTN_CTRL BC 
                    WHERE
                      BC.WF_PROC_NM = D_V.WF_PROC_NM 
                      AND BC.WF_BTN_NM = 'btn4' 
                      AND BC.WF_BTN_STS_CD = '0' 
                      AND BC.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND BC.EZCANCELFLAG = '0'
                  )
                AND (D_V.WF_WRK_ITEM_STS_CD = '02')
              ) 
              THEN '1' 
              ELSE '0' 
              END xxWfAprChkFlg
           , CASE 
             WHEN ( 
               (
                 D_V.WF_PROC_STS_CD = '02'
                 AND 
                 EXISTS
                 ( 
                   SELECT
                     NCL.WF_WRK_ITEM_PK 
                   FROM
                     WF_NTFY_CONF_LOG NCL
                     , WF_USR NWU
                   WHERE
                     NCL.WF_WRK_ITEM_PK = D_V.WF_WRK_ITEM_PK 
                     AND NWU.WF_WRK_ITEM_PK = NCL.WF_WRK_ITEM_PK
                     AND NCL.WF_USR_PK = NWU.WF_USR_PK
                     AND NCL.WF_NTFY_EVENT_TP_CD IN ($wfNtfyEventTpCdList$) 
                     AND NCL.WF_NTFY_ACT_TP_CD = #wfNtfyActTpCd#
                     AND NWU.WF_USR_ID = #usrId#
                     AND NCL.WF_CONF_TS IS NULL 
                     AND NCL.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND NCL.EZCANCELFLAG = '0'
                     AND NWU.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND NWU.EZCANCELFLAG = '0'
                 )
               ) 
               AND (
                 NOT EXISTS
                 ( 
                   SELECT
                     BC.WF_PROC_NM
                   FROM
                     WF_BTN_CTRL BC 
                   WHERE
                     BC.WF_PROC_NM = D_V.WF_PROC_NM 
                     AND BC.WF_BTN_NM = 'btn2' 
                     AND BC.WF_BTN_STS_CD = '0' 
                     AND BC.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND BC.EZCANCELFLAG = '0'
                 )
               )
             ) 
             THEN '1' 
             WHEN ( 
               ( 
                 D_V.WF_PROC_STS_CD IN ('04','05','06')
                 AND 
                 EXISTS
                 ( 
                   SELECT
                     NCL.WF_WRK_ITEM_PK 
                   FROM
                     WF_NTFY_CONF_LOG_CPLT NCL
                     , WF_USR_CPLT NWU
                   WHERE
                     NCL.WF_WRK_ITEM_PK = D_V.WF_WRK_ITEM_PK 
                     AND NWU.WF_WRK_ITEM_PK = NCL.WF_WRK_ITEM_PK
                     AND NCL.WF_USR_PK = NWU.WF_USR_PK
                     AND NCL.WF_NTFY_EVENT_TP_CD IN ($wfNtfyEventTpCdList$) 
                     AND NCL.WF_NTFY_ACT_TP_CD = #wfNtfyActTpCd#
                     AND NWU.WF_USR_ID = #usrId#
                     AND NCL.WF_CONF_TS IS NULL 
                     AND NCL.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND NCL.EZCANCELFLAG = '0'
                     AND NWU.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND NWU.EZCANCELFLAG = '0'
                 )
               ) 
               AND (
                 NOT EXISTS
                 ( 
                   SELECT
                     BC.WF_PROC_NM
                   FROM
                     WF_BTN_CTRL BC 
                   WHERE
                     BC.WF_PROC_NM = D_V.WF_PROC_NM 
                     AND BC.WF_BTN_NM = 'btn2' 
                     AND BC.WF_BTN_STS_CD = '0' 
                     AND BC.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND BC.EZCANCELFLAG = '0'
                 )
               )
             ) 
             THEN '1' 
             ELSE '0' 
             END xxWfFyiChkFlg
           , CASE 
             WHEN ( 
               (
                 NOT EXISTS 
                 (
                   SELECT
                     BC.WF_PROC_NM
                   FROM
                     WF_BTN_CTRL BC 
                   WHERE
                     BC.WF_PROC_NM = D_V.WF_PROC_NM 
                     AND BC.WF_BTN_NM = 'btn7' 
                     AND BC.WF_BTN_STS_CD = '0' 
                     AND BC.GLBL_CMPY_CD = #glblCmpyCd# 
                     AND BC.EZCANCELFLAG = '0'
                 )
               ) 
               AND (D_V.WF_PROC_STS_CD IN ('01', '02', '03'))
             ) 
             THEN '1' 
             ELSE '0' 
             END WFCANCCHKFLG
            ,CASE 
              WHEN ( 
                (
                  NOT EXISTS
                  ( 
                    SELECT
                      BC.WF_PROC_NM 
                    FROM
                      WF_BTN_CTRL BC 
                    WHERE
                      BC.WF_PROC_NM = D_V.WF_PROC_NM 
                      AND BC.WF_BTN_NM = 'Reassign' 
                      AND BC.WF_BTN_STS_CD = '0' 
                      AND BC.GLBL_CMPY_CD = #glblCmpyCd# 
                      AND BC.EZCANCELFLAG = '0'
                  )
                ) 
                AND (D_V.WF_WRK_ITEM_STS_CD = '02')
              ) 
              THEN '1' 
              ELSE '0' 
              END XXWFREASGCHKFLG
            , D_V.WF_PROC_DOC_ID wfProcDocId
            , CASE WHEN D_V.WF_DESC_TXT IS NOT NULL THEN 
                D_V.WF_DESC_TXT 
              ELSE
                D_V.WF_PROC_NM 
              END wfProcNm
            , D_V.WF_WRK_ITEM_NM wfWrkItemNm
            , D_V.WF_WRK_ITEM_STS_CD wfWrkItemStsCd
            , D_V.WF_TOKEN_BIZ_PK wfTokenBizPk
            , D_V.WF_PROC_PK wfProcPk
            , D_V.WF_WRK_ITEM_PK wfWrkItemPk
            , D_V.WF_PROC_STS_CD wfProcStsCd
            , D_V.FROM_USR_ID fromUsrId
            , D_V.ACT_WF_COND_NM actWfCondNm
            , ( 
              SELECT
                P.FIRST_NM || ' ' || P.LAST_NM 
              FROM
                AUTH_PSN P 
              WHERE
                P.USR_NM = D_V.FROM_USR_ID 
                AND P.GLBL_CMPY_CD = #glblCmpyCd# 
                AND P.EZCANCELFLAG = '0' 
                AND ROWNUM = 1
            ) fromUsrNm
            , D_V.WF_START_TS wfStartTs
            , CASE 
              WHEN
              EXISTS 
              ( 
                SELECT
                  UG.WF_BIZ_APP_ID
                FROM
                  WF_UTIL_USR_GRP UG 
                WHERE
                  UG.USR_ID = D_V.FROM_USR_ID 
                  AND WF_BIZ_APP_ID = 'SYSTEM' 
                  AND WF_USR_GRP_NM = 'ADMIN' 
                  AND UG.GLBL_CMPY_CD = #glblCmpyCd# 
                  AND UG.EZCANCELFLAG = '0' 
              )
              THEN '1' 
              ELSE '0' 
              END FROMUSER_ISADMIN
            , 'N' WF_USR_DLGT_FLG
            , D_V.WF_DUE_TS
            , CASE WHEN D_V.FROM_WF_USR_GRP_DESC_TXT IS NOT NULL 
              THEN D_V.FROM_WF_USR_GRP_DESC_TXT 
              ELSE D_V.FROM_WF_USR_GRP_NM 
              END wfUsrGrpNm_f
            , CASE
              WHEN (D_V.WF_PROC_STS_CD IN ('04','05','06')) THEN (
                SELECT
                  LISTAGG(L.WF_CMNT_TXT,CHR(13) || CHR(10)) WITHIN GROUP ( ORDER BY L.WF_WRK_ITEM_PK ) wfCmntTxt
                FROM
                  (
                    SELECT
                      AL.WF_WRK_ITEM_PK WF_WRK_ITEM_PK
                      , AL.WF_ACT_LOG_PK WF_ACT_LOG_PK
                      , AL.WF_CMNT_TXT WF_CMNT_TXT
                    FROM
                      WF_ACT_LOG_CPLT AL
                    WHERE
                      AL.GLBL_CMPY_CD = #glblCmpyCd#
                      AND AL.WF_PROC_PK = D_V.WF_PROC_PK
                      AND AL.WF_WRK_ITEM_PK = D_V.WF_WRK_ITEM_PK 
                      AND AL.WF_EVENT_TP_CD IN ('51','52','53','54','55','56','57','58','59','60','61','99','A3')
                      AND AL.EZCANCELFLAG = '0'
                  ) L
                GROUP BY L.WF_WRK_ITEM_PK
              )
              ELSE (
                SELECT
                  LISTAGG(L.WF_CMNT_TXT,CHR(13) || CHR(10)) WITHIN GROUP ( ORDER BY L.WF_WRK_ITEM_PK ) wfCmntTxt
                FROM
                  (
                    SELECT
                      AL.WF_WRK_ITEM_PK WF_WRK_ITEM_PK
                      , AL.WF_ACT_LOG_PK WF_ACT_LOG_PK
                      , AL.WF_CMNT_TXT WF_CMNT_TXT
                    FROM
                      WF_ACT_LOG AL
                    WHERE
                      AL.GLBL_CMPY_CD = #glblCmpyCd#
                      AND AL.WF_PROC_PK = D_V.WF_PROC_PK
                      AND AL.WF_WRK_ITEM_PK = D_V.WF_WRK_ITEM_PK 
                      AND AL.WF_EVENT_TP_CD IN ('51','52','53','54','55','56','57','58','59','60','61','99','A3')
                      AND AL.EZCANCELFLAG = '0'
                  ) L
                GROUP BY L.WF_WRK_ITEM_PK
              ) END wfCmntTxt
            , D_V.TO_USR_ID toUsrId
            , (SELECT
                P.FIRST_NM || ' ' || P.LAST_NM
               FROM
                 AUTH_PSN P 
               WHERE
                 P.USR_NM       = D_V.TO_USR_ID
               AND  P.GLBL_CMPY_CD = #glblCmpyCd#
               AND  P.EZCANCELFLAG = '0'
               AND  ROWNUM = 1) toUsrNm
            , CASE 
              WHEN
              EXISTS 
              ( 
                SELECT
                  UG.WF_BIZ_APP_ID
                FROM
                  WF_UTIL_USR_GRP UG 
                WHERE
                  UG.USR_ID = D_V.TO_USR_ID
                  AND WF_BIZ_APP_ID = 'SYSTEM' 
                  AND WF_USR_GRP_NM = 'ADMIN' 
                  AND UG.GLBL_CMPY_CD = #glblCmpyCd# 
                  AND UG.EZCANCELFLAG = '0' 
              )
              THEN '1' 
              ELSE '0' 
              END TOUSER_ISADMIN
            , D_V.LEAVE_WF_COND_NM AS leaveWfCondNm
            , D_V.WF_END_TS wfEndTs
            , D_V.WF_LEAVE_EVENT_AUTO_FLG AS wfEventAutoFlg
            , D_V.WF_BIZ_ATTRB_TXT_01
            , D_V.WF_BIZ_ATTRB_TXT_02
            , D_V.WF_BIZ_ATTRB_TXT_03
            , D_V.WF_BIZ_ATTRB_TXT_04
            , D_V.WF_BIZ_ATTRB_TXT_05
            , D_V.WF_BIZ_ATTRB_LB_TXT_01
            , D_V.WF_BIZ_ATTRB_LB_TXT_02
            , D_V.WF_BIZ_ATTRB_LB_TXT_03
            , D_V.WF_BIZ_ATTRB_LB_TXT_04
            , D_V.WF_BIZ_ATTRB_LB_TXT_05
            , D_V.TO_USRID
            , D_V.TO_WFUSRNM
            , D_V.TO_ISADMIN
            , D_V.TO_ISGROUP
          FROM
          ( --D_V
        <isNotNull property = "PROC_STS_ACTIVE" > 
          SELECT
            TMP3.WF_PROC_NM
            , TMP3.WF_WRK_ITEM_STS_CD
            , TMP3.WF_WRK_ITEM_PK
            , TMP3.WF_PROC_DOC_ID
            , TMP3.WF_DESC_TXT
            , TMP3.WF_WRK_ITEM_NM
            , TMP3.WF_TOKEN_BIZ_PK
            , TMP3.WF_PROC_PK
            , TMP3.WF_PROC_STS_CD
            , TMP3.FROM_USR_ID
            , TMP3.FROM_WF_USR_GRP_DESC_TXT
            , TMP3.FROM_WF_USR_GRP_NM
            , TMP3.ACT_WF_COND_NM
            , TMP3.WF_START_TS
            , TMP3.WF_DUE_TS
            , TMP3.TO_USR_ID
            , TMP3.LEAVE_WF_COND_NM
            , TMP3.WF_END_TS
            , TMP3.WF_LEAVE_EVENT_AUTO_FLG
            , TMP3.WF_BIZ_ATTRB_TXT_01
            , TMP3.WF_BIZ_ATTRB_TXT_02
            , TMP3.WF_BIZ_ATTRB_TXT_03
            , TMP3.WF_BIZ_ATTRB_TXT_04
            , TMP3.WF_BIZ_ATTRB_TXT_05
            , TMP3.WF_BIZ_ATTRB_LB_TXT_01
            , TMP3.WF_BIZ_ATTRB_LB_TXT_02
            , TMP3.WF_BIZ_ATTRB_LB_TXT_03
            , TMP3.WF_BIZ_ATTRB_LB_TXT_04
            , TMP3.WF_BIZ_ATTRB_LB_TXT_05
            , TMP3.TO_USRID
            , TMP3.TO_WFUSRNM
            , TMP3.TO_ISADMIN
            , TMP3.TO_ISGROUP
          FROM
            (
              SELECT
                TMP2.WF_PROC_NM
                , TMP2.WF_WRK_ITEM_STS_CD
                , TMP2.WF_WRK_ITEM_PK
                , TMP2.WF_PROC_DOC_ID
                , TMP2.WF_DESC_TXT
                , TMP2.WF_WRK_ITEM_NM
                , TMP2.WF_TOKEN_BIZ_PK
                , TMP2.WF_PROC_PK
                , TMP2.WF_PROC_STS_CD
                , TMP2.FROM_USR_ID
                , TMP2.FROM_WF_USR_GRP_DESC_TXT
                , TMP2.FROM_WF_USR_GRP_NM
                , TMP2.ACT_WF_COND_NM
                , TMP2.WF_START_TS
                , TMP2.WF_DUE_TS
                , TMP2.TO_USR_ID
                , TMP2.LEAVE_WF_COND_NM
                , TMP2.WF_END_TS
                , TMP2.WF_LEAVE_EVENT_AUTO_FLG
                , TMP2.WF_BIZ_ATTRB_TXT_01
                , TMP2.WF_BIZ_ATTRB_TXT_02
                , TMP2.WF_BIZ_ATTRB_TXT_03
                , TMP2.WF_BIZ_ATTRB_TXT_04
                , TMP2.WF_BIZ_ATTRB_TXT_05
                , TMP2.WF_BIZ_ATTRB_LB_TXT_01
                , TMP2.WF_BIZ_ATTRB_LB_TXT_02
                , TMP2.WF_BIZ_ATTRB_LB_TXT_03
                , TMP2.WF_BIZ_ATTRB_LB_TXT_04
                , TMP2.WF_BIZ_ATTRB_LB_TXT_05
                , LISTAGG(TMP2.TO_WF_USR_ID, ',') WITHIN GROUP (order by null) TO_USRID
                <!-- , LISTAGG(TMP2.WFUSRNM, ',') WITHIN GROUP (order by null) TO_WFUSRNM
                , MAX(TMP2.ISADMIN) TO_ISADMIN
                , MAX(TMP2.ISGROUP) TO_ISGROUP -->
                , LISTAGG(TMP2.WFUSRNM, '","') WITHIN GROUP (order by null) TO_WFUSRNM
                , LISTAGG(TMP2.ISADMIN, ',') WITHIN GROUP (order by null) TO_ISADMIN
                , LISTAGG(TMP2.ISGROUP, ',') WITHIN GROUP (order by null) TO_ISGROUP
              FROM
                (
                  SELECT
                    TMP.WF_PROC_NM
                    , TMP.WF_WRK_ITEM_STS_CD
                    , TMP.WF_WRK_ITEM_PK
                    , TMP.WF_PROC_DOC_ID
                    , TMP.WF_DESC_TXT
                    , TMP.WF_WRK_ITEM_NM
                    , TMP.WF_TOKEN_BIZ_PK
                    , TMP.WF_PROC_PK
                    , TMP.WF_PROC_STS_CD
                    , TMP.FROM_USR_ID
                    , TMP.FROM_WF_USR_GRP_DESC_TXT
                    , TMP.FROM_WF_USR_GRP_NM
                    , TMP.ACT_WF_COND_NM
                    , TMP.WF_START_TS
                    , TMP.WF_DUE_TS
                    , TMP.TO_USR_ID
                    , TMP.LEAVE_WF_COND_NM
                    , TMP.WF_END_TS
                    , TMP.WF_LEAVE_EVENT_AUTO_FLG
                    , TMP.WF_BIZ_ATTRB_TXT_01
                    , TMP.WF_BIZ_ATTRB_TXT_02
                    , TMP.WF_BIZ_ATTRB_TXT_03
                    , TMP.WF_BIZ_ATTRB_TXT_04
                    , TMP.WF_BIZ_ATTRB_TXT_05
                    , TMP.WF_BIZ_ATTRB_LB_TXT_01
                    , TMP.WF_BIZ_ATTRB_LB_TXT_02
                    , TMP.WF_BIZ_ATTRB_LB_TXT_03
                    , TMP.WF_BIZ_ATTRB_LB_TXT_04
                    , TMP.WF_BIZ_ATTRB_LB_TXT_05
                    , U.WF_USR_ID TO_WF_USR_ID
                    , CASE WHEN EXISTS(
                      SELECT
                        U.WF_USR_ID
                      FROM
                        WF_UTIL_USR_GRP UG
                      WHERE
                        UG.USR_ID = U.WF_USR_ID
                        AND UG.WF_BIZ_APP_ID='SYSTEM'
                        AND UG.EZCANCELFLAG = '0'
                        AND UG.GLBL_CMPY_CD = #glblCmpyCd#
                      )
                       THEN '1'
                       ELSE '0'
                       END ISADMIN
                    , CASE 
                       WHEN U.WF_USR_GRP_DESC_TXT IS NOT NULL THEN
                          U.WF_USR_GRP_DESC_TXT
                       WHEN U.WF_USR_GRP_NM IS NOT NULL THEN
                          U.WF_USR_GRP_NM
                       ELSE
                          U.WF_USR_ID || ' ' ||
                          (SELECT
                            P.FIRST_NM || ' ' || P.LAST_NM
                              FROM
                                AUTH_PSN P 
                              WHERE
                                P.USR_NM       = U.WF_USR_ID
                                AND  P.GLBL_CMPY_CD = #glblCmpyCd#
                                AND  P.EZCANCELFLAG = '0'
                                AND ROWNUM = 1) 
                      END WFUSRNM
                    , CASE 
                       WHEN ((U.WF_USR_GRP_DESC_TXT IS NOT NULL) OR (U.WF_USR_GRP_NM IS NOT NULL)) THEN '1'
                       ELSE  '0'
                      END ISGROUP
                  FROM
                    (
                      SELECT
                        ACT_V.WF_PROC_NM
                        , ACT_V.WF_WRK_ITEM_STS_CD
                        , ACT_V.WF_WRK_ITEM_PK
                        , ACT_V.WF_PROC_DOC_ID
                        , ACT_V.WF_DESC_TXT
                        , ACT_V.WF_WRK_ITEM_NM
                        , ACT_V.WF_TOKEN_BIZ_PK
                        , ACT_V.WF_PROC_PK
                        , ACT_V.WF_PROC_STS_CD
                        , ACT_V.FROM_USR_ID
                        , ACT_V.FROM_WF_USR_GRP_DESC_TXT
                        , ACT_V.FROM_WF_USR_GRP_NM
                        , ACT_V.ACT_WF_COND_NM
                        , ACT_V.WF_START_TS
                        , ACT_V.WF_DUE_TS
                        , ACT_V.WF_CMNT_TXT
                        , ACT_V.TO_USR_ID
                        , ACT_V.LEAVE_WF_COND_NM
                        , ACT_V.WF_END_TS
                        , ACT_V.WF_LEAVE_EVENT_AUTO_FLG
                        , ACT_V.WF_BIZ_ATTRB_TXT_01
                        , ACT_V.WF_BIZ_ATTRB_TXT_02
                        , ACT_V.WF_BIZ_ATTRB_TXT_03
                        , ACT_V.WF_BIZ_ATTRB_TXT_04
                        , ACT_V.WF_BIZ_ATTRB_TXT_05
                        , ACT_V.WF_BIZ_ATTRB_LB_TXT_01
                        , ACT_V.WF_BIZ_ATTRB_LB_TXT_02
                        , ACT_V.WF_BIZ_ATTRB_LB_TXT_03
                        , ACT_V.WF_BIZ_ATTRB_LB_TXT_04
                        , ACT_V.WF_BIZ_ATTRB_LB_TXT_05
                        , ACT_V.WF_BIZ_SCR_ID
                        , ACT_V.WF_BIZ_SCR_ID_01
                        , ACT_V.WF_BIZ_SCR_ID_02
                        , ACT_V.WF_BIZ_SCR_ID_03
                        , ACT_V.WF_BIZ_SCR_ID_04
                        , ACT_V.WF_BIZ_SCR_ID_05
                      FROM
                      ( --ACT_V
                        SELECT
                          P.WF_PROC_NM
                          , WI.WF_WRK_ITEM_STS_CD
                          , WI.WF_WRK_ITEM_PK
                          , P.WF_PROC_DOC_ID
                          , PDFN.WF_DESC_TXT
                          , WI.WF_WRK_ITEM_NM
                          , TB.WF_TOKEN_BIZ_PK
                          , P.WF_PROC_PK
                          , P.WF_PROC_STS_CD
                          , WI.FROM_USR_ID
                          , WI.FROM_WF_USR_GRP_DESC_TXT
                          , WI.FROM_WF_USR_GRP_NM
                          , WI.ACT_WF_COND_NM
                          , WI.WF_START_TS
                          , WI.WF_DUE_TS
                          , WI.WF_CMNT_TXT
                          , WI.TO_USR_ID
                          , WI.LEAVE_WF_COND_NM
                          , WI.WF_END_TS
                          , WI.WF_LEAVE_EVENT_AUTO_FLG
                          , TB.WF_BIZ_ATTRB_TXT_01
                          , TB.WF_BIZ_ATTRB_TXT_02
                          , TB.WF_BIZ_ATTRB_TXT_03
                          , TB.WF_BIZ_ATTRB_TXT_04
                          , TB.WF_BIZ_ATTRB_TXT_05
                          , TB.WF_BIZ_ATTRB_LB_TXT_01
                          , TB.WF_BIZ_ATTRB_LB_TXT_02
                          , TB.WF_BIZ_ATTRB_LB_TXT_03
                          , TB.WF_BIZ_ATTRB_LB_TXT_04
                          , TB.WF_BIZ_ATTRB_LB_TXT_05
                          , TB.WF_BIZ_SCR_ID
                          , TB.WF_BIZ_SCR_ID_01
                          , TB.WF_BIZ_SCR_ID_02
                          , TB.WF_BIZ_SCR_ID_03
                          , TB.WF_BIZ_SCR_ID_04
                          , TB.WF_BIZ_SCR_ID_05
                        FROM
                          WF_WRK_ITEM WI
                          , WF_PROC P
                          , WF_TOKEN_BIZ TB
                          , WF_PROC_DFN PDFN
                        WHERE
                          WI.WF_PROC_PK = P.WF_PROC_PK 
                          AND WI.WF_TOKEN_BIZ_PK = TB.WF_TOKEN_BIZ_PK
                          AND P.WF_PROC_NM = PDFN.WF_PROC_NM
                          AND WI.EZCANCELFLAG = '0'
                          AND P.EZCANCELFLAG = '0'
                          AND TB.EZCANCELFLAG = '0'
                          AND PDFN.EZCANCELFLAG = '0'
                          AND WI.GLBL_CMPY_CD = #glblCmpyCd# 
                          AND P.GLBL_CMPY_CD = #glblCmpyCd# 
                          AND TB.GLBL_CMPY_CD = #glblCmpyCd#
                          AND PDFN.GLBL_CMPY_CD = #glblCmpyCd#
                          <isNotNull property = "wfProcPk" > 
                          AND P.WF_PROC_PK = #wfProcPk#
                          </isNotNull>
                          <isNotNull property = "wfProcDocId" > 
                          AND UPPER(P.WF_PROC_DOC_ID) = UPPER(#wfProcDocId#)
                          </isNotNull>
                          <isNotNull property = "wfProcNm" > 
                          AND P.WF_PROC_NM = #wfProcNm#
                          </isNotNull>
                          <isNotNull property = "wfWrkItemNm" > 
                          AND WI.WF_WRK_ITEM_NM LIKE #wfWrkItemNm#
                          </isNotNull> 
                          AND
                          <!-- View -->
                          WI.WF_HUMAN_TASK_FLG = 'Y'

                          <!-- Type -->
                          <!-- 
                            Approve
                          -->
                          <isNotNull property = "xxWfAprChkFlg" > 
                          AND WI.WF_WRK_ITEM_STS_CD = '02'
                          </isNotNull>

                          <isNull property = "xxWfAprChkFlg" > 
                          <isNotNull property = "xxWfVisChkFlg" >
                          AND 
                          (
                              WI.WF_WRK_ITEM_STS_CD IN ('02')
                              AND WI.LEAVE_WF_COND_NM = 'REJECT'
                          )
                          </isNotNull>
                          </isNull>

                          <!-- 
                            Start Date Start
                          -->
                          <isNotNull property = "xxFromDt_SS" > 
                          AND WI.WF_START_TS &gt;= #xxFromDt_SS#
                          </isNotNull>

                          <!-- 
                            Start Date End
                          -->
                          <isNotNull property = "xxThruDt_SE" > 
                          AND WI.WF_START_TS &lt;= #xxThruDt_SE#
                          </isNotNull>

                          <!-- 
                            From Users
                          -->
                          <isNotNull property = "xxGrpFlg_F1" > 
                          AND ( 
                            WI.FROM_USR_ID = #xxGrpFlg_F1# 
                            OR WI.FROM_WF_USR_GRP_NM = #xxGrpFlg_F1# 
                            )
                          </isNotNull>
                          <isNotNull property = "xxGrpFlg_F2" > 
                          AND WI.FROM_WF_USR_GRP_NM = #xxGrpFlg_F2#
                          </isNotNull>
                          <isNotNull property = "xxGrpFlg_F3" > 
                          AND WI.FROM_USR_ID = #xxGrpFlg_F3#
                          </isNotNull>

                          <!-- 
                            To Users
                          -->
                          <isNotNull property = "xxGrpFlg_T" >
                          AND EXISTS (
                            <isNotNull property = "xxGrpFlg_T1" >
                            SELECT
                               1
                            FROM
                              WF_USR IUT
                            WHERE
                              IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK 
                              AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                              AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                              AND IUT.WF_USR_GRP_NM = #xxGrpFlg_T1#
                              AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                              AND IUT.EZCANCELFLAG = '0'
                            UNION ALL
                            SELECT
                               1
                            FROM
                              WF_USR IUT
                            WHERE
                              IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK 
                              AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                              AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                              AND IUT.WF_USR_ID = #xxGrpFlg_T1#
                              AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                              AND IUT.EZCANCELFLAG = '0'
                            </isNotNull>
                            <isNotNull property = "xxGrpFlg_T2" >
                            SELECT
                               1
                            FROM
                              WF_USR IUT
                            WHERE
                              IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK 
                              AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                              AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                              AND IUT.WF_USR_GRP_NM = #xxGrpFlg_T2#
                              AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                              AND IUT.EZCANCELFLAG = '0'
                            </isNotNull>
                            <isNotNull property = "xxGrpFlg_T3" >
                            SELECT
                               1
                            FROM
                              WF_USR IUT
                            WHERE
                              IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                              AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                              AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                              AND IUT.WF_USR_ID = #xxGrpFlg_T3#
                              AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                              AND IUT.EZCANCELFLAG = '0'
                            </isNotNull>
                          )
                          </isNotNull>

                          <!-- 
                           Due Date Start
                          -->
                          <isNotNull property = "xxFromDt_DS" > 
                          AND WI.WF_DUE_TS &gt;= #xxFromDt_DS#
                          </isNotNull>

                          <!--
                           Due Date End
                          -->
                          <isNotNull property = "xxThruDt_DE" > 
                          AND WI.WF_DUE_TS &lt; = #xxThruDt_DE#
                          </isNotNull>

                          <!-- 
                            Subject
                          -->
                            <isNotNull property = "wfBizAttrbTxt" > 
                            AND EXISTS( 
                                 SELECT
                                     1 
                                 FROM
                                   WF_TOKEN_BIZ TBI 
                                 WHERE
                                   TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                   AND TB.WF_BIZ_ATTRB_TXT_01 LIKE #wfBizAttrbTxt# 
                                 UNION ALL 
                                 SELECT
                                     1 
                                 FROM
                                   WF_TOKEN_BIZ TBI 
                                 WHERE
                                   TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                   AND TB.WF_BIZ_ATTRB_TXT_02 LIKE #wfBizAttrbTxt# 
                                 UNION ALL 
                                 SELECT
                                     1 
                                 FROM
                                   WF_TOKEN_BIZ TBI 
                                 WHERE
                                   TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                   AND TB.WF_BIZ_ATTRB_TXT_03 LIKE #wfBizAttrbTxt# 
                                 UNION ALL 
                                 SELECT
                                     1 
                                 FROM
                                   WF_TOKEN_BIZ TBI 
                                 WHERE
                                   TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                   AND TB.WF_BIZ_ATTRB_TXT_04 LIKE #wfBizAttrbTxt#  
                                 UNION ALL 
                                 SELECT
                                     1 
                                 FROM
                                   WF_TOKEN_BIZ TBI 
                                 WHERE
                                   TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                   AND TB.WF_BIZ_ATTRB_TXT_05 LIKE #wfBizAttrbTxt# 
                            )
                            </isNotNull>

                          ORDER BY
                            WI.WF_PROC_PK
                            , WI.WF_WRK_ITEM_PK
                            , WI.WF_START_TS
                     ) ACT_V
                     WHERE
                       ROWNUM &lt;= #maxRow#
                ) TMP
                , WF_USR U
              WHERE
                U.WF_WRK_ITEM_PK(+) = TMP.WF_WRK_ITEM_PK
                AND U.GLBL_CMPY_CD(+) = #glblCmpyCd# 
                AND U.EZCANCELFLAG(+) = '0'
                AND U.WF_USR_ACCS_APVL_FLG(+) = 'Y'
                AND U.WF_USR_ACCS_APVL_SUB_FLG(+) = 'N'
            ) TMP2
          GROUP BY
              TMP2.WF_PROC_NM
              , TMP2.WF_WRK_ITEM_STS_CD
              , TMP2.WF_WRK_ITEM_PK
              , TMP2.WF_PROC_DOC_ID
              , TMP2.WF_DESC_TXT
              , TMP2.WF_WRK_ITEM_NM
              , TMP2.WF_TOKEN_BIZ_PK
              , TMP2.WF_PROC_PK
              , TMP2.WF_PROC_STS_CD
              , TMP2.FROM_USR_ID
              , TMP2.FROM_WF_USR_GRP_DESC_TXT
              , TMP2.FROM_WF_USR_GRP_NM
              , TMP2.ACT_WF_COND_NM
              , TMP2.WF_START_TS
              , TMP2.WF_DUE_TS
              , TMP2.TO_USR_ID
              , TMP2.LEAVE_WF_COND_NM
              , TMP2.WF_END_TS
              , TMP2.WF_LEAVE_EVENT_AUTO_FLG
              , TMP2.WF_BIZ_ATTRB_TXT_01
              , TMP2.WF_BIZ_ATTRB_TXT_02
              , TMP2.WF_BIZ_ATTRB_TXT_03
              , TMP2.WF_BIZ_ATTRB_TXT_04
              , TMP2.WF_BIZ_ATTRB_TXT_05
              , TMP2.WF_BIZ_ATTRB_LB_TXT_01
              , TMP2.WF_BIZ_ATTRB_LB_TXT_02
              , TMP2.WF_BIZ_ATTRB_LB_TXT_03
              , TMP2.WF_BIZ_ATTRB_LB_TXT_04
              , TMP2.WF_BIZ_ATTRB_LB_TXT_05
            ORDER BY
              TMP2.WF_PROC_PK
              , TMP2.WF_WRK_ITEM_PK
              , TMP2.WF_START_TS
          ) TMP3
        </isNotNull>

        <isNotNull property = "PROC_STS_COMPLETE"> 
        <isNotNull property = "PROC_STS_ACTIVE" > 
        UNION ALL
        </isNotNull>
          SELECT
            TMP3.WF_PROC_NM
            , TMP3.WF_WRK_ITEM_STS_CD
            , TMP3.WF_WRK_ITEM_PK
            , TMP3.WF_PROC_DOC_ID
            , TMP3.WF_DESC_TXT
            , TMP3.WF_WRK_ITEM_NM
            , TMP3.WF_TOKEN_BIZ_PK
            , TMP3.WF_PROC_PK
            , TMP3.WF_PROC_STS_CD
            , TMP3.FROM_USR_ID
            , TMP3.FROM_WF_USR_GRP_DESC_TXT
            , TMP3.FROM_WF_USR_GRP_NM
            , TMP3.ACT_WF_COND_NM
            , TMP3.WF_START_TS
            , TMP3.WF_DUE_TS
            , TMP3.TO_USR_ID
            , TMP3.LEAVE_WF_COND_NM
            , TMP3.WF_END_TS
            , TMP3.WF_LEAVE_EVENT_AUTO_FLG
            , TMP3.WF_BIZ_ATTRB_TXT_01
            , TMP3.WF_BIZ_ATTRB_TXT_02
            , TMP3.WF_BIZ_ATTRB_TXT_03
            , TMP3.WF_BIZ_ATTRB_TXT_04
            , TMP3.WF_BIZ_ATTRB_TXT_05
            , TMP3.WF_BIZ_ATTRB_LB_TXT_01
            , TMP3.WF_BIZ_ATTRB_LB_TXT_02
            , TMP3.WF_BIZ_ATTRB_LB_TXT_03
            , TMP3.WF_BIZ_ATTRB_LB_TXT_04
            , TMP3.WF_BIZ_ATTRB_LB_TXT_05
            , TMP3.TO_USRID
            , TMP3.TO_WFUSRNM
            , TMP3.TO_ISADMIN
            , TMP3.TO_ISGROUP
          FROM
            (
              SELECT
                TMP2.WF_PROC_NM
                , TMP2.WF_WRK_ITEM_STS_CD
                , TMP2.WF_WRK_ITEM_PK
                , TMP2.WF_PROC_DOC_ID
                , TMP2.WF_DESC_TXT
                , TMP2.WF_WRK_ITEM_NM
                , TMP2.WF_TOKEN_BIZ_PK
                , TMP2.WF_PROC_PK
                , TMP2.WF_PROC_STS_CD
                , TMP2.FROM_USR_ID
                , TMP2.FROM_WF_USR_GRP_DESC_TXT
                , TMP2.FROM_WF_USR_GRP_NM
                , TMP2.ACT_WF_COND_NM
                , TMP2.WF_START_TS
                , TMP2.WF_DUE_TS
                , TMP2.TO_USR_ID
                , TMP2.LEAVE_WF_COND_NM
                , TMP2.WF_END_TS
                , TMP2.WF_LEAVE_EVENT_AUTO_FLG
                , TMP2.WF_BIZ_ATTRB_TXT_01
                , TMP2.WF_BIZ_ATTRB_TXT_02
                , TMP2.WF_BIZ_ATTRB_TXT_03
                , TMP2.WF_BIZ_ATTRB_TXT_04
                , TMP2.WF_BIZ_ATTRB_TXT_05
                , TMP2.WF_BIZ_ATTRB_LB_TXT_01
                , TMP2.WF_BIZ_ATTRB_LB_TXT_02
                , TMP2.WF_BIZ_ATTRB_LB_TXT_03
                , TMP2.WF_BIZ_ATTRB_LB_TXT_04
                , TMP2.WF_BIZ_ATTRB_LB_TXT_05
                , LISTAGG(TMP2.TO_WF_USR_ID, ',') WITHIN GROUP (order by null) TO_USRID
                <!-- , LISTAGG(TMP2.WFUSRNM, ',') WITHIN GROUP (order by null) TO_WFUSRNM
                , MAX(TMP2.ISADMIN) TO_ISADMIN
                , MAX(TMP2.ISGROUP) TO_ISGROUP -->
                , LISTAGG(TMP2.WFUSRNM, '","') WITHIN GROUP (order by null) TO_WFUSRNM
                , LISTAGG(TMP2.ISADMIN, ',') WITHIN GROUP (order by null) TO_ISADMIN
                , LISTAGG(TMP2.ISGROUP, ',') WITHIN GROUP (order by null) TO_ISGROUP
              FROM
                (
                  SELECT
                    TMP.WF_PROC_NM
                    , TMP.WF_WRK_ITEM_STS_CD
                    , TMP.WF_WRK_ITEM_PK
                    , TMP.WF_PROC_DOC_ID
                    , TMP.WF_DESC_TXT
                    , TMP.WF_WRK_ITEM_NM
                    , TMP.WF_TOKEN_BIZ_PK
                    , TMP.WF_PROC_PK
                    , TMP.WF_PROC_STS_CD
                    , TMP.FROM_USR_ID
                    , TMP.FROM_WF_USR_GRP_DESC_TXT
                    , TMP.FROM_WF_USR_GRP_NM
                    , TMP.ACT_WF_COND_NM
                    , TMP.WF_START_TS
                    , TMP.WF_DUE_TS
                    , TMP.TO_USR_ID
                    , TMP.LEAVE_WF_COND_NM
                    , TMP.WF_END_TS
                    , TMP.WF_LEAVE_EVENT_AUTO_FLG
                    , TMP.WF_BIZ_ATTRB_TXT_01
                    , TMP.WF_BIZ_ATTRB_TXT_02
                    , TMP.WF_BIZ_ATTRB_TXT_03
                    , TMP.WF_BIZ_ATTRB_TXT_04
                    , TMP.WF_BIZ_ATTRB_TXT_05
                    , TMP.WF_BIZ_ATTRB_LB_TXT_01
                    , TMP.WF_BIZ_ATTRB_LB_TXT_02
                    , TMP.WF_BIZ_ATTRB_LB_TXT_03
                    , TMP.WF_BIZ_ATTRB_LB_TXT_04
                    , TMP.WF_BIZ_ATTRB_LB_TXT_05
                    , U.WF_USR_ID TO_WF_USR_ID
                    , CASE WHEN EXISTS(
                      SELECT
                        U.WF_USR_ID
                      FROM
                        WF_UTIL_USR_GRP UG
                      WHERE
                        UG.USR_ID = U.WF_USR_ID
                        AND UG.WF_BIZ_APP_ID='SYSTEM'
                        AND UG.EZCANCELFLAG = '0'
                        AND UG.GLBL_CMPY_CD = #glblCmpyCd#
                      )
                       THEN '1'
                       ELSE '0'
                       END ISADMIN
                    , CASE 
                       WHEN U.WF_USR_GRP_DESC_TXT IS NOT NULL THEN
                          U.WF_USR_GRP_DESC_TXT
                       WHEN U.WF_USR_GRP_NM IS NOT NULL THEN
                          U.WF_USR_GRP_NM
                       ELSE
                          U.WF_USR_ID || ' ' ||
                          (SELECT
                            P.FIRST_NM || ' ' || P.LAST_NM
                              FROM
                                AUTH_PSN P 
                              WHERE
                                P.USR_NM       = U.WF_USR_ID
                                AND  P.GLBL_CMPY_CD = #glblCmpyCd#
                                AND  P.EZCANCELFLAG = '0'
                                AND ROWNUM = 1) 
                      END WFUSRNM
                    , CASE 
                       WHEN ((U.WF_USR_GRP_DESC_TXT IS NOT NULL) OR (U.WF_USR_GRP_NM IS NOT NULL)) THEN '1'
                       ELSE  '0'
                      END ISGROUP
                  FROM
                    (
                      SELECT
                        CMP_V.WF_PROC_NM
                        , CMP_V.WF_WRK_ITEM_STS_CD
                        , CMP_V.WF_WRK_ITEM_PK
                        , CMP_V.WF_PROC_DOC_ID
                        , CMP_V.WF_DESC_TXT
                        , CMP_V.WF_WRK_ITEM_NM
                        , CMP_V.WF_TOKEN_BIZ_PK
                        , CMP_V.WF_PROC_PK
                        , CMP_V.WF_PROC_STS_CD
                        , CMP_V.FROM_USR_ID
                        , CMP_V.FROM_WF_USR_GRP_DESC_TXT
                        , CMP_V.FROM_WF_USR_GRP_NM
                        , CMP_V.ACT_WF_COND_NM
                        , CMP_V.WF_START_TS
                        , CMP_V.WF_DUE_TS
                        , CMP_V.WF_CMNT_TXT
                        , CMP_V.TO_USR_ID
                        , CMP_V.LEAVE_WF_COND_NM
                        , CMP_V.WF_END_TS
                        , CMP_V.WF_LEAVE_EVENT_AUTO_FLG
                        , CMP_V.WF_BIZ_ATTRB_TXT_01
                        , CMP_V.WF_BIZ_ATTRB_TXT_02
                        , CMP_V.WF_BIZ_ATTRB_TXT_03
                        , CMP_V.WF_BIZ_ATTRB_TXT_04
                        , CMP_V.WF_BIZ_ATTRB_TXT_05
                        , CMP_V.WF_BIZ_ATTRB_LB_TXT_01
                        , CMP_V.WF_BIZ_ATTRB_LB_TXT_02
                        , CMP_V.WF_BIZ_ATTRB_LB_TXT_03
                        , CMP_V.WF_BIZ_ATTRB_LB_TXT_04
                        , CMP_V.WF_BIZ_ATTRB_LB_TXT_05
                        , CMP_V.WF_BIZ_SCR_ID
                        , CMP_V.WF_BIZ_SCR_ID_01
                        , CMP_V.WF_BIZ_SCR_ID_02
                        , CMP_V.WF_BIZ_SCR_ID_03
                        , CMP_V.WF_BIZ_SCR_ID_04
                        , CMP_V.WF_BIZ_SCR_ID_05
                     FROM
                      ( --CMP_V
                        SELECT
                          P.WF_PROC_NM
                          , WI.WF_WRK_ITEM_STS_CD
                          , WI.WF_WRK_ITEM_PK
                          , P.WF_PROC_DOC_ID
                          , PDFN.WF_DESC_TXT
                          , WI.WF_WRK_ITEM_NM
                          , TB.WF_TOKEN_BIZ_PK
                          , P.WF_PROC_PK
                          , P.WF_PROC_STS_CD
                          , WI.FROM_USR_ID
                          , WI.FROM_WF_USR_GRP_DESC_TXT
                          , WI.FROM_WF_USR_GRP_NM
                          , WI.ACT_WF_COND_NM
                          , WI.WF_START_TS
                          , WI.WF_DUE_TS
                          , WI.WF_CMNT_TXT
                          , WI.TO_USR_ID
                          , WI.LEAVE_WF_COND_NM
                          , WI.WF_END_TS
                          , WI.WF_LEAVE_EVENT_AUTO_FLG
                          , TB.WF_BIZ_ATTRB_TXT_01
                          , TB.WF_BIZ_ATTRB_TXT_02
                          , TB.WF_BIZ_ATTRB_TXT_03
                          , TB.WF_BIZ_ATTRB_TXT_04
                          , TB.WF_BIZ_ATTRB_TXT_05
                          , TB.WF_BIZ_ATTRB_LB_TXT_01
                          , TB.WF_BIZ_ATTRB_LB_TXT_02
                          , TB.WF_BIZ_ATTRB_LB_TXT_03
                          , TB.WF_BIZ_ATTRB_LB_TXT_04
                          , TB.WF_BIZ_ATTRB_LB_TXT_05
                          , TB.WF_BIZ_SCR_ID
                          , TB.WF_BIZ_SCR_ID_01
                          , TB.WF_BIZ_SCR_ID_02
                          , TB.WF_BIZ_SCR_ID_03
                          , TB.WF_BIZ_SCR_ID_04
                          , TB.WF_BIZ_SCR_ID_05
                        FROM
                          WF_WRK_ITEM_CPLT WI
                          , WF_PROC_CPLT P
                          , WF_TOKEN_BIZ_CPLT TB
                          , WF_PROC_DFN PDFN
                        WHERE
                          WI.WF_PROC_PK = P.WF_PROC_PK 
                          AND WI.WF_TOKEN_BIZ_PK = TB.WF_TOKEN_BIZ_PK
                          AND P.WF_PROC_NM = PDFN.WF_PROC_NM
                          AND WI.EZCANCELFLAG = '0'
                          AND P.EZCANCELFLAG = '0'
                          AND TB.EZCANCELFLAG = '0'
                          AND PDFN.EZCANCELFLAG = '0'
                          AND WI.GLBL_CMPY_CD = #glblCmpyCd# 
                          AND P.GLBL_CMPY_CD = #glblCmpyCd# 
                          AND TB.GLBL_CMPY_CD = #glblCmpyCd#
                          AND PDFN.GLBL_CMPY_CD = #glblCmpyCd#
                          <isNotNull property = "wfProcPk" > 
                          AND P.WF_PROC_PK = #wfProcPk#
                          </isNotNull>
                          <isNotNull property = "wfProcDocId" > 
                          AND UPPER(P.WF_PROC_DOC_ID) = UPPER(#wfProcDocId#)
                          </isNotNull>
                          <isNotNull property = "wfProcNm" > 
                          AND P.WF_PROC_NM = #wfProcNm#
                          </isNotNull>
                          <isNotNull property = "wfWrkItemNm" > 
                          AND WI.WF_WRK_ITEM_NM LIKE #wfWrkItemNm#
                          </isNotNull> 
                          AND
                          <!-- View -->
                          WI.WF_HUMAN_TASK_FLG = 'Y'

                          <!-- Type -->
                          <!-- 
                            Approve
                          -->
                          <isNotNull property = "xxWfAprChkFlg" > 
                          AND WI.WF_WRK_ITEM_STS_CD IN ('03', '04')
                          </isNotNull>

                          <isNull property = "xxWfAprChkFlg" > 
                          <isNotNull property = "xxWfVisChkFlg" >
                          AND 
                          (
                              WI.WF_WRK_ITEM_STS_CD IN ('03', '04')
                              AND WI.LEAVE_WF_COND_NM = 'REJECT'
                          )
                          </isNotNull>
                          </isNull>

                          <!-- 
                            Start Date Start
                          -->
                          <isNotNull property = "xxFromDt_SS" > 
                          AND WI.WF_START_TS &gt;= #xxFromDt_SS#
                          </isNotNull>

                          <!-- 
                            Start Date End
                          -->
                          <isNotNull property = "xxThruDt_SE" > 
                          AND WI.WF_START_TS &lt;= #xxThruDt_SE#
                          </isNotNull>

                          <!-- 
                            From Users
                          -->
                          <isNotNull property = "xxGrpFlg_F1" > 
                          AND ( 
                            WI.FROM_USR_ID = #xxGrpFlg_F1# 
                            OR WI.FROM_WF_USR_GRP_NM = #xxGrpFlg_F1# 
                            )
                          </isNotNull>
                          <isNotNull property = "xxGrpFlg_F2" > 
                          AND WI.FROM_WF_USR_GRP_NM = #xxGrpFlg_F2#
                          </isNotNull>
                          <isNotNull property = "xxGrpFlg_F3" > 
                          AND WI.FROM_USR_ID = #xxGrpFlg_F3#
                          </isNotNull>

                            <!-- 
                              To Users
                            -->
                            <isNotNull property = "xxGrpFlg_T" >
                            AND EXISTS (
                              <isNotNull property = "xxGrpFlg_T1" >
                              SELECT
                                 1
                              FROM
                                WF_USR_CPLT IUT
                              WHERE
                                IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK 
                                AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                                AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                                AND IUT.WF_USR_GRP_NM = #xxGrpFlg_T1#
                                AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                                AND IUT.EZCANCELFLAG = '0'
                              UNION ALL
                              SELECT
                                 1
                              FROM
                                WF_USR_CPLT IUT
                              WHERE
                                IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                                AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                                AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                                AND IUT.WF_USR_ID = #xxGrpFlg_T1#
                                AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                                AND IUT.EZCANCELFLAG = '0'
                              </isNotNull>
                              <isNotNull property = "xxGrpFlg_T2" >
                              SELECT
                                 1
                              FROM
                                WF_USR_CPLT IUT
                              WHERE
                                IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                                AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                                AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                                AND IUT.WF_USR_GRP_NM = #xxGrpFlg_T2#
                                AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                                AND IUT.EZCANCELFLAG = '0'
                              <!-- Dummy SQL (make it same execution plan as 'ALL') -->
                              UNION ALL
                              SELECT
                                 1
                              FROM
                                WF_USR_CPLT IUT
                              WHERE
                                IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                                AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                                AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                                AND IUT.WF_USR_ID = 'NOT_FOUND_USER'
                                AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                                AND IUT.EZCANCELFLAG = '0'
                              </isNotNull>
                              <isNotNull property = "xxGrpFlg_T3" >
                              SELECT
                                 1
                              FROM
                                WF_USR_CPLT IUT
                              WHERE
                                IUT.WF_WRK_ITEM_PK = WI.WF_WRK_ITEM_PK
                                AND IUT.WF_USR_ACCS_APVL_FLG = 'Y'
                                AND IUT.WF_USR_ACCS_APVL_SUB_FLG = 'N'
                                AND IUT.WF_USR_ID = #xxGrpFlg_T3#
                                AND IUT.GLBL_CMPY_CD = #glblCmpyCd# 
                                AND IUT.EZCANCELFLAG = '0'
                              </isNotNull>
                            )
                            </isNotNull>

                          <!-- 
                           Due Date Start
                          -->
                          <isNotNull property = "xxFromDt_DS" > 
                          AND WI.WF_DUE_TS &gt;= #xxFromDt_DS# 
                          </isNotNull>

                          <!--
                           Due Date End
                          -->
                          <isNotNull property = "xxThruDt_DE" > 
                          AND WI.WF_DUE_TS &lt; = #xxThruDt_DE# 
                          </isNotNull>

                          <!-- 
                            Subject
                          -->
                            <isNotNull property = "wfBizAttrbTxt" > 
                            AND EXISTS( 
                                 SELECT
                                     1 
                                 FROM
                                   WF_TOKEN_BIZ_CPLT TBI 
                                 WHERE
                                   TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                   AND TB.WF_BIZ_ATTRB_TXT_01 LIKE #wfBizAttrbTxt# 
                                 UNION ALL 
                                 SELECT
                                     1 
                                 FROM
                                   WF_TOKEN_BIZ_CPLT TBI 
                                 WHERE
                                   TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                   AND TB.WF_BIZ_ATTRB_TXT_02 LIKE #wfBizAttrbTxt# 
                                 UNION ALL 
                                 SELECT
                                     1 
                                 FROM
                                   WF_TOKEN_BIZ_CPLT TBI 
                                 WHERE
                                   TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                   AND TB.WF_BIZ_ATTRB_TXT_03 LIKE #wfBizAttrbTxt# 
                                 UNION ALL 
                                 SELECT
                                     1 
                                 FROM
                                   WF_TOKEN_BIZ_CPLT TBI 
                                 WHERE
                                   TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                   AND TB.WF_BIZ_ATTRB_TXT_04 LIKE #wfBizAttrbTxt#  
                                 UNION ALL 
                                 SELECT
                                     1 
                                 FROM
                                   WF_TOKEN_BIZ_CPLT TBI 
                                 WHERE
                                   TBI.WF_TOKEN_BIZ_PK = WI.WF_TOKEN_BIZ_PK 
                                   AND TB.WF_BIZ_ATTRB_TXT_05 LIKE #wfBizAttrbTxt# 
                            )
                            </isNotNull>

                          ORDER BY
                            WI.WF_PROC_PK
                            , WI.WF_WRK_ITEM_PK
                            , WI.WF_START_TS
                     ) CMP_V
                     WHERE
                       ROWNUM &lt;= #maxRow#

                      ) TMP
                      , WF_USR_CPLT U
                  WHERE
                    U.WF_WRK_ITEM_PK(+) = TMP.WF_WRK_ITEM_PK
                    AND U.GLBL_CMPY_CD(+) = #glblCmpyCd#
                    AND U.EZCANCELFLAG(+) = '0'
                    AND U.WF_USR_ACCS_APVL_FLG(+) = 'Y'
                    AND U.WF_USR_ACCS_APVL_SUB_FLG(+) = 'N'
                ) TMP2
              GROUP BY
                TMP2.WF_PROC_NM
                , TMP2.WF_WRK_ITEM_STS_CD
                , TMP2.WF_WRK_ITEM_PK
                , TMP2.WF_PROC_DOC_ID
                , TMP2.WF_DESC_TXT
                , TMP2.WF_WRK_ITEM_NM
                , TMP2.WF_TOKEN_BIZ_PK
                , TMP2.WF_PROC_PK
                , TMP2.WF_PROC_STS_CD
                , TMP2.FROM_USR_ID
                , TMP2.FROM_WF_USR_GRP_DESC_TXT
                , TMP2.FROM_WF_USR_GRP_NM
                , TMP2.ACT_WF_COND_NM
                , TMP2.WF_START_TS
                , TMP2.WF_DUE_TS
                , TMP2.TO_USR_ID
                , TMP2.LEAVE_WF_COND_NM
                , TMP2.WF_END_TS
                , TMP2.WF_LEAVE_EVENT_AUTO_FLG
                , TMP2.WF_BIZ_ATTRB_TXT_01
                , TMP2.WF_BIZ_ATTRB_TXT_02
                , TMP2.WF_BIZ_ATTRB_TXT_03
                , TMP2.WF_BIZ_ATTRB_TXT_04
                , TMP2.WF_BIZ_ATTRB_TXT_05
                , TMP2.WF_BIZ_ATTRB_LB_TXT_01
                , TMP2.WF_BIZ_ATTRB_LB_TXT_02
                , TMP2.WF_BIZ_ATTRB_LB_TXT_03
                , TMP2.WF_BIZ_ATTRB_LB_TXT_04
                , TMP2.WF_BIZ_ATTRB_LB_TXT_05
              ORDER BY
                TMP2.WF_PROC_PK
                , TMP2.WF_WRK_ITEM_PK
                , TMP2.WF_START_TS
          ) TMP3
        ORDER BY
          WF_PROC_PK
          , WF_WRK_ITEM_PK
          , WF_START_TS
      </isNotNull>
       ) D_V

      <isNotNull property = "PROC_STS_COMPLETE"> 
      <isNotNull property = "PROC_STS_ACTIVE" >
       WHERE
         ROWNUM &lt;= #maxRow#
      </isNotNull>
      </isNotNull>
    )
    </statement>

</sqlMap>
