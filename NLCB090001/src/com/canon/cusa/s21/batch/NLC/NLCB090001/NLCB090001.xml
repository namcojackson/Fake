<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NLCB090001">
    <statement id="getWmsUploadInfo" parameterClass="Map">
        SELECT
             N01.UNIT_ID
            ,N02.SEQ_NUMBER
            ,N01.REQ_DT_TM_TS_TXT
            ,N02.ITEM_CD_TXT
            ,N02.QTY_ORD_TXT
            ,NVL(TL.TPL_LOC_CD, N01.TPL_LOC_TXT) as TPL_LOC_CD
          FROM
             NLCI1070_01 N01
            ,NLCI1070_02 N02
            ,TPL_LOC     TL
          WHERE
                N01.INTERFACE_ID   = #INTERFACE_ID#
            AND N01.TRANSACTION_ID = #TRANSACTION_ID#
            AND N01.EZCANCELFLAG   = '0'
            
            AND N01.INTERFACE_ID   = N02.INTERFACE_ID
            AND N01.TRANSACTION_ID = N02.TRANSACTION_ID
            AND N01.SEGMENT_ID     = N02.SEGMENT_ID
            AND N01.UNIT_ID  = N02.UNIT_ID
            AND N02.EZCANCELFLAG   = '0'
            
            AND TL.GLBL_CMPY_CD(+) = #GLBL_CMPY_CD#
            AND TL.WH_OWNR_CD(+)   = #WH_OWNR_CD#
            AND N01.TPL_LOC_TXT    = TL.TPL_LOC_NM(+)
            AND TL.EZCANCELFLAG(+) = '0'
          ORDER BY
             N01.TRANSACTION_ID
            ,N01.SEGMENT_ID
            ,N01.UNIT_ID
            ,N02.SEQ_NUMBER
    </statement>
    <statement id="getRtlSwhCd" parameterClass="Map" resultClass="String">
      SELECT
          RS.RTL_SWH_CD
        FROM
          RTL_SWH RS
        WHERE
              RS.GLBL_CMPY_CD                    = #GLBL_CMPY_CD#
          AND RS.RTL_WH_CD                       = #RTL_WH_CD#
          AND RS.EFF_FROM_DT                 &lt;= #SALES_DATE#
          AND NVL(RS.EFF_THRU_DT,'99991231') &gt;= #SALES_DATE#
          AND RS.PRTY_LOC_FLG                    = #PRTY_LOC_FLG#
          AND RS.EZCANCELFLAG                    = '0'
    </statement>
</sqlMap>
