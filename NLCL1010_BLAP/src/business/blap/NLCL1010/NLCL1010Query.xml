<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NLCL1010Query">

    <typeAlias alias="NLCL1010_ASMsg" type="business.blap.NLCL1010.NLCL1010_ASMsg"/>

    <resultMap id="result.findSerTrx" class="NLCL1010_ASMsg">
        <result property="serTrxPk_A1"              column="SER_TRX_PK"                javaType="EZDSBigDecimalItem"/>
        <result property="serNum_A1"                column="SER_NUM"                   javaType="EZDSStringItem"/>
        <result property="mdseCd_A1"                column="MDSE_CD"                   javaType="EZDSStringItem"/>
        <result property="serTrxTs_A1"              column="SER_TRX_TS"                javaType="EZDSStringItem"/>
        <result property="xxDtNm_A1"                column="SER_TRX_DT_TM"             javaType="EZDSStringItem"/> <!-- 10/15/2015 add -->
        <result property="serTrxEventCd_A1"         column="SER_TRX_EVENT_CD"          javaType="EZDSStringItem"/>
        <result property="serTrxSrcTpCd_A1"         column="SER_TRX_SRC_TP_CD"         javaType="EZDSStringItem"/>
        <result property="serTrxSrcHdrNum_A1"       column="SER_TRX_SRC_HDR_NUM"       javaType="EZDSStringItem"/>
        <result property="serTrxSrcLineNum_A1"      column="SER_TRX_SRC_LINE_NUM"      javaType="EZDSStringItem"/>
        <result property="serTrxSrcLineSubNum_A1"   column="SER_TRX_SRC_LINE_SUB_NUM"  javaType="EZDSStringItem"/>
        <result property="serTrxRefNum_A1"          column="SER_TRX_REF_NUM"           javaType="EZDSStringItem"/>
        <result property="xxScrItem500Txt_A1"       column="FROM_LOC"                  javaType="EZDSStringItem"/>
        <result property="xxScrItem500Txt_A2"       column="TO_LOC"                    javaType="EZDSStringItem"/>
        <result property="stkStsDescTxt_A1"         column="FROM_STK_STS_DESC_TXT"     javaType="EZDSStringItem"/> <!-- 10/15/2015 add -->
        <result property="stkStsDescTxt_A2"         column="TO_STK_STS_DESC_TXT"       javaType="EZDSStringItem"/> <!-- 10/15/2015 add -->
        <result property="origMdseCd_A1"            column="ORIG_MDSE_CD"              javaType="EZDSStringItem"/>
        <result property="xxYesNoCd_A1"             column="XX_YES_NO_CD_A1"           javaType="EZDSStringItem"/>
        <result property="manCratFlg_A1"            column="MAN_CRAT_FLG"              javaType="EZDSStringItem"/>
        <result property="serTrxCmntTxt_A1"         column="SER_TRX_CMNT_TXT"          javaType="EZDSStringItem"/>
        <result property="stkStsCd_A1"              column="FROM_STK_STS_CD"           javaType="EZDSStringItem"/> <!-- 10/15/2015 add -->
        <result property="stkStsCd_A2"              column="TO_STK_STS_CD"             javaType="EZDSStringItem"/> <!-- 10/15/2015 add -->
        <result property="serErrStsCd_A1"           column="SER_ERR_STS_CD"            javaType="EZDSStringItem"/>
        <result property="ezUpTime_A1"              column="EZUPTIME"                  javaType="EZDSStringItem"/>
        <result property="ezUpTimeZone_A1"          column="EZUPTIMEZONE"              javaType="EZDSStringItem"/>
        <result property="mdseDescShortTxt_A1"      column="MDSE_DESC_SHORT_TXT"       javaType="EZDSStringItem"/>
        <result property="serTrxEventDescTxt_A1"    column="SER_TRX_EVENT_DESC_TXT"    javaType="EZDSStringItem"/>
        <result property="serTrxSrcTpDescTxt_A1"    column="SER_TRX_SRC_TP_DESC_TXT"   javaType="EZDSStringItem"/>
        <result property="xxDplyByItemCnctLbNm_A3"  column="SER_ERR_STS_NM_DESC_TXT"   javaType="EZDSStringItem"/>
        <result property="serTrxCmntTxt_AS"         column="SER_TRX_CMNT_TXT"          javaType="EZDSStringItem"/>
    </resultMap>

    <statement id="findSerTrx" parameterClass="Map" resultMap="result.findSerTrx">
        SELECT
           X.SER_TRX_PK
          ,X.SER_NUM
          ,X.MDSE_CD
          ,X.SER_TRX_TS
          ,SUBSTR(X.SER_TRX_TS, 1, 8) AS SER_TRX_DT
          ,DECODE(X.SER_TRX_TS,null,null,SUBSTR(X.SER_TRX_TS, 5, 2) || 
                                         '/'                        || 
                                         SUBSTR(X.SER_TRX_TS, 7, 2) || 
                                         '/'                        || 
                                         SUBSTR(X.SER_TRX_TS, 1, 4) || 
                                         ' '                        || 
                                         SUBSTR(X.SER_TRX_TS, 9, 2) || 
                                         ':'                        || 
                                         SUBSTR(X.SER_TRX_TS, 11, 2)) AS SER_TRX_DT_TM
          ,X.SER_TRX_EVENT_CD
          ,X.SER_TRX_SRC_TP_CD
          ,X.SER_TRX_SRC_HDR_NUM
          ,X.SER_TRX_SRC_LINE_NUM
          ,X.SER_TRX_SRC_LINE_SUB_NUM
          ,X.SER_TRX_REF_NUM
          ,X.FROM_STK_STS_DESC_TXT
          ,X.TO_STK_STS_DESC_TXT
          ,X.FROM_LOC_CD
          ,X.TO_LOC_CD
          ,NVL(X.FROM_LOC, X.FROM_LOC_CD) AS FROM_LOC
          ,NVL(X.TO_LOC, X.TO_LOC_CD) AS TO_LOC
          ,X.ORIG_MDSE_CD
          ,DECODE(X.SER_TRX_CMNT_TXT, NULL, 'N', 'Y') AS XX_YES_NO_CD_A1
          ,X.MAN_CRAT_FLG
          ,X.SER_TRX_CMNT_TXT
          ,X.SER_TRX_LTST_FLG
          ,X.SER_ERR_STS_CD
          ,X.FROM_STK_STS_CD
          ,X.TO_STK_STS_CD
          ,X.EZUPTIME
          ,X.EZUPTIMEZONE
          ,X.MDSE_DESC_SHORT_TXT
          ,X.SER_TRX_EVENT_DESC_TXT
          ,X.SER_TRX_SRC_TP_DESC_TXT
          ,NVL2(X.SER_ERR_STS_NM,
               X.SER_ERR_STS_NM || ':' || X.SER_ERR_STS_DESC_TXT, NULL) AS SER_ERR_STS_NM_DESC_TXT
          ,X.ROW_NUM
        FROM (
            SELECT
                ST.SER_TRX_PK
               ,ST.SER_NUM
               ,ST.MDSE_CD
               ,ST.SER_TRX_TS
               ,ST.SER_TRX_EVENT_CD
               ,ST.SER_TRX_SRC_TP_CD
               ,ST.SER_TRX_SRC_HDR_NUM
               ,ST.SER_TRX_SRC_LINE_NUM
               ,ST.SER_TRX_SRC_LINE_SUB_NUM
               ,ST.SER_TRX_REF_NUM
               ,ST.FROM_LOC_CD
               ,ST.TO_LOC_CD
               ,ST.ORIG_MDSE_CD
               ,ST.MAN_CRAT_FLG
               ,ST.SER_TRX_CMNT_TXT
               ,ST.SER_TRX_LTST_FLG
               ,ST.SER_ERR_STS_CD
               ,ST.EZUPTIME
               ,ST.EZUPTIMEZONE
               ,ST.FROM_STK_STS_CD
               ,ST.TO_STK_STS_CD
               ,M.MDSE_DESC_SHORT_TXT
               ,STE.SER_TRX_EVENT_DESC_TXT
               ,(
                SELECT
                    DECODE
                        (
                        ILV_FROM.INVTY_LOC_TP_CD 
                            , #invtyLocTpVnd#, (
                                      SELECT
                                          ILV_FROM.INVTY_LOC_CD || ':' || POV_FROM.DPLY_VND_NM 
                                      FROM
                                          PO_VND_V POV_FROM
                                      WHERE
                                          POV_FROM.GLBL_CMPY_CD = ILV_FROM.GLBL_CMPY_CD
                                      AND POV_FROM.VND_CD       = ILV_FROM.INVTY_LOC_CD
                                      AND POV_FROM.EZCANCELFLAG = '0'
                                  )
                            , #invtyLocTpCust#, (
                                      SELECT
                                          ILV_FROM.INVTY_LOC_CD || ':' || SELL_FROM.DS_ACCT_NM
                                      FROM
                                           SHIP_TO_CUST SHIP_FROM
                                          ,SELL_TO_CUST SELL_FROM
                                      WHERE
                                          SHIP_FROM.GLBL_CMPY_CD    = ILV_FROM.GLBL_CMPY_CD
                                      AND SHIP_FROM.SHIP_TO_CUST_CD = ILV_FROM.INVTY_LOC_CD
                                      AND SHIP_FROM.EZCANCELFLAG    = '0'
                                      AND SELL_FROM.GLBL_CMPY_CD    = SHIP_FROM.GLBL_CMPY_CD
                                      AND SELL_FROM.SELL_TO_CUST_CD = SHIP_FROM.SELL_TO_CUST_CD
                                      AND SELL_FROM.EZCANCELFLAG    = '0'
                                  )
                            , ILV_FROM.INVTY_LOC_CD || ':' || ILV_FROM.INVTY_LOC_NM
                        )
                FROM
                    INVTY_LOC_V ILV_FROM
                WHERE
                    ILV_FROM.GLBL_CMPY_CD       = ST.GLBL_CMPY_CD
                AND ILV_FROM.INVTY_LOC_CD       = ST.FROM_LOC_CD
                AND ILV_FROM.EZCANCELFLAG       = '0'
                ) AS FROM_LOC
                ,(
                SELECT
                    DECODE
                        (
                        ILV_TO.INVTY_LOC_TP_CD 
                            , #invtyLocTpVnd#, (
                                      SELECT
                                          ILV_TO.INVTY_LOC_CD || ':' || POV_TO.DPLY_VND_NM 
                                      FROM
                                          PO_VND_V POV_TO
                                      WHERE
                                          POV_TO.GLBL_CMPY_CD = ILV_TO.GLBL_CMPY_CD
                                      AND POV_TO.VND_CD       = ILV_TO.INVTY_LOC_CD
                                      AND POV_TO.EZCANCELFLAG = '0'
                                  )
                            , #invtyLocTpCust#, (
                                      SELECT
                                          ILV_TO.INVTY_LOC_CD || ':' || SELL_TO.DS_ACCT_NM
                                      FROM
                                           SHIP_TO_CUST SHIP_TO
                                          ,SELL_TO_CUST SELL_TO
                                      WHERE
                                          SHIP_TO.GLBL_CMPY_CD    = ILV_TO.GLBL_CMPY_CD
                                      AND SHIP_TO.SHIP_TO_CUST_CD = ILV_TO.INVTY_LOC_CD
                                      AND SHIP_TO.EZCANCELFLAG    = '0'
                                      AND SELL_TO.GLBL_CMPY_CD    = SHIP_TO.GLBL_CMPY_CD
                                      AND SELL_TO.SELL_TO_CUST_CD = SHIP_TO.SELL_TO_CUST_CD
                                      AND SELL_TO.EZCANCELFLAG    = '0'
                                  )
                            , ILV_TO.INVTY_LOC_CD || ':' || ILV_TO.INVTY_LOC_NM
                        )
                FROM
                    INVTY_LOC_V ILV_TO
                WHERE
                    ILV_TO.GLBL_CMPY_CD       = ST.GLBL_CMPY_CD
                AND ILV_TO.INVTY_LOC_CD       = ST.TO_LOC_CD
                AND ILV_TO.EZCANCELFLAG       = '0'
                ) AS TO_LOC
               ,STST.SER_TRX_SRC_TP_DESC_TXT
               ,SES.SER_ERR_STS_NM
               ,SES.SER_ERR_STS_DESC_TXT
               ,SSF.STK_STS_DESC_TXT  AS FROM_STK_STS_DESC_TXT
               ,SST.STK_STS_DESC_TXT  AS TO_STK_STS_DESC_TXT
               ,ROWNUM AS ROW_NUM
            FROM
                SER_TRX         ST
               ,ALL_MDSE_V      M
               ,SER_TRX_EVENT   STE
               ,SER_TRX_SRC_TP  STST
               ,SER_ERR_STS     SES
               ,STK_STS         SSF
               ,STK_STS         SST
            WHERE
                    ST.GLBL_CMPY_CD                    = #glblCmpyCd#
                AND ST.EZCANCELFLAG                    = '0'
                <isNotNull property="serNum">
                    AND ST.SER_NUM                     = #serNum#
                </isNotNull>
                <isNotNull property="mdseCd">
                    AND ST.MDSE_CD                     = #mdseCd#
                </isNotNull>
                <isNotNull property="serTrxEventCd">
                    AND ST.SER_TRX_EVENT_CD            = #serTrxEventCd#
                </isNotNull>
                <isNotNull property="fromSerTrxTs">
                    AND ST.SER_TRX_TS                  <![CDATA[ >= ]]> #fromSerTrxTs#
                </isNotNull>
                <isNotNull property="thruSerTrxTs">
                    AND ST.SER_TRX_TS                  <![CDATA[ <= ]]> #thruSerTrxTs#
                </isNotNull>
                <isNotNull property="fromLocCd">
                    AND ST.FROM_LOC_CD                 = #fromLocCd#
                </isNotNull>
                <isNotNull property="toLocCd">
                    AND ST.TO_LOC_CD                   = #toLocCd#
                </isNotNull>
                <isNotNull property="serTrxSrcTpCd">
                    AND ST.SER_TRX_SRC_TP_CD           = #serTrxSrcTpCd#
                </isNotNull>
                <isNotNull property="serTrxSrcHdrNum">
                    AND ST.SER_TRX_SRC_HDR_NUM         = #serTrxSrcHdrNum#
                </isNotNull>
                <isNotNull property="serTrxRefNum">
                    AND ST.SER_TRX_REF_NUM = #serTrxRefNum#
                </isNotNull>
                <isNotNull property="origMdseCd">
                    AND ST.ORIG_MDSE_CD                = #origMdseCd#
                </isNotNull>
                <isNotNull property="serTrxLtstFlg">
                    AND ST.SER_TRX_LTST_FLG            = #serTrxLtstFlg#
                </isNotNull>
                <isNotNull property="serErrStsCd">
                    AND ST.SER_ERR_STS_CD              = #serErrStsCd#
                </isNotNull>
                <isNotNull property="errorOnly">
                    AND ST.SER_ERR_STS_CD              IS NOT NULL
                </isNotNull>
                -- MDSE
                AND M.GLBL_CMPY_CD                 = ST.GLBL_CMPY_CD
                AND M.MDSE_CD                      = ST.MDSE_CD
                AND M.EZCANCELFLAG                 = '0'
                -- SER_TRX_EVENT
                AND STE.GLBL_CMPY_CD               = ST.GLBL_CMPY_CD
                AND STE.SER_TRX_EVENT_CD           = ST.SER_TRX_EVENT_CD
                AND STE.EZCANCELFLAG               = '0'
                -- SER_TRX_SRC_TP
                AND STST.GLBL_CMPY_CD(+)           = ST.GLBL_CMPY_CD
                AND STST.SER_TRX_SRC_TP_CD(+)      = ST.SER_TRX_SRC_TP_CD
                AND STST.EZCANCELFLAG(+)           = '0'
                -- SER_ERR_STS
                AND SES.GLBL_CMPY_CD(+)            = ST.GLBL_CMPY_CD
                AND SES.SER_ERR_STS_CD(+)          = ST.SER_ERR_STS_CD
                AND SES.EZCANCELFLAG(+)            = '0'
                -- STK_STS(From)
                AND SSF.GLBL_CMPY_CD(+)            = ST.GLBL_CMPY_CD
                AND SSF.STK_STS_CD(+)              = ST.FROM_STK_STS_CD
                AND SSF.EZCANCELFLAG(+)            = '0'
                -- STK_STS(To)
                AND SST.GLBL_CMPY_CD               = ST.GLBL_CMPY_CD
                AND SST.STK_STS_CD                 = ST.TO_STK_STS_CD
                AND SST.EZCANCELFLAG               = '0'
            ORDER BY
                ST.SER_NUM
               ,ST.MDSE_CD
               ,ST.SER_TRX_TS DESC
            ) X
        WHERE
            X.ROW_NUM <![CDATA[ <= ]]> #rowNum#
    </statement>

    <statement id="findSerTrxCsvList" parameterClass="Map" resultClass="Map">
        SELECT
           X.SER_NUM
          ,X.MDSE_CD
          ,DECODE(X.SER_TRX_TS,null,null,SUBSTR(X.SER_TRX_TS, 5, 2) || 
                                         '/'                        || 
                                         SUBSTR(X.SER_TRX_TS, 7, 2) || 
                                         '/'                        || 
                                         SUBSTR(X.SER_TRX_TS, 1, 4) || 
                                         ' '                        || 
                                         SUBSTR(X.SER_TRX_TS, 9, 2) || 
                                         ':'                        || 
                                         SUBSTR(X.SER_TRX_TS, 11, 2)) AS XX_DT_NM
          ,X.SER_TRX_SRC_HDR_NUM
          ,X.SER_TRX_SRC_LINE_NUM
          ,X.SER_TRX_SRC_LINE_SUB_NUM
          ,X.SER_TRX_REF_NUM
          ,X.FROM_LOC
          ,X.TO_LOC
          ,X.ORIG_MDSE_CD
          ,X.FROM_STK_STS_CD
          ,X.FROM_STK_STS_DESC_TXT
          ,X.TO_STK_STS_CD
          ,X.TO_STK_STS_DESC_TXT
          ,DECODE(X.SER_TRX_CMNT_TXT, NULL, 'N', 'Y') AS XX_YES_NO_CD
          ,X.MAN_CRAT_FLG
          ,X.MDSE_DESC_SHORT_TXT
          ,X.SER_TRX_EVENT_DESC_TXT
          ,X.SER_TRX_SRC_TP_DESC_TXT
          ,X.SER_ERR_STS_NM
          ,X.SER_ERR_STS_DESC_TXT
        FROM (
            SELECT
                ST.SER_TRX_PK
               ,ST.SER_NUM
               ,ST.MDSE_CD
               ,ST.SER_TRX_TS
               ,ST.SER_TRX_EVENT_CD
               ,ST.SER_TRX_SRC_TP_CD
               ,ST.SER_TRX_SRC_HDR_NUM
               ,ST.SER_TRX_SRC_LINE_NUM
               ,ST.SER_TRX_SRC_LINE_SUB_NUM
               ,ST.SER_TRX_REF_NUM
               ,ST.FROM_STK_STS_CD
               ,ST.TO_STK_STS_CD
               ,ST.ORIG_MDSE_CD
               ,ST.MAN_CRAT_FLG
               ,ST.SER_TRX_CMNT_TXT
               ,ST.SER_TRX_LTST_FLG
               ,ST.SER_ERR_STS_CD
               ,ST.EZUPTIME
               ,ST.EZUPTIMEZONE
               ,M.MDSE_DESC_SHORT_TXT
               ,STE.SER_TRX_EVENT_DESC_TXT
               ,(
                SELECT
                    DECODE
                        (
                        ILV_FROM.INVTY_LOC_TP_CD 
                            , #invtyLocTpVnd#, (
                                      SELECT
                                          ILV_FROM.INVTY_LOC_CD || ':' || POV_FROM.DPLY_VND_NM 
                                      FROM
                                          PO_VND_V POV_FROM
                                      WHERE
                                          POV_FROM.GLBL_CMPY_CD = ILV_FROM.GLBL_CMPY_CD
                                      AND POV_FROM.VND_CD       = ILV_FROM.INVTY_LOC_CD
                                      AND POV_FROM.EZCANCELFLAG = '0'
                                  )
                            , #invtyLocTpCust#, (
                                      SELECT
                                          ILV_FROM.INVTY_LOC_CD || ':' || SELL_FROM.DS_ACCT_NM
                                      FROM
                                           SHIP_TO_CUST SHIP_FROM
                                          ,SELL_TO_CUST SELL_FROM
                                      WHERE
                                          SHIP_FROM.GLBL_CMPY_CD    = ILV_FROM.GLBL_CMPY_CD
                                      AND SHIP_FROM.SHIP_TO_CUST_CD = ILV_FROM.INVTY_LOC_CD
                                      AND SHIP_FROM.EZCANCELFLAG    = '0'
                                      AND SELL_FROM.GLBL_CMPY_CD    = SHIP_FROM.GLBL_CMPY_CD
                                      AND SELL_FROM.SELL_TO_CUST_CD = SHIP_FROM.SELL_TO_CUST_CD
                                      AND SELL_FROM.EZCANCELFLAG    = '0'
                                  )
                            , ILV_FROM.INVTY_LOC_CD || ':' || ILV_FROM.INVTY_LOC_NM
                        )
                FROM
                    INVTY_LOC_V ILV_FROM
                WHERE
                    ILV_FROM.GLBL_CMPY_CD       = ST.GLBL_CMPY_CD
                AND ILV_FROM.INVTY_LOC_CD       = ST.FROM_LOC_CD
                AND ILV_FROM.EZCANCELFLAG       = '0'
                ) AS FROM_LOC
                ,(
                SELECT
                    DECODE
                        (
                        ILV_TO.INVTY_LOC_TP_CD 
                            , #invtyLocTpVnd#, (
                                      SELECT
                                          ILV_TO.INVTY_LOC_CD || ':' || POV_TO.DPLY_VND_NM 
                                      FROM
                                          PO_VND_V POV_TO
                                      WHERE
                                          POV_TO.GLBL_CMPY_CD = ILV_TO.GLBL_CMPY_CD
                                      AND POV_TO.VND_CD       = ILV_TO.INVTY_LOC_CD
                                      AND POV_TO.EZCANCELFLAG = '0'
                                  )
                            , #invtyLocTpCust#, (
                                      SELECT
                                          ILV_TO.INVTY_LOC_CD || ':' || SELL_TO.DS_ACCT_NM
                                      FROM
                                           SHIP_TO_CUST SHIP_TO
                                          ,SELL_TO_CUST SELL_TO
                                      WHERE
                                          SHIP_TO.GLBL_CMPY_CD    = ILV_TO.GLBL_CMPY_CD
                                      AND SHIP_TO.SHIP_TO_CUST_CD = ILV_TO.INVTY_LOC_CD
                                      AND SHIP_TO.EZCANCELFLAG    = '0'
                                      AND SELL_TO.GLBL_CMPY_CD    = SHIP_TO.GLBL_CMPY_CD
                                      AND SELL_TO.SELL_TO_CUST_CD = SHIP_TO.SELL_TO_CUST_CD
                                      AND SELL_TO.EZCANCELFLAG    = '0'
                                  )
                            , ILV_TO.INVTY_LOC_CD || ':' || ILV_TO.INVTY_LOC_NM
                        )
                FROM
                    INVTY_LOC_V ILV_TO
                WHERE
                    ILV_TO.GLBL_CMPY_CD       = ST.GLBL_CMPY_CD
                AND ILV_TO.INVTY_LOC_CD       = ST.FROM_LOC_CD
                AND ILV_TO.EZCANCELFLAG       = '0'
                ) AS TO_LOC
               ,STST.SER_TRX_SRC_TP_DESC_TXT
               ,SES.SER_ERR_STS_NM
               ,SES.SER_ERR_STS_DESC_TXT
               ,SSF.STK_STS_DESC_TXT  AS FROM_STK_STS_DESC_TXT
               ,SST.STK_STS_DESC_TXT  AS TO_STK_STS_DESC_TXT
               ,ROWNUM AS ROW_NUM
            FROM
                SER_TRX         ST
               ,ALL_MDSE_V            M
               ,SER_TRX_EVENT   STE
               ,SER_TRX_SRC_TP  STST
               ,SER_ERR_STS     SES
               ,STK_STS         SSF
               ,STK_STS         SST
            WHERE
                    ST.GLBL_CMPY_CD                    = #glblCmpyCd#
                AND ST.EZCANCELFLAG                    = '0'
                <isNotNull property="serNum">
                    AND ST.SER_NUM                     = #serNum#
                </isNotNull>
                <isNotNull property="mdseCd">
                    AND ST.MDSE_CD                     = #mdseCd#
                </isNotNull>
                <isNotNull property="serTrxEventCd">
                    AND ST.SER_TRX_EVENT_CD            = #serTrxEventCd#
                </isNotNull>
                <isNotNull property="fromSerTrxTs">
                    AND ST.SER_TRX_TS                  <![CDATA[ >= ]]> #fromSerTrxTs#
                </isNotNull>
                <isNotNull property="thruSerTrxTs">
                    AND ST.SER_TRX_TS                  <![CDATA[ <= ]]> #thruSerTrxTs#
                </isNotNull>
                <isNotNull property="fromLocCd">
                    AND ST.FROM_LOC_CD                 = #fromLocCd#
                </isNotNull>
                <isNotNull property="toLocCd">
                    AND ST.TO_LOC_CD                   = #toLocCd#
                </isNotNull>
                <isNotNull property="serTrxSrcTpCd">
                    AND ST.SER_TRX_SRC_TP_CD           = #serTrxSrcTpCd#
                </isNotNull>
                <isNotNull property="serTrxSrcHdrNum">
                    AND (ST.SER_TRX_SRC_TP_CD = #serTrxSrcTpRws#
                        AND ST.SER_TRX_REF_NUM = #serTrxSrcHdrNum#
                     OR (ST.SER_TRX_SRC_TP_CD <![CDATA[ <> ]]> #serTrxSrcTpRws# OR ST.SER_TRX_SRC_TP_CD IS NULL)
                        AND ST.SER_TRX_SRC_HDR_NUM = #serTrxSrcHdrNum#)
                </isNotNull>
                <isNotNull property="serTrxRefNum">
                    AND (ST.SER_TRX_SRC_TP_CD = #serTrxSrcTpRws#
                        AND ST.SER_TRX_SRC_HDR_NUM = #serTrxRefNum#
                     OR (ST.SER_TRX_SRC_TP_CD <![CDATA[ <> ]]> #serTrxSrcTpRws# OR ST.SER_TRX_SRC_TP_CD IS NULL)
                        AND ST.SER_TRX_REF_NUM = #serTrxRefNum#)
                </isNotNull>
                <isNotNull property="origMdseCd">
                    AND ST.ORIG_MDSE_CD                = #origMdseCd#
                </isNotNull>
                <isNotNull property="serTrxLtstFlg">
                    AND ST.SER_TRX_LTST_FLG            = #serTrxLtstFlg#
                </isNotNull>
                <isNotNull property="serErrStsCd">
                    AND ST.SER_ERR_STS_CD              = #serErrStsCd#
                </isNotNull>
                <isNotNull property="errorOnly">
                    AND ST.SER_ERR_STS_CD              IS NOT NULL
                </isNotNull>
                -- MDSE
                AND M.GLBL_CMPY_CD                 = ST.GLBL_CMPY_CD
                AND M.MDSE_CD                      = ST.MDSE_CD
                AND M.EZCANCELFLAG                 = '0'
                -- SER_TRX_EVENT
                AND STE.GLBL_CMPY_CD               = ST.GLBL_CMPY_CD
                AND STE.SER_TRX_EVENT_CD           = ST.SER_TRX_EVENT_CD
                AND STE.EZCANCELFLAG               = '0'
                -- SER_TRX_SRC_TP
                AND STST.GLBL_CMPY_CD(+)           = ST.GLBL_CMPY_CD
                AND STST.SER_TRX_SRC_TP_CD(+)      = ST.SER_TRX_SRC_TP_CD
                AND STST.EZCANCELFLAG(+)           = '0'
                -- SER_ERR_STS
                AND SES.GLBL_CMPY_CD(+)            = ST.GLBL_CMPY_CD
                AND SES.SER_ERR_STS_CD(+)          = ST.SER_ERR_STS_CD
                AND SES.EZCANCELFLAG(+)            = '0'
                -- STK_STS(From)
                AND SSF.GLBL_CMPY_CD(+)            = ST.GLBL_CMPY_CD
                AND SSF.STK_STS_CD(+)              = ST.FROM_STK_STS_CD
                AND SSF.EZCANCELFLAG(+)            = '0'
                -- STK_STS(To)
                AND SST.GLBL_CMPY_CD               = ST.GLBL_CMPY_CD
                AND SST.STK_STS_CD                 = ST.TO_STK_STS_CD
                AND SST.EZCANCELFLAG               = '0'
            ORDER BY
                ST.SER_NUM
               ,ST.MDSE_CD
               ,ST.SER_TRX_TS
            ) X
        WHERE
            X.ROW_NUM <![CDATA[ <= ]]> #rowNum#
    </statement>
</sqlMap>
