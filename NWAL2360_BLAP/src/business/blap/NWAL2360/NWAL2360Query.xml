<?xml version="1.0" encoding="UTF-8"?>
<sqlMap namespace="NWAL2360Query">
    <typeAlias alias="NWAL2360_ASMsg"   type="business.blap.NWAL2360.NWAL2360_ASMsg" />
    <statement id="search" parameterClass="Map" resultMap="result.NWAL2360_ASMsg">
        SELECT   DS_IMPT_ORD_SOM_APVL_PK
                ,SOM_STS_TXT
                ,SOM_APVL_TP_TXT
                ,SOM_APVL_DESC_TXT
                ,SOM_VRSN_ID
                ,SOM_APVR_NM
                ,WF_START_TS
                ,WF_END_TS
                ,APVL_NOTE_TXT
            FROM (
                SELECT   AP.DS_IMPT_ORD_SOM_APVL_PK
                        ,AP.SOM_STS_TXT
                        ,AP.SOM_APVL_TP_TXT
                        ,AP.SOM_APVL_DESC_TXT
                        ,AP.SOM_VRSN_ID
                        ,AP.SOM_APVR_NM
                        ,AP.WF_START_TS
                        ,AP.WF_END_TS
                        ,NT.APVL_NOTE_TXT
                    FROM
                         DS_IMPT_ORD_SOM_APVL AP
                        ,DS_IMPT_ORD_APVL_NOTE NT
                    
                    WHERE 
                            AP.GLBL_CMPY_CD            = #glblCmpyCd#
                        AND AP.DS_IMPT_ORD_PK          = #dsImptOrdPk#
                        AND AP.GLBL_CMPY_CD            = NT.GLBL_CMPY_CD(+)
                        AND AP.DS_IMPT_ORD_SOM_APVL_PK = NT.DS_IMPT_ORD_SOM_APVL_PK(+)
                        AND AP.EZCANCELFLAG            = '0'
                        AND NT.EZCANCELFLAG(+)         = '0'
                    ORDER BY 
                        AP.SOM_VRSN_ID ASC
                       ,AP.WF_START_TS ASC
                )
            WHERE ROWNUM <![CDATA[<=]]> #rowNum#
    </statement>
    <resultMap id="result.NWAL2360_ASMsg" class="NWAL2360_ASMsg">
        <result property="dsImptOrdSomApvlPk" column="DS_IMPT_ORD_SOM_APVL_PK" javaType="EZDSBigDecimalItem"/>
        <result property="somStsTxt"          column="SOM_STS_TXT"             javaType="EZDBStringItem"/>
        <result property="somApvlTpTxt"       column="SOM_APVL_TP_TXT"         javaType="EZDBStringItem"/>
        <result property="somApvlDescTxt"     column="SOM_APVL_DESC_TXT"       javaType="EZDBStringItem"/>
        <result property="somVrsnId"          column="SOM_VRSN_ID"             javaType="EZDBStringItem"/>
        <result property="somApvrNm"          column="SOM_APVR_NM"             javaType="EZDBStringItem"/>
        <result property="wfStartTs"          column="WF_START_TS"             javaType="EZDBStringItem"/>
        <result property="wfEndTs"            column="WF_END_TS"               javaType="EZDBStringItem"/>
        <result property="apvlNoteTxt"        column="APVL_NOTE_TXT"           javaType="EZDBStringItem"/>
    </resultMap>
</sqlMap>
