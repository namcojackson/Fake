<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<sqlMap namespace="NWZC056001">
<!-- START 2017/07/14 U.Kim [QC#19933, MOD] -->
<!--<statement id="getSupplyColorTp" parameterClass="Map" resultClass="String"> -->
    <statement id="getSupplyInfo" parameterClass="Map" resultClass="Map">
<!-- END 2017/07/14 U.Kim [QC#19933, MOD] -->
        SELECT
             B.BLACK_COLOR_FLG
<!-- START 2017/07/14 U.Kim [QC#19933, ADD] -->
            ,A.IMG_SPLY_TP_CD
<!-- END 2017/07/14 U.Kim [QC#19933, ADD] -->
        FROM
            MDSE A
            ,IMG_SPLY_COLOR_TP B
        WHERE
            A.GLBL_CMPY_CD          = #glblCmpyCd#
        AND A.EZCANCELFLAG          = '0'
        AND A.MDSE_CD               = #mdseCd#
        AND A.GLBL_CMPY_CD          = B.GLBL_CMPY_CD
        AND B.EZCANCELFLAG          = '0'
        AND A.IMG_SPLY_COLOR_TP_CD  = B.IMG_SPLY_COLOR_TP_CD
    </statement>
    <statement id="getTermAndCondInfo" parameterClass="Map" resultClass="Map">
        SELECT
            C.SVC_TERM_COND_PK
            ,C.SVC_TERM_ATTRB_MAP_VAL_CD
            ,D.SVC_TERM_COND_ATTRB_NM
        FROM
            DS_CONTR A
            ,DS_CONTR_DTL B
            ,SVC_TERM_COND C
            ,SVC_TERM_COND_ATTRB D
        WHERE
                A.GLBL_CMPY_CD              = #glblCmpyCd#
            AND A.EZCANCELFLAG              = '0'
            AND A.DS_CONTR_NUM              = #dsContrNum#
            AND A.GLBL_CMPY_CD              = B.GLBL_CMPY_CD
            AND B.EZCANCELFLAG              = '0'
            AND A.DS_CONTR_PK               = B.DS_CONTR_PK
            AND B.SVC_MACH_MSTR_PK          = #svcMachMstrPk#
            AND B.GLBL_CMPY_CD              = C.GLBL_CMPY_CD
            AND C.EZCANCELFLAG              = '0'
            AND B.DS_CONTR_PK               = C.DS_CONTR_PK
            AND B.DS_CONTR_DTL_PK           = C.DS_CONTR_DTL_PK
            AND C.GLBL_CMPY_CD              = D.GLBL_CMPY_CD
            AND D.EZCANCELFLAG              = '0'
            AND C.SVC_TERM_COND_ATTRB_PK    = D.SVC_TERM_COND_ATTRB_PK
            <!-- START 2019/03/07 S.Kitamura [QC#30661, MOD] -->
            <!-- AND D.SVC_TERM_COND_ATTRB_NM    IN (#bwRun#, #clrRunNm#, #totRunNm#) -->
            AND D.SVC_TERM_COND_ATTRB_NM    IN (#bwRun#, #clrRunNm#, #totRunNm#, #bwOrigNm#, #clrOrigNm#, #totOrigNm#)
            <!-- END 2019/03/07 S.Kitamura [QC#30661, MOD] -->
            AND D.SVC_TERM_ATTRB_ACTV_FLG   = 'Y'
            AND D.EFF_FROM_DT               &lt;= #slsDt#
            AND (D.EFF_THRU_DT              &gt;= #slsDt#
             OR D.EFF_THRU_DT               IS NULL)
        ORDER BY
            D.SVC_TERM_COND_ATTRB_PK
    </statement>
    <statement id="getDsACPO" parameterClass="Map" resultClass="Map">
        SELECT
            C.DS_ACPO_NUM
            ,B.DS_CONTR_DTL_PK
        FROM
            DS_CONTR A
            ,DS_CONTR_DTL B
            ,DS_ACPO C
        WHERE
            A.GLBL_CMPY_CD      = #glblCmpyCd#
        AND A.EZCANCELFLAG      = '0'
        AND A.DS_CONTR_NUM      = #dsContrNum#
        AND A.GLBL_CMPY_CD      = B.GLBL_CMPY_CD
        AND B.EZCANCELFLAG      = '0'
        AND A.DS_CONTR_PK       = B.DS_CONTR_PK
        AND B.SVC_MACH_MSTR_PK  = #svcMachMstrPk#
        AND B.GLBL_CMPY_CD      = C.GLBL_CMPY_CD
        AND C.EZCANCELFLAG      = '0'
        AND B.DS_CONTR_DTL_PK   = C.DS_CONTR_DTL_PK
    </statement>
    <statement id="getDsACPODtl" parameterClass="Map" resultClass="Map">
        SELECT
            C.DS_ACPO_NUM
            ,D.DS_ACPO_TRGT_LINE_NUM
            ,D.SHIP_QTY
        FROM
            DS_CONTR A
            ,DS_CONTR_DTL B
            ,DS_ACPO C
            ,DS_ACPO_TRGT_DTL D
        WHERE
            A.GLBL_CMPY_CD      = #glblCmpyCd#
        AND A.EZCANCELFLAG      = '0'
        AND A.DS_CONTR_NUM      = #dsContrNum#
        AND A.GLBL_CMPY_CD      = B.GLBL_CMPY_CD
        AND B.EZCANCELFLAG      = '0'
        AND A.DS_CONTR_PK       = B.DS_CONTR_PK
        AND B.SVC_MACH_MSTR_PK  = #svcMachMstrPk#
        AND B.GLBL_CMPY_CD      = C.GLBL_CMPY_CD
        AND C.EZCANCELFLAG      = '0'
        AND B.DS_CONTR_DTL_PK   = C.DS_CONTR_DTL_PK
        AND C.GLBL_CMPY_CD      = D.GLBL_CMPY_CD
        AND D.EZCANCELFLAG      = '0'
        AND C.DS_ACPO_NUM       = D.DS_ACPO_NUM
        AND D.MDSE_CD           = #mdseCd#
    </statement>
    <statement id="getDsContrDtlPk" parameterClass="Map" resultClass="java.math.BigDecimal">
        SELECT
            B.DS_CONTR_DTL_PK
        FROM
            DS_CONTR A
            ,DS_CONTR_DTL B
        WHERE
            A.GLBL_CMPY_CD      = #glblCmpyCd#
        AND A.EZCANCELFLAG      = '0'
        AND A.DS_CONTR_NUM      = #dsContrNum#
        AND A.GLBL_CMPY_CD      = B.GLBL_CMPY_CD
        AND B.EZCANCELFLAG      = '0'
        AND A.DS_CONTR_PK       = B.DS_CONTR_PK
        AND B.SVC_MACH_MSTR_PK  = #svcMachMstrPk#
    </statement>
    <statement id="getNextDsAcpoTrgtLineNum" parameterClass="Map" resultClass="String">
        SELECT
            TO_CHAR(NVL(MAX(TO_NUMBER(DS_ACPO_TRGT_LINE_NUM)), 0) + #dsAcpoTrgtLineNum#, 'FM000')
        FROM
            DS_ACPO_TRGT_DTL
        WHERE
            DS_ACPO_NUM     =   #dsAcpoNum#
        AND GLBL_CMPY_CD    =   #glblCmpyCd#
        AND EZCANCELFLAG    =   '0'
    </statement>
    <statement id="getTermAndCondInfoForFleet" parameterClass="Map" resultClass="Map">
        SELECT
             C.SVC_TERM_COND_PK
            ,C.SVC_TERM_ATTRB_MAP_VAL_CD
            ,D.SVC_TERM_COND_ATTRB_NM
        FROM
             DS_CONTR            A
            ,SVC_TERM_COND       C
            ,SVC_TERM_COND_ATTRB D
        WHERE
                A.GLBL_CMPY_CD                = #glblCmpyCd#
            AND A.EZCANCELFLAG                = '0'
            AND A.DS_CONTR_NUM                = #dsContrNum#
            AND A.GLBL_CMPY_CD                = C.GLBL_CMPY_CD
            AND C.EZCANCELFLAG                = '0'
            AND A.DS_CONTR_PK                 = C.DS_CONTR_PK
            AND C.DS_CONTR_DTL_PK             IS NULL
            AND C.GLBL_CMPY_CD                = D.GLBL_CMPY_CD
            AND D.EZCANCELFLAG                = '0'
            AND C.SVC_TERM_COND_ATTRB_PK      = D.SVC_TERM_COND_ATTRB_PK
            <!-- START 2019/03/07 S.Kitamura [QC#30661, MOD] -->
            <!-- AND D.SVC_TERM_COND_ATTRB_NM    IN (#bwRun#, #clrRunNm#, #totRunNm#) -->
            AND D.SVC_TERM_COND_ATTRB_NM    IN (#bwRun#, #clrRunNm#, #totRunNm#, #bwOrigNm#, #clrOrigNm#, #totOrigNm#)
            <!-- END 2019/03/07 S.Kitamura [QC#30661, MOD] -->
            AND D.SVC_TERM_ATTRB_ACTV_FLG     = 'Y'
            AND D.EFF_FROM_DT             &lt;= #slsDt#
            AND (D.EFF_THRU_DT            &gt;= #slsDt#
             OR D.EFF_THRU_DT                IS NULL)
        ORDER BY
            D.SVC_TERM_COND_ATTRB_PK
    </statement>
    <statement id="getDsACPOForFleet" parameterClass="Map" resultClass="Map">
        SELECT
             C.DS_ACPO_NUM
            ,B.DS_CONTR_DTL_PK
        FROM
             DS_CONTR     A
            ,DS_CONTR_DTL B
            ,DS_ACPO      C
        WHERE
                A.GLBL_CMPY_CD       = #glblCmpyCd#
            AND A.EZCANCELFLAG       = '0'
            AND A.DS_CONTR_NUM       = #dsContrNum#
            AND A.GLBL_CMPY_CD       = B.GLBL_CMPY_CD
            AND B.EZCANCELFLAG       = '0'
            AND A.DS_CONTR_PK        = B.DS_CONTR_PK
            AND B.DS_CONTR_DTL_TP_CD = #dsContrDtlTpCd#
            AND B.GLBL_CMPY_CD       = C.GLBL_CMPY_CD
            AND C.EZCANCELFLAG       = '0'
            AND B.DS_CONTR_DTL_PK    = C.DS_CONTR_DTL_PK
    </statement>
    <statement id="getDsACPODtlForFleet" parameterClass="Map" resultClass="Map">
        SELECT
             C.DS_ACPO_NUM
            ,D.DS_ACPO_TRGT_LINE_NUM
            ,D.SHIP_QTY
        FROM
             DS_CONTR         A
            ,DS_CONTR_DTL     B
            ,DS_ACPO          C
            ,DS_ACPO_TRGT_DTL D
        WHERE
                A.GLBL_CMPY_CD       = #glblCmpyCd#
            AND A.EZCANCELFLAG       = '0'
            AND A.DS_CONTR_NUM       = #dsContrNum#
            AND A.GLBL_CMPY_CD       = B.GLBL_CMPY_CD
            AND B.EZCANCELFLAG       = '0'
            AND A.DS_CONTR_PK        = B.DS_CONTR_PK
            AND B.DS_CONTR_DTL_TP_CD = #dsContrDtlTpCd#
            AND B.GLBL_CMPY_CD       = C.GLBL_CMPY_CD
            AND C.EZCANCELFLAG       = '0'
            AND B.DS_CONTR_DTL_PK    = C.DS_CONTR_DTL_PK
            AND C.GLBL_CMPY_CD       = D.GLBL_CMPY_CD
            AND D.EZCANCELFLAG       = '0'
            AND C.DS_ACPO_NUM        = D.DS_ACPO_NUM
            AND D.MDSE_CD            = #mdseCd#
    </statement>
    <statement id="getDsContrDtlPkForFleet" parameterClass="Map" resultClass="java.math.BigDecimal">
        SELECT
            B.DS_CONTR_DTL_PK
        FROM
             DS_CONTR     A
            ,DS_CONTR_DTL B
        WHERE
                A.GLBL_CMPY_CD       = #glblCmpyCd#
            AND A.EZCANCELFLAG       = '0'
            AND A.DS_CONTR_NUM       = #dsContrNum#
            AND A.GLBL_CMPY_CD       = B.GLBL_CMPY_CD
            AND B.EZCANCELFLAG       = '0'
            AND A.DS_CONTR_PK        = B.DS_CONTR_PK
            AND B.DS_CONTR_DTL_TP_CD = #dsContrDtlTpCd#
    </statement>
</sqlMap>
