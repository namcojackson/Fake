<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NSAL0740Query">
    <typeAlias alias="NSAL0740_ASMsg" type="business.blap.NSAL0740.NSAL0740_ASMsg"/>
    <statement id="getContrInfo" parameterClass="Map" resultMap="result.getContrInfo">
    SELECT
         XX_SCR_ITEM_34_TXT
        ,SER_NUM
        <!-- Add Start 2019/01/24 QC#29782 -->
        ,SVC_MACH_MSTR_PK
        ,MDSE_DESC_SHORT_TXT
        <!-- Add End 2019/01/24 QC#29782 -->
        ,DS_CONTR_BASE_USG_NM
        ,CONTR_EFF_FROM_DT
        ,CONTR_EFF_THRU_DT
        ,CONTR_UPLFT_TP_CD
        ,UPLFT_PRC_METH_CD
        ,UPLFT_BEF_END_RNW_DAYS_AOT
        ,UPLFT_BASE_PRC_UP_RATIO
        ,UPLFT_MTR_PRC_UP_RATIO
        <!-- START 2018/11/16 K.Kitachi [QC#28638, MOD] -->
        <!-- ,FIRST_YR_CONTR_UPLFT_FLG -->
        <!-- ,SCD_YR_CONTR_UPLFT_FLG -->
        <!-- ,THIRD_YR_CONTR_UPLFT_FLG -->
        <!-- ,FRTH_YR_CONTR_UPLFT_FLG -->
        <!-- ,FIFTH_YR_CONTR_UPLFT_FLG -->
        ,MAX_PRC_UP_RATIO
        ,FIX_TERM_IN_MTH_AOT
        ,UPLFT_FIXED_DT
        ,UPLFT_PCY_DT
        ,CONTR_EFF_FROM_DT_BK
        ,CONTR_EFF_THRU_DT_BK
        <!-- END 2018/11/16 K.Kitachi [QC#28638, MOD] -->
        ,GLBL_CMPY_CD
        ,DS_CONTR_PK 
        ,DS_CONTR_DTL_PK
        ,DS_CONTR_RNW_ESCL_PK
        ,DS_CONTR_CATG_CD
        ,DS_CONTR_NUM
        ,DS_CONTR_MACH_LVL_NUM
        ,DS_CONTR_DTL_TP_CD
        ,DS_CONTR_STS_CD
        ,DS_CONTR_DTL_STS_CD
        ,SORT_NUM
        ,MTR_CNT_ALL
        ,MTR_CNT_INV
        ,EZUPTIME
        ,EZUPTIMEZONE
<!-- START 2016/12/08 N.Arai [QC#14204, ADD] -->
        ,XX_REC_HIST_CRAT_TS
        ,XX_REC_HIST_CRAT_BY_NM
        ,XX_REC_HIST_UPD_TS
        ,XX_REC_HIST_UPD_BY_NM
        ,XX_REC_HIST_TBL_NM
<!-- END 2016/12/08 N.Arai [QC#14204, ADD] -->
    FROM
        (
            SELECT
                 TRIM(CONTR.DS_CONTR_CATG_CD || '-' || CONTR.DS_CONTR_NUM)  AS XX_SCR_ITEM_34_TXT
                ,NULL                                                       AS SER_NUM
                <!-- Add Start 2019/01/24 QC#29782 -->
                ,NULL                                                       AS SVC_MACH_MSTR_PK
                ,NULL                                                       AS MDSE_DESC_SHORT_TXT
                ,NULL                                                       AS SVC_PGM_TP_SORT_NUM
                ,NULL                                                       AS DS_CONTR_CRAT_TP_CD
                ,NULL                                                       AS SORT_SER_NUM
                ,NULL                                                       AS SORT_MDSE_CD
                <!-- Add End 2019/01/24 QC#29782 -->
                ,NULL                                                       AS DS_CONTR_BASE_USG_NM
                ,NULL                                                       AS CONTR_EFF_FROM_DT
                ,NULL                                                       AS CONTR_EFF_THRU_DT
                ,ESCL.CONTR_UPLFT_TP_CD                                     AS CONTR_UPLFT_TP_CD
                ,ESCL.UPLFT_PRC_METH_CD                                     AS UPLFT_PRC_METH_CD
                ,ESCL.UPLFT_BEF_END_RNW_DAYS_AOT                            AS UPLFT_BEF_END_RNW_DAYS_AOT
                ,ESCL.UPLFT_BASE_PRC_UP_RATIO                               AS UPLFT_BASE_PRC_UP_RATIO
                ,ESCL.UPLFT_MTR_PRC_UP_RATIO                                AS UPLFT_MTR_PRC_UP_RATIO
                <!-- START 2018/11/16 K.Kitachi [QC#28638, MOD] -->
                <!-- ,ESCL.FIRST_YR_CONTR_UPLFT_FLG                              AS FIRST_YR_CONTR_UPLFT_FLG -->
                <!-- ,ESCL.SCD_YR_CONTR_UPLFT_FLG                                AS SCD_YR_CONTR_UPLFT_FLG -->
                <!-- ,ESCL.THIRD_YR_CONTR_UPLFT_FLG                              AS THIRD_YR_CONTR_UPLFT_FLG -->
                <!-- ,ESCL.FRTH_YR_CONTR_UPLFT_FLG                               AS FRTH_YR_CONTR_UPLFT_FLG -->
                <!-- ,ESCL.FIFTH_YR_CONTR_UPLFT_FLG                              AS FIFTH_YR_CONTR_UPLFT_FLG -->
                ,ESCL.MAX_PRC_UP_RATIO                                      AS MAX_PRC_UP_RATIO
                ,ESCL.FIX_TERM_IN_MTH_AOT                                   AS FIX_TERM_IN_MTH_AOT
                ,ESCL.UPLFT_FIXED_DT                                        AS UPLFT_FIXED_DT
                ,ESCL.UPLFT_PCY_DT                                          AS UPLFT_PCY_DT
                ,CONTR.CONTR_VRSN_EFF_FROM_DT                               AS CONTR_EFF_FROM_DT_BK
                ,CONTR.CONTR_VRSN_EFF_THRU_DT                               AS CONTR_EFF_THRU_DT_BK
                <!-- END 2018/11/16 K.Kitachi [QC#28638, MOD] -->
                ,CONTR.GLBL_CMPY_CD                                         AS GLBL_CMPY_CD
                ,CONTR.DS_CONTR_PK                                          AS DS_CONTR_PK 
                ,NULL                                                       AS DS_CONTR_DTL_PK
                ,ESCL.DS_CONTR_RNW_ESCL_PK                                  AS DS_CONTR_RNW_ESCL_PK
                ,CONTR.DS_CONTR_CATG_CD                                     AS DS_CONTR_CATG_CD
                ,CONTR.DS_CONTR_NUM                                         AS DS_CONTR_NUM
                ,NVL(ESCL.DS_CONTR_MACH_LVL_NUM, '1')                       AS DS_CONTR_MACH_LVL_NUM
                ,NULL                                                       AS DS_CONTR_DTL_TP_CD
                ,CONTR.DS_CONTR_STS_CD                                      AS DS_CONTR_STS_CD
                ,NULL                                                       AS DS_CONTR_DTL_STS_CD
                ,NULL                                                       AS SORT_NUM
<!-- START 2018/10/04 K.Kojima [QC#28620, ADD] -->
                ,NULL                                                       AS SORT_NUM2
<!-- END 2018/10/04 K.Kojima [QC#28620, ADD] -->
                ,NULL                                                       AS MTR_CNT_ALL
                ,NULL                                                       AS MTR_CNT_INV
                ,ESCL.EZUPTIME                                              AS EZUPTIME
                ,ESCL.EZUPTIMEZONE                                          AS EZUPTIMEZONE
<!-- START 2016/12/08 N.Arai [QC#14204, ADD] -->
                ,ESCL.EZINTIME                                              AS XX_REC_HIST_CRAT_TS
                ,ESCL.EZINUSERID                                            AS XX_REC_HIST_CRAT_BY_NM
                ,ESCL.EZUPTIME                                              AS XX_REC_HIST_UPD_TS
                ,ESCL.EZUPUSERID                                            AS XX_REC_HIST_UPD_BY_NM
                ,ESCL.EZTABLEID                                             AS XX_REC_HIST_TBL_NM
<!-- END 2016/12/08 N.Arai [QC#14204, ADD] -->
            FROM
                 DS_CONTR CONTR
                ,DS_CONTR_RNW_ESCL ESCL
            WHERE
                CONTR.GLBL_CMPY_CD = #glblCmpyCd#
            <iterate property="dsContrPkList" var="dsContrPk[]" open="AND CONTR.DS_CONTR_PK IN (" close=")" conjunction=",">
                #dsContrPk[]#
            </iterate>
            AND
                CONTR.EZCANCELFLAG = '0'
            AND
                CONTR.GLBL_CMPY_CD = ESCL.GLBL_CMPY_CD
            AND
                CONTR.DS_CONTR_PK = ESCL.DS_CONTR_PK
            AND 
                ESCL.EZCANCELFLAG = '0'
            AND
                ESCL.DS_CONTR_MACH_LVL_NUM = #dsContrMachLvlNum1#
        UNION ALL
            SELECT
                 ''                                                         AS XX_SCR_ITEM_34_TXT
                ,MSTR.SER_NUM                                               AS SER_NUM
                <!-- Add Start 2019/01/24 QC#29782 -->
                ,DTL.SVC_MACH_MSTR_PK                                       AS SVC_MACH_MSTR_PK
                ,M.MDSE_DESC_SHORT_TXT                                      AS MDSE_DESC_SHORT_TXT
                ,SPT.SVC_PGM_TP_SORT_NUM                                    AS SVC_PGM_TP_SORT_NUM
                ,NVL(DTL.DS_CONTR_CRAT_TP_CD, #dsContrCratTp#)              AS DS_CONTR_CRAT_TP_CD
                ,NVL(MSTRP.SER_NUM, MSTR.SER_NUM)                           AS SORT_SER_NUM
                ,NVL(MSTRP.MDSE_CD, MSTR.MDSE_CD)                           AS SORT_MDSE_CD
                <!-- Add End 2019/01/24 QC#29782 -->
                ,NULL                                                       AS DS_CONTR_BASE_USG_NM
                ,DTL.CONTR_EFF_FROM_DT                                      AS CONTR_EFF_FROM_DT
                ,DTL.CONTR_EFF_THRU_DT                                      AS CONTR_EFF_THRU_DT
                ,ESCL.CONTR_UPLFT_TP_CD                                     AS CONTR_UPLFT_TP_CD
                ,ESCL.UPLFT_PRC_METH_CD                                     AS UPLFT_PRC_METH_CD
                ,ESCL.UPLFT_BEF_END_RNW_DAYS_AOT                            AS UPLFT_BEF_END_RNW_DAYS_AOT
                ,ESCL.UPLFT_BASE_PRC_UP_RATIO                               AS UPLFT_BASE_PRC_UP_RATIO
                ,ESCL.UPLFT_MTR_PRC_UP_RATIO                                AS UPLFT_MTR_PRC_UP_RATIO
                <!-- START 2018/11/16 K.Kitachi [QC#28638, MOD] -->
                <!-- ,ESCL.FIRST_YR_CONTR_UPLFT_FLG                              AS FIRST_YR_CONTR_UPLFT_FLG -->
                <!-- ,ESCL.SCD_YR_CONTR_UPLFT_FLG                                AS SCD_YR_CONTR_UPLFT_FLG -->
                <!-- ,ESCL.THIRD_YR_CONTR_UPLFT_FLG                              AS THIRD_YR_CONTR_UPLFT_FLG -->
                <!-- ,ESCL.FRTH_YR_CONTR_UPLFT_FLG                               AS FRTH_YR_CONTR_UPLFT_FLG -->
                <!-- ,ESCL.FIFTH_YR_CONTR_UPLFT_FLG                              AS FIFTH_YR_CONTR_UPLFT_FLG -->
                ,ESCL.MAX_PRC_UP_RATIO                                      AS MAX_PRC_UP_RATIO
                ,ESCL.FIX_TERM_IN_MTH_AOT                                   AS FIX_TERM_IN_MTH_AOT
                ,ESCL.UPLFT_FIXED_DT                                        AS UPLFT_FIXED_DT
                ,ESCL.UPLFT_PCY_DT                                          AS UPLFT_PCY_DT
                ,DTL.CONTR_EFF_FROM_DT                                      AS CONTR_EFF_FROM_DT_BK
                ,DTL.CONTR_EFF_THRU_DT                                      AS CONTR_EFF_THRU_DT_BK
                <!-- END 2018/11/16 K.Kitachi [QC#28638, MOD] -->
                ,CONTR.GLBL_CMPY_CD                                         AS GLBL_CMPY_CD
                ,CONTR.DS_CONTR_PK                                          AS DS_CONTR_PK 
                ,DTL.DS_CONTR_DTL_PK                                        AS DS_CONTR_DTL_PK
                ,ESCL.DS_CONTR_RNW_ESCL_PK                                  AS DS_CONTR_RNW_ESCL_PK
                ,CONTR.DS_CONTR_CATG_CD                                     AS DS_CONTR_CATG_CD
                ,CONTR.DS_CONTR_NUM                                         AS DS_CONTR_NUM
                ,NVL(ESCL.DS_CONTR_MACH_LVL_NUM, '2')                       AS DS_CONTR_MACH_LVL_NUM
                ,DTL.DS_CONTR_DTL_TP_CD                                     AS DS_CONTR_DTL_TP_CD
                ,CONTR.DS_CONTR_STS_CD                                      AS DS_CONTR_STS_CD
                ,DTL.DS_CONTR_DTL_STS_CD                                    AS DS_CONTR_DTL_STS_CD
                ,(
                    CASE
                        WHEN DTL.DS_CONTR_DTL_TP_CD = #dsContrDtlTpCd2# THEN 
                            DTL.PRNT_DS_CONTR_DTL_PK
                        <!-- START 2018/11/28 T.Tomita [QC#28638, ADD] -->
                        WHEN DTL.DS_CONTR_DTL_TP_CD = #dsContrDtlTpCdAgg# THEN 0
                        <!-- END 2018/11/28 T.Tomita [QC#28638, ADD] -->
                        ELSE
                            DTL.DS_CONTR_DTL_PK
                    END
                 )                                                          AS SORT_NUM
<!-- START 2018/10/04 K.Kojima [QC#28620, ADD] -->
                ,(
                    CASE
                        WHEN DTL.DS_CONTR_DTL_TP_CD = #dsContrDtlTpCd2# THEN 
                            DTL.DS_CONTR_DTL_PK
                        ELSE
                            NULL
                    END
                 )                                                          AS SORT_NUM2
<!-- END 2018/10/04 K.Kojima [QC#28620, ADD] -->
                ,NULL                                                       AS MTR_CNT_ALL
                ,NULL                                                       AS MTR_CNT_INV
                ,ESCL.EZUPTIME                                              AS EZUPTIME
                ,ESCL.EZUPTIMEZONE                                          AS EZUPTIMEZONE
<!-- START 2016/12/08 N.Arai [QC#14204, ADD] -->
                ,ESCL.EZINTIME                                              AS XX_REC_HIST_CRAT_TS
                ,ESCL.EZINUSERID                                            AS XX_REC_HIST_CRAT_BY_NM
                ,ESCL.EZUPTIME                                              AS XX_REC_HIST_UPD_TS
                ,ESCL.EZUPUSERID                                            AS XX_REC_HIST_UPD_BY_NM
                ,ESCL.EZTABLEID                                             AS XX_REC_HIST_TBL_NM
<!-- END 2016/12/08 N.Arai [QC#14204, ADD] -->
            FROM
                 DS_CONTR CONTR
                ,DS_CONTR_DTL DTL
                ,DS_CONTR_DTL_TP DTP
                ,DS_CONTR_RNW_ESCL ESCL
                ,SVC_MACH_MSTR MSTR
                <!-- Add Start 2019/01/24 QC#29782 -->
                ,MDSE M
                ,SVC_PGM_TP SPT
                ,DS_CONTR_DTL DTLP
                ,SVC_MACH_MSTR MSTRP
                <!-- Add End 2019/01/24 QC#29782 -->
            WHERE
                CONTR.GLBL_CMPY_CD = #glblCmpyCd#
            <iterate property="dsContrPkList" var="dsContrPk[]" open="AND CONTR.DS_CONTR_PK IN (" close=")" conjunction=",">
                #dsContrPk[]#
            </iterate>
            AND
                CONTR.EZCANCELFLAG = '0'
            AND
                CONTR.GLBL_CMPY_CD = DTL.GLBL_CMPY_CD
            AND
                CONTR.DS_CONTR_PK = DTL.DS_CONTR_PK
            AND
                ((CONTR.DS_CONTR_CATG_CD = #dsContrCatgCd# AND DTL.DS_CONTR_DTL_TP_CD = #dsContrDtlTpCd#) OR CONTR.DS_CONTR_CATG_CD &lt;&gt; #dsContrCatgCd#)
            <isEqual property="existContrDtlPk" compareValue="Y">
            AND (
                    (
                    <iterate property="dsContrDtlPkList" var="dsContrDtlPk[]" open="DTL.DS_CONTR_DTL_PK IN (" close=")" conjunction=",">
                        #dsContrDtlPk[]#
                    </iterate>
                    ) OR (
                        DTL.DS_CONTR_DTL_TP_CD IN (#dsContrDtlTpCd#, #dsContrDtlTpCdAgg#)
                    )
                )
            </isEqual>
            <!-- START 2017/06/19 T.Mizuki [QC#19256,ADD] -->
            AND DTL.DS_CONTR_DTL_STS_CD  &lt;&gt;    #dsContrDtlStsOrdr#
            <!-- END 2017/06/19 T.Mizuki [QC#19256,ADD] -->
            AND
                DTL.EZCANCELFLAG = '0'
            AND
                DTL.GLBL_CMPY_CD = DTP.GLBL_CMPY_CD
            AND
                DTL.DS_CONTR_DTL_TP_CD = DTP.DS_CONTR_DTL_TP_CD
            AND
                DTP.SVC_PRC_FLG = #flgOffN#
            AND
                DTP.EZCANCELFLAG = '0'
            AND
                DTL.GLBL_CMPY_CD = MSTR.GLBL_CMPY_CD (+)
            AND
                DTL.SVC_MACH_MSTR_PK = MSTR.SVC_MACH_MSTR_PK (+)
            AND
                DTL.EZCANCELFLAG = MSTR.EZCANCELFLAG (+)
            AND
                MSTR.EZCANCELFLAG (+) = '0'
            AND
                DTL.GLBL_CMPY_CD = ESCL.GLBL_CMPY_CD (+)
            AND
                DTL.DS_CONTR_PK = ESCL.DS_CONTR_PK (+)
            AND
                DTL.DS_CONTR_DTL_PK = ESCL.DS_CONTR_DTL_PK (+)
            AND
                DTL.EZCANCELFLAG = ESCL.EZCANCELFLAG (+)
            AND
                ESCL.DS_CONTR_MACH_LVL_NUM (+) = #dsContrMachLvlNum2#
            AND
                ESCL.EZCANCELFLAG (+) = '0'
            <!-- Add Start 2019/01/24 QC#29782 -->
            AND
                DTL.GLBL_CMPY_CD = M.GLBL_CMPY_CD(+)
            AND
                DTL.SVC_PGM_MDSE_CD = M.MDSE_CD(+)
            AND
                M.EZCANCELFLAG(+) = '0'
            AND
                M.GLBL_CMPY_CD = SPT.GLBL_CMPY_CD(+)
            AND
                M.SVC_PGM_TP_CD = SPT.SVC_PGM_TP_CD(+)
            AND
                SPT.EZCANCELFLAG(+) = '0'
            AND
                DTL.GLBL_CMPY_CD = DTLP.GLBL_CMPY_CD(+)
            AND
                DTL.PRNT_DS_CONTR_DTL_PK = DTLP.DS_CONTR_DTL_PK(+)
            AND
                DTLP.EZCANCELFLAG(+) = '0'
            AND
                DTLP.GLBL_CMPY_CD = MSTRP.GLBL_CMPY_CD(+)
            AND
                DTLP.SVC_MACH_MSTR_PK = MSTRP.SVC_MACH_MSTR_PK(+)
            AND
                MSTRP.EZCANCELFLAG(+) = '0'
            <!-- Add End 2019/01/24 QC#29782 -->
        UNION ALL
            SELECT
                 ''                                                         AS XX_SCR_ITEM_34_TXT
                ,NULL                                                       AS SER_NUM
                <!-- Add Start 2019/01/24 QC#29782 -->
                ,NULL                                                       AS SVC_MACH_MSTR_PK
                ,NULL                                                       AS MDSE_DESC_SHORT_TXT
                ,SPT.SVC_PGM_TP_SORT_NUM                                    AS SVC_PGM_TP_SORT_NUM
                ,NVL(DTL.DS_CONTR_CRAT_TP_CD, #dsContrCratTp#)              AS DS_CONTR_CRAT_TP_CD
                ,NVL(MSTRP.SER_NUM, MSTR.SER_NUM)                           AS SORT_SER_NUM
                ,NVL(MSTRP.MDSE_CD, MSTR.MDSE_CD)                           AS SORT_MDSE_CD
                <!-- Add End 2019/01/24 QC#29782 -->
                ,NVL(ESCL.DS_CONTR_BASE_USG_NM, 'BASE')                     AS DS_CONTR_BASE_USG_NM
                ,NULL                                                       AS CONTR_EFF_FROM_DT
                ,NULL                                                       AS CONTR_EFF_THRU_DT
                ,ESCL.CONTR_UPLFT_TP_CD                                     AS CONTR_UPLFT_TP_CD
                ,ESCL.UPLFT_PRC_METH_CD                                     AS UPLFT_PRC_METH_CD
                ,ESCL.UPLFT_BEF_END_RNW_DAYS_AOT                            AS UPLFT_BEF_END_RNW_DAYS_AOT
                ,ESCL.UPLFT_BASE_PRC_UP_RATIO                               AS UPLFT_BASE_PRC_UP_RATIO
                ,ESCL.UPLFT_MTR_PRC_UP_RATIO                                AS UPLFT_MTR_PRC_UP_RATIO
                <!-- START 2018/11/16 K.Kitachi [QC#28638, MOD] -->
                <!-- ,ESCL.FIRST_YR_CONTR_UPLFT_FLG                              AS FIRST_YR_CONTR_UPLFT_FLG -->
                <!-- ,ESCL.SCD_YR_CONTR_UPLFT_FLG                                AS SCD_YR_CONTR_UPLFT_FLG -->
                <!-- ,ESCL.THIRD_YR_CONTR_UPLFT_FLG                              AS THIRD_YR_CONTR_UPLFT_FLG -->
                <!-- ,ESCL.FRTH_YR_CONTR_UPLFT_FLG                               AS FRTH_YR_CONTR_UPLFT_FLG -->
                <!-- ,ESCL.FIFTH_YR_CONTR_UPLFT_FLG                              AS FIFTH_YR_CONTR_UPLFT_FLG -->
                ,ESCL.MAX_PRC_UP_RATIO                                      AS MAX_PRC_UP_RATIO
                ,ESCL.FIX_TERM_IN_MTH_AOT                                   AS FIX_TERM_IN_MTH_AOT
                ,ESCL.UPLFT_FIXED_DT                                        AS UPLFT_FIXED_DT
                ,ESCL.UPLFT_PCY_DT                                          AS UPLFT_PCY_DT
                ,DTL.CONTR_EFF_FROM_DT                                      AS CONTR_EFF_FROM_DT_BK
                ,DTL.CONTR_EFF_THRU_DT                                      AS CONTR_EFF_THRU_DT_BK
                <!-- END 2018/11/16 K.Kitachi [QC#28638, MOD] -->
                ,CONTR.GLBL_CMPY_CD                                         AS GLBL_CMPY_CD
                ,CONTR.DS_CONTR_PK                                          AS DS_CONTR_PK 
                ,DTL.DS_CONTR_DTL_PK                                        AS DS_CONTR_DTL_PK
                ,ESCL.DS_CONTR_RNW_ESCL_PK                                  AS DS_CONTR_RNW_ESCL_PK
                ,CONTR.DS_CONTR_CATG_CD                                     AS DS_CONTR_CATG_CD
                ,CONTR.DS_CONTR_NUM                                         AS DS_CONTR_NUM
                ,NVL(ESCL.DS_CONTR_MACH_LVL_NUM, '3')                       AS DS_CONTR_MACH_LVL_NUM
                ,DTL.DS_CONTR_DTL_TP_CD                                     AS DS_CONTR_DTL_TP_CD
                ,CONTR.DS_CONTR_STS_CD                                      AS DS_CONTR_STS_CD
                ,DTL.DS_CONTR_DTL_STS_CD                                    AS DS_CONTR_DTL_STS_CD
                ,(
                    CASE
                        WHEN DTL.DS_CONTR_DTL_TP_CD = #dsContrDtlTpCd2# THEN 
                            DTL.PRNT_DS_CONTR_DTL_PK
                        ELSE
                            DTL.DS_CONTR_DTL_PK
                    END
                 )                                                          AS SORT_NUM
<!-- START 2018/10/04 K.Kojima [QC#28620, ADD] -->
                ,(
                    CASE
                        WHEN DTL.DS_CONTR_DTL_TP_CD = #dsContrDtlTpCd2# THEN 
                            DTL.DS_CONTR_DTL_PK
                        ELSE
                            NULL
                    END
                 )                                                          AS SORT_NUM2
<!-- END 2018/10/04 K.Kojima [QC#28620, ADD] -->
                ,0                                                          AS MTR_CNT_ALL
                ,0                                                          AS MTR_CNT_INV
                ,ESCL.EZUPTIME                                              AS EZUPTIME
                ,ESCL.EZUPTIMEZONE                                          AS EZUPTIMEZONE
<!-- START 2016/12/08 N.Arai [QC#14204, ADD] -->
                ,ESCL.EZINTIME                                              AS XX_REC_HIST_CRAT_TS
                ,ESCL.EZINUSERID                                            AS XX_REC_HIST_CRAT_BY_NM
                ,ESCL.EZUPTIME                                              AS XX_REC_HIST_UPD_TS
                ,ESCL.EZUPUSERID                                            AS XX_REC_HIST_UPD_BY_NM
                ,ESCL.EZTABLEID                                             AS XX_REC_HIST_TBL_NM
<!-- END 2016/12/08 N.Arai [QC#14204, ADD] -->
            FROM
                 DS_CONTR CONTR
                ,DS_CONTR_DTL DTL
                ,DS_CONTR_RNW_ESCL ESCL
                <!-- Add Start 2019/01/24 QC#29782 -->
                ,MDSE M
                ,SVC_PGM_TP SPT
                ,SVC_MACH_MSTR MSTR
                ,DS_CONTR_DTL DTLP
                ,SVC_MACH_MSTR MSTRP
                <!-- Add End 2019/01/24 QC#29782 -->
            WHERE
                CONTR.GLBL_CMPY_CD = #glblCmpyCd#
            <iterate property="dsContrPkList" var="dsContrPk[]" open="AND CONTR.DS_CONTR_PK IN (" close=")" conjunction=",">
                #dsContrPk[]#
            </iterate>
            AND
                CONTR.EZCANCELFLAG = '0'
            <!-- START 2018/11/28 T.Tomita [QC#28638, ADD] -->
            AND CONTR.DS_CONTR_CATG_CD &lt;&gt; #dsContrCatgCdAgg#
            <!-- END 2018/11/28 T.Tomita [QC#28638, ADD] -->
            AND
                CONTR.GLBL_CMPY_CD = DTL.GLBL_CMPY_CD
            AND
                CONTR.DS_CONTR_PK = DTL.DS_CONTR_PK
            <!-- START 2017/06/19 T.Mizuki [QC#19256,ADD] -->
            AND DTL.DS_CONTR_DTL_STS_CD  &lt;&gt;    #dsContrDtlStsOrdr#
            <!-- END 2017/06/19 T.Mizuki [QC#19256,ADD] -->
            AND
                DTL.EZCANCELFLAG = '0'
            AND
                DTL.GLBL_CMPY_CD = ESCL.GLBL_CMPY_CD (+) 
            AND
                DTL.DS_CONTR_PK = ESCL.DS_CONTR_PK (+) 
            AND
                DTL.DS_CONTR_DTL_PK  = ESCL.DS_CONTR_DTL_PK (+) 
            AND
                ((CONTR.DS_CONTR_CATG_CD = #dsContrCatgCd# AND DTL.DS_CONTR_DTL_TP_CD = #dsContrDtlTpCd#) OR CONTR.DS_CONTR_CATG_CD &lt;&gt; #dsContrCatgCd#)
            <isEqual property="existContrDtlPk" compareValue="Y">
            AND (
                    (
                    <iterate property="dsContrDtlPkList" var="dsContrDtlPk[]" open="DTL.DS_CONTR_DTL_PK IN (" close=")" conjunction=",">
                        #dsContrDtlPk[]#
                    </iterate>
                    ) OR (
                        DTL.DS_CONTR_DTL_TP_CD IN (#dsContrDtlTpCd#, #dsContrDtlTpCdAgg#)
                    )
                )
            </isEqual>
            AND
                ESCL.DS_CONTR_MACH_LVL_NUM (+) = #dsContrMachLvlNum3#
            AND
                ESCL.DS_CONTR_BASE_USG_NM (+) = #dsContrBaseUsgNm1#
            AND 
                ESCL.EZCANCELFLAG (+)  = '0'
            AND
                EXISTS(SELECT * FROM
                    DS_CONTR_DTL_TP DTP
                    WHERE
                        DTL.GLBL_CMPY_CD = DTP.GLBL_CMPY_CD 
                    AND DTL.DS_CONTR_DTL_TP_CD = DTP.DS_CONTR_DTL_TP_CD
                    AND DTP.BASE_CHRG_FLG ='Y'
                    AND DTP.EZCANCELFLAG ='0')
            <!-- Add Start 2019/01/24 QC#29782 -->
            AND
                DTL.GLBL_CMPY_CD = M.GLBL_CMPY_CD(+)
            AND
                DTL.SVC_PGM_MDSE_CD = M.MDSE_CD(+)
            AND
                M.EZCANCELFLAG(+) = '0'
            AND
                M.GLBL_CMPY_CD = SPT.GLBL_CMPY_CD(+)
            AND
                M.SVC_PGM_TP_CD = SPT.SVC_PGM_TP_CD(+)
            AND
                SPT.EZCANCELFLAG(+) = '0'
            AND
                DTL.GLBL_CMPY_CD = MSTR.GLBL_CMPY_CD(+)
            AND
                DTL.SVC_MACH_MSTR_PK = MSTR.SVC_MACH_MSTR_PK(+)
            AND
                MSTR.EZCANCELFLAG(+) = '0'
            AND
                DTL.GLBL_CMPY_CD = DTLP.GLBL_CMPY_CD(+)
            AND
                DTL.PRNT_DS_CONTR_DTL_PK = DTLP.DS_CONTR_DTL_PK(+)
            AND
                DTLP.EZCANCELFLAG(+) = '0'
            AND
                DTLP.GLBL_CMPY_CD = MSTRP.GLBL_CMPY_CD(+)
            AND
                DTLP.SVC_MACH_MSTR_PK = MSTRP.SVC_MACH_MSTR_PK(+)
            AND
                MSTRP.EZCANCELFLAG(+) = '0'
            <!-- Add End 2019/01/24 QC#29782 -->
            UNION ALL
            SELECT
                 ''                                                         AS XX_SCR_ITEM_34_TXT
                ,NULL                                                       AS SER_NUM
                <!-- Add Start 2019/01/24 QC#29782 -->
                ,NULL                                                       AS SVC_MACH_MSTR_PK
                ,NULL                                                       AS MDSE_DESC_SHORT_TXT
                ,SPT.SVC_PGM_TP_SORT_NUM                                    AS SVC_PGM_TP_SORT_NUM
                ,NVL(DTL.DS_CONTR_CRAT_TP_CD, #dsContrCratTp#)              AS DS_CONTR_CRAT_TP_CD
                ,NVL(MSTRP.SER_NUM, MSTR.SER_NUM)                           AS SORT_SER_NUM
                ,NVL(MSTRP.MDSE_CD, MSTR.MDSE_CD)                           AS SORT_MDSE_CD
                <!-- Add End 2019/01/24 QC#29782 -->
                ,NVL(ESCL.DS_CONTR_BASE_USG_NM, 'OVERAGE')                  AS DS_CONTR_BASE_USG_NM
                ,NULL                                                       AS CONTR_EFF_FROM_DT
                ,NULL                                                       AS CONTR_EFF_THRU_DT
                ,ESCL.CONTR_UPLFT_TP_CD                                     AS CONTR_UPLFT_TP_CD
                ,ESCL.UPLFT_PRC_METH_CD                                     AS UPLFT_PRC_METH_CD
                ,ESCL.UPLFT_BEF_END_RNW_DAYS_AOT                            AS UPLFT_BEF_END_RNW_DAYS_AOT
                ,ESCL.UPLFT_BASE_PRC_UP_RATIO                               AS UPLFT_BASE_PRC_UP_RATIO
                ,ESCL.UPLFT_MTR_PRC_UP_RATIO                                AS UPLFT_MTR_PRC_UP_RATIO
                <!-- START 2018/11/16 K.Kitachi [QC#28638, MOD] -->
                <!-- ,ESCL.FIRST_YR_CONTR_UPLFT_FLG                              AS FIRST_YR_CONTR_UPLFT_FLG -->
                <!-- ,ESCL.SCD_YR_CONTR_UPLFT_FLG                                AS SCD_YR_CONTR_UPLFT_FLG -->
                <!-- ,ESCL.THIRD_YR_CONTR_UPLFT_FLG                              AS THIRD_YR_CONTR_UPLFT_FLG -->
                <!-- ,ESCL.FRTH_YR_CONTR_UPLFT_FLG                               AS FRTH_YR_CONTR_UPLFT_FLG -->
                <!-- ,ESCL.FIFTH_YR_CONTR_UPLFT_FLG                              AS FIFTH_YR_CONTR_UPLFT_FLG -->
                ,ESCL.MAX_PRC_UP_RATIO                                      AS MAX_PRC_UP_RATIO
                ,ESCL.FIX_TERM_IN_MTH_AOT                                   AS FIX_TERM_IN_MTH_AOT
                ,ESCL.UPLFT_FIXED_DT                                        AS UPLFT_FIXED_DT
                ,ESCL.UPLFT_PCY_DT                                          AS UPLFT_PCY_DT
                ,DTL.CONTR_EFF_FROM_DT                                      AS CONTR_EFF_FROM_DT_BK
                ,DTL.CONTR_EFF_THRU_DT                                      AS CONTR_EFF_THRU_DT_BK
                <!-- END 2018/11/16 K.Kitachi [QC#28638, MOD] -->
                ,CONTR.GLBL_CMPY_CD                                         AS GLBL_CMPY_CD
                ,CONTR.DS_CONTR_PK                                          AS DS_CONTR_PK 
                ,DTL.DS_CONTR_DTL_PK                                        AS DS_CONTR_DTL_PK
                ,ESCL.DS_CONTR_RNW_ESCL_PK                                  AS DS_CONTR_RNW_ESCL_PK
                ,CONTR.DS_CONTR_CATG_CD                                     AS DS_CONTR_CATG_CD
                ,CONTR.DS_CONTR_NUM                                         AS DS_CONTR_NUM
                ,NVL(ESCL.DS_CONTR_MACH_LVL_NUM, '3')                       AS DS_CONTR_MACH_LVL_NUM
                ,DTL.DS_CONTR_DTL_TP_CD                                     AS DS_CONTR_DTL_TP_CD
                ,CONTR.DS_CONTR_STS_CD                                      AS DS_CONTR_STS_CD
                ,DTL.DS_CONTR_DTL_STS_CD                                    AS DS_CONTR_DTL_STS_CD
                ,(
                    CASE
                        WHEN DTL.DS_CONTR_DTL_TP_CD ='ACC' THEN 
                            DTL.PRNT_DS_CONTR_DTL_PK
                        ELSE
                            DTL.DS_CONTR_DTL_PK
                    END
                 )                                                          AS SORT_NUM
<!-- START 2018/10/04 K.Kojima [QC#28620, ADD] -->
                ,(
                    CASE
                        WHEN DTL.DS_CONTR_DTL_TP_CD = #dsContrDtlTpCd2# THEN 
                            DTL.DS_CONTR_DTL_PK
                        ELSE
                            NULL
                    END
                 )                                                          AS SORT_NUM2
<!-- END 2018/10/04 K.Kojima [QC#28620, ADD] -->
                ,(
                    SELECT
                        COUNT(*) AS CNT_MTR
                    FROM DS_CONTR_BLLG_MTR MTR
                    WHERE
                        MTR.DS_CONTR_DTL_PK = DTL.DS_CONTR_DTL_PK
                    AND
                        MTR.GLBL_CMPY_CD = DTL.GLBL_CMPY_CD
                    AND
                        MTR.EZCANCELFLAG = '0'
                 )                                                          AS MTR_CNT_ALL
                ,(
                    SELECT
                        COUNT(*) AS MTR_CNT_INV
                    FROM DS_CONTR_BLLG_MTR MTR
                    WHERE
                        MTR.DS_CONTR_DTL_PK = DTL.DS_CONTR_DTL_PK
                    <iterate property="dsContrBllgMtrStsList" var="dsContrBllgMtrSts[]" open="AND MTR.DS_CONTR_BLLG_MTR_STS_CD IN (" close=")" conjunction=",">
                        #dsContrBllgMtrSts[]#
                    </iterate>
                    AND
                        MTR.GLBL_CMPY_CD = ESCL.GLBL_CMPY_CD
                    AND
                        MTR.EZCANCELFLAG = '0'
                )                                                           AS MTR_CNT_INV
                ,ESCL.EZUPTIME                                              AS EZUPTIME
                ,ESCL.EZUPTIMEZONE                                          AS EZUPTIMEZONE
<!-- START 2016/12/08 N.Arai [QC#14204, ADD] -->
                ,ESCL.EZINTIME                                              AS XX_REC_HIST_CRAT_TS
                ,ESCL.EZINUSERID                                            AS XX_REC_HIST_CRAT_BY_NM
                ,ESCL.EZUPTIME                                              AS XX_REC_HIST_UPD_TS
                ,ESCL.EZUPUSERID                                            AS XX_REC_HIST_UPD_BY_NM
                ,ESCL.EZTABLEID                                             AS XX_REC_HIST_TBL_NM
<!-- END 2016/12/08 N.Arai [QC#14204, ADD] -->
            FROM
                 DS_CONTR_RNW_ESCL ESCL
                ,DS_CONTR_DTL DTL
                ,DS_CONTR CONTR
                <!-- Add Start 2019/01/24 QC#29782 -->
                ,MDSE M
                ,SVC_PGM_TP SPT
                ,SVC_MACH_MSTR MSTR
                ,DS_CONTR_DTL DTLP
                ,SVC_MACH_MSTR MSTRP
                <!-- Add End 2019/01/24 QC#29782 -->
            WHERE
                CONTR.GLBL_CMPY_CD = #glblCmpyCd#
            <iterate property="dsContrPkList" var="dsContrPk[]" open="AND CONTR.DS_CONTR_PK IN (" close=")" conjunction=",">
                #dsContrPk[]#
            </iterate>
            AND 
                CONTR.EZCANCELFLAG = '0'
            <!-- START 2018/11/28 T.Tomita [QC#28638, ADD] -->
            AND CONTR.DS_CONTR_CATG_CD &lt;&gt; #dsContrCatgCdAgg#
            <!-- END 2018/11/28 T.Tomita [QC#28638, ADD] -->
            AND 
                CONTR.GLBL_CMPY_CD = DTL.GLBL_CMPY_CD
            AND 
                CONTR.DS_CONTR_PK = DTL.DS_CONTR_PK
            AND
                ((CONTR.DS_CONTR_CATG_CD = #dsContrCatgCd# AND DTL.DS_CONTR_DTL_TP_CD = #dsContrDtlTpCd#) OR CONTR.DS_CONTR_CATG_CD &lt;&gt; #dsContrCatgCd#)
            <isEqual property="existContrDtlPk" compareValue="Y">
            AND (
                    (
                    <iterate property="dsContrDtlPkList" var="dsContrDtlPk[]" open="DTL.DS_CONTR_DTL_PK IN (" close=")" conjunction=",">
                        #dsContrDtlPk[]#
                    </iterate>
                    ) OR (
                        DTL.DS_CONTR_DTL_TP_CD IN (#dsContrDtlTpCd#, #dsContrDtlTpCdAgg#)
                    )
                )
            </isEqual>
            <!-- START 2017/06/19 T.Mizuki [QC#19256,ADD] -->
            AND DTL.DS_CONTR_DTL_STS_CD  &lt;&gt;    #dsContrDtlStsOrdr#
            <!-- END 2017/06/19 T.Mizuki [QC#19256,ADD] -->
            AND 
                DTL.EZCANCELFLAG = '0'
            AND 
                DTL.GLBL_CMPY_CD = ESCL.GLBL_CMPY_CD (+) 
            AND 
                DTL.DS_CONTR_PK = ESCL.DS_CONTR_PK (+) 
            AND 
                DTL.DS_CONTR_DTL_PK  = ESCL.DS_CONTR_DTL_PK (+) 
            AND 
                ESCL.DS_CONTR_MACH_LVL_NUM (+) = #dsContrMachLvlNum3#
            AND
                ESCL.DS_CONTR_BASE_USG_NM (+) = #dsContrBaseUsgNm2#
            AND 
                ESCL.EZCANCELFLAG (+) = '0'
            AND 
                EXISTS(SELECT * FROM
                    DS_CONTR_DTL_TP DTP
                    WHERE
                        DTL.GLBL_CMPY_CD = DTP.GLBL_CMPY_CD 
                    AND DTL.DS_CONTR_DTL_TP_CD = DTP.DS_CONTR_DTL_TP_CD
                    AND DTP.USG_CHRG_FLG ='Y'
                    AND DTP.EZCANCELFLAG ='0')
            <!-- Add Start 2019/01/24 QC#29782 -->
            AND
                DTL.GLBL_CMPY_CD = M.GLBL_CMPY_CD(+)
            AND
                DTL.SVC_PGM_MDSE_CD = M.MDSE_CD(+)
            AND
                M.EZCANCELFLAG(+) = '0'
            AND
                M.GLBL_CMPY_CD = SPT.GLBL_CMPY_CD(+)
            AND
                M.SVC_PGM_TP_CD = SPT.SVC_PGM_TP_CD(+)
            AND
                SPT.EZCANCELFLAG(+) = '0'
            AND
                DTL.GLBL_CMPY_CD = MSTR.GLBL_CMPY_CD(+)
            AND
                DTL.SVC_MACH_MSTR_PK = MSTR.SVC_MACH_MSTR_PK(+)
            AND
                MSTR.EZCANCELFLAG(+) = '0'
            AND
                DTL.GLBL_CMPY_CD = DTLP.GLBL_CMPY_CD(+)
            AND
                DTL.PRNT_DS_CONTR_DTL_PK = DTLP.DS_CONTR_DTL_PK(+)
            AND
                DTLP.EZCANCELFLAG(+) = '0'
            AND
                DTLP.GLBL_CMPY_CD = MSTRP.GLBL_CMPY_CD(+)
            AND
                DTLP.SVC_MACH_MSTR_PK = MSTRP.SVC_MACH_MSTR_PK(+)
            AND
                MSTRP.EZCANCELFLAG(+) = '0'
            <!-- Add End 2019/01/24 QC#29782 -->
        )
    ORDER BY
         DS_CONTR_PK
        ,SORT_NUM NULLS FIRST
<!-- START 2018/10/04 K.Kojima [QC#28620, ADD] -->
        ,SORT_NUM2 NULLS FIRST
<!-- END 2018/10/04 K.Kojima [QC#28620, ADD] -->
        <!-- Add Start 2019/01/24 QC#29782 -->
        ,SORT_SER_NUM
        ,SORT_MDSE_CD
        ,SVC_PGM_TP_SORT_NUM
        ,DS_CONTR_CRAT_TP_CD
        <!-- Add End 2019/01/24 QC#29782 -->
        ,DS_CONTR_MACH_LVL_NUM
        ,DS_CONTR_BASE_USG_NM   NULLS FIRST
    </statement>
    <resultMap id="result.getContrInfo" class="NSAL0740_ASMsg">
        <result property="xxScrItem34Txt_D1" column="XX_SCR_ITEM_34_TXT" javaType="EZDSStringItem" />
        <result property="serNum_D1" column="SER_NUM" javaType="EZDSStringItem" />
        <!-- Add Start 2019/01/24 QC#29782 -->
        <result property="svcMachMstrPk_D1" column="SVC_MACH_MSTR_PK" javaType="EZDSBigDecimalItem" />
        <result property="mdseDescShortTxt_D1" column="MDSE_DESC_SHORT_TXT" javaType="EZDSStringItem" />
        <!-- Add End 2019/01/24 QC#29782 -->
        <result property="dsContrBaseUsgNm_D1" column="DS_CONTR_BASE_USG_NM" javaType="EZDSStringItem" />
        <result property="contrEffFromDt_D1" column="CONTR_EFF_FROM_DT" javaType="EZDSDateItem" />
        <result property="contrEffThruDt_D1" column="CONTR_EFF_THRU_DT" javaType="EZDSDateItem" />
        <result property="contrUplftTpCd_D3" column="CONTR_UPLFT_TP_CD" javaType="EZDSStringItem" />
        <result property="uplftPrcMethCd_D3" column="UPLFT_PRC_METH_CD" javaType="EZDSStringItem" />
        <result property="uplftBefEndRnwDaysAot_D1" column="UPLFT_BEF_END_RNW_DAYS_AOT" javaType="EZDSBigDecimalItem" />
        <result property="uplftBasePrcUpRatio_D1" column="UPLFT_BASE_PRC_UP_RATIO" javaType="EZDSBigDecimalItem" />
        <result property="uplftMtrPrcUpRatio_D1" column="UPLFT_MTR_PRC_UP_RATIO" javaType="EZDSBigDecimalItem" />
        <!-- START 2018/11/16 K.Kitachi [QC#28638, MOD] -->
        <!-- <result property="xxChkBox_E1" column="FIRST_YR_CONTR_UPLFT_FLG" javaType="EZDSStringItem" /> -->
        <!-- <result property="xxChkBox_E2" column="SCD_YR_CONTR_UPLFT_FLG" javaType="EZDSStringItem" /> -->
        <!-- <result property="xxChkBox_E3" column="THIRD_YR_CONTR_UPLFT_FLG" javaType="EZDSStringItem" /> -->
        <!-- <result property="xxChkBox_E4" column="FRTH_YR_CONTR_UPLFT_FLG" javaType="EZDSStringItem" /> -->
        <!-- <result property="xxChkBox_E5" column="FIFTH_YR_CONTR_UPLFT_FLG" javaType="EZDSStringItem" /> -->
        <result property="maxPrcUpRatio_D1"    column="MAX_PRC_UP_RATIO"          javaType="EZDSBigDecimalItem" />
        <result property="fixTermInMthAot_D1"  column="FIX_TERM_IN_MTH_AOT"       javaType="EZDSBigDecimalItem" />
        <result property="uplftFixedDt_D1"     column="UPLFT_FIXED_DT"            javaType="EZDSDateItem" />
        <result property="uplftPcyDt_D1"       column="UPLFT_PCY_DT"              javaType="EZDSDateItem" />
        <result property="contrEffFromDt_BK"   column="CONTR_EFF_FROM_DT_BK"      javaType="EZDSDateItem" />
        <result property="contrEffThruDt_BK"   column="CONTR_EFF_THRU_DT_BK"      javaType="EZDSDateItem" />
        <!-- END 2018/11/16 K.Kitachi [QC#28638, MOD] -->
        <result property="glblCmpyCd_D1" column="GLBL_CMPY_CD" javaType="EZDSStringItem" />
        <result property="dsContrPk_D1" column="DS_CONTR_PK" javaType="EZDSBigDecimalItem" />
        <result property="dsContrDtlPk_D1" column="DS_CONTR_DTL_PK" javaType="EZDSBigDecimalItem" />
        <result property="dsContrRnwEsclPk_D1" column="DS_CONTR_RNW_ESCL_PK" javaType="EZDSBigDecimalItem" />
        <result property="dsContrCatgCd_D1" column="DS_CONTR_CATG_CD" javaType="EZDSStringItem" />
        <result property="dsContrNum_D1" column="DS_CONTR_NUM" javaType="EZDSStringItem" />
        <result property="dsContrMachLvlNum_D1" column="DS_CONTR_MACH_LVL_NUM" javaType="EZDSStringItem" />
        <result property="dsContrDtlTpCd_D1" column="DS_CONTR_DTL_TP_CD" javaType="EZDSStringItem" />
        <result property="dsContrStsCd_D1" column="DS_CONTR_STS_CD" javaType="EZDSStringItem" />
        <result property="dsContrDtlStsCd_D1" column="DS_CONTR_DTL_STS_CD" javaType="EZDSStringItem" />
        <result property="xxNum_D1" column="MTR_CNT_ALL" javaType="EZDSBigDecimalItem" />
        <result property="xxNum_D2" column="MTR_CNT_INV" javaType="EZDSBigDecimalItem" />
        <result property="ezUpTime_D1" column="EZUPTIME" javaType="EZDSDateItem" />
        <result property="ezUpTimeZone_D1" column="EZUPTIMEZONE" javaType="EZDSDateItem" />
<!-- START 2016/12/08 N.Arai [QC#14204, ADD] -->
        <result property="xxRecHistCratTs_A"   column="XX_REC_HIST_CRAT_TS"       javaType="EZDSStringItem"/>
        <result property="xxRecHistCratByNm_A" column="XX_REC_HIST_CRAT_BY_NM"    javaType="EZDSStringItem"/>
        <result property="xxRecHistUpdTs_A"    column="XX_REC_HIST_UPD_TS"        javaType="EZDSStringItem"/>
        <result property="xxRecHistUpdByNm_A"  column="XX_REC_HIST_UPD_BY_NM"     javaType="EZDSStringItem"/>
        <result property="xxRecHistTblNm_A"    column="XX_REC_HIST_TBL_NM"        javaType="EZDSStringItem"/>
<!-- END 2016/12/08 N.Arai [QC#14204, ADD] -->
    </resultMap>

<!-- START 2017/12/21 M.Kidokoro [QC#22660, ADD] -->
    <statement id="isExistDiffThruDate" parameterClass="Map" resultClass="Integer">
        SELECT
            COUNT(*)
        FROM
            DS_CONTR_DTL DCD
        WHERE
            DCD.GLBL_CMPY_CD = #glblCmpyCd#
        AND DCD.DS_CONTR_PK  = #dsContrPk#
        AND DCD.EZCANCELFLAG = '0'
        HAVING
            MIN(DCD.CONTR_EFF_THRU_DT) &lt;&gt; MAX(DCD.CONTR_EFF_THRU_DT)
    </statement>
<!-- END 2017/12/21 M.Kidokoro [QC#22660, ADD] -->
</sqlMap>
