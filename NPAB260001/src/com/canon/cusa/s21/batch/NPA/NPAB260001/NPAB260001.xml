<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NPAB260001">

    <statement id="searchPo" parameterClass="Map" resultClass="Map">
    SELECT 
         PO.PO_ORD_NUM
        ,PD.PO_ORD_DTL_LINE_NUM
        ,NVL(PD.CPO_ORD_NUM, NVL(PD.PRCH_REQ_NUM, PD.PO_ORD_NUM)) AS CPO_ORD_NUM
        ,PO.PRNT_VND_CD
        ,PO.PRNT_VND_NM
        ,VND.VND_CD
        ,PO.CARR_ACCT_NUM
        ,PO.RQST_RCV_DT
        ,PO.RQST_RCV_TM
        ,PO.VND_PMT_TERM_CD
        ,PO.VND_PMT_TERM_DESC_TXT
        ,PO.PO_QLFY_CD
        ,PO.PO_APVL_DT
        ,PO.PO_ORD_SRC_CD
        ,PO.PRCH_GRP_CD
        ,DPT.DS_PO_TP_CD
        ,DPT.PO_INTFC_PO_TP_NM
        ,PMRN.PO_MSG_TXT         AS PO_MSG_TXT_RN
        ,PMSN.PO_MSG_TXT         AS PO_MSG_TXT_SN
        ,PMSI.PO_MSG_TXT         AS PO_MSG_TXT_SI
        ,AP.LAST_NM
        ,AP.FIRST_NM
        ,AP.WRK_TEL_NUM
        ,PD.CCY_CD
        ,PD.CARR_CD
        ,OCV.CARR_NM
        ,PD.FRT_CHRG_METH_CD
        ,FC.FRT_CHRG_TO_CD
        ,FC.FRT_COND_NM
        ,PD.SHPG_SVC_LVL_CD
        ,SSL.SHPG_SVC_LVL_NM
        ,PD.CUST_ISS_PO_NUM
        ,PD.SHIP_TO_LOC_NM
        ,PD.SHIP_TO_ADDL_LOC_NM
        ,PD.SHIP_TO_FIRST_LINE_ADDR
        ,PD.SHIP_TO_SCD_LINE_ADDR
        ,PD.SHIP_TO_THIRD_LINE_ADDR
        ,PD.SHIP_TO_FRTH_LINE_ADDR
        <!-- START 2022/03/08 R.Azucena [QC#59752, MOD] -->
        <!-- ,PD.SHIP_TO_FIRST_LINE_ADDR || PD.SHIP_TO_SCD_LINE_ADDR || PD.SHIP_TO_THIRD_LINE_ADDR || PD.SHIP_TO_FRTH_LINE_ADDR AS SHIP_TO_LINE_ADDR -->
        ,PD.SHIP_TO_FIRST_LINE_ADDR || ' ' || PD.SHIP_TO_SCD_LINE_ADDR || ' ' || PD.SHIP_TO_THIRD_LINE_ADDR || ' ' || PD.SHIP_TO_FRTH_LINE_ADDR AS SHIP_TO_LINE_ADDR
        <isEqual property="reqSpclHdlg" compareValue="true">
        ,CPO.SELL_TO_FIRST_REF_CMNT_TXT AS ADD_SHIP_TO_01_REF_CMNT_TXT
        </isEqual>
        <!-- END 2022/03/08 R.Azucena [QC#59752, MOD] -->
        ,PD.CTAC_PSN_NM
        ,PD.FRT_COND_CD
        ,PD.SHIP_TO_CTY_ADDR
        ,PD.SHIP_TO_POST_CD
        ,PD.SHIP_TO_CTRY_CD
        ,PD.SHIP_TO_PROV_NM
        ,PD.SHIP_TO_ST_CD
        ,PD.PO_ORD_DTL_LINE_NUM
        ,PD.MDSE_CD
        ,PD.MDSE_NM
        ,PD.SHIP_TO_CUST_CD
        ,PD.SHIP_TO_ACCT_NM
        ,PD.PO_DISP_QTY
        ,VU.VND_UOM_CD
        ,VU.VND_UOM_NM
        ,NVL(PD.ASL_MDSE_CD, PD.MDSE_CD) ASL_MDSE_CD
        ,PD.ENT_DEAL_NET_UNIT_PRC_AMT
        ,PD.MDSE_DESC_SHORT_TXT
        ,PD.PO_QTY
        <!-- START 2020/10/14 J.Evangelista [QC#57795,ADD] -->
        <isEqual property="reqSpclHdlg" compareValue="true">
        ,NVL(SHT.SVC_LFTGT_DELY_FLG, #svcLftgtDelyFlg#) AS SVC_LFTGT_DELY_FLG
        ,NVL(SHT.SVC_INSD_DELY_FLG, #svcInsdDelyFlg#) AS SVC_INSD_DELY_FLG
        ,NVL(SHT.SVC_STRT_TRUCK_FLG, #svcStrtTruckFlg#) AS SVC_STRT_TRUCK_FLG
        </isEqual>
        <isEqual property="reqSpclHdlg" compareValue="false">
        ,#svcLftgtDelyFlg#         AS SVC_LFTGT_DELY_FLG
        ,#svcInsdDelyFlg#          AS SVC_INSD_DELY_FLG
        ,#svcStrtTruckFlg#         AS SVC_STRT_TRUCK_FLG
        </isEqual>        
        <!-- END   2020/10/14 J.Evangelista [QC#57795,ADD] -->
    FROM 
         PO            PO
        ,DS_PO_TP      DPT
        ,PO_MSG        PMSI
        ,PO_MSG        PMRN
        ,PO_MSG        PMSN
        ,VND           VND
        ,AUTH_PSN      AP
        ,PO_DTL        PD
        ,OTBD_CARR_V   OCV
        ,FRT_COND      FC
        ,VND_UOM       VU
        ,SHIP_TO_CUST  STC
        ,SHPG_SVC_LVL  SSL
        ,RCV_ASN_VND   RAV
        <!-- START 2020/10/14 J.Evangelista [QC#57795,ADD] -->
        <isEqual property="reqSpclHdlg" compareValue="true">
        ,CPO           CPO
        ,SPCL_HDLG_TP  SHT
        </isEqual>
        <!-- END   2020/10/14 J.Evangelista [QC#57795,ADD] -->
    WHERE 1=1 
        AND PO.GLBL_CMPY_CD          = #glblCmpyCd#
        <isNotNull property="cpoOrdNum">
        AND PD.CPO_ORD_NUM           = #cpoOrdNum#
        </isNotNull>
        AND PD.SHPG_SVC_LVL_CD       = SSL.SHPG_SVC_LVL_CD (+)
        <!-- 2023/10/16 K.Ogino [QC#61969,MOD Start] -->
        <!--
        AND PO.GLBL_CMPY_CD          = DPT.GLBL_CMPY_CD (+)
        AND PO.DS_PO_TP_CD           = DPT.DS_PO_TP_CD (+)
         -->
        AND PO.GLBL_CMPY_CD          = DPT.GLBL_CMPY_CD
        AND PO.DS_PO_TP_CD           = DPT.DS_PO_TP_CD
        AND DPT.EDI_SEND_FLG         = 'Y' 
        <!-- 2023/10/16 K.Ogino [QC#61969,MOD End] -->
        AND PO.GLBL_CMPY_CD          = VND.GLBL_CMPY_CD (+)
        AND PO.VND_CD                = VND.VND_CD (+)
        AND PO.GLBL_CMPY_CD          = PMSI.GLBL_CMPY_CD (+)
        AND PO.PO_ORD_NUM            = PMSI.PO_ORD_NUM (+)
        AND PMSI.PO_MSG_TP_CD (+)    = #poMsgTpCd03#
        AND PMSI.PO_MSG_SEG_ID (+)   = 0
        AND PO.GLBL_CMPY_CD          = PMRN.GLBL_CMPY_CD (+)
        AND PO.PO_ORD_NUM            = PMRN.PO_ORD_NUM (+)
        AND PMRN.PO_MSG_TP_CD (+)    = #poMsgTpCd04#
        AND PMRN.PO_MSG_SEG_ID (+)   = 0
        AND PO.GLBL_CMPY_CD          = PMSN.GLBL_CMPY_CD (+)
        AND PO.PO_ORD_NUM            = PMSN.PO_ORD_NUM (+)
        AND PMSN.PO_MSG_TP_CD (+)    = #poMsgTpCd05#
        AND PMSN.PO_MSG_SEG_ID (+)   = 0
        AND PO.GLBL_CMPY_CD          = PD.GLBL_CMPY_CD
        AND PO.PO_ORD_NUM            = PD.PO_ORD_NUM
       <iterate property="poStsCdList" var="poStsCdList[]" open="AND  PD.PO_STS_CD IN (" close=")" conjunction=",">
           #poStsCdList[]#
       </iterate>
        AND PD.GLBL_CMPY_CD          = OCV.GLBL_CMPY_CD (+)
        AND PD.CARR_CD               = OCV.CARR_CD (+)
        AND PD.PO_SEND_TS            IS NULL
        AND PD.GLBL_CMPY_CD          = FC.GLBL_CMPY_CD (+)
        AND PD.FRT_COND_CD           = FC.FRT_COND_CD (+)
        AND PD.GLBL_CMPY_CD          = VU.GLBL_CMPY_CD (+)
        AND PD.PO_DISP_UOM_CD        = VU.VND_UOM_CD (+)
        AND PD.GLBL_CMPY_CD          = STC.GLBL_CMPY_CD (+)
        AND PD.SHIP_TO_CUST_CD       = STC.SHIP_TO_CUST_CD (+)
        AND PO.GLBL_CMPY_CD          = AP.GLBL_CMPY_CD (+)
        AND PO.PO_SUBMT_PSN_CD       = AP.USR_NM (+)
        AND PO.VND_CD                = RAV.RCV_ASN_VND_CD
       <iterate property="vndSysTpCdList" var="vndSysTpCdList[]" open="AND  RAV.VND_SYS_TP_CD IN (" close=")" conjunction=",">
           #vndSysTpCdList[]#
       </iterate>
        AND RAV.EDI_SEND_ID          = #ediSendId#
        <!-- START 2020/10/14 J.Evangelista [QC#57795,ADD] -->
        <isEqual property="reqSpclHdlg" compareValue="true">
        AND PD.GLBL_CMPY_CD          = CPO.GLBL_CMPY_CD (+)
        AND PD.CPO_ORD_NUM           = CPO.CPO_ORD_NUM (+)
        AND CPO.GLBL_CMPY_CD         = SHT.GLBL_CMPY_CD (+)
        AND CPO.SPCL_HDLG_TP_CD      = SHT.SPCL_HDLG_TP_CD (+)
        </isEqual>
        <!-- END   2020/10/14 J.Evangelista [QC#57795,ADD] -->
        AND PO.EZCANCELFLAG          = '0'
        AND SSL.EZCANCELFLAG (+)     = '0'
        AND DPT.EZCANCELFLAG (+)     = '0'
        AND PMSI.EZCANCELFLAG (+)    = '0'
        AND PMRN.EZCANCELFLAG (+)    = '0'
        AND PMSN.EZCANCELFLAG (+)    = '0'
        AND VND.EZCANCELFLAG (+)     = '0'
        AND PD.EZCANCELFLAG          = '0'
        AND OCV.EZCANCELFLAG (+)     = '0'
        AND FC.EZCANCELFLAG (+)      = '0'
        AND VU.EZCANCELFLAG (+)      = '0'
        AND STC.EZCANCELFLAG (+)     = '0'
        AND RAV.EZCANCELFLAG         = '0'
        AND AP.EZCANCELFLAG (+)      = '0'
        <!-- START 2020/10/14 J.Evangelista [QC#57795,ADD] -->
        <isEqual property="reqSpclHdlg" compareValue="true">
        AND CPO.EZCANCELFLAG (+)     = '0'
        AND SHT.EZCANCELFLAG (+)     = '0'
        </isEqual>
        <!-- END   2020/10/14 J.Evangelista [QC#57795,ADD] -->
    ORDER BY
        PO.PO_ORD_NUM
       ,PD.PO_ORD_DTL_LINE_NUM

    </statement>

    <statement id="getTplFrtCond" parameterClass="Map" resultClass="Map">
    SELECT
        TPL_FRT_COND_CD AS FRT_COND_CD
       ,TPL_FRT_COND_NM AS FRT_COND_NM
    FROM
        TPL_FRT_COND_XREF XREF
    WHERE 1=1
        AND XREF.GLBL_CMPY_CD          = #glblCmpyCd#
        AND XREF.EZCANCELFLAG          = '0'
    AND XREF.FRT_COND_CD           = #S21frtCondCd#
     AND ROWNUM                     = 1
    </statement>

    <statement id="getTrdPtnrShpgXRefInfo" parameterClass="Map" resultClass="Map">
    SELECT
         TRD_PTNR_CARR_CD
        ,TRD_PTNR_SHPG_SVC_LVL_CD
        ,TRD_PTNR_FRT_CHRG_METH_CD
        ,TRD_PTNR_SHIP_VIA_CD
        ,CARR_TP_CD
    FROM 
         TRD_PTNR_SHPG_X_REF
    WHERE 1=1 
      AND GLBL_CMPY_CD       = #glblCmpyCd#
     AND EZCANCELFLAG        = '0'
     AND VND_CD              = #vndCd#
     AND CARR_CD             = #carrCd#
      AND SHPG_SVC_LCL_CD    = #shpgSvcLvlCd#
     AND FRT_COND_CD         = #frtCondCd#
      AND ROWNUM             = 1
    </statement>

    <statement id="getcarrTpCd" parameterClass="Map" resultClass="String">
    SELECT
         VND.CARR_TP_CD
    FROM
        VND VND
    WHERE 1=1
    AND VND.GLBL_CMPY_CD     = #glblCmpyCd#
    AND VND.VND_CD           = #carrCd#
    AND VND.EZCANCELFLAG     = '0'
    AND ROWNUM               = 1
    </statement>
    
    <statement id="getCpoInfo" parameterClass="Map" resultClass="Map">
    SELECT
         CPO.DS_ORD_CATG_CD
        <!-- QC#58769 Start -->
        ,CPO.DS_ORD_TP_CD
        <!-- QC#58769 End -->
    FROM
        CPO CPO
    WHERE 1=1
    AND CPO.GLBL_CMPY_CD    = #glblCmpyCd#
    AND CPO.CPO_ORD_NUM     = #cpoOrdNum#
    AND CPO.EZCANCELFLAG    = '0'
    AND ROWNUM              = 1
    </statement>

    <statement id="getCarrAcctNum" parameterClass="Map" resultClass="Map">
    SELECT
         CAX.CARR_ACCT_NUM
        ,CAX.CARR_CD
    FROM
        CARR_ACCT_XREF  CAX
    WHERE
        CAX.GLBL_CMPY_CD      = #glblCmpyCd#
    AND CAX.CARR_TP_CD        = #carrTpCd#
    <isNotNull property="dsOrdCatgCd">
     AND CAX.DS_ORD_CATG_CD   = #dsOrdCatgCd#
    </isNotNull>
    <isNotNull property="dsOrdTpCd">
     <!-- QC#58769 Start -->
     AND CAX.DS_ORD_TP_CD    = #dsOrdTpCd#
     <!-- QC#58769 End -->
    </isNotNull>
    <isNotNull property="prchGrpCd">
     AND CAX.PRCH_GRP_CD      = #prchGrpCd#
    </isNotNull>
    <isNotNull property="poOrdSrcCd">
     AND CAX.PO_ORD_SRC_CD    = #poOrdSrcCd#
    </isNotNull>
    AND CAX.EZCANCELFLAG      = '0'
    AND ROWNUM                = 1
    </statement>

    <statement id="getUomCd" parameterClass="Map" resultClass="String">
    SELECT
        XREF.TRD_PTNR_UOM_CD
    FROM
        TRD_PTNR_UOM_XREF XREF
    WHERE 1=1
    AND XREF.GLBL_CMPY_CD    = #glblCmpyCd#
    AND XREF.PKG_UOM_CD      = #pkgUomCd#
    AND XREF.VND_CD          = #vndCd#
    AND XREF.EZCANCELFLAG    = '0'
    AND ROWNUM               = 1
    </statement>

    <statement id="getPoAckNumberInfo" parameterClass="Map" resultClass="String">
    SELECT
        NVL(MAX(PO_ACK_NUM) + 1, 0) AS PO_ACK_NUM
    FROM
        PO_ACK_HDR
    WHERE 1=1
        AND EZCANCELFLAG  = '0'
        AND GLBL_CMPY_CD  = #glblCmpyCd#
        AND PO_ORD_NUM    = #poOrdNum#
    </statement>

    <!-- START 2020/10/14 J.Evangelista [QC#57795,DEL] --><!--
    <statement id="searchSo" parameterClass="Map" resultClass="Map">
    SELECT 
         SO.SO_NUM
        ,SOD.SO_SLP_NUM
        ,SO.TRX_HDR_NUM
        ,CPO.CUST_ISS_PO_NUM
        ,SO.SO_CRAT_TS
        ,PV.PRNT_VND_CD
        ,PV.PRNT_VND_NM
        ,VND.VND_CD
        ,RAV.VND_SYS_TP_CD
        ,SO.WH_CD
        ,SP.RDD_DT
        ,VND.LOC_NM
        ,SOD.MDSE_CD
        ,NVL(ASLD.SPLY_ITEM_NUM, SOD.MDSE_CD) ASL_MDSE_CD
        ,SO.CUST_ISS_PO_NUM
        ,SO.SHPG_SVC_LVL_CD
        ,SSL.SHPG_SVC_LVL_NM
        ,SP.RQST_CARR_CD
        ,SO.CARR_ACCT_NUM
        ,SP.CARR_ACCT_SHIP_NUM
        ,SOD.RQST_ORD_QTY
        ,SP.CUST_UOM_CD AS VND_UOM_CD
        ,VU.VND_UOM_NM
        ,SP.SP_DEAL_UNIT_PRC_AMT
        ,SP.SP_TOT_DEAL_SLS_AMT
        ,SP_TOT_DEAL_NET_AMT
        ,SP.CCY_CD
        ,SO.CARR_CD
        ,OCV.CARR_NM
        ,SP.PO_ORD_NUM
        ,SO.SHIP_TO_CUST_CD
        ,SOCD.SO_CUST_LINE_LOC_NM_01
        ,SOCD.SO_CUST_LINE_LOC_NM_02
        ,SOCD.SO_CUST_LINE_LOC_NM_01 || SOCD.SO_CUST_LINE_LOC_NM_02   AS SO_CUST_LINE_LOC_NM
        ,SOCD.SO_CUST_LINE_ADDR_01
        ,SOCD.SO_CUST_LINE_ADDR_02
        ,SOCD.SO_CUST_LINE_ADDR_03
        ,SOCD.SO_CUST_LINE_ADDR_04
        ,SOCD.SO_CUST_LINE_ADDR_01 || SOCD.SO_CUST_LINE_ADDR_02 || SOCD.SO_CUST_LINE_ADDR_03 || SOCD.SO_CUST_LINE_ADDR_04  AS SO_CUST_LINE_ADDR
        ,SOCD.CTAC_PTNR_PSN_NM
        ,SOCD.CTRY_CD
        ,SOCD.ST_CD
        ,SOCD.CTY_ADDR
        ,SOCD.CTAC_PTNR_PSN_TEL_NUM
        ,SOCD.POST_CD
        ,VND.VND_PMT_TERM_CD
        ,VND.VND_PMT_TERM_DESC_TXT
        ,SP.SELL_TO_CUST_CD
        ,CPO.ADMIN_PSN_CD
        ,AP.LAST_NM
        ,AP.FIRST_NM
        ,AP.WRK_TEL_NUM
        ,FC.FRT_CHRG_TO_CD
        ,FC.FRT_COND_NM
        ,FC.FRT_COND_CD
        ,MDSE.MDSE_DESC_SHORT_TXT
        ,VND.VND_PMT_METH_CD
        ,CPO.CPO_ORD_NUM
        ,SO.SO_EDI_SEND_STS_CD
        ,SP.SHIP_TO_LOC_NM
    FROM 
        SHPG_ORD            SO
       ,SHPG_ORD_DTL        SOD
       ,SHPG_PLN            SP
       ,SHPG_ORD_CUST_DTL   SOCD
       ,ASL_DTL             ASLD
       ,OTBD_CARR_V         OCV
       ,SHPG_SVC_LVL        SSL
       ,CMBN_PO_LOC         CPL
       ,RCV_ASN_VND         RAV
       ,VND_UOM             VU
       ,VND                 VND
       ,PRNT_VND            PV
       ,AUTH_PSN            AP
       ,CPO                 CPO
       ,FRT_COND            FC
       ,MDSE                MDSE
    WHERE 1 = 1
       <isNotNull property="trxHdrNum">
        AND SO.TRX_HDR_NUM          = #trxHdrNum#
        </isNotNull>
       <iterate property="ediSendStsCdList" var="ediSendStsCdList[]" open="AND SO.EDI_SEND_STS_CD IN (" close=")" conjunction=",">
           #ediSendStsCdList[]#
       </iterate>
        AND SO.GLBL_CMPY_CD         = #glblCmpyCd#
        AND SO.GLBL_CMPY_CD         = SOD.GLBL_CMPY_CD
        AND SO.SO_NUM               = SOD.SO_NUM
        AND SO.SHPG_STS_CD          = #shpgStsCd#
       <iterate property="sceOrdTpCdList" var="sceOrdTpCdList[]" open="AND SCE_ORD_TP_CD IN (" close=")" conjunction=",">
           #sceOrdTpCdList[]#
       </iterate>
        AND SO.GLBL_CMPY_CD         = SOCD.GLBL_CMPY_CD
        AND SO.SO_NUM               = SOCD.SO_NUM
       <iterate property="soEdiSendStsCdList" var="soEdiSendStsCdList[]" open="AND ( SO.SO_EDI_SEND_STS_CD IS NULL OR SO_EDI_SEND_STS_CD IN (" close="))" conjunction=",">
           #soEdiSendStsCdList[]#
       </iterate>
       <isNull property="soEdiSendStsCdList">
        AND SO.SO_EDI_SEND_STS_CD IS NULL
       </isNull>
        AND SOCD.SO_CUST_DATA_TP_CD = #soCustDataTpCd#
        AND SOD.GLBL_CMPY_CD        = SP.GLBL_CMPY_CD
        AND SOD.SHPG_PLN_NUM        = SP.SHPG_PLN_NUM
        AND SO.GLBL_CMPY_CD         = OCV.GLBL_CMPY_CD (+)
        AND SO.CARR_CD              = OCV.CARR_CD (+)
        AND SO.GLBL_CMPY_CD         = SSL.GLBL_CMPY_CD (+)
        AND SO.SHPG_SVC_LVL_CD      = SSL.SHPG_SVC_LVL_CD (+)
        AND SOD.GLBL_CMPY_CD        = ASLD.GLBL_CMPY_CD (+)
        AND SOD.MDSE_CD             = ASLD.MDSE_CD (+)
        AND RAV.RCV_ASN_VND_CD      = ASLD.VND_CD (+)
        AND ASLD.GLBL_CMPY_CD       = VND.GLBL_CMPY_CD
        AND ASLD.VND_CD             = VND.VND_CD
        AND VND.GLBL_CMPY_CD        = PV.GLBL_CMPY_CD
        AND VND.PRNT_VND_PK         = PV.PRNT_VND_PK
        AND VND.GLBL_CMPY_CD        = RAV.GLBL_CMPY_CD
        AND VND.GLBL_CMPY_CD        = CPL.GLBL_CMPY_CD
        AND VND.VND_CD              = CPL.CMBN_PO_LOC_VND_CD
        AND SO.WH_CD                = CPL.CMBN_PO_LOC_CD
        AND VND.VND_CD              = RAV.RCV_ASN_VND_CD
       <iterate property="vndSysTpCdList" var="vndSysTpCdList[]" open="AND  RAV.VND_SYS_TP_CD IN (" close=")" conjunction=",">
           #vndSysTpCdList[]#
       </iterate>
        AND RAV.EDI_SEND_ID         = #ediSendId#
        AND SP.GLBL_CMPY_CD         = VU.GLBL_CMPY_CD (+)
        AND SP.CUST_UOM_CD          = VU.VND_UOM_CD (+)
        AND CPO.GLBL_CMPY_CD        = AP.GLBL_CMPY_CD (+)
        AND CPO.ADMIN_PSN_CD        = AP.USR_NM (+)
        AND SP.GLBL_CMPY_CD         = CPO.GLBL_CMPY_CD
        AND SP.TRX_HDR_NUM          = CPO.CPO_ORD_NUM
        AND CPO.GLBL_CMPY_CD        = FC.GLBL_CMPY_CD (+)
        AND CPO.FRT_COND_CD         = FC.FRT_COND_CD (+)
        AND SOD.GLBL_CMPY_CD        = MDSE.GLBL_CMPY_CD
        AND SOD.MDSE_CD             = MDSE.MDSE_CD
        AND SO.EZCANCELFLAG         = '0'
        AND SOD.EZCANCELFLAG        = '0'
        AND SP.EZCANCELFLAG         = '0'
        AND SOCD.EZCANCELFLAG       = '0'
        AND SSL.EZCANCELFLAG (+)    = '0'
        AND RAV.EZCANCELFLAG        = '0'
        AND ASLD.EZCANCELFLAG (+)   = '0'
        AND OCV.EZCANCELFLAG (+)    = '0'
        AND VND.EZCANCELFLAG        = '0'
        AND PV.EZCANCELFLAG         = '0'
        AND VU.EZCANCELFLAG         = '0'
        AND CPO.EZCANCELFLAG        = '0'
        AND AP.EZCANCELFLAG (+)     = '0'
        AND FC.EZCANCELFLAG (+)     = '0'
        AND MDSE.EZCANCELFLAG       = '0'
        ORDER BY 
            SOD.SO_NUM
           ,SOD.SO_SLP_NUM
    </statement>

    <statement id="validatedCombineSoExists" parameterClass="Map" resultClass="Map">
    SELECT
        SP.SHPG_PLN_NUM
    FROM 
        SHPG_PLN    SP
       ,CPO_DTL     CD
       ,CMBN_PO_LOC CB
    WHERE 1 = 1
        AND SP.EZCANCELFLAG     = '0'
        AND SP.GLBL_CMPY_CD     = #glblCmpyCd#
        AND CD.EZCANCELFLAG     = '0'
        AND SP.GLBL_CMPY_CD     = CD.GLBL_CMPY_CD
        AND CD.EZCANCELFLAG     = '0'
        AND CD.GLBL_CMPY_CD     = CB.GLBL_CMPY_CD
        AND CB.EZCANCELFLAG     = '0'
        AND SP.TRX_HDR_NUM      = #trxHdrNum#
        AND SP.TRX_HDR_NUM      = CD.CPO_ORD_NUM
        AND SP.TRX_LINE_NUM     = CD.CPO_DTL_LINE_NUM
        AND SP.TRX_LINE_SUB_NUM = CD.CPO_DTL_LINE_SUB_NUM
        AND CD.RTL_WH_CD        = CB.CMBN_PO_LOC_CD
        AND SP.SO_NUM           IS NULL
        AND CD.CPO_ORD_SUBMT_TS BETWEEN #waitStartTime# AND #waitEndTime#
        AND ROWNUM              = 1
    </statement>

    <statement id="getSoMsg" parameterClass="Map" resultClass="Map">
    SELECT
        SOM.SO_MSG_DESC_TXT
    FROM
        SHPG_ORD_MSG SOM
    WHERE 1=1
        AND SOM.EZCANCELFLAG     = '0'
        AND SOM.GLBL_CMPY_CD     = #glblCmpyCd#
        AND SOM.SO_NUM           = #soNum#
    ORDER BY 
        SOM.TXT_SQ_NUM
    </statement>
    --><!-- END 2020/10/14 J.Evangelista [QC#57795,DEL] -->




</sqlMap>

