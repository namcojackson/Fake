<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NSBL0320Query">
    <statement id="getSearchDataCLTP" parameterClass="Map" resultClass="Map">
            SELECT
                  CDTXT
                , CD
            FROM (
                SELECT
                      A.DS_SVC_CALL_TP_CD || '-' || A.DS_SVC_CALL_TP_DESC_TXT AS CDTXT 
                    , A.DS_SVC_CALL_TP_CD AS CD
                FROM
                    DS_SVC_CALL_TP A
                WHERE
                        A.GLBL_CMPY_CD = #glblCmpyCd#
                    AND A.EZCANCELFLAG = '0'
                ORDER BY
                    A.DS_SVC_CALL_TP_CD ASC
            )
            WHERE
                ROWNUM  &lt;=#limitCnt#
    </statement>

    <statement id="getSearchDataSTS" parameterClass="Map" resultClass="Map">
            SELECT
                  CDTXT
                , CD
            FROM (
                SELECT
                      B.SVC_TASK_STS_DESC_TXT || '/' || C.SVC_TASK_STS_DESC_TXT AS CDTXT 
                    , TO_CHAR(A.FSR_SVC_TASK_STS_RELN_PK) AS CD
                FROM
                      FSR_SVC_TASK_STS_RELN A
                    , SVC_TASK_STS B
                    , SVC_TASK_STS C
                WHERE
                        A.GLBL_CMPY_CD     = #glblCmpyCd#
                    AND A.FSR_STS_CD       = B.SVC_TASK_STS_CD 
                    AND A.FSR_VISIT_STS_CD = C.SVC_TASK_STS_CD
                    AND A.GLBL_CMPY_CD     = B.GLBL_CMPY_CD
                    AND A.GLBL_CMPY_CD     = C.GLBL_CMPY_CD
                    AND A.EZCANCELFLAG     = '0'
                    AND B.EZCANCELFLAG     = '0'
                    AND C.EZCANCELFLAG     = '0'
                    AND A.$colNm$ = 'Y' 
                ORDER BY 
                    A.SVC_TASK_RELN_SORT_NUM ASC
            )
            WHERE
                ROWNUM  &lt;=#limitCnt#

    </statement>

    <statement id="getSearchDataASGN" parameterClass="Map" resultClass="Map">
<!-- mod start 2016/10/18 CSA Defect#11030 --> 
            SELECT
                  CDTXT
                , CD
            FROM (
                SELECT
                      DISTINCT(B.TECH_NM) AS CDTXT
                    , TECH_TOC_CD         AS CD
                FROM
                      OPEN_SVC_TASK_DTL A
                    , TECH_MSTR B
                WHERE
                        A.GLBL_CMPY_CD        = #glblCmpyCd#
                    AND A.SVC_MGR_TP_CD       = #svcMgrTpCd#
                <isNotNull property="svcMgrPsnCd">
                    AND A.SVC_MGR_PSN_CD      = #svcMgrPsnCd# 
                </isNotNull>
<!-- START 2017/12/04 M.Kidokoro [QC#22483, DEL] -->
<!--                    AND A.OPEN_TASK_LTST_FLG  = 'Y' -->
<!-- END 2017/12/04 M.Kidokoro [QC#22483, DEL] -->
                <isNotNull property="firstOrgCd">
                    AND A.FIRST_ORG_CD        = #orgCd#
                </isNotNull>
                <isNotNull property="scdOrgCd">
                    AND A.SCD_ORG_CD          = #orgCd#
                </isNotNull>
                <isNotNull property="thirdOrgCd">
                    AND A.THIRD_ORG_CD        = #orgCd#
                </isNotNull>
                <isNotNull property="frthOrgCd">
                    AND A.FRTH_ORG_CD         = #orgCd#
                </isNotNull>
                <isNotNull property="fifthOrgCd">
                    AND A.FIFTH_ORG_CD        = #orgCd#
                </isNotNull>
                <isNotNull property="sixthOrgCd">
                    AND A.SIXTH_ORG_CD        = #orgCd#
                </isNotNull>
                <isNotNull property="svnthOrgCd">
                    AND A.SVNTH_ORG_CD        = #orgCd#
                </isNotNull>
                <isNotNull property="eighthOrgCd">
                    AND A.EIGHTH_ORG_CD       = #orgCd#
                </isNotNull>
                <isNotNull property="ninthOrgCd">
                    AND A.NINTH_ORG_CD        = #orgCd#
                </isNotNull>
                <isNotNull property="tenthOrgCd">
                    AND A.TENTH_ORG_CD        = #orgCd#
                </isNotNull>
                <isNotNull property="elvthOrgCd">
                    AND A.ELVTH_ORG_CD        = #orgCd#
                </isNotNull>
                <isNull property="orgLayerNum">
                    AND (
                            A.FIRST_ORG_CD    = #orgCd#
                        OR  A.SCD_ORG_CD      = #orgCd#
                        OR  A.THIRD_ORG_CD    = #orgCd#
                        OR  A.FRTH_ORG_CD     = #orgCd#
                        OR  A.FIFTH_ORG_CD    = #orgCd#
                        OR  A.SIXTH_ORG_CD    = #orgCd#
                        OR  A.SVNTH_ORG_CD    = #orgCd#
                        OR  A.EIGHTH_ORG_CD   = #orgCd#
                        OR  A.NINTH_ORG_CD    = #orgCd#
                        OR  A.TENTH_ORG_CD    = #orgCd#
                        OR  A.ELVTH_ORG_CD    = #orgCd#
                    )
                </isNull>
                    AND B.TECH_TOC_CD         = A.TECH_CD
                    AND B.GLBL_CMPY_CD        = A.GLBL_CMPY_CD
                    AND A.EZCANCELFLAG        = '0'
                    AND B.EZCANCELFLAG        = '0'
                ORDER BY 
                    B.TECH_NM NULLS LAST
            )
            WHERE
                ROWNUM             &lt;= #limitCnt#
<!-- mod end 2016/10/18 CSA Defect#11030 --> 
    </statement>

    <statement id="getSearchDataCNNL" parameterClass="Map" resultClass="Map">
            SELECT
                  CDTXT
                , CD
            FROM(
                SELECT
                      A.SVC_CALL_SRC_TP_DESC_TXT AS CDTXT
                    , A.SVC_CALL_SRC_TP_CD       AS CD
                FROM
                    SVC_CALL_SRC_TP A
                WHERE
                        A.GLBL_CMPY_CD = #glblCmpyCd#
                    AND A.EZCANCELFLAG = '0'
                ORDER BY
                    A.SVC_CALL_SRC_TP_DESC_TXT ASC
            )
            WHERE
                ROWNUM        &lt;=#limitCnt#
    </statement>
</sqlMap>
