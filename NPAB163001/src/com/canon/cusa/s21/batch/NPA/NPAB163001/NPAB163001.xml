<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NPAB163001">

    <!-- #################### Type Alias #################### -->

    <!-- #################### Statement #################### -->
    <statement id="getTechOrdPrtSq" parameterClass="Map" resultClass="Map">
       WITH TECH_ORD_PRT_INFO AS (
           SELECT
               CTO.TECH_ORD_PRT_SQ
               ,MAX(CTO.EZINTIME) AS EZINTIME
           FROM
               CLICK_TECH_ORD_PRT CTO
           WHERE
               CTO.GLBL_CMPY_CD = #glblCmpyCd#
           AND CTO.PROC_STS_CD  IN (#inCompleted#, #error#)
           AND CTO.EZCANCELFLAG = '0'
           GROUP BY
               CTO.TECH_ORD_PRT_SQ
       )
       SELECT
           TOP.TECH_ORD_PRT_SQ
          ,TOP.EZINTIME
       FROM
           TECH_ORD_PRT_INFO TOP
       ORDER BY
           TOP.EZINTIME DESC
    </statement>
    <statement id="getTechOrdPrt" parameterClass="Map" resultClass="Map">
       SELECT
           CTO.CLICK_TECH_ORD_PRT_PK
          ,CTO.TECH_ORD_PRT_SQ
          ,CTO.VLD_ACT_CD
          ,CTO.MDSE_CD_OR_SHORT_TXT
          ,CTO.PRCH_REQ_QTY
          ,CTO.PRCH_REQ_TP_NM
          ,CTO.RQST_RCV_DT_TXT
          ,CTO.SHIP_TO_CUST_NM
          ,CTO.FIRST_INVTY_ORD_CMNT_TXT
          ,CTO.SVC_TASK_NUM
          ,CTO.RQST_TECH_TOC_CD
          ,CTO.PRCH_REQ_STS_NM
          ,CTO.PRCH_REQ_NUM
          ,CTO.DEST_RTL_WH_CD
          ,CTO.MDSE_CD
          ,CTO.MDSE_DESC_SHORT_TXT
          ,CTO.PROC_STS_CD
          ,CTO.TECH_ORD_PRT_SEND_TS
          ,CTO.CLICK_KEY_TXT
          ,CTO.LGSC_ORD_RMK_TXT
       FROM
           CLICK_TECH_ORD_PRT CTO
       WHERE
           CTO.GLBL_CMPY_CD     = #glblCmpyCd#
       AND CTO.TECH_ORD_PRT_SQ  = #techOrdPrtSq#
       AND CTO.PROC_STS_CD     IN (#inCompleted#, #error#)
       AND CTO.EZCANCELFLAG     = '0'
       ORDER BY
           CTO.EZINTIME DESC
    </statement>
</sqlMap>
