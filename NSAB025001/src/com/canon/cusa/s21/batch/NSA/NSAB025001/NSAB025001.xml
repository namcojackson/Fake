<?xml version="1.0" encoding="UTF-8"?>

<sqlMap namespace="NSAB025001">
    <statement id="getTargetDataList" parameterClass="Map" resultClass="Map">
        SELECT
            SMM.GLBL_CMPY_CD
           ,SMM.SVC_MACH_MSTR_PK
           ,SMM.SER_NUM
           ,SMM.IWR_RGTN_STS_CD
           ,IRS.IWR_RGTN_RQST_FLG
           ,IRS.IWR_DE_RGTN_RQST_FLG
        FROM
            SVC_MACH_MSTR        SMM
           ,IWR_RGTN_STS         IRS
        WHERE
            SMM.GLBL_CMPY_CD                = #glblCmpyCd#
            AND SMM.EZCANCELFLAG            = '0'
            AND IRS.GLBL_CMPY_CD            = #glblCmpyCd#
            AND SMM.IWR_RGTN_STS_CD         = IRS.IWR_RGTN_STS_CD
            AND ((    IRS.IWR_RGTN_RQST_FLG     = 'Y'
                  AND IRS.IWR_DE_RGTN_RQST_FLG  &lt;&gt; 'Y'
                )
                OR (  IRS.IWR_RGTN_RQST_FLG     &lt;&gt; 'Y'
                  AND IRS.IWR_DE_RGTN_RQST_FLG  = 'Y'
                ))
            AND IRS.EZCANCELFLAG            = '0'
        ORDER BY
            SMM.SER_NUM
           ,SMM.SVC_MACH_MSTR_PK
    </statement>
</sqlMap>