<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NWAB415001">

    <statement id="getNWAI4150_01" parameterClass="Map" resultClass="Map">
        SELECT
                  INTERFACE_ID
                , TRANSACTION_ID
                , SEGMENT_ID
                , UNIT_ID
                , SEQ_NUMBER
                , INTFC_REC_ID
                , SOM_QUOTE_NM
                , SOM_QUOTE_ID
                , SOM_QUOTE_NUM
                , SOM_QUOTE_STS_NM
                , SOM_SLS_REP_ID
                , SOM_SLS_REP_LAST_NM
                , SOM_SLS_REP_FIRST_NM
                , SOM_BR_NM
                , CRAT_BY_TXT
                , CRAT_TS
                , SOM_SHIP_TO_CUST_ID
                , SHIP_TO_ACCT_NUM
                , SHIP_TO_CUST_LEGAL_NM
                , SOM_SHIP_TO_CUST_NM
                , SHIP_TO_ADDR_DESC_TXT_01
                , SHIP_TO_ADDR_DESC_TXT_02
                , SHIP_TO_CITY_TXT
                , SHIP_TO_CNTY_TXT
                , SHIP_TO_ST_TXT
                , SOM_SHIP_TO_ZIP_CD
                , SOM_SHIP_TO_PTY_NUM
                , SHIP_TO_CUST_PTY_SITE_NUM
                , SHIP_TO_CRM_SLS_ID
                , SHIP_TO_CRM_SLS_NUM
                , EOPS_FM_DEPT_CD
                , SOM_DISC_AMT
                , PRC_LIST_DESC_TXT
                , CUSA_CH_TXT
                , NEGO_DEAL_AMT
                , SVC_INCL_IND_SOM_TXT
                , BILL_TO_CUST_LEGAL_NM
                , BILL_TO_DBA_TXT
                , BLLG_CMPY_TXT
                , BLLG_ADDR_DESC_TXT
                , BLLG_CITY_DESC_TXT
                , BLLG_ST_TXT
                , BLLG_ZIP_TXT
                , LEASE_CMPY_NM
                , SOM_LEASE_RATE
                , LEASE_SVC_IND_SOM_TXT
                , LEASE_TAX_IND_SOM_TXT
                , LEASE_TAX_RATE
                , SOM_LEASE_TERM_AOT
                , LEASE_PMT_AMT
                , LEASE_SVC_PMT_AMT
                , LEASE_EQUIP_PMT_AMT
                , LEASE_EQUIP_TP_TXT
                , CPC_RNTL_IND_SOM_TXT
                , LEASE_RG_IND_SOM_TXT
                , LEASE_TRTY_IND_SOM_TXT
                , LEASE_CUSA_CH_TXT
                , LEASE_APP_TXT
                , LEASE_PRCH_ORDER_TXT
                , LEASE_UPG_AMT
                , SOM_REV_AMT
                , LEASE_DOWN_PMT_AMT
                , LEASE_SOFT_COST_RATE
                , LEASE_IN_ELIG_FIN_AMT
                , LEASE_IN_ELIG_RATE
                , LEASE_CR_AMT
                , LEASE_CR_APPLY_TO_TXT
                , ISTL_REP_NM
                , ISTL_REP_TXT
                , ISTL_BR_DRCTR_NM
                , ISTL_BR_DRCTR_NUM
                , ISTL_BR_DESC_TXT
                , SOM_SPIFF_DTL_TXT_02
                , BILL_TO_CTAC_LAST_NM
                , BILL_TO_CTAC_FIRST_NM
                , BILL_TO_CTAC_PHO_TXT
                , BILL_TO_CTAC_PHO_EXT_TXT
                , BILL_TO_CTAC_FAX_TXT
                , BILL_TO_CTAC_EML_TXT
                , CHK_ORD_IND_SOM_TXT
                , EOPS_TRX_TP_TXT
                , NET_THRTY_IND_SOM_TXT
                , OTH_AQU_IND_SOM_TXT
                , OTH_PMT_TXT_AQU_TXT
                , SOM_CHK_NUM
                , SOM_CR_CARD_NUM
                , SOM_CR_CARD_EXPR_TXT
                , SOM_CR_CARD_NM
                , DELY_CTAC_LAST_NM
                , DELY_CTAC_FIRST_NM
                , DELY_CTAC_PHO_TXT
                , DELY_CTAC_PHO_EXT_TXT
                , DELY_CTAC_EML_TXT
                , ERLST_DELY_TS
                , SALES_TAX_RATE
                , IT_CTAC_LAST_NM
                , IT_CTAC_FIRST_NM
                , IT_CTAC_PHO_TXT
                , IT_CTAC_PHO_EXT_TXT
                , IT_CTAC_EML_TXT
                , IT_CTAC_DEPT_TXT
                , PO_REQ_IND_SOM_TXT
                , SOM_PO_NUM
                , TAX_EXEM_IND_SOM_TXT
                , DCLN_MAINT_IND_SOM_TXT
                , SHIP_VIA_INSTN_TXT
                , HRS_OP_TXT
                , SOM_STEP_CNT
                , ELEV_IND_SOM_TXT
                , LOAD_DOCK_IND_SOM_TXT
                , DELY_INSTN_TXT
                , DELY_CHRG_AMT
                , SOM_DEP_AMT
                , ZERO_DUE_IND_SOM_TXT
                , SEC_DEP_AMT
                , SVC_PRVD_TXT
                , LEASE_TP_TXT
                , LEASE_FAX_IND_SOM_TXT
                , MTH_PMT_IND_SOM_TXT
                , QTLY_PMT_TXT
                , OTH_LEASE_IND_SOM_TXT
                , OTH_PMT_LEASE_TXT
                , ACH_RTE_CD
                , ACH_ACCT_NUM
                , NON_RF_IND_SOM_TXT
                , CHK_AGMT_IND_SOM_TXT
                , REAL_FAIR_IND_SOM_TXT
                , SUB_SVC_PMT_TERM_TXT
                , SUB_SVC_AGMT_TERM_TXT
                , SOM_SUB_SVC_AOT
                , SUB_SVC_FIRST_NM
                , SUB_SVC_LAST_NM
                , SUB_SVC_PHO_TXT
                , SUB_SVC_EML_TXT
                , MARK_VIEW_BRCD_TXT
                , LAST_UPD_TS
                , ISTL_FEE_AMT
                , SOM_SPIFF_DTL_TXT_01
                , MAINT_BILL_IND_SOM_TXT
                , MAINT_BILL_CTAC_FIRST_NM
                , MAINT_BILL_CTAC_LAST_NM
                , MAINT_BILL_CTAC_PHO_TXT
                , MAINT_BILL_CTAC_PHO_EXT_TXT
                , MAINT_BILL_CTAC_EML_TXT
                , MAINT_BLLG_ADDR_DESC_TXT
                , MAINT_BLLG_CITY_DESC_TXT
                , MAINT_BLLG_ST_TXT
                , MAINT_BLLG_ZIP_TXT
                , MAINT_BLLG_CNTY_TXT
                , BID_PRC_LIST_NM
                , DELY_FAX_TXT
                , MAINT_PO_VRSN_TXT
                , SOM_PRC_LIST_ID
                , CSA_PMT_CTAC_FIRST_NM
                , CSA_PMT_CTAC_LAST_NM
                , CSA_PMT_CTAC_PHO_TXT
                , CSA_PMT_PHO_EXT_TXT
                , CSA_PMT_CTAC_EML_TXT
                , CSA_PMT_CTAC_TP_TXT
                , SOM_ACCT_MGR_TXT
                , REB_MERC_CD
                , SOM_REB_RATE
                , SOM_REB_AMT
                , SOM_VRSN_ID
                , SOM_MAINT_PO_NUM
                , CUST_ISS_PO_DT
                , PRC_CONTR_NUM
                , PRC_CONTR_NM
                , PRC_CONTR_PK
                , CSMP_IND_SOM_TXT
                , SOM_CSMP_NUM
                , CSMP_CR_AMT
                , SUBMT_TO_OM_TS
            FROM
                NWAI4150_01
            WHERE
                EZCANCELFLAG         = '0'
                AND INTERFACE_ID     = #interfaceId#
                AND TRANSACTION_ID   = #transactionId#
                <!-- NOT EXISTS CPO -->
                AND NOT EXISTS ( 
                    SELECT
                              '1'
                        FROM
                            CPO C
                        WHERE
                            C.EZCANCELFLAG          = '0'
                            AND C.GLBL_CMPY_CD      = #glblCmpyCd#
                            AND C.CPO_SRC_TP_CD     = #cpoSrcTpEOSP#
                            AND C.ORD_SRC_REF_NUM   = 'E' || LPAD(SOM_QUOTE_ID, 9, '0')
                )
                <!-- NOT EXISTS IMPT_STS NOT IN (Not Processed, Reject) -->
                AND NOT EXISTS ( 
                    SELECT
                              '1' 
                        FROM
                            DS_IMPT_ORD DIO 
                        WHERE
                            DIO.EZCANCELFLAG        = '0'
                            AND DIO.GLBL_CMPY_CD    = #glblCmpyCd#
                            AND DIO.CPO_SRC_TP_CD   = #cpoSrcTpEOSP#
                            AND DIO.ORD_SRC_REF_NUM = 'E' || LPAD(SOM_QUOTE_ID, 9, '0') 
                            AND DIO.IMPT_STS_CD NOT IN ('01', '02', '05')
                ) 
            ORDER BY
                SOM_QUOTE_ID
    </statement>

    <statement id="getNWAI4150_02" parameterClass="Map" resultClass="Map">
        SELECT
              INTERFACE_ID
            , TRANSACTION_ID
            , SEGMENT_ID
            , UNIT_ID
            , SEQ_NUMBER
            , INTFC_REC_ID
            , SOM_APVL_ID
            , SOM_QUOTE_ID
            , SOM_VRSN_ID
            , APVL_TP_ID
            , SOM_APVL_TP_TXT
            , SOM_STS_TXT
            , SOM_APVL_DESC_TXT
            , WF_START_TS
            , WF_END_TS
            , WF_START_USR_ID
            , WF_END_USR_ID
            , APVL_ADD_USR_ID
            , SHIP_TO_ADDR_KEY_TXT
            , SPLIT_REP_TXT
            , SOM_APVR_NM
            , APVL_ACTV_TXT
        FROM
            NWAI4150_02
        WHERE
            EZCANCELFLAG         = '0'
            AND INTERFACE_ID     = #interfaceId#
            AND TRANSACTION_ID   = #transactionId#
            AND SOM_QUOTE_ID     = #somQuoteId#
        ORDER BY
             SOM_QUOTE_ID
            ,SOM_APVL_ID
    </statement>

    <statement id="getNWAI4150_03" parameterClass="Map" resultClass="Map">
        SELECT
              I03.INTERFACE_ID
            , I03.TRANSACTION_ID
            , I03.SEGMENT_ID
            , I03.UNIT_ID
            , I03.SEQ_NUMBER
            , I03.INTFC_REC_ID
            , I03.SOM_APVL_NOTE_ID
            , I03.SOM_APVL_ID
            , I03.EOPS_APVL_NOTE_TXT
            , I03.APVL_ADD_TS
            , I03.APVL_ADD_USR_ID
            , I02.SOM_QUOTE_ID
        FROM
            NWAI4150_02 I02
           ,NWAI4150_03 I03
        WHERE
            I02.EZCANCELFLAG         = '0'
            AND I02.INTERFACE_ID     = #interfaceId#
            AND I02.TRANSACTION_ID   = #transactionId#
            AND I02.SOM_QUOTE_ID     = #somQuoteId#
            AND I02.INTERFACE_ID     = I03.INTERFACE_ID
            AND I02.TRANSACTION_ID   = I03.TRANSACTION_ID
            AND I02.SOM_APVL_ID      = I03.SOM_APVL_ID
            AND I03.EZCANCELFLAG     = '0'
        ORDER BY
             I02.SOM_QUOTE_ID
            ,I02.SOM_APVL_ID
            ,I03.SOM_APVL_NOTE_ID
    </statement>

    <statement id="getNWAI4150_04" parameterClass="Map" resultClass="Map">
        SELECT
              INTERFACE_ID
            , TRANSACTION_ID
            , SEGMENT_ID
            , UNIT_ID
            , SEQ_NUMBER
            , INTFC_REC_ID
            , SOM_QUOTE_ID
            , SOM_CMSN_AMT
            , SVC_COST_AMT
            , SVC_COST_PMT_AMT
            , SVC_COST_TRNSF_AMT
            , SOM_MKUP_AMT
            , SOM_PCT_MKUP_RATE
            , ORD_TOT_AMT
            , SOM_TOT_FIN_AMT
            , SOM_EQUIP_FIN_AMT
            , SOM_EQUIP_PAY_AMT
            , SOM_SVC_FIN_AMT
            , SOM_SPLY_FIN_AMT
            , SOM_UPG_FIN_AMT
            , SOM_BYOT_FIN_AMT
            , MISC_NON_TAX_ABLE_AMT
            , SOM_OTH_EQUIP_AMT
            , MSRP_LIST_PRC_AMT
            , SOM_SOFT_PCT_COST_RATE
            , SOM_FIN_VS_LIST_RATE
            , SOM_TAX_ABLE_AMT
            , NON_TAX_ABLE_AMT
            , SOM_TAX_AMT
            , SOM_CBS_INV_AMT
            , SOM_FINAL_FL_AMT
            , GP_COST_TRNSF_AMT
            , GP_COST_PCT_TRNSF_RATE
            , TOT_REP_REV_AMT
            , SBSCR_SVC_REP_REV_AMT
            , REP_EQUIP_REV_AMT
            , GP_EQUIP_AMT
            , GP_PCT_EQUIP_RATE
            , EXT_FL_PRC_AMT
            , SOM_TOT_COST_TRNSF_AMT
            , SOM_PRMO_AMT
            , SOM_TRADE_IN_AMT
            , SBSCR_SVC_AMT
            , GP_EQUIP_REV_AMT
            , GP_EQUIP_EARN_AMT
            , SBSCR_SVC_REV_AMT
            , SBSCR_SVC_EARN_AMT
            , INTER_RG_REV_AMT
            , INTER_RG_EARN_AMT
            , INTER_TRTY_REV_AMT
            , INTER_TRTY_EARN_AMT
            , SPIFF_REV_AMT
            , SPIFF_EARN_AMT
            , UNIT_SOLD_REV_AMT
            , UNIT_SOLD_EARN_AMT
            , SOM_TOT_REV_AMT
            , SOM_TOT_EARN_AMT
        FROM
            NWAI4150_04
        WHERE
            EZCANCELFLAG         = '0'
            AND INTERFACE_ID     = #interfaceId#
            AND TRANSACTION_ID   = #transactionId#
            AND SOM_QUOTE_ID     = #somQuoteId#
        ORDER BY
             SOM_QUOTE_ID
    </statement>

    <statement id="getNWAI4150_05" parameterClass="Map" resultClass="Map">
        SELECT
              INTERFACE_ID
            , TRANSACTION_ID
            , SEGMENT_ID
            , UNIT_ID
            , SEQ_NUMBER
            , INTFC_REC_ID
            , SOM_QUOTE_ID
            , SOM_SOFT_COST_ID
            , SOM_MERC_ITEM_CD
            , SOM_ITEM_DESC_TXT
            , SOM_DESC_TXT
            , SOM_ORD_QTY
            , SOM_MDL_TXT
            , QUOTE_LINE_TP_TXT
            , SOM_PRC_AMT
            , SOM_DESC_SER_NUM
            , MTR_READ_CNT
            , RTRN_TP_TXT
            , RTRN_ISTL_TXT
            , DTL_DESC_TXT
            , CFS_IND_SOM_TXT
            , NON_CFS_LEASE_CMPY_TXT
            , SOM_PSN_TXT
            , SOM_CRM_SLS_TXT
            , SOM_ACCT_NUM
            , EOPS_SOFT_COST_ADDR_01
            , EOPS_SOFT_COST_ADDR_02
            , EOPS_SOFT_COST_CITY_TXT
            , SOM_SOFT_COST_ST_CD
            , SOM_SOFT_COST_CNTY_NM
            , SOM_SOFT_COST_ZIP_CD
            , SOM_STEP_CNT
            , SOM_ELEV_CNT
            , SHIP_VIA_TXT
            , HRS_OP_TXT
            , LOAD_DOCK_CNT
            , EOPS_SOFT_COST_INSTN_TXT
            , ERLST_DELY_TS
            , PRIM_EOPS_CTAC_FIRST_NM
            , PRIM_EOPS_CTAC_LAST_NM
            , PRIM_CTAC_PHO_TXT
            , PRIM_PHO_EXT_TXT
            , EOPS_PRIM_EML_TXT
            , SCD_EOPS_CTAC_FIRST_NM
            , SCD_EOPS_CTAC_LAST_NM
            , SCD_CTAC_PHO_TXT
            , SCD_PHO_EXT_TXT
            , SCD_CTAC_EML_TXT
            , EOPS_ISTL_REP_TXT
            , EOPS_ISTL_BR_TXT
            , EOPS_BR_DRCTR_TXT
            , SOM_TAX_RATE
            , SOM_SOFT_COST_DLR_TXT
            , MTR_METH_TXT
            , SPLIT_TP_TXT
            , SOM_BYOT_NM
            , SOM_MNF_TXT
            , SOM_EXT_PRC_AMT
            , EOPS_BYOT_FIRST_NM
            , EOPS_BYOT_LAST_NM
            , EOPS_BYOT_PHO_TXT
            , EOPS_BYOT_PHO_EXT_TXT
            , EOPS_BYOT_ADDR_01
            , EOPS_BYOT_ADDR_02
            , EOPS_BYOT_CITY_TXT
            , EOPS_BYOT_ST_CD
            , EOPS_BYOT_ZIP_CD
        FROM
            NWAI4150_05
        WHERE
            EZCANCELFLAG         = '0'
            AND INTERFACE_ID     = #interfaceId#
            AND TRANSACTION_ID   = #transactionId#
            AND SOM_QUOTE_ID     = #somQuoteId#
        ORDER BY
             SOM_QUOTE_ID
            ,SOM_SOFT_COST_ID
    </statement>

    <statement id="getNWAI4150_06" parameterClass="Map" resultClass="Map">
        SELECT
              INTERFACE_ID
            , TRANSACTION_ID
            , SEGMENT_ID
            , UNIT_ID
            , SEQ_NUMBER
            , INTFC_REC_ID
            , SOM_QUOTE_ID
            , SOM_SOFT_COST_ITEM_ID
            , RTRN_CMPY_ID
            , RTRN_OTH_TXT
            , ORIG_ORD_TS
            , PICK_UP_DT_SAME_TXT
            , PICK_UP_DT_OTH_TXT
            , PICK_UP_DT_OTH_TS
            , PICK_UP_FIRST_NM
            , PICK_UP_LAST_NM
            , PICK_UP_CTAC_PHO_TXT
            , PICK_UP_PHO_EXT_TXT
            , PICK_UP_CTAC_EML_TXT
            , RMV_INSTN_TXT
            , PICK_UP_EOPS_ADDR_01
            , PICK_UP_EOPS_ADDR_02
            , PICK_UP_EOPS_CITY_ADDR
            , PICK_UP_ST_CD
            , PICK_UP_CNTY_NM
            , PICK_UP_ZIP_CD
            , SOM_DESC_SER_NUM
            , SOM_PSN_DESC_TXT
            , SOM_TP_DESC_TXT
            , SOM_MDL_TXT
            , SOM_LEASE_NUM
            , MTR_READ_CNT
            , SOM_LEASE_COMP_TXT
        FROM
            NWAI4150_06
        WHERE
            EZCANCELFLAG         = '0'
            AND INTERFACE_ID     = #interfaceId#
            AND TRANSACTION_ID   = #transactionId#
            AND SOM_QUOTE_ID     = #somQuoteId#
        ORDER BY
             SOM_QUOTE_ID
            ,SOM_SOFT_COST_ITEM_ID
    </statement>

    <statement id="getNWAI4150_08" parameterClass="Map" resultClass="Map">
        SELECT
             INTERFACE_ID
            ,TRANSACTION_ID
            ,SEGMENT_ID
            ,UNIT_ID
            ,SEQ_NUMBER
            ,SOM_DTL_ID
            ,SOM_QUOTE_ID
            ,SPIFF_DTL_AMT
            ,SOM_ITEM_CD
            ,SOM_ITEM_TXT
        FROM
            NWAI4150_08
        WHERE
            EZCANCELFLAG         = '0'
            AND INTERFACE_ID     = #interfaceId#
            AND TRANSACTION_ID   = #transactionId#
            AND SOM_QUOTE_ID     = #somQuoteId#
        ORDER BY
             SOM_QUOTE_ID
            ,SOM_DTL_ID
    </statement>

    <statement id="getNWAI4150_10" parameterClass="Map" resultClass="Map">
        SELECT
                  INTERFACE_ID
                , TRANSACTION_ID
                , SEGMENT_ID
                , UNIT_ID
                , SEQ_NUMBER
                , INTFC_REC_ID
                , SOM_QUOTE_ID
                , SOM_CONFIG_ID
                , SOM_MERC_CD
                , EOPS_SORT_ORD_NUM
                , SOM_MERC_NM
                , SOM_MDL_DESC_TXT
                , SOM_ORD_QTY
                , SOM_CONFIG_QTY
                , USED_DEMO_ID
                , FL_PRC_AMT
                , PRF_PRC_AMT
                , MSRP_LIST_PRC_AMT
                , SELL_PRC_LIST_AMT
                , EXT_SELL_PRC_AMT
                , SOM_MDSE_TP_TXT
                , LTST_PRC_AMT
                , SOM_SEG_TXT
                , ENGNR_BDL_CNT
                , EOPS_NON_COPR_TXT
                , EXT_FL_PRC_AMT
            FROM
                NWAI4150_10 
            WHERE
                EZCANCELFLAG         = '0'
                AND INTERFACE_ID     = #interfaceId#
                AND TRANSACTION_ID   = #transactionId#
                AND SOM_QUOTE_ID     = #somQuoteId#
            ORDER BY
                SOM_QUOTE_ID
                , SOM_CONFIG_ID
                , EOPS_SORT_ORD_NUM
    </statement>

    <statement id="getNWAI4150_12" parameterClass="Map" resultClass="Map">
        SELECT
              INTERFACE_ID
            , TRANSACTION_ID
            , SEGMENT_ID
            , UNIT_ID
            , SEQ_NUMBER
            , INTFC_REC_ID
            , SOM_QUOTE_ID
            , SOM_CONFIG_ID
            , SOM_ORD_QTY
            , LAST_UPD_TS
            , SOM_PSN_CNT
            , SOM_CRM_SLS_TXT
            , SOM_ACCT_NUM
            , SOM_SHIP_TO_ADDR_01
            , SOM_SHIP_TO_ADDR_02
            , SOM_CITY_ADDR
            , SOM_ST_CD
            , SOM_CNTY_NM
            , SOM_ZIP_CD
            , SOM_STEP_CNT
            , SOM_ELEV_CNT
            , SOM_SHIP_VIA_TXT
            , HRS_OP_TXT
            , LOAD_DOCK_CNT
            , EOPS_INSTN_TXT
            , ERLST_DELY_TS
            , PRIM_EOPS_CTAC_FIRST_NM
            , PRIM_EOPS_CTAC_LAST_NM
            , PRIM_CTAC_PHO_TXT
            , PRIM_PHO_EXT_TXT
            , PRIM_CTAC_EML_TXT
            , SCD_EOPS_CTAC_FIRST_NM
            , SCD_EOPS_CTAC_LAST_NM
            , SCD_CTAC_PHO_TXT
            , SCD_PHO_EXT_TXT
            , SCD_CTAC_EML_TXT
            , ISTL_REP_DESC_TXT
            , ISTL_BR_DESC_TXT
            , BR_DRCTR_DESC_TXT
            , SOM_TAX_RATE
            , SOM_DLR_TXT
            , MTR_METH_TXT
            , SPLIT_TP_TXT
            , ADDR_LB_TXT
            , PRC_BOOK_NM
            , FL_PRC_LIST_ID
            , SOM_FL_PRC_LIST_NM
            , BID_PRC_LIST_ID
            , BID_PRC_LIST_NM
            , CSA_PMT_CTAC_FIRST_NM
            , CSA_PMT_CTAC_LAST_NM
            , CSA_PMT_CTAC_PHO_TXT
            , CSA_PMT_PHO_EXT_DESC_TXT
            , CSA_PMT_CTAC_EML_TXT
            , CSA_PMT_TP_TXT
            , EOPS_CONFIG_LTR_TXT
            , MARK_VIEW_BAR_CD_TXT
            , EOPS_BDL_NM
        FROM
            NWAI4150_12
        WHERE
            EZCANCELFLAG         = '0'
            AND INTERFACE_ID     = #interfaceId#
            AND TRANSACTION_ID   = #transactionId#
            AND SOM_QUOTE_ID     = #somQuoteId#
        ORDER BY
             SOM_QUOTE_ID
            ,SOM_CONFIG_ID
    </statement>

    <statement id="getNWAI4150_13" parameterClass="Map" resultClass="Map">
        SELECT
             INTERFACE_ID
            ,TRANSACTION_ID
            ,SEGMENT_ID
            ,UNIT_ID
            ,SEQ_NUMBER
            ,SOM_QUOTE_ID
            ,SOM_CONFIG_ID
            ,SOM_ITEM_CD
        FROM
            NWAI4150_13
        WHERE
            EZCANCELFLAG         = '0'
            AND INTERFACE_ID     = #interfaceId#
            AND TRANSACTION_ID   = #transactionId#
            AND SOM_QUOTE_ID     = #somQuoteId#
        ORDER BY
             SOM_QUOTE_ID
            ,SOM_CONFIG_ID
    </statement>

    <statement id="getNWAI4150_14" parameterClass="Map" resultClass="Map">
        SELECT
                  INTERFACE_ID
                , TRANSACTION_ID
                , SEGMENT_ID
                , UNIT_ID
                , SEQ_NUMBER
                , INTFC_REC_ID
                , SOM_QUOTE_ID
                , SOM_CONFIG_ID
                , SOM_PRMO_SER_NUM
                , SOM_PRMO_CD
                , SOM_PRMO_MDL_NM
                , SOM_PRMO_AMT
                , RTRN_CMPY_ID
                , RTRN_OTH_TXT
                , ORIG_ORD_TS
                , PICK_UP_DT_SAME_CNT
                , PICK_UP_DT_OTH_CNT
                , PICK_UP_DT_OTH_DESC_TXT
                , PICK_UP_CTAC_FIRST_NM
                , PICK_UP_CTAC_LAST_NM
                , PICK_UP_PHO_TXT
                , PICK_UP_PHO_EXT_TXT
                , PICK_UP_EML_TXT
                , SOM_RMV_INSTN_TXT
                , SOM_PRMO_ADDR_01
                , SOM_PRMO_ADDR_02
                , SOM_PRMO_CITY_TXT
                , SOM_PRMO_ST_CD
                , SOM_PRMO_CNTY_NM
                , SOM_PRMO_ZIP_CD
                , EQUIP_COND_ID 
            FROM
                NWAI4150_14
            WHERE
                EZCANCELFLAG         = '0'
                AND INTERFACE_ID     = #interfaceId#
                AND TRANSACTION_ID   = #transactionId#
                AND SOM_QUOTE_ID     = #somQuoteId#
            ORDER BY
                 SOM_QUOTE_ID
                ,SOM_CONFIG_ID
    </statement>

    <statement id="getNWAI4150_16" parameterClass="Map" resultClass="Map">
        SELECT
                  INTERFACE_ID
                , TRANSACTION_ID
                , SEGMENT_ID
                , UNIT_ID
                , SEQ_NUMBER
                , INTFC_REC_ID
                , SOM_SRV_ID
                , SOM_QUOTE_ID
                , FLEET_PLAN_DESC_TXT
                , FLEET_BILL_BY_TXT
                , FLEET_BLLG_CYCLE_TXT
                , CONTR_TP_TXT
                , FLEET_TERM_NUM
                , FLEET_VOL_CLR_CNT
                , FLEET_CLR_CPC_CNT
                , FLEET_VOL_BW_CNT
                , FLEET_BW_CPC_CNT
                , SVC_COST_ID
                , SVC_COST_TRNSF_AMT
                , SVC_COST_TRNSF_TXT
                , SVC_COST_APVL_TXT
                , ADDL_PRMO_ID
                , CLR_OVAG_COST_TRNSF_AMT
                , BW_OVAG_COST_TRNSF_AMT
                , FIN_SVC_COST_AMT
                , STPL_IND_SOM_TXT
                , CT_WAV_IND_SOM_TXT
                , TOT_SVC_COST_AMT
                , TOT_SVC_COST_TRNSF_AMT
                , CONTR_IND_SOM_TXT
                , SOM_CONTR_NUM
                , TOT_SVC_REV_TRNSF_AMT
                , FLEET_BW_REQ_BASE_AMT
                , FLEET_CLR_REQ_BASE_AMT
                , TRNSF_OVRD_IND_SOM_TXT
            FROM
                NWAI4150_16 
            WHERE
                EZCANCELFLAG         = '0'
                AND INTERFACE_ID     = #interfaceId#
                AND TRANSACTION_ID   = #transactionId#
                AND SOM_QUOTE_ID     = #somQuoteId#
            ORDER BY
                SOM_QUOTE_ID
                , SOM_SRV_ID
    </statement>

    <statement id="getNWAI4150_18" parameterClass="Map" resultClass="Map">
        SELECT
                *
        FROM
            NWAI4150_18
        WHERE
            EZCANCELFLAG         = '0'
            AND INTERFACE_ID     = #interfaceId#
            AND TRANSACTION_ID   = #transactionId#
            AND SOM_QUOTE_ID     = #somQuoteId#
        ORDER BY
             SOM_QUOTE_ID
            ,SOM_SRV_ID
            ,SOM_SRV_LINE_ID
    </statement>

    <statement id="getNWAI4150_19" parameterClass="Map" resultClass="Map">
        SELECT
              INTERFACE_ID
            , TRANSACTION_ID
            , SEGMENT_ID
            , UNIT_ID
            , SEQ_NUMBER
            , INTFC_REC_ID
            , SOM_SRV_ID
            , SOM_SRV_LINE_ID
            , SOM_ITEM_CD
            , SOM_MDL_DESC_LONG_TXT
            , SOM_DURN_ID
            , REQ_BASE_AMT
            , PUB_BASE_AMT
            , REQ_SVC_PRC_AMT
            , PUB_SVC_PRC_AMT
            , TOT_COST_TRNSF_AMT
            , DCLN_MAINT_IND_SOM_TXT
            , SOM_UNIT_ID
            , ORCL_MDL_NM
            , SVC_CONTR_IND_SOM_TXT
            , SOM_QUOTE_ID
            , SOM_CONFIG_ID
            , SOM_PKG_NM
            , TOT_SVC_REV_TRNSF_AMT
            , ORIG_COST_TRNSF_AMT
            , ORIG_SVC_REV_TRNSF_AMT
            , PRC_CATG_CD
            , SOM_PRC_CATG_NM 
        FROM
            NWAI4150_19
        WHERE
            EZCANCELFLAG         = '0'
            AND INTERFACE_ID     = #interfaceId#
            AND TRANSACTION_ID   = #transactionId#
            AND SOM_QUOTE_ID     = #somQuoteId#
        ORDER BY
             SOM_QUOTE_ID
            ,SOM_SRV_ID
            ,SOM_SRV_LINE_ID
    </statement>

    <statement id="getNWAI4150_22" parameterClass="Map" resultClass="Map">
        SELECT
                  INTERFACE_ID
                , TRANSACTION_ID
                , SEGMENT_ID
                , UNIT_ID
                , SEQ_NUMBER
                , INTFC_REC_ID
                , SOM_QUOTE_ID
                , SOM_CONFIG_ID
                , SOM_SRV_MTR_TP_NM
                , PUB_BASE_TXT
                , REQ_BASE_TXT
                , PUB_CPC_TXT
                , REQ_CPC_TXT
                , SOM_SRV_VOL_COMIT_TXT
                , SOM_SRV_VOL_AVG_CNT
                , MTH_REQ_PMT_AMT
                , MTH_PUB_PMT_AMT
            FROM
                NWAI4150_22
        WHERE
            EZCANCELFLAG         = '0'
            AND INTERFACE_ID     = #interfaceId#
            AND TRANSACTION_ID   = #transactionId#
            AND SOM_QUOTE_ID     = #somQuoteId#
        ORDER BY
                SOM_QUOTE_ID
                , SOM_CONFIG_ID
    </statement>

    <statement id="getNWAI4150_23" parameterClass="Map" resultClass="Map">
        SELECT
                  INTERFACE_ID
                , TRANSACTION_ID
                , SEGMENT_ID
                , UNIT_ID
                , SEQ_NUMBER
                , INTFC_REC_ID
                , SOM_CONFIG_ITEM_ID
                , SOM_CONFIG_ID
                , SOM_QUOTE_ID
                , SOM_MERC_ITEM_CD
                , SOM_ORD_QTY
                , SOM_SORT_ORD_NUM
                , BID_PMT_AMT
                , BID_PRC_AMT
                , PRF_PRC_AMT
                , SELL_PRCH_AMT
                , SELL_LEASE_AMT
                , MTH_PRC_AMT
                , SOM_LEASE_RATE
                , DLR_CST_AMT
                , AFT_MKT_CR_AMT
                , CSMP_CR_AMT
                , CANON_CASH_AMT
                , CANON_CASH_PCT
                , EOPS_PROMO_AMT
                , EOPS_UPLFT_AMT
                , EOPS_MISC_AMT
                , EOPS_MISC_PCT
                , EOPS_TOT_CST_AMT
                , EOPS_GP_AMT
                , EOPS_GP_PCT
                , EOPS_CST_AMT
            FROM
                NWAI4150_23
            WHERE
                EZCANCELFLAG         = '0'
                AND INTERFACE_ID     = #interfaceId#
                AND TRANSACTION_ID   = #transactionId#
                AND SOM_QUOTE_ID     = #somQuoteId#
            ORDER BY
                    SOM_QUOTE_ID
                    , SOM_CONFIG_ID
                    , SOM_SORT_ORD_NUM
    </statement>

    <statement id="getNWAI4150_24" parameterClass="Map" resultClass="Map">
                SELECT
                          INTERFACE_ID
                        , TRANSACTION_ID
                        , SEGMENT_ID
                        , UNIT_ID
                        , SEQ_NUMBER
                        , INTFC_REC_ID
                        , SOM_QUOTE_ID
                        , EOPS_RTRN_ID
                        , SOM_CONFIG_ID
                        , SOM_MNF_TXT
                        , SOM_MDL_DESC_TXT
                        , SOM_DESC_SER_NUM
                        , SOM_ITEM_CD
                        , EOPS_RTRN_CMNT_TXT
                        , ORIG_LEASE_CMPY_TXT
                        , OTBD_CONFIG_TXT
                        , RTRN_DSP_TXT
                        , RTRN_PICK_UP_TS
                        , RTRN_PICK_UP_ADDR
                        , SOM_PSN_TXT
                        , RTRN_PICK_UP_ADDR_01
                        , RTRN_PICK_UP_ADDR_02
                        , RTRN_PICK_UP_CTY_TXT
                        , PICK_UP_ST_CD
                        , PICK_UP_CNTY_NM
                        , PICK_UP_ZIP_CD
                        , RTRN_CTAC_FIRST_NM
                        , RTRN_CTAC_LAST_NM
                        , PICK_UP_CTAC_PHO_TXT
                        , RTRN_PHO_EXT_TXT
                        , RTRN_PICK_UP_EML_TXT
                    FROM
                        NWAI4150_24 
                    WHERE
                        EZCANCELFLAG         = '0'
                        AND INTERFACE_ID     = #interfaceId#
                        AND TRANSACTION_ID   = #transactionId#
                        AND SOM_QUOTE_ID     = #somQuoteId#
                    ORDER BY
                        SOM_QUOTE_ID
                        , SOM_CONFIG_ID
                        , EOPS_RTRN_ID
    </statement>

    <statement id="getNWAI4150_26" parameterClass="Map" resultClass="Map">
        SELECT
                INTERFACE_ID
            ,   TRANSACTION_ID
            ,   SEGMENT_ID
            ,   UNIT_ID
            ,   SEQ_NUMBER
            ,   INTFC_REC_ID
            ,   SOM_QUOTE_ID
            ,   EOPS_CONFIG_LTR_TXT
            ,   SOM_ORD_QTY
            ,   SELL_PRC_LIST_AMT
            ,   EXT_MTH_PRC_AMT
            ,   EXT_SELL_PRC_AMT
            ,   CONTR_TP_TXT
            ,   PLAN_DESC_TXT
            ,   SOM_SRV_TERM_ID
            ,   SOM_BLLG_CYCLE_DESC_TXT
            ,   USG_CYCLE_DESC_TXT
            ,   EXT_PMT_AMT
            ,   REQ_BASE_AMT
            ,   BW_MTR_TP_NM
            ,   BW_VOL_COMIT_CNT
            ,   BW_BASE_AMT
            ,   BW_CPC_AMT
            ,   BW_PMT_AMT
            ,   CLR_MTR_TP_NM
            ,   CLR_VOL_COMIT_CNT
            ,   CLR_BASE_AMT
            ,   CLR_CPC_AMT
            ,   CLR_PMT_AMT
            ,   MTH_BASE_AMT
        FROM
            NWAI4150_26     I
        WHERE
            I.EZCANCELFLAG      = '0'
        AND I.INTERFACE_ID      = #interfaceId#
        AND I.TRANSACTION_ID    = #transactionId#
        AND I.SOM_QUOTE_ID      = #somQuoteId#
    </statement>

    <statement id="getTrnsfAmtCnt" parameterClass="Map" resultClass="Map">
        SELECT
            NVL ((
                SELECT
                    COUNT(*)
                FROM
                    NWAI4150_18 N18
                WHERE
                        N18.EZCANCELFLAG        = '0'
                    AND N18.INTERFACE_ID        = #interfaceId#
                    AND N18.TRANSACTION_ID      = #transactionId#
                    AND N18.SOM_QUOTE_ID        = #somQuoteId#
                    AND N18.ORIG_COST_TRNSF_AMT &lt; 0), 0) 
            + NVL ((
                SELECT
                    COUNT (*)
                FROM
                    NWAI4150_19 N19
                WHERE
                        N19.EZCANCELFLAG        = '0'
                    AND N19.INTERFACE_ID        = #interfaceId#
                    AND N19.TRANSACTION_ID      = #transactionId#
                    AND N19.SOM_QUOTE_ID        = #somQuoteId#
                    AND N19.ORIG_COST_TRNSF_AMT &lt; 0
            ), 0) AS L_POSITIVE_EXISTS_CNT
            ,NVL ((
                SELECT
                    COUNT (*)
                FROM
                    NWAI4150_18 N18
                WHERE
                        N18.EZCANCELFLAG        = '0'
                    AND N18.INTERFACE_ID        = #interfaceId#
                    AND N18.TRANSACTION_ID      = #transactionId#
                    AND N18.SOM_QUOTE_ID        = #somQuoteId#
                    AND N18.ORIG_SVC_REV_TRNSF_AMT &gt; 0), 0) 
            + NVL ((
                SELECT
                    COUNT (*)
                FROM
                    NWAI4150_19 N19
                WHERE
                        N19.EZCANCELFLAG        = '0'
                    AND N19.INTERFACE_ID        = #interfaceId#
                    AND N19.TRANSACTION_ID      = #transactionId#
                    AND N19.SOM_QUOTE_ID        = #somQuoteId#
                    AND N19.ORIG_SVC_REV_TRNSF_AMT &gt; 0
            ), 0) AS L_SRT_EXISTS_CNT
        FROM
            DUAL
    </statement>

    <statement id="getSrtCtAmtFrom18" parameterClass="Map" resultClass="Map">
            SELECT
                SUM(N18.ORIG_SVC_REV_TRNSF_AMT)     ORIG_SVC_REV_TRNSF_AMT
               ,SUM(N18.ORIG_COST_TRNSF_AMT)        ORIG_COST_TRNSF_AMT
               ,SUM(N18.TOT_SVC_REV_TRNSF_AMT)      TOT_SVC_REV_TRNSF_AMT
               ,SUM(N18.TOT_COST_TRNSF_AMT)         TOT_COST_TRNSF_AMT
            FROM
                NWAI4150_18 N18
            WHERE
                    N18.EZCANCELFLAG        = '0'
                AND N18.INTERFACE_ID        = #interfaceId#
                AND N18.TRANSACTION_ID      = #transactionId#
                AND N18.SOM_QUOTE_ID        = #somQuoteId#
                AND N18.SOM_SRV_LINE_ID     = #somSrvLineId#
    </statement>

    <statement id="getSrtCtAmtFrom19" parameterClass="Map" resultClass="Map">
            SELECT
                SUM(N19.ORIG_SVC_REV_TRNSF_AMT)     ORIG_SVC_REV_TRNSF_AMT
               ,SUM(N19.ORIG_COST_TRNSF_AMT)        ORIG_COST_TRNSF_AMT
               ,SUM(N19.TOT_SVC_REV_TRNSF_AMT)      TOT_SVC_REV_TRNSF_AMT
               ,SUM(N19.TOT_COST_TRNSF_AMT)         TOT_COST_TRNSF_AMT
            FROM
                NWAI4150_19 N19
            WHERE
                    N19.EZCANCELFLAG        = '0'
                AND N19.INTERFACE_ID        = #interfaceId#
                AND N19.TRANSACTION_ID      = #transactionId#
                AND N19.SOM_QUOTE_ID        = #somQuoteId#
                AND N19.SOM_SRV_LINE_ID     = #somSrvLineId#
    </statement>

    <statement id="getExistsEopsLineViewSnapPk" parameterClass="Map" resultClass="BigDecimal">
        SELECT
                  EOPS_LINE_VIEW_SNAP_PK
            FROM
                EOPS_LINE_VIEW_SNAP     S
            WHERE
                S.GLBL_CMPY_CD              = #glblCmpyCd#
                AND S.EOPS_QUOTE_ID         = #eopsQuoteId#
                AND S.EOPS_CONFIG_LTR_TXT   = #eopsConfigLtrTxt#
                AND S.EZCANCELFLAG          = '0'
    </statement>

</sqlMap>
