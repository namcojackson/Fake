<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NSBB071001">
    <statement id="getInputData" parameterClass="Map" resultClass="Map">
        SELECT
             USG.FSR_NUM            AS FSR_NUM
            ,TASK.MDSE_CD           AS MDSE_CD_01
            ,USG.SVC_MOD_PLN_ID     AS SVC_MOD_PLN_ID
            ,0                      AS INTFC_RELN_NUM
            ,USG.MDSE_CD            AS MDSE_CD_02
            ,USG.SVC_PRT_QTY        AS SVC_PRT_QTY
            ,MODDTL.SVC_MNF_MOD_NUM AS SVC_MNF_MOD_NUM
        FROM
             FSR_USG        USG
            ,SVC_TASK       TASK
            ,SVC_MOD_STS    MODSTS
            ,SVC_MOD_DTL    MODDTL
        WHERE
                USG.GLBL_CMPY_CD        = #glblCmpyCd#
            AND USG.EZUPTIME            &gt; TO_CHAR(TO_TIMESTAMP(ADD_MONTHS(LAST_DAY(TO_DATE(#slsDt#, 'YYYYMMDD')), #addMonth#)), 'YYYYMMDDHH24MISSFF3')
            AND USG.EZUPTIME            &lt; TO_CHAR(TO_TIMESTAMP(TO_DATE(#slsDt#, 'YYYYMMDD') + 1), 'YYYYMMDDHH24MISSFF3')
            AND USG.SVC_MOD_PLN_ID      IS NOT NULL
            AND TASK.GLBL_CMPY_CD       = USG.GLBL_CMPY_CD
            AND TASK.SVC_TASK_NUM       = USG.SVC_TASK_NUM
            AND MODSTS.GLBL_CMPY_CD     = TASK.GLBL_CMPY_CD
            AND MODSTS.SVC_MACH_MSTR_PK = TASK.SVC_MACH_MSTR_PK
            AND MODSTS.SVC_TASK_NUM     = TASK.SVC_TASK_NUM
            AND MODDTL.GLBL_CMPY_CD     = MODSTS.GLBL_CMPY_CD
            AND MODDTL.SVC_MOD_DTL_PK   = MODSTS.SVC_MOD_DTL_PK
            AND USG.EZCANCELFLAG        = '0'
            AND TASK.EZCANCELFLAG       = '0'
            AND MODSTS.EZCANCELFLAG     = '0'
            AND MODDTL.EZCANCELFLAG     = '0'
        ORDER BY
             USG.FSR_NUM        ASC
            ,TASK.MDSE_CD       ASC
            ,USG.SVC_MOD_PLN_ID ASC
    </statement>
</sqlMap>
