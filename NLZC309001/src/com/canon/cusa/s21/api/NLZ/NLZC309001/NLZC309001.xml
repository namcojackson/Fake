<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NLZC309001">

    <statement id="getUnitCostAmt" parameterClass="Map" resultClass="Map">
            SELECT
                 IT.UNIT_COST_AMT
            FROM
                SHPG_PLN SP
               ,INVTY_TRX IT
            WHERE
                SP.GLBL_CMPY_CD          = #glblCmpyCd#
            AND SP.SHPG_PLN_NUM          = #shpgPlnNum#
            AND IT.TRX_CD IN
            <iterate property="trxCdList" var="trxCd[]" open="(" close=")" conjunction=",">
                #trxCd[]#
            </iterate>
            AND SP.EZCANCELFLAG          = '0'
            AND SP.GLBL_CMPY_CD          = IT.GLBL_CMPY_CD
            AND SP.SO_NUM                = IT.SO_NUM 
            AND SP.SO_SLP_NUM            = IT.SO_SLP_NUM
            AND IT.EZCANCELFLAG          = '0'
            UNION
            SELECT
                 IT.UNIT_COST_AMT
            FROM
                SHPG_PLN SP
               ,SHPG_ORD_DTL SOD
               ,INVTY_TRX IT
            WHERE
                SP.GLBL_CMPY_CD          = #glblCmpyCd#
            AND SP.SHPG_PLN_NUM          = #shpgPlnNum#
            AND IT.TRX_CD IN
            <iterate property="trxCdList" var="trxCd[]" open="(" close=")" conjunction=",">
                #trxCd[]#
            </iterate>
            AND SP.EZCANCELFLAG          = '0'
            AND SP.GLBL_CMPY_CD          = SOD.GLBL_CMPY_CD
            AND SP.SHPG_PLN_NUM          = SOD.SHPG_PLN_NUM
            AND SOD.INVTY_LOC_CD         = #invtyLocCdDS#
            AND SOD.EZCANCELFLAG         = '0'
            AND SOD.GLBL_CMPY_CD         = IT.GLBL_CMPY_CD
            AND SOD.SO_NUM               = IT.SO_NUM 
            AND SOD.SO_SLP_NUM           = IT.SO_SLP_NUM
            AND IT.EZCANCELFLAG          = '0'
    </statement>

    <statement id="getContrNumInfo" parameterClass="Map" resultClass="Map">
            SELECT
                   C.DS_CONTR_NUM
                 , CD.CONTR_EFF_FROM_DT
                 , CD.CONTR_EFF_THRU_DT
            FROM
                DS_CONTR_DTL CD
              , DS_CONTR     C
            WHERE
                CD.GLBL_CMPY_CD          = #glblCmpyCd#
            AND CD.EZCANCELFLAG          = '0'
            AND CD.CONTR_HLD_FLG         = #contrHldFlg#
            AND CD.SVC_CONFIG_MSTR_PK    = #svcConfigMstrPk#
            AND CD.GLBL_CMPY_CD          = C.GLBL_CMPY_CD
            AND CD.DS_CONTR_PK           = C.DS_CONTR_PK
            AND C.EZCANCELFLAG           = '0'
    </statement>
</sqlMap>
