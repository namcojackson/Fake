<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NWCB036001">

    <statement id="getInterfaceHeaderData" parameterClass="Map" resultClass="Map">
        SELECT
                I.FM_BAT_ID
                , NVL(I.AR_INTFC_FLG, 'N')      AS AR_INTFC_FLG
                , NVL(I.INV_IMPT_PROC_FLG, 'N') AS INV_IMPT_PROC_FLG
                , I.FM_CRAT_TS
                , I.FM_CRAT_USR_ID
                , I.FM_UPD_TS
                , I.FM_UPD_USR_ID
                , NVL(I.PROC_ERR_FLG, 'N')      AS PROC_ERR_FLG
                , I.PROC_ERR_MSG_TXT
            FROM
                NWCI0130_01     I
            WHERE
                I.INTERFACE_ID          = #interfaceId#
                AND I.TRANSACTION_ID    = #transactionId#
                AND I.EZCANCELFLAG      = '0'
                <!-- QC#22937 -->
                AND NOT EXISTS (SELECT '1' FROM FM_INV_IMPT_HDR H WHERE
                H.EZCANCELFLAG = '0' AND H.GLBL_CMPY_CD = #glblCmpyCd#
                AND H.FM_BAT_ID = I.FM_BAT_ID)
            ORDER BY
                I.SEGMENT_ID
                , I.UNIT_ID
                , I.SEQ_NUMBER
    </statement>

    <statement id="getInterfaceDetailData" parameterClass="Map" resultClass="Map">
        SELECT
                  I.FM_BAT_ID
                , NVL(I.AR_INTFC_FLG, 'N')      AS AR_INTFC_FLG
                , NVL(I.INV_IMPT_PROC_FLG, 'N') AS INV_IMPT_PROC_FLG
                , I.FM_CRAT_TS
                , I.FM_CRAT_USR_ID
                , I.FM_UPD_TS
                , I.FM_UPD_USR_ID
                , I.FM_ACCT_NUM
                , I.FM_BID_TXT
                , I.BLLG_PER_FROM_DT
                , I.BLLG_PER_THRU_DT
                , I.SHIP_TO_CUST_CD
                , I.BILL_TO_CUST_CD
                , I.FM_MDSE_CD
                , I.FM_DESC_TXT
                , I.FM_LINE_AMT
                , I.FM_LINE_TAX_AMT
                , I.FM_AR_INTFC_ID
                , I.FM_ITEM_ID
                , I.FM_MDSE_DESC_TXT
                , I.BILL_TO_LOC_NUM
                , I.SHIP_TO_LOC_NUM
                , I.BILL_TO_CUST_ACCT_CD
                , I.SHIP_TO_CUST_ACCT_CD
                --
                , I.SLS_REP_CR_PCT
                , I.SLS_REP_TOC_CD
                , I.INTFC_LINE_ATTRB_TXT_01
                , I.INTFC_LINE_ATTRB_TXT_02
                , I.INTFC_LINE_ATTRB_TXT_03
                , I.INTFC_LINE_ATTRB_TXT_04
                , I.INTFC_LINE_ATTRB_TXT_05
                , I.INTFC_LINE_ATTRB_TXT_06
                , I.INTFC_LINE_ATTRB_TXT_07
                , I.INTFC_LINE_ATTRB_TXT_08
                , I.INTFC_LINE_ATTRB_TXT_09
                , I.INTFC_LINE_ATTRB_TXT_10
                , I.INTFC_LINE_ATTRB_TXT_11
                , I.INTFC_LINE_ATTRB_TXT_12
                , I.INTFC_LINE_ATTRB_TXT_13
                , I.INTFC_LINE_ATTRB_TXT_14
                , I.INTFC_LINE_ATTRB_TXT_15
                , I.DFRD_ACCTG_RULE_CD
                , I.SHIP_QTY
                , I.INV_TP_CD
                , NVL(I.PROC_ERR_FLG, 'N')      AS PROC_ERR_FLG
                , I.PROC_ERR_MSG_TXT
                --
                , I.PMT_TERM_CASH_DISC_CD
            FROM
                NWCI0130_02     I
            WHERE
                I.INTERFACE_ID          = #interfaceId#
                AND I.TRANSACTION_ID    = #transactionId#
                AND I.EZCANCELFLAG      = '0'
                <!-- QC#22937 -->
                AND NOT EXISTS (SELECT '1' FROM FM_INV_IMPT_DTL H WHERE
                H.EZCANCELFLAG = '0' AND H.GLBL_CMPY_CD = #glblCmpyCd#
                AND H.FM_BAT_ID = I.FM_BAT_ID)
            ORDER BY
                I.SEGMENT_ID
                , I.UNIT_ID
                , I.SEQ_NUMBER
    </statement>

</sqlMap>