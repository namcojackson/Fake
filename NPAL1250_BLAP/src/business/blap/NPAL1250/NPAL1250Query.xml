<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NPAL1250Query">

    <typeAlias alias="NPAL1250_ASMsg" type="business.blap.NPAL1250.NPAL1250_ASMsg"/>
    <statement id="searchAcctList" resultMap="result.searchAcctList">
        SELECT
            ACCT.SHIP_TO_CUST_PK
           ,ACCT.DS_ACCT_CUST_PK
           ,ACCT.SELL_TO_CUST_CD
           ,ACCT.DS_ACCT_NM
           ,ACCT.SHIP_TO_CUST_CD
           ,ACCT.LOC_NM
           ,ACCT.BIG_DEAL_NUM
           ,ACCT.EZUPTIME_A1
           ,ACCT.EZUPTIMEZONE_A1
           ,ACCT.EZUPTIME_A2
           ,ACCT.EZUPTIMEZONE_A2
           ,ACCT.EZUPTIME_A3
           ,ACCT.EZUPTIMEZONE_A3
           ,ACCT.EFF_FROM_DT
           ,ACCT.EFF_THRU_DT
        FROM(
            SELECT
                SC.SHIP_TO_CUST_PK
               ,DAC.SELL_TO_CUST_PK AS DS_ACCT_CUST_PK
               ,SC.SELL_TO_CUST_CD
               ,DAC.DS_ACCT_NM
               ,SC.SHIP_TO_CUST_CD
               ,SC.LOC_NM
               ,SC.BIG_DEAL_NUM
               ,SC.EZUPTIME         AS EZUPTIME_A1
               ,SC.EZUPTIMEZONE     AS EZUPTIMEZONE_A1
               ,SC.EZUPTIME         AS EZUPTIME_A2
               ,SC.EZUPTIMEZONE     AS EZUPTIMEZONE_A2
               ,DAC.EZUPTIME        AS EZUPTIME_A3
               ,DAC.EZUPTIMEZONE    AS EZUPTIMEZONE_A3
               ,SC.EFF_FROM_DT
               ,SC.EFF_THRU_DT
            FROM
                SHIP_TO_CUST        SC
               ,SELL_TO_CUST        DAC
            WHERE
                SC.GLBL_CMPY_CD         = #glblCmpyCd#
            <isNotNull property="sellToCustCd">
            AND SC.SELL_TO_CUST_CD      LIKE #sellToCustCd#
            </isNotNull>
            <isNotNull property="shipToCustCd">
            AND SC.SHIP_TO_CUST_CD      LIKE #shipToCustCd#
            </isNotNull>
            <isNotNull property="locNm">
            AND UPPER(SC.LOC_NM)               LIKE #locNm# <!-- 2019/03/08 QC#30698 Add UPPER() -->
            </isNotNull>
            AND SC.RGTN_STS_CD          = #rgtnStsCd#
            AND SC.EFF_FROM_DT         &lt;= #slsDt#
            AND NVL(SC.EFF_THRU_DT,'99991231') &gt;= #slsDt#
            <isNotNull property="bigDealNum">
            AND SC.BIG_DEAL_NUM        LIKE #bigDealNum#
            </isNotNull>
            AND SC.GLBL_CMPY_CD         = DAC.GLBL_CMPY_CD
            AND SC.SELL_TO_CUST_CD      = DAC.SELL_TO_CUST_CD
            <isNotNull property="dsAcctNm">
            AND UPPER(DAC.DS_ACCT_NM)          LIKE #dsAcctNm# <!-- 2019/03/08 QC#30698 Add UPPER() -->
            </isNotNull>
            AND DAC.RGTN_STS_CD          = #rgtnStsCd#
            AND DAC.EFF_FROM_DT         &lt;= #slsDt#
            AND NVL(DAC.EFF_THRU_DT,'99991231') &gt;= #slsDt#
            AND SC.EZCANCELFLAG          = '0'
            AND DAC.EZCANCELFLAG         = '0'
            ORDER BY
                SC.SELL_TO_CUST_CD
               ,SC.SHIP_TO_CUST_CD
            ) ACCT
        WHERE
            ROWNUM &lt;= #rowNum#
    </statement>

    <resultMap id="result.searchAcctList" class="NPAL1250_ASMsg">
        <result property="shipToCustPk_A"           column="SHIP_TO_CUST_PK"             javaType="EZDSBigDecimalItem"/>
        <result property="dsAcctCustPk_A"           column="DS_ACCT_CUST_PK"             javaType="EZDSBigDecimalItem"/>
        <result property="sellToCustCd_A"           column="SELL_TO_CUST_CD"             javaType="EZDSStringItem"/>
        <result property="dsAcctNm_A"               column="DS_ACCT_NM"                  javaType="EZDSStringItem"/>
        <result property="shipToCustCd_A"           column="SHIP_TO_CUST_CD"             javaType="EZDSStringItem"/>
        <result property="locNm_A"                  column="LOC_NM"                      javaType="EZDSStringItem"/>
        <result property="bigDealNum_A"             column="BIG_DEAL_NUM"                javaType="EZDSStringItem"/>
        <result property="ezUpTime_A1"              column="EZUPTIME_A1"                 javaType="EZDSStringItem"/>
        <result property="ezUpTimeZone_A1"          column="EZUPTIMEZONE_A1"             javaType="EZDSStringItem"/>
        <result property="ezUpTime_A2"              column="EZUPTIME_A2"                 javaType="EZDSStringItem"/>
        <result property="ezUpTimeZone_A2"          column="EZUPTIMEZONE_A2"             javaType="EZDSStringItem"/>
        <result property="ezUpTime_A3"              column="EZUPTIME_A3"                 javaType="EZDSStringItem"/>
        <result property="ezUpTimeZone_A3"          column="EZUPTIMEZONE_A3"             javaType="EZDSStringItem"/>
        <result property="effFromDt_A"              column="EFF_FROM_DT"                 javaType="EZDSStringItem"/>
        <result property="effThruDt_A"              column="EFF_THRU_DT"                 javaType="EZDSStringItem"/>
    </resultMap>

</sqlMap>
