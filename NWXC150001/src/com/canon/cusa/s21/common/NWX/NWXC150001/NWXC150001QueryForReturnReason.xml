<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NWXC150001QueryForReturnReason">

    <!-- 2018/08/21 S21_NA#26767 Add -->
    <statement id="getRelatedReturnReasonList" parameterClass="Map" resultClass="Map">
        SELECT
            RR.RTRN_RSN_CD
            ,RR.RTRN_RSN_DESC_TXT
        FROM
            DS_ORD_TP_PROC_DFN OTPD
            ,DS_RTRN_RSN_GRP_RELN RRGR
            ,RTRN_RSN RR
        WHERE
                OTPD.GLBL_CMPY_CD       = #glblCmpyCd#
            AND OTPD.DS_ORD_TP_CD       = #dsOrdTpCd#
            AND OTPD.EZCANCELFLAG       = '0'
            AND OTPD.GLBL_CMPY_CD       = RRGR.GLBL_CMPY_CD
            AND OTPD.DS_RTRN_RSN_GRP_CD = RRGR.DS_RTRN_RSN_GRP_CD
            AND RRGR.EZCANCELFLAG       = '0'
            AND RRGR.GLBL_CMPY_CD       = RR.GLBL_CMPY_CD
            AND RRGR.RTRN_RSN_CD        = RR.RTRN_RSN_CD
            AND RR.EZCANCELFLAG         = '0'
        ORDER BY
            RR.RTRN_RSN_SORT_NUM
    </statement>

    <statement id="getDefaultRtrnRsnLineCatgByIb" parameterClass="Map" resultClass="Map">
        SELECT
            SMM.OWNR_ACCT_NUM
            ,SMM.CUR_LOC_ACCT_NUM
            ,OCBC.SCD_BIZ_CTX_ATTRB_TXT
            ,OCBC.THIRD_BIZ_CTX_ATTRB_TXT
        FROM
            SVC_MACH_MSTR SMM
            ,ORD_CATG_BIZ_CTX OCBC
        WHERE
                SMM.GLBL_CMPY_CD            = #glblCmpyCd#
            AND SMM.SVC_MACH_MSTR_PK        = #svcMachMstrPk#
            AND SMM.EZCANCELFLAG            = '0'
            AND SMM.GLBL_CMPY_CD            = OCBC.GLBL_CMPY_CD(+)
            AND SMM.SVC_MACH_TRX_TP_CD      = OCBC.FIRST_BIZ_CTX_ATTRB_TXT(+)
            AND OCBC.ORD_CATG_CTX_TP_CD(+)  = #ctxTpIbTrxOrdMap#
            AND OCBC.EZCANCELFLAG(+)        = '0'
    </statement>

    <statement id="getRelatedConfigTpList" parameterClass="Map" resultClass="Map">
        SELECT
            CT.CONFIG_TP_CD
            , CT.CONFIG_TP_DESC_TXT
            , CT.CONFIG_CATG_CD
        FROM
            CONFIG_TP CT
            , DS_ORD_TP_CONFIG_RELN DCR
        WHERE
            CT.GLBL_CMPY_CD = #glblCmpyCd#
            <isNotNull property='configCatgCd'>
            AND CT.CONFIG_CATG_CD = #configCatgCd#
            </isNotNull>
            AND CT.EZCANCELFLAG = '0'
            AND CT.GLBL_CMPY_CD = DCR.GLBL_CMPY_CD
            AND CT.CONFIG_TP_CD = DCR.CONFIG_TP_CD
            AND DCR.DS_ORD_TP_CD IN ('*', #dsOrdTpCd#)
            AND DCR.CPO_SRC_TP_CD IN ('*', #cpoSrcTpCd#)
            AND DCR.EZCANCELFLAG = '0'
        ORDER BY
            CT.CONFIG_TP_SORT_NUM
    </statement>

</sqlMap>
