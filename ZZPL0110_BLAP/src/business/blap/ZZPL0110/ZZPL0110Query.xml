<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="ZZPL0110Query">
    <typeAlias alias="ZZPL0110CMsg" type="business.blap.ZZPL0110.ZZPL0110CMsg"/>
    <typeAlias alias="ZZPL0110_ASMsg" type="business.blap.ZZPL0110.ZZPL0110_ASMsg"/>

    <statement id="getProcLogList" parameterClass="Map" resultMap="result.ZZPL0110_ASMsg">
        WITH A AS (
          SELECT
            RPL.EIP_RPT_PROC_LOG_PK AS EIP_RPT_PROC_LOG_PK
            ,RPL.SUB_SYS_CD AS SUB_SYS_CD
            ,RPL.RPT_JOB_ID AS RPT_JOB_ID
            ,RPL.RPT_JOB_STS_TXT AS RPT_JOB_STS_TXT
            ,RPL.EIP_ERR_CD AS EIP_ERR_CD
            ,RPL.RPT_JOB_START_TS AS RPT_JOB_START_TS
            ,RPL.RPT_JOB_END_TS AS RPT_JOB_END_TS
          FROM
            EIP_RPT_PROC_LOG RPL
          WHERE
            RPL.EZCANCELFLAG = 0
           <isNotNull property="glblCmpyCd">
             AND RPL.GLBL_CMPY_CD = #glblCmpyCd#
           </isNotNull>
           <isNotNull property="eipRptProcLogPk">
             AND RPL.EIP_RPT_PROC_LOG_PK = #eipRptProcLogPk#
           </isNotNull>
           <isNotNull property="subSysCd">
             AND RPL.SUB_SYS_CD = #subSysCd#
           </isNotNull>
           <isNotNull property="rptJobId">
             AND RPL.RPT_JOB_ID = #rptJobId#
           </isNotNull>
           <isEqual property="rptJobStsTxt" compareValue="SUCCESS">
             AND RPL.RPT_JOB_STS_TXT = #rptJobStsTxt#
           </isEqual>
           <isEqual property="rptJobStsTxt" compareValue="WAIT">
             AND RPL.RPT_JOB_STS_TXT IS NULL
           </isEqual>
           <isEqual property="rptJobStsTxt" compareValue="RUNNING">
             AND RPL.RPT_JOB_STS_TXT = #rptJobStsTxt#
           </isEqual>
           <isEqual property="rptJobStsTxt" compareValue="FAIL">
             AND RPL.RPT_JOB_STS_TXT = #rptJobStsTxt#
           </isEqual>
           <isEqual property="rptJobStsTxt" compareValue="CANCELED">
             AND RPL.RPT_JOB_STS_TXT = #rptJobStsTxt#
           </isEqual>
           <isEqual property="rptJobStsTxt" compareValue="SUSPENDED">
             AND RPL.RPT_JOB_STS_TXT = #rptJobStsTxt#
           </isEqual>
           <isNotNull property="xxFromDt">
             AND RPL.RPT_JOB_START_TS &gt;= #xxFromDt#
           </isNotNull>
           <isNotNull property="xxToDt">
             AND RPL.RPT_JOB_END_TS &lt; #xxToDt#
           </isNotNull>
          ORDER BY
            EIP_RPT_PROC_LOG_PK DESC
        )
        SELECT
          A.EIP_RPT_PROC_LOG_PK
          ,A.SUB_SYS_CD
          ,A.RPT_JOB_ID
          ,A.RPT_JOB_STS_TXT
          ,A.EIP_ERR_CD
          ,A.RPT_JOB_START_TS
          ,A.RPT_JOB_END_TS
        FROM
          A
        WHERE
          ROWNUM &lt;= #rowNum#
    </statement>
    <resultMap id="result.ZZPL0110_ASMsg" class="ZZPL0110_ASMsg">
        <result property="eipRptProcLogPk_A" column="EIP_RPT_PROC_LOG_PK" javaType="EZDSBigDecimalItem"/>
        <result property="subSysCd_A" column="SUB_SYS_CD" javaType="EZDSStringItem"/>
        <result property="rptJobId_A" column="RPT_JOB_ID" javaType="EZDSStringItem"/>
        <result property="rptJobStsTxt_A" column="RPT_JOB_STS_TXT" javaType="EZDSStringItem"/>
        <result property="eipErrCd_A" column="EIP_ERR_CD" javaType="EZDSStringItem"/>
        <result property="xxDtTm_FR" column="RPT_JOB_START_TS" javaType="EZDSStringItem"/>
        <result property="xxDtTm_TO" column="RPT_JOB_END_TS" javaType="EZDSStringItem"/>
    </resultMap>

</sqlMap>