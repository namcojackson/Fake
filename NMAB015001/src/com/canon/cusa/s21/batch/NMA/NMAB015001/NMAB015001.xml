<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NMAB015001">

    <statement id="getTargetRequestList" parameterClass="Map" resultClass="Map">
        SELECT
            CMPRQ.CMPSN_CHNG_REQ_PK      AS CMPSN_CHNG_REQ_PK
          , CMPRQ.PRNT_MDSE_CD           AS PRNT_MDSE_CD
          , CMPRQ.CMPSN_PK               AS CMPSN_PK
          , CMPRQ.MDSE_CMPSN_TP_CD       AS MDSE_CMPSN_TP_CD
          , CMPRQ.CHILD_MDSE_CD          AS CHILD_MDSE_CD
          , CMPRQ.CHILD_ORD_TAKE_MDSE_CD AS CHILD_ORD_TAKE_MDSE_CD
          , CMPRQ.CHILD_KIT_MAT_CD       AS CHILD_KIT_MAT_CD
          , CMPRQ.CHILD_MDSE_QTY         AS CHILD_MDSE_QTY
          , CMPRQ.EFF_FROM_DT            AS EFF_FROM_DT
          , CMPRQ.EFF_THRU_DT            AS EFF_THRU_DT
          , CMPRQ.ALLOC_RATIO            AS ALLOC_RATIO
          , CMPRQ.CHILD_BOM_CMPT_CD      AS CHILD_BOM_CMPT_CD
          , CMPRQ.CHILD_BOM_CMPT_NM      AS CHILD_BOM_CMPT_NM
          , CMPRQ.CHILD_BOM_PRC_AMT      AS CHILD_BOM_PRC_AMT
          , CMPRQ.MAIN_CMPSN_FLG         AS MAIN_CMPSN_FLG
          , CMPRQ.CUSA_MDSE_CD           AS CUSA_MDSE_CD
          , CMPRQ.BASE_CMPT_FLG          AS BASE_CMPT_FLG
          , CMPRQ.MND_CMPT_FLG           AS MND_CMPT_FLG
          , CMPRQ.PKG_UOM_CD             AS PKG_UOM_CD
          , CMPRQ.CMPSN_REVN_NUM         AS CMPSN_REVN_NUM
          , CMPRQ.ACTV_FLG               AS ACTV_FLG
          , CMPRQ.CMPSN_REVN_CMNT_TXT    AS CMPSN_REVN_CMNT_TXT
        FROM
            CMPSN_CHNG_REQ CMPRQ
        WHERE
            CMPRQ.GLBL_CMPY_CD       = #glblCmpyCd#
        AND CMPRQ.EZCANCELFLAG       = '0'
        AND CMPRQ.EFF_FROM_DT    &lt;= #procDt#
        ORDER BY
            CMPRQ.PRNT_MDSE_CD
           ,CMPRQ.CMPSN_REVN_NUM
           ,CMPRQ.CMPSN_PK
    </statement>

    <statement id="getPreviousRevisionList" parameterClass="Map" resultClass="Map">
		SELECT
		   C.CMPSN_PK
		  ,C.PRNT_MDSE_CD
          ,C.EFF_FROM_DT
          ,C.EFF_THRU_DT
		FROM
		    CMPSN C
		WHERE
		    C.GLBL_CMPY_CD   = #glblCmpyCd#
		AND C.EZCANCELFLAG   = '0'
		AND C.PRNT_MDSE_CD   = #prntMdseCd#
		AND C.CMPSN_REVN_NUM = #cmpsnRevnNum#
    </statement>
        
</sqlMap>
