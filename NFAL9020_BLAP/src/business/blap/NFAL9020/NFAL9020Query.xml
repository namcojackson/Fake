<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NFAL9020Query">

	<typeAlias alias="NFAL9020CMsg"		type="business.blap.NFAL9020.NFAL9020CMsg"/>
	<typeAlias alias="NFAL9020_ASMsg"	type="business.blap.NFAL9020.NFAL9020_ASMsg"/>
	
	<statement id="getResultCountNFAL9020" parameterClass="Map" resultMap="result.NFAL9020CMsg">
			SELECT 
				COUNT(AJE_ID) AS XX_TOT_CNT 
			FROM (
			  SELECT AJE_ID
				FROM 
				    AJE_PTRN
				WHERE 
				    EZCANCELFLAG 	= 		'0'
				AND GLBL_CMPY_CD 	= 		#glblCmpyCd#
		<isNotNull property="ajeIdLike">   
				AND AJE_ID 			LIKE	#ajeIdLike# 
		</isNotNull>
				GROUP BY 
				    AJE_ID
				,   AJE_PTRN_IND_TP_CD_01
				,   AJE_PTRN_ACTL_CD_01
				,   AJE_PTRN_IND_TP_CD_02
				,   AJE_PTRN_ACTL_CD_02
				,   AJE_PTRN_IND_TP_CD_03
				,   AJE_PTRN_ACTL_CD_03
			)
	</statement>
	
	<resultMap id="result.NFAL9020CMsg" class="NFAL9020CMsg">
		<result property="xxTotCnt"	column="XX_TOT_CNT"	 javaType="EZDSBigDecimalItem"/>
	</resultMap>

	<statement id="getResultNFAL9020" parameterClass="Map" resultMap="result.NFAL9020_ASMsg">
			SELECT
			    AJE_ID
			,   AJE_PTRN_IND_TP_CD_01
			,   AJE_PTRN_ACTL_CD_01
			,   AJE_PTRN_IND_TP_CD_02
			,   AJE_PTRN_ACTL_CD_02
			,   AJE_PTRN_IND_TP_CD_03
			,   AJE_PTRN_ACTL_CD_03
			,   AJE_PTRN_IND_TP_NM_01
			,   AJE_PTRN_ACTL_NM_01
			,   AJE_PTRN_IND_TP_NM_02
			,   AJE_PTRN_ACTL_NM_02
			,   AJE_PTRN_IND_TP_NM_03
			,   AJE_PTRN_ACTL_NM_03
			,   TRX_NM
			,   TRX_RSN_NM
			,   SYS_SRC_NM
			,   JRNL_CATG_CD
			,   JRNL_CATG_NM
			FROM (			
				SELECT
				    AJE_ID						AS AJE_ID
				,   AJE_PTRN_IND_TP_CD_01		AS AJE_PTRN_IND_TP_CD_01
				,   AJE_PTRN_ACTL_CD_01			AS AJE_PTRN_ACTL_CD_01
				,   AJE_PTRN_IND_TP_CD_02		AS AJE_PTRN_IND_TP_CD_02
				,   AJE_PTRN_ACTL_CD_02			AS AJE_PTRN_ACTL_CD_02
				,   AJE_PTRN_IND_TP_CD_03		AS AJE_PTRN_IND_TP_CD_03
				,   AJE_PTRN_ACTL_CD_03			AS AJE_PTRN_ACTL_CD_03
				,   MAX(AJE_PTRN_IND_TP_NM_01)	AS AJE_PTRN_IND_TP_NM_01
				,   MAX(AJE_PTRN_ACTL_NM_01)	AS AJE_PTRN_ACTL_NM_01
				,   MAX(AJE_PTRN_IND_TP_NM_02)	AS AJE_PTRN_IND_TP_NM_02
				,   MAX(AJE_PTRN_ACTL_NM_02)	AS AJE_PTRN_ACTL_NM_02
				,   MAX(AJE_PTRN_IND_TP_NM_03)	AS AJE_PTRN_IND_TP_NM_03
				,   MAX(AJE_PTRN_ACTL_NM_03)	AS AJE_PTRN_ACTL_NM_03
				,   MAX(TRX_NM)					AS TRX_NM
				,   MAX(TRX_RSN_NM)				AS TRX_RSN_NM
				,   MAX(SYS_SRC_NM)				AS SYS_SRC_NM
				,   MAX(JRNL_CATG_CD)			AS JRNL_CATG_CD
				,   MAX(JRNL_CATG_NM)			AS JRNL_CATG_NM
				FROM 
				    AJE_PTRN
				WHERE 
				    EZCANCELFLAG 	= 		'0'
				AND GLBL_CMPY_CD 	= 		#glblCmpyCd#
		<isNotNull property="ajeIdLike">   
				AND AJE_ID 			LIKE	#ajeIdLike# 
		</isNotNull>
				GROUP BY 
				    AJE_ID
				,   AJE_PTRN_IND_TP_CD_01
				,   AJE_PTRN_ACTL_CD_01
				,   AJE_PTRN_IND_TP_CD_02
				,   AJE_PTRN_ACTL_CD_02
				,   AJE_PTRN_IND_TP_CD_03
				,   AJE_PTRN_ACTL_CD_03
				ORDER BY 
				    AJE_ID
				,   AJE_PTRN_IND_TP_CD_01 DESC
				,   AJE_PTRN_IND_TP_CD_02 DESC
				,   AJE_PTRN_IND_TP_CD_03 DESC
			) WHERE ROWNUM &lt; #rowNum#
	</statement>

	<resultMap id="result.NFAL9020_ASMsg" 	class="NFAL9020_ASMsg">
		<result property="ajeId_A"				column="AJE_ID"	  						javaType="EZDSStringItem"/>
		<result property="sysSrcNm_A"			column="SYS_SRC_NM"	  					javaType="EZDSStringItem"/>
		<result property="trxNm_A"				column="TRX_NM"	  						javaType="EZDSStringItem"/>
		<result property="trxRsnNm_A"			column="TRX_RSN_NM"	  					javaType="EZDSStringItem"/>		
		<result property="ajePtrnIndTpCd_01"	column="AJE_PTRN_IND_TP_CD_01"	  		javaType="EZDSStringItem"/>
		<result property="ajePtrnIndTpNm_01"	column="AJE_PTRN_IND_TP_NM_01"	  		javaType="EZDSStringItem"/>
		<result property="ajePtrnActlCd_01"		column="AJE_PTRN_ACTL_CD_01"	  		javaType="EZDSStringItem"/>
		<result property="ajePtrnActlNm_01"		column="AJE_PTRN_ACTL_NM_01"	  		javaType="EZDSStringItem"/>
		<result property="ajePtrnIndTpCd_02"	column="AJE_PTRN_IND_TP_CD_02"	  		javaType="EZDSStringItem"/>
		<result property="ajePtrnIndTpNm_02"	column="AJE_PTRN_IND_TP_NM_02"	  		javaType="EZDSStringItem"/>
		<result property="ajePtrnActlCd_02"		column="AJE_PTRN_ACTL_CD_02"	  		javaType="EZDSStringItem"/>
		<result property="ajePtrnActlNm_02"		column="AJE_PTRN_ACTL_NM_02"	  		javaType="EZDSStringItem"/>
		<result property="ajePtrnIndTpCd_03"	column="AJE_PTRN_IND_TP_CD_03"	  		javaType="EZDSStringItem"/>
		<result property="ajePtrnIndTpNm_03"	column="AJE_PTRN_IND_TP_NM_03"	  		javaType="EZDSStringItem"/>
		<result property="ajePtrnActlCd_03"		column="AJE_PTRN_ACTL_CD_03"	  		javaType="EZDSStringItem"/>
		<result property="ajePtrnActlNm_03"		column="AJE_PTRN_ACTL_NM_03"	  		javaType="EZDSStringItem"/>
		<result property="jrnlCatgCd_A"			column="JRNL_CATG_CD"	  				javaType="EZDSStringItem"/>
		<result property="jrnlCatgNm_A"			column="JRNL_CATG_NM"	  				javaType="EZDSStringItem"/>
	</resultMap>

</sqlMap>
