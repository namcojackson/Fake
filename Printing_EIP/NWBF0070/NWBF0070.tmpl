<template>

<!-- Version: 1.0.0 $Date::05/15/2014 $ -->

<!-- sql00. Parameter DB Check SQL -->
  <variable name="sql00" type="sql" value="
	select  count(*) item_count
	from EIP_RPT_INP_PRM
	where
	    EIP_RPT_RQST_PK=${_VA_EIP_RPT_RQST_PK}
	    and RPT_RQST_SUB_ID=${_VA_RPT_RQST_SUB_ID}
        and EZCANCELFLAG = '0'
	    and (RPT_PRM_NM = 'GLBL_CMPY_CD'
            or RPT_PRM_NM = 'USER_ID'
            or RPT_PRM_NM = 'BIZ_APP_ID'
            or RPT_PRM_NM = 'RMA_RPT_TS'
            or RPT_PRM_NM = 'INTL_LANG_VAL_COL_NM')
"/>

<!-- sql0. Get Parameter -->
  <variable name="sql0" type="sql" value="
	select  RPT_PRM_NM,RPT_PRM_VAL_TXT
	from EIP_RPT_INP_PRM
	where
	    EIP_RPT_RQST_PK=${_VA_EIP_RPT_RQST_PK}
	    and RPT_RQST_SUB_ID=${_VA_RPT_RQST_SUB_ID}
        and EZCANCELFLAG = '0'
	    and (RPT_PRM_NM = 'GLBL_CMPY_CD'
            or RPT_PRM_NM = 'USER_ID'
            or RPT_PRM_NM = 'BIZ_APP_ID'
            or RPT_PRM_NM = 'RMA_RPT_TS'
            or RPT_PRM_NM = 'INTL_LANG_VAL_COL_NM')
"/>

<!-- Define Parameter -->
<variable name="GLBL_CMPY_CD" type="string" value=""/>
<variable name="USER_ID" type="string" value=""/>
<variable name="BIZ_APP_ID" type="string" value=""/>
<variable name="RMA_RPT_TS" type="string" value=""/>
<variable name="INTL_LANG_VAL_COL_NM" type="string" value=""/>

<!-- Define Label -->
<variable name="Cm" type="string" value=""/>
<variable name="Cp" type="string" value=""/>
<variable name="Ck" type="string" value=""/>
<variable name="C22559" type="string" value=""/>
<variable name="C22560" type="string" value=""/>
<variable name="C989" type="string" value=""/>
<variable name="C4693" type="string" value=""/>
<variable name="C1848" type="string" value=""/>
<variable name="C22561" type="string" value=""/>
<variable name="C22562" type="string" value=""/>
<variable name="C22563" type="string" value=""/>
<variable name="C22564" type="string" value=""/>
<variable name="C22565" type="string" value=""/>
<variable name="C22566" type="string" value=""/>
<variable name="C22567" type="string" value=""/>
<variable name="C22568" type="string" value=""/>
<variable name="C22569" type="string" value=""/>
<variable name="C22570" type="string" value=""/>
<variable name="C3567" type="string" value=""/>
<variable name="C22571" type="string" value=""/>

<!-- sql01. Lang DB Check SQL -->
 <variable name="sql01" type="sql" value="
SELECT count(*) item_count
FROM 
    INTL_LANG_VAL
WHERE
GLBL_CMPY_CD=${GLBL_CMPY_CD}
AND LANG_KEY_CD in ('m','p','k','22559','22560','989','4693','1848','22561','22562','22563','22564','22565','22566','22567','22568','22569','22570','3567','22571')
AND EZCANCELFLAG = '0'
"/>

<!-- sql1. Get Label -->
 <variable name="sql1" type="sql" value="
SELECT LANG_KEY_CD, ${INTL_LANG_VAL_COL_NM} LANGUAGE_LABEL
FROM 
    INTL_LANG_VAL
WHERE
GLBL_CMPY_CD=${GLBL_CMPY_CD}
AND LANG_KEY_CD in ('m','p','k','22559','22560','989','4693','1848','22561','22562','22563','22564','22565','22566','22567','22568','22569','22570','3567','22571')
AND EZCANCELFLAG = '0'
"
nonescaped="${INTL_LANG_VAL_COL_NM}"/>

<!-- sql02. Print Work DB Check SQL -->
 <variable name="sql02" type="sql" value="
SELECT count(*) item_count
FROM RMA_RPT_WRK_V A
WHERE
A.GLBL_CMPY_CD = ${GLBL_CMPY_CD}
AND A.USER_ID = ${USER_ID}
AND A.BIZ_APP_ID = ${BIZ_APP_ID}
AND A.RMA_RPT_TS = ${RMA_RPT_TS}
AND A.EZCANCELFLAG = '0'
"/>

<!-- sql2. Get Print Work -->
 <variable name="sql2" type="sql" value="
SELECT 
    A.RMA_NUM, A.RMA_LINE_NUM, A.RMA_LINE_SUB_NUM, A.RMA_LINE_SUB_TRX_NUM, A.GLBL_CMPY_NM, A.GLBL_FULL_CMPY_ADDR, A.SELL_TO_LOC_NM, A.SELL_TO_ADDR_01, A.SELL_TO_ADDR_02
   ,A.SELL_TO_CTAC_PSN_NM, A.SELL_TO_TEL_NUM, A.SELL_TO_FAX_NUM, A.RMA_DT_RPT_DT_TXT, A.CUST_REF_NUM, A.SLS_ADMIN_PSN_NM, A.SHIP_TO_LOC_NM, A.SHIP_TO_CTAC_PSN_NM, A.SHIP_TO_ADDR_01
   ,A.SHIP_TO_ADDR_02, A.TEL_NUM, A.RMA_EXP_DT_RPT_DT_TXT, A.RPT_DTL_INFO_TXT_01, A.RPT_DTL_INFO_TXT_02, A.RPT_DTL_INFO_TXT_03, A.RPT_DTL_INFO_TXT_04, A.RPT_DTL_INFO_TXT_05 
   ,A.RPT_DTL_INFO_TXT_06, A.RPT_DTL_INFO_TXT_07, A.RPT_DTL_INFO_TXT_08, A.RPT_DTL_INFO_TXT_09, A.RPT_DTL_INFO_TXT_10, A.RPT_DTL_INFO_TXT_11, A.RPT_DTL_INFO_TXT_12, A.RPT_DTL_INFO_TXT_13
   ,A.RPT_DTL_INFO_TXT_14, A.RPT_DTL_INFO_TXT_15, A.RPT_DTL_INFO_TXT_16, A.RPT_DTL_INFO_TXT_17, A.RPT_DTL_INFO_TXT_18, A.RPT_DTL_INFO_TXT_19, A.RPT_DTL_INFO_TXT_20, A.RPT_DTL_INFO_TXT_21
   ,A.RPT_DTL_INFO_TXT_22, A.RPT_DTL_INFO_TXT_23, A.RPT_DTL_INFO_TXT_24, A.RPT_DTL_INFO_TXT_25, A.RPT_DTL_INFO_TXT_26, A.RPT_DTL_INFO_TXT_27
   ,A.MDSE_CD, A.MDSE_NM, A.CUST_MDSE_CD, A.RTRN_QTY_PRINT_TXT, A.PKG_UOM_CD
FROM RMA_RPT_WRK_V A
WHERE
A.GLBL_CMPY_CD = ${GLBL_CMPY_CD}
AND A.USER_ID = ${USER_ID}
AND A.BIZ_APP_ID = ${BIZ_APP_ID}
AND A.RMA_RPT_TS = ${RMA_RPT_TS}
AND A.EZCANCELFLAG = '0'
order by A.RMA_NUM, A.RMA_LINE_NUM, A.RMA_LINE_SUB_NUM, A.RMA_LINE_SUB_TRX_NUM
"/>


<doc encoding="UTF-8">
<condition test="${sql00.item_count}" value="0" operator="equal">
 <error message="no data in Parameter DB"/>
</condition>

<!-- Set Parameter -->
<for variable="sql0">
	<condition test="${sql0.RPT_PRM_NM}" value="GLBL_CMPY_CD" operator="equal">
		<assign variable="GLBL_CMPY_CD" value="${sql0.RPT_PRM_VAL_TXT}"/>
	</condition>
	<condition test="${sql0.RPT_PRM_NM}" value="USER_ID" operator="equal">
		<assign variable="USER_ID" value="${sql0.RPT_PRM_VAL_TXT}"/>
	</condition>
	<condition test="${sql0.RPT_PRM_NM}" value="BIZ_APP_ID" operator="equal">
		<assign variable="BIZ_APP_ID" value="${sql0.RPT_PRM_VAL_TXT}"/>
	</condition>
	<condition test="${sql0.RPT_PRM_NM}" value="RMA_RPT_TS" operator="equal">
		<assign variable="RMA_RPT_TS" value="${sql0.RPT_PRM_VAL_TXT}"/>
	</condition>
	<condition test="${sql0.RPT_PRM_NM}" value="INTL_LANG_VAL_COL_NM" operator="equal">
		<assign variable="INTL_LANG_VAL_COL_NM" value="${sql0.RPT_PRM_VAL_TXT}"/>
	</condition>
</for>

<!-- Check Lang DB -->
<condition test="${sql01.item_count}" value="0" operator="equal">
 <error message="no data in Language DB"/>
</condition>

<!-- Check Print Work DB -->
<condition test="${sql02.item_count}" value="0" operator="equal">
 <error message="no data in Print Work DB"/>
</condition>

<!-- Set Label from DB -->
<for variable="sql1">
    <condition test="${sql1.LANG_KEY_CD}" value="m" operator="equal"><assign variable="Cm" value="${sql1.LANGUAGE_LABEL}"/></condition><!-- Page -->
    <condition test="${sql1.LANG_KEY_CD}" value="p" operator="equal"><assign variable="Cp" value="${sql1.LANGUAGE_LABEL}"/></condition><!-- of -->
    <condition test="${sql1.LANG_KEY_CD}" value="k" operator="equal"><assign variable="Ck" value="${sql1.LANGUAGE_LABEL}"/></condition><!-- Return -->
    <condition test="${sql1.LANG_KEY_CD}" value="22559" operator="equal"><assign variable="C22559" value="${sql1.LANGUAGE_LABEL}"/></condition><!-- Authorization -->
    <condition test="${sql1.LANG_KEY_CD}" value="22560" operator="equal"><assign variable="C22560" value="${sql1.LANGUAGE_LABEL}"/></condition><!-- Sold-to Address -->
    <condition test="${sql1.LANG_KEY_CD}" value="989" operator="equal"><assign variable="C989" value="${sql1.LANGUAGE_LABEL}"/></condition><!-- Contact -->
    <condition test="${sql1.LANG_KEY_CD}" value="4693" operator="equal"><assign variable="C4693" value="${sql1.LANGUAGE_LABEL}"/></condition><!-- Tel -->
    <condition test="${sql1.LANG_KEY_CD}" value="1848" operator="equal"><assign variable="C1848" value="${sql1.LANGUAGE_LABEL}"/></condition><!-- Fax -->
    <condition test="${sql1.LANG_KEY_CD}" value="22561" operator="equal"><assign variable="C22561" value="${sql1.LANGUAGE_LABEL}"/></condition><!-- Information -->
    <condition test="${sql1.LANG_KEY_CD}" value="22562" operator="equal"><assign variable="C22562" value="${sql1.LANGUAGE_LABEL}"/></condition><!-- Return Goods # -->
    <condition test="${sql1.LANG_KEY_CD}" value="22563" operator="equal"><assign variable="C22563" value="${sql1.LANGUAGE_LABEL}"/></condition><!-- Document Date -->
    <condition test="${sql1.LANG_KEY_CD}" value="22564" operator="equal"><assign variable="C22564" value="${sql1.LANGUAGE_LABEL}"/></condition><!-- Customer PO# -->
    <condition test="${sql1.LANG_KEY_CD}" value="22565" operator="equal"><assign variable="C22565" value="${sql1.LANGUAGE_LABEL}"/></condition><!-- Processed By -->
    <condition test="${sql1.LANG_KEY_CD}" value="22566" operator="equal"><assign variable="C22566" value="${sql1.LANGUAGE_LABEL}"/></condition><!-- Ship-to Address -->
    <condition test="${sql1.LANG_KEY_CD}" value="22567" operator="equal"><assign variable="C22567" value="${sql1.LANGUAGE_LABEL}:"/></condition><!-- For Customer Assistance Call -->
    <condition test="${sql1.LANG_KEY_CD}" value="22568" operator="equal"><assign variable="C22568" value="${sql1.LANGUAGE_LABEL}:"/></condition><!-- Return Authorization Expires -->
    <condition test="${sql1.LANG_KEY_CD}" value="22569" operator="equal"><assign variable="C22569" value="${sql1.LANGUAGE_LABEL}"/></condition><!-- (30 DAYS FROM ISSUE DATE) -->
    <condition test="${sql1.LANG_KEY_CD}" value="22570" operator="equal"><assign variable="C22570" value="${sql1.LANGUAGE_LABEL}"/></condition><!-- Material No & Description -->
    <condition test="${sql1.LANG_KEY_CD}" value="3567" operator="equal"><assign variable="C3567" value="${sql1.LANGUAGE_LABEL}"/></condition><!-- Qty -->
    <condition test="${sql1.LANG_KEY_CD}" value="22571" operator="equal"><assign variable="C22571" value="${sql1.LANGUAGE_LABEL}"/></condition><!-- Mercury Code -->
</for>


<!-- Output to Dat File -->
 <section name="Control Section">
  <textln>VERSION=8.1</textln>
 </section>
 <section name="Form Section">
  <textln>FORM=..\..\forms\NWBF0070.fcp</textln>
<!--  <textln>FORM=NWBF0070.fcp</textln>-->
   <textln>NEXTPAGE</textln>
 </section>
 <section name="Table Data Section">

  <for variable="sql2">
      <!-- Header Info -->
	  <text>"${sql2.GLBL_CMPY_NM}",</text>
	  <text>"${sql2.GLBL_FULL_CMPY_ADDR}",</text>
	  <text>"${Cm}",</text>  <!-- Page -->
	  <text>"${Cp}",</text>  <!-- of -->
	  <text>"${Ck}",</text>  <!-- Return -->
	  <text>"${C22559}",</text>  <!-- Authorization -->
	  <text>"${C22560}",</text>  <!-- Sold-to Address -->
	  <text>"${sql2.SELL_TO_LOC_NM}",</text>
	  <text>"${sql2.SELL_TO_ADDR_01}",</text>
	  <text>"${sql2.SELL_TO_ADDR_02}",</text>
      <condition test="${sql2.SELL_TO_CTAC_PSN_NM}" value="" operator="not equal">
		  <text>"${C989}",</text>  <!-- Contact -->
		  <text>":",</text>
		  <text>"${sql2.SELL_TO_CTAC_PSN_NM}",</text>
      </condition>
      <condition test="${sql2.SELL_TO_CTAC_PSN_NM}" value="" operator="equal">
		  <text>"",</text>  <!-- Contact -->
		  <text>"",</text>
		  <text>"",</text>
      </condition>
      <condition test="${sql2.SELL_TO_TEL_NUM}" value="" operator="not equal">
		  <text>"${C4693}",</text>  <!-- Tel -->
		  <text>":",</text>
		  <text>"${sql2.SELL_TO_TEL_NUM}",</text>
      </condition>
      <condition test="${sql2.SELL_TO_TEL_NUM}" value="" operator="equal">
		  <text>"",</text>  <!-- Tel -->
		  <text>"",</text>
		  <text>"",</text>
      </condition>
      <condition test="${sql2.SELL_TO_FAX_NUM}" value="" operator="not equal">
		  <text>"${C1848}",</text>  <!-- Fax -->
		  <text>":",</text>
		  <text>"${sql2.SELL_TO_FAX_NUM}",</text>
      </condition>
      <condition test="${sql2.SELL_TO_FAX_NUM}" value="" operator="equal">
		  <text>"",</text>  <!-- Fax -->
		  <text>"",</text>
		  <text>"",</text>
      </condition>
	  <text>"${C22561}",</text>  <!-- Information -->
      <condition test="${sql2.RMA_NUM}" value="" operator="not equal">
		  <text>"${C22562}",</text>  <!-- Return Goods # -->
		  <text>":",</text>
		  <text>"${sql2.RMA_NUM}",</text>
      </condition>
      <condition test="${sql2.RMA_NUM}" value="" operator="equal">
		  <text>"",</text>  <!-- Return Goods # -->
		  <text>"",</text>
		  <text>"",</text>
      </condition>
      <condition test="${sql2.RMA_DT_RPT_DT_TXT}" value="" operator="not equal">
		  <text>"${C22563}",</text>  <!-- Document Date -->
		  <text>":",</text>
		  <text>"${sql2.RMA_DT_RPT_DT_TXT}",</text>
      </condition>
      <condition test="${sql2.RMA_DT_RPT_DT_TXT}" value="" operator="equal">
		  <text>"",</text>  <!-- Document Date -->
		  <text>"",</text>
		  <text>"",</text>
      </condition>
      <condition test="${sql2.CUST_REF_NUM}" value="" operator="not equal">
		  <text>"${C22564}",</text>  <!-- Customer PO# -->
		  <text>":",</text>
		  <text>"${sql2.CUST_REF_NUM}",</text>
      </condition>
      <condition test="${sql2.CUST_REF_NUM}" value="" operator="equal">
		  <text>"",</text>  <!-- Customer PO# -->
		  <text>"",</text>
		  <text>"",</text>
      </condition>
      <condition test="${sql2.SLS_ADMIN_PSN_NM}" value="" operator="not equal">
		  <text>"${C22565}",</text>  <!-- Processed By -->
		  <text>":",</text>
		  <text>"${sql2.SLS_ADMIN_PSN_NM}",</text>
      </condition>
      <condition test="${sql2.SLS_ADMIN_PSN_NM}" value="" operator="equal">
		  <text>"",</text>  <!-- Processed By -->
		  <text>"",</text>
		  <text>"",</text>
      </condition>
	  <text>"${C22566}",</text>  <!-- Ship-to Address -->
	  <text>"${sql2.SHIP_TO_LOC_NM}",</text>

      <condition test="${sql2.SHIP_TO_CTAC_PSN_NM}" value="" operator="not equal">
		  <text>"${C989}",</text>  <!-- Contact -->
		  <text>":",</text>
		  <text>"${sql2.SHIP_TO_CTAC_PSN_NM}",</text>
      </condition>
      <condition test="${sql2.SHIP_TO_CTAC_PSN_NM}" value="" operator="equal">
		  <text>"",</text>  <!-- Contact -->
		  <text>"",</text>
		  <text>"",</text>
      </condition>
	  <text>"${sql2.SHIP_TO_ADDR_01}",</text>
	  <text>"${sql2.SHIP_TO_ADDR_02}",</text>
      <condition test="${sql2.TEL_NUM}" value="" operator="not equal">
		  <text>"${C22567}",</text>  <!-- For Customer Assistance Call -->
		  <text>"${sql2.TEL_NUM}",</text>
		  <text>"${C22568}",</text>  <!-- Return Authorization Expires -->
		  <text>"${sql2.RMA_EXP_DT_RPT_DT_TXT}",</text>
		  <text>"${C22569}",</text>  <!-- (30 DAYS FROM ISSUE DATE) -->
      </condition>
      <condition test="${sql2.TEL_NUM}" value="" operator="equal">
		  <text>"",</text>
		  <text>"",</text>
		  <text>"",</text>
		  <text>"",</text>
		  <text>"",</text>
      </condition>
	  <text>"${sql2.RPT_DTL_INFO_TXT_01}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_02}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_03}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_04}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_05}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_06}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_07}",</text>
	  <text>"${C22570}",</text>  <!-- Material No & Description -->
	  <text>"${C3567}",</text>  <!-- Qty -->
	  <text>"${C22571}",</text>  <!-- Mercury Code -->
	  <text>"${sql2.CUST_MDSE_CD}",</text>
	  <text>"${sql2.RTRN_QTY_PRINT_TXT}",</text>
	  <text>"${sql2.PKG_UOM_CD}",</text>
	  <text>"${sql2.MDSE_CD}",</text>
	  <text>"${sql2.MDSE_NM}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_08}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_09}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_10}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_11}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_12}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_13}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_14}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_15}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_16}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_17}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_18}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_19}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_20}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_21}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_22}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_23}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_24}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_25}",</text>
	  <text>"${sql2.RPT_DTL_INFO_TXT_26}",</text>
	  <textln>"${sql2.RPT_DTL_INFO_TXT_27}"</textln>
  </for>
  </section>

</doc>
<mdatas>
  <mdata key="xcCommonExAttrText1" value="version1.0"/>
</mdatas>
</template>