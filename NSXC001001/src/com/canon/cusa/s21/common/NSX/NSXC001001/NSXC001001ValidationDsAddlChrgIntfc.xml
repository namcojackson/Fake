<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NSXC001001ValidationDsAddlChrgIntfc">
    <statement id="findDsContrIntfc" parameterClass="Map" resultClass="Map">
        SELECT DISTINCT
             CON.DS_CONTR_NUM
         FROM
              DS_CONTR_INTFC       CON
             ,DS_ADDL_CHRG_INTFC   ADDL
             ,DS_CONTR_INTFC_ACT   ACT
         WHERE
             CON.GLBL_CMPY_CD                = #glblCmpyCd#
             AND CON.DS_CONTR_INTFC_BAT_NUM  = #dsContrIntfcBatNum#
             AND CON.DS_CONTR_SRC_REF_NUM    = #dsContrSrcRefNum#
             AND CON.CONTR_INTFC_SRC_TP_CD   = #contrIntfcSrcTpCd#
             <isNotNull property="cpoSvcDtlPk">
             AND CON.CPO_SVC_DTL_PK          = #cpoSvcDtlPk#
             </isNotNull>
             AND CON.EZCANCELFLAG            = '0'
             AND CON.GLBL_CMPY_CD            = ACT.GLBL_CMPY_CD(+)
             AND CON.DS_CONTR_INTFC_ACT_CD   = ACT.DS_CONTR_INTFC_ACT_CD(+)
             AND CON.EZCANCELFLAG            = ACT.EZCANCELFLAG(+)
             AND CON.GLBL_CMPY_CD            = ADDL.GLBL_CMPY_CD(+)
             AND CON.DS_CONTR_INTFC_BAT_NUM  = ADDL.DS_CONTR_INTFC_BAT_NUM(+)
             AND CON.DS_CONTR_SRC_REF_NUM    = ADDL.DS_CONTR_SRC_REF_NUM(+)
             AND CON.CONTR_INTFC_SRC_TP_CD   = ADDL.CONTR_INTFC_SRC_TP_CD(+)
             AND NVL(CON.SVC_MACH_MSTR_PK,0) = NVL(ADDL.SVC_MACH_MSTR_PK(+),0)
             <isNotNull property="cpoSvcDtlPk">
             AND CON.CPO_SVC_DTL_PK          = ADDL.CPO_SVC_DTL_PK(+)
             </isNotNull>
             AND CON.EZCANCELFLAG            = ADDL.EZCANCELFLAG(+)
    </statement>
    <statement id="getDsContrNumForHeaderConsistencyCheck" parameterClass="Map" resultClass="Map">
        SELECT DISTINCT
             CON.DS_CONTR_NUM
         FROM
             DS_CONTR_INTFC       CON
         WHERE
             CON.GLBL_CMPY_CD                = #glblCmpyCd#
             AND CON.DS_CONTR_INTFC_BAT_NUM  = #dsContrIntfcBatNum#
             AND CON.DS_CONTR_SRC_REF_NUM    = #dsContrSrcRefNum#
             AND CON.CONTR_INTFC_SRC_TP_CD   = #contrIntfcSrcTpCd#
             <isNotNull property="cpoSvcDtlPk">
             AND CON.CPO_SVC_DTL_PK          = #cpoSvcDtlPk#
             </isNotNull>
             AND CON.EZCANCELFLAG            = '0'
    </statement>
</sqlMap>
