<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NSXC001001GetDefPmtTermCashDisc">

    <statement id="getDefPmtTermCashDiscBySellBill" parameterClass="Map" resultClass="Map">
        SELECT 
                PMT_TERM_CASH_DISC_CD
        FROM
                CUST_PMT_TERM
        WHERE
                GLBL_CMPY_CD = #glblCmpyCd#
            AND (ASG_LOC_ROLE_LAYER_NUM = 1 AND (CUST_CD = #billToCustCd# or CUST_CD = '*')
            OR  ASG_LOC_ROLE_LAYER_NUM = 2 AND (CUST_CD = #sellToCustCd# or CUST_CD = '*'))
            AND EZCANCELFLAG = '0'
        ORDER BY
                ASG_LOC_ROLE_LAYER_NUM DESC
               ,ASG_PROD_CTRL_LAYER_NUM DESC
    </statement>

    <statement id="getDefPmtTermCashDiscBySellBillMDSE" parameterClass="Map" resultClass="Map">
        SELECT 
                PMT_TERM_CASH_DISC_CD
        FROM
                CUST_PMT_TERM
        WHERE
                GLBL_CMPY_CD = #glblCmpyCd#
            AND (ASG_LOC_ROLE_LAYER_NUM = 1 AND (CUST_CD = #billToCustCd# or CUST_CD = '*')
            OR  ASG_LOC_ROLE_LAYER_NUM = 2 AND (CUST_CD = #sellToCustCd# or CUST_CD = '*'))
            AND EZCANCELFLAG = '0'
            AND (
                (ASG_PROD_CTRL_LAYER_NUM = 99 AND PROD_CTRL_MDSE_CD = #mdseCd#)
                <isNotNull property="OR0">OR</isNotNull>
                <isNotNull property="zerothProdCtrlCd">
                (ASG_PROD_CTRL_LAYER_NUM = 0 AND PROD_CTRL_MDSE_CD = #zerothProdCtrlCd#)
                </isNotNull>
                <isNotNull property="OR1">OR</isNotNull>
                <isNotNull property="firstProdCtrlCd">
                (ASG_PROD_CTRL_LAYER_NUM = 1 AND PROD_CTRL_MDSE_CD = #firstProdCtrlCd#)
                </isNotNull>
                <isNotNull property="OR2">OR</isNotNull>
                <isNotNull property="scdProdCtrlCd">
                (ASG_PROD_CTRL_LAYER_NUM = 2 AND PROD_CTRL_MDSE_CD = #scdProdCtrlCd#)
                </isNotNull>
                <isNotNull property="OR3">OR</isNotNull>
                <isNotNull property="thirdProdCtrlCd">
                (ASG_PROD_CTRL_LAYER_NUM = 3 AND PROD_CTRL_MDSE_CD = #thirdProdCtrlCd#)
                </isNotNull>
                <isNotNull property="OR4">OR</isNotNull>
                <isNotNull property="frthProdCtrlCd">
                (ASG_PROD_CTRL_LAYER_NUM = 4 AND PROD_CTRL_MDSE_CD = #frthProdCtrlCd#)
                </isNotNull>
                <isNotNull property="OR5">OR</isNotNull>
                <isNotNull property="fifthProdCtrlCd">
                (ASG_PROD_CTRL_LAYER_NUM = 5 AND PROD_CTRL_MDSE_CD = #fifthProdCtrlCd#)
                </isNotNull>
                <isNotNull property="OR6">OR</isNotNull>
                <isNotNull property="sixthProdCtrlCd">
                (ASG_PROD_CTRL_LAYER_NUM = 6 AND PROD_CTRL_MDSE_CD = #sixthProdCtrlCd#)
                </isNotNull>
                <isNotNull property="OR7">OR</isNotNull>
                <isNotNull property="svnthProdCtrlCd">
                (ASG_PROD_CTRL_LAYER_NUM = 7 AND PROD_CTRL_MDSE_CD = #svnthProdCtrlCd#)
                </isNotNull>
                )

        ORDER BY
                ASG_LOC_ROLE_LAYER_NUM DESC
               ,ASG_PROD_CTRL_LAYER_NUM DESC
    </statement>

</sqlMap>
