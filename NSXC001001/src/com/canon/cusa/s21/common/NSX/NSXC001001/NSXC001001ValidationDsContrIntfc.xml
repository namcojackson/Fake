<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NSXC001001ValidationDsContrIntfc">
    <typeAlias alias="DS_ACTL_CNT_INTFCTMsg"         type="business.db.DS_ACTL_CNT_INTFCTMsg"/>
    <typeAlias alias="DS_XS_COPY_INTFCTMsg"          type="business.db.DS_XS_COPY_INTFCTMsg"/>
    <typeAlias alias="DS_ADDL_CHRG_INTFCTMsg"        type="business.db.DS_ADDL_CHRG_INTFCTMsg"/>
    <typeAlias alias="PRC_ALLOC_INTFCTMsg"           type="business.db.PRC_ALLOC_INTFCTMsg"/>
    <statement id="getActlCntIntfc" parameterClass="Map" resultMap="result.DS_ACTL_CNT_INTFCTMsg">
        SELECT
             DACI.GLBL_CMPY_CD            AS GLBL_CMPY_CD
            ,DACI.DS_ACTL_CNT_INTFC_PK    AS DS_ACTL_CNT_INTFC_PK
            ,DACI.DS_CONTR_INTFC_BAT_NUM  AS DS_CONTR_INTFC_BAT_NUM
            ,DACI.DS_CONTR_SRC_REF_NUM    AS DS_CONTR_SRC_REF_NUM
            ,DACI.CONTR_INTFC_SRC_TP_CD   AS CONTR_INTFC_SRC_TP_CD
            ,DACI.ACTL_CNT_INTFC_STS_CD   AS ACTL_CNT_INTFC_STS_CD
            ,DACI.INTFC_ERR_MSG_TXT       AS INTFC_ERR_MSG_TXT
            ,DACI.SER_NUM                 AS SER_NUM
            ,DACI.SVC_MACH_MSTR_PK        AS SVC_MACH_MSTR_PK
            ,DACI.MDSE_CD                 AS MDSE_CD
            ,DACI.PHYS_MTR_LB_CD          AS PHYS_MTR_LB_CD
            ,DACI.PHYS_MTR_LB_NM          AS PHYS_MTR_LB_NM
            ,DACI.BLLBL_FLG               AS BLLBL_FLG
            ,DACI.CONTR_MTR_MULT_RATE     AS CONTR_MTR_MULT_RATE
            ,DACI.BLLG_MTR_LB_CD          AS BLLG_MTR_LB_CD
            ,DACI.BLLG_MTR_LB_NM          AS BLLG_MTR_LB_NM
            ,DACI.INTG_MDSE_CD            AS INTG_MDSE_CD
            ,DACI.CPO_SVC_DTL_PK          AS CPO_SVC_DTL_PK
            ,DACI.EZUPTIME                AS EZUPTIME
            ,DACI.EZUPTIMEZONE            AS EZUPTIMEZONE
        FROM
            DS_ACTL_CNT_INTFC DACI
        WHERE
                DACI.GLBL_CMPY_CD                = #glblCmpyCd#
            AND DACI.CONTR_INTFC_SRC_TP_CD       = #dsContrSrcTpCd#
            AND DACI.DS_CONTR_SRC_REF_NUM        = #dsContrSrcRefNum#
            AND DACI.DS_CONTR_INTFC_BAT_NUM      = #dsContrIntfcBatNum#
            <isNotNull property="cpoSvcDtlPk">
            AND DACI.CPO_SVC_DTL_PK              = #cpoSvcDtlPk#
            </isNotNull>
            AND DACI.EZCANCELFLAG                = '0'
    </statement>

    <resultMap id="result.DS_ACTL_CNT_INTFCTMsg" class="DS_ACTL_CNT_INTFCTMsg">
        <result property="glblCmpyCd"                  column="GLBL_CMPY_CD"                    javaType="EZDTStringItem"/>
        <result property="dsActlCntIntfcPk"            column="DS_ACTL_CNT_INTFC_PK"            javaType="EZDTBigDecimalItem"/>
        <result property="dsContrIntfcBatNum"          column="DS_CONTR_INTFC_BAT_NUM"          javaType="EZDTStringItem"/>
        <result property="dsContrSrcRefNum"            column="DS_CONTR_SRC_REF_NUM"            javaType="EZDTStringItem"/>
        <result property="contrIntfcSrcTpCd"           column="CONTR_INTFC_SRC_TP_CD"           javaType="EZDTStringItem"/>
        <result property="actlCntIntfcStsCd"           column="ACTL_CNT_INTFC_STS_CD"           javaType="EZDTStringItem"/>
        <result property="intfcErrMsgTxt"              column="INTFC_ERR_MSG_TXT"               javaType="EZDTStringItem"/>
        <result property="serNum"                      column="SER_NUM"                         javaType="EZDTStringItem"/>
        <result property="svcMachMstrPk"               column="SVC_MACH_MSTR_PK"                javaType="EZDTBigDecimalItem"/>
        <result property="mdseCd"                      column="MDSE_CD"                         javaType="EZDTStringItem"/>
        <result property="physMtrLbCd"                 column="PHYS_MTR_LB_CD"                  javaType="EZDTStringItem"/>
        <result property="physMtrLbNm"                 column="PHYS_MTR_LB_NM"                  javaType="EZDTStringItem"/>
        <result property="bllblFlg"                    column="BLLBL_FLG"                       javaType="EZDTStringItem"/>
        <result property="contrMtrMultRate"            column="CONTR_MTR_MULT_RATE"             javaType="EZDTBigDecimalItem"/>
        <result property="bllgMtrLbCd"                 column="BLLG_MTR_LB_CD"                  javaType="EZDTStringItem"/>
        <result property="bllgMtrLbNm"                 column="BLLG_MTR_LB_NM"                  javaType="EZDTStringItem"/>
        <result property="intgMdseCd"                  column="INTG_MDSE_CD"                    javaType="EZDTStringItem"/>
        <result property="cpoSvcDtlPk"                 column="CPO_SVC_DTL_PK"                  javaType="EZDTBigDecimalItem"/>
        <result property="ezUpTime"                    column="EZUPTIME"                        javaType="EZDTStringItem"/>
        <result property="ezUpTimeZone"                column="EZUPTIMEZONE"                    javaType="EZDTStringItem"/>
    </resultMap>

    <statement id="getDsXsCopyIntfc" parameterClass="Map" resultMap="result.DS_XS_COPY_INTFCTMsg"> 
        SELECT
             DXCI.GLBL_CMPY_CD           AS GLBL_CMPY_CD
            ,DXCI.DS_XS_COPY_INTFC_PK    AS DS_XS_COPY_INTFC_PK
            ,DXCI.DS_CONTR_INTFC_BAT_NUM AS DS_CONTR_INTFC_BAT_NUM
            ,DXCI.DS_CONTR_SRC_REF_NUM   AS DS_CONTR_SRC_REF_NUM
            ,DXCI.CONTR_INTFC_SRC_TP_CD  AS CONTR_INTFC_SRC_TP_CD
            ,DXCI.XS_COPY_INTFC_STS_CD   AS XS_COPY_INTFC_STS_CD
            ,DXCI.INTFC_ERR_MSG_TXT      AS INTFC_ERR_MSG_TXT
            ,DXCI.SER_NUM                AS SER_NUM
            ,DXCI.SVC_MACH_MSTR_PK       AS SVC_MACH_MSTR_PK
            ,DXCI.MDSE_CD                AS MDSE_CD
            ,DXCI.BLLG_MTR_LB_CD         AS BLLG_MTR_LB_CD
            ,DXCI.BLLG_MTR_LB_NM         AS BLLG_MTR_LB_NM
            ,DXCI.XS_MTR_COPY_QTY        AS XS_MTR_COPY_QTY
            ,DXCI.XS_MTR_AMT_RATE        AS XS_MTR_AMT_RATE
            ,DXCI.XS_MTR_LVL_NUM         AS XS_MTR_LVL_NUM
            ,DXCI.CPO_SVC_DTL_PK         AS CPO_SVC_DTL_PK
            ,DXCI.EZUPTIME               AS EZUPTIME
            ,DXCI.EZUPTIMEZONE           AS EZUPTIMEZONE
        FROM
            DS_XS_COPY_INTFC DXCI
        WHERE
                DXCI.GLBL_CMPY_CD                = #glblCmpyCd#
            AND DXCI.CONTR_INTFC_SRC_TP_CD       = #dsContrSrcTpCd#
            AND DXCI.DS_CONTR_SRC_REF_NUM        = #dsContrSrcRefNum#
            AND DXCI.DS_CONTR_INTFC_BAT_NUM      = #dsContrIntfcBatNum#
            <isNotNull property="cpoSvcDtlPk">
            AND DXCI.CPO_SVC_DTL_PK              = #cpoSvcDtlPk#
            </isNotNull>
            AND DXCI.EZCANCELFLAG                = '0'
   </statement>

   <resultMap id="result.DS_XS_COPY_INTFCTMsg" class="DS_XS_COPY_INTFCTMsg">
        <result property="glblCmpyCd"                  column="GLBL_CMPY_CD"                    javaType="EZDTStringItem"/>
        <result property="dsXsCopyIntfcPk"             column="DS_XS_COPY_INTFC_PK"             javaType="EZDTBigDecimalItem"/>
        <result property="dsContrIntfcBatNum"          column="DS_CONTR_INTFC_BAT_NUM"          javaType="EZDTStringItem"/>
        <result property="dsContrSrcRefNum"            column="DS_CONTR_SRC_REF_NUM"            javaType="EZDTStringItem"/>
        <result property="contrIntfcSrcTpCd"           column="CONTR_INTFC_SRC_TP_CD"           javaType="EZDTStringItem"/>
        <result property="xsCopyIntfcStsCd"            column="XS_COPY_INTFC_STS_CD"            javaType="EZDTStringItem"/>
        <result property="intfcErrMsgTxt"              column="INTFC_ERR_MSG_TXT"               javaType="EZDTStringItem"/>
        <result property="serNum"                      column="SER_NUM"                         javaType="EZDTStringItem"/>
        <result property="svcMachMstrPk"               column="SVC_MACH_MSTR_PK"                javaType="EZDTBigDecimalItem"/>
        <result property="mdseCd"                      column="MDSE_CD"                         javaType="EZDTStringItem"/>
        <result property="bllgMtrLbCd"                 column="BLLG_MTR_LB_CD"                  javaType="EZDTStringItem"/>
        <result property="bllgMtrLbNm"                 column="BLLG_MTR_LB_NM"                  javaType="EZDTStringItem"/>
        <result property="xsMtrCopyQty"                column="XS_MTR_COPY_QTY"                 javaType="EZDTBigDecimalItem"/>
        <result property="xsMtrAmtRate"                column="XS_MTR_AMT_RATE"                 javaType="EZDTBigDecimalItem"/>
        <result property="xsMtrLvlNum"                 column="XS_MTR_LVL_NUM"                  javaType="EZDTStringItem"/>
        <result property="cpoSvcDtlPk"                 column="CPO_SVC_DTL_PK"                  javaType="EZDTBigDecimalItem"/>
        <result property="ezUpTime"                    column="EZUPTIME"                        javaType="EZDTStringItem"/>
        <result property="ezUpTimeZone"                column="EZUPTIMEZONE"                    javaType="EZDTStringItem"/>
    </resultMap>


    <statement id="getDsAddlChrgIntfc" parameterClass="Map" resultMap="result.DS_ADDL_CHRG_INTFCTMsg"> 
        SELECT
             DACI.GLBL_CMPY_CD                 AS GLBL_CMPY_CD
            ,DACI.DS_ADDL_CHRG_INTFC_PK        AS DS_ADDL_CHRG_INTFC_PK
            ,DACI.DS_CONTR_INTFC_BAT_NUM       AS DS_CONTR_INTFC_BAT_NUM
            ,DACI.DS_CONTR_SRC_REF_NUM         AS DS_CONTR_SRC_REF_NUM
            ,DACI.CONTR_INTFC_SRC_TP_CD        AS CONTR_INTFC_SRC_TP_CD
            ,DACI.ADD_CHRG_INTFC_STS_CD        AS ADD_CHRG_INTFC_STS_CD
            ,DACI.INTFC_ERR_MSG_TXT            AS INTFC_ERR_MSG_TXT
            ,DACI.SER_NUM                      AS SER_NUM
            ,DACI.SVC_MACH_MSTR_PK             AS SVC_MACH_MSTR_PK
            ,DACI.MDSE_CD                      AS MDSE_CD
            ,DACI.CHRG_LVL_TP_CD               AS CHRG_LVL_TP_CD
            ,DACI.ADDL_CHRG_TP_CD              AS ADDL_CHRG_TP_CD
            ,DACI.EFF_FROM_DT                  AS EFF_FROM_DT
            ,DACI.EFF_THRU_DT                  AS EFF_THRU_DT
            ,DACI.BLLG_CYCLE_CD                AS BLLG_CYCLE_CD
            ,DACI.ADDL_CHRG_FLAT_DEAL_PRC_AMT  AS ADDL_CHRG_FLAT_DEAL_PRC_AMT
            ,DACI.ADDL_CHRG_APLC_PCT           AS ADDL_CHRG_APLC_PCT
            ,DACI.ADDL_CHRG_INV_TP_CD          AS ADDL_CHRG_INV_TP_CD
            ,DACI.PRINT_DTL_FLG                AS PRINT_DTL_FLG
            ,DACI.CPO_SVC_DTL_PK               AS CPO_SVC_DTL_PK
            ,DACI.EZUPTIME                     AS EZUPTIME
            ,DACI.EZUPTIMEZONE                 AS EZUPTIMEZONE
        FROM
            DS_ADDL_CHRG_INTFC DACI
        WHERE
                DACI.GLBL_CMPY_CD                = #glblCmpyCd#
            AND DACI.CONTR_INTFC_SRC_TP_CD       = #dsContrSrcTpCd#
            AND DACI.DS_CONTR_SRC_REF_NUM        = #dsContrSrcRefNum#
            AND DACI.DS_CONTR_INTFC_BAT_NUM      = #dsContrIntfcBatNum#
            <isNotNull property="cpoSvcDtlPk">
            AND DACI.CPO_SVC_DTL_PK              = #cpoSvcDtlPk#
            </isNotNull>
            AND DACI.EZCANCELFLAG                = '0'
    </statement>

    <resultMap id="result.DS_ADDL_CHRG_INTFCTMsg" class="DS_ADDL_CHRG_INTFCTMsg">
        <result property="glblCmpyCd"                  column="GLBL_CMPY_CD"                    javaType="EZDTStringItem"/>
        <result property="dsAddlChrgIntfcPk"           column="DS_ADDL_CHRG_INTFC_PK"           javaType="EZDTBigDecimalItem"/>
        <result property="dsContrIntfcBatNum"          column="DS_CONTR_INTFC_BAT_NUM"          javaType="EZDTStringItem"/>
        <result property="dsContrSrcRefNum"            column="DS_CONTR_SRC_REF_NUM"            javaType="EZDTStringItem"/>
        <result property="contrIntfcSrcTpCd"           column="CONTR_INTFC_SRC_TP_CD"           javaType="EZDTStringItem"/>
        <result property="addChrgIntfcStsCd"           column="ADD_CHRG_INTFC_STS_CD"           javaType="EZDTStringItem"/>
        <result property="intfcErrMsgTxt"              column="INTFC_ERR_MSG_TXT"               javaType="EZDTStringItem"/>
        <result property="serNum"                      column="SER_NUM"                         javaType="EZDTStringItem"/>
        <result property="svcMachMstrPk"               column="SVC_MACH_MSTR_PK"                javaType="EZDTBigDecimalItem"/>
        <result property="mdseCd"                      column="MDSE_CD"                         javaType="EZDTStringItem"/>
        <result property="chrgLvlTpCd"                 column="CHRG_LVL_TP_CD"                  javaType="EZDTStringItem"/>
        <result property="addlChrgTpCd"                column="ADDL_CHRG_TP_CD"                 javaType="EZDTStringItem"/>
        <result property="effFromDt"                   column="EFF_FROM_DT"                     javaType="EZDTStringItem"/>
        <result property="effThruDt"                   column="EFF_THRU_DT"                     javaType="EZDTStringItem"/>
        <result property="bllgCycleCd"                 column="BLLG_CYCLE_CD"                   javaType="EZDTStringItem"/>
        <result property="addlChrgFlatDealPrcAmt"      column="ADDL_CHRG_FLAT_DEAL_PRC_AMT"     javaType="EZDTBigDecimalItem"/>
        <result property="addlChrgAplcPct"             column="ADDL_CHRG_APLC_PCT"              javaType="EZDTBigDecimalItem"/>
        <result property="addlChrgInvTpCd"             column="ADDL_CHRG_INV_TP_CD"             javaType="EZDTStringItem"/>
        <result property="printDtlFlg"                 column="PRINT_DTL_FLG"                   javaType="EZDTStringItem"/>
        <result property="cpoSvcDtlPk"                 column="CPO_SVC_DTL_PK"                  javaType="EZDTBigDecimalItem"/>
        <result property="ezUpTime"                    column="EZUPTIME"                        javaType="EZDTStringItem"/>
        <result property="ezUpTimeZone"                column="EZUPTIMEZONE"                    javaType="EZDTStringItem"/>
   </resultMap>

    <statement id="getPrcAllocIntfc" parameterClass="Map" resultMap="result.PRC_ALLOC_INTFCTMsg"> 
        SELECT
             PAI.GLBL_CMPY_CD            AS GLBL_CMPY_CD
            ,PAI.PRC_ALLOC_INTFC_PK      AS PRC_ALLOC_INTFC_PK
            ,PAI.DS_CONTR_INTFC_BAT_NUM  AS DS_CONTR_INTFC_BAT_NUM
            ,PAI.DS_CONTR_SRC_REF_NUM    AS DS_CONTR_SRC_REF_NUM
            ,PAI.CONTR_INTFC_SRC_TP_CD   AS CONTR_INTFC_SRC_TP_CD
            ,PAI.ALLOC_INTFC_STS_CD      AS ALLOC_INTFC_STS_CD
            ,PAI.INTFC_ERR_MSG_TXT       AS INTFC_ERR_MSG_TXT
            ,PAI.PRC_ALLOC_INTFC_TP_CD   AS PRC_ALLOC_INTFC_TP_CD
            ,PAI.SER_NUM                 AS SER_NUM
            ,PAI.SVC_MACH_MSTR_PK        AS SVC_MACH_MSTR_PK
            ,PAI.MDSE_CD                 AS MDSE_CD
            ,PAI.TOC_CD                  AS TOC_CD
            ,PAI.TOC_NM                  AS TOC_NM
            ,PAI.PRC_ALLOC_RATE          AS PRC_ALLOC_RATE
            ,PAI.CPO_SVC_DTL_PK          AS CPO_SVC_DTL_PK
            ,PAI.EZUPTIME                AS EZUPTIME
            ,PAI.EZUPTIMEZONE            AS EZUPTIMEZONE
        FROM
            PRC_ALLOC_INTFC PAI
        WHERE
                PAI.GLBL_CMPY_CD                 = #glblCmpyCd#
            AND PAI.CONTR_INTFC_SRC_TP_CD        = #dsContrSrcTpCd#
            AND PAI.DS_CONTR_SRC_REF_NUM         = #dsContrSrcRefNum#
            AND PAI.DS_CONTR_INTFC_BAT_NUM       = #dsContrIntfcBatNum#
            <isNotNull property="cpoSvcDtlPk">
            AND PAI.CPO_SVC_DTL_PK               = #cpoSvcDtlPk#
            </isNotNull>
            AND PAI.EZCANCELFLAG                 = '0'
    </statement>

    <resultMap id="result.PRC_ALLOC_INTFCTMsg" class="PRC_ALLOC_INTFCTMsg">
        <result property="glblCmpyCd"                  column="GLBL_CMPY_CD"                    javaType="EZDTStringItem"/>
        <result property="prcAllocIntfcPk"             column="PRC_ALLOC_INTFC_PK"              javaType="EZDTBigDecimalItem"/>
        <result property="dsContrIntfcBatNum"          column="DS_CONTR_INTFC_BAT_NUM"          javaType="EZDTStringItem"/>
        <result property="dsContrSrcRefNum"            column="DS_CONTR_SRC_REF_NUM"            javaType="EZDTStringItem"/>
        <result property="contrIntfcSrcTpCd"           column="CONTR_INTFC_SRC_TP_CD"           javaType="EZDTStringItem"/>
        <result property="allocIntfcStsCd"             column="ALLOC_INTFC_STS_CD"              javaType="EZDTStringItem"/>
        <result property="intfcErrMsgTxt"              column="INTFC_ERR_MSG_TXT"               javaType="EZDTStringItem"/>
        <result property="prcAllocIntfcTpCd"           column="PRC_ALLOC_INTFC_TP_CD"           javaType="EZDTStringItem"/>
        <result property="serNum"                      column="SER_NUM"                         javaType="EZDTStringItem"/>
        <result property="svcMachMstrPk"               column="SVC_MACH_MSTR_PK"                javaType="EZDTBigDecimalItem"/>
        <result property="mdseCd"                      column="MDSE_CD"                         javaType="EZDTStringItem"/>
        <result property="tocCd"                       column="TOC_CD"                          javaType="EZDTStringItem"/>
        <result property="tocNm"                       column="TOC_NM"                          javaType="EZDTStringItem"/>
        <result property="prcAllocRate"                column="PRC_ALLOC_RATE"                  javaType="EZDTBigDecimalItem"/>
        <result property="cpoSvcDtlPk"                 column="CPO_SVC_DTL_PK"                  javaType="EZDTBigDecimalItem"/>
        <result property="ezUpTime"                    column="EZUPTIME"                        javaType="EZDTStringItem"/>
        <result property="ezUpTimeZone"                column="EZUPTIMEZONE"                    javaType="EZDTStringItem"/>
    </resultMap>

    <statement id="getDsContrSts" parameterClass="Map" resultClass="Map">
        SELECT
             DC.GLBL_CMPY_CD
            ,DC.DS_CONTR_STS_CD
            <isNotNull property="svcMachMstrPk">
            ,DCD.DS_CONTR_DTL_STS_CD
            </isNotNull>
        FROM
             DS_CONTR             DC
            <isNotNull property="svcMachMstrPk">
            ,SVC_MACH_MSTR        SMM
            ,SVC_CONFIG_MSTR      SCM
            ,DS_CONTR_DTL         DCD
            </isNotNull>
        WHERE
                DC.GLBL_CMPY_CD             = #glblCmpyCd#
            AND DC.DS_CONTR_NUM             = #dsContrNum#
            AND DC.EZCANCELFLAG             = '0'
            <isNotNull property="svcMachMstrPk">
            AND DC.GLBL_CMPY_CD             = SMM.GLBL_CMPY_CD
            AND SMM.SVC_MACH_MSTR_PK        = #svcMachMstrPk#
            AND SMM.EZCANCELFLAG            = '0'
            AND SMM.GLBL_CMPY_CD            = SCM.GLBL_CMPY_CD
            AND SMM.SVC_CONFIG_MSTR_PK      = SCM.SVC_CONFIG_MSTR_PK
            AND SCM.EZCANCELFLAG            = '0'
            AND DC.GLBL_CMPY_CD             = DCD.GLBL_CMPY_CD (+)
            AND DC.DS_CONTR_PK              = DCD.DS_CONTR_PK (+)
            AND SCM.SVC_MACH_MSTR_PK        = DCD.SVC_MACH_MSTR_PK (+)
            AND DCD.EZCANCELFLAG (+)        = '0'
            </isNotNull>
    </statement>

    <statement id="getDsContrExclStsCount" parameterClass="Map" resultClass="Integer">
        SELECT
            COUNT(DCES.DS_CONTR_STS_CD)
        FROM
            DS_CONTR_EXCL_STS    DCES
        WHERE
                DCES.GLBL_CMPY_CD           = #glblCmpyCd#
            AND DCES.DS_CONTR_STS_CD        = #dsContrStsCd#
            <isNotNull property="dsContrDtlStsCd">
            AND DCES.DS_CONTR_DTL_STS_CD    = #dsContrDtlStsCd#
            </isNotNull>
            AND DCES.ENBL_FLG               = 'Y'
            AND DCES.ADD_TO_CONTR_FLG       = 'Y'
            AND DCES.EZCANCELFLAG           = '0'
    </statement>

<!-- START 2017/06/02 K.Kitachi [QC#18568, ADD] -->
    <statement id="getAggLine" parameterClass="Map" resultClass="Map">
        SELECT
             B.CONTR_BLLG_DAY
            ,B.BASE_DPLY_PER_END_DAY
            ,B.MTR_DPLY_PER_END_DAY
        FROM
             DS_CONTR          A
            ,DS_CONTR_DTL      B
        WHERE
                A.GLBL_CMPY_CD       = #glblCmpyCd#
            AND A.DS_CONTR_NUM       = #dsContrNum#
            AND A.EZCANCELFLAG       = '0'
            AND A.GLBL_CMPY_CD       = B.GLBL_CMPY_CD
            AND A.DS_CONTR_PK        = B.DS_CONTR_PK
            AND B.DS_CONTR_DTL_TP_CD = #dsContrDtlTpCd#
            AND B.EZCANCELFLAG       = '0'
    </statement>

    <statement id="getAggLineBllgMtrLbCount" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            COUNT(*)
        FROM
             DS_CONTR          A
            ,DS_CONTR_DTL      B
            ,DS_CONTR_BLLG_MTR C
        WHERE
                A.GLBL_CMPY_CD       = #glblCmpyCd#
            AND A.DS_CONTR_NUM       = #dsContrNum#
            AND A.EZCANCELFLAG       = '0'
            AND A.GLBL_CMPY_CD       = B.GLBL_CMPY_CD
            AND A.DS_CONTR_PK        = B.DS_CONTR_PK
            AND B.DS_CONTR_DTL_TP_CD = #dsContrDtlTpCd#
            AND B.EZCANCELFLAG       = '0'
            AND B.GLBL_CMPY_CD       = C.GLBL_CMPY_CD
            AND B.DS_CONTR_DTL_PK    = C.DS_CONTR_DTL_PK
            AND C.BLLG_MTR_LB_CD     = #bllgMtrLbCd#
            AND C.EZCANCELFLAG       = '0'
    </statement>
<!-- END 2017/06/02 K.Kitachi [QC#18568, ADD] -->
</sqlMap>
