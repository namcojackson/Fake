<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NSZC101001">

    <statement id="getUpdDsContr" parameterClass="Map" resultClass="Map">
        SELECT
             A.DS_CONTR_PK            AS DS_CONTR_PK
            ,B.DS_CONTR_CTRL_STS_CD   AS DS_CONTR_CTRL_STS_CD
        FROM
             DS_CONTR A
            ,DS_CONTR_STS_V B
        WHERE
            A.GLBL_CMPY_CD          = #glblCmpyCd#
        AND A.EZCANCELFLAG          = '0'
        AND A.DS_CONTR_NUM          = #dsContrNum#
        AND A.GLBL_CMPY_CD          = B.GLBL_CMPY_CD
        AND A.DS_CONTR_PK           = B.DS_CONTR_PK
        AND B.DS_CONTR_CTRL_STS_CD  IN (#qaHold#, #qaHoldPendingApproval#)
    </statement>
    <statement id="getUpdDsContrDtl" parameterClass="Map" resultClass="Map">
        SELECT
             A.DS_CONTR_DTL_PK
            ,B.DS_CONTR_CTRL_STS_CD
        FROM
             DS_CONTR_DTL A
            ,DS_CONTR_DTL_STS_V B
        WHERE
            A.GLBL_CMPY_CD          = #glblCmpyCd#
        AND A.EZCANCELFLAG          = '0'
        AND A.DS_CONTR_PK           = #dsContrPk#
        AND A.GLBL_CMPY_CD          = B.GLBL_CMPY_CD
        AND A.DS_CONTR_DTL_PK       = B.DS_CONTR_DTL_PK
        AND B.DS_CONTR_CTRL_STS_CD  IN (#qaHold#, #qaHoldPendingApproval#)
    </statement>
    <statement id="getUpdDsContrBllgMtr" parameterClass="Map" resultClass="Map">
        SELECT
             A.DS_CONTR_BLLG_MTR_PK
            ,B.DS_CONTR_CTRL_STS_CD
        FROM
             DS_CONTR_BLLG_MTR A
            ,DS_CONTR_BLLG_MTR_STS_V B
        WHERE
            A.GLBL_CMPY_CD          = #glblCmpyCd#
        AND A.EZCANCELFLAG          = '0'
        AND A.DS_CONTR_DTL_PK       = #dsContrDtlPk#
        AND A.GLBL_CMPY_CD          = B.GLBL_CMPY_CD
        AND A.DS_CONTR_BLLG_MTR_PK  = B.DS_CONTR_BLLG_MTR_PK
        AND B.DS_CONTR_CTRL_STS_CD  IN (#qaHold#, #qaHoldPendingApproval#)
    </statement>
    <statement id="getUpdDsContrPrcEffBase" parameterClass="Map" resultClass="Map">
        SELECT
             A.DS_CONTR_PRC_EFF_PK
            ,B.DS_CONTR_CTRL_STS_CD
        FROM
             DS_CONTR_PRC_EFF A
            ,DS_CONTR_PRC_EFF_STS_V B
        WHERE
            A.GLBL_CMPY_CD          = #glblCmpyCd#
        AND A.EZCANCELFLAG          = '0'
        AND A.DS_CONTR_DTL_PK       = #dsContrDtlPk#
        AND A.BASE_CHRG_FLG         = 'Y'
        AND A.GLBL_CMPY_CD          = B.GLBL_CMPY_CD
        AND A.DS_CONTR_PRC_EFF_PK   = B.DS_CONTR_PRC_EFF_PK
        AND B.DS_CONTR_CTRL_STS_CD  IN (#qaHold#, #qaHoldPendingApproval#)
    </statement>
    <statement id="getUpdDsContrPrcEffUsg" parameterClass="Map" resultClass="Map">
        SELECT
             A.DS_CONTR_PRC_EFF_PK
            ,B.DS_CONTR_CTRL_STS_CD
        FROM
             DS_CONTR_PRC_EFF A
            ,DS_CONTR_PRC_EFF_STS_V B
        WHERE
            A.GLBL_CMPY_CD          = #glblCmpyCd#
        AND A.EZCANCELFLAG          = '0'
        AND A.DS_CONTR_BLLG_MTR_PK  = #dsContrBllgMtrPk#
        AND A.USG_CHRG_FLG          = 'Y'
        AND A.GLBL_CMPY_CD          = B.GLBL_CMPY_CD
        AND A.DS_CONTR_PRC_EFF_PK   = B.DS_CONTR_PRC_EFF_PK
        AND B.DS_CONTR_CTRL_STS_CD  IN (#qaHold#, #qaHoldPendingApproval#)
    </statement>
    <statement id="getErrContrVldRslt" parameterClass="Map" resultClass="Map">
        SELECT
             F.SER_NUM
            ,C.DS_CONTR_VLD_NM
            ,G.DS_CONTR_VLD_STS_DESC_TXT
        FROM
             DS_CONTR A
            ,DS_CONTR_VLD_RSLT_WRK B
            ,DS_CONTR_VLD C
            ,DS_CONTR_VLD_RELN D
            ,DS_CONTR_DTL E
            ,SVC_MACH_MSTR F
            ,DS_CONTR_VLD_STS G
        WHERE
            A.GLBL_CMPY_CD          = #glblCmpyCd#
        AND A.EZCANCELFLAG          = '0'
        AND A.DS_CONTR_NUM          = #dsContrNum#
        AND A.GLBL_CMPY_CD          = B.GLBL_CMPY_CD
        AND A.DS_CONTR_PK           = B.DS_CONTR_PK
        <iterate property="dsContrVldStsCd" var="elem[]" open="AND B.DS_CONTR_VLD_STS_CD IN (" close=")" conjunction=",">
                        #elem[]#
        </iterate>
        AND B.EZCANCELFLAG          = '0'
        AND B.GLBL_CMPY_CD          = C.GLBL_CMPY_CD
        AND B.DS_CONTR_VLD_PK       = C.DS_CONTR_VLD_PK
        AND C.EZCANCELFLAG          = '0'
        AND B.GLBL_CMPY_CD          = D.GLBL_CMPY_CD
        AND B.DS_CONTR_VLD_PK       = D.DS_CONTR_VLD_PK
        AND B.DS_CONTR_VLD_LIST_PK  = D.DS_CONTR_VLD_LIST_PK
        AND D.EZCANCELFLAG          = '0'
        AND B.GLBL_CMPY_CD          = E.GLBL_CMPY_CD(+)
        AND B.DS_CONTR_DTL_PK       = E.DS_CONTR_DTL_PK(+)
        AND E.EZCANCELFLAG(+)       = '0'
        AND E.GLBL_CMPY_CD          = F.GLBL_CMPY_CD(+)
        AND E.SVC_MACH_MSTR_PK      = F.SVC_MACH_MSTR_PK(+)
        AND F.EZCANCELFLAG(+)       = '0'
        AND B.GLBL_CMPY_CD          = G.GLBL_CMPY_CD
        AND B.DS_CONTR_VLD_STS_CD   = G.DS_CONTR_VLD_STS_CD
        AND G.EZCANCELFLAG          = '0'
        ORDER BY
            B.DS_CONTR_DTL_PK   ASC NULLS FIRST
            ,C.PRIM_VLD_FLG     DESC
            ,D.VLD_SORT_NUM     ASC
    </statement>
    <statement id="getContrVldRsltForRemove" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            A.DS_CONTR_VLD_RSLT_WRK_PK
        FROM
            DS_CONTR_VLD_RSLT_WRK A
        WHERE
            A.GLBL_CMPY_CD          = #glblCmpyCd#
        AND A.EZCANCELFLAG          = '0'
        AND A.DS_CONTR_PK           = #dsContrPk#
    </statement>

</sqlMap>
