<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NWZC155001MandatoryCheck">

    <statement id="getDiMndChkDfn" parameterClass="Map" resultClass="Map">
        SELECT
            DMCD.DI_MND_CHK_DFN_NM
           ,DMCD.DI_MND_CHK_TBL_NM
           ,DMCD.DI_MND_CHK_COL_NM
        FROM
            DI_MND_CHK_DFN DMCD
        WHERE
            DMCD.GLBL_CMPY_CD       = #glblCmpyCd#
        AND DMCD.EZCANCELFLAG       = '0'
        AND DMCD.DI_MND_CHK_PRFL_CD = #diMndChkPrflCd#
    </statement>

    <statement id="searchMandatoryColumns" parameterClass="Map" resultClass="Map">
         SELECT DISTINCT
         <iterate property="colList" var="colName[]" conjunction=",">
             A.$colName[]$
         </iterate>
         <isNotNull property="isDsCpoDtl">
            ,B.DS_CPO_LINE_NUM      AS B_DS_CPO_LINE_NUM
            ,B.DS_CPO_LINE_SUB_NUM  AS B_DS_CPO_LINE_SUB_NUM
         </isNotNull>
         <isNotNull property="isDsCpoConfig">
            ,C.DS_CPO_CONFIG_PK     AS C_DS_CPO_CONFIG_PK
            ,C.DS_ORD_POSN_NUM      AS C_DS_CPO_POSN_NUM
            ,C.CONFIG_CATG_CD       AS C_CONFIG_CATG_CD
         </isNotNull>
         FROM
             $tblName$     A
         <isNotNull property="isDsCpoDtl">
            ,CPO_DTL       B
         </isNotNull>
         <isNotNull property="isDsCpoConfig">
            ,DS_CPO_CONFIG C
         </isNotNull>
         WHERE
             A.GLBL_CMPY_CD = #glblCmpyCd#
         AND A.EZCANCELFLAG = '0'
         AND A.CPO_ORD_NUM  = #cpoOrdNum#
         <isNotNull property="isDsCpoDtl">
         AND B.GLBL_CMPY_CD        (+) = A.GLBL_CMPY_CD
         AND B.EZCANCELFLAG        (+) = '0'
         AND B.CPO_ORD_NUM         (+) = A.CPO_ORD_NUM
         AND B.CPO_DTL_LINE_NUM    (+) = A.CPO_DTL_LINE_NUM
         AND B.CPO_DTL_LINE_SUB_NUM(+) = A.CPO_DTL_LINE_SUB_NUM
         </isNotNull>
         <isNotNull property="isDsCpoConfig">
         AND C.GLBL_CMPY_CD        (+) = A.GLBL_CMPY_CD
         AND C.EZCANCELFLAG        (+) = '0'
         AND C.CPO_ORD_NUM         (+) = A.CPO_ORD_NUM
         AND C.DS_CPO_CONFIG_PK    (+) = A.DS_CPO_CONFIG_PK
         </isNotNull>
    </statement>
</sqlMap>