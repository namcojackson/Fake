<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NPZC129001">
    <statement id="getAslInfo" parameterClass="Map" resultClass="Map">
        SELECT
             ASD.VND_UOM_QTY
            ,ASD.BASE_ORD_QTY
            ,ASD.VND_MIN_ORD_QTY
            ,ASD.VND_INCR_ORD_QTY
        FROM
             ASL_HDR    ASH
            ,ASL_DTL    ASD
        WHERE
                ASH.GLBL_CMPY_CD                         = #GLBL_CMPY_CD#
            AND ASH.EZCANCELFLAG                         = '0'
            AND ASH.PRNT_VND_CD                          = #PRNT_VND_CD#
            AND NVL(ASH.ASL_START_DT, #MIN_START_DATE#)  &lt;=#SLS_DT#
            AND NVL(ASH.ASL_END_DT, #MAX_START_DATE#)    &gt;= #SLS_DT#
            AND ASD.GLBL_CMPY_CD                         = ASH.GLBL_CMPY_CD
            AND ASD.EZCANCELFLAG                         = '0'
            AND ASD.ASL_HDR_PK                           = ASH.ASL_HDR_PK
            AND ASD.MDSE_CD                              = #MDSE_CD#
            AND ASD.VND_CD                               = #VND_CD#
            AND NVL(ASD.EFF_FROM_DT, #MIN_START_DATE#)   &lt;= #SLS_DT#
            AND NVL(ASD.EFF_THRU_DT, #MAX_START_DATE#)   &gt;= #SLS_DT#
            AND ROWNUM                                   = 1
            ORDER BY
                ASH.ASL_HDR_PK DESC
               ,ASD.ASL_DTL_PK DESC
    </statement>

    <statement id="getAslInfoByVnd" parameterClass="Map" resultClass="Map">
        SELECT
            VND_UOM_QTY
           ,BASE_ORD_QTY
           ,VND_MIN_ORD_QTY
           ,VND_INCR_ORD_QTY
        FROM (
            SELECT
                 ASD.VND_UOM_QTY
                ,ASD.BASE_ORD_QTY
                ,ASD.VND_MIN_ORD_QTY
                ,ASD.VND_INCR_ORD_QTY
            FROM
                 ASL_HDR    ASH
                ,ASL_DTL    ASD
                ,VND        VND
                ,PRNT_VND   PVD
            WHERE
                    ASH.GLBL_CMPY_CD                         = #GLBL_CMPY_CD#
                AND ASH.EZCANCELFLAG                         = '0'
                AND ASH.PRNT_VND_CD                          = PVD.PRNT_VND_CD
                AND NVL(ASH.ASL_START_DT, #MIN_START_DATE#)  &lt;=#SLS_DT#
                AND NVL(ASH.ASL_END_DT, #MAX_START_DATE#)    &gt;= #SLS_DT#
                AND ASD.GLBL_CMPY_CD                         = ASH.GLBL_CMPY_CD
                AND ASD.EZCANCELFLAG                         = '0'
                AND ASD.ASL_HDR_PK                           = ASH.ASL_HDR_PK
                AND ASD.MDSE_CD                              = #MDSE_CD#
                AND ASD.VND_CD                               = #VND_CD#
                AND NVL(ASD.EFF_FROM_DT, #MIN_START_DATE#)   &lt;= #SLS_DT#
                AND NVL(ASD.EFF_THRU_DT, #MAX_START_DATE#)   &gt;= #SLS_DT#
                AND VND.GLBL_CMPY_CD                         = ASH.GLBL_CMPY_CD
                AND VND.EZCANCELFLAG                         = '0'
                AND VND.VND_CD                               = #VND_CD#
                AND PVD.GLBL_CMPY_CD                         = ASH.GLBL_CMPY_CD
                AND PVD.EZCANCELFLAG                         = '0'
                AND PVD.PRNT_VND_PK                          = VND.PRNT_VND_PK
                ORDER BY
                    ASH.ASL_HDR_PK DESC
                   ,ASD.ASL_DTL_PK DESC
            )
        WHERE ROWNUM = 1
    </statement>
</sqlMap>
