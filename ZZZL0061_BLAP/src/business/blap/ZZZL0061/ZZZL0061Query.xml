<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="ZZZL0061Query">

	<typeAlias alias="ZZZL0061CMsg"		type="business.blap.ZZZL0061.ZZZL0061CMsg"/>
	<typeAlias alias="ZZZL0061_ASMsg"	type="business.blap.ZZZL0061.ZZZL0061_ASMsg"/>
	
	<statement id="getBatProcLogMV" parameterClass="Map" resultMap="result.getBatProcLogMV">
		SELECT DISTINCT
			BATMV.GLBL_CMPY_CD
	    ,   BATMV.BAT_PROC_JOB_ID
	    ,   BATMV.BAT_PROC_PGM_ID
		FROM
		    BAT_PROC_LOG_MV  BATMV
		    <isNotNull property="cMsg.xxFlgNm">
		,   BAT_TBL_REL      BATREL
		    </isNotNull>

		WHERE
			BATMV.EZCANCELFLAG = 0 
			AND BATMV.GLBL_CMPY_CD = #cMsg.glblCmpyCd#
	    	<isNotNull property="cMsg.xxFlgNm">
		    AND BATREL.EZCANCELFLAG = 0
		    AND BATREL.GLBL_CMPY_CD = #cMsg.glblCmpyCd#
		    AND BATREL.BAT_PROC_JOB_ID = BATMV.BAT_PROC_JOB_ID
			</isNotNull>
		
			<isNotNull property="cMsg.batProcJobId">
			AND BATMV.BAT_PROC_JOB_ID like #cMsg.batProcJobId#
			</isNotNull>
		
			<isNotNull property="cMsg.batProcPgmId">
			AND BATMV.BAT_PROC_PGM_ID like #cMsg.batProcPgmId#
			</isNotNull>
        

		
		ORDER BY
			BATMV.BAT_PROC_JOB_ID ASC
		,   BATMV.BAT_PROC_PGM_ID ASC
			
	</statement>
	
	<resultMap id="result.getBatProcLogMV"     class="ZZZL0061_ASMsg">
		<result property="glblCmpyCd_A"		    column="GLBL_CMPY_CD"           javaType="EZDSStringItem"/>
		<result property="batProcJobId_A"		column="BAT_PROC_JOB_ID"        javaType="EZDSStringItem"/>
		<result property="batProcPgmId_A"		column="BAT_PROC_PGM_ID"        javaType="EZDSStringItem"/>
	</resultMap>

</sqlMap>
