<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NSAL1100Query">
    <typeAlias alias="NSAL1100CMsg"  type="business.blap.NSAL1100.NSAL1100CMsg"/>

    <statement id="getHeaderInfo" parameterClass="Map" resultMap="result.getHeaderInfo">
            SELECT
                 A.CUST_INCDT_ID                AS  CUST_INCDT_ID
                ,B.SVC_CR_REBIL_STS_DESC_TXT    AS  SVC_CR_REBIL_STS_DESC_TXT
                ,A.SVC_CR_REBIL_DESC_TXT        AS  SVC_CR_REBIL_DESC_TXT
                <!-- START 2017/07/20 M.Kidokoro [QC#18527, ADD] -->
<!-- START 2018/06/12 T.Ogura [QC#22382,DEL] -->
<!--            ,A.SVC_CR_REBIL_RSN_CD          AS  SVC_CR_REBIL_RSN_CD -->
<!-- END   2018/06/12 T.Ogura [QC#22382,DEL] -->
                ,A.SVC_CR_REBIL_RSN_TXT         AS  SVC_CR_REBIL_RSN_TXT
                <!-- END 2017/07/20 M.Kidokoro [QC#18527, ADD] -->
            FROM
                 SVC_CR_REBIL         A
                ,SVC_CR_REBIL_STS     B
            WHERE
                    A.GLBL_CMPY_CD              = #glblCmpyCd#
                AND A.SVC_CR_REBIL_PK           = #svcCrRebilPk#
                AND A.EZCANCELFLAG              = '0'
                AND A.GLBL_CMPY_CD              = B.GLBL_CMPY_CD
                AND A.SVC_CR_REBIL_STS_CD       = B.SVC_CR_REBIL_STS_CD
                AND B.EZCANCELFLAG              = '0'
    </statement>

    <resultMap id="result.getHeaderInfo"           class="NSAL1100CMsg">
        <result property="custIncdtId_H"           column="CUST_INCDT_ID"             javaType="EZDSStringItem" />
        <result property="svcCrRebilStsDescTxt_H"  column="SVC_CR_REBIL_STS_DESC_TXT" javaType="EZDSStringItem" />
        <result property="svcCrRebilDescTxt_H"     column="SVC_CR_REBIL_DESC_TXT"     javaType="EZDSStringItem" />
        <!-- START 2017/07/20 M.Kidokoro [QC#18527, ADD] -->
<!-- START 2018/06/12 T.Ogura [QC#22382,DEL] -->
<!--    <result property="svcCrRebilRsnCd"         column="SVC_CR_REBIL_RSN_CD"       javaType="EZDCStringItem" /> -->
<!-- END   2018/06/12 T.Ogura [QC#22382,DEL] -->
        <result property="svcCrRebilRsnTxt"        column="SVC_CR_REBIL_RSN_TXT"      javaType="EZDCStringItem" />
        <!-- ENS 2017/07/20 M.Kidokoro [QC#18527, ADD] -->
    </resultMap>

    <statement id="getFullPsnNm" parameterClass="Map" resultClass="Map">
            SELECT
                    DECODE(P.FIRST_NM,  null, '', P.FIRST_NM)
                 || DECODE(P.MID_NM,    null, '', ' ' || P.MID_NM)
                 || DECODE(P.LAST_NM,   null, '', ' ' || P.LAST_NM)
                                                  AS FULL_PSN_NM
            FROM
                 AUTH_PSN   P
            WHERE
                 P.GLBL_CMPY_CD  = #glblCmpyCd#
            AND  P.USR_NM        = #psnCd#
            AND  P.EZCANCELFLAG  = '0'
    </statement>
</sqlMap>
