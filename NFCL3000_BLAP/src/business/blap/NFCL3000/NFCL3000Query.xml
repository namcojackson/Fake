<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NFCL3000Query">

    <!-- *********************************************************** -->
    <!-- ********** Bean Definition ******************************** -->
    <!-- *********************************************************** -->
    <typeAlias alias="NFCL3000CMsg"     type="business.blap.NFCL3000.NFCL3000CMsg"/>
    <typeAlias alias="NFCL3000_ACMsg"   type="business.blap.NFCL3000.NFCL3000_ACMsg"/>
    <typeAlias alias="NFCL3000_BCMsg"   type="business.blap.NFCL3000.NFCL3000_BCMsg"/>
    <typeAlias alias="NFCL3000_CCMsg"   type="business.blap.NFCL3000.NFCL3000_CCMsg"/>
    <typeAlias alias="NFCL3000_DCMsg"   type="business.blap.NFCL3000.NFCL3000_DCMsg"/>
    <typeAlias alias="NFCL3000_ESMsg"   type="business.blap.NFCL3000.NFCL3000_ESMsg"/>
    <typeAlias alias="NFCL3000_FSMsg"   type="business.blap.NFCL3000.NFCL3000_FSMsg"/>
    <typeAlias alias="NFCL3000_GCMsg"   type="business.blap.NFCL3000.NFCL3000_GCMsg"/>
    <typeAlias alias="MDSE_STORE_PKGTMsg" type="business.db.MDSE_STORE_PKGTMsg"/>
    <typeAlias alias="TAX_ADJ_ITEMTMsg" type="business.db.TAX_ADJ_ITEMTMsg"/>

    <statement id="getInvTpPullDownList" parameterClass="Map" resultClass="Map">
        SELECT
             A.INV_TP_CD
            <!-- START 2016/08/01 S.Fujita [QC#10148,MOD] -->
            ,A.INV_TP_NM
            <!-- END   2016/08/01 S.Fujita [QC#10148,MOD] -->
        FROM
            INV_TP  A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
            AND A.INV_TP_CD     &lt;&gt; #invTpCd# 
            AND A.EZCANCELFLAG  = '0'
        ORDER BY
            A.INV_TP_SORT_NUM
    </statement>

    <statement id="getDsInvTpPullDownList" parameterClass="Map" resultClass="Map">
        SELECT
             A.DS_INV_TP_CD
            <!-- START 2016/08/01 S.Fujita [QC#10148,MOD] -->
            ,A.DS_INV_TP_NM
            <!-- END   2016/08/01 S.Fujita [QC#10148,MOD] -->
        FROM
            DS_INV_TP  A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
           <isNotNull property="invTpCd">
            AND A.INV_TP_CD     = #invTpCd#
           </isNotNull>
            AND A.EZCANCELFLAG  = '0'
        ORDER BY
            A.DS_INV_TP_SORT_NUM
    </statement>

    <statement id="getPmtTermCashDiscPullDownList" parameterClass="Map" resultClass="Map">
        SELECT
             A.PMT_TERM_CASH_DISC_CD
            <!-- START 2016/08/01 S.Fujita [QC#10148,MOD] -->
            ,A.PMT_TERM_CASH_DISC_NM
            <!-- END   2016/08/01 S.Fujita [QC#10148,MOD] -->
        FROM
            PMT_TERM_CASH_DISC  A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
            <!-- START 2016/06/16 S.Fujita [QC#10176,QC#11212,ADD] -->
            <isNotNull property="pmtTermCashDiscCd">
            AND A.PMT_TERM_CASH_DISC_CD    = #pmtTermCashDiscCd#
            </isNotNull>
            <isNotNull property="ccPmtTermCashDisc">
            AND A.PMT_TERM_CASH_DISC_CD   != #ccPmtTermCashDisc#
            </isNotNull>
            <!-- END   2016/06/16 S.Fujita [QC#10176,QC#11212,ADD] -->
            AND A.EZCANCELFLAG  = '0'
        ORDER BY
            A.PMT_TERM_CASH_DISC_SORT_NUM
    </statement>

    <statement id="getDfrdInvRulePullDownList" parameterClass="Map" resultClass="Map">
        SELECT
             A.DFRD_INV_RULE_CD
            <!-- START 2016/08/01 S.Fujita [QC#10148,MOD] -->
            ,A.DFRD_INV_RULE_NM
            <!-- END   2016/08/01 S.Fujita [QC#10148,MOD] -->
        FROM
            DFRD_INV_RULE  A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
            AND A.EZCANCELFLAG  = '0'
        ORDER BY
            A.DFRD_INV_RULE_SORT_NUM
    </statement>

    <statement id="getPkgUomPullDownList" parameterClass="Map" resultClass="Map">
<!-- START 2019/04/25 S.Takami [QC#50078,MOD] delete original SQL -->
        SELECT
            DECODE(PU2.PKG_UOM_CD, null, PU1.PKG_UOM_CD, PU2.PKG_UOM_CD) PKG_UOM_CD
            ,DECODE(PU2.PKG_UOM_DESC_TXT, null, PU1.PKG_UOM_DESC_TXT, PU2.PKG_UOM_DESC_TXT) PKG_UOM_DESC_TXT
            ,MSP.PRIM_PKG_UOM_FLG
        FROM
             MDSE_STORE_PKG MSP
            ,PKG_UOM PU1
            ,PKG_UOM PU2
        WHERE
            MSP.GLBL_CMPY_CD = #glblCmpyCd#
            AND MSP.MDSE_CD  = #mdseCd#
<!-- START 2019/05/16 S.Takami [QC#50374,ADD] -->
            <isNotNull property="baseOnly">
            AND MSP.BASE_PKG_UOM_CD IS NOT NULL
            </isNotNull>
<!-- END 2019/05/16 S.Takami [QC#50374,ADD] -->
            AND MSP.EZCANCELFLAG = '0'
            AND MSP.GLBL_CMPY_CD = PU1.GLBL_CMPY_CD
            AND MSP.PKG_UOM_CD = PU1.PKG_UOM_CD
            AND PU1.EZCANCELFLAG = '0'
            AND MSP.GLBL_CMPY_CD = PU2.GLBL_CMPY_CD(+)
            AND MSP.BASE_PKG_UOM_CD = PU2.PKG_UOM_CD(+)
            AND PU2.EZCANCELFLAG(+) = '0'
        ORDER BY
            PU1.PKG_UOM_SORT_NUM
<!-- END   2019/04/25 S.Takami [QC#50078,MOD] -->
    </statement>

    <statement id="getBolLineNumPullDownList" parameterClass="Map" resultClass="Map">
        SELECT
             A.INV_BOL_LINE_NUM
        FROM
            INV_BOL  A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
            AND A.INV_NUM       = #invNum#
            AND A.EZCANCELFLAG  = '0'
        ORDER BY
            A.INV_BOL_LINE_NUM
    </statement>

    <statement id="getDfrdAcctgRulePullDownList" parameterClass="Map" resultClass="Map">
        SELECT
             A.DFRD_ACCTG_RULE_CD
            <!-- START 2016/08/01 S.Fujita [QC#10148,MOD] -->
            ,A.DFRD_ACCTG_RULE_NM
            <!-- END   2016/08/01 S.Fujita [QC#10148,MOD] -->
        FROM
            DFRD_ACCTG_RULE  A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
            <!-- START 2016/05/24 S.Fujita [QC#8522,ADD] -->
            <isNotNull property="dfrdAcctgRuleCd">
            AND A.DFRD_ACCTG_RULE_CD    = #dfrdAcctgRuleCd#
            </isNotNull>
            <!-- END   2016/05/24 S.Fujita [QC#8522,ADD] -->
            AND A.EZCANCELFLAG  = '0'
        ORDER BY
            A.DFRD_ACCTG_RULE_SORT_NUM
    </statement>

    <statement id="getInvLineSplTpPullDownList" parameterClass="Map" resultClass="Map">
        SELECT
             A.INV_LINE_SPL_TP_CD
            <!-- START 2016/08/01 S.Fujita [QC#10148,MOD] -->
            ,A.INV_LINE_SPL_TP_NM
            <!-- END   2016/08/01 S.Fujita [QC#10148,MOD] -->
        FROM
            INV_LINE_SPL_TP  A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
            AND A.EZCANCELFLAG  = '0'
        ORDER BY
            A.INV_LINE_SPL_TP_SORT_NUM
    </statement>

    <statement id="getShpgSvcLvlPullDownList" parameterClass="Map" resultClass="Map">
        SELECT
             A.SHPG_SVC_LVL_CD
            ,A.SHPG_SVC_LVL_NM
        FROM
            SHPG_SVC_LVL  A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
            AND A.EZCANCELFLAG  = '0'
        ORDER BY
            A.SHPG_SVC_LVL_SORT_NUM
    </statement>

    <statement id="getDsPmtMethPullDownList" parameterClass="Map" resultClass="Map">
        SELECT
             A.DS_PMT_METH_CD
            <!-- START 2016/08/01 S.Fujita [QC#10148,MOD] -->
            ,A.DS_PMT_METH_NM
            <!-- END   2016/08/01 S.Fujita [QC#10148,MOD] -->
        FROM
            DS_PMT_METH  A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
            AND A.EZCANCELFLAG  = '0'
        ORDER BY
            A.DS_PMT_METH_SORT_NUM
    </statement>

    <statement id="getAjeInvAcctClsPullDownList" parameterClass="Map" resultClass="Map">
        SELECT
             A.AJE_INV_ACCT_CLS_CD
            <!-- START 2016/08/01 S.Fujita [QC#10148,MOD] -->
            ,A.AJE_INV_ACCT_CLS_NM
            <!-- END   2016/08/01 S.Fujita [QC#10148,MOD] -->
        FROM
            AJE_INV_ACCT_CLS  A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
            AND A.EZCANCELFLAG  = '0'
        ORDER BY
            A.AJE_INV_ACCT_CLS_SORT_NUM
    </statement>

    <statement id="getInvProcTpPullDownList" parameterClass="Map" resultClass="Map">
        SELECT
             A.INV_PROC_TP_CD
             <!-- START 2016/08/01 S.Fujita [QC#10148,MOD] -->
            ,A.INV_PROC_TP_NM
            <!-- END   2016/08/01 S.Fujita [QC#10148,MOD] -->
        FROM
            INV_PROC_TP  A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
            AND A.EZCANCELFLAG  = '0'
        ORDER BY
            A.INV_PROC_TP_SORT_NUM
    </statement>

    <statement id="getDsContrCatgPullDownList" parameterClass="Map" resultClass="Map">
        SELECT
             A.DS_CONTR_CATG_CD
            <!-- START 2016/08/01 S.Fujita [QC#10148,MOD] -->
<!-- START 2018/06/06 T.Ogura [QC#21159,MOD] -->
<!--        ,A.DS_CONTR_CATG_NM -->
            ,A.DS_CONTR_CATG_DESC_TXT
<!-- END   2018/06/06 T.Ogura [QC#21159,MOD] -->
            <!-- END   2016/08/01 S.Fujita [QC#10148,MOD] -->
        FROM
            DS_CONTR_CATG  A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
            AND A.EZCANCELFLAG  = '0'
        ORDER BY
            A.DS_CONTR_CATG_SORT_NUM
    </statement>

    <statement id="getDsOrdTpPullDownList" parameterClass="Map" resultClass="Map">
        SELECT
             A.DS_ORD_TP_CD
            ,A.DS_ORD_TP_DESC_TXT
        FROM
            DS_ORD_TP  A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
            AND A.EZCANCELFLAG  = '0'
            AND ROWNUM      &lt;= 99
        ORDER BY
            A.DS_ORD_TP_SORT_NUM
    </statement>

    <statement id="getArCashApplyStsPullDownList" parameterClass="Map" resultClass="Map">
        SELECT
             A.AR_CASH_APPLY_STS_CD
             <!-- START 2016/08/01 S.Fujita [QC#10148,MOD] -->
            ,A.AR_CASH_APPLY_STS_NM
            <!-- START 2016/08/01 S.Fujita [QC#10148,MOD] -->
        FROM
            AR_CASH_APPLY_STS  A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
            AND A.EZCANCELFLAG  = '0'
        ORDER BY
            A.AR_CASH_APPLY_STS_SORT_NUM
    </statement>

<!-- START 2019/05/27 S.Takami [QC#50533,DEL] -->
    <!-- statement id="getItemName" parameterClass="Map" resultClass="Map" -->
<!--         SELECT -->
<!--              A.MDSE_NM -->
<!--             ,A.THIS_MTH_TOT_STD_COST_AMT -->
<!--         FROM  -->
<!--             ALL_MDSE_V  A -->
<!--         WHERE -->
<!--                 A.GLBL_CMPY_CD  = #glblCmpyCd# -->
<!--             AND A.MDSE_CD       = #mdseCd# -->
<!--             AND A.EZCANCELFLAG  = '0' -->
    <!-- /statement -->
<!-- END 2019/05/27 S.Takami [QC#50533,DEL] -->

    <statement id="getItemInfo" parameterClass="Map" resultClass="Map">
        SELECT
              A.MDSE_NM
             ,A.TAX_EXEM_TP_CD
             ,A.SVC_ALLOC_TP_CD
             ,B.SVC_ALLOC_TRX_TP_NM
             ,A.THIS_MTH_TOT_STD_COST_AMT
             ,A.MDSE_TP_CD
            <!-- START 2019/05/27 S.Takami [QC#50533,ADD] -->
             ,A.ZEROTH_PROD_CTRL_CD
             ,A.ZEROTH_PROD_CTRL_NM
             ,A.FIRST_PROD_CTRL_CD
             ,A.FIRST_PROD_CTRL_NM
             ,A.SCD_PROD_CTRL_CD
             ,A.SCD_PROD_CTRL_NM
             ,A.THIRD_PROD_CTRL_CD
             ,A.THIRD_PROD_CTRL_NM
             ,A.FRTH_PROD_CTRL_CD
             ,A.FRTH_PROD_CTRL_NM
             ,A.FIFTH_PROD_CTRL_CD
             ,A.FIFTH_PROD_CTRL_NM
             ,A.SIXTH_PROD_CTRL_CD
             ,A.SIXTH_PROD_CTRL_NM
             ,A.SVNTH_PROD_CTRL_CD
             ,A.SVNTH_PROD_CTRL_NM
             ,A.COA_PROD_CD
             ,A.EXP_ITEM_FLG
             ,CP.COA_PROD_NM
            <!-- END 2019/05/27 S.Takami [QC#50533,ADD] -->
        FROM
            <!-- START 2019/05/27 S.Takami [QC#50533,MOD] -->
             <!-- ALL_MDSE_V     A -->
             MDSE           A
            <!-- END 2019/05/27 S.Takami [QC#50533,MOD] -->
            ,SVC_ALLOC_TP   B
            <!-- START 2019/05/27 S.Takami [QC#50533,ADD] -->
            ,COA_PROD       CP
            <!-- END 2019/05/27 S.Takami [QC#50533,ADD] -->
        WHERE
                A.GLBL_CMPY_CD      = #glblCmpyCd#
            AND A.MDSE_CD           = #mdseCd#
            AND A.GLBL_CMPY_CD      = B.GLBL_CMPY_CD(+)
            AND A.SVC_ALLOC_TP_CD   = B.SVC_ALLOC_TP_CD(+)
            AND A.EZCANCELFLAG      = '0'
            AND B.EZCANCELFLAG(+)   = '0'
            <!-- START 2019/05/27 S.Takami [QC#50533,ADD] -->
            AND A.GLBL_CMPY_CD      = CP.GLBL_CMPY_CD(+)
            AND A.COA_PROD_CD       = CP.COA_PROD_CD(+)
            AND CP.EZCANCELFLAG(+)  = '0'
            <!-- END 2019/05/27 S.Takami [QC#50533,ADD] -->
    </statement>

    <statement id="getBillToInfo" parameterClass="Map" resultClass="Map">
        SELECT
            BTC.DS_TAX_GRP_EXEM_CD
           ,NVL(DTGE.DS_TAX_GRP_EXEM_RESL_FLG, 'N') DS_TAX_GRP_EXEM_RESL_FLG
           ,STC.DS_TAX_GRP_EXEM_CD AS DS_TAX_GRP_EXEM_CD_2
        FROM
            BILL_TO_CUST BTC
           ,DS_TAX_GRP_EXEM DTGE
           ,SELL_TO_CUST    STC
        WHERE
            BTC.GLBL_CMPY_CD = #glblCmpyCd#
        AND BTC.EZCANCELFLAG = '0'
        AND BTC.BILL_TO_CUST_CD = #billToCustCd#
        AND BTC.EFF_FROM_DT &lt;= #procDt#
        AND (BTC.EFF_THRU_DT &gt;= #procDt# OR BTC.EFF_THRU_DT IS NULL )
        AND BTC.GLBL_CMPY_CD = DTGE.GLBL_CMPY_CD(+)
        AND BTC.EZCANCELFLAG = DTGE.EZCANCELFLAG(+)
        AND BTC.DS_TAX_GRP_EXEM_CD = DTGE.DS_TAX_GRP_EXEM_CD(+)
 
        AND BTC.GLBL_CMPY_CD = STC.GLBL_CMPY_CD
        AND BTC.SELL_TO_CUST_CD = STC.SELL_TO_CUST_CD
        AND STC.EZCANCELFLAG = '0'
    </statement>

    <statement id="searchBillTo" parameterClass="Map" resultClass="Map">
        SELECT
             B.BILL_TO_CUST_CD
            ,C.DS_ACCT_NM
        FROM
             BILL_TO_CUST       B
            ,SELL_TO_CUST       C
        WHERE
                B.GLBL_CMPY_CD      = #glblCmpyCd#
            AND B.SELL_TO_CUST_CD   = #billToCustAcctCd#
            AND B.LOC_NUM           = #locNum#
            AND B.GLBL_CMPY_CD      = C.GLBL_CMPY_CD
            AND B.SELL_TO_CUST_CD   = C.SELL_TO_CUST_CD
            AND B.RGTN_STS_CD       = #rgtnStsCd#
            AND C.RGTN_STS_CD       = #rgtnStsCd#
            AND B.EZCANCELFLAG      = '0'
            AND C.EZCANCELFLAG      = '0'
    </statement>

    <statement id="searchShipTo" parameterClass="Map" resultClass="Map">
        SELECT
             A.SHIP_TO_CUST_CD
            ,A.LOC_NM
            ,A.FIRST_REF_CMNT_TXT
            ,A.SCD_REF_CMNT_TXT
            ,B.DS_ACCT_NM
        FROM
             SHIP_TO_CUST       A
            ,SELL_TO_CUST       B
        WHERE
                A.GLBL_CMPY_CD      = #glblCmpyCd#
            AND A.SELL_TO_CUST_CD   = #shipToCustAcctCd#
            AND A.LOC_NUM           = #locNum#
            AND A.GLBL_CMPY_CD      = B.GLBL_CMPY_CD
            AND A.SELL_TO_CUST_CD   = B.SELL_TO_CUST_CD
            AND A.RGTN_STS_CD       = #rgtnStsCd#
            AND B.RGTN_STS_CD       = #rgtnStsCd#
            AND A.EZCANCELFLAG      = '0'
            AND B.EZCANCELFLAG      = '0'
    </statement>
    

    <statement id="calcNetDueDate" parameterClass="Map" resultClass="Map">
        SELECT
              TO_CHAR(TO_DATE(#invDt#,'yyyymmdd') + B.PMT_TERM_AOT,'yyyymmdd')      AS NET_DUE_DT
             ,A.PMT_TERM_CD                                                         AS PMT_TERM_CD
        FROM
             PMT_TERM_CASH_DISC   A
            ,PMT_TERM             B
        WHERE
                A.GLBL_CMPY_CD          = #glblCmpyCd#
            AND A.GLBL_CMPY_CD          = B.GLBL_CMPY_CD
            AND A.PMT_TERM_CASH_DISC_CD = #pmtTermCashDiscCd#
            AND A.PMT_TERM_CD           = B.PMT_TERM_CD
            AND A.EZCANCELFLAG          = '0'
            AND B.EZCANCELFLAG          = '0'
    </statement>

    <statement id="searchWarehouse" parameterClass="Map" resultClass="Map">
        SELECT
            A.INVTY_LOC_CD
           ,A.INVTY_LOC_NM
        FROM
            DS_INVTY_LOC_V  A
        WHERE
                A.GLBL_CMPY_CD      = #glblCmpyCd#
            AND A.RGTN_STS_CD       = #rgtnStsCd#
            AND A.INVTY_LOC_CD      = #whCd#
            AND A.EFF_FROM_DT    &lt;= #procDt#
            AND NVL(A.EFF_THRU_DT, '99991231') &gt;= #procDt#
            AND A.EZCANCELFLAG      = '0'
        GROUP BY
            A.INVTY_LOC_CD
           ,A.INVTY_LOC_NM
    </statement>

    <statement id="searchSalesRep" parameterClass="Map" resultClass="Map">
        SELECT
            T.TOC_CD
           ,T.TOC_NM
           ,CB.COA_BR_NM
        FROM
            TOC T
           ,ORG_FUNC_ROLE_TP OFRT
           ,BIZ_AREA_ORG BA
           <!-- START 2016/07/14 S.Fujita [QC#11157,ADD] -->
           ,ORG_FUNC_ASG     OFA
           ,S21_PSN          SP
           ,S21_ORG          SO
           ,COA_BR           CB
           <!-- END   2016/07/14 S.Fujita [QC#11157,ADD] -->
        WHERE
                T.GLBL_CMPY_CD          = 'ADB'
            <!-- START 2016/07/14 S.Fujita [QC#11157,DEL] -->
            <!--
            AND T.TOC_CD                = #tocCd#
            -->
            <!-- END   2016/07/14 S.Fujita [QC#11157,DEL] -->
            AND T.GLBL_CMPY_CD          = OFRT.GLBL_CMPY_CD
            AND T.ORG_FUNC_ROLE_TP_CD   = OFRT.ORG_FUNC_ROLE_TP_CD
            <!-- START 2018/09/14 S.Ohki [QC#28089,MOD] -->
            <!-- AND OFRT.SLS_REP_FLG        = #slsRepFlg# -->
            AND (OFRT.SLS_REP_FLG       = #slsRepFlg#
            OR   OFRT.TECH_MSTR_REQ_FLG = #techFlg#)
            <!-- END 2018/09/14 S.Ohki [QC#28089,MOD] -->
            AND OFRT.GLBL_CMPY_CD       = BA.GLBL_CMPY_CD
            AND OFRT.FIRST_ORG_CD       = BA.BIZ_AREA_ORG_CD
            <!-- START 2018/09/14 S.Ohki [QC#28089,MOD] -->
            <!-- AND BA.SLS_FLG              = #slsRepFlg# -->
            AND (BA.SLS_FLG             = #slsRepFlg#
            OR   BA.SVC_FLG             = #techFlg#)
            <!-- END 2018/09/14 S.Ohki [QC#28089,MOD] -->
            AND BA.ORG_STRU_TP_CD       = #orgStruTpCd#
            <!-- START 2016/07/14 S.Fujita [QC#11157,ADD] -->
            AND T.GLBL_CMPY_CD          = OFA.GLBL_CMPY_CD
            AND T.TOC_CD                = OFA.TOC_CD
            AND OFA.EZCANCELFLAG        = '0'

            AND T.GLBL_CMPY_CD          = SO.GLBL_CMPY_CD
            AND T.TOC_CD                = SO.TOC_CD
            AND SO.RGTN_STS_CD          = #rgtnStsCd#
            AND SO.EZCANCELFLAG         = '0'

            AND OFA.GLBL_CMPY_CD        = SP.GLBL_CMPY_CD
            AND OFA.PSN_CD              = SP.PSN_CD
            AND SP.PSN_NUM              = #psnNum#
            AND SP.EFF_FROM_DT      &lt;= #slsDt#
            AND (SP.EFF_THRU_DT     &gt;= #slsDt# OR SP.EFF_THRU_DT IS NULL)
            AND SP.EZCANCELFLAG         = '0'

            AND T.GLBL_CMPY_CD          = CB.GLBL_CMPY_CD (+)
            AND T.COA_BR_CD             = CB.COA_BR_CD (+)
            AND CB.EZCANCELFLAG (+)     = '0'
            <!-- END   2016/07/14 S.Fujita [QC#11157,ADD] -->
            AND T.EZCANCELFLAG          = '0'
            AND OFRT.EZCANCELFLAG       = '0'
            AND BA.EZCANCELFLAG         = '0'
    </statement>

    <statement id="searchShipToAddr" parameterClass="Map" resultMap="result.searchShipToAddr">
        SELECT
             B.ADDL_LOC_NM          AS SHIP_TO_ADDL_LOC_NM_H2
            ,B.FIRST_LINE_ADDR      AS SHIP_TO_FIRST_LINE_ADDR_H2
            ,B.SCD_LINE_ADDR        AS SHIP_TO_SCD_LINE_ADDR_H2
            ,B.THIRD_LINE_ADDR      AS SHIP_TO_THIRD_LINE_ADDR_H2
            ,B.FRTH_LINE_ADDR       AS SHIP_TO_FRTH_LINE_ADDR_H2
            ,B.ST_CD                AS SHIP_TO_ST_CD_H2
            ,B.PROV_NM              AS SHIP_TO_PROV_NM_H2
            ,C.CNTY_NM              AS SHIP_TO_CNTY_NM_H2
            ,B.POST_CD              AS SHIP_TO_POST_CD_H2
            ,B.CTY_ADDR             AS SHIP_TO_CTY_ADDR_H2
            ,B.CTRY_CD              AS SHIP_TO_CTRY_CD_H2
            ,B.LINE_BIZ_TP_CD       AS LINE_BIZ_TP_CD_H2
            ,A.DS_ACCT_NUM          AS SHIP_TO_CUST_ACCT_CD_H2
            ,E.DS_ACCT_NM           AS SHIP_TO_CUST_ACCT_NM_H2
        FROM
             ACCT_LOC       A
            ,PTY_LOC_WRK    B
            ,CNTY           C
            ,SELL_TO_CUST   E
        WHERE
                A.GLBL_CMPY_CD      = #glblCmpyCd#
            <isNotNull property="dsAcctNum">
            AND A.DS_ACCT_NUM       = #dsAcctNum#
            </isNotNull>
            <isNotNull property="locNum">
            AND A.LOC_NUM           = #locNum#
            </isNotNull>
            AND A.GLBL_CMPY_CD      = B.GLBL_CMPY_CD
            AND A.PTY_LOC_PK        = B.PTY_LOC_PK
            AND B.GLBL_CMPY_CD      = C.GLBL_CMPY_CD (+)
            AND B.CNTY_PK           = C.CNTY_PK (+)
            AND A.GLBL_CMPY_CD      = E.GLBL_CMPY_CD (+)
            AND A.DS_ACCT_NUM       = E.SELL_TO_CUST_CD (+)
            AND E.RGTN_STS_CD (+)   = #rgtnStsCd#
            AND A.EZCANCELFLAG      = '0'
            AND B.EZCANCELFLAG      = '0'
            AND C.EZCANCELFLAG (+)  = '0'
            AND E.EZCANCELFLAG (+)  = '0'
    </statement>
    <resultMap id="result.searchShipToAddr" class="NFCL3000CMsg">
        <result property="shipToAddlLocNm_H2"               column="SHIP_TO_ADDL_LOC_NM_H2"         javaType="EZDCStringItem" />
        <result property="shipToFirstLineAddr_H2"           column="SHIP_TO_FIRST_LINE_ADDR_H2"     javaType="EZDCStringItem" />
        <result property="shipToScdLineAddr_H2"             column="SHIP_TO_SCD_LINE_ADDR_H2"       javaType="EZDCStringItem" />
        <result property="shipToThirdLineAddr_H2"           column="SHIP_TO_THIRD_LINE_ADDR_H2"     javaType="EZDCStringItem" />
        <result property="shipToFrthLineAddr_H2"            column="SHIP_TO_FRTH_LINE_ADDR_H2"      javaType="EZDCStringItem" />
        <result property="shipToStCd_H2"                    column="SHIP_TO_ST_CD_H2"               javaType="EZDCStringItem" />
        <result property="shipToProvNm_H2"                  column="SHIP_TO_PROV_NM_H2"             javaType="EZDCStringItem" />
        <result property="shipToCntyNm_H2"                  column="SHIP_TO_CNTY_NM_H2"             javaType="EZDCStringItem" />
        <result property="shipToPostCd_H2"                  column="SHIP_TO_POST_CD_H2"             javaType="EZDCStringItem" />
        <result property="shipToCtyAddr_H2"                 column="SHIP_TO_CTY_ADDR_H2"            javaType="EZDCStringItem" />
        <result property="shipToCtryCd_H2"                  column="SHIP_TO_CTRY_CD_H2"             javaType="EZDCStringItem" />
        <result property="lineBizTpCd_H2"                   column="LINE_BIZ_TP_CD_H2"              javaType="EZDCStringItem" />
        <result property="shipToCustAcctCd_H2"              column="SHIP_TO_CUST_ACCT_CD_H2"        javaType="EZDCStringItem" />
        <result property="shipToCustAcctNm_H2"              column="SHIP_TO_CUST_ACCT_NM_H2"        javaType="EZDCStringItem" />
    </resultMap>

    <statement id="searchBillToAddr" parameterClass="Map" resultMap="result.searchBillToAddr">
        SELECT
             B.ADDL_LOC_NM          AS RCPNT_ADDL_LOC_NM_H3
            ,B.FIRST_LINE_ADDR      AS RCPNT_FIRST_LINE_ADDR_H3
            ,B.SCD_LINE_ADDR        AS RCPNT_SCD_LINE_ADDR_H3
            ,B.THIRD_LINE_ADDR      AS RCPNT_THIRD_LINE_ADDR_H3
            ,B.FRTH_LINE_ADDR       AS RCPNT_FRTH_LINE_ADDR_H3
            ,B.ST_CD                AS RCPNT_ST_CD_H3
            ,B.PROV_NM              AS RCPNT_PROV_NM_H3
            ,C.CNTY_NM              AS RCPNT_CNTY_NM_H3
            ,B.POST_CD              AS RCPNT_POST_CD_H3
            ,B.CTY_ADDR             AS RCPNT_CTY_ADDR_H3
            ,B.CTRY_CD              AS RCPNT_CTRY_CD_H3
            ,B.LINE_BIZ_TP_CD       AS LINE_BIZ_TP_CD_H3
            ,A.DS_ACCT_NUM          AS BILL_TO_CUST_ACCT_CD_H3
            ,E.DS_ACCT_NM           AS BILL_TO_CUST_ACCT_NM_H3
        FROM
             ACCT_LOC       A
            ,PTY_LOC_WRK    B
            ,CNTY           C
            ,SELL_TO_CUST   E
        WHERE
                A.GLBL_CMPY_CD      = #glblCmpyCd#
            <isNotNull property="dsAcctNum">
            AND A.DS_ACCT_NUM       = #dsAcctNum#
            </isNotNull>
            <isNotNull property="locNum">
            AND A.LOC_NUM           = #locNum#
            </isNotNull>
            AND A.GLBL_CMPY_CD      = B.GLBL_CMPY_CD
            AND A.PTY_LOC_PK        = B.PTY_LOC_PK
            AND B.GLBL_CMPY_CD      = C.GLBL_CMPY_CD (+)
            AND B.CNTY_PK           = C.CNTY_PK (+)
            AND A.GLBL_CMPY_CD      = E.GLBL_CMPY_CD (+)
            AND A.DS_ACCT_NUM       = E.SELL_TO_CUST_CD (+)
            AND E.RGTN_STS_CD (+)   = #rgtnStsCd#
            AND A.EZCANCELFLAG      = '0'
            AND B.EZCANCELFLAG      = '0'
            AND C.EZCANCELFLAG (+)  = '0'
            AND E.EZCANCELFLAG (+)  = '0'
    </statement>
    <resultMap id="result.searchBillToAddr" class="NFCL3000CMsg">
        <result property="rcpntAddlLocNm_H3"                column="RCPNT_ADDL_LOC_NM_H3"           javaType="EZDCStringItem" />
        <result property="rcpntFirstLineAddr_H3"            column="RCPNT_FIRST_LINE_ADDR_H3"       javaType="EZDCStringItem" />
        <result property="rcpntScdLineAddr_H3"              column="RCPNT_SCD_LINE_ADDR_H3"         javaType="EZDCStringItem" />
        <result property="rcpntThirdLineAddr_H3"            column="RCPNT_THIRD_LINE_ADDR_H3"       javaType="EZDCStringItem" />
        <result property="rcpntFrthLineAddr_H3"             column="RCPNT_FRTH_LINE_ADDR_H3"        javaType="EZDCStringItem" />
        <result property="rcpntStCd_H3"                     column="RCPNT_ST_CD_H3"                 javaType="EZDCStringItem" />
        <result property="rcpntProvNm_H3"                   searchShipToAddrcolumn="RCPNT_PROV_NM_H3"               javaType="EZDCStringItem" />
        <result property="rcpntCntyNm_H3"                   column="RCPNT_CNTY_NM_H3"               javaType="EZDCStringItem" />
        <result property="rcpntPostCd_H3"                   column="RCPNT_POST_CD_H3"               javaType="EZDCStringItem" />
        <result property="rcpntCtyAddr_H3"                  column="RCPNT_CTY_ADDR_H3"              javaType="EZDCStringItem" />
        <result property="rcpntCtryCd_H3"                   column="RCPNT_CTRY_CD_H3"               javaType="EZDCStringItem" />
        <result property="lineBizTpCd_H3"                   column="LINE_BIZ_TP_CD_H3"              javaType="EZDCStringItem" />
        <result property="billToCustAcctCd_H3"              column="BILL_TO_CUST_ACCT_CD_H3"        javaType="EZDCStringItem" />
        <result property="billToCustAcctNm_H3"              column="BILL_TO_CUST_ACCT_NM_H3"        javaType="EZDCStringItem" />
    </resultMap>

    <statement id="searchShipToAddr_D" parameterClass="Map" resultMap="result.searchShipToAddr_D">
        SELECT
             B.ADDL_LOC_NM          AS SHIP_TO_ADDL_LOC_NM_D1
            ,B.FIRST_LINE_ADDR      AS SHIP_TO_FIRST_LINE_ADDR_D1
            ,B.SCD_LINE_ADDR        AS SHIP_TO_SCD_LINE_ADDR_D1
            ,B.THIRD_LINE_ADDR      AS SHIP_TO_THIRD_LINE_ADDR_D1
            ,B.FRTH_LINE_ADDR       AS SHIP_TO_FRTH_LINE_ADDR_D1
            ,B.ST_CD                AS SHIP_TO_ST_CD_D1
            ,B.PROV_NM              AS SHIP_TO_PROV_NM_D1
            ,C.CNTY_NM              AS SHIP_TO_CNTY_NM_D1
            ,B.POST_CD              AS SHIP_TO_POST_CD_D1
            ,B.CTY_ADDR             AS SHIP_TO_CTY_ADDR_D1
            ,B.CTRY_CD              AS SHIP_TO_CTRY_CD_D1
            ,B.LINE_BIZ_TP_CD       AS LINE_BIZ_TP_CD_D1
            ,A.DS_ACCT_NUM          AS SHIP_TO_CUST_ACCT_CD_D1
            ,E.DS_ACCT_NM           AS SHIP_TO_CUST_ACCT_NM_D1
        FROM
             ACCT_LOC       A
            ,PTY_LOC_WRK    B
            ,CNTY           C
            ,SELL_TO_CUST   E
        WHERE
                A.GLBL_CMPY_CD      = #glblCmpyCd#
            <isNotNull property="dsAcctNum">
            AND A.DS_ACCT_NUM       = #dsAcctNum#
            </isNotNull>
            <isNotNull property="locNum">
            AND A.LOC_NUM           = #locNum#
            </isNotNull>
            AND A.GLBL_CMPY_CD      = B.GLBL_CMPY_CD
            AND A.PTY_LOC_PK        = B.PTY_LOC_PK
            AND B.GLBL_CMPY_CD      = C.GLBL_CMPY_CD (+)
            AND B.CNTY_PK           = C.CNTY_PK (+)
            AND A.GLBL_CMPY_CD      = E.GLBL_CMPY_CD (+)
            AND A.DS_ACCT_NUM       = E.SELL_TO_CUST_CD (+)
            AND E.RGTN_STS_CD (+)   = #rgtnStsCd#
            AND A.EZCANCELFLAG      = '0'
            AND B.EZCANCELFLAG      = '0'
            AND C.EZCANCELFLAG (+)  = '0'
            AND E.EZCANCELFLAG (+)  = '0'
    </statement>
    <resultMap id="result.searchShipToAddr_D" class="NFCL3000_DCMsg">
        <result property="shipToAddlLocNm_D1"               column="SHIP_TO_ADDL_LOC_NM_D1"         javaType="EZDCStringItem" />
        <result property="shipToFirstLineAddr_D1"           column="SHIP_TO_FIRST_LINE_ADDR_D1"     javaType="EZDCStringItem" />
        <result property="shipToScdLineAddr_D1"             column="SHIP_TO_SCD_LINE_ADDR_D1"       javaType="EZDCStringItem" />
        <result property="shipToThirdLineAddr_D1"           column="SHIP_TO_THIRD_LINE_ADDR_D1"     javaType="EZDCStringItem" />
        <result property="shipToFrthLineAddr_D1"            column="SHIP_TO_FRTH_LINE_ADDR_D1"      javaType="EZDCStringItem" />
        <result property="shipToStCd_D1"                    column="SHIP_TO_ST_CD_D1"               javaType="EZDCStringItem" />
        <result property="shipToProvNm_D1"                  column="SHIP_TO_PROV_NM_D1"             javaType="EZDCStringItem" />
        <result property="shipToCntyNm_D1"                  column="SHIP_TO_CNTY_NM_D1"             javaType="EZDCStringItem" />
        <result property="shipToPostCd_D1"                  column="SHIP_TO_POST_CD_D1"             javaType="EZDCStringItem" />
        <result property="shipToCtyAddr_D1"                 column="SHIP_TO_CTY_ADDR_D1"            javaType="EZDCStringItem" />
        <result property="shipToCtryCd_D1"                  column="SHIP_TO_CTRY_CD_D1"             javaType="EZDCStringItem" />
        <result property="lineBizTpCd_D1"                   column="LINE_BIZ_TP_CD_D1"              javaType="EZDCStringItem" />
        <result property="shipToCustAcctCd_D1"              column="SHIP_TO_CUST_ACCT_CD_D1"        javaType="EZDCStringItem" />
        <result property="shipToCustAcctNm_D1"              column="SHIP_TO_CUST_ACCT_NM_D1"        javaType="EZDCStringItem" />
    </resultMap>

    <statement id="searchInv" parameterClass="Map" resultMap="result.searchInv">
        SELECT
             A.INV_NUM                                          AS INV_NUM_H1
             <!-- START 2016/07/05 S.Fujita [QC#9992,ADD] -->
            ,A.GRP_INV_NUM                                      AS GRP_INV_NUM_H1
            <!-- END   2016/07/05 S.Fujita [QC#9992,ADD] -->
            ,A.INV_TP_CD                                        AS INV_TP_CD_H1
            ,A.DS_INV_TP_CD                                     AS DS_INV_TP_CD_H1
            ,A.PMT_TERM_CASH_DISC_CD                            AS PMT_TERM_CASH_DISC_CD_H1
            ,A.INV_DT                                           AS INV_DT_H1
            <!-- START 2016/05/18 S.Fujita [QC#7780,ADD] -->
            ,A.ACCT_DT                                          AS ACCT_DT_H1
            <!-- END 2016/05/18 S.Fujita [QC#7780,ADD] -->
            ,A.NET_DUE_DT                                       AS NET_DUE_DT_H1
            ,A.SRC_SYS_DOC_NUM                                  AS SRC_SYS_DOC_NUM_H1
            ,A.CUST_ISS_PO_NUM                                  AS CUST_ISS_PO_NUM_H1
            ,A.SLS_REP_TOC_CD                                   AS SLS_REP_TOC_CD_H1
            ,A.SLS_REP_TOC_NM                                   AS SLS_REP_TOC_NM_H1
            ,A.CUST_CARE_TKT_NUM                                AS CUST_CARE_TKT_NUM_H1
            ,A.BILL_TO_CUST_ACCT_CD                             AS BILL_TO_CUST_ACCT_CD_H3
            ,A.BILL_TO_CUST_ACCT_NM                             AS BILL_TO_CUST_ACCT_NM_H3
            ,A.BILL_TO_CUST_CD                                  AS BILL_TO_CUST_CD_H3
            ,D.LOC_NUM                                          AS LOC_NUM_H3
            ,A.CTAC_PSN_PK                                      AS CTAC_PSN_PK_H3
            ,A.BILL_TO_CTAC_PSN_FIRST_NM                        AS BILL_TO_CTAC_PSN_FIRST_NM_H3
            ,A.BILL_TO_CTAC_PSN_LAST_NM                         AS BILL_TO_CTAC_PSN_LAST_NM_H3

            <!-- start 2016/05/04 QC#7862 avoid showing comma only-->
            ,DECODE(A.BILL_TO_CTAC_PSN_FIRST_NM, NULL, '', A.BILL_TO_CTAC_PSN_FIRST_NM||',') || A.BILL_TO_CTAC_PSN_LAST_NM   AS XX_PSN_NM_H3
            <!-- end 2016/05/04 -->
            ,E.INV_ERR_MSG_TXT                                  AS INV_ERR_MSG_TXT_H4
            ,E.INVLD_VAL_TXT                                    AS INVLD_VAL_TXT_H4

            <!-- start 2016/05/04 QC#7864 -->
            ,(CASE WHEN A.INV_TP_CD = #cm# THEN (NVL(A.INV_TOT_DEAL_SLS_AMT, 0) + NVL(A.INV_TOT_DEAL_DISC_AMT, 0)) * -1
                   ELSE NVL(A.INV_TOT_DEAL_SLS_AMT, 0) + NVL(A.INV_TOT_DEAL_DISC_AMT, 0) END)   AS XX_TOT_AMT_T1
            ,(CASE WHEN A.INV_TP_CD = #cm# THEN NVL(A.INV_TOT_DEAL_FRT_AMT, 0) * -1
                   ELSE NVL(A.INV_TOT_DEAL_FRT_AMT, 0) END)     AS XX_TOT_AMT_T2
            ,(CASE WHEN A.INV_TP_CD = #cm# THEN NVL(A.INV_TOT_DEAL_TAX_AMT, 0) * -1
                   ELSE NVL(A.INV_TOT_DEAL_TAX_AMT, 0) END)     AS XX_TOT_AMT_T3
            ,(CASE WHEN A.INV_TP_CD = #cm# THEN NVL(A.INV_TOT_DEAL_NET_AMT, 0) * -1
                   ELSE NVL(A.INV_TOT_DEAL_NET_AMT, 0) END)     AS XX_TOT_AMT_T4
            <!-- START 2016/05/19 S.Fujita [QC#8366,MOD] -->
            <!-- ,(CASE WHEN A.INV_TP_CD = #cm# THEN NVL(F.DEAL_RMNG_BAL_GRS_AMT, 0) * -1
                   ELSE NVL(F.DEAL_RMNG_BAL_GRS_AMT, 0) END)    AS XX_TOT_AMT_T5
            -->
            <!-- START 2016/10/04 S.Fujita [QC#11229,MOD] -->
            <!-- 
            ,NVL(Q.DEAL_RMNG_BAL_GRS_AMT, 0)                    AS XX_TOT_AMT_T5
            -->
            ,CASE WHEN A.FNLZ_INV_FLG = 'Y' THEN 
                       CASE WHEN A.INV_TP_CD = #cm# THEN NVL(NVL(Q.DEAL_RMNG_BAL_GRS_AMT, NVL(A.INV_TOT_DEAL_NET_AMT, 0) * -1), 0)
                       ELSE NVL(NVL(Q.DEAL_RMNG_BAL_GRS_AMT, A.INV_TOT_DEAL_NET_AMT), 0)
                       END
                  ELSE 0 END                                  AS XX_TOT_AMT_T5
            
            <!-- END   2016/10/04 S.Fujita [QC#11229,MOD] -->
            <!-- END 2016/05/19 S.Fujita [QC#8366,MOD] -->
            <!-- end 2016/05/04 -->


            ,H.SHIP_TO_ADDL_LOC_NM                              AS SHIP_TO_ADDL_LOC_NM_H2
            ,H.SHIP_TO_FIRST_LINE_ADDR                          AS SHIP_TO_FIRST_LINE_ADDR_H2
            ,H.SHIP_TO_SCD_LINE_ADDR                            AS SHIP_TO_SCD_LINE_ADDR_H2
            ,H.SHIP_TO_THIRD_LINE_ADDR                          AS SHIP_TO_THIRD_LINE_ADDR_H2
            ,H.SHIP_TO_FRTH_LINE_ADDR                           AS SHIP_TO_FRTH_LINE_ADDR_H2
            ,H.SHIP_TO_ST_CD                                    AS SHIP_TO_ST_CD_H2
            ,H.SHIP_TO_PROV_NM                                  AS SHIP_TO_PROV_NM_H2
            ,H.SHIP_TO_CNTY_NM                                  AS SHIP_TO_CNTY_NM_H2
            ,H.SHIP_TO_POST_CD                                  AS SHIP_TO_POST_CD_H2
            ,H.SHIP_TO_CTY_ADDR                                 AS SHIP_TO_CTY_ADDR_H2
            ,H.SHIP_TO_CTRY_CD                                  AS SHIP_TO_CTRY_CD_H2

            ,A.RCPNT_FIRST_LINE_ADDR                            AS RCPNT_FIRST_LINE_ADDR_H3
            ,A.RCPNT_SCD_LINE_ADDR                              AS RCPNT_SCD_LINE_ADDR_H3
            ,A.RCPNT_THIRD_LINE_ADDR                            AS RCPNT_THIRD_LINE_ADDR_H3
            ,A.RCPNT_FRTH_LINE_ADDR                             AS RCPNT_FRTH_LINE_ADDR_H3
            ,A.RCPNT_CTY_ADDR                                   AS RCPNT_CTY_ADDR_H3
            ,A.RCPNT_ST_CD                                      AS RCPNT_ST_CD_H3
            ,A.RCPNT_PROV_NM                                    AS RCPNT_PROV_NM_H3
            ,A.RCPNT_CNTY_NM                                    AS RCPNT_CNTY_NM_H3
            ,A.RCPNT_POST_CD                                    AS RCPNT_POST_CD_H3
            ,A.RCPNT_ADDL_LOC_NM                                AS RCPNT_ADDL_LOC_NM_H3
            ,A.RCPNT_CTRY_CD                                    AS RCPNT_CTRY_CD_H3


            ,H.SHIP_TO_CUST_ACCT_CD                             AS SHIP_TO_CUST_ACCT_CD_H2
            ,H.SHIP_TO_CUST_ACCT_NM                             AS SHIP_TO_CUST_ACCT_NM_H2
            ,H.SHIP_TO_CUST_CD                                  AS SHIP_TO_CUST_CD_H2
            ,J.LOC_NUM                                          AS LOC_NUM_H2

            ,H.CTAC_PSN_PK                                      AS CTAC_PSN_PK_H2
            ,H.SHIP_TO_CTAC_PSN_FIRST_NM                        AS SHIP_TO_CTAC_PSN_FIRST_NM_H2
            ,H.SHIP_TO_CTAC_PSN_LAST_NM                         AS SHIP_TO_CTAC_PSN_LAST_NM_H2

            <!-- start 2016/05/04 QC#7862 avoid showing comma only-->
            ,DECODE(H.SHIP_TO_CTAC_PSN_FIRST_NM, NULL, '', H.SHIP_TO_CTAC_PSN_FIRST_NM|| ',') || H.SHIP_TO_CTAC_PSN_LAST_NM   AS XX_PSN_NM_H2
            <!-- end 2016/05/04-->

            <!-- START 2016/10/28 T.Murai [QC#15495,DEL] -->
            <!--
            ,H.SHIP_FROM_INVTY_LOC_CD                           AS SHIP_FROM_INVTY_LOC_CD_H4
            ,H.SHIP_DT                                          AS SHIP_DT_H4
            -->
            <!-- END   2016/10/28 T.Murai [QC#15495,DEL] -->

            ,A.FNLZ_INV_FLG                                     AS FNLZ_INV_FLG_H4
            <!-- START 2016/05/19 S.Fujita [QC#8478,MOD] -->
            <!-- 
            ,NVL(F.DEAL_APPLY_CR_AMT, 0)                        AS DEAL_APPLY_CR_AMT_H4
            ,NVL(F.DEAL_APPLY_ADJ_AMT, 0)                       AS DEAL_APPLY_ADJ_AMT_H4
            ,NVL(F.DEAL_APPLY_GRS_AMT, 0)                       AS DEAL_APPLY_GRS_AMT_H4
            -->
            ,NVL(Q.DEAL_APPLY_CR_AMT, 0)                        AS DEAL_APPLY_CR_AMT_H4
            ,NVL(Q.DEAL_APPLY_ADJ_AMT, 0)                       AS DEAL_APPLY_ADJ_AMT_H4
            ,NVL(Q.DEAL_APPLY_GRS_AMT, 0)                       AS DEAL_APPLY_GRS_AMT_H4
            <!-- END 2016/05/19 S.Fujita [QC#8478,MOD] -->

            ,A.INV_PRINT_STS_CD                                 AS INV_PRINT_STS_CD_E1
            ,O.INV_PRINT_PROC_DT                                AS INV_PRINT_PROC_DT_E1
<!-- 2019/05/10 QC#50148 Mod Start -->
<!--             ,A.INV_FIRST_CMNT_TXT                               AS INV_FIRST_CMNT_TXT_E1 -->
            ,A.INV_FIRST_CMNT_TXT||A.INV_SCD_CMNT_TXT||A.INV_THIRD_CMNT_TXT||A.INV_FRTH_CMNT_TXT AS XX_INV_MEMO_TXT_E1
<!-- 2019/05/10 QC#50148 Mod End -->
            ,O.INV_PROC_TP_CD                                   AS INV_PROC_TP_CD_E1
            <!-- START 2017/12/25 E.Kameishi [QC#20312,ADD] -->
            ,NVL(A.INV_PRINT_CRAT_STS_CD,'0')                   AS INV_PRINT_CRAT_STS_CD_E1
            <!-- END   2017/12/25 E.Kameishi [QC#20312,ADD] -->
            <!-- START 2016/05/19 S.Fujita [QC#8478,MOD] -->
            <!--
            ,K.AR_CASH_APPLY_STS_CD                             AS AR_CASH_APPLY_STS_CD_E1
            ,L.DEAL_CLT_DSPT_AMT                                AS DEAL_CLT_DSPT_AMT_F1
            ,H.CLT_DSPT_DT                                      AS CLT_DSPT_DT_E1
            -->
            <!-- START 2016/10/04 S.Fujita [QC#11229,MOD] -->
            <!-- 
            ,Q.AR_CASH_APPLY_STS_CD                             AS AR_CASH_APPLY_STS_CD_E1
            -->
            ,CASE WHEN A.FNLZ_INV_FLG = 'Y' THEN NVL(Q.AR_CASH_APPLY_STS_CD, #Unpplied#)
                  ELSE '' END                                   AS AR_CASH_APPLY_STS_CD_E1
            <!-- END   2016/10/04 S.Fujita [QC#11229,MOD] -->
            ,Q.DEAL_CLT_DSPT_AMT                                AS DEAL_CLT_DSPT_AMT_F1
            ,Q.CLT_DSPT_DT                                      AS CLT_DSPT_DT_E1
            <!-- END 2016/05/19 S.Fujita [QC#8478,MOD] -->
            ,A.CONTR_RNW_TOT_CNT                                AS CONTR_RNW_TOT_CNT_E1
            ,A.DS_CONTR_CATG_CD                                 AS DS_CONTR_CATG_CD_E1
            <!-- START 2016/08/01 S.Fujita [QC#10148,MOD] -->
            <!--
            ,A.DS_ORD_TP_CD                                     AS DS_ORD_TP_CD_E1
            -->
            ,A.DS_ORD_CATG_CD                                   AS DS_ORD_CATG_CD_E1
            <!-- END   2016/08/01 S.Fujita [QC#10148,MOD] -->
            ,A.ORIG_INV_NUM                                     AS ORIG_INV_NUM_E1
            ,A.PRE_PMT_AMT                                      AS PRE_PMT_AMT_E1

            ,A.DS_PMT_METH_CD                                   AS DS_PMT_METH_CD_E1
            ,A.CR_CARD_TRX_PK                                   AS CR_CARD_TRX_PK_E1

            <!-- START 2016/09/15 S.Yoshida [QC#13956,MOD] -->
            <!--
            ,N.CR_CARD_TP_CD                                    AS CR_CARD_TP_CD_E1
            ,N.CR_CARD_HLD_NM                                   AS CR_CARD_HLD_NM_E1
            ,N.CR_CARD_LAST_DIGIT_NUM                           AS CR_CARD_LAST_DIGIT_NUM_E1
            ,N.CR_CARD_EXPR_YR_MTH                              AS CR_CARD_EXPR_YR_MTH_E1
            -->
            ,DCC.CR_CARD_TP_CD                                     AS CR_CARD_TP_CD_E1
            ,DCC.CR_CARD_HLD_NM                                    AS CR_CARD_HLD_NM_E1
            ,DCC.CR_CARD_LAST_DIGIT_NUM                            AS CR_CARD_LAST_DIGIT_NUM_E1
            ,NVL2(DCC.CR_CARD_LAST_DIGIT_NUM
                 ,#CCScrnTxt# || DCC.CR_CARD_LAST_DIGIT_NUM, NULL) AS CR_CARD_NUM_SCRN_TXT
            ,DCC.CR_CARD_EXPR_YR_MTH                               AS CR_CARD_EXPR_YR_MTH_E1
            <!-- END   2016/09/15 S.Yoshida [QC#13956,MOD] -->
            ,A.SYS_SRC_CD                                       AS SYS_SRC_CD_H1
            <!-- START 2018/11/02 S.Ohki [QC#29059,ADD] -->
            ,NVL(OR_INV.SYS_SRC_CD, A.SYS_SRC_CD)               AS SYS_SRC_CD_OR
            <!-- END 2018/11/02 S.Ohki [QC#29059,ADD] -->
            ,R.SYS_SRC_NM                                       AS SYS_SRC_NM_H1
            ,R.SYS_SRC_DESC_TXT                                 AS SYS_SRC_DESC_TXT_H1
            ,P.RTL_WH_NM                                        AS RTL_WH_NM_H4
            <!-- START 2016/05/19 S.Fujita [QC#9454,ADD] -->
            ,A.PMT_TERM_CD                                      AS PMT_TERM_CD_H1
            ,A.SELL_TO_CUST_CD                                  AS SELL_TO_CUST_CD_H3
            <!-- END   2016/05/19 S.Fujita [QC#9454,ADD] -->
            <!-- START 2016/07/04 S.Fujita [QC#11165,ADD] -->
            ,S.ISTL_PMT_TERM_FLG                                AS ISTL_PMT_TERM_FLG_H1
            <!-- END   2016/07/04 S.Fujita [QC#11165,ADD] -->
            <!-- START 2016/07/14 S.Fujita [QC#11157,ADD] -->
            ,SP.PSN_NUM                                         AS PSN_NUM_H1
            <!-- END   2016/07/14 S.Fujita [QC#11157,ADD] -->
            <!-- START 2016/08/01 S.Fujita [QC#10148,ADD] -->
            ,A.EZINTIME                                         AS EZINTIME_H1
            ,A.EZINUSERID                                       AS EZINUSERID_H1
            ,A.EZUPTIME                                         AS EZUPTIME_H1
            ,A.EZUPUSERID                                       AS EZUPUSERID_H1
            <!-- END   2016/08/01 S.Fujita [QC#10148,ADD] -->
            <!-- START 2017/03/17 T.Murai [QC#14205,ADD] -->
            ,A.EZINTIME                                         AS XX_REC_HIST_CRAT_TS
            ,A.EZINUSERID                                       AS XX_REC_HIST_CRAT_BY_NM
            ,A.EZUPTIME                                         AS XX_REC_HIST_UPD_TS
            ,A.EZUPUSERID                                       AS XX_REC_HIST_UPD_BY_NM
            ,A.EZTABLEID                                        AS XX_REC_HIST_TBL_NM
            <!-- END   2017/03/17 T.Murai [QC#14205,ADD] -->
            <!-- START 2017/09/12 S.Iidaka  [QC#20994,ADD] -->
            ,DIT.INV_PRINT_FLG                                  AS XX_CHK_BOX_H6
            <!-- END   2016/09/12 S.Iidaka  [QC#20994,ADD] -->
            <!-- START 2018/01/25 E.Kameishi [QC#22697,ADD] -->
            ,CASE WHEN A.INV_TP_CD = #inv# THEN CR_INV.INV_NUM  
                  ELSE '' END                                   AS CR_AR_INV_NUM_E1
            <!-- END   2018/01/25 E.Kameishi [QC#22697,ADD] -->
            <!-- START 2018/09/19 S.Ohki [QC#28089,ADD] -->
            ,ACR.PRM_CMNT_TXT                                   AS PRM_CMNT_TXT_E1
            <!-- END 2018/09/19 S.Ohki [QC#28089,ADD] -->
            <!-- START 2019/06/04 S.Takami [QC#50601,ADD] -->
            ,A.LEASE_PRCH_OPT_CD                                AS LEASE_PRCH_OPT_CD_H1
            <!-- END 2019/06/04 S.Takami [QC#50601,ADD] -->
        FROM
             INV            A
            ,BILL_TO_CUST   D
            ,INV_ERR        E
            <!-- START 2016/05/19 S.Fujita [QC#8478,DEL] -->
            <!--
            ,AR_TRX_BAL     F
            -->
            <!-- END 2016/05/19 S.Fujita [QC#8478,DEL] -->
            ,SELL_TO_CUST   G
            ,INV_BOL        H
            ,SHIP_TO_CUST   J
            <!-- START 2016/05/19 S.Fujita [QC#8478,DEL] -->
            <!--
            ,AR_TRX_BAL     K
            ,CLT_DSPT_TRX   L
            -->
            <!-- END 2016/05/19 S.Fujita [QC#8478,DEL] -->
            <!-- START 2016/09/15 S.Yoshida [QC#13956,DEL] -->
            <!--
            ,DS_CR_CARD     N
            -->
            <!-- END   2016/09/15 S.Yoshida [QC#13956,DEL] -->
            ,INV_PRT_CTRL   O
            ,(SELECT
                MAX(RTL_WH_NM) AS RTL_WH_NM
                <!-- START 2016/10/21 S.Fujita [QC#15307,ADD] -->
                ,INVTY_LOC_CD
                <!-- END   2016/10/21 S.Fujita [QC#15307,ADD] -->
                ,RTL_WH_CD
              FROM 
                DS_INVTY_LOC_V
              WHERE
                    GLBL_CMPY_CD = #glblCmpyCd#
                AND EZCANCELFLAG = '0'
              GROUP BY
                <!-- START 2016/10/21 S.Fujita [QC#15307,ADD] -->
                 INVTY_LOC_CD
                <!-- END   2016/10/21 S.Fujita [QC#15307,ADD] -->
                ,RTL_WH_CD
             )P   
            <!-- START 2016/05/19 S.Fujita [QC#8478,ADD] -->
            ,(
                SELECT
                     TB.AR_TRX_NUM
                    ,TB.DEAL_RMNG_BAL_GRS_AMT
                    ,TB.DEAL_APPLY_CR_AMT
                    ,TB.DEAL_APPLY_ADJ_AMT
                    ,TB.DEAL_APPLY_GRS_AMT
                    ,TB.AR_CASH_APPLY_STS_CD
                    ,DT.DEAL_CLT_DSPT_AMT
                    ,DT.CLT_DSPT_DT
                FROM
                     AR_TRX_BAL     TB
                    ,CLT_DSPT_TRX   DT
                WHERE
                        TB.GLBL_CMPY_CD     = #glblCmpyCd#
                    AND TB.GLBL_CMPY_CD     = DT.GLBL_CMPY_CD (+)
                    AND TB.AR_TRX_NUM       = DT.AR_TRX_NUM (+)
                    AND TB.EZCANCELFLAG     = '0'
                    AND DT.EZCANCELFLAG (+) = '0'
                    AND NOT EXISTS(
                            SELECT
                                'X'
                            FROM
                                ISTL_PMT_TERM   PT
                            WHERE
                                    PT.GLBL_CMPY_CD     = #glblCmpyCd#
                                AND PT.ISTL_PMT_TERM_CD = TB.PMT_TERM_CD
                                AND PT.EZCANCELFLAG     = '0'
                        )
                UNION
                SELECT
                     TB.ORIG_INV_NUM                AS AR_TRX_NUM
                    ,SUM(TB.DEAL_RMNG_BAL_GRS_AMT)  AS DEAL_RMNG_BAL_GRS_AMT
                    ,SUM(TB.DEAL_APPLY_CR_AMT)      AS DEAL_APPLY_CR_AMT
                    ,SUM(TB.DEAL_APPLY_ADJ_AMT)     AS DEAL_APPLY_ADJ_AMT
                    ,SUM(TB.DEAL_APPLY_GRS_AMT)     AS DEAL_APPLY_GRS_AMT
                    ,MAX(CS.AR_CASH_APPLY_STS_CD)   AS AR_CASH_APPLY_STS_CD
                    ,SUM(DT.DEAL_CLT_DSPT_AMT)      AS DEAL_CLT_DSPT_AMT
                    ,MAX(DT.CLT_DSPT_DT)            AS CLT_DSPT_DT
                FROM
                     AR_TRX_BAL     TB
                    ,CLT_DSPT_TRX   DT
                    ,(
                        SELECT
                            TB.ORIG_INV_NUM
                            ,CASE WHEN NVL(US_A.COUNT,0) &gt; 0 AND NVL(US_U.COUNT,0) = 0 AND NVL(US_P.COUNT,0) = 0  AND NVL(US_V.COUNT,0) = 0 THEN #Applied#
                                  WHEN NVL(US_A.COUNT,0) = 0 AND NVL(US_U.COUNT,0) &gt; 0 AND NVL(US_P.COUNT,0) = 0  AND NVL(US_V.COUNT,0) = 0 THEN #Unpplied#
                                  WHEN NVL(US_A.COUNT,0) = 0 AND NVL(US_U.COUNT,0) = 0 AND NVL(US_P.COUNT,0) = 0  AND NVL(US_V.COUNT,0) &gt; 0 THEN #Void#
                                  ELSE #Partial# 
                             END AS AR_CASH_APPLY_STS_CD
                        FROM
                            AR_TRX_BAL  TB
                            ,(
                                SELECT
                                     A.ORIG_INV_NUM
                                    ,COUNT(*)   AS COUNT
                                FROM
                                    AR_TRX_BAL  A
                                WHERE
                                        A.GLBL_CMPY_CD = #glblCmpyCd#
                                    AND A.EZCANCELFLAG = '0'
                                    AND A.AR_CASH_APPLY_STS_CD=#Applied#
                                GROUP BY
                                 A.ORIG_INV_NUM
                                ,A.AR_CASH_APPLY_STS_CD
                             )US_A
                            ,(
                                SELECT
                                     A.ORIG_INV_NUM
                                    ,COUNT(*)   AS COUNT
                                FROM
                                    AR_TRX_BAL  A
                                WHERE
                                        A.GLBL_CMPY_CD = #glblCmpyCd#
                                    AND A.EZCANCELFLAG = '0'
                                    AND A.AR_CASH_APPLY_STS_CD=#Unpplied#
                                GROUP BY
                                 A.ORIG_INV_NUM
                                ,A.AR_CASH_APPLY_STS_CD
                             )US_U
                            ,(
                                SELECT
                                     A.ORIG_INV_NUM
                                    ,COUNT(*)   AS COUNT
                                FROM
                                    AR_TRX_BAL  A
                                WHERE
                                        A.GLBL_CMPY_CD = #glblCmpyCd#
                                    AND A.EZCANCELFLAG = '0'
                                    AND A.AR_CASH_APPLY_STS_CD=#Partial#
                                GROUP BY
                                 A.ORIG_INV_NUM
                                ,A.AR_CASH_APPLY_STS_CD
                             )US_P
                            ,(
                                SELECT
                                     A.ORIG_INV_NUM
                                    ,COUNT(*)   AS COUNT
                                FROM
                                    AR_TRX_BAL  A
                                WHERE
                                        A.GLBL_CMPY_CD = #glblCmpyCd#
                                    AND A.EZCANCELFLAG = '0'
                                    AND A.AR_CASH_APPLY_STS_CD=#Void#
                                GROUP BY
                                 A.ORIG_INV_NUM
                                ,A.AR_CASH_APPLY_STS_CD
                             )US_V
                        WHERE
                                TB.ORIG_INV_NUM = US_A.ORIG_INV_NUM(+)
                            AND TB.ORIG_INV_NUM = US_U.ORIG_INV_NUM(+)
                            AND TB.ORIG_INV_NUM = US_P.ORIG_INV_NUM(+)
                            AND TB.ORIG_INV_NUM = US_V.ORIG_INV_NUM(+)
                        GROUP BY
                         TB.ORIG_INV_NUM
                        ,US_A.COUNT
                        ,US_U.COUNT
                        ,US_P.COUNT
                        ,US_V.COUNT
                     ) CS
                WHERE
                        TB.GLBL_CMPY_CD     = #glblCmpyCd#
                    AND TB.GLBL_CMPY_CD     = DT.GLBL_CMPY_CD (+)
                    AND TB.AR_TRX_NUM       = DT.AR_TRX_NUM (+)
                    AND TB.ORIG_INV_NUM     = CS.ORIG_INV_NUM
                    AND TB.EZCANCELFLAG     = '0'
                    AND DT.EZCANCELFLAG (+) = '0'
                    AND EXISTS(
                            SELECT
                                'X'
                            FROM
                                ISTL_PMT_TERM   PT
                            WHERE
                                    PT.GLBL_CMPY_CD     = #glblCmpyCd#
                                AND PT.ISTL_PMT_TERM_CD = TB.PMT_TERM_CD
                                AND PT.EZCANCELFLAG     = '0'
                        )
                GROUP BY
                    TB.ORIG_INV_NUM
             ) Q
             ,SYS_SRC   R
            <!-- END 2016/05/19 S.Fujita [QC#8478,ADD] -->
            <!-- START 2016/07/04 S.Fujita [QC#11165,ADD] -->
            ,PMT_TERM_CASH_DISC   S
            <!-- END   2016/07/04 S.Fujita [QC#11165,ADD] -->
            <!-- START 2016/07/14 S.Fujita [QC#11157,ADD] -->
            ,ORG_FUNC_ASG    OFA
            ,S21_PSN    SP
            <!-- END   2016/07/14 S.Fujita [QC#11157,ADD] -->

            <!-- START 2016/09/15 S.Yoshida [QC#13956,ADD] -->
            ,CR_CARD_TRX CCT
            ,DS_CR_CARD  DCC
            <!-- END   2016/09/15 S.Yoshida [QC#13956,ADD] -->

            <!-- START 2017/09/12 S.Iidaka  [QC#20994,ADD] -->
            ,DS_INV_TP  DIT
            <!-- END   2016/09/12 S.Iidaka  [QC#20994,ADD] -->
            <!-- START 2018/01/25 E.Kameishi [QC#22697,ADD] -->
            ,INV            CR_INV
            <!-- END   2018/01/25 E.Kameishi [QC#22697,ADD] -->
            <!-- START 2018/09/19 S.Ohki [QC#28089,ADD] -->
            ,AR_CR_REBIL    ACR
            <!-- END 2018/09/19 S.Ohki [QC#28089,ADD] -->
            <!-- START 2018/11/02 S.Ohki [QC#29059,ADD] -->
            ,INV            OR_INV
            <!-- END 2018/11/02 S.Ohki [QC#29059,ADD] -->
        WHERE
                A.GLBL_CMPY_CD      = #glblCmpyCd#
            AND A.INV_NUM           = #invNum#
            AND A.GLBL_CMPY_CD      = D.GLBL_CMPY_CD (+)
            AND A.BILL_TO_CUST_CD   = D.BILL_TO_CUST_CD (+)
            AND A.GLBL_CMPY_CD      = E.GLBL_CMPY_CD (+)
            AND A.INV_NUM           = E.INV_NUM (+)
            <!-- START 2016/05/19 S.Fujita [QC#8478,DEL] -->
            <!--
            AND A.GLBL_CMPY_CD      = F.GLBL_CMPY_CD (+)
            AND A.INV_NUM           = F.AR_TRX_NUM (+)
            -->
            <!-- END 2016/05/19 S.Fujita [QC#8478,DEL] -->
            AND A.GLBL_CMPY_CD      = G.GLBL_CMPY_CD (+)
            AND A.BILL_TO_CUST_ACCT_CD      = G.SELL_TO_CUST_CD (+)
            AND A.GLBL_CMPY_CD      = H.GLBL_CMPY_CD
            AND A.INV_NUM           = H.INV_NUM
            AND H.INV_BOL_LINE_NUM  = #invBolLineNum#
            AND H.GLBL_CMPY_CD      = J.GLBL_CMPY_CD (+)
            AND H.SHIP_TO_CUST_CD   = J.SHIP_TO_CUST_CD (+)
            <!-- START 2016/05/19 S.Fujita [QC#8478,DEL] -->
            <!--
            AND A.GLBL_CMPY_CD      = K.GLBL_CMPY_CD (+)
            AND A.GLBL_CMPY_CD      = L.GLBL_CMPY_CD (+)
            -->
            <!-- END 2016/05/19 S.Fujita [QC#8478,DEL] -->
            <!-- START 2016/09/15 S.Yoshida [QC#13956,DEL] -->
            <!--
            AND A.GLBL_CMPY_CD      = N.GLBL_CMPY_CD (+)
            -->
            <!-- END   2016/09/15 S.Yoshida [QC#13956,DEL] -->
            AND A.GLBL_CMPY_CD      = O.GLBL_CMPY_CD (+)
            <!-- START 2016/05/19 S.Fujita [QC#8478,DEL] -->
            <!--
            AND A.INV_NUM           = K.AR_TRX_NUM (+)
            AND A.INV_NUM           = L.AR_TRX_NUM (+)
            -->
            <!-- END 2016/05/19 S.Fujita [QC#8478,DEL] -->
            <!-- START 2016/09/15 S.Yoshida [QC#13956,DEL] -->
            <!--
            AND M.CR_CARD_TRX_PK    = N.DS_CR_CARD_PK (+)
            -->
            <!-- END   2016/09/15 S.Yoshida [QC#13956,DEL] -->
            AND A.INV_NUM           = O.INV_NUM (+)
            <!-- START 2016/10/21 S.Fujita [QC#15307,MOD] -->
            <!--
            AND H.SHIP_FROM_INVTY_LOC_CD = P.RTL_WH_CD(+)
            -->
            AND H.SHIP_FROM_INVTY_LOC_CD = P.INVTY_LOC_CD(+)
            <!-- END   2016/10/21 S.Fujita [QC#15307,MOD] -->
            <!-- START 2016/05/19 S.Fujita [QC#8478,ADD] -->
            AND A.INV_NUM           = Q.AR_TRX_NUM (+)
            <!-- END 2016/05/19 S.Fujita [QC#8478,ADD] -->
            AND A.GLBL_CMPY_CD      = R.GLBL_CMPY_CD
            AND A.SYS_SRC_CD        = R.SYS_SRC_CD
            AND A.INV_NUM           = Q.AR_TRX_NUM (+)
            <!-- START 2016/07/04 S.Fujita [QC#11165,ADD] -->
            AND A.GLBL_CMPY_CD      = S.GLBL_CMPY_CD
            AND A.PMT_TERM_CASH_DISC_CD    = S.PMT_TERM_CASH_DISC_CD
            <!-- END   2016/07/04 S.Fujita [QC#11165,ADD] -->
            <!-- START 2016/07/14 S.Fujita [QC#11157,ADD] -->
            AND A.GLBL_CMPY_CD      = OFA.GLBL_CMPY_CD
            AND A.SLS_REP_TOC_CD    = OFA.TOC_CD
            AND OFA.GLBL_CMPY_CD    = SP.GLBL_CMPY_CD
            AND OFA.PSN_CD          = SP.PSN_CD
            <!-- END   2016/07/14 S.Fujita [QC#11157,ADD] -->
            AND A.EZCANCELFLAG      ='0'
            AND D.EZCANCELFLAG (+)  ='0'
            AND E.EZCANCELFLAG (+)  ='0'
            <!-- START 2016/05/19 S.Fujita [QC#8478,DEL] -->
            <!--
            AND F.EZCANCELFLAG (+)  ='0'
            -->
            <!-- END 2016/05/19 S.Fujita [QC#8478,DEL] -->
            AND G.EZCANCELFLAG (+)  ='0'
            AND H.EZCANCELFLAG      ='0'
            AND J.EZCANCELFLAG (+)  ='0'
            <!-- START 2016/05/19 S.Fujita [QC#8478,DEL] -->
            <!--
            AND K.EZCANCELFLAG (+)  = '0'
            AND L.EZCANCELFLAG (+)  = '0'
            -->
            <!-- END 2016/05/19 S.Fujita [QC#8478,DEL] -->
            <!-- START 2016/09/15 S.Yoshida [QC#13956,DEL] -->
            <!--
            AND N.EZCANCELFLAG (+)  = '0'
            -->
            <!-- END   2016/09/15 S.Yoshida [QC#13956,DEL] -->
            AND O.EZCANCELFLAG (+)  = '0'
            AND R.EZCANCELFLAG      = '0'
            AND S.EZCANCELFLAG      = '0'
            AND OFA.EZCANCELFLAG    = '0'
            AND SP.EZCANCELFLAG     = '0'

            <!-- START 2016/09/15 S.Yoshida [QC#13956,ADD] -->
            AND CCT.GLBL_CMPY_CD         (+) = A.GLBL_CMPY_CD 
            AND CCT.FIRST_TRX_INFO_TXT   (+) = A.INV_NUM
            AND CCT.CR_CARD_TRX_TP_CD    (+) = #Invoice#
            AND CCT.EZCANCELFLAG         (+) = '0'
            AND DCC.GLBL_CMPY_CD         (+) = CCT.GLBL_CMPY_CD
            AND DCC.CR_CARD_CUST_REF_NUM (+) = CCT.CR_CARD_CUST_REF_NUM
            AND DCC.EZCANCELFLAG         (+) = '0'
            <!-- END   2016/09/15 S.Yoshida [QC#13956,ADD] -->

            <!-- START 2017/09/12 S.Iidaka  [QC#20994,ADD] -->
            AND A.GLBL_CMPY_CD               = DIT.GLBL_CMPY_CD(+)
            AND A.DS_INV_TP_CD               = DIT.DS_INV_TP_CD(+)
            AND DIT.EZCANCELFLAG         (+) = '0'
            <!-- END   2016/09/12 S.Iidaka  [QC#20994,ADD] -->
            <!-- START 2018/01/25 E.Kameishi [QC#22697,ADD] -->
            AND A.GLBL_CMPY_CD               = CR_INV.GLBL_CMPY_CD(+)
            AND A.ORIG_INV_NUM               = CR_INV.ORIG_INV_NUM(+)
            AND CR_INV.INV_TP_CD(+)          = #cm#
            AND CR_INV.EZCANCELFLAG(+)       = '0'
            <!-- END   2018/01/25 E.Kameishi [QC#22697,ADD] -->
            <!-- START 2018/09/19 S.Ohki [QC#28089,ADD] -->
            AND A.GLBL_CMPY_CD               = ACR.GLBL_CMPY_CD(+)
            AND A.INV_NUM                    = ACR.INV_NUM(+)
            AND ACR.EZCANCELFLAG(+)          = '0'
            <!-- END 2018/09/19 S.Ohki [QC#28089,ADD] -->
            <!-- START 2018/11/02 S.Ohki [QC#29059,ADD] -->
            AND A.GLBL_CMPY_CD               = OR_INV.GLBL_CMPY_CD(+)
            AND A.ORIG_INV_NUM               = OR_INV.INV_NUM(+)
            AND OR_INV.EZCANCELFLAG(+)       = '0'
            <!-- END 2018/11/02 S.Ohki [QC#29059,ADD] -->
    </statement>

    <resultMap id="result.searchInv" class="NFCL3000CMsg">
        <result property="invNum_H1"                column="INV_NUM_H1"                 javaType="EZDCStringItem" />
        <result property="grpInvNum_H1"             column="GRP_INV_NUM_H1"             javaType="EZDCStringItem" />
        <result property="invTpCd_H1"               column="INV_TP_CD_H1"               javaType="EZDCStringItem" />
        <result property="dsInvTpCd_H1"             column="DS_INV_TP_CD_H1"            javaType="EZDCStringItem" />
        <result property="pmtTermCashDiscCd_H1"     column="PMT_TERM_CASH_DISC_CD_H1"   javaType="EZDCStringItem" />
        <result property="invDt_H1"                 column="INV_DT_H1"                  javaType="EZDCStringItem" />
        <result property="acctDt_H1"                column="ACCT_DT_H1"                 javaType="EZDCStringItem" />
        <result property="netDueDt_H1"              column="NET_DUE_DT_H1"              javaType="EZDCStringItem" />
        <result property="srcSysDocNum_H1"          column="SRC_SYS_DOC_NUM_H1"         javaType="EZDCStringItem" />
        <result property="custIssPoNum_H1"          column="CUST_ISS_PO_NUM_H1"         javaType="EZDCStringItem" />
        <result property="slsRepTocCd_H1"           column="SLS_REP_TOC_CD_H1"          javaType="EZDCStringItem" />
        <result property="slsRepTocNm_H1"           column="SLS_REP_TOC_NM_H1"          javaType="EZDCStringItem" />
        <result property="tocNm_H1"                 column="TOC_NM_H1"                  javaType="EZDCStringItem" />
        <result property="custCareTktNum_H1"        column="CUST_CARE_TKT_NUM_H1"       javaType="EZDCStringItem" />
        <result property="billToCustAcctCd_H3"      column="BILL_TO_CUST_ACCT_CD_H3"    javaType="EZDCStringItem" />
        <result property="billToCustAcctNm_H3"      column="BILL_TO_CUST_ACCT_NM_H3"    javaType="EZDCStringItem" />
        <result property="billToCustCd_H3"          column="BILL_TO_CUST_CD_H3"         javaType="EZDCStringItem" />
        <result property="locNum_H3"                column="LOC_NUM_H3"                 javaType="EZDCStringItem" />
        <result property="ctacPsnPk_H3"             column="CTAC_PSN_PK_H3"             javaType="EZDCBigDecimalItem" />
        <result property="billToCtacPsnFirstNm_H3"  column="BILL_TO_CTAC_PSN_FIRST_NM_H3"   javaType="EZDCStringItem" />
        <result property="billToCtacPsnLastNm_H3"   column="BILL_TO_CTAC_PSN_LAST_NM_H3"    javaType="EZDCStringItem" />
        <result property="xxPsnNm_H3"               column="XX_PSN_NM_H3"               javaType="EZDCStringItem" />
        <result property="invErrMsgTxt_H4"          column="INV_ERR_MSG_TXT_H4"         javaType="EZDCStringItem" />
        <result property="invldValTxt_H4"           column="INVLD_VAL_TXT_H4"           javaType="EZDCStringItem" />

        <result property="xxTotAmt_T1"              column="XX_TOT_AMT_T1"              javaType="EZDCBigDecimalItem" />
        <result property="xxTotAmt_T2"              column="XX_TOT_AMT_T2"              javaType="EZDCBigDecimalItem" />
        <result property="xxTotAmt_T3"              column="XX_TOT_AMT_T3"              javaType="EZDCBigDecimalItem" />
        <result property="xxTotAmt_T4"              column="XX_TOT_AMT_T4"              javaType="EZDCBigDecimalItem" />
        <result property="xxTotAmt_T5"              column="XX_TOT_AMT_T5"              javaType="EZDCBigDecimalItem" />

        <result property="shipToCustAcctCd_H2"      column="SHIP_TO_CUST_ACCT_CD_H2"    javaType="EZDCStringItem" />
        <result property="shipToCustAcctNm_H2"      column="SHIP_TO_CUST_ACCT_NM_H2"    javaType="EZDCStringItem" />
        <result property="shipToCustCd_H2"          column="SHIP_TO_CUST_CD_H2"         javaType="EZDCStringItem" />
        <result property="locNum_H2"                column="LOC_NUM_H2"                 javaType="EZDCStringItem" />
        <result property="ctacPsnPk_H2"             column="CTAC_PSN_PK_H3"             javaType="EZDCBigDecimalItem" />
        <result property="shipToCtacPsnFirstNm_H2"  column="SHIP_TO_CTAC_PSN_FIRST_NM_H2"   javaType="EZDCStringItem" />
        <result property="shipToCtacPsnLastNm_H2"   column="SHIP_TO_CTAC_PSN_LAST_NM_H2"    javaType="EZDCStringItem" />
        <result property="xxPsnNm_H2"               column="XX_PSN_NM_H2"               javaType="EZDCStringItem" />

        <result property="shipToAddlLocNm_H2"       column="SHIP_TO_ADDL_LOC_NM_H2"     javaType="EZDCStringItem" />
        <result property="shipToFirstLineAddr_H2"   column="SHIP_TO_FIRST_LINE_ADDR_H2" javaType="EZDCStringItem" />
        <result property="shipToScdLineAddr_H2"     column="SHIP_TO_SCD_LINE_ADDR_H2"   javaType="EZDCStringItem" />
        <result property="shipToThirdLineAddr_H2"   column="SHIP_TO_THIRD_LINE_ADDR_H2" javaType="EZDCStringItem" />
        <result property="shipToFrthLineAddr_H2"    column="SHIP_TO_FRTH_LINE_ADDR_H2"  javaType="EZDCStringItem" />
        <result property="shipToStCd_H2"            column="SHIP_TO_ST_CD_H2"           javaType="EZDCStringItem" />
        <result property="shipToProvNm_H2"          column="SHIP_TO_PROV_NM_H2"         javaType="EZDCStringItem" />
        <result property="shipToCntyNm_H2"          column="SHIP_TO_CNTY_NM_H2"         javaType="EZDCStringItem" />
        <result property="shipToPostCd_H2"          column="SHIP_TO_POST_CD_H2"         javaType="EZDCStringItem" />
        <result property="shipToCtyAddr_H2"         column="SHIP_TO_CTY_ADDR_H2"        javaType="EZDCStringItem" />
        <result property="shipToCtryCd_H2"          column="SHIP_TO_CTRY_CD_H2"         javaType="EZDCStringItem" />

        <result property="rcpntFirstLineAddr_H3"    column="RCPNT_FIRST_LINE_ADDR_H3"   javaType="EZDCStringItem" />
        <result property="rcpntScdLineAddr_H3"      column="RCPNT_SCD_LINE_ADDR_H3"     javaType="EZDCStringItem" />
        <result property="rcpntThirdLineAddr_H3"    column="RCPNT_THIRD_LINE_ADDR_H3"   javaType="EZDCStringItem" />
        <result property="rcpntFrthLineAddr_H3"     column="RCPNT_FRTH_LINE_ADDR_H3"    javaType="EZDCStringItem" />
        <result property="rcpntCtyAddr_H3"          column="RCPNT_CTY_ADDR_H3"          javaType="EZDCStringItem" />
        <result property="rcpntStCd_H3"             column="RCPNT_ST_CD_H3"             javaType="EZDCStringItem" />
        <result property="rcpntProvNm_H3"           column="RCPNT_PROV_NM_H3"           javaType="EZDCStringItem" />
        <result property="rcpntCntyNm_H3"           column="RCPNT_CNTY_NM_H3"           javaType="EZDCStringItem" />
        <result property="rcpntPostCd_H3"           column="RCPNT_POST_CD_H3"           javaType="EZDCStringItem" />
        <result property="rcpntAddlLocNm_H3"        column="RCPNT_ADDL_LOC_NM_H3"       javaType="EZDCStringItem" />
        <result property="rcpntCtryCd_H3"           column="RCPNT_CTRY_CD_H3"           javaType="EZDCStringItem" />

        <!-- START 2016/10/28 T.Murai [QC#15495,DEL] -->
        <!--
        <result property="shipFromInvtyLocCd_H4"    column="SHIP_FROM_INVTY_LOC_CD_H4"  javaType="EZDCStringItem" />
        <result property="shipDt_H4"                column="SHIP_DT_H4"                 javaType="EZDCStringItem" />
        -->
        <!-- END   2016/10/28 T.Murai [QC#15495,DEL] -->

        <result property="fnlzInvFlg_H4"            column="FNLZ_INV_FLG_H4"            javaType="EZDCStringItem" />
        <result property="dealApplyCrAmt_H4"        column="DEAL_APPLY_CR_AMT_H4"       javaType="EZDCBigDecimalItem" />
        <result property="dealApplyAdjAmt_H4"       column="DEAL_APPLY_ADJ_AMT_H4"      javaType="EZDCBigDecimalItem" />
        <result property="dealApplyGrsAmt_H4"       column="DEAL_APPLY_GRS_AMT_H4"      javaType="EZDCBigDecimalItem" />

        <result property="invPrintStsCd_E1"             column="INV_PRINT_STS_CD_E1"            javaType="EZDCStringItem" />
        <result property="invPrintProcDt_E1"            column="INV_PRINT_PROC_DT_E1"           javaType="EZDCStringItem" />
<!-- 2019/05/10 QC#50148 Mod Start -->
        <!-- result property="invFirstCmntTxt_E1"           column="INV_FIRST_CMNT_TXT_E1"          javaType="EZDCStringItem" / -->
        <result property="xxInvMemoTxt_E1"              column="XX_INV_MEMO_TXT_E1"             javaType="EZDCStringItem" />
<!-- 2019/05/10 QC#50148 Mod Start -->
        <result property="invProcTpCd_E1"               column="INV_PROC_TP_CD_E1"              javaType="EZDCStringItem" />
        <!-- START 2017/12/25 E.Kameishi [QC#20312,ADD] -->
        <result property="invPrintCratStsCd_E1"         column="INV_PRINT_CRAT_STS_CD_E1"       javaType="EZDCStringItem" />
        <!-- END   2017/12/25 E.Kameishi [QC#20312,ADD] -->
        <result property="arCashApplyStsCd_E1"          column="AR_CASH_APPLY_STS_CD_E1"        javaType="EZDCStringItem" />
        <result property="dealCltDsptAmt_E1"            column="DEAL_CLT_DSPT_AMT_F1"           javaType="EZDCBigDecimalItem" />
        <result property="cltDsptDt_E1"                 column="CLT_DSPT_DT_E1"                 javaType="EZDCStringItem" />
        <result property="contrRnwTotCnt_E1"            column="CONTR_RNW_TOT_CNT_E1"           javaType="EZDCBigDecimalItem" />
        <result property="dsContrCatgCd_E1"             column="DS_CONTR_CATG_CD_E1"            javaType="EZDCStringItem" />
        <result property="dsOrdCatgCd_E1"               column="DS_ORD_CATG_CD_E1"              javaType="EZDCStringItem" />
        <result property="origInvNum_E1"                column="ORIG_INV_NUM_E1"                javaType="EZDCStringItem" />
        <!-- START 2018/01/25 E.Kameishi [QC#22697,ADD] -->
        <result property="crArInvNum_E1"                column="CR_AR_INV_NUM_E1"                javaType="EZDCStringItem" />
        <!-- END   2018/01/25 E.Kameishi [QC#22697,ADD] -->
        <result property="prePmtAmt_E1"                 column="PRE_PMT_AMT_E1"                 javaType="EZDCBigDecimalItem" />
        <!--<result property="dsPmtMethCd_E1"               column="DS_PMT_METH_CD_E1"              javaType="EZDCStringItem" />-->
        <result property="crCardTrxPk_E1"               column="CR_CARD_TRX_PK_E1"              javaType="EZDCBigDecimalItem" />
        <result property="crCardTpCd_E1"                column="CR_CARD_TP_CD_E1"               javaType="EZDCStringItem" />
        <result property="crCardHldNm_E1"               column="CR_CARD_HLD_NM_E1"              javaType="EZDCStringItem" />
        <result property="crCardLastDigitNum_E1"        column="CR_CARD_LAST_DIGIT_NUM_E1"      javaType="EZDCStringItem" />
        <result property="crCardExprYrMth_E1"           column="CR_CARD_EXPR_YR_MTH_E1"         javaType="EZDCStringItem" />
       <!-- START 2016/09/15 S.Yoshida [QC#13956,ADD] -->
       <result property="xxScrItem19Txt_E1"             column="CR_CARD_NUM_SCRN_TXT"           javaType="EZDCStringItem" />
       <!-- END   2016/09/15 S.Yoshida [QC#13956,ADD] -->
        <!-- START 2018/09/19 S.Ohki [QC#28089,ADD] -->
        <result property="prmCmntTxt_E1"                column="PRM_CMNT_TXT_E1"                javaType="EZDCStringItem" />
        <!-- END 2018/09/19 S.Ohki [QC#28089,ADD] -->

        <!-- START 2018/11/02 S.Ohki [QC#29059,ADD] -->
        <result property="sysSrcCd_OR"                  column="SYS_SRC_CD_OR"                  javaType="EZDCStringItem" />
        <!-- END 2018/11/02 S.Ohki [QC#29059,ADD] -->
        <result property="sysSrcCd_H1"                  column="SYS_SRC_CD_H1"                  javaType="EZDCStringItem" />
        <result property="sysSrcNm_H1"                  column="SYS_SRC_NM_H1"                  javaType="EZDCStringItem" />
        <result property="sysSrcDescTxt_H1"             column="SYS_SRC_DESC_TXT_H1"            javaType="EZDCStringItem" />

        <result property="rtlWhNm_H4"                   column="RTL_WH_NM_H4"                   javaType="EZDCStringItem" />
       <!-- START 2016/05/19 S.Fujita [QC#9454,ADD] -->
        <result property="pmtTermCd_H1"                 column="PMT_TERM_CD_H1"                 javaType="EZDCStringItem" />
        <result property="sellToCustCd_H3"              column="SELL_TO_CUST_CD_H3"             javaType="EZDCStringItem" />
       <!-- END   2016/05/19 S.Fujita [QC#9454,ADD] -->
       <!-- START 2016/07/04 S.Fujita [QC#11165,ADD] -->
       <result property="istlPmtTermFlg_H1"             column="ISTL_PMT_TERM_FLG_H1"           javaType="EZDCStringItem" />
       <!-- END   2016/07/04 S.Fujita [QC#11165,ADD] -->
       <!-- START 2016/07/14 S.Fujita [QC#11157,ADD] -->
       <result property="psnNum_H1"                     column="PSN_NUM_H1"                     javaType="EZDCStringItem" />
       <!-- END   2016/07/14 S.Fujita [QC#11157,ADD] -->
       <!-- START 2016/08/01 S.Fujita [QC#10148,ADD] -->
       <result property="ezInTime_H1"                   column="EZINTIME_H1"                    javaType="EZDCStringItem" />
       <result property="ezUserID_H1"                   column="EZINUSERID_H1"                  javaType="EZDCStringItem" />
       <result property="ezUpTime_H1"                   column="EZUPTIME_H1"                    javaType="EZDCStringItem" />
       <result property="ezUpUserID_H1"                 column="EZUPUSERID_H1"                  javaType="EZDCStringItem" />
       <!-- END   2016/08/01 S.Fujita [QC#10148,ADD] -->
       <!-- START 2017/03/17 T.Murai [QC#14205,ADD] -->
       <result property="xxRecHistCratTs"               column="XX_REC_HIST_CRAT_TS"            javaType="EZDCStringItem" />
       <result property="xxRecHistCratByNm"             column="XX_REC_HIST_CRAT_BY_NM"         javaType="EZDCStringItem" />
       <result property="xxRecHistUpdTs"                column="XX_REC_HIST_UPD_TS"             javaType="EZDCStringItem" />
       <result property="xxRecHistUpdByNm"              column="XX_REC_HIST_UPD_BY_NM"          javaType="EZDCStringItem" />
       <result property="xxRecHistTblNm"                column="XX_REC_HIST_TBL_NM"             javaType="EZDCStringItem" />
       <!-- END   2017/03/17 T.Murai [QC#14205,ADD] -->
       <!-- START 2017/09/12 S.Iidaka [QC#20994,ADD] -->
       <result property="xxChkBox_H6"                   column="XX_CHK_BOX_H6"                  javaType="EZDCStringItem" />
       <!-- END   2017/09/12 S.Iidaka [QC#20994,ADD] -->
       <!-- START 2019/06/04 S.Takami [QC#50601,ADD] -->
       <result property="leasePrchOptCd_H1"            column="LEASE_PRCH_OPT_CD_H1"              javaType="EZDCStringItem" />
       <!-- END 2019/06/04 S.Takami [QC#50601,ADD] -->
    </resultMap>

    <statement id="searchInvLine" parameterClass="Map" resultMap="result.searchInvLine">
        SELECT
             A.INV_BOL_LINE_NUM                                 AS INV_BOL_LINE_NUM_A1
            ,A.INV_LINE_NUM                                     AS INV_LINE_NUM_A1
            ,A.INV_LINE_SUB_NUM                                 AS INV_LINE_SUB_NUM_A1
            ,A.INV_LINE_SUB_TRX_NUM                             AS INV_LINE_SUB_TRX_NUM_A1
            ,A.MDSE_CD                                          AS MDSE_CD_A1
            ,A.MDSE_NM                                          AS MDSE_NM_A1
            ,A.UOM_CD                                           AS PKG_UOM_CD_A1
            <!-- START 2016/07/11 S.Fujita [QC#10160,MOD] -->
            ,(CASE WHEN D.INV_TP_CD = #cm# THEN NVL(A.SHIP_QTY, 0) * -1
                   ELSE NVL(A.SHIP_QTY, 0) END)                 AS SHIP_QTY_A1
            ,A.DEAL_NET_UNIT_PRC_AMT                            AS DEAL_NET_UNIT_PRC_AMT_A1
            ,(CASE WHEN D.INV_TP_CD = #cm# THEN NVL(A.INV_LINE_DEAL_NET_AMT, 0) * -1
                   ELSE NVL(A.INV_LINE_DEAL_NET_AMT, 0) END)    AS INV_LINE_DEAL_NET_AMT_A1
            ,(CASE WHEN D.INV_TP_CD = #cm# THEN NVL(A.INV_LINE_DEAL_TAX_AMT, 0) * -1
                   ELSE NVL(A.INV_LINE_DEAL_TAX_AMT, 0) END)    AS INV_LINE_DEAL_TAX_AMT_A1
            ,(CASE WHEN D.INV_TP_CD = #cm# THEN (NVL(A.INV_LINE_DEAL_NET_AMT, 0) + NVL(A.INV_LINE_DEAL_TAX_AMT, 0)) * -1
                   ELSE NVL(A.INV_LINE_DEAL_NET_AMT, 0) + NVL(A.INV_LINE_DEAL_TAX_AMT, 0) END)    AS XX_TOT_AMT_A1
            <!-- END   2016/07/11 S.Fujita [QC#10160,MOD] -->
            ,A.CPO_ORD_NUM                                      AS CPO_ORD_NUM_A1
            ,D.ORD_DT                                           AS ORD_DT_A1
            ,E.SHIP_DT                                          AS SHIP_DT_A1
            <!-- START 2017/12/25 E.Kameishi [QC#20312,MOD] -->
            ,(CASE WHEN H.INVTY_CTRL_FLG = 'Y' THEN E.SHIP_FROM_INVTY_LOC_CD
                   ELSE NULL END)                               AS SHIP_FROM_INVTY_LOC_CD_A1
            <!-- END   2017/12/25 E.Kameishi [QC#20312,MOD] -->
            ,A.TAX_PCT                                          AS TAX_PCT_A1
            ,F.INV_ERR_MSG_TXT                                  AS INV_ERR_MSG_TXT_A1
            ,F.INVLD_VAL_TXT                                    AS INVLD_VAL_TXT_A1
            ,A.TRX_CD                                           AS TRX_CD_A1
            ,A.TRX_RSN_CD                                       AS TRX_RSN_CD_A1
            <!-- START 2016/08/01 S.Fujita [QC#10148,ADD] -->
            ,A.DS_ORD_POSN_NUM                                  AS DS_ORD_POSN_NUM_A1
            ,A.DS_CPO_LINE_NUM                                  AS DS_CPO_LINE_NUM_A1
            ,A.DS_CPO_LINE_SUB_NUM                              AS DS_CPO_LINE_SUB_NUM_A1
            ,A.ORD_QTY                                          AS ORD_QTY_A1
            ,A.CR_DR_RSN_CD                                     AS CR_DR_RSN_CD_A1
            ,A.DS_CONTR_NUM                                     AS DS_CONTR_NUM_A1
            ,A.DS_CONTR_SQ_NUM                                  AS DS_CONTR_SQ_NUM_A1
            ,A.SVC_CONFIG_MSTR_PK                               AS SVC_CONFIG_MSTR_PK_A1
            ,A.MDL_NM                                           AS MDL_NM_A1
            ,A.SVC_INV_CHRG_TP_CD                               AS SVC_INV_CHRG_TP_CD_A1
            ,A.BLLG_PER_FROM_DT                                 AS BLLG_PER_FROM_DT_A1
            ,A.BLLG_PER_THRU_DT                                 AS BLLG_PER_THRU_DT_A1
            ,A.BLLG_COPY_QTY                                    AS BLLG_COPY_QTY_A1
            ,A.DS_CONTR_DTL_PK                                  AS DS_CONTR_DTL_PK_A1
            ,A.MAN_INV_CRAT_CMNT_TXT                            AS MAN_INV_CRAT_CMNT_TXT_A1
            <!-- END   2016/08/01 S.Fujita [QC#10148,ADD] -->

            <!-- START 2016/10/04 S.Fujita [QC#10281,ADD] -->
            ,A.CSMP_CONTR_NUM                                   AS CSMP_CONTR_NUM_A1
            ,A.DLR_REF_NUM                                      AS DLR_REF_NUM_A1
            ,G.FUNC_CSMP_CR_AMT                                 AS FUNC_CSMP_CR_AMT_A1
            ,A.FIRST_BLLG_ATTRB_VAL_TXT                         AS FIRST_BLLG_ATTRB_VAL_TXT_A1
            ,A.SCD_BLLG_ATTRB_VAL_TXT                           AS SCD_BLLG_ATTRB_VAL_TXT_A1
            ,A.THIRD_BLLG_ATTRB_VAL_TXT                         AS THIRD_BLLG_ATTRB_VAL_TXT_A1
            ,A.FRTH_BLLG_ATTRB_VAL_TXT                          AS FRTH_BLLG_ATTRB_VAL_TXT_A1
            ,A.FIFTH_BLLG_ATTRB_VAL_TXT                         AS FIFTH_BLLG_ATTRB_VAL_TXT_A1
            ,A.SIXTH_BLLG_ATTRB_VAL_TXT                         AS SIXTH_BLLG_ATTRB_VAL_TXT_A1
            <!-- END   2016/10/14 S.Fujita [QC#10281,ADD] -->

            <!-- START 2017/01/19 S.Fujita [QC#17136,ADD] -->
            ,A.SVC_INV_LINE_PK                                  AS SVC_INV_LINE_PK_A1
            <!-- END   2017/01/19 S.Fujita [QC#17136,ADD] -->
            <!-- START 2018/05/22 Y.Matsui [QC#21841,ADD] -->
            ,A.INV_LINE_CATG_CD                                 AS INV_LINE_CATG_CD
            <!-- END   2018/05/22 Y.Matsui [QC#21841,ADD] -->
            <!-- START 2017/03/17 T.Murai [QC#14205,ADD] -->
            ,A.EZINTIME                                         AS XX_REC_HIST_CRAT_TS
            ,A.EZINUSERID                                       AS XX_REC_HIST_CRAT_BY_NM
            ,A.EZUPTIME                                         AS XX_REC_HIST_UPD_TS
            ,A.EZUPUSERID                                       AS XX_REC_HIST_UPD_BY_NM
            ,A.EZTABLEID                                        AS XX_REC_HIST_TBL_NM
            <!-- END   2017/03/17 T.Murai [QC#14205,ADD] -->
<!-- START 2018/09/28 T.Ogura [QC#28526,ADD] -->
<!-- START 2019/05/29  Y.Matsui [QC#50078,MOD] -->
            ,(CASE WHEN D.INV_TP_CD = #cm# THEN A.ORD_CUST_UOM_QTY * -1
                   ELSE A.ORD_CUST_UOM_QTY END)                 AS ORD_CUST_UOM_QTY_A1
<!-- END 2019/05/29 Y.Matsui [QC#50078,MOD] -->
<!-- START 2019/04/25 S.Takami [QC#50078,MOD] -->
            <!-- ,A.INV_DPLY_QTY                                     AS INV_DPLY_QTY_A1 -->
            ,(CASE WHEN D.INV_TP_CD = #cm# AND A.INV_DPLY_QTY IS NOT NULL THEN A.INV_DPLY_QTY * -1
                   ELSE A.INV_DPLY_QTY END)                     AS INV_DPLY_QTY_A1
<!-- END 2019/04/25 S.Takami [QC#50078,MOD] -->
            <!-- START 2018/11/02 S.Ohki [QC#29059,MOD] -->
            <!-- ,CASE WHEN D.SYS_SRC_CD = #nsv# AND SI.SVC_INV_SRC_TP_CD = #dspt# -->
            ,CASE WHEN NVL(OR_INV.SYS_SRC_CD, D.SYS_SRC_CD) = #nsv# AND SI.SVC_INV_SRC_TP_CD = #dspt#
            <!-- END 2018/11/02 S.Ohki [QC#29059,MOD] -->
                  THEN 'Y'
                  <!-- START 2018/11/02 S.Ohki [QC#29059,MOD] -->
                  <!-- WHEN D.SYS_SRC_CD = #nsv# AND (SI.SVC_INV_SRC_TP_CD &lt;&gt; #dspt# OR SI.SVC_INV_SRC_TP_CD IS NULL) -->
                  WHEN NVL(OR_INV.SYS_SRC_CD, D.SYS_SRC_CD) = #nsv# AND (SI.SVC_INV_SRC_TP_CD &lt;&gt; #dspt# OR SI.SVC_INV_SRC_TP_CD IS NULL)
                  <!-- END 2018/11/02 S.Ohki [QC#29059,MOD] -->
                  THEN 'N'
                  ELSE NULL
             END                                                AS FSR_INV_FLG_A1
<!-- END   2018/09/28 T.Ogura [QC#28526,ADD] -->
<!-- START 2018/10/24 S.Takami [QC#27069, ADD] -->
            ,A.SVC_MACH_MSTR_PK
            ,A.SVC_CONFIG_MSTR_PK
            ,A.MDL_ID
<!-- END   2018/10/24 S.Takami [QC#27069, ADD] -->
<!-- START 2019/08/07 S.Takami [QC#52453,ADD] -->
            ,A.CPO_DTL_LINE_NUM                                 AS CPO_DTL_LINE_NUM_A1
            ,A.CPO_DTL_LINE_SUB_NUM                             AS CPO_DTL_LINE_SUB_NUM_A1
            ,A.STK_STS_CD                                       AS STK_STS_CD_A1
            ,A.COA_AFFL_CD                                      AS COA_AFFL_CD_A1
            ,A.PRC_CATG_CD                                      AS PRC_CATG_CD_A1
            ,A.DS_ORD_LINE_CATG_CD                              AS DS_ORD_LINE_CATG_CD_A1
            ,A.CUST_ISS_PO_DT                                   AS CUST_ISS_PO_DT_A1
            ,A.ORIG_OR_CUST_MDSE_CD                             AS ORIG_OR_CUST_MDSE_CD_A1
            ,A.CSMP_INV_PROC_STS_CD                             AS CSMP_INV_PROC_STS_CD_A1
<!-- EndT 2019/08/07 S.Takami [QC#52453,ADD] -->
        FROM
             INV_LINE       A
            ,INV            D
            ,INV_BOL        E
            ,INV_LINE_ERR   F
            <!-- START 2016/10/04 S.Fujita [QC#10281,ADD] -->
            ,(
	              SELECT
	                  OPD1.*
	              FROM
	                  ORD_PRFT_DTL OPD1
		            ,(
		              SELECT
		                  OPD2.TRX_HDR_NUM
		                 ,OPD2.TRX_LINE_NUM
		                 ,OPD2.TRX_LINE_SUB_NUM
		                 ,OPD2.DS_ORD_POSN_NUM
                         <!-- START 2018/12/12 Y.Matsui [QC#29587,ADD] -->
                         ,OPD2.ORD_PRFT_TRX_CATG_CD
                         <!-- END   2018/12/12 Y.Matsui [QC#29587,ADD] -->
		                 ,MAX(OPD2.ORD_PRFT_VRSN_NUM) AS ORD_PRFT_VRSN_NUM
		              FROM
		                 ORD_PRFT_DTL OPD2
		              WHERE
		                     OPD2.GLBL_CMPY_CD          = #glblCmpyCd#
		                 AND OPD2.EZCANCELFLAG          = '0'
		              GROUP BY
		                   OPD2.TRX_HDR_NUM
		                  ,OPD2.TRX_LINE_NUM
		                  ,OPD2.TRX_LINE_SUB_NUM
		                  ,OPD2.DS_ORD_POSN_NUM
                          <!-- START 2018/12/12 Y.Matsui [QC#29587,ADD] -->
                          ,OPD2.ORD_PRFT_TRX_CATG_CD
                          <!-- END   2018/12/12 Y.Matsui [QC#29587,ADD] -->
		             )OPD3
		          WHERE
		                 OPD1.GLBL_CMPY_CD      = #glblCmpyCd#
		             AND OPD1.TRX_HDR_NUM       = OPD3.TRX_HDR_NUM
		             AND OPD1.TRX_LINE_NUM      = OPD3.TRX_LINE_NUM
		             AND OPD1.TRX_LINE_SUB_NUM  = OPD3.TRX_LINE_SUB_NUM
		             AND OPD1.DS_ORD_POSN_NUM   = OPD3.DS_ORD_POSN_NUM
                     <!-- START 2018/12/12 Y.Matsui [QC#29587,ADD] -->
                     AND OPD1.ORD_PRFT_TRX_CATG_CD = OPD3.ORD_PRFT_TRX_CATG_CD
                     <!-- END   2018/12/12 Y.Matsui [QC#29587,ADD] -->
		             AND OPD1.ORD_PRFT_VRSN_NUM = OPD3.ORD_PRFT_VRSN_NUM
		             AND OPD1.EZCANCELFLAG      = '0'
             )G
            <!-- END   2016/10/14 S.Fujita [QC#10281,ADD] -->
            <!-- START 2017/12/25 E.Kameishi [QC#20312,ADD] -->
            ,MDSE          H
            <!-- END   2017/12/25 E.Kameishi [QC#20312,ADD] -->
<!-- START 2018/09/28 T.Ogura [QC#28526,ADD] -->
            , SVC_INV_LINE  SIL
            , SVC_INV       SI
<!-- END   2018/09/28 T.Ogura [QC#28526,ADD] -->
            <!-- START 2018/11/02 S.Ohki [QC#29059,ADD] -->
            ,INV            OR_INV
            <!-- END 2018/11/02 S.Ohki [QC#29059,ADD] -->
        WHERE
                A.GLBL_CMPY_CD          = #glblCmpyCd#
            AND A.INV_NUM               = #invNum#
            AND A.GLBL_CMPY_CD          = D.GLBL_CMPY_CD
            AND A.INV_NUM               = D.INV_NUM
            AND A.GLBL_CMPY_CD          = E.GLBL_CMPY_CD
            AND A.INV_NUM               = E.INV_NUM
            AND A.INV_BOL_LINE_NUM      = E.INV_BOL_LINE_NUM
            AND A.GLBL_CMPY_CD          = F.GLBL_CMPY_CD (+)
            AND A.INV_NUM               = F.INV_NUM (+)
            AND A.INV_BOL_LINE_NUM      = F.INV_BOL_LINE_NUM (+)
            AND A.INV_LINE_NUM          = F.INV_LINE_NUM (+)
            AND A.INV_LINE_SUB_NUM      = F.INV_LINE_SUB_NUM (+)
            AND A.INV_LINE_SUB_TRX_NUM  = F.INV_TRX_LINE_SUB_NUM (+)
            <!-- START 2016/10/04 S.Fujita [QC#10281,ADD] -->
            AND D.GLBL_CMPY_CD          = G.GLBL_CMPY_CD (+)
            AND D.CPO_ORD_NUM           = G.TRX_HDR_NUM (+)
            AND A.CPO_DTL_LINE_NUM      = G.TRX_LINE_NUM (+)
            AND A.CPO_DTL_LINE_SUB_NUM  = G.TRX_LINE_SUB_NUM (+)
            AND A.DS_ORD_POSN_NUM       = G.DS_ORD_POSN_NUM (+)
            <!-- START 2018/12/12 Y.Matsui [QC#29587,ADD] -->
            AND DECODE(D.TRX_SRC_TP_CD, #trxSrcTpSalesReturn#, #ordPrftTrxCatgInbound#, #ordPrftTrxCatgOutnbound#) = G.ORD_PRFT_TRX_CATG_CD (+)
            <!-- END   2018/12/12 Y.Matsui [QC#29587,ADD] -->
            <!-- END   2016/10/14 S.Fujita [QC#10281,ADD] -->
            <!-- START 2017/12/25 E.Kameishi [QC#20312,MOD] -->
            AND A.GLBL_CMPY_CD          = H.GLBL_CMPY_CD
            AND A.MDSE_CD               = H.MDSE_CD
            AND H.EZCANCELFLAG          = '0'
            <!-- END   2017/12/25 E.Kameishi [QC#20312,MOD] -->
<!-- START 2018/09/28 T.Ogura [QC#28526,ADD] -->
            AND A.GLBL_CMPY_CD          = SIL.GLBL_CMPY_CD(+)
            AND A.SVC_INV_LINE_PK       = SIL.SVC_INV_LINE_PK(+)
            AND SIL.EZCANCELFLAG(+)     = '0'

            AND SIL.GLBL_CMPY_CD        = SI.GLBL_CMPY_CD(+)
            AND SIL.SVC_INV_NUM         = SI.SVC_INV_NUM(+)
            AND SI.EZCANCELFLAG(+)      = '0'
<!-- END   2018/09/28 T.Ogura [QC#28526,ADD] -->
            <!-- START 2018/11/02 S.Ohki [QC#29059,ADD] -->
            AND D.GLBL_CMPY_CD          = OR_INV.GLBL_CMPY_CD(+)
            AND D.ORIG_INV_NUM          = OR_INV.INV_NUM(+)
            AND OR_INV.EZCANCELFLAG(+)  = '0'
            <!-- END 2018/11/02 S.Ohki [QC#29059,ADD] -->

            AND A.EZCANCELFLAG          = '0'
            AND D.EZCANCELFLAG          = '0'
            AND E.EZCANCELFLAG          = '0'
            AND F.EZCANCELFLAG (+)      = '0'
            AND G.EZCANCELFLAG (+)      = '0'
        ORDER BY
             A.INV_BOL_LINE_NUM
            ,A.INV_LINE_NUM
            ,A.INV_LINE_SUB_NUM
            ,A.INV_LINE_SUB_TRX_NUM
    </statement>

    <resultMap id="result.searchInvLine" class="NFCL3000_ACMsg">
        <result property="invBolLineNum_A1"             column="INV_BOL_LINE_NUM_A1"            javaType="EZDCStringItem" />
        <result property="invLineNum_A1"                column="INV_LINE_NUM_A1"                javaType="EZDCStringItem" />
        <result property="invLineSubNum_A1"             column="INV_LINE_SUB_NUM_A1"            javaType="EZDCStringItem" />
        <result property="invLineSubTrxNum_A1"          column="INV_LINE_SUB_TRX_NUM_A1"        javaType="EZDCStringItem" />
        <result property="mdseCd_A1"                    column="MDSE_CD_A1"                     javaType="EZDCStringItem" />
        <result property="mdseNm_A1"                    column="MDSE_NM_A1"                     javaType="EZDCStringItem" />
        <result property="pkgUomCd_A1"                  column="PKG_UOM_CD_A1"                  javaType="EZDCStringItem" />
        <result property="pkgUomNm_A1"                  column="PKG_UOM_NM_A1"                  javaType="EZDCStringItem" />
        <result property="shipQty_A1"                   column="SHIP_QTY_A1"                    javaType="EZDCStringItem" />
        <result property="dealNetUnitPrcAmt_A1"         column="DEAL_NET_UNIT_PRC_AMT_A1"       javaType="EZDCBigDecimalItem" />
        <result property="invLineDealNetAmt_A1"         column="INV_LINE_DEAL_NET_AMT_A1"       javaType="EZDCBigDecimalItem" />
        <result property="invLineDealTaxAmt_A1"         column="INV_LINE_DEAL_TAX_AMT_A1"       javaType="EZDCBigDecimalItem" />
        <result property="xxTotAmt_A1"                  column="XX_TOT_AMT_A1"                  javaType="EZDCBigDecimalItem" />
        <result property="cpoOrdNum_A1"                 column="CPO_ORD_NUM_A1"                 javaType="EZDCStringItem" />
        <result property="ordDt_A1"                     column="ORD_DT_A1"                      javaType="EZDCStringItem" />
        <result property="shipDt_A1"                    column="SHIP_DT_A1"                     javaType="EZDCStringItem" />
        <result property="shipFromInvtyLocCd_A1"        column="SHIP_FROM_INVTY_LOC_CD_A1"      javaType="EZDCStringItem" />
        <result property="taxPct_A1"                    column="TAX_PCT_A1"                     javaType="EZDCBigDecimalItem" />
        <result property="invErrMsgTxt_A1"              column="INV_ERR_MSG_TXT_A1"             javaType="EZDCStringItem" />
        <result property="invldValTxt_A1"               column="INVLD_VAL_TXT_A1"               javaType="EZDCStringItem" />
        <result property="trxCd_A1"                     column="TRX_CD_A1"                      javaType="EZDCStringItem" />
        <result property="trxRsnCd_A1"                  column="TRX_RSN_CD_A1"                  javaType="EZDCStringItem" />
        <result property="dsOrdPosnNum_A1"              column="DS_ORD_POSN_NUM_A1"             javaType="EZDCStringItem" />
        <result property="dsCpoLineNum_A1"              column="DS_CPO_LINE_NUM_A1"             javaType="EZDCStringItem" />
        <result property="dsCpoLineSubNum_A1"           column="DS_CPO_LINE_SUB_NUM_A1"         javaType="EZDCStringItem" />
        <result property="ordQty_A1"                    column="ORD_QTY_A1"                     javaType="EZDCBigDecimalItem" />
        <result property="crDrRsnCd_A1"                 column="CR_DR_RSN_CD_A1"                javaType="EZDCStringItem" />
        <result property="dsContrNum_A1"                column="DS_CONTR_NUM_A1"                javaType="EZDCStringItem" />
        <result property="dsContrSqNum_A1"              column="DS_CONTR_SQ_NUM_A1"             javaType="EZDCStringItem" />
        <result property="svcConfigMstrPk_A1"           column="SVC_CONFIG_MSTR_PK_A1"          javaType="EZDCBigDecimalItem" />
        <result property="mdlNm_A1"                     column="MDL_NM_A1"                      javaType="EZDCStringItem" />
        <result property="svcInvChrgTpCd_A1"            column="SVC_INV_CHRG_TP_CD_A1"          javaType="EZDCStringItem" />
        <result property="bllgPerFromDt_A1"             column="BLLG_PER_FROM_DT_A1"            javaType="EZDCStringItem" />
        <result property="bllgPerThruDt_A1"             column="BLLG_PER_THRU_DT_A1"            javaType="EZDCStringItem" />
        <result property="bllgCopyQty_A1"               column="BLLG_COPY_QTY_A1"               javaType="EZDCBigDecimalItem" />
        <result property="dsContrDtlPk_A1"              column="DS_CONTR_DTL_PK_A1"             javaType="EZDCBigDecimalItem" />
        <result property="manInvCratCmntTxt_A1"         column="MAN_INV_CRAT_CMNT_TXT_A1"       javaType="EZDCStringItem" />
        <result property="csmpContrNum_A1"              column="CSMP_CONTR_NUM_A1"              javaType="EZDCStringItem" />
        <result property="dlrRefNum_A1"                 column="DLR_REF_NUM_A1"                 javaType="EZDCStringItem" />
        <result property="funcCsmpCrAmt_A1"             column="FUNC_CSMP_CR_AMT_A1"            javaType="EZDCBigDecimalItem" />
        <result property="firstBllgAttrbValTxt_A1"      column="FIRST_BLLG_ATTRB_VAL_TXT_A1"    javaType="EZDCStringItem" />
        <result property="scdBllgAttrbValTxt_A1"        column="SCD_BLLG_ATTRB_VAL_TXT_A1"      javaType="EZDCStringItem" />
        <result property="thirdBllgAttrbValTxt_A1"      column="THIRD_BLLG_ATTRB_VAL_TXT_A1"    javaType="EZDCStringItem" />
        <result property="frthBllgAttrbValTxt_A1"       column="FRTH_BLLG_ATTRB_VAL_TXT_A1"     javaType="EZDCStringItem" />
        <result property="fifthBllgAttrbValTxt_A1"      column="FIFTH_BLLG_ATTRB_VAL_TXT_A1"    javaType="EZDCStringItem" />
        <result property="sixthBllgAttrbValTxt_A1"      column="SIXTH_BLLG_ATTRB_VAL_TXT_A1"    javaType="EZDCStringItem" />
        <result property="svcInvLinePk_A1"              column="SVC_INV_LINE_PK_A1"             javaType="EZDCStringItem" />
       <!-- START 2018/05/22 Y.Matsui [QC#21841,ADD] -->
       <result property="invLineCatgCd_A1"              column="INV_LINE_CATG_CD"               javaType="EZDCStringItem" />
       <!-- END   2018/05/22 Y.Matsui [QC#21841,ADD] -->
       <!-- START 2017/03/17 T.Murai [QC#14205,ADD] -->
       <result property="xxRecHistCratTs_A"             column="XX_REC_HIST_CRAT_TS"            javaType="EZDCStringItem" />
       <result property="xxRecHistCratByNm_A"           column="XX_REC_HIST_CRAT_BY_NM"         javaType="EZDCStringItem" />
       <result property="xxRecHistUpdTs_A"              column="XX_REC_HIST_UPD_TS"             javaType="EZDCStringItem" />
       <result property="xxRecHistUpdByNm_A"            column="XX_REC_HIST_UPD_BY_NM"          javaType="EZDCStringItem" />
       <result property="xxRecHistTblNm_A"              column="XX_REC_HIST_TBL_NM"             javaType="EZDCStringItem" />
       <!-- END   2017/03/17 T.Murai [QC#14205,ADD] -->
<!-- START 2018/09/28 T.Ogura [QC#28526,ADD] -->
       <result property="ordCustUomQty_A1"              column="ORD_CUST_UOM_QTY_A1"            javaType="EZDCBigDecimalItem" />
       <result property="invDplyQty_A1"                 column="INV_DPLY_QTY_A1"                javaType="EZDCBigDecimalItem" />
       <result property="xxDplyCtrlFlg_A1"              column="FSR_INV_FLG_A1"                 javaType="EZDCStringItem" />
<!-- END   2018/09/28 T.Ogura [QC#28526,ADD] -->
<!-- START 2018/10/24 S.Takami [QC#27069, ADD] -->
       <result property="svcMachMstrPk_A1"              column="SVC_MACH_MSTR_PK"               javaType="EZDCBigDecimalItem" />
       <result property="svcConfigMstrPk_A1"            column="SVC_CONFIG_MSTR_PK"             javaType="EZDCBigDecimalItem" />
       <result property="mdlId_A1"                      column="MDL_ID"                         javaType="EZDCBigDecimalItem" />
<!-- END   2018/10/24 S.Takami [QC#27069, ADD] -->
<!-- START 2019/05/31 S.Takami [QC#50633,ADD] -->
        <result property="mdseCd_AB"                    column="MDSE_CD_A1"                     javaType="EZDCStringItem" />
<!-- END 2019/05/31 S.Takami [QC#50633,ADD] -->
        <!-- START 2019/08/07 S.Takami [QC#52453,ADD] -->
        <result property="cpoDtlLineNum_A1"             column="CPO_DTL_LINE_NUM_A1"            javaType="EZDCStringItem" />
        <result property="cpoDtlLineSubNum_A1"          column="CPO_DTL_LINE_SUB_NUM_A1"        javaType="EZDCStringItem" />
        <result property="stkStsCd_A1"                  column="STK_STS_CD_A1"                  javaType="EZDCStringItem" />
        <result property="coaAfflCd_A1"                 column="COA_AFFL_CD_A1"                 javaType="EZDCStringItem" />
        <result property="prcCatgCd_A1"                 column="PRC_CATG_CD_A1"                 javaType="EZDCStringItem" />
        <result property="dsOrdLineCatgCd_A1"           column="DS_ORD_LINE_CATG_CD_A1"         javaType="EZDCStringItem" />
        <result property="custIssPoDt_A1"               column="CUST_ISS_PO_DT_A1"              javaType="EZDCStringItem" />
        <result property="origOrCustMdseCd_A1"          column="ORIG_OR_CUST_MDSE_CD_A1"        javaType="EZDCStringItem" />
        <result property="csmpInvProcStsCd_A1"          column="CSMP_INV_PROC_STS_CD_A1"        javaType="EZDCStringItem" />
        <!-- END 2019/08/07 S.Takami [QC#52453,ADD] -->
    </resultMap>

    <statement id="searchInvSlsCr" parameterClass="Map" resultMap="result.searchInvSlsCr">
        SELECT
             A.INV_BOL_LINE_NUM             AS INV_BOL_LINE_NUM_B1
            ,A.INV_LINE_NUM                 AS INV_LINE_NUM_B1
            ,A.INV_LINE_SUB_NUM             AS INV_LINE_SUB_NUM_B1
            ,A.INV_TRX_LINE_SUB_NUM         AS INV_TRX_LINE_SUB_NUM_B1
            ,A.MDSE_CD                      AS MDSE_CD_B1
            ,A.INV_LINE_SPL_PCT             AS INV_LINE_SPL_PCT_B2
            ,B.TOC_NM                       AS TOC_NM_B1
            ,A.SLS_REP_TOC_CD               AS SLS_REP_TOC_CD_B1
            ,A.SLS_REP_CR_PCT               AS SLS_REP_CR_PCT_B2
            <!-- START 2016/07/11 S.Fujita [QC#10160,MOD] -->
            ,(CASE WHEN F.INV_TP_CD = #cm# THEN NVL(A.DEAL_SLS_CR_AMT, 0) * -1
                   ELSE NVL(A.DEAL_SLS_CR_AMT, 0) END)                 AS DEAL_SLS_CR_AMT_B1
            ,(CASE WHEN F.INV_TP_CD = #cm# THEN NVL(D.INV_LINE_DEAL_NET_AMT, 0) * -1
                   ELSE NVL(D.INV_LINE_DEAL_NET_AMT, 0) END)           AS XX_TOT_AMT_B1
            <!-- END   2016/07/11 S.Fujita [QC#10160,MOD] -->
            ,A.SLS_REP_BR_CD                AS SLS_REP_BR_CD_B1
            ,A.MAN_INV_CRAT_CMNT_TXT        AS MAN_INV_CRAT_CMNT_TXT_B1
            ,A.DFRD_ACCTG_RULE_CD           AS DFRD_ACCTG_RULE_CD_B1
            ,A.DFRD_ACCTG_RULE_DURN_AOT     AS DFRD_ACCTG_RULE_DURN_AOT_B1
            ,A.DURN_START_DT                AS DURN_START_DT_B1
            ,A.INV_LINE_SPL_TP_CD           AS INV_LINE_SPL_TP_CD_B1
            ,C.INV_ERR_MSG_TXT              AS INV_ERR_MSG_TXT_B1
            ,C.INVLD_VAL_TXT                AS INVLD_VAL_TXT_B1
            ,A.DS_INV_SLS_CR_PK             AS DS_INV_SLS_CR_PK_B1
            ,LPAD(ROW_NUMBER() OVER (ORDER BY 
                                    	 A.INV_BOL_LINE_NUM
                                    	,A.INV_LINE_NUM
                                    	,A.INV_LINE_SUB_NUM
                                    	,A.INV_TRX_LINE_SUB_NUM
                                    	,A.DS_INV_SLS_CR_PK),5,0) 	AS XX_LINE_NUM_B1
            <!-- START 2016/05/24 S.Fujita [QC#8522,ADD] -->
            ,E.DFRD_REV_FLG                 AS DFRD_REV_FLG_B1
            ,E.FIX_DURN_FLG                 AS FIX_DURN_FLG_B1
            <!-- END   2016/05/24 S.Fujita [QC#8522,ADD] -->
            ,A.TRX_CD                       AS TRX_CD_B1
            ,A.TRX_RSN_CD                   AS TRX_RSN_CD_B1
            <!-- START 2016/07/14 S.Fujita [QC#11157,ADD] -->
            ,SP.PSN_NUM                     AS PSN_NUM_B1
            <!-- END   2016/07/14 S.Fujita [QC#11157,ADD] -->
            <!-- START 2016/08/01 S.Fujita [QC#10148,ADD] -->
            ,CB.COA_BR_NM                   AS COA_BR_NM_B1
            <!-- END   2016/08/01 S.Fujita [QC#10148,ADD] -->

            <!-- START 2016/09/26 S.Fujita [QC#13362,MOD] -->
            ,A.DEAL_DFRD_BAL_AMT            AS DEAL_DFRD_BAL_AMT_B1
            ,A.FUNC_DFRD_BAL_AMT            AS FUNC_DFRD_BAL_AMT_B1
            ,A.REV_RECOG_CNT                AS REV_RECOG_CNT_B1
            ,A.FIRST_REV_RECOG_DT           AS FIRST_REV_RECOG_DT_B1
            ,A.REV_RECOG_PROC_STS_CD        AS REV_RECOG_PROC_STS_CD_B1
            ,A.DS_CPO_CONFIG_PK             AS DS_CPO_CONFIG_PK_B1
            ,A.SLS_REP_ROLE_TP_CD           AS SLS_REP_ROLE_TP_CD_B1
            ,A.CPLT_REV_RECOG_DT            AS CPLT_REV_RECOG_DT_B1

            ,A.COA_CMPY_CD                  AS COA_CMPY_CD_B1
            ,A.COA_BR_CD                    AS COA_BR_CD_B1
            ,A.COA_CC_CD                    AS COA_CC_CD_B1
            ,A.COA_ACCT_CD                  AS COA_ACCT_CD_B1
            ,A.COA_PROD_CD                  AS COA_PROD_CD_B1
            ,A.COA_CH_CD                    AS COA_CH_CD_B1
            ,A.COA_AFFL_CD                  AS COA_AFFL_CD_B1
            ,A.COA_PROJ_CD                  AS COA_PROJ_CD_B1
            ,A.COA_EXTN_CD                  AS COA_EXTN_CD_B1
            <!-- END   2016/09/26 S.Fujita [QC#13362,MOD] -->
            ,CASE WHEN A.INV_LINE_SPL_TP_CD = #splTp40# OR A.INV_LINE_SPL_TP_CD = #splTp50#
                  THEN 'Y'
                  ELSE 'N' 
             END                            AS XX_HLD_FLG_B1
            <!-- START 2017/03/17 T.Murai [QC#14205,ADD] -->
            ,A.EZINTIME                     AS XX_REC_HIST_CRAT_TS
            ,A.EZINUSERID                   AS XX_REC_HIST_CRAT_BY_NM
            ,A.EZUPTIME                     AS XX_REC_HIST_UPD_TS
            ,A.EZUPUSERID                   AS XX_REC_HIST_UPD_BY_NM
            ,A.EZTABLEID                    AS XX_REC_HIST_TBL_NM
            <!-- END   2017/03/17 T.Murai [QC#14205,ADD] -->
            <!-- START 2017/12/25 E.Kameishi [QC#20312,ADD] -->
            ,A.NEXT_REV_RECOG_DT             AS NEXT_REV_RECOG_DT_B1
            ,A.DEAL_SCHD_REV_AMT             AS DEAL_SCHD_REV_AMT_B1
            <!-- END 2017/12/25 E.Kameishi [QC#20312,ADD] -->
        FROM
             DS_INV_SLS_CR      A
            ,TOC                B
            ,DS_INV_SLS_CR_ERR  C
            ,INV_LINE           D
            <!-- START 2016/05/24 S.Fujita [QC#8522,ADD] -->
            ,DFRD_ACCTG_RULE    E
            <!-- END   2016/05/24 S.Fujita [QC#8522,ADD] -->
            <!-- START 2016/07/11 S.Fujita [QC#10160,ADD] -->
            ,INV                F
            <!-- END   2016/07/11 S.Fujita [QC#10160,ADD] -->
            <!-- START 2016/07/14 S.Fujita [QC#11157,ADD] -->
            ,ORG_FUNC_ASG       OFA
            ,S21_PSN            SP
            <!-- END   2016/07/14 S.Fujita [QC#11157,ADD] -->
            <!-- START 2016/08/01 S.Fujita [QC#10148,ADD] -->
            ,COA_BR             CB
            <!-- END   2016/08/01 S.Fujita [QC#10148,ADD] -->
        WHERE
                A.GLBL_CMPY_CD          = #glblCmpyCd#
            AND A.INV_NUM               = #invNum#
            AND A.GLBL_CMPY_CD          = B.GLBL_CMPY_CD
            AND A.SLS_REP_TOC_CD        = B.TOC_CD
            AND A.GLBL_CMPY_CD          = C.GLBL_CMPY_CD (+)
            AND A.INV_NUM               = C.INV_NUM (+)
            AND A.INV_BOL_LINE_NUM      = C.INV_BOL_LINE_NUM (+)
            AND A.INV_LINE_NUM          = C.INV_LINE_NUM (+)
            AND A.INV_LINE_SUB_NUM      = C.INV_LINE_SUB_NUM (+)
            AND A.INV_TRX_LINE_SUB_NUM  = C.INV_TRX_LINE_SUB_NUM (+)
            AND A.EZCANCELFLAG          = '0'
            AND B.EZCANCELFLAG          = '0'
            AND C.EZCANCELFLAG (+)      = '0'

            AND A.INV_NUM               = D.INV_NUM
            AND A.INV_BOL_LINE_NUM      = D.INV_BOL_LINE_NUM
            AND A.INV_LINE_NUM          = D.INV_LINE_NUM
            AND A.INV_LINE_SUB_NUM      = D.INV_LINE_SUB_NUM
            AND A.INV_TRX_LINE_SUB_NUM  = D.INV_LINE_SUB_TRX_NUM
            AND D.EZCANCELFLAG          = '0'
            <!-- START 2016/05/24 S.Fujita [QC#8522,ADD] -->
            AND A.GLBL_CMPY_CD          = E.GLBL_CMPY_CD (+)
            AND A.DFRD_ACCTG_RULE_CD    = E.DFRD_ACCTG_RULE_CD (+)
            AND E.EZCANCELFLAG (+)      = '0'
            <!-- END   2016/05/24 S.Fujita [QC#8522,ADD] -->
            <!-- START 2016/07/11 S.Fujita [QC#10160,ADD] -->
            AND A.GLBL_CMPY_CD          = F.GLBL_CMPY_CD
            AND A.INV_NUM               = F.INV_NUM
            AND F.EZCANCELFLAG (+)      = '0'
            <!-- END   2016/07/11 S.Fujita [QC#10160,ADD] -->
            <!-- START 2016/07/14 S.Fujita [QC#11157,ADD] -->
            AND A.GLBL_CMPY_CD          = OFA.GLBL_CMPY_CD
            AND A.SLS_REP_TOC_CD        = OFA.TOC_CD
            AND OFA.EZCANCELFLAG        = '0'
            AND OFA.GLBL_CMPY_CD        = SP.GLBL_CMPY_CD
            AND OFA.PSN_CD              = SP.PSN_CD
            AND SP.EZCANCELFLAG         = '0'
            <!-- END   2016/07/14 S.Fujita [QC#11157,ADD] -->
            <!-- START 2016/08/01 S.Fujita [QC#10148,ADD] -->
            AND B.GLBL_CMPY_CD          = CB.GLBL_CMPY_CD (+)
            AND B.COA_BR_CD             = CB.COA_BR_CD (+)
            AND CB.EZCANCELFLAG (+)     = '0'
            <!-- END   2016/08/01 S.Fujita [QC#10148,ADD] -->
        ORDER BY
             A.INV_BOL_LINE_NUM
            ,A.INV_LINE_NUM
            ,A.INV_LINE_SUB_NUM
            ,A.INV_TRX_LINE_SUB_NUM
            ,A.DS_INV_SLS_CR_PK
    </statement>

    <resultMap id="result.searchInvSlsCr" class="NFCL3000_BCMsg">
        <result property="invBolLineNum_B1"             column="INV_BOL_LINE_NUM_B1"            javaType="EZDCStringItem" />
        <result property="invLineNum_B1"                column="INV_LINE_NUM_B1"                javaType="EZDCStringItem" />
        <result property="invLineSubNum_B1"             column="INV_LINE_SUB_NUM_B1"            javaType="EZDCStringItem" />
        <result property="invTrxLineSubNum_B1"          column="INV_TRX_LINE_SUB_NUM_B1"        javaType="EZDCStringItem" />
        <result property="mdseCd_B1"                    column="MDSE_CD_B1"                     javaType="EZDCStringItem" />
        <result property="invLineSplPct_B2"             column="INV_LINE_SPL_PCT_B2"            javaType="EZDCBigDecimalItem" />
        <result property="tocNm_B1"                     column="TOC_NM_B1"                      javaType="EZDCStringItem" />
        <result property="slsRepTocCd_B1"               column="SLS_REP_TOC_CD_B1"              javaType="EZDCStringItem" />
        <result property="slsRepCrPct_B2"               column="SLS_REP_CR_PCT_B2"              javaType="EZDCBigDecimalItem" />
        <result property="dealSlsCrAmt_B1"              column="DEAL_SLS_CR_AMT_B1"             javaType="EZDCBigDecimalItem" />
        <result property="slsRepBrCd_B1"                column="SLS_REP_BR_CD_B1"               javaType="EZDCStringItem" />
        <result property="manInvCratCmntTxt_B1"         column="MAN_INV_CRAT_CMNT_TXT_B1"       javaType="EZDCStringItem" />
        <result property="dfrdAcctgRuleCd_B1"           column="DFRD_ACCTG_RULE_CD_B1"          javaType="EZDCStringItem" />
        <result property="dfrdAcctgRuleDurnAot_B1"      column="DFRD_ACCTG_RULE_DURN_AOT_B1"    javaType="EZDCBigDecimalItem" />
        <result property="durnStartDt_B1"               column="DURN_START_DT_B1"               javaType="EZDCStringItem" />
        <result property="invLineSplTpCd_B1"            column="INV_LINE_SPL_TP_CD_B1"          javaType="EZDCStringItem" />
        <result property="invErrMsgTxt_B1"              column="INV_ERR_MSG_TXT_B1"             javaType="EZDCStringItem" />
        <result property="invldValTxt_B1"               column="INVLD_VAL_TXT_B1"               javaType="EZDCStringItem" />

        <result property="xxTotAmt_B1"                  column="XX_TOT_AMT_B1"                  javaType="EZDCBigDecimalItem" />
        <result property="dsInvSlsCrPk_B1"              column="DS_INV_SLS_CR_PK_B1"            javaType="EZDCBigDecimalItem" />
        <result property="xxLineNum_B1"                 column="XX_LINE_NUM_B1"                 javaType="EZDCStringItem" />
        <!-- START 2016/05/24 S.Fujita [QC#8522,ADD] -->
        <result property="dfrdRevFlg_B1"                column="DFRD_REV_FLG_B1"                javaType="EZDCStringItem" />
        <result property="fixDurnFlg_B1"                column="FIX_DURN_FLG_B1"                javaType="EZDCStringItem" />
        <!-- END   2016/05/24 S.Fujita [QC#8522,ADD] -->
        <result property="trxCd_B1"                     column="TRX_CD_B1"                      javaType="EZDCStringItem" />
        <result property="trxRsnCd_B1"                  column="TRX_RSN_CD_B1"                  javaType="EZDCStringItem" />
        <!-- START 2016/07/14 S.Fujita [QC#11157,ADD] -->
        <result property="psnNum_B1"                    column="PSN_NUM_B1"                     javaType="EZDCStringItem" />
        <!-- END   2016/07/14 S.Fujita [QC#11157,ADD] -->
        <!-- START 2016/08/01 S.Fujita [QC#10148,ADD] -->
        <result property="coaBrNm_B1"                   column="COA_BR_NM_B1"                   javaType="EZDCStringItem" />
        <!-- END   2016/08/01 S.Fujita [QC#10148,ADD] -->

        <!-- START 2016/09/26 S.Fujita [QC#13362,MOD] -->
        <result property="dealDfrdBalAmt_B1"            column="DEAL_DFRD_BAL_AMT_B1"           javaType="EZDCBigDecimalItem" />
        <result property="funcDfrdBalAmt_B1"            column="FUNC_DFRD_BAL_AMT_B1"           javaType="EZDCBigDecimalItem" />
        <result property="revRecogCnt_B1"               column="REV_RECOG_CNT_B1"               javaType="EZDCBigDecimalItem" />
        <result property="firstRevRecogDt_B1"           column="FIRST_REV_RECOG_DT_B1"          javaType="EZDCStringItem" />
        <result property="revRecogProcStsCd_B1"         column="REV_RECOG_PROC_STS_CD_B1"       javaType="EZDCStringItem" />
        <result property="dsCpoConfigPk_B1"             column="DS_CPO_CONFIG_PK_B1"            javaType="EZDCBigDecimalItem" />
        <result property="slsRepRoleTpCd_B1"            column="SLS_REP_ROLE_TP_CD_B1"          javaType="EZDCStringItem" />
        <result property="cpltRevRecogDt_B1"            column="CPLT_REV_RECOG_DT_B1"           javaType="EZDCStringItem" />

        <result property="coaCmpyCd_B1"                 column="COA_CMPY_CD_B1"                 javaType="EZDCStringItem" />
        <result property="coaBrCd_B1"                   column="COA_BR_CD_B1"                   javaType="EZDCStringItem" />
        <result property="coaCcCd_B1"                   column="COA_CC_CD_B1"                   javaType="EZDCStringItem" />
        <result property="coaAcctCd_B1"                 column="COA_ACCT_CD_B1"                 javaType="EZDCStringItem" />
        <result property="coaProdCd_B1"                 column="COA_PROD_CD_B1"                 javaType="EZDCStringItem" />
        <result property="coaChCd_B1"                   column="COA_CH_CD_B1"                   javaType="EZDCStringItem" />
        <result property="coaAfflCd_B1"                 column="COA_AFFL_CD_B1"                 javaType="EZDCStringItem" />
        <result property="coaProjCd_B1"                 column="COA_PROJ_CD_B1"                 javaType="EZDCStringItem" />
        <result property="coaExtnCd_B1"                 column="COA_EXTN_CD_B1"                 javaType="EZDCStringItem" />
        <result property="xxHldFlg_B1"                  column="XX_HLD_FLG_B1"                  javaType="EZDCStringItem" />
        <!-- END   2016/09/26 S.Fujita [QC#13362,MOD] -->
       <!-- START 2017/03/17 T.Murai [QC#14205,ADD] -->
       <result property="xxRecHistCratTs_B"             column="XX_REC_HIST_CRAT_TS"            javaType="EZDCStringItem" />
       <result property="xxRecHistCratByNm_B"           column="XX_REC_HIST_CRAT_BY_NM"         javaType="EZDCStringItem" />
       <result property="xxRecHistUpdTs_B"              column="XX_REC_HIST_UPD_TS"             javaType="EZDCStringItem" />
       <result property="xxRecHistUpdByNm_B"            column="XX_REC_HIST_UPD_BY_NM"          javaType="EZDCStringItem" />
       <result property="xxRecHistTblNm_B"              column="XX_REC_HIST_TBL_NM"             javaType="EZDCStringItem" />
       <!-- END   2017/03/17 T.Murai [QC#14205,ADD] -->
       <!-- START 2017/12/25 E.Kameishi [QC#20312,ADD] -->
        <result property="nextRevRecogDt_B1"           column="NEXT_REV_RECOG_DT_B1"          javaType="EZDCStringItem" />
        <result property="dealSchdRevAmt_B1"           column="DEAL_SCHD_REV_AMT_B1"          javaType="EZDCBigDecimalItem" />
       <!-- END 2017/12/25 E.Kameishi [QC#20312,ADD] -->
    </resultMap>

    <statement id="searchInvAcctDist_Summary" parameterClass="Map" resultMap="result.searchInvAcctDist">
        SELECT
            X.*
        FROM
            (
                SELECT
                     ''                                 AS INV_BOL_LINE_NUM_C1
                    ,''                                 AS INV_LINE_NUM_C1
                    ,''                                 AS INV_LINE_SUB_NUM_C1
                    ,''                                 AS INV_LINE_SUB_TRX_NUM_C1
                    ,A.DR_CR_TP_CD                      AS DR_CR_TP_CD_C1
                    ,''                                 AS AJE_INV_ACCT_CLS_CD_C1
                    ,A.AJE_COA_CMPY_CD                  AS AJE_COA_CMPY_CD_C1
                    ,A.AJE_COA_BR_CD                    AS AJE_COA_BR_CD_C1
                    ,A.AJE_COA_CC_CD                    AS AJE_COA_CC_CD_C1
                    ,A.AJE_COA_ACCT_CD                  AS AJE_COA_ACCT_CD_C1
                    ,A.AJE_COA_PROD_CD                  AS AJE_COA_PROD_CD_C1
                    ,A.AJE_COA_CH_CD                    AS AJE_COA_CH_CD_C1
                    ,A.AJE_COA_AFFL_CD                  AS AJE_COA_AFFL_CD_C1
                    ,A.AJE_COA_PROJ_CD                  AS AJE_COA_PROJ_CD_C1
                    ,A.AJE_COA_EXTN_CD                  AS AJE_COA_EXTN_CD_C1
                    ,SUM(NVL(A.JRNL_DEAL_AMT,0))        AS JRNL_DEAL_AMT_C1
                    ,NULL                               AS JRNL_DEAL_AMT_C2
<!--
                    ,SUM(NVL(A.AJE_INV_ACCT_DIST_PCT,0)) AS AJE_INV_ACCT_DIST_PCT_C1
-->
                    ,NULL                               AS AJE_INV_ACCT_DIST_PCT_C1
                    ,MAX(A.GL_DT)                       AS GL_DT_C1
                    ,MAX(A.JRNL_CRAT_DT)                AS JRNL_CRAT_DT_C1
                    <!-- START 2016/09/26 S.Fujita [QC#13362,MOD] -->
                    <!-- 
                    ,MAX(X.INV_ERR_MSG_TXT)             AS INV_ERR_MSG_TXT_C1
                    ,MAX(X.INVLD_VAL_TXT)               AS INVLD_VAL_TXT_C1
                    -->
                    ,X.INV_ERR_MSG_TXT                  AS INV_ERR_MSG_TXT_C1
                    ,X.INVLD_VAL_TXT                    AS INVLD_VAL_TXT_C1
                    <!-- END   2016/09/26 S.Fujita [QC#13362,MOD] -->

                    ,0                                  AS AJE_INV_ACCT_DIST_PK_C1
                    ,''                                 AS PROC_DT_C1
                    ,''                                 AS DEAL_CCY_CD_C1
                    ,''                                 AS FUNC_CCY_CD_C1
                    ,0                                  AS DS_INV_SLS_CR_PK_C1
                    ,0                                  AS AJE_OM_INTFC_PK_C1
                    ,''                                 AS PROC_STS_CD_C1
                    ,''                                 AS DFRD_REV_GL_STRG_FLG_C1
                    ,''                                 AS SYS_SRC_CD_C1
                    ,''                                 AS SYS_SRC_NM_C1
                    ,''                                 AS TRX_CD_C1
                    ,''                                 AS TRX_NM_C1
                    ,''                                 AS TRX_RSN_CD_C1
                    ,''                                 AS TRX_RSN_NM_C1
                    ,''                                 AS AJE_PTRN_IND_TP_CD_01
                    ,''                                 AS AJE_PTRN_IND_TP_NM_01
                    ,''                                 AS AJE_PTRN_ACTL_CD_01
                    ,''                                 AS AJE_PTRN_ACTL_NM_01
                    ,''                                 AS AJE_PTRN_IND_TP_CD_02
                    ,''                                 AS AJE_PTRN_IND_TP_NM_02
                    ,''                                 AS AJE_PTRN_ACTL_CD_02
                    ,''                                 AS AJE_PTRN_ACTL_NM_02
                    ,''                                 AS AJE_PTRN_IND_TP_CD_03
                    ,''                                 AS AJE_PTRN_IND_TP_NM_03
                    ,''                                 AS AJE_PTRN_ACTL_CD_03
                    ,''                                 AS AJE_PTRN_ACTL_NM_03
                    ,''                                 AS JRNL_SRC_CD_C1
                    ,''                                 AS JRNL_SRC_NM_C1
                    ,''                                 AS JRNL_CATG_CD_C1
                    ,''                                 AS JRNL_CATG_NM_C1
                    ,''                                 AS AJE_LINE_IDX_NUM_C1
                    ,''                                 AS AJE_LINE_IDX_DESC_TXT_C1
                    ,X.AJE_INV_ACCT_DIST_ERR_PK         AS AJE_INV_ACCT_DIST_ERR_PK_C1

                    <!-- START 2017/03/17 T.Murai [QC#14205,ADD] -->
                    ,NULL                               AS XX_REC_HIST_CRAT_TS
                    ,NULL                               AS XX_REC_HIST_CRAT_BY_NM
                    ,NULL                               AS XX_REC_HIST_UPD_TS
                    ,NULL                               AS XX_REC_HIST_UPD_BY_NM
                    ,A.EZTABLEID                        AS XX_REC_HIST_TBL_NM
                    <!-- END   2017/03/17 T.Murai [QC#14205,ADD] -->
                FROM
                     AJE_INV_ACCT_DIST      A
                    ,(
                        SELECT
                            <!-- START 2016/09/26 S.Fujita [QC#13362,MOD] -->
                            <!-- 
                             B.INV_NUM
                            ,B.INV_BOL_LINE_NUM
                            ,B.INV_LINE_NUM
                            ,B.INV_LINE_SUB_NUM
                            ,B.INV_TRX_LINE_SUB_NUM
                            ,B.AJE_INV_ACCT_DIST_SQ_NUM
                            ,MAX(B.INV_ERR_MSG_TXT) AS INV_ERR_MSG_TXT
                            ,MAX(B.INVLD_VAL_TXT) AS INVLD_VAL_TXT
                            ,MAX(B.AJE_INV_ACCT_DIST_ERR_PK) AS AJE_INV_ACCT_DIST_ERR_PK
                            -->
                             B.AJE_INV_ACCT_DIST_PK
                            ,B.INV_ERR_MSG_TXT
                            ,B.INVLD_VAL_TXT
                            ,B.AJE_INV_ACCT_DIST_ERR_PK
                            <!-- END   2016/09/26 S.Fujita [QC#13362,MOD] -->
                        FROM
                            AJE_INV_ACCT_DIST_ERR B
                        WHERE
                                B.GLBL_CMPY_CD  = #glblCmpyCd#
                            AND B.EZCANCELFLAG  = '0'
                        <!-- START 2016/09/26 S.Fujita [QC#13362,DEL] -->
                        <!-- 
                        GROUP BY
                             B.INV_NUM
                            ,B.INV_BOL_LINE_NUM
                            ,B.INV_LINE_NUM
                            ,B.INV_LINE_SUB_NUM
                            ,B.INV_TRX_LINE_SUB_NUM
                            ,B.AJE_INV_ACCT_DIST_SQ_NUM
                        -->
                        <!-- END   2016/09/26 S.Fujita [QC#13362,DEL] -->
                     ) X
                WHERE
                        A.GLBL_CMPY_CD          = #glblCmpyCd#
                    AND A.INV_NUM               = #invNum#
                    <!-- START 2016/09/26 S.Fujita [QC#13362,MOD] -->
                    <!-- 
                    AND A.INV_NUM               = X.INV_NUM (+)
                    AND A.INV_BOL_LINE_NUM      = X.INV_BOL_LINE_NUM (+)
                    AND A.INV_LINE_NUM          = X.INV_LINE_NUM (+)
                    AND A.INV_LINE_SUB_NUM      = X.INV_LINE_SUB_NUM (+)
                    AND A.INV_LINE_SUB_TRX_NUM  = X.INV_TRX_LINE_SUB_NUM (+)
                    AND A.AJE_INV_ACCT_DIST_SQ_NUM = X.AJE_INV_ACCT_DIST_SQ_NUM (+)
                    -->
                    AND A.AJE_INV_ACCT_DIST_PK  = X.AJE_INV_ACCT_DIST_PK (+)
                    <!-- END   2016/09/26 S.Fujita [QC#13362,MOD] -->
                    AND A.EZCANCELFLAG          = '0'
                    AND A.DR_CR_TP_CD           = #drCrtpCd_D#
                GROUP BY
                     A.DR_CR_TP_CD
                    ,A.AJE_COA_CMPY_CD
                    ,A.AJE_COA_BR_CD
                    ,A.AJE_COA_CC_CD
                    ,A.AJE_COA_ACCT_CD
                    ,A.AJE_COA_PROD_CD
                    ,A.AJE_COA_CH_CD
                    ,A.AJE_COA_AFFL_CD
                    ,A.AJE_COA_PROJ_CD
                    ,A.AJE_COA_EXTN_CD
                UNION
                SELECT
                     A.INV_BOL_LINE_NUM             AS INV_BOL_LINE_NUM_C1
                    ,A.INV_LINE_NUM                 AS INV_LINE_NUM_C1
                    ,A.INV_LINE_SUB_NUM             AS INV_LINE_SUB_NUM_C1
                    ,A.INV_LINE_SUB_TRX_NUM         AS INV_LINE_SUB_TRX_NUM_C1
                    ,A.DR_CR_TP_CD                  AS DR_CR_TP_CD_C1
                    ,A.AJE_INV_ACCT_CLS_CD          AS AJE_INV_ACCT_CLS_CD_C1
                    ,A.AJE_COA_CMPY_CD              AS AJE_COA_CMPY_CD_C1
                    ,A.AJE_COA_BR_CD                AS AJE_COA_BR_CD_C1
                    ,A.AJE_COA_CC_CD                AS AJE_COA_CC_CD_C1
                    ,A.AJE_COA_ACCT_CD              AS AJE_COA_ACCT_CD_C1
                    ,A.AJE_COA_PROD_CD              AS AJE_COA_PROD_CD_C1
                    ,A.AJE_COA_CH_CD                AS AJE_COA_CH_CD_C1
                    ,A.AJE_COA_AFFL_CD              AS AJE_COA_AFFL_CD_C1
                    ,A.AJE_COA_PROJ_CD              AS AJE_COA_PROJ_CD_C1
                    ,A.AJE_COA_EXTN_CD              AS AJE_COA_EXTN_CD_C1
                    ,NULL                           AS JRNL_DEAL_AMT_C1
                    ,NVL(A.JRNL_DEAL_AMT,0)         AS JRNL_DEAL_AMT_C2
                    ,A.AJE_INV_ACCT_DIST_PCT        AS AJE_INV_ACCT_DIST_PCT_C1
                    ,A.GL_DT                        AS GL_DT_C1
                    ,A.JRNL_CRAT_DT                 AS JRNL_CRAT_DT_C1
                    ,X.INV_ERR_MSG_TXT              AS INV_ERR_MSG_TXT_C1
                    ,X.INVLD_VAL_TXT                AS INVLD_VAL_TXT_C1

                    ,A.AJE_INV_ACCT_DIST_PK         AS AJE_INV_ACCT_DIST_PK_C1
                    ,A.PROC_DT                      AS PROC_DT_C1
                    ,A.DEAL_CCY_CD                  AS DEAL_CCY_CD_C1
                    ,A.FUNC_CCY_CD                  AS FUNC_CCY_CD_C1
                    ,A.DS_INV_SLS_CR_PK             AS DS_INV_SLS_CR_PK_C1
                    ,A.AJE_OM_INTFC_PK              AS AJE_OM_INTFC_PK_C1
                    ,A.PROC_STS_CD                  AS PROC_STS_CD_C1
                    ,A.DFRD_REV_GL_STRG_FLG         AS DFRD_REV_GL_STRG_FLG_C1
                    ,A.SYS_SRC_CD                   AS SYS_SRC_CD_C1
                    ,A.SYS_SRC_NM                   AS SYS_SRC_NM_C1
                    ,A.TRX_CD                       AS TRX_CD_C1
                    ,A.TRX_NM                       AS TRX_NM_C1
                    ,A.TRX_RSN_CD                   AS TRX_RSN_CD_C1
                    ,A.TRX_RSN_NM                   AS TRX_RSN_NM_C1
                    ,A.AJE_PTRN_IND_TP_CD_01        AS AJE_PTRN_IND_TP_CD_01
                    ,A.AJE_PTRN_IND_TP_NM_01        AS AJE_PTRN_IND_TP_NM_01
                    ,A.AJE_PTRN_ACTL_CD_01          AS AJE_PTRN_ACTL_CD_01
                    ,A.AJE_PTRN_ACTL_NM_01          AS AJE_PTRN_ACTL_NM_01
                    ,A.AJE_PTRN_IND_TP_CD_02        AS AJE_PTRN_IND_TP_CD_02
                    ,A.AJE_PTRN_IND_TP_NM_02        AS AJE_PTRN_IND_TP_NM_02
                    ,A.AJE_PTRN_ACTL_CD_02          AS AJE_PTRN_ACTL_CD_02
                    ,A.AJE_PTRN_ACTL_NM_02          AS AJE_PTRN_ACTL_NM_02
                    ,A.AJE_PTRN_IND_TP_CD_03        AS AJE_PTRN_IND_TP_CD_03
                    ,A.AJE_PTRN_IND_TP_NM_03        AS AJE_PTRN_IND_TP_NM_03
                    ,A.AJE_PTRN_ACTL_CD_03          AS AJE_PTRN_ACTL_CD_03
                    ,A.AJE_PTRN_ACTL_NM_03          AS AJE_PTRN_ACTL_NM_03
                    ,A.JRNL_SRC_CD                  AS JRNL_SRC_CD_C1
                    ,A.JRNL_SRC_NM                  AS JRNL_SRC_NM_C1
                    ,A.JRNL_CATG_CD                 AS JRNL_CATG_CD_C1
                    ,A.JRNL_CATG_NM                 AS JRNL_CATG_NM_C1
                    ,A.AJE_LINE_IDX_NUM             AS AJE_LINE_IDX_NUM_C1
                    ,A.AJE_LINE_IDX_DESC_TXT        AS AJE_LINE_IDX_DESC_TXT_C1
                    ,X.AJE_INV_ACCT_DIST_ERR_PK     AS AJE_INV_ACCT_DIST_ERR_PK_C1

                    <!-- START 2017/03/17 T.Murai [QC#14205,ADD] -->
                    ,A.EZINTIME                     AS XX_REC_HIST_CRAT_TS
                    ,A.EZINUSERID                   AS XX_REC_HIST_CRAT_BY_NM
                    ,A.EZUPTIME                     AS XX_REC_HIST_UPD_TS
                    ,A.EZUPUSERID                   AS XX_REC_HIST_UPD_BY_NM
                    ,A.EZTABLEID                    AS XX_REC_HIST_TBL_NM
                    <!-- END   2017/03/17 T.Murai [QC#14205,ADD] -->
                FROM
                     AJE_INV_ACCT_DIST      A
                    ,(
                        SELECT
                            <!-- START 2016/09/26 S.Fujita [QC#13362,MOD] -->
                            <!-- 
                             B.INV_NUM
                            ,B.INV_BOL_LINE_NUM
                            ,B.INV_LINE_NUM
                            ,B.INV_LINE_SUB_NUM
                            ,B.INV_TRX_LINE_SUB_NUM
                            ,B.AJE_INV_ACCT_DIST_SQ_NUM
                            ,MAX(B.INV_ERR_MSG_TXT) AS INV_ERR_MSG_TXT
                            ,MAX(B.INVLD_VAL_TXT) AS INVLD_VAL_TXT
                            ,MAX(B.AJE_INV_ACCT_DIST_ERR_PK) AS AJE_INV_ACCT_DIST_ERR_PK
                            -->
                             B.AJE_INV_ACCT_DIST_PK
                            ,B.INV_ERR_MSG_TXT
                            ,B.INVLD_VAL_TXT
                            ,B.AJE_INV_ACCT_DIST_ERR_PK
                            <!-- END   2016/09/26 S.Fujita [QC#13362,MOD] -->
                        FROM
                            AJE_INV_ACCT_DIST_ERR B
                        WHERE
                                B.GLBL_CMPY_CD  = #glblCmpyCd#
                            AND B.EZCANCELFLAG  = '0'
                        <!-- START 2016/09/26 S.Fujita [QC#13362,DEL] -->
                        <!-- 
                        GROUP BY
                             B.INV_NUM
                            ,B.INV_BOL_LINE_NUM
                            ,B.INV_LINE_NUM
                            ,B.INV_LINE_SUB_NUM
                            ,B.INV_TRX_LINE_SUB_NUM
                            ,B.AJE_INV_ACCT_DIST_SQ_NUM
                        -->
                        <!-- END   2016/09/26 S.Fujita [QC#13362,DEL] -->
                     ) X
                WHERE
                        A.GLBL_CMPY_CD          = #glblCmpyCd#
                    AND A.INV_NUM               = #invNum#
                    <!-- START 2016/09/26 S.Fujita [QC#13362,MOD] -->
                    <!-- 
                    AND A.INV_NUM               = X.INV_NUM (+)
                    AND A.INV_BOL_LINE_NUM      = X.INV_BOL_LINE_NUM (+)
                    AND A.INV_LINE_NUM          = X.INV_LINE_NUM (+)
                    AND A.INV_LINE_SUB_NUM      = X.INV_LINE_SUB_NUM (+)
                    AND A.INV_LINE_SUB_TRX_NUM  = X.INV_TRX_LINE_SUB_NUM (+)
                    AND A.AJE_INV_ACCT_DIST_SQ_NUM = X.AJE_INV_ACCT_DIST_SQ_NUM (+)
                    -->
                    AND A.AJE_INV_ACCT_DIST_PK  = X.AJE_INV_ACCT_DIST_PK (+)
                    <!-- END   2016/09/26 S.Fujita [QC#13362,MOD] -->

                    AND A.EZCANCELFLAG          = '0'
                    AND A.DR_CR_TP_CD           = #drCrtpCd_C#
            ) X
        ORDER BY
             X.DR_CR_TP_CD_C1 DESC
            ,X.AJE_LINE_IDX_NUM_C1

    </statement>

    <statement id="searchInvAcctDist_Edit" parameterClass="Map" resultMap="result.searchInvAcctDist">
        SELECT
             A.INV_BOL_LINE_NUM             AS INV_BOL_LINE_NUM_C1
            ,A.INV_LINE_NUM                 AS INV_LINE_NUM_C1
            ,A.INV_LINE_SUB_NUM             AS INV_LINE_SUB_NUM_C1
            ,A.INV_LINE_SUB_TRX_NUM         AS INV_LINE_SUB_TRX_NUM_C1
            ,A.AJE_INV_ACCT_DIST_SQ_NUM     AS AJE_INV_ACCT_DIST_SQ_NUM_C1
            ,A.DR_CR_TP_CD                  AS DR_CR_TP_CD_C1
            ,A.AJE_INV_ACCT_CLS_CD          AS AJE_INV_ACCT_CLS_CD_C1
            ,A.AJE_COA_CMPY_CD              AS AJE_COA_CMPY_CD_C1
            ,A.AJE_COA_BR_CD                AS AJE_COA_BR_CD_C1
            ,A.AJE_COA_CC_CD                AS AJE_COA_CC_CD_C1
            ,A.AJE_COA_ACCT_CD              AS AJE_COA_ACCT_CD_C1
            ,A.AJE_COA_PROD_CD              AS AJE_COA_PROD_CD_C1
            ,A.AJE_COA_CH_CD                AS AJE_COA_CH_CD_C1
            ,A.AJE_COA_AFFL_CD              AS AJE_COA_AFFL_CD_C1
            ,A.AJE_COA_PROJ_CD              AS AJE_COA_PROJ_CD_C1
            ,A.AJE_COA_EXTN_CD              AS AJE_COA_EXTN_CD_C1
            ,(CASE WHEN A.DR_CR_TP_CD = 'D' THEN A.JRNL_DEAL_AMT ELSE NULL END) AS JRNL_DEAL_AMT_C1
            ,(CASE WHEN A.DR_CR_TP_CD = 'C' THEN A.JRNL_DEAL_AMT ELSE NULL END) AS JRNL_DEAL_AMT_C2
            ,A.AJE_INV_ACCT_DIST_PCT        AS AJE_INV_ACCT_DIST_PCT_C1
            ,A.GL_DT                        AS GL_DT_C1
            ,A.JRNL_CRAT_DT                 AS JRNL_CRAT_DT_C1
            ,X.INV_ERR_MSG_TXT              AS INV_ERR_MSG_TXT_C1
            ,X.INVLD_VAL_TXT                AS INVLD_VAL_TXT_C1

            ,A.AJE_INV_ACCT_DIST_PK         AS AJE_INV_ACCT_DIST_PK_C1
            ,A.PROC_DT                      AS PROC_DT_C1
            ,A.DEAL_CCY_CD                  AS DEAL_CCY_CD_C1
            ,A.FUNC_CCY_CD                  AS FUNC_CCY_CD_C1
            ,A.DS_INV_SLS_CR_PK             AS DS_INV_SLS_CR_PK_C1
            ,A.AJE_OM_INTFC_PK              AS AJE_OM_INTFC_PK_C1
            ,A.PROC_STS_CD                  AS PROC_STS_CD_C1
            ,A.DFRD_REV_GL_STRG_FLG         AS DFRD_REV_GL_STRG_FLG_C1
            ,A.SYS_SRC_CD                   AS SYS_SRC_CD_C1
            ,A.SYS_SRC_NM                   AS SYS_SRC_NM_C1
            ,A.TRX_CD                       AS TRX_CD_C1
            ,A.TRX_NM                       AS TRX_NM_C1
            ,A.TRX_RSN_CD                   AS TRX_RSN_CD_C1
            ,A.TRX_RSN_NM                   AS TRX_RSN_NM_C1
            ,A.AJE_PTRN_IND_TP_CD_01        AS AJE_PTRN_IND_TP_CD_C1
            ,A.AJE_PTRN_IND_TP_NM_01        AS AJE_PTRN_IND_TP_NM_C1
            ,A.AJE_PTRN_ACTL_CD_01          AS AJE_PTRN_ACTL_CD_C1
            ,A.AJE_PTRN_ACTL_NM_01          AS AJE_PTRN_ACTL_NM_C1
            ,A.AJE_PTRN_IND_TP_CD_02        AS AJE_PTRN_IND_TP_CD_C2
            ,A.AJE_PTRN_IND_TP_NM_02        AS AJE_PTRN_IND_TP_NM_C2
            ,A.AJE_PTRN_ACTL_CD_02          AS AJE_PTRN_ACTL_CD_C2
            ,A.AJE_PTRN_ACTL_NM_02          AS AJE_PTRN_ACTL_NM_C2
            ,A.AJE_PTRN_IND_TP_CD_03        AS AJE_PTRN_IND_TP_CD_C3
            ,A.AJE_PTRN_IND_TP_NM_03        AS AJE_PTRN_IND_TP_NM_C3
            ,A.AJE_PTRN_ACTL_CD_03          AS AJE_PTRN_ACTL_CD_C3
            ,A.AJE_PTRN_ACTL_NM_03          AS AJE_PTRN_ACTL_NM_C3
            ,A.JRNL_SRC_CD                  AS JRNL_SRC_CD_C1
            ,A.JRNL_SRC_NM                  AS JRNL_SRC_NM_C1
            ,A.JRNL_CATG_CD                 AS JRNL_CATG_CD_C1
            ,A.JRNL_CATG_NM                 AS JRNL_CATG_NM_C1
            ,A.AJE_LINE_IDX_NUM             AS AJE_LINE_IDX_NUM_C1
            ,A.AJE_LINE_IDX_DESC_TXT        AS AJE_LINE_IDX_DESC_TXT_C1
            ,X.AJE_INV_ACCT_DIST_ERR_PK     AS AJE_INV_ACCT_DIST_ERR_PK_C1

            <!-- START 2017/03/17 T.Murai [QC#14205,ADD] -->
            ,A.EZINTIME                     AS XX_REC_HIST_CRAT_TS
            ,A.EZINUSERID                   AS XX_REC_HIST_CRAT_BY_NM
            ,A.EZUPTIME                     AS XX_REC_HIST_UPD_TS
            ,A.EZUPUSERID                   AS XX_REC_HIST_UPD_BY_NM
            ,A.EZTABLEID                    AS XX_REC_HIST_TBL_NM
            <!-- END   2017/03/17 T.Murai [QC#14205,ADD] -->
        FROM
             AJE_INV_ACCT_DIST      A
            ,(
                SELECT
                    <!-- START 2016/09/26 S.Fujita [QC#13362,MOD] -->
                    <!-- 
                     B.INV_NUM
                    ,B.INV_BOL_LINE_NUM
                    ,B.INV_LINE_NUM
                    ,B.INV_LINE_SUB_NUM
                    ,B.INV_TRX_LINE_SUB_NUM
                    ,B.AJE_INV_ACCT_DIST_SQ_NUM
                    
                    ,MAX(B.INV_ERR_MSG_TXT) AS INV_ERR_MSG_TXT
                    ,MAX(B.INVLD_VAL_TXT) AS INVLD_VAL_TXT
                    ,MAX(B.AJE_INV_ACCT_DIST_ERR_PK) AS AJE_INV_ACCT_DIST_ERR_PK
                    -->
                     B.AJE_INV_ACCT_DIST_PK
                    ,B.INV_ERR_MSG_TXT
                    ,B.INVLD_VAL_TXT
                    ,B.AJE_INV_ACCT_DIST_ERR_PK
                    <!-- END   2016/09/26 S.Fujita [QC#13362,MOD] -->
                FROM
                    AJE_INV_ACCT_DIST_ERR B
                WHERE
                        B.GLBL_CMPY_CD  = #glblCmpyCd#
                    AND B.EZCANCELFLAG  = '0'
                <!-- START 2016/09/26 S.Fujita [QC#13362,DEL] -->
                <!-- 
                GROUP BY
                     B.INV_NUM
                    ,B.INV_BOL_LINE_NUM
                    ,B.INV_LINE_NUM
                    ,B.INV_LINE_SUB_NUM
                    ,B.INV_TRX_LINE_SUB_NUM
                    ,B.AJE_INV_ACCT_DIST_SQ_NUM
                -->
                <!-- END   2016/09/26 S.Fujita [QC#13362,DEL] -->
             ) X
        WHERE
                A.GLBL_CMPY_CD          = #glblCmpyCd#
            AND A.INV_NUM               = #invNum#
            <!-- START 2016/09/26 S.Fujita [QC#13362,MOD] -->
            <!--
            AND A.INV_NUM               = X.INV_NUM (+)
            AND A.INV_BOL_LINE_NUM      = X.INV_BOL_LINE_NUM (+)
            AND A.INV_LINE_NUM          = X.INV_LINE_NUM (+)
            AND A.INV_LINE_SUB_NUM      = X.INV_LINE_SUB_NUM (+)
            AND A.INV_LINE_SUB_TRX_NUM  = X.INV_TRX_LINE_SUB_NUM (+)
            AND A.AJE_INV_ACCT_DIST_SQ_NUM = X.AJE_INV_ACCT_DIST_SQ_NUM (+)
            -->
            AND A.AJE_INV_ACCT_DIST_PK  = X.AJE_INV_ACCT_DIST_PK (+)
            <!-- END   2016/09/26 S.Fujita [QC#13362,MOD] -->

            AND A.EZCANCELFLAG          = '0'
            <!-- START 2016/12/09 [QC#16175,ADD]-->
            <!-- START 2016/09/26 S.Fujita [QC#13362,DEL] -->
            
            AND A.DFRD_REV_GL_STRG_FLG  = #dfrdFlg#
            
            <!-- END   2016/09/26 S.Fujita [QC#13362,DEL] -->
            <!-- END   2016/12/09 [QC#16175,ADD]-->
        ORDER BY
             A.INV_BOL_LINE_NUM
            ,A.INV_LINE_NUM
            ,A.INV_LINE_SUB_NUM
            ,A.INV_LINE_SUB_TRX_NUM
            ,A.DS_INV_SLS_CR_PK
            ,A.AJE_INV_ACCT_CLS_CD
            ,A.DR_CR_TP_CD DESC
            ,A.AJE_INV_ACCT_DIST_SQ_NUM
    </statement>

    <resultMap id="result.searchInvAcctDist" class="NFCL3000_CCMsg">
        <result property="invBolLineNum_C1"                 column="INV_BOL_LINE_NUM_C1"            javaType="EZDCStringItem" />
        <result property="invLineNum_C1"                    column="INV_LINE_NUM_C1"                javaType="EZDCStringItem" />
        <result property="invLineSubNum_C1"                 column="INV_LINE_SUB_NUM_C1"            javaType="EZDCStringItem" />
        <result property="invLineSubTrxNum_C1"              column="INV_LINE_SUB_TRX_NUM_C1"        javaType="EZDCStringItem" />
        <result property="ajeInvAcctDistSqNum_C1"           column="AJE_INV_ACCT_DIST_SQ_NUM_C1"    javaType="EZDCStringItem" />
        <result property="drCrTpCd_C1"                      column="DR_CR_TP_CD_C1"                 javaType="EZDCStringItem" />
        <result property="ajeInvAcctClsCd_C1"               column="AJE_INV_ACCT_CLS_CD_C1"         javaType="EZDCStringItem" />
        <result property="ajeCoaCmpyCd_C1"                  column="AJE_COA_CMPY_CD_C1"             javaType="EZDCStringItem" />
        <result property="ajeCoaBrCd_C1"                    column="AJE_COA_BR_CD_C1"               javaType="EZDCStringItem" />
        <result property="ajeCoaCcCd_C1"                    column="AJE_COA_CC_CD_C1"               javaType="EZDCStringItem" />
        <result property="ajeCoaAcctCd_C1"                  column="AJE_COA_ACCT_CD_C1"             javaType="EZDCStringItem" />
        <result property="ajeCoaProdCd_C1"                  column="AJE_COA_PROD_CD_C1"             javaType="EZDCStringItem" />
        <result property="ajeCoaChCd_C1"                    column="AJE_COA_CH_CD_C1"               javaType="EZDCStringItem" />
        <result property="ajeCoaAfflCd_C1"                  column="AJE_COA_AFFL_CD_C1"             javaType="EZDCStringItem" />
        <result property="ajeCoaProjCd_C1"                  column="AJE_COA_PROJ_CD_C1"             javaType="EZDCStringItem" />
        <result property="ajeCoaExtnCd_C1"                  column="AJE_COA_EXTN_CD_C1"             javaType="EZDCStringItem" />
        <result property="jrnlDealAmt_C1"                   column="JRNL_DEAL_AMT_C1"               javaType="EZDCBigDecimalItem" />
        <result property="jrnlDealAmt_C2"                   column="JRNL_DEAL_AMT_C2"               javaType="EZDCBigDecimalItem" />
        <result property="ajeInvAcctDistPct_C1"             column="AJE_INV_ACCT_DIST_PCT_C1"       javaType="EZDCBigDecimalItem" />
        <result property="glDt_C1"                          column="GL_DT_C1"                       javaType="EZDCStringItem" />
        <result property="jrnlCratDt_C1"                    column="JRNL_CRAT_DT_C1"                javaType="EZDCStringItem" />
        <result property="invErrMsgTxt_C1"                  column="INV_ERR_MSG_TXT_C1"             javaType="EZDCStringItem" />
        <result property="invldValTxt_C1"                   column="INVLD_VAL_TXT_C1"               javaType="EZDCStringItem" />
    
        <result property="ajeInvAcctDistPk_C1"              column="AJE_INV_ACCT_DIST_PK_C1"        javaType="EZDCBigDecimalItem" />
        <result property="procDt_C1"                        column="PROC_DT_C1"                     javaType="EZDCStringItem" />
        <result property="dealCcyCd_C1"                     column="DEAL_CCY_CD_C1"                 javaType="EZDCStringItem" />
        <result property="funcCcyCd_C1"                     column="FUNC_CCY_CD_C1"                 javaType="EZDCStringItem" />
        <result property="dsInvSlsCrPk_C1"                  column="DS_INV_SLS_CR_PK_C1"            javaType="EZDCBigDecimalItem" />
        <result property="ajeOmIntfcPk_C1"                  column="AJE_OM_INTFC_PK_C1"             javaType="EZDCBigDecimalItem" />
        <result property="procStsCd_C1"                     column="PROC_STS_CD_C1"                 javaType="EZDCStringItem" />
        <result property="dfrdRevGlStrgFlg_C1"              column="DFRD_REV_GL_STRG_FLG_C1"        javaType="EZDCStringItem" />
        <result property="sysSrcCd_C1"                      column="SYS_SRC_CD_C1"                  javaType="EZDCStringItem" />
        <result property="sysSrcNm_C1"                      column="SYS_SRC_NM_C1"                  javaType="EZDCStringItem" />
        <result property="trxCd_C1"                         column="TRX_CD_C1"                      javaType="EZDCStringItem" />
        <result property="trxNm_C1"                         column="TRX_NM_C1"                      javaType="EZDCStringItem" />
        <result property="trxRsnCd_C1"                      column="TRX_RSN_CD_C1"                  javaType="EZDCStringItem" />
        <result property="trxRsnNm_C1"                      column="TRX_RSN_NM_C1"                  javaType="EZDCStringItem" />
        <result property="ajePtrnIndTpCd_C1"                column="AJE_PTRN_IND_TP_CD_C1"          javaType="EZDCStringItem" />
        <result property="ajePtrnIndTpNm_C1"                column="AJE_PTRN_IND_TP_NM_C1"          javaType="EZDCStringItem" />
        <result property="ajePtrnActlCd_C1"                 column="AJE_PTRN_ACTL_CD_C1"            javaType="EZDCStringItem" />
        <result property="ajePtrnActlNm_C1"                 column="AJE_PTRN_ACTL_NM_C1"            javaType="EZDCStringItem" />
        <result property="ajePtrnIndTpCd_C2"                column="AJE_PTRN_IND_TP_CD_C2"          javaType="EZDCStringItem" />
        <result property="ajePtrnIndTpNm_C2"                column="AJE_PTRN_IND_TP_NM_C2"          javaType="EZDCStringItem" />
        <result property="ajePtrnActlCd_C2"                 column="AJE_PTRN_ACTL_CD_C2"            javaType="EZDCStringItem" />
        <result property="ajePtrnActlNm_C2"                 column="AJE_PTRN_ACTL_NM_C2"            javaType="EZDCStringItem" />
        <result property="ajePtrnIndTpCd_C3"                column="AJE_PTRN_IND_TP_CD_C3"          javaType="EZDCStringItem" />
        <result property="ajePtrnIndTpNm_C3"                column="AJE_PTRN_IND_TP_NM_C3"          javaType="EZDCStringItem" />
        <result property="ajePtrnActlCd_C3"                 column="AJE_PTRN_ACTL_CD_C3"            javaType="EZDCStringItem" />
        <result property="ajePtrnActlNm_C3"                 column="AJE_PTRN_ACTL_NM_C3"            javaType="EZDCStringItem" />
        <result property="jrnlSrcCd_C1"                     column="JRNL_SRC_CD_C1"                 javaType="EZDCStringItem" />
        <result property="jrnlSrcNm_C1"                     column="JRNL_SRC_NM_C1"                 javaType="EZDCStringItem" />
        <result property="jrnlCatgCd_C1"                    column="JRNL_CATG_CD_C1"                javaType="EZDCStringItem" />
        <result property="jrnlCatgNm_C1"                    column="JRNL_CATG_NM_C1"                javaType="EZDCStringItem" />
        <result property="ajeLineIdxNum_C1"                 column="AJE_LINE_IDX_NUM_C1"            javaType="EZDCStringItem" />
        <result property="ajeLineIdxDescTxt_C1"             column="AJE_LINE_IDX_DESC_TXT_C1"       javaType="EZDCStringItem" />

        <result property="ajeInvAcctDistErrPk_C1"           column="AJE_INV_ACCT_DIST_ERR_PK_C1"    javaType="EZDCBigDecimalItem" />

        <!-- START 2017/03/17 T.Murai [QC#14205,ADD] -->
        <result property="xxRecHistCratTs_C"                column="XX_REC_HIST_CRAT_TS"            javaType="EZDCStringItem" />
        <result property="xxRecHistCratByNm_C"              column="XX_REC_HIST_CRAT_BY_NM"         javaType="EZDCStringItem" />
        <result property="xxRecHistUpdTs_C"                 column="XX_REC_HIST_UPD_TS"             javaType="EZDCStringItem" />
        <result property="xxRecHistUpdByNm_C"               column="XX_REC_HIST_UPD_BY_NM"          javaType="EZDCStringItem" />
        <result property="xxRecHistTblNm_C"                 column="XX_REC_HIST_TBL_NM"             javaType="EZDCStringItem" />
        <!-- END   2017/03/17 T.Murai [QC#14205,ADD] -->
    </resultMap>

    <statement id="searchInvAcctDist_F" parameterClass="Map" resultMap="result.searchInvAcctDist_F">
        SELECT
             A.INV_BOL_LINE_NUM             AS INV_BOL_LINE_NUM_F1
            ,A.INV_LINE_NUM                 AS INV_LINE_NUM_F1
            ,A.INV_LINE_SUB_NUM             AS INV_LINE_SUB_NUM_F1
            ,A.INV_LINE_SUB_TRX_NUM         AS INV_LINE_SUB_TRX_NUM_F1
            ,A.AJE_INV_ACCT_DIST_SQ_NUM     AS AJE_INV_ACCT_DIST_SQ_NUM_F1
            ,A.DR_CR_TP_CD                  AS DR_CR_TP_CD_F1
            ,A.AJE_INV_ACCT_CLS_CD          AS AJE_INV_ACCT_CLS_CD_F1
            ,A.AJE_COA_CMPY_CD              AS AJE_COA_CMPY_CD_F1
            ,A.AJE_COA_BR_CD                AS AJE_COA_BR_CD_F1
            ,A.AJE_COA_CC_CD                AS AJE_COA_CC_CD_F1
            ,A.AJE_COA_ACCT_CD              AS AJE_COA_ACCT_CD_F1
            ,A.AJE_COA_PROD_CD              AS AJE_COA_PROD_CD_F1
            ,A.AJE_COA_CH_CD                AS AJE_COA_CH_CD_F1
            ,A.AJE_COA_AFFL_CD              AS AJE_COA_AFFL_CD_F1
            ,A.AJE_COA_PROJ_CD              AS AJE_COA_PROJ_CD_F1
            ,A.AJE_COA_EXTN_CD              AS AJE_COA_EXTN_CD_F1
            ,(CASE WHEN A.DR_CR_TP_CD = 'D' THEN A.JRNL_DEAL_AMT ELSE NULL END) AS JRNL_DEAL_AMT_F1
            ,(CASE WHEN A.DR_CR_TP_CD = 'C' THEN A.JRNL_DEAL_AMT ELSE NULL END) AS JRNL_DEAL_AMT_C2
            ,A.AJE_INV_ACCT_DIST_PCT        AS AJE_INV_ACCT_DIST_PCT_F1
            ,A.GL_DT                        AS GL_DT_F1
            ,A.JRNL_CRAT_DT                 AS JRNL_CRAT_DT_F1
            ,X.INV_ERR_MSG_TXT              AS INV_ERR_MSG_TXT_F1
            ,X.INVLD_VAL_TXT                AS INVLD_VAL_TXT_F1

            ,A.AJE_INV_ACCT_DIST_PK         AS AJE_INV_ACCT_DIST_PK_F1
            ,A.PROC_DT                      AS PROC_DT_F1
            ,A.DEAL_CCY_CD                  AS DEAL_CCY_CD_F1
            ,A.FUNC_CCY_CD                  AS FUNC_CCY_CD_F1
            ,A.DS_INV_SLS_CR_PK             AS DS_INV_SLS_CR_PK_F1
            ,A.AJE_OM_INTFC_PK              AS AJE_OM_INTFC_PK_F1
            ,A.PROC_STS_CD                  AS PROC_STS_CD_F1
            ,A.DFRD_REV_GL_STRG_FLG         AS DFRD_REV_GL_STRG_FLG_F1
            ,A.SYS_SRC_CD                   AS SYS_SRC_CD_F1
            ,A.SYS_SRC_NM                   AS SYS_SRC_NM_F1
            ,A.TRX_CD                       AS TRX_CD_F1
            ,A.TRX_NM                       AS TRX_NM_F1
            ,A.TRX_RSN_CD                   AS TRX_RSN_CD_F1
            ,A.TRX_RSN_NM                   AS TRX_RSN_NM_F1
            ,A.AJE_PTRN_IND_TP_CD_01        AS AJE_PTRN_IND_TP_CD_F1
            ,A.AJE_PTRN_IND_TP_NM_01        AS AJE_PTRN_IND_TP_NM_F1
            ,A.AJE_PTRN_ACTL_CD_01          AS AJE_PTRN_ACTL_CD_F1
            ,A.AJE_PTRN_ACTL_NM_01          AS AJE_PTRN_ACTL_NM_F1
            ,A.AJE_PTRN_IND_TP_CD_02        AS AJE_PTRN_IND_TP_CD_F2
            ,A.AJE_PTRN_IND_TP_NM_02        AS AJE_PTRN_IND_TP_NM_F2
            ,A.AJE_PTRN_ACTL_CD_02          AS AJE_PTRN_ACTL_CD_F2
            ,A.AJE_PTRN_ACTL_NM_02          AS AJE_PTRN_ACTL_NM_F2
            ,A.AJE_PTRN_IND_TP_CD_03        AS AJE_PTRN_IND_TP_CD_F3
            ,A.AJE_PTRN_IND_TP_NM_03        AS AJE_PTRN_IND_TP_NM_F3
            ,A.AJE_PTRN_ACTL_CD_03          AS AJE_PTRN_ACTL_CD_F3
            ,A.AJE_PTRN_ACTL_NM_03          AS AJE_PTRN_ACTL_NM_F3
            ,A.JRNL_SRC_CD                  AS JRNL_SRC_CD_F1
            ,A.JRNL_SRC_NM                  AS JRNL_SRC_NM_F1
            ,A.JRNL_CATG_CD                 AS JRNL_CATG_CD_F1
            ,A.JRNL_CATG_NM                 AS JRNL_CATG_NM_F1
            ,A.AJE_LINE_IDX_NUM             AS AJE_LINE_IDX_NUM_F1
            ,A.AJE_LINE_IDX_DESC_TXT        AS AJE_LINE_IDX_DESC_TXT_F1
            ,X.AJE_INV_ACCT_DIST_ERR_PK     AS AJE_INV_ACCT_DIST_ERR_PK_F1

            <!-- START 2017/03/17 T.Murai [QC#14205,ADD] -->
            ,A.EZINTIME                     AS XX_REC_HIST_CRAT_TS
            ,A.EZINUSERID                   AS XX_REC_HIST_CRAT_BY_NM
            ,A.EZUPTIME                     AS XX_REC_HIST_UPD_TS
            ,A.EZUPUSERID                   AS XX_REC_HIST_UPD_BY_NM
            ,A.EZTABLEID                    AS XX_REC_HIST_TBL_NM
            <!-- END   2017/03/17 T.Murai [QC#14205,ADD] -->
        FROM
             AJE_INV_ACCT_DIST      A
            ,(
                SELECT
                    <!-- START 2016/09/26 S.Fujita [QC#13362,MOD] -->
                    <!--
                     B.INV_NUM
                    ,B.INV_BOL_LINE_NUM
                    ,B.INV_LINE_NUM
                    ,B.INV_LINE_SUB_NUM
                    ,B.INV_TRX_LINE_SUB_NUM
                    ,B.AJE_INV_ACCT_DIST_SQ_NUM
                    ,MAX(B.INV_ERR_MSG_TXT) AS INV_ERR_MSG_TXT
                    ,MAX(B.INVLD_VAL_TXT) AS INVLD_VAL_TXT
                    ,MAX(B.AJE_INV_ACCT_DIST_ERR_PK) AS AJE_INV_ACCT_DIST_ERR_PK
                    -->
                     B.AJE_INV_ACCT_DIST_PK
                    ,B.INV_ERR_MSG_TXT
                    ,B.INVLD_VAL_TXT
                    ,B.AJE_INV_ACCT_DIST_ERR_PK
                    <!-- END   2016/09/26 S.Fujita [QC#13362,MOD] -->
                FROM
                    AJE_INV_ACCT_DIST_ERR B
                WHERE
                        B.GLBL_CMPY_CD  = #glblCmpyCd#
                    AND B.EZCANCELFLAG  = '0'
                <!-- START 2016/09/26 S.Fujita [QC#13362,DEL] -->
                <!--
                GROUP BY
                     B.INV_NUM
                    ,B.INV_BOL_LINE_NUM
                    ,B.INV_LINE_NUM
                    ,B.INV_LINE_SUB_NUM
                    ,B.INV_TRX_LINE_SUB_NUM
                    ,B.AJE_INV_ACCT_DIST_SQ_NUM
               -->
               <!-- END   2016/09/26 S.Fujita [QC#13362,DEL] -->
             ) X
        WHERE
                A.GLBL_CMPY_CD          = #glblCmpyCd#
            AND A.INV_NUM               = #invNum#
            <!-- START 2016/09/26 S.Fujita [QC#13362,MOD] -->
            <!--
            AND A.INV_NUM               = X.INV_NUM (+)
            AND A.INV_BOL_LINE_NUM      = X.INV_BOL_LINE_NUM (+)
            AND A.INV_LINE_NUM          = X.INV_LINE_NUM (+)
            AND A.INV_LINE_SUB_NUM      = X.INV_LINE_SUB_NUM (+)
            AND A.INV_LINE_SUB_TRX_NUM  = X.INV_TRX_LINE_SUB_NUM (+)
            AND A.AJE_INV_ACCT_DIST_SQ_NUM = X.AJE_INV_ACCT_DIST_SQ_NUM (+)
            -->
            AND A.AJE_INV_ACCT_DIST_PK  = X.AJE_INV_ACCT_DIST_PK (+)
            <!-- END   2016/09/26 S.Fujita [QC#13362,MOD] -->

            AND A.EZCANCELFLAG          = '0'
        ORDER BY
             A.INV_BOL_LINE_NUM
            ,A.INV_LINE_NUM
            ,A.INV_LINE_SUB_NUM
            ,A.INV_LINE_SUB_TRX_NUM
            ,A.AJE_INV_ACCT_CLS_CD
            ,A.DR_CR_TP_CD DESC
            ,A.AJE_INV_ACCT_DIST_SQ_NUM
    </statement>

    <resultMap id="result.searchInvAcctDist_F" class="NFCL3000_FCMsg">
        <result property="invBolLineNum_F1"                 column="INV_BOL_LINE_NUM_F1"            javaType="EZDCStringItem" />
        <result property="invLineNum_F1"                    column="INV_LINE_NUM_F1"                javaType="EZDCStringItem" />
        <result property="invLineSubNum_F1"                 column="INV_LINE_SUB_NUM_F1"            javaType="EZDCStringItem" />
        <result property="invLineSubTrxNum_F1"              column="INV_LINE_SUB_TRX_NUM_F1"        javaType="EZDCStringItem" />
        <result property="ajeInvAcctDistSqNum_F1"           column="AJE_INV_ACCT_DIST_SQ_NUM_F1"    javaType="EZDCStringItem" />
        <result property="drCrTpCd_F1"                      column="DR_CR_TP_CD_F1"                 javaType="EZDCStringItem" />
        <result property="ajeInvAcctClsCd_F1"               column="AJE_INV_ACCT_CLS_CD_F1"         javaType="EZDCStringItem" />
        <result property="ajeCoaCmpyCd_F1"                  column="AJE_COA_CMPY_CD_F1"             javaType="EZDCStringItem" />
        <result property="ajeCoaBrCd_F1"                    column="AJE_COA_BR_CD_F1"               javaType="EZDCStringItem" />
        <result property="ajeCoaCcCd_F1"                    column="AJE_COA_CC_CD_F1"               javaType="EZDCStringItem" />
        <result property="ajeCoaAcctCd_F1"                  column="AJE_COA_ACCT_CD_F1"             javaType="EZDCStringItem" />
        <result property="ajeCoaProdCd_F1"                  column="AJE_COA_PROD_CD_F1"             javaType="EZDCStringItem" />
        <result property="ajeCoaChCd_F1"                    column="AJE_COA_CH_CD_F1"               javaType="EZDCStringItem" />
        <result property="ajeCoaAfflCd_F1"                  column="AJE_COA_AFFL_CD_F1"             javaType="EZDCStringItem" />
        <result property="ajeCoaProjCd_F1"                  column="AJE_COA_PROJ_CD_F1"             javaType="EZDCStringItem" />
        <result property="ajeCoaExtnCd_F1"                  column="AJE_COA_EXTN_CD_F1"             javaType="EZDCStringItem" />
        <result property="jrnlDealAmt_F1"                   column="JRNL_DEAL_AMT_F1"               javaType="EZDCBigDecimalItem" />
        <result property="jrnlDealAmt_C2"                   column="JRNL_DEAL_AMT_C2"               javaType="EZDCBigDecimalItem" />
        <result property="ajeInvAcctDistPct_F1"             column="AJE_INV_ACCT_DIST_PCT_F1"       javaType="EZDCBigDecimalItem" />
        <result property="glDt_F1"                          column="GL_DT_F1"                       javaType="EZDCStringItem" />
        <result property="jrnlCratDt_F1"                    column="JRNL_CRAT_DT_F1"                javaType="EZDCStringItem" />
        <result property="invErrMsgTxt_F1"                  column="INV_ERR_MSG_TXT_F1"             javaType="EZDCStringItem" />
        <result property="invldValTxt_F1"                   column="INVLD_VAL_TXT_F1"               javaType="EZDCStringItem" />
    
        <result property="ajeInvAcctDistPk_F1"              column="AJE_INV_ACCT_DIST_PK_F1"        javaType="EZDCBigDecimalItem" />
        <result property="procDt_F1"                        column="PROC_DT_F1"                     javaType="EZDCStringItem" />
        <result property="dealCcyCd_F1"                     column="DEAL_CCY_CD_F1"                 javaType="EZDCStringItem" />
        <result property="funcCcyCd_F1"                     column="FUNC_CCY_CD_F1"                 javaType="EZDCStringItem" />
        <result property="dsInvSlsCrPk_F1"                  column="DS_INV_SLS_CR_PK_F1"            javaType="EZDCBigDecimalItem" />
        <result property="ajeOmIntfcPk_F1"                  column="AJE_OM_INTFC_PK_F1"             javaType="EZDCBigDecimalItem" />
        <result property="procStsCd_F1"                     column="PROC_STS_CD_F1"                 javaType="EZDCStringItem" />
        <result property="dfrdRevGlStrgFlg_F1"              column="DFRD_REV_GL_STRG_FLG_F1"        javaType="EZDCStringItem" />
        <result property="sysSrcCd_F1"                      column="SYS_SRC_CD_F1"                  javaType="EZDCStringItem" />
        <result property="sysSrcNm_F1"                      column="SYS_SRC_NM_F1"                  javaType="EZDCStringItem" />
        <result property="trxCd_F1"                         column="TRX_CD_F1"                      javaType="EZDCStringItem" />
        <result property="trxNm_F1"                         column="TRX_NM_F1"                      javaType="EZDCStringItem" />
        <result property="trxRsnCd_F1"                      column="TRX_RSN_CD_F1"                  javaType="EZDCStringItem" />
        <result property="trxRsnNm_F1"                      column="TRX_RSN_NM_F1"                  javaType="EZDCStringItem" />
        <result property="ajePtrnIndTpCd_F1"                column="AJE_PTRN_IND_TP_CD_F1"          javaType="EZDCStringItem" />
        <result property="ajePtrnIndTpNm_F1"                column="AJE_PTRN_IND_TP_NM_F1"          javaType="EZDCStringItem" />
        <result property="ajePtrnActlCd_F1"                 column="AJE_PTRN_ACTL_CD_F1"            javaType="EZDCStringItem" />
        <result property="ajePtrnActlNm_F1"                 column="AJE_PTRN_ACTL_NM_F1"            javaType="EZDCStringItem" />
        <result property="ajePtrnIndTpCd_F2"                column="AJE_PTRN_IND_TP_CD_F2"          javaType="EZDCStringItem" />
        <result property="ajePtrnIndTpNm_F2"                column="AJE_PTRN_IND_TP_NM_F2"          javaType="EZDCStringItem" />
        <result property="ajePtrnActlCd_F2"                 column="AJE_PTRN_ACTL_CD_F2"            javaType="EZDCStringItem" />
        <result property="ajePtrnActlNm_F2"                 column="AJE_PTRN_ACTL_NM_F2"            javaType="EZDCStringItem" />
        <result property="ajePtrnIndTpCd_F3"                column="AJE_PTRN_IND_TP_CD_F3"          javaType="EZDCStringItem" />
        <result property="ajePtrnIndTpNm_F3"                column="AJE_PTRN_IND_TP_NM_F3"          javaType="EZDCStringItem" />
        <result property="ajePtrnActlCd_F3"                 column="AJE_PTRN_ACTL_CD_F3"            javaType="EZDCStringItem" />
        <result property="ajePtrnActlNm_F3"                 column="AJE_PTRN_ACTL_NM_F3"            javaType="EZDCStringItem" />
        <result property="jrnlSrcCd_F1"                     column="JRNL_SRC_CD_F1"                 javaType="EZDCStringItem" />
        <result property="jrnlSrcNm_F1"                     column="JRNL_SRC_NM_F1"                 javaType="EZDCStringItem" />
        <result property="jrnlCatgCd_F1"                    column="JRNL_CATG_CD_F1"                javaType="EZDCStringItem" />
        <result property="jrnlCatgNm_F1"                    column="JRNL_CATG_NM_F1"                javaType="EZDCStringItem" />
        <result property="ajeLineIdxNum_F1"                 column="AJE_LINE_IDX_NUM_F1"            javaType="EZDCStringItem" />
        <result property="ajeLineIdxDescTxt_F1"             column="AJE_LINE_IDX_DESC_TXT_F1"       javaType="EZDCStringItem" />

        <result property="ajeInvAcctDistErrPk_F1"           column="AJE_INV_ACCT_DIST_ERR_PK_F1"    javaType="EZDCBigDecimalItem" />

        <!-- START 2017/03/17 T.Murai [QC#14205,ADD] -->
        <result property="xxRecHistCratTs_F"                column="XX_REC_HIST_CRAT_TS"            javaType="EZDCStringItem" />
        <result property="xxRecHistCratByNm_F"              column="XX_REC_HIST_CRAT_BY_NM"         javaType="EZDCStringItem" />
        <result property="xxRecHistUpdTs_F"                 column="XX_REC_HIST_UPD_TS"             javaType="EZDCStringItem" />
        <result property="xxRecHistUpdByNm_F"               column="XX_REC_HIST_UPD_BY_NM"          javaType="EZDCStringItem" />
        <result property="xxRecHistTblNm_F"                 column="XX_REC_HIST_TBL_NM"             javaType="EZDCStringItem" />
        <!-- END   2017/03/17 T.Murai [QC#14205,ADD] -->
    </resultMap>

    <statement id="searchInvBOL" parameterClass="Map" resultMap="result.searchInvBOL">
        SELECT
             A.INV_BOL_LINE_NUM                 AS INV_BOL_LINE_NUM_D1
            ,A.SO_NUM                           AS SO_NUM_D1
            ,A.BOL_NUM                          AS BOL_NUM_D1
            ,A.CARR_CD                          AS CARR_CD_D1
            ,A.CARR_NM                          AS CARR_NM_D1
            ,A.SHIP_FROM_INVTY_LOC_CD           AS SHIP_FROM_INVTY_LOC_CD_D1
            ,A.SHIP_TO_CUST_CD                  AS SHIP_TO_CUST_CD_D1
            ,A.SHIP_TO_LOC_NM                   AS SHIP_TO_LOC_NM_D1
            ,A.SHIP_TO_FIRST_LINE_ADDR          AS SHIP_TO_FIRST_LINE_ADDR_D1
            ,A.SHIP_TO_SCD_LINE_ADDR            AS SHIP_TO_SCD_LINE_ADDR_D1
            ,A.SHIP_TO_CTY_ADDR                 AS SHIP_TO_CTY_ADDR_D1
            ,A.SHIP_TO_ST_CD                    AS SHIP_TO_ST_CD_D1
            ,A.SHIP_TO_POST_CD                  AS SHIP_TO_POST_CD_D1
            ,A.SHIP_DT                          AS SHIP_DT_D1
            ,A.SHPG_SVC_LVL_CD                  AS SHPG_SVC_LVL_CD_D1
            ,A.SHPG_SVC_LVL_NM                  AS SHPG_SVC_LVL_NM_D1
            <!-- START 2016/07/11 S.Fujita [QC#10160,MOD] -->
            ,(CASE WHEN E.INV_TP_CD = #cm# THEN NVL(A.SHIP_DEAL_NET_AMT, 0) * -1
                   ELSE NVL(A.SHIP_DEAL_NET_AMT, 0) END)                 AS SHIP_DEAL_NET_AMT_D1
            ,(CASE WHEN E.INV_TP_CD = #cm# THEN NVL(A.SHIP_DEAL_SLS_AMT, 0) * -1
                   ELSE NVL(A.SHIP_DEAL_SLS_AMT, 0) END)                 AS SHIP_DEAL_SLS_AMT_D1
            ,(CASE WHEN E.INV_TP_CD = #cm# THEN NVL(A.SHIP_DEAL_FRT_AMT, 0) * -1
                   ELSE NVL(A.SHIP_DEAL_FRT_AMT, 0) END)                 AS SHIP_DEAL_FRT_AMT_D1
            ,(CASE WHEN E.INV_TP_CD = #cm# THEN NVL(A.FRT_DEAL_TAX_AMT, 0) * -1
                   ELSE NVL(A.FRT_DEAL_TAX_AMT, 0) END)                 AS FRT_DEAL_TAX_AMT_D1
            ,(CASE WHEN E.INV_TP_CD = #cm# THEN NVL(A.SHIP_DEAL_DISC_AMT, 0) * -1
                   ELSE NVL(A.SHIP_DEAL_DISC_AMT, 0) END)                 AS SHIP_DEAL_DISC_AMT_D1
            ,(CASE WHEN E.INV_TP_CD = #cm# THEN NVL(A.SHIP_DEAL_HDLG_CHRG_AMT, 0) * -1
                   ELSE NVL(A.SHIP_DEAL_HDLG_CHRG_AMT, 0) END)                 AS SHIP_DEAL_HDLG_CHRG_AMT_D1
            ,(CASE WHEN E.INV_TP_CD = #cm# THEN NVL(A.TOT_BOL_DEAL_TAX_AMT, 0) * -1
                   ELSE NVL(A.TOT_BOL_DEAL_TAX_AMT, 0) END)                 AS TOT_BOL_DEAL_TAX_AMT_D1
            <!-- END   2016/07/11 S.Fujita [QC#10160,MOD] -->
            ,A.FRT_TAX_PCT                      AS FRT_TAX_PCT_D1
            ,B.INV_ERR_MSG_TXT                  AS INV_ERR_MSG_TXT_D1
            ,B.INVLD_VAL_TXT                    AS INVLD_VAL_TXT_D1
            <!-- START 2016/08/01 S.Fujita [QC#10148,ADD] -->
            <!--
            ,D.DS_ACCT_NM                       AS SHIP_TO_CUST_ACCT_NM_D1
            -->
            ,A.SHIP_TO_CUST_ACCT_NM             AS SHIP_TO_CUST_ACCT_NM_D1
            ,A.SHIP_TO_CTAC_PSN_FIRST_NM        AS SHIP_TO_CTAC_PSN_FIRST_NM_D1
            ,A.SHIP_TO_CTAC_PSN_LAST_NM         AS SHIP_TO_CTAC_PSN_LAST_NM_D1
            ,DECODE(A.SHIP_TO_CTAC_PSN_FIRST_NM, NULL, '', A.SHIP_TO_CTAC_PSN_FIRST_NM|| ',') || A.SHIP_TO_CTAC_PSN_LAST_NM   AS XX_PSN_NM_D1
            <!-- END   2016/08/01 S.Fujita [QC#10148,ADD] -->
            ,A.SHIP_TO_CUST_ACCT_CD             AS SHIP_TO_CUST_ACCT_CD_D1
            ,A.SHIP_TO_CTRY_CD                  AS SHIP_TO_CTRY_CD_D1
            <!-- START 2016/08/01 S.Fujita [QC#10148,ADD] -->
            ,F.LOC_NUM                          AS LOC_NUM_D1
            <!-- END   2016/08/01 S.Fujita [QC#10148,ADD] -->
            <!-- START 2017/03/17 T.Murai [QC#14205,ADD] -->
            ,A.EZINTIME                         AS XX_REC_HIST_CRAT_TS
            ,A.EZINUSERID                       AS XX_REC_HIST_CRAT_BY_NM
            ,A.EZUPTIME                         AS XX_REC_HIST_UPD_TS
            ,A.EZUPUSERID                       AS XX_REC_HIST_UPD_BY_NM
            ,A.EZTABLEID                        AS XX_REC_HIST_TBL_NM
            <!-- END   2017/03/17 T.Murai [QC#14205,ADD] -->
        FROM
             INV_BOL        A
            ,INV_BOL_ERR    B
            ,SELL_TO_CUST   D
            <!-- START 2016/07/11 S.Fujita [QC#10160,ADD] -->
            ,INV            E
            <!-- END   2016/07/11 S.Fujita [QC#10160,ADD] -->
            <!-- START 2016/08/01 S.Fujita [QC#10148,ADD] -->
            ,SHIP_TO_CUST   F
            <!-- END   2016/08/01 S.Fujita [QC#10148,ADD] -->
        WHERE
                A.GLBL_CMPY_CD      = #glblCmpyCd#
            AND A.INV_NUM           = #invNum#
            AND A.GLBL_CMPY_CD      = B.GLBL_CMPY_CD (+)
            AND A.INV_NUM           = B.INV_NUM (+)
            AND A.INV_BOL_LINE_NUM  = B.INV_BOL_LINE_NUM (+)
            AND A.EZCANCELFLAG      = '0'
            AND B.EZCANCELFLAG (+)  = '0'

            AND A.GLBL_CMPY_CD      = D.GLBL_CMPY_CD (+)
            AND A.SHIP_TO_CUST_ACCT_CD  = D.SELL_TO_CUST_CD (+)
            AND D.EZCANCELFLAG (+)  = '0'
            <!-- START 2016/07/11 S.Fujita [QC#10160,ADD] -->
            AND A.GLBL_CMPY_CD      = E.GLBL_CMPY_CD
            AND A.INV_NUM           = E.INV_NUM
            AND E.EZCANCELFLAG (+)  = '0'
            <!-- END   2016/07/11 S.Fujita [QC#10160,ADD] -->
            <!-- START 2016/08/01 S.Fujita [QC#10148,ADD] -->
            AND A.GLBL_CMPY_CD      = F.GLBL_CMPY_CD (+)
            AND A.SHIP_TO_CUST_CD   = F.SHIP_TO_CUST_CD (+)
            AND F.RGTN_STS_CD (+)   = #rgtnStsCd#
            AND F.EZCANCELFLAG (+)  = '0'
            <!-- END   2016/08/01 S.Fujita [QC#10148,ADD] -->
        ORDER BY
            A.INV_BOL_LINE_NUM
    </statement>

    <resultMap id="result.searchInvBOL" class="NFCL3000_DCMsg">
        <result property="invBolLineNum_D1"             column="INV_BOL_LINE_NUM_D1"            javaType="EZDCStringItem" />
        <result property="soNum_D1"                     column="SO_NUM_D1"                      javaType="EZDCStringItem" />
        <result property="bolNum_D1"                    column="BOL_NUM_D1"                     javaType="EZDCStringItem" />
        <result property="carrCd_D1"                    column="CARR_CD_D1"                     javaType="EZDCStringItem" />
        <result property="carrNm_D1"                    column="CARR_NM_D1"                     javaType="EZDCStringItem" />
        <result property="shipFromInvtyLocCd_D1"        column="SHIP_FROM_INVTY_LOC_CD_D1"      javaType="EZDCStringItem" />
        <result property="shipToCustCd_D1"              column="SHIP_TO_CUST_CD_D1"             javaType="EZDCStringItem" />
        <result property="shipToLocNm_D1"               column="SHIP_TO_LOC_NM_D1"              javaType="EZDCStringItem" />
        <result property="shipToFirstLineAddr_D1"       column="SHIP_TO_FIRST_LINE_ADDR_D1"     javaType="EZDCStringItem" />
        <result property="shipToScdLineAddr_D1"         column="SHIP_TO_SCD_LINE_ADDR_D1"       javaType="EZDCStringItem" />
        <result property="shipToCtyAddr_D1"             column="SHIP_TO_CTY_ADDR_D1"            javaType="EZDCStringItem" />
        <result property="shipToStCd_D1"                column="SHIP_TO_ST_CD_D1"               javaType="EZDCStringItem" />
        <result property="shipToPostCd_D1"              column="SHIP_TO_POST_CD_D1"             javaType="EZDCStringItem" />
        <result property="shipDt_D1"                    column="SHIP_DT_D1"                     javaType="EZDCStringItem" />
        <result property="shpgSvcLvlCd_D1"              column="SHPG_SVC_LVL_CD_D1"             javaType="EZDCStringItem" />
        <result property="shpgSvcLvlNm_D1"              column="SHPG_SVC_LVL_NM_D1"             javaType="EZDCStringItem" />
        <result property="shipDealNetAmt_D1"            column="SHIP_DEAL_NET_AMT_D1"           javaType="EZDCBigDecimalItem" />
        <result property="shipDealSlsAmt_D1"            column="SHIP_DEAL_SLS_AMT_D1"           javaType="EZDCBigDecimalItem" />
        <result property="shipDealFrtAmt_D1"            column="SHIP_DEAL_FRT_AMT_D1"           javaType="EZDCBigDecimalItem" />
        <result property="frtDealTaxAmt_D1"             column="FRT_DEAL_TAX_AMT_D1"            javaType="EZDCBigDecimalItem" />
        <result property="shipDealDiscAmt_D1"           column="SHIP_DEAL_DISC_AMT_D1"          javaType="EZDCBigDecimalItem" />
        <result property="shipDealHdlgChrgAmt_D1"       column="SHIP_DEAL_HDLG_CHRG_AMT_D1"     javaType="EZDCBigDecimalItem" />
        <result property="totBolDealTaxAmt_D1"          column="TOT_BOL_DEAL_TAX_AMT_D1"        javaType="EZDCBigDecimalItem" />
        <result property="frtTaxPct_D1"                 column="FRT_TAX_PCT_D1"                 javaType="EZDCBigDecimalItem" />
        <result property="invErrMsgTxt_D1"              column="INV_ERR_MSG_TXT_D1"             javaType="EZDCStringItem" />
        <result property="invldValTxt_D1"               column="INVLD_VAL_TXT_D1"               javaType="EZDCStringItem" />
        <result property="shipToCustAcctNm_D1"          column="SHIP_TO_CUST_ACCT_NM_D1"        javaType="EZDCStringItem" />
        <result property="shipToCustAcctCd_D1"          column="SHIP_TO_CUST_ACCT_CD_D1"        javaType="EZDCStringItem" />
        <result property="shipToCtryCd_D1"              column="SHIP_TO_CTRY_CD_D1"             javaType="EZDCStringItem" />
        <result property="locNum_D1"                    column="LOC_NUM_D1"                     javaType="EZDCStringItem" />
        <result property="shipToCtacPsnFirstNm_D1"      column="SHIP_TO_CTAC_PSN_FIRST_NM_D1"   javaType="EZDCStringItem" />
        <result property="shipToCtacPsnLastNm_D1"       column="SHIP_TO_CTAC_PSN_LAST_NM_D1"    javaType="EZDCStringItem" />
        <result property="xxPsnNm_D1"                   column="XX_PSN_NM_D1"                   javaType="EZDCStringItem" />
        <!-- START 2017/03/17 T.Murai [QC#14205,ADD] -->
        <result property="xxRecHistCratTs_D"            column="XX_REC_HIST_CRAT_TS"            javaType="EZDCStringItem" />
        <result property="xxRecHistCratByNm_D"          column="XX_REC_HIST_CRAT_BY_NM"         javaType="EZDCStringItem" />
        <result property="xxRecHistUpdTs_D"             column="XX_REC_HIST_UPD_TS"             javaType="EZDCStringItem" />
        <result property="xxRecHistUpdByNm_D"           column="XX_REC_HIST_UPD_BY_NM"          javaType="EZDCStringItem" />
        <result property="xxRecHistTblNm_D"             column="XX_REC_HIST_TBL_NM"             javaType="EZDCStringItem" />
        <!-- END   2017/03/17 T.Murai [QC#14205,ADD] -->
    </resultMap>

    <statement id="updateAjeInvAcctDist" parameterClass="Map" resultMap="result.updateAjeInvAcctDist">
        SELECT
            A.AJE_INV_ACCT_DIST_PK      AS AJE_INV_ACCT_DIST_PK_E1
        FROM
            AJE_INV_ACCT_DIST  A
        WHERE
                A.GLBL_CMPY_CD      = #glblCmpyCd#
            AND A.INV_NUM           = #invNum#
            AND A.EZCANCELFLAG      = '0'
    </statement>
    <resultMap id="result.updateAjeInvAcctDist" class="NFCL3000_ESMsg">
        <result property="ajeInvAcctDistPk_E1"           column="AJE_INV_ACCT_DIST_PK_E1"        javaType="EZDSBigDecimalItem" />
    </resultMap>

    <!-- START 2016/05/24 S.Fujita [QC#8522,ADD] -->
    <statement id="searchInvSlsCrPk" parameterClass="Map" resultMap="result.searchInvSlsCrPk">
        SELECT
             A.DS_INV_SLS_CR_PK             AS DS_INV_SLS_CR_PK_G1
        FROM
             DS_INV_SLS_CR      A
        WHERE
                A.GLBL_CMPY_CD          = #glblCmpyCd#
            AND A.INV_NUM               = #invNum#
            AND A.EZCANCELFLAG          = '0'
        ORDER BY
             A.INV_BOL_LINE_NUM
            ,A.INV_LINE_NUM
            ,A.INV_LINE_SUB_NUM
            ,A.INV_TRX_LINE_SUB_NUM
            ,A.DS_INV_SLS_CR_PK
    </statement>

    <resultMap id="result.searchInvSlsCrPk" class="NFCL3000_GCMsg">
        <result property="dsInvSlsCrPk_G1"              column="DS_INV_SLS_CR_PK_G1"            javaType="EZDCBigDecimalItem" />
    </resultMap>
    <!-- END   2016/05/24 S.Fujita [QC#8522,ADD] -->


    <!-- START 2016/06/20 S.Fujita [QC#9454,ADD] -->
    <statement id="searchSellto" parameterClass="Map" resultClass="Map">
		SELECT
			A.LOC_NM,
			A.ADDL_LOC_NM,
			A.FIRST_LINE_ADDR,
			A.SCD_LINE_ADDR,
			A.THIRD_LINE_ADDR,
			A.FRTH_LINE_ADDR,
			A.CTY_ADDR,
			A.PROV_NM,
			A.ST_CD,
			A.POST_CD,
			A.CTRY_CD,
			A.FIRST_REF_CMNT_TXT,
			A.SCD_REF_CMNT_TXT,
			B.CNTY_NM
		FROM
			SELL_TO_CUST A, CNTY B
		WHERE
			A.GLBL_CMPY_CD = #glblCmpyCd#
		AND A.SELL_TO_CUST_CD = #sellToCustCd#
		AND	A.EZCANCELFLAG = '0'
		AND	A.GLBL_CMPY_CD = B.GLBL_CMPY_CD(+)
		AND A.CNTY_PK = B.CNTY_PK(+)
		AND B.EZCANCELFLAG(+) = '0'
    </statement>

    <statement id="searchInvRcpnt" parameterClass="Map" resultClass="Map">
        SELECT
            IR.LOC_NM,
            IR.ADDL_LOC_NM,
            IR.FIRST_LINE_ADDR,
            IR.SCD_LINE_ADDR,
            IR.THIRD_LINE_ADDR,
            IR.FRTH_LINE_ADDR,
            IR.CTY_ADDR,
            IR.PROV_NM,
            IR.ST_CD,
            IR.POST_CD,
            IR.CTRY_CD,
            CNT.CNTY_NM
        FROM
            INV_RCPNT IR
           ,CNTY CNT
        WHERE
            IR.GLBL_CMPY_CD          = #glblCmpyCd#
        AND IR.INV_RCPNT_CUST_CD     = #invRcpntCustCd#
        AND IR.RGTN_STS_CD           = #rgtnStsCd#
        AND IR.EZCANCELFLAG          = '0'
        AND IR.GLBL_CMPY_CD          = CNT.GLBL_CMPY_CD(+)
        AND IR.CNTY_PK               = CNT.CNTY_PK(+)
        AND CNT.EZCANCELFLAG(+)      = '0'
    </statement>

    <statement id="searchInvRcpntCust" parameterClass="Map" resultClass="Map">
        SELECT
              IR.INV_RCPNT_CUST_CD
        FROM
              BILL_TO_CUST B
             ,INV_RCPNT IR
        WHERE
                B.GLBL_CMPY_CD        = #glblCmpyCd#
            AND B.BILL_TO_CUST_CD     = #billToCustCd#
            AND B.EZCANCELFLAG        = '0'
            AND IR.GLBL_CMPY_CD       = B.GLBL_CMPY_CD
            AND IR.PTY_LOC_PK         = B.PTY_LOC_PK
            AND IR.RGTN_STS_CD        = #rgtnStsCd#
            AND IR.INV_RCPNT_DEF_FLG  = 'Y'
            AND IR.EZCANCELFLAG       = '0'
            AND ROWNUM                = 1
    </statement>

    <statement id="searchFlPlnCmpyFlg" parameterClass="Map" resultClass="Map">
        SELECT
            A.FL_PLN_CMPY_FLG
        FROM
            BILL_TO_CUST A
        WHERE
            A.GLBL_CMPY_CD = #glblCmpyCd#
        AND A.BILL_TO_CUST_CD = #payerCustCd#
        AND A.EZCANCELFLAG = '0'
    </statement>

    <statement id="searchShipto2" parameterClass="Map" resultClass="Map">
        SELECT
            A.LOC_NM,
            A.ADDL_LOC_NM,
            A.FIRST_LINE_ADDR,
            A.SCD_LINE_ADDR,
            A.THIRD_LINE_ADDR,
            A.FRTH_LINE_ADDR,
            A.CTY_ADDR,
            A.PROV_NM,
            A.ST_CD,
            A.POST_CD,
            A.CTRY_CD,
            A.FIRST_REF_CMNT_TXT,
            A.SCD_REF_CMNT_TXT,
            B.CNTY_NM
        FROM
            SHIP_TO_CUST A, CNTY B
        WHERE
            A.GLBL_CMPY_CD = #glblCmpyCd#
        AND A.SHIP_TO_CUST_CD = #shipToCustCd#
        AND A.RGTN_STS_CD     = #rgtnStsCd#
        AND A.EZCANCELFLAG = '0'
        AND A.GLBL_CMPY_CD = B.GLBL_CMPY_CD(+)
        AND A.CNTY_PK = B.CNTY_PK(+)
        AND B.EZCANCELFLAG(+) = '0'
    </statement>

    <statement id="searchSellToCust" parameterClass="Map" resultClass="Map">
        SELECT
            A.DS_ACCT_NM
        FROM
            SELL_TO_CUST A
        WHERE
            A.GLBL_CMPY_CD = #glblCmpyCd#
        AND A.SELL_TO_CUST_CD  = #sellToCustCd#
        AND A.EZCANCELFLAG = '0'
    </statement>

    <statement id="searchCtacPsnList" parameterClass="Map" resultClass="Map">
        SELECT
            A.CTAC_PSN_PK
        FROM
            CTAC_PSN A
        WHERE
            A.GLBL_CMPY_CD = #glblCmpyCd#
        AND A.CTAC_PSN_FIRST_NM  = #ctacPsnFirstNm#
        AND A.CTAC_PSN_LAST_NM  = #ctacPsnLastNm#
        AND A.EZCANCELFLAG = '0'
    </statement>

<!-- START 2019/05/27 S.Takami [QC#50541,DEL] -->
    <!-- statement id="searchMdse" parameterClass="Map" resultClass="Map" -->
<!--         SELECT -->
<!--             A.MDSE_NM, -->
<!--             A.MDSE_TP_CD, -->
<!--             A.ZEROTH_PROD_CTRL_CD, -->
<!--             A.ZEROTH_PROD_CTRL_NM, -->
<!--             A.FIRST_PROD_CTRL_CD, -->
<!--             A.FIRST_PROD_CTRL_NM, -->
<!--             A.SCD_PROD_CTRL_CD, -->
<!--             A.SCD_PROD_CTRL_NM, -->
<!--             A.THIRD_PROD_CTRL_CD, -->
<!--             A.THIRD_PROD_CTRL_NM, -->
<!--             A.FRTH_PROD_CTRL_CD, -->
<!--             A.FRTH_PROD_CTRL_NM, -->
<!--             A.FIFTH_PROD_CTRL_CD, -->
<!--             A.FIFTH_PROD_CTRL_NM, -->
<!--             A.SIXTH_PROD_CTRL_CD, -->
<!--             A.SIXTH_PROD_CTRL_NM, -->
<!--             A.SVNTH_PROD_CTRL_CD, -->
<!--             A.SVNTH_PROD_CTRL_NM, -->
<!--             A.COA_PROD_CD, -->
<!--             A.THIS_MTH_TOT_STD_COST_AMT, -->
<!--             A.EXP_ITEM_FLG, -->
<!--             B.COA_PROD_NM -->
<!--         FROM -->
<!--             ALL_MDSE_V  A -->
<!--            ,COA_PROD    B -->
<!--         WHERE -->
<!--             A.GLBL_CMPY_CD = #glblCmpyCd# -->
<!--         AND A.MDSE_CD = #mdseCd# -->
<!--         AND A.EZCANCELFLAG = '0' -->
<!--         AND A.GLBL_CMPY_CD = B.GLBL_CMPY_CD (+) -->
<!--         AND A.COA_PROD_CD = B.COA_PROD_CD (+) -->
<!--         AND B.EZCANCELFLAG (+) = '0' -->
    <!-- /statement -->
<!-- END 2019/05/27 S.Takami [QC#50541,DEL] -->

    <statement id="searchTaxAcct" parameterClass="Map" resultClass="Map">
        SELECT
            STC.DS_TAX_GRP_EXEM_CD
        FROM
            SELL_TO_CUST STC
        WHERE
            STC.GLBL_CMPY_CD     = #glblCmpyCd#
        AND STC.SELL_TO_CUST_CD  = #acctNum#
        AND STC.RGTN_STS_CD      = #rgtnStsCd#
        AND STC.EZCANCELFLAG     = '0'
    </statement>

    <statement id="searchTaxShipto" parameterClass="Map" resultClass="Map">
        SELECT
             ST.DS_TAX_GRP_EXEM_CD
            ,ST.GEO_CD
            ,ST.DS_INSD_CTY_LIMIT_FLG
            ,ST.CNTY_PK
        FROM
             SHIP_TO_CUST ST
        WHERE
                ST.GLBL_CMPY_CD     = #glblCmpyCd#
            AND ST.SHIP_TO_CUST_CD  = #shipToCustCd#
            AND ST.RGTN_STS_CD      = #rgtnStsCd#
            AND ST.EZCANCELFLAG     = '0'

    </statement>

    <statement id="searchSalesRepAdress" parameterClass="Map" resultClass="Map">
        SELECT
             SP.FIRST_LINE_ADDR
            ,SP.SCD_LINE_ADDR
            ,SP.THIRD_LINE_ADDR
            ,SP.FRTH_LINE_ADDR
            ,SP.CTY_ADDR
            ,SP.CNTY_PK
            ,SP.PROV_NM
            ,SP.ST_CD
            ,SP.POST_CD
            ,SP.CTRY_CD
            ,SP.GEO_CD
            ,SP.DS_INSD_CTY_LIMIT_FLG
        FROM
             ORG_FUNC_ASG OFA
            ,S21_PSN SP
        WHERE
                OFA.GLBL_CMPY_CD  = #glblCmpyCd#
            AND OFA.TOC_CD        = #tocCd#
            AND OFA.EFF_FROM_DT   &lt;= #invDt#
            AND NVL(OFA.EFF_THRU_DT,'99991231')   &gt;= #invDt#

            AND SP.GLBL_CMPY_CD   = OFA.GLBL_CMPY_CD
            AND SP.PSN_CD         = OFA.PSN_CD
            
            AND OFA.EZCANCELFLAG  = '0'
            AND SP.EZCANCELFLAG   = '0'
    </statement>

    <statement id="searchDsInvtyLoc" parameterClass="Map" resultClass="Map">
        SELECT
             A.GEO_CD
            ,A.FIRST_LINE_ADDR
            ,A.SCD_LINE_ADDR
            ,A.CTY_ADDR
            ,A.CNTY_PK
            ,A.ST_CD
            ,A.POST_CD
            ,A.CTRY_CD
        FROM
             DS_INVTY_LOC_V A
        WHERE
                A.GLBL_CMPY_CD = #glblCmpyCd#
            AND A.INVTY_LOC_CD = #invtyLocCd#
            AND A.EZCANCELFLAG = '0'
    </statement>

    <statement id="getSoldToCustLocNm" parameterClass="Map" resultClass="Map">
        SELECT
            BT.LOC_NM
        FROM
            BILL_TO_CUST BT
        WHERE
                BT.GLBL_CMPY_CD     = #glblCmpyCd#
            AND BT.BILL_TO_CUST_CD  = #billToCustCd#
            AND BT.RGTN_STS_CD      = #rgtnStsCd#
            AND BT.EZCANCELFLAG     = '0'
    </statement>

    <statement id="searchDsInvSlsCrList" parameterClass="Map" resultClass="Map">
        SELECT
            A.DS_INV_SLS_CR_PK
        FROM
            DS_INV_SLS_CR   A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
            AND A.INV_NUM       = #invNum#
            AND A.EZCANCELFLAG  = '0'
    </statement>

    <statement id="searchInvPrmoInfoList" parameterClass="Map" resultClass="Map">
        SELECT
            A.INV_PRMO_INFO_PK
        FROM
            INV_PRMO_INFO   A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
            AND A.INV_NUM       = #invNum#
            AND A.EZCANCELFLAG  = '0'
    </statement>

    <statement id="searchAjeInvAcctDistDfrdList" parameterClass="Map" resultClass="Map">
        SELECT
            A.AJE_INV_ACCT_DIST_PK
        FROM
            AJE_INV_ACCT_DIST   A
        WHERE
                A.GLBL_CMPY_CD              = #glblCmpyCd#
            AND A.INV_NUM                   = #invNum#
            AND A.AJE_INV_ACCT_CLS_CD       = #dfrd#
            AND A.EZCANCELFLAG              = '0'
    </statement>

    <statement id="searchDsInvLineTaxDtlList" parameterClass="Map" resultClass="Map">
        SELECT
            A.DS_INV_LINE_TAX_DTL_PK
        FROM
            DS_INV_LINE_TAX_DTL A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
            AND A.INV_NUM       = #invNum#
            AND A.EZCANCELFLAG  = '0'
    </statement>

    <!-- END   2016/06/20 S.Fujita [QC#9454,ADD] -->

    <!-- START 2016/07/20 S.Fujita [QC#10148,ADD] -->
    <statement id="searchAjeInvAcctDistList" parameterClass="Map" resultClass="Map">
        SELECT
            A.AJE_INV_ACCT_DIST_PK
        FROM
            AJE_INV_ACCT_DIST   A
        WHERE
                A.GLBL_CMPY_CD              = #glblCmpyCd#
            AND A.INV_NUM                   = #invNum#
            AND A.EZCANCELFLAG              = '0'
    </statement>

    <statement id="searchAjeInvAcctDistErrList" parameterClass="Map" resultClass="Map">
        SELECT
            A.AJE_INV_ACCT_DIST_ERR_PK
        FROM
            AJE_INV_ACCT_DIST_ERR   A
        WHERE
                A.GLBL_CMPY_CD              = #glblCmpyCd#
            AND A.INV_NUM                   = #invNum#
            AND A.EZCANCELFLAG              = '0'
    </statement>

    <statement id="getDsAcctNm" parameterClass="Map" resultClass="String">
        SELECT
                STC.DS_ACCT_NM
        FROM
                SELL_TO_CUST STC
        WHERE
                STC.GLBL_CMPY_CD      = #glblCmpyCd#
            AND STC.EZCANCELFLAG      = '0'
            AND STC.SELL_TO_CUST_CD   = #dsAcctNum#
            AND STC.RGTN_STS_CD       = #rgtnStsCd#
            AND ROWNUM            &lt;= $rowNum$
    </statement>

    <statement id="getChrgTpPullDownList" parameterClass="Map" resultClass="Map">
        SELECT
             A.SVC_INV_CHRG_TP_CD
            ,A.SVC_INV_CHRG_TP_NM
        FROM
            SVC_INV_CHRG_TP  A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
            AND A.EZCANCELFLAG  = '0'
        ORDER BY
            A.SVC_INV_CHRG_TP_SORT_NUM
    </statement>

    <statement id="getCrDrRsnPullDownList" parameterClass="Map" resultClass="Map">
        SELECT
             A.CR_DR_RSN_CD
            ,A.CR_DR_RSN_NM
        FROM
            CR_DR_RSN  A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
            AND A.EZCANCELFLAG  = '0'
        ORDER BY
            A.CR_DR_RSN_SORT_NUM
    </statement>

    <statement id="getDsOrdCatgPullDownList" parameterClass="Map" resultClass="Map">
        SELECT
             A.DS_ORD_CATG_CD
            ,A.DS_ORD_CATG_NM
        FROM
            DS_ORD_CATG  A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
            AND A.EZCANCELFLAG  = '0'
            AND ROWNUM      &lt;= 99
        ORDER BY
            A.DS_ORD_CATG_SORT_NUM
    </statement>
    <!-- END   2016/07/20 S.Fujita [QC#10148,ADD] -->

    <!-- START 2016/08/01 [QC#9192,ADD] -->
    <statement id="getTaxAreaId" parameterClass="Map" resultClass="String">
        SELECT
            TA.TAX_AREA_ID
        FROM
            TAX_AREA TA
        WHERE 
            TA.GLBL_CMPY_CD = #glblCmpyCd#
        <isNotNull property="ctyAddr">
        AND TA.CTY_ADDR     = #ctyAddr#
        </isNotNull>
        <isNull property="ctyAddr">
        AND TA.CTY_ADDR    IS NULL
        </isNull>
        <isNotNull property="cntyPk">
        AND TA.CNTY_PK      = #cntyPk#
        </isNotNull>
        <isNull property="cntyPk">
        AND TA.CNTY_PK     IS NULL
        </isNull>
        AND TA.ST_CD        = #stCd#
        AND TA.EZCANCELFLAG = '0'
        AND ROWNUM          = 1
    </statement>
    <!-- END   2016/08/01 [QC#9192,ADD] -->

    <!-- START 2016/11/17 [QC#14096,ADD] -->
    <statement id="getSerNumINV" parameterClass="Map" resultClass="String">
        SELECT 
            SER.SER_NUM
        FROM
            DS_INV_LINE_SER_NUM SER
        WHERE
                SER.GLBL_CMPY_CD            = #glblCmpyCd# 
            AND SER.INV_NUM                 = #invNum#
            AND SER.INV_BOL_LINE_NUM        = #invBolLineNum#
            AND SER.INV_LINE_NUM            = #invLineNum#
            AND SER.INV_LINE_SUB_NUM        = #invLineSubNum#
            AND SER.INV_TRX_LINE_SUB_NUM    = #invTrxLineSubNum#
            AND SER.EZCANCELFLAG            = '0'
            AND ROWNUM                      = 1
    </statement>
    
    <statement id="getSerNumSvcINV" parameterClass="Map" resultClass="String">
        SELECT 
            CASE SI.SVC_INV_SRC_TP_CD
                 WHEN #srcTpCdDSPT# THEN SI.SER_NUM
                 WHEN #srcTpCdCNTR# THEN SIL.SER_NUM
            END SER_NUM
        FROM
              INV_LINE          IL
            , SVC_INV_LINE      SIL
            , SVC_INV           SI
        WHERE
            IL.GLBL_CMPY_CD             = #glblCmpyCd#
        AND IL.INV_NUM                  = #invNum#
        AND IL.INV_BOL_LINE_NUM         = #invBolLineNum#
        AND IL.INV_LINE_NUM             = #invLineNum#
        AND IL.INV_LINE_SUB_NUM         = #invLineSubNum#
        AND IL.INV_LINE_SUB_TRX_NUM     = #invLineSubTrxNum#
        AND IL.EZCANCELFLAG             = '0'

        AND IL.GLBL_CMPY_CD             = SIL.GLBL_CMPY_CD
        AND IL.SVC_INV_LINE_PK          = SIL.SVC_INV_LINE_PK
        AND SIL.EZCANCELFLAG            = '0'

        AND SIL.GLBL_CMPY_CD            = SI.GLBL_CMPY_CD
        AND SIL.SVC_INV_NUM             = SI.SVC_INV_NUM
        AND SI.EZCANCELFLAG             = '0'

        AND ROWNUM = 1
    </statement>
    <!-- END   2016/11/17 [QC#14096,ADD] -->

    <!-- START 2016/11/22 S.Fujita [QC#16154,ADD] -->
    <statement id="getAjeInvAcctDistList" parameterClass="Map" resultClass="Map">
        SELECT
            AID.DS_INV_SLS_CR_PK
           ,AID.AJE_INV_ACCT_DIST_PK
        FROM
            AJE_INV_ACCT_DIST   AID
        WHERE
                AID.GLBL_CMPY_CD        = #glblCmpyCd#
            AND AID.INV_NUM             = #invNum#
            AND AID.EZCANCELFLAG        = '0'
        ORDER BY
            AID.DS_INV_SLS_CR_PK
           ,AID.AJE_INV_ACCT_DIST_PK
    </statement>
    <!-- END   2016/11/22 S.Fujita [QC#16154,ADD] -->

    <!-- START 2018/05/22 Y.Matsui [QC#21841,ADD] -->
    <statement id="getInvLineCatgPullDownList" parameterClass="Map" resultClass="Map">
        SELECT
             A.INV_LINE_CATG_CD
            ,A.INV_LINE_CATG_NM
        FROM
            INV_LINE_CATG  A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
            AND A.EZCANCELFLAG  = '0'
        ORDER BY
            A.INV_LINE_CATG_SORT_NUM
    </statement>
    <!-- END   2018/05/22 Y.Matsui [QC#21841,ADD] -->

    <!-- START 2018/07/19 E.Kameishi [QC#27007,ADD] -->
    <statement id="getPmtTermFromCustCrPrfl" parameterClass="Map" resultClass="String">
        SELECT
            A.PMT_TERM_CASH_DISC_CD
        FROM
            CUST_CR_PRFL  A
            <isNull property="billToCustCd">
           ,BILL_TO_CUST  B
            </isNull>
        WHERE
                A.GLBL_CMPY_CD    = #glblCmpyCd#
            AND A.EZCANCELFLAG    = '0'
            <isNotNull property="billToCustCd">
            AND A.BILL_TO_CUST_CD = #billToCustCd#
            </isNotNull>
            <isNull property="billToCustCd">
            AND B.GLBL_CMPY_CD    = A.GLBL_CMPY_CD
            AND B.EZCANCELFLAG    = A.EZCANCELFLAG
            AND B.BILL_TO_CUST_CD = A.BILL_TO_CUST_CD
            AND B.SELL_TO_CUST_CD = #billToCustAcctCd#
            AND B.LOC_NUM         = #locNum#
            </isNull>
    </statement>
    
    <statement id="getPmtTermFromDsAcctCrPrfl" parameterClass="Map" resultClass="String">
        SELECT
            A.PMT_TERM_CASH_DISC_CD
        FROM
            DS_ACCT_CR_PRFL  A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
            AND A.EZCANCELFLAG  = '0'
            AND A.DS_ACCT_NUM   = #billToCustAcctCd#
    </statement>

    <!-- START 2019/04/25 S.Takami [QC#50078,DEL] -->
    <!-- statement id="getInvLine" parameterClass="Map" resultClass="Map" -->
<!--         SELECT -->
<!--             A.SHIP_QTY -->
<!--            ,A.DEAL_NET_UNIT_PRC_AMT -->
<!--            ,A.INV_LINE_CATG_CD -->
<!--            ,A.INV_LINE_DEAL_NET_AMT -->
<!--         FROM -->
<!--             INV_LINE  A -->
<!--         WHERE -->
<!--                 A.GLBL_CMPY_CD         = #glblCmpyCd# -->
<!--             AND A.EZCANCELFLAG         = '0' -->
<!--             AND A.INV_NUM              = #invNum# -->
<!--             AND A.INV_BOL_LINE_NUM     = #invBolLineNum# -->
<!--             AND A.INV_LINE_NUM         = #invLineNum# -->
<!--             AND A.INV_LINE_SUB_NUM     = #invLineSubNum# -->
<!--             AND A.INV_LINE_SUB_TRX_NUM = #invLineSubTrxNum# -->
    <!-- /statement -->
    <!-- END 2019/04/25 S.Takami [QC#50078,DEL] -->
    <!-- END 2018/07/19 E.Kameishi [QC#27007,ADD] -->

    <!-- START 2018/09/19 S.Ohki [QC#28089,ADD] -->
    <statement id="isCreditApplied" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            COUNT(*)
        FROM 
            AR_CASH_APP  ACA_I
           ,AR_TRX_BAL   ATB_I
        WHERE
            ACA_I.GLBL_CMPY_CD    = #glblCmpyCd#
        AND ACA_I.AR_TRX_NUM      = #arTrxNum#
        AND ACA_I.AR_SCR_CANC_FLG = 'N'
        AND ACA_I.EZCANCELFLAG    = '0'
        AND ACA_I.GLBL_CMPY_CD    = ATB_I.GLBL_CMPY_CD
        AND ACA_I.AR_TRX_BAL_PK   = ATB_I.AR_TRX_BAL_PK
        AND ATB_I.AR_TRX_TP_CD    = #arTrxTpCdInv#
        AND ATB_I.EZCANCELFLAG    = '0'
        AND EXISTS (
            SELECT
                *
            FROM
                AR_CASH_APP  ACA_C
               ,AR_TRX_BAL   ATB_C
            WHERE
                ACA_C.GLBL_CMPY_CD    = ACA_I.GLBL_CMPY_CD
            AND ACA_C.RCPT_NUM        = ACA_I.RCPT_NUM
            AND ACA_C.AR_SCR_CANC_FLG = 'N'
            AND ACA_C.EZCANCELFLAG    = '0'
            AND ACA_C.GLBL_CMPY_CD    = ATB_C.GLBL_CMPY_CD
            AND ACA_C.AR_TRX_BAL_PK   = ATB_C.AR_TRX_BAL_PK
            AND ATB_C.AR_TRX_TP_CD    = #arTrxTpCdCrm#
            AND ATB_C.EZCANCELFLAG    = '0'
        )
    </statement>
    <!-- END 2018/09/19 S.Ohki [QC#28089,ADD] -->
    <!-- START 2019/04/25 S.Takami [QC#50078,ADD] -->
    <statement id="getPkgUomByBaseUomCd" parameterClass="Map" resultMap="result.getPkgUomByBaseUomCd">
        SELECT
            MSP.GLBL_CMPY_CD
            ,MSP.PKG_UOM_CD
            ,MSP.MDSE_CD
            ,MSP.SCC14_NUM
            ,MSP.GTIN_CD
            ,MSP.IN_EACH_QTY
            ,MSP.IN_INCH_LG
            ,MSP.IN_INCH_WDT
            ,MSP.IN_INCH_HGT
            ,MSP.IN_POUND_WT
            ,MSP.IN_INCH_VOL
            ,MSP.OVRD_UPC_OR_SCC14_NUM
            ,MSP.UPC_OR_SCC14_LB_FLG
            ,MSP.QTY_PKG_APVL_USER_ID
            ,MSP.QTY_PKG_APVL_UPD_DT
            ,MSP.QTY_PKG_APVL_STS_CD
            ,MSP.DMN_PKG_APVL_USER_ID
            ,MSP.DMN_PKG_APVL_UPD_DT
            ,MSP.DMN_PKG_APVL_STS_CD
            ,MSP.ADMIN_PKG_APVL_USER_ID
            ,MSP.ADMIN_PKG_APVL_UPD_DT
            ,MSP.ADMIN_PKG_APVL_STS_CD
            ,MSP.PRIM_PKG_UOM_FLG
            ,MSP.BASE_PKG_UOM_CD
        FROM
            MDSE_STORE_PKG MSP
        WHERE
            MSP.GLBL_CMPY_CD        = #glblCmpyCd#
            AND MSP.MDSE_CD         = #mdseCd#
            AND MSP.BASE_PKG_UOM_CD = #basePkgUomCd#
            AND MSP.EZCANCELFLAG    = '0'
        ORDER BY
            MSP.PRIM_PKG_UOM_FLG DESC
            ,MSP.PKG_UOM_CD ASC
    </statement>

    <resultMap id="result.getPkgUomByBaseUomCd" class="MDSE_STORE_PKGTMsg">
        <result property="glblCmpyCd"           column="GLBL_CMPY_CD"           javaType="EZDTStringItem" />
        <result property="pkgUomCd"             column="PKG_UOM_CD"             javaType="EZDTStringItem" />
        <result property="mdseCd"               column="MDSE_CD"                javaType="EZDTStringItem" />
        <result property="scc14Num"             column="SCC14_NUM"              javaType="EZDTStringItem" />
        <result property="gtinCd"               column="GTIN_CD"                javaType="EZDTStringItem" />
        <result property="inEachQty"            column="IN_EACH_QTY"            javaType="EZDTBigDecimalItem" />
        <result property="inInchLg"             column="IN_INCH_LG"             javaType="EZDTBigDecimalItem" />
        <result property="inInchWdt"            column="IN_INCH_WDT"            javaType="EZDTBigDecimalItem" />
        <result property="inInchHgt"            column="IN_INCH_HGT"            javaType="EZDTBigDecimalItem" />
        <result property="inPoundWt"            column="IN_POUND_WT"            javaType="EZDTBigDecimalItem" />
        <result property="inInchVol"            column="IN_INCH_VOL"            javaType="EZDTBigDecimalItem" />
        <result property="ovrdUpcOrScc14Num"    column="OVRD_UPC_OR_SCC14_NUM"  javaType="EZDTStringItem" />
        <result property="upcOrScc14LbFlg"      column="UPC_OR_SCC14_LB_FLG"    javaType="EZDTStringItem" />
        <result property="qtyPkgApvlUserId"     column="QTY_PKG_APVL_USER_ID"   javaType="EZDTStringItem" />
        <result property="qtyPkgApvlUpdDt"      column="QTY_PKG_APVL_UPD_DT"    javaType="EZDTDateItem" />
        <result property="qtyPkgApvlStsCd"      column="QTY_PKG_APVL_STS_CD"    javaType="EZDTStringItem" />
        <result property="dmnPkgApvlUserId"     column="DMN_PKG_APVL_USER_ID"   javaType="EZDTStringItem" />
        <result property="dmnPkgApvlUpdDt"      column="DMN_PKG_APVL_UPD_DT"    javaType="EZDTStringItem" />
        <result property="dmnPkgApvlStsCd"      column="DMN_PKG_APVL_STS_CD"    javaType="EZDTStringItem" />
        <result property="adminPkgApvlUserId"   column="ADMIN_PKG_APVL_USER_ID" javaType="EZDTStringItem" />
        <result property="adminPkgApvlUpdDt"    column="ADMIN_PKG_APVL_UPD_DT"  javaType="EZDTDateItem" />
        <result property="adminPkgApvlStsCd"    column="ADMIN_PKG_APVL_STS_CD"  javaType="EZDTStringItem" />
        <result property="primPkgUomFlg"        column="PRIM_PKG_UOM_FLG"       javaType="EZDTStringItem" />
        <result property="basePkgUomCd"         column="BASE_PKG_UOM_CD"        javaType="EZDTStringItem" />
    </resultMap>
    <!-- END 2019/04/25 S.Takami [QC#50078,ADD] -->

    <!-- START 2019/04/25 S.Takami [QC#50078,ADD] -->
    <statement id="getBllgCycleUomPullDownList" parameterClass="Map" resultClass="Map">
        SELECT
            BCU.BLLG_CYCLE_UOM_CD
            ,BCU.BLLG_CYCLE_UOM_DESC_TXT
        FROM
             BLLG_CYCLE_UOM BCU
        WHERE
            BCU.GLBL_CMPY_CD = #glblCmpyCd#
            AND BCU.EZCANCELFLAG = '0'
        ORDER BY
            BCU.BLLG_CYCLE_UOM_SORT_NUM
    </statement>
    <!-- END 2019/04/25 S.Takami [QC#50078,ADD] -->
<!-- START 2019/05/27 S.Takami [QC#50541,ADD] -->
    <statement id="getTaxAdjItem" parameterClass="Map" resultMap="result.getTaxAdjItem">
        SELECT
             GLBL_CMPY_CD
            ,MDSE_CD
            ,AR_ADJ_TP_CD
            ,TRX_CD
            ,TRX_RSN_CD
        FROM
            TAX_ADJ_ITEM
        WHERE
            GLBL_CMPY_CD = #glblCmpyCd#
            AND EZCANCELFLAG = '0'
        ORDER BY
            MDSE_CD
    </statement>
    <resultMap id="result.getTaxAdjItem" class="TAX_ADJ_ITEMTMsg">
        <result property="glblCmpyCd"       column="GLBL_CMPY_CD"       javaType="EZDTStringItem" />
        <result property="mdseCd"           column="MDSE_CD"            javaType="EZDTStringItem" />
        <result property="arAdjTpCd"        column="AR_ADJ_TP_CD"       javaType="EZDTStringItem" />
        <result property="trxCd"            column="TRX_CD"             javaType="EZDTStringItem" />
        <result property="trxRsnCd"         column="TRX_RSN_CD"         javaType="EZDTStringItem" />
    </resultMap>
<!-- END 2019/05/27 S.Takami [QC#50541,ADD] -->
    <!-- START 2021/01/04 R.Kurahashi [QC#56282, ADD] -->
    <statement id="getSrcTpCd" parameterClass="Map" resultClass="String">
        SELECT 
            SI.SVC_INV_SRC_TP_CD
        FROM
              INV_LINE          IL
            , SVC_INV_LINE      SIL
            , SVC_INV           SI
        WHERE
            IL.GLBL_CMPY_CD             = #glblCmpyCd#
        AND IL.INV_NUM                  = #invNum#
        AND IL.INV_BOL_LINE_NUM         = #invBolLineNum#
        AND IL.INV_LINE_NUM             = #invLineNum#
        AND IL.INV_LINE_SUB_NUM         = #invLineSubNum#
        AND IL.INV_LINE_SUB_TRX_NUM     = #invLineSubTrxNum#
        AND IL.EZCANCELFLAG             = '0'

        AND IL.GLBL_CMPY_CD             = SIL.GLBL_CMPY_CD
        AND IL.SVC_INV_LINE_PK          = SIL.SVC_INV_LINE_PK
        AND SIL.EZCANCELFLAG            = '0'

        AND SIL.GLBL_CMPY_CD            = SI.GLBL_CMPY_CD
        AND SIL.SVC_INV_NUM             = SI.SVC_INV_NUM
        AND SI.EZCANCELFLAG             = '0'

        AND ROWNUM = 1
    </statement>
    <!-- END 2021/01/04 R.Kurahashi [QC#56282, ADD] -->
    <!-- START 2021/10/25 S.Go [QC#55215, ADD] -->
    <statement id="getCOALineBizTpCd" parameterClass="Map" resultClass="String">
        SELECT
            CL.LINE_BIZ_TP_CD
        FROM
              TOC               T
            , COA_CC            C
            , COA_LINE_BIZ_TP   CL
        WHERE
            T.GLBL_CMPY_CD            = #glblCmpyCd#
        AND T.TOC_CD                  = #invSlsRepTocCd#
        AND T.EZCANCELFLAG            = '0'

        AND T.GLBL_CMPY_CD            = C.GLBL_CMPY_CD
        AND T.COA_CC_CD               = C.COA_CC_CD
        AND C.EZCANCELFLAG            = '0'

        AND C.GLBL_CMPY_CD            = CL.GLBL_CMPY_CD
        AND CL.COA_LINE_BIZ_TP_CD     = (CASE WHEN C.COA_LINE_BIZ_TP_CD IS NULL THEN 'ADMIN' ELSE C.COA_LINE_BIZ_TP_CD END)
        AND CL.EZCANCELFLAG           = '0'

        AND ROWNUM = 1
    </statement>
    <!-- END 2021/10/25 S.Go [QC#55215, ADD] -->
</sqlMap>
