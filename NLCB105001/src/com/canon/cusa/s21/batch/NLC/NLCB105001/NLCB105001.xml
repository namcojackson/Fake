<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NLCB105001">

    <statement id="getPartsStockInResultWork" parameterClass="Map">
		SELECT
		     GLBL_CMPY_CD				AS GLBL_CMPY_3_CD
			,CINC_GLBL_WH_CD
			,INTFC_STK_IN_DT
			,INTFC_PO_ORD_NUM
			,CINC_SS_NUM
			,CINC_SPLY_GLBL_CMPY_CD
			,CINC_SPLY_GLBL_WH_CD
			,CINC_VND_GLBL_CMPY_CD
			,INTFC_PRT_VND_CD
			,INTFC_PRT_MDSE_CD
			,PRT_SIZE_TXT
			,CINC_GLBL_SHPG_METH_CD
			,CINC_STK_IN_GLBL_CATG_CD
			,CINC_PO_GLBL_CATG_CD
			,PRT_CHRG_IND
			,SUM(
				CASE INTFC_STK_IN_SGN_TXT
					WHEN #stockInSignPlus#  THEN INTFC_STK_IN_QTY
					WHEN #stockInSignMinus# THEN INTFC_STK_IN_QTY * -1
					ELSE INTFC_STK_IN_QTY
				END
			) AS INTFC_STK_IN_QTY
			,INTFC_CRAT_DT
			,MAX(INVTY_TRX_PK) AS INVTY_TRX_PK
		FROM
			  PRT_STK_IN_RSLT_WRK
		WHERE
				GLBL_CMPY_CD = #glblCmpyCd#
			AND INTFC_PROC_FLG = #intfcProcFlg#
			AND EZCANCELFLAG = '0'
		GROUP BY
		     GLBL_CMPY_CD
			,CINC_GLBL_WH_CD
			,INTFC_STK_IN_DT
			,INTFC_PO_ORD_NUM
			,CINC_SS_NUM
			,CINC_SPLY_GLBL_CMPY_CD
			,CINC_SPLY_GLBL_WH_CD
			,CINC_VND_GLBL_CMPY_CD
			,INTFC_PRT_VND_CD
			,INTFC_PRT_MDSE_CD
			,PRT_SIZE_TXT
			,CINC_GLBL_SHPG_METH_CD
			,CINC_STK_IN_GLBL_CATG_CD
			,CINC_PO_GLBL_CATG_CD
			,PRT_CHRG_IND
			,INTFC_CRAT_DT
		ORDERã€€BY
			INVTY_TRX_PK
    </statement>
</sqlMap>
