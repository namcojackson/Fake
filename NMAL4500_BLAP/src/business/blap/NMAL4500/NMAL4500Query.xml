<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NMAL4500Query">

	<typeAlias alias="NMAL4500CMsg"		type="business.blap.NMAL4500.NMAL4500CMsg"/>
	<typeAlias alias="NMAL4500_BSMsg"	type="business.blap.NMAL4500.NMAL4500_BSMsg"/>
	<typeAlias alias="NMAL4500_CSMsg"	type="business.blap.NMAL4500.NMAL4500_CSMsg"/>

	<!-- DEL START 2013/08/05 QC1469 -->
	<!-- <statement id="getST_CD" parameterClass="Map" resultMap="result.getstcd"> -->
	<!-- 	SELECT -->
	<!-- 			B.ST_CD		AS ST_CD_B1	 -->
	<!-- 		   ,B.ST_NM		AS ST_NM_B1	 -->
	<!-- 	FROM -->
	<!-- 			POST A -->
	<!-- 	       ,ST B -->
	<!-- 	WHERE -->
	<!-- 			A.GLBL_CMPY_CD  = #globalCompanyCode# -->
	<!-- 		AND B.GLBL_CMPY_CD  = #globalCompanyCode# -->
	<!-- 		AND A.EZCANCELFLAG  = '0' -->
	<!-- 		AND B.EZCANCELFLAG  = '0' -->
	<!-- 		AND A.ST_CD = B.ST_CD -->
	<!-- 		AND A.POST_CD = #postCode# -->
	<!-- 	GROUP BY B.ST_CD, B.ST_NM -->
	<!-- </statement> -->
	<!-- 	<resultMap id="result.getstcd" 	class="NMAL4500_BSMsg"> -->
	<!-- 	<result property="stCd_B1"   				column="ST_CD_B1"						javaType="EZDSStringItem"/> -->
	<!-- 	<result property="stNm_B1"   				column="ST_NM_B1"						javaType="EZDSStringItem"/> -->
	<!-- </resultMap> -->
	<!-- <statement id="getCNTY" parameterClass="Map" resultMap="result.getcnty"> -->
	<!-- 	SELECT -->
    <!--            D.CNTY_PK        AS CNTY_PK_C1 -->
    <!--            ,D.CNTY_NM        AS CNTY_NM_C1  -->   
    <!--     FROM -->
    <!--            CNTY D -->
    <!--            ,(SELECT B.CNTY_PK -->
    <!--              FROM   POST A -->
    <!--                    ,CNTY_POST_RELN B -->
    <!--              WHERE -->
    <!--                     A.GLBL_CMPY_CD  = #globalCompanyCode# -->
    <!--                     AND B.GLBL_CMPY_CD  = #globalCompanyCode# -->
	<!-- 		            AND A.EZCANCELFLAG  = '0' -->
	<!-- 		            AND B.EZCANCELFLAG  = '0' -->
	<!-- 		            AND A.POST_CD = #postCode# -->
	<!-- 		            AND A.POST_PK = B.POST_PK -->
    <!--              GROUP BY B.CNTY_PK ) C -->
    <!--     WHERE -->
    <!--         D.GLBL_CMPY_CD  = #globalCompanyCode# -->
	<!-- 		AND D.EZCANCELFLAG  = '0' -->
	<!-- 		AND D.CNTY_PK = C.CNTY_PK -->
    <!--     ORDER BY  D.CNTY_NM -->
	<!-- </statement> -->
	<!-- <resultMap id="result.getcnty" 	class="NMAL4500_CSMsg"> -->
	<!-- 	<result property="cntyPk_C1"   				column="CNTY_PK_C1"						javaType="EZDSBigDecimalItem"/> -->
	<!-- 	<result property="cntyNm_C1"   				column="CNTY_NM_C1"						javaType="EZDSStringItem"/> -->
	<!-- </resultMap> -->
    <!-- DEL END 2013/08/05 QC1469 -->
	<statement id="getSameLocationVenderList" parameterClass="Map" resultClass="Map">
		SELECT
		        A.VND_PK
		FROM
		        VND A
		WHERE
				A.GLBL_CMPY_CD  = #globalCompanyCode#
	        AND A.VND_CD &lt;&gt; #vndCd#
		<isNotNull property="firstLineAddr">
	      	AND A.FIRST_LINE_ADDR  = #firstLineAddr#
		</isNotNull>
		<isNull property="firstLineAddr">
	      	AND A.FIRST_LINE_ADDR IS NULL
		</isNull>
		<isNotNull property="scdLineAddr">
	      	AND A.SCD_LINE_ADDR  = #scdLineAddr#
		</isNotNull>
		<isNull property="scdLineAddr">
	      	AND A.SCD_LINE_ADDR IS NULL
		</isNull>
		<isNotNull property="thirdLineAddr">
	      	AND A.THIRD_LINE_ADDR  = #thirdLineAddr#
		</isNotNull>
		<isNull property="thirdLineAddr">
	      	AND A.THIRD_LINE_ADDR IS NULL
		</isNull>
		<isNotNull property="frthLineAddr">
	      	AND A.FRTH_LINE_ADDR  = #frthLineAddr#
		</isNotNull>
		<isNull property="frthLineAddr">
	      	AND A.FRTH_LINE_ADDR IS NULL
		</isNull>
		<isNotNull property="ctryCd">
	      	AND A.CTRY_CD  = #ctryCd#
		</isNotNull>
		<isNull property="ctryCd">
	      	AND A.CTRY_CD IS NULL
		</isNull>
		<isNotNull property="postCd">
	      	AND A.POST_CD  = #postCd#
		</isNotNull>
		<isNull property="postCd">
	      	AND A.POST_CD IS NULL
		</isNull>
		<isNotNull property="ctyAddr">
	      	AND A.CTY_ADDR  = #ctyAddr#
		</isNotNull>
		<isNull property="ctyAddr">
	      	AND A.CTY_ADDR IS NULL
		</isNull>
		<isNotNull property="cntyPk">
	      	AND A.CNTY_PK  = #cntyPk#
		</isNotNull>
		<isNull property="cntyPk">
	      	AND A.CNTY_PK IS NULL
		</isNull>
		<isNotNull property="stCd">
	      	AND A.ST_CD  = #stCd#
		</isNotNull>
		<isNull property="stCd">
	      	AND A.ST_CD IS NULL
		</isNull>
		<isNotNull property="provNm">
	      	AND A.PROV_NM  = #provNm#
		</isNotNull>
		<isNull property="provNm">
	      	AND A.PROV_NM IS NULL
		</isNull>
			AND A.EZCANCELFLAG  = '0'
			AND ROWNUM &lt;= #rowNum#
	</statement>
	
	<statement id="getAffiliation" parameterClass="Map" resultClass="Map">
		SELECT
		        A.COA_AFFL_CD
		FROM
		        COA_AFFL A
		WHERE
				A.GLBL_CMPY_CD  = #globalCompanyCode#
	        AND A.EZCANCELFLAG  = '0'
			AND A.COA_AFFL_CD   = #coaAfflCd#
	</statement>
	
	<statement id="getImportInvoiceConsigneeByPartyCode" parameterClass="Map" resultClass="Map">
        SELECT
                A.IMPT_INV_CNSGN_CD
        FROM
                IMPT_INV_CNSGN A
        WHERE
                A.IMPT_INV_CNSGN_CD   = #ptyCd#
            AND A.GLBL_CMPY_CD        = #globalCompanyCode#
            AND A.LOC_TP_CD           = #locTpCd#
            AND A.EZCANCELFLAG        = '0'
	</statement>
	
	<statement id="getVenderCountByWHCdAndVndtpCd" parameterClass="Map" resultClass="BigDecimal">
		SELECT
		    COUNT(*)
		FROM
		     VND VD
		    ,VND_TP_RELN VTR
		WHERE
		        VD.EZCANCELFLAG =  '0'
		    AND VD.GLBL_CMPY_CD =  #glblCmpyCd#
		<isNotNull property="vndPk">
		    AND VD.VND_PK       != #vndPk#
		</isNotNull>
		    AND VD.WH_CD        =  #whCd#
		    AND VTR.VND_TP_CD   =  #vndTpCd#
		    AND VD.EZCANCELFLAG =  VTR.EZCANCELFLAG
		    AND VD.GLBL_CMPY_CD =  VTR.GLBL_CMPY_CD
		    AND VD.VND_CD       =  VTR.VND_CD
	</statement>
	<!-- ADD START 2013/08/05 QC1469 -->
	<statement id="cntStCd" parameterClass="Map" resultClass="Integer">
	    SELECT
	        COUNT(ST_CD)
	    FROM
	        ST S
	    WHERE
	            S.EZCANCELFLAG =  '0'
	        AND S.GLBL_CMPY_CD =  #globalCompanyCode#
	        AND S.ST_CD =  #stCd#
	        AND ROWNUM &lt;= 1
	</statement>
	<!-- ADD END 2013/08/05 QC1469 -->
    <!-- 10/22/2015 add start -->
    <statement id="getVndTp" parameterClass="Map" resultClass="Map">
        SELECT
            VND_TP_CD
        ,   VND_TP_NM
        FROM
            VND_TP
        WHERE
            GLBL_CMPY_CD        = #glblCmpyCd#
        AND VND_TP_CD           = #vndTpCd#
        AND EZCANCELFLAG        = '0'
    </statement>

    <statement id="getCarrTp" parameterClass="Map" resultClass="Map">
        SELECT
            CARR_TP_CD
        ,   CARR_TP_DESC_TXT
        FROM
            CARR_TP
        WHERE
            GLBL_CMPY_CD        = #glblCmpyCd#
        AND EZCANCELFLAG        = '0'
    </statement>
    <!-- 10/22/2015 add end -->

    <statement id="getAddrByPost" parameterClass="Map" resultClass="Map">
    SELECT DISTINCT
           P.CTY_ADDR
         , P.ST_CD
         , P.POST_CD
         , C.CNTY_NM
         , C.CNTY_PK
      FROM 
           POST P
         , CNTY_POST_RELN R
         , CNTY C
     WHERE 
           P.EZCANCELFLAG = '0'
       AND P.GLBL_CMPY_CD = #glblCmpyCd#
       AND P.POST_CD = #postCd#
       AND R.EZCANCELFLAG(+) = '0'
       AND R.GLBL_CMPY_CD(+) = P.GLBL_CMPY_CD
       AND R.POST_PK(+) = P.POST_PK
       AND C.EZCANCELFLAG(+) = '0'
       AND C.GLBL_CMPY_CD(+) = R.GLBL_CMPY_CD
       AND C.CNTY_PK(+) = R.CNTY_PK 
     ORDER BY
           P.CTY_ADDR
         , P.ST_CD
         , P.POST_CD
         , C.CNTY_NM
    </statement>
    
    <statement id ="getAddrInfo" parameterClass="Map" resultClass="BigDecimal">
    SELECT
           C.CNTY_PK
      FROM
           CNTY C
     WHERE
           C.GLBL_CMPY_CD = #glblCmpyCd#
       AND C.CNTY_NM      = #cntyNm#
       AND C.ST_CD        = #stCd#
       AND C.EZCANCELFLAG = '0'
    </statement>
</sqlMap>
