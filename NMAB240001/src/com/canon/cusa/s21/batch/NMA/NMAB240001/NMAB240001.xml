<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NMAB240001">
 
    <statement id="getTerritoryActivateList" parameterClass="Map" resultClass="Map">
    SELECT
        ORG.ORG_CD
        ,ORG.ORG_STRU_TP_CD
        ,ORG.EFF_FROM_DT
        ,ORG.EFF_THRU_DT
        ,ORG.ORG_NM
        ,ORG.ORG_DESC_TXT
        ,ORG.ORG_TIER_CD
        ,ORG.ORG_SVC_PLN_CD
        ,ORG.GNRN_TP_CD
        ,ORG.ORG_SHORT_NM
        ,ORG.TRTY_GRP_TP_CD
        ,ORG.TRTY_TP_CD
        ,ORG.FIRST_ORG_CD
        ,ORG.AUTO_EST_FLG
        ,ORG.CSR_RG_TP_CD
    FROM
        DS_ORG_UNIT ORG
    WHERE
        ORG.GLBL_CMPY_CD = #glblCmpyCd#
    AND ORG.EZCANCELFLAG = '0'
    AND ORG.EFF_FROM_DT &lt;= #procDt#
    AND NVL(ORG.EFF_THRU_DT, #maxEndDate#) &gt;= #procDt#
    AND ORG.GNRN_TP_CD = #gnrnTpCd_3#
    AND ORG.ORG_STRU_TP_CD = #orgStruTpCd#
    </statement>
    
    <statement id="getTerritoryRelationActivateList" parameterClass="Map" resultClass="Map">
    SELECT
        RELN.ORG_CD
        ,RELN.PRNT_ORG_CD
        ,RELN.ORG_STRU_TP_CD
        ,RELN.EFF_FROM_DT
        ,RELN.EFF_THRU_DT
        ,RELN.GNRN_TP_CD
        ,RELN.DS_ORG_RELN_PK <!-- 2017/03/07 S21_NA#17760 Add -->
    FROM
        DS_ORG_RELN RELN
    WHERE
        RELN.GLBL_CMPY_CD = #glblCmpyCd#
    AND RELN.EZCANCELFLAG = '0'
    AND RELN.EFF_FROM_DT &lt;= #procDt#
    AND NVL(RELN.EFF_THRU_DT, #maxEndDate#) &gt;= #procDt#
    AND RELN.GNRN_TP_CD = #gnrnTpCd_3#
    AND RELN.ORG_STRU_TP_CD = #orgStruTpCd#
    </statement>
    
    <statement id="getParentTerritoryActivateCount" parameterClass="Map" resultClass="Integer">
    SELECT
        COUNT(*) CNT
    FROM
        DS_ORG_UNIT ORG
    WHERE
        ORG.GLBL_CMPY_CD = #glblCmpyCd#
    AND ORG.EZCANCELFLAG = '0'
    AND ORG.EFF_FROM_DT &lt;= #procDt#
    AND NVL(ORG.EFF_THRU_DT, #maxEndDate#) &gt;= #procDt#
    AND ORG.GNRN_TP_CD IN (#gnrnTpCd_2#, #gnrnTpCd_3#)
    AND ORG.ORG_STRU_TP_CD = #orgStruTpCd#
    AND ORG.ORG_CD = #orgCd#
    </statement>
    
    <statement id="getTerritoryResourceRelationActivateList" parameterClass="Map" resultClass="Map">
    SELECT
        RESRC.ORG_CD
        ,RESRC.ORG_STRU_TP_CD
        ,RESRC.PSN_CD
        ,RESRC.ORG_FUNC_ROLE_TP_CD
        ,RESRC.EFF_FROM_DT
        ,RESRC.EFF_THRU_DT
        ,RESRC.COA_CC_CD
        ,RESRC.COA_BR_CD
        ,RESRC.GNRN_TP_CD
        ,RESRC.ACCT_TEAM_ROLE_TP_CD
        ,RESRC.NON_SLS_REP_FLG
    FROM
        DS_ORG_RESRC_RELN RESRC
    WHERE
        RESRC.GLBL_CMPY_CD = #glblCmpyCd#
    AND RESRC.EZCANCELFLAG = '0'
    AND RESRC.EFF_FROM_DT &lt;= #procDt#
    AND NVL(RESRC.EFF_THRU_DT, #maxEndDate#) &gt;= #procDt#
    AND RESRC.GNRN_TP_CD = #gnrnTpCd_3#
    </statement>
    
    <statement id="getTerritoryInactivateList" parameterClass="Map" resultClass="Map">
    SELECT
        ORG.ORG_CD
        ,ORG.ORG_STRU_TP_CD
        ,ORG.EFF_FROM_DT
        ,ORG.EFF_THRU_DT
        ,ORG.ORG_NM
        ,ORG.ORG_DESC_TXT
        ,ORG.ORG_TIER_CD
        ,ORG.ORG_SVC_PLN_CD
        ,ORG.GNRN_TP_CD
        ,ORG.ORG_SHORT_NM
        ,ORG.TRTY_GRP_TP_CD
        ,ORG.TRTY_TP_CD
        ,ORG.FIRST_ORG_CD
        ,ORG.AUTO_EST_FLG
        ,ORG.CSR_RG_TP_CD
    FROM
        DS_ORG_UNIT ORG
    WHERE
        ORG.GLBL_CMPY_CD = #glblCmpyCd#
    AND ORG.EZCANCELFLAG = '0'
    <!-- 2018/03/06 QC#20233-1 mod start -->
    <!-- AND NVL(ORG.EFF_THRU_DT, #maxEndDate#) &lt;= #procDt# -->
    AND NVL(ORG.EFF_THRU_DT, #maxEndDate#) &lt; #procDt#
    <!-- 2018/03/06 QC#20233-1 mod end -->
    <!-- START 2017/10/17 H.Sugawara [QC#21753,MOD] -->
    <!-- AND ORG.GNRN_TP_CD = #gnrnTpCd_2# -->
    AND (ORG.GNRN_TP_CD = #gnrnTpCd_2# OR ORG.GNRN_TP_CD = #gnrnTpCd_3#)
    <!-- END 2017/10/17 H.Sugawara [QC#21753,MOD] -->
    AND ORG.ORG_STRU_TP_CD = #orgStruTpCd#
    ORDER BY
        ORG.ORG_TIER_CD DESC
    </statement>
    
    <statement id="getTerritoryRelationInactiveList" parameterClass="Map" resultClass="Map">
    SELECT
        RELN.ORG_CD
        ,RELN.PRNT_ORG_CD
        ,RELN.ORG_STRU_TP_CD
        ,RELN.EFF_FROM_DT
        ,RELN.EFF_THRU_DT
        ,RELN.GNRN_TP_CD
        ,RELN.DS_ORG_RELN_PK <!-- 2017/03/07 S21_NA#17760 Add -->
    FROM
        DS_ORG_RELN RELN
    WHERE
        RELN.GLBL_CMPY_CD = #glblCmpyCd#
    AND RELN.EZCANCELFLAG = '0'
    <!-- 2018/03/06 QC#20233-1 mod start -->
    <!-- AND NVL(RELN.EFF_THRU_DT, #maxEndDate#) &lt;= #procDt# -->
    AND NVL(RELN.EFF_THRU_DT, #maxEndDate#) &lt; #procDt# 
    <!-- 2018/03/06 QC#20233-1 mod end -->
    <!-- START 2017/10/17 H.Sugawara [QC#21753,MOD] -->
    <!-- AND RELN.GNRN_TP_CD = #gnrnTpCd_2# -->
    AND (RELN.GNRN_TP_CD = #gnrnTpCd_2# OR RELN.GNRN_TP_CD = #gnrnTpCd_3#)
    <!-- END 2017/10/17 H.Sugawara [QC#21753,MOD] -->
    AND RELN.ORG_STRU_TP_CD = #orgStruTpCd#
    </statement>
    
    <statement id="getChildTerritoryInactiveCount" parameterClass="Map" resultClass="Integer">
    SELECT
        COUNT(*) CNT
    FROM
        DS_ORG_RELN RELN
    WHERE
        RELN.GLBL_CMPY_CD = #glblCmpyCd#
    AND RELN.EZCANCELFLAG = '0'
    AND RELN.EFF_FROM_DT &lt; #procDt#
    AND NVL(RELN.EFF_THRU_DT ,#maxEndDate#) &gt; #procDt#
    AND RELN.GNRN_TP_CD IN (#gnrnTpCd_2#, #gnrnTpCd_3#)
    AND RELN.ORG_STRU_TP_CD = #orgStruTpCd#
    AND RELN.PRNT_ORG_CD = #prntOrgCd#
    </statement>
    
    <statement id="getTerritoryResourceRelationInactiveList" parameterClass="Map" resultClass="Map">
    SELECT
        RESRC.ORG_CD
        ,RESRC.ORG_STRU_TP_CD
        ,RESRC.PSN_CD
        ,RESRC.ORG_FUNC_ROLE_TP_CD
        ,RESRC.EFF_FROM_DT
        ,RESRC.EFF_THRU_DT
        ,RESRC.COA_CC_CD
        ,RESRC.COA_BR_CD
        ,RESRC.GNRN_TP_CD
        ,RESRC.ACCT_TEAM_ROLE_TP_CD
        ,RESRC.NON_SLS_REP_FLG
    FROM
        DS_ORG_RESRC_RELN RESRC
    WHERE
        RESRC.GLBL_CMPY_CD = #glblCmpyCd#
    AND RESRC.EZCANCELFLAG = '0'
    <!-- 2018/03/06 QC#20233-1 mod start -->
    <!-- AND NVL(RESRC.EFF_THRU_DT, #maxEndDate#) &lt;= #procDt# -->
    AND NVL(RESRC.EFF_THRU_DT, #maxEndDate#) &lt; #procDt#
    <!-- 2018/03/06 QC#20233-1 mod end -->
    <!-- START 2017/10/17 H.Sugawara [QC#21753,MOD] -->
    <!-- AND RESRC.GNRN_TP_CD = #gnrnTpCd_2# -->
    AND (RESRC.GNRN_TP_CD = #gnrnTpCd_2# OR RESRC.GNRN_TP_CD = #gnrnTpCd_3#)
    <!-- END 2017/10/17 H.Sugawara [QC#21753,MOD] -->
    </statement>
    
    <statement id="getTerritoryRelationTerminateList" parameterClass="Map" resultClass="Map">
    SELECT
        RELN.ORG_CD
        ,RELN.PRNT_ORG_CD
        ,RELN.ORG_STRU_TP_CD
        ,RELN.EFF_FROM_DT
        ,RELN.EFF_THRU_DT
        ,RELN.GNRN_TP_CD
        ,RELN.DS_ORG_RELN_PK <!-- 2017/03/07 S21_NA#17760 Add -->
    FROM
        DS_ORG_RELN RELN
    WHERE
        RELN.GLBL_CMPY_CD = #glblCmpyCd#
    AND RELN.EZCANCELFLAG = '0'
    <!-- 2018/03/06 QC#20233-1 mod start -->
    <!-- AND NVL(RELN.EFF_THRU_DT, #maxEndDate#) &lt;= #procDt#-->
    AND NVL(RELN.EFF_THRU_DT, #maxEndDate#) &lt; #procDt#
    <!-- 2018/03/06 QC#20233-1 mod start -->
    AND RELN.GNRN_TP_CD = #gnrnTpCd_9#
    AND RELN.ORG_STRU_TP_CD = #orgStruTpCd#
    </statement>
    
    <statement id="getTerritoryResourceRelationTerminateList" parameterClass="Map" resultClass="Map">
    SELECT
        RESRC.ORG_CD
        ,RESRC.ORG_STRU_TP_CD
        ,RESRC.PSN_CD
        ,RESRC.ORG_FUNC_ROLE_TP_CD
        ,RESRC.EFF_FROM_DT
        ,RESRC.EFF_THRU_DT
        ,RESRC.COA_CC_CD
        ,RESRC.COA_BR_CD
        ,RESRC.GNRN_TP_CD
        ,RESRC.ACCT_TEAM_ROLE_TP_CD
        ,RESRC.NON_SLS_REP_FLG
    FROM
        DS_ORG_RESRC_RELN RESRC
    WHERE
        RESRC.GLBL_CMPY_CD = #glblCmpyCd#
    AND RESRC.EZCANCELFLAG = '0'
    <!-- 2018/03/06 QC#20233-1 mod start -->
    <!-- AND NVL(RESRC.EFF_THRU_DT, #maxEndDate#) &lt;= #procDt# -->
    AND NVL(RESRC.EFF_THRU_DT, #maxEndDate#) &lt; #procDt#
    <!-- 2018/03/06 QC#20233-1 mod end -->
    AND RESRC.GNRN_TP_CD = #gnrnTpCd_9#
    </statement>
    
    <statement id="getOrganizationActivateList" parameterClass="Map" resultClass="Map">
    SELECT
        ORG.ORG_CD
        ,ORG.ORG_STRU_TP_CD
        ,ORG.EFF_FROM_DT
        ,ORG.EFF_THRU_DT
        ,ORG.ORG_NM
        ,ORG.ORG_DESC_TXT
        ,ORG.ORG_TIER_CD
        ,ORG.ORG_SVC_PLN_CD
        ,ORG.GNRN_TP_CD
        ,ORG.ORG_SHORT_NM
        ,ORG.TRTY_GRP_TP_CD
        ,ORG.TRTY_TP_CD
        ,ORG.FIRST_ORG_CD
        ,ORG.AUTO_EST_FLG
        ,ORG.CSR_RG_TP_CD
    FROM
        DS_ORG_UNIT ORG
    WHERE
        ORG.GLBL_CMPY_CD = #glblCmpyCd#
    AND ORG.EZCANCELFLAG = '0'
    AND ORG.EFF_FROM_DT &lt;= #procDt#
    AND NVL(ORG.EFF_THRU_DT, #maxEndDate#) &gt;= #procDt#
    AND ORG.GNRN_TP_CD = #gnrnTpCd_3#
    AND ORG.ORG_STRU_TP_CD = #orgStruTpCd#
    ORDER BY
        ORG.ORG_TIER_CD
    </statement>
    
    <statement id="getOrganizationRelationActivateList" parameterClass="Map" resultClass="Map">
    SELECT
        RELN.ORG_CD
        ,RELN.PRNT_ORG_CD
        ,RELN.ORG_STRU_TP_CD
        ,RELN.EFF_FROM_DT
        ,RELN.EFF_THRU_DT
        ,RELN.GNRN_TP_CD
        ,RELN.DS_ORG_RELN_PK <!-- 2017/03/07 S21_NA#17760 Add -->
    FROM
        DS_ORG_RELN RELN
     ,  DS_ORG_UNIT ORG
    WHERE
        RELN.GLBL_CMPY_CD = #glblCmpyCd#
    AND RELN.EZCANCELFLAG = '0'
    AND RELN.EFF_FROM_DT &lt;= #procDt#
    AND NVL(RELN.EFF_THRU_DT, #maxEndDate#) &gt;= #procDt#
    AND RELN.GNRN_TP_CD = #gnrnTpCd_3#
    AND RELN.ORG_STRU_TP_CD = #orgStruTpCd#
    AND RELN.ORG_CD = ORG.ORG_CD
    AND RELN.GLBL_CMPY_CD = ORG.GLBL_CMPY_CD
    AND ORG.EZCANCELFLAG = '0'
    ORDER BY
        ORG.ORG_TIER_CD
    </statement>
    
    <statement id="getParentOrganizationActivateCount" parameterClass="Map" resultClass="Integer">
    SELECT
        COUNT(*) CNT
    FROM
        DS_ORG_RELN RELN
    WHERE
        RELN.GLBL_CMPY_CD = #glblCmpyCd#
    AND RELN.EZCANCELFLAG = '0'
    AND RELN.EFF_FROM_DT &lt;= #procDt#
    AND NVL(RELN.EFF_THRU_DT ,#maxEndDate#) &gt;= #procDt#
    AND RELN.GNRN_TP_CD IN (#gnrnTpCd_2#, #gnrnTpCd_3#)
    AND RELN.ORG_STRU_TP_CD = #orgStruTpCd#
    AND RELN.ORG_CD = #orgCd#
    </statement>
    
    <statement id="getOrganizationTerminateList" parameterClass="Map" resultClass="Map">
    SELECT
        ORG.ORG_CD
        ,ORG.ORG_STRU_TP_CD
        ,ORG.EFF_FROM_DT
        ,ORG.EFF_THRU_DT
        ,ORG.ORG_NM
        ,ORG.ORG_DESC_TXT
        ,ORG.ORG_TIER_CD
        ,ORG.ORG_SVC_PLN_CD
        ,ORG.GNRN_TP_CD
        ,ORG.ORG_SHORT_NM
        ,ORG.TRTY_GRP_TP_CD
        ,ORG.TRTY_TP_CD
        ,ORG.FIRST_ORG_CD
        ,ORG.AUTO_EST_FLG
        ,ORG.CSR_RG_TP_CD
    FROM
        DS_ORG_UNIT ORG
    WHERE
        ORG.GLBL_CMPY_CD = #glblCmpyCd#
    AND ORG.EZCANCELFLAG = '0'
    <!-- 2018/03/06 QC#20233-1 mod start -->
    <!-- AND NVL(ORG.EFF_THRU_DT ,#maxEndDate#) &lt;= #procDt# -->
    AND NVL(ORG.EFF_THRU_DT ,#maxEndDate#) &lt; #procDt#
    <!-- 2018/03/06 QC#20233-1 mod end -->
    <!-- START 2017/10/17 H.Sugawara [QC#21753,MOD] -->
    <!-- AND ORG.GNRN_TP_CD = #gnrnTpCd_2# -->
    AND (ORG.GNRN_TP_CD = #gnrnTpCd_2# OR ORG.GNRN_TP_CD = #gnrnTpCd_3#)
    <!-- END 2017/10/17 H.Sugawara [QC#21753,MOD] -->
    AND ORG.ORG_STRU_TP_CD = #orgStruTpCd#
    ORDER BY
        ORG.ORG_TIER_CD DESC
    </statement>
    
    <statement id="getOrganizationRelationTerminateList" parameterClass="Map" resultClass="Map">
    SELECT
        RELN.ORG_CD
        ,RELN.PRNT_ORG_CD
        ,RELN.ORG_STRU_TP_CD
        ,RELN.EFF_FROM_DT
        ,RELN.EFF_THRU_DT
        ,RELN.GNRN_TP_CD
        ,RELN.DS_ORG_RELN_PK <!-- 2017/03/07 S21_NA#17760 Add -->
    FROM
        DS_ORG_RELN RELN
    WHERE
        RELN.GLBL_CMPY_CD = #glblCmpyCd#
    AND RELN.EZCANCELFLAG = '0'
    <!-- 2018/03/06 QC#20233-1 mod start -->
    <!-- AND NVL(RELN.EFF_THRU_DT ,#maxEndDate#) &lt;= #procDt# -->
    AND NVL(RELN.EFF_THRU_DT ,#maxEndDate#) &lt; #procDt#
    <!-- 2018/03/06 QC#20233-1 mod start -->
    <!-- START 2017/10/17 H.Sugawara [QC#21753,MOD] -->
    <!-- AND RELN.GNRN_TP_CD = #gnrnTpCd_2# -->
    AND (
           RELN.GNRN_TP_CD = #gnrnTpCd_2#
        <isNotNull property="gnrnTpCdFtr">
            OR RELN.GNRN_TP_CD = #gnrnTpCdFtr#
        </isNotNull>
        )
    <!-- END 2017/10/17 H.Sugawara [QC#21753,MOD] -->
    AND RELN.ORG_STRU_TP_CD = #orgStruTpCd#
    </statement>
    
    <statement id="getChildOrganizationTerminateCount" parameterClass="Map" resultClass="Integer">
    SELECT
        COUNT(*) CNT
    FROM
        DS_ORG_RELN RELN
    WHERE
        RELN.GLBL_CMPY_CD = #glblCmpyCd#
    AND RELN.EZCANCELFLAG = '0'
    AND RELN.EFF_FROM_DT &lt; #procDt#
    AND NVL(RELN.EFF_THRU_DT ,#maxEndDate#) &gt; #procDt#
    AND RELN.GNRN_TP_CD IN (#gnrnTpCd_2#, #gnrnTpCd_3#)
    AND RELN.ORG_STRU_TP_CD = #orgStruTpCd#
    AND RELN.PRNT_ORG_CD = #prntOrgCd#
    </statement>

    <statement id="getPersonInactivateList" parameterClass="Map" resultClass="Map">
    SELECT
        PSN.PSN_CD
    FROM
        S21_PSN PSN
    WHERE
        PSN.GLBL_CMPY_CD = #glblCmpyCd#
    AND PSN.EZCANCELFLAG = '0'
    <!-- 2018/03/06 QC#20233-1 mod start -->
    <!-- AND NVL(PSN.EFF_THRU_DT ,#maxEndDate#) &lt;= #procDt# -->
    AND NVL(PSN.EFF_THRU_DT ,#maxEndDate#) &lt; #procDt#
    <!-- 2018/03/06 QC#20233-1 mod end -->
    AND PSN.DEL_FLG      = 'N'
    </statement>

    <statement id="getAsgActivateList" parameterClass="Map" resultClass="Map">
    SELECT
        ASG.TOC_CD
        ,ASG.PSN_CD
        ,ASG.EFF_FROM_DT
        ,ASG.EFF_THRU_DT
        ,ASG.GNRN_TP_CD
        ,ROLE.TOC_REQ_FLG
    FROM
        ORG_FUNC_ASG ASG
        ,ORG_TOC_CHNG_RQST RQST
        ,ORG_FUNC_ROLE_TP  ROLE
    WHERE
        ASG.GLBL_CMPY_CD         =  #glblCmpyCd#
    AND ASG.EZCANCELFLAG         =  '0'
    AND ASG.EFF_FROM_DT          &lt;=  #procDt#
    AND NVL(ASG.EFF_THRU_DT, #maxEndDate#)
                                 &gt;=  #procDt#
    AND ASG.GNRN_TP_CD           =  #gnrnTpCd_3#
    AND ASG.GLBL_CMPY_CD         =  RQST.GLBL_CMPY_CD
    AND ASG.TOC_CD               =  RQST.TOC_CD
    AND RQST.EZCANCELFLAG        =  0
    AND RQST.RGTN_STS_CD         =  #rgtnStsCd#
    AND RQST.GLBL_CMPY_CD        =  ROLE.GLBL_CMPY_CD
    AND RQST.ORG_FUNC_ROLE_TP_CD =  ROLE.ORG_FUNC_ROLE_TP_CD
    AND ROLE.EZCANCELFLAG        =  0
    </statement>
        
    <statement id="getDsOrgResrcRevenue" parameterClass="Map" resultClass="Map">
    SELECT
        REV.PSN_CD
        ,REV.REV_ACCT_TP_CD
        ,REV.EFF_FROM_DT
        ,REV.COA_CMPY_CD
        ,REV.COA_EXTN_CD
        ,REV.COA_BR_CD
        ,REV.COA_CC_CD
        ,REV.EFF_THRU_DT
        ,REV.MAN_ENTRY_FLG
    FROM
        DS_ORG_RESRC_REV REV
        ,REV_ACCT_TP TP
    WHERE
        REV.GLBL_CMPY_CD = #glblCmpyCd#
    AND REV.EZCANCELFLAG = '0'
    AND REV.GLBL_CMPY_CD = TP.GLBL_CMPY_CD
    AND REV.EZCANCELFLAG = TP.EZCANCELFLAG
    AND REV.REV_ACCT_TP_CD = TP.REV_ACCT_TP_CD
    AND TP.REV_COA_FLG = #revCoaFlg#
    AND REV.EFF_FROM_DT &lt;= #procDt#
    AND NVL(REV.EFF_THRU_DT, #maxEndDate#) &gt;= #procDt#
    AND REV.PSN_CD = #psnCd#
    </statement>
        
    <statement id="getActivateOrgTocList" parameterClass="Map" resultClass="Map">
    SELECT
        RELN.ORG_STRU_TP_CD
        ,RELN.TOC_CD
        ,RELN.ORG_CD
        ,RELN.ORG_LAYER_NUM
        ,RELN.EFF_FROM_DT
        ,RELN.EFF_THRU_DT
    FROM
        TOC_ORG_STRU_RELN RELN
        ,DS_ORG_UNIT ORG
    WHERE
        RELN.GLBL_CMPY_CD = #glblCmpyCd#
    AND RELN.EZCANCELFLAG = '0'
    AND RELN.GLBL_CMPY_CD = ORG.GLBL_CMPY_CD
    AND RELN.EZCANCELFLAG = ORG.EZCANCELFLAG
    AND RELN.ORG_STRU_TP_CD = #orgStruTpCd#
    AND RELN.EFF_FROM_DT &lt;= #procDt#
    AND NVL(RELN.EFF_THRU_DT, #maxEndDate#) &gt;= #procDt#
    AND RELN.TOC_CD = #tocCd#
    AND RELN.ORG_STRU_TP_CD = ORG.ORG_STRU_TP_CD
    AND RELN.ORG_CD = ORG.ORG_CD
    AND ORG.EFF_FROM_DT &lt;= #procDt#
    AND NVL(ORG.EFF_THRU_DT, #maxEndDate#) &gt;= #procDt#
    AND ORG.GNRN_TP_CD IN (#gnrnTpCd_2#, #gnrnTpCd_3#)
    </statement>
        
    <statement id="getOrgTocChngRqstActivateList" parameterClass="Map" resultClass="Map">
    SELECT
        RQST.TOC_CD
        ,RQST.ORG_CHNG_RQST_PK
        ,RQST.TOC_NM
        ,RQST.COA_BR_CD
        ,RQST.COA_CH_CD
        ,RQST.COA_PROD_CD
        ,RQST.JOB_TTL_CD
        ,RQST.ORG_FUNC_ROLE_TP_CD
        ,RQST.ORG_CD
        ,RQST.ORG_LAYER_NUM
        ,RQST.RGTN_STS_CD
        ,RQST.COA_EXTN_CD
        ,RQST.COA_CC_CD
        ,RQST.ASG_CUST_FROM_NM
        ,RQST.ASG_CUST_TO_NM
        ,RQST.COA_CMPY_CD
    FROM
        ORG_TOC_CHNG_RQST RQST
    WHERE
        RQST.GLBL_CMPY_CD = #glblCmpyCd#
    AND RQST.EZCANCELFLAG = '0'
    AND RQST.RGTN_STS_CD = #rgtnStsCd#
    AND RQST.TOC_CD = #tocCd#
    AND RQST.ORG_CD = #orgCd#
    </statement>
        
    <statement id="getAsgTerminateList" parameterClass="Map" resultClass="Map">
    SELECT
        ASG.TOC_CD
        ,ASG.PSN_CD
        ,ASG.EFF_FROM_DT
        ,ASG.EFF_THRU_DT
        ,ASG.GNRN_TP_CD
    FROM
        ORG_FUNC_ASG ASG
    WHERE
        ASG.GLBL_CMPY_CD = #glblCmpyCd#
    AND ASG.EZCANCELFLAG = '0'
    <!-- 2018/03/06 QC#20233-1 mod start -->
    <!-- AND NVL(ASG.EFF_THRU_DT, #maxEndDate#) &lt;= #procDt# -->
    AND NVL(ASG.EFF_THRU_DT, #maxEndDate#) &lt; #procDt#
    <!-- 2018/03/06 QC#20233-1 mod end -->
    <!-- QC#11081 -->
    AND (
           ASG.GNRN_TP_CD = #gnrnTpCd#
        <isNotNull property="gnrnTpCdFtr">
            OR ASG.GNRN_TP_CD = #gnrnTpCdFtr#
        </isNotNull>
        )
    <!-- QC#11081 -->
    </statement>
    
    <statement id="getTerminateOrgTocList" parameterClass="Map" resultClass="Map">
    SELECT
        RELN.ORG_STRU_TP_CD
        ,RELN.TOC_CD
        ,RELN.ORG_CD
        ,RELN.ORG_LAYER_NUM
        ,RELN.EFF_FROM_DT
        ,RELN.EFF_THRU_DT
    FROM
        TOC_ORG_STRU_RELN RELN
    WHERE
        RELN.GLBL_CMPY_CD = #glblCmpyCd#
    AND RELN.EZCANCELFLAG = '0'
    AND RELN.ORG_STRU_TP_CD = #orgStruTpCd#
    <!-- 2018/03/06 QC#20233-1 mod start -->
    <!-- AND NVL(RELN.EFF_THRU_DT, #maxEndDate#) &lt;= #procDt# -->
    AND NVL(RELN.EFF_THRU_DT, #maxEndDate#) &lt; #procDt#
    <!-- 2018/03/06 QC#20233-1 mod end -->
    AND RELN.TOC_CD = #tocCd#
    </statement>
    
    <statement id="getOrgTocChngRqstTerminateList" parameterClass="Map" resultClass="Map">
    SELECT
        RQST.TOC_CD
        ,RQST.ORG_CHNG_RQST_PK
        ,RQST.TOC_NM
        ,RQST.COA_BR_CD
        ,RQST.COA_CH_CD
        ,RQST.COA_PROD_CD
        ,RQST.JOB_TTL_CD
        ,RQST.ORG_FUNC_ROLE_TP_CD
        ,RQST.ORG_CD
        ,RQST.ORG_LAYER_NUM
        ,RQST.RGTN_STS_CD
        ,RQST.COA_EXTN_CD
        ,RQST.COA_CC_CD
        ,RQST.ASG_CUST_FROM_NM
        ,RQST.ASG_CUST_TO_NM
        ,RQST.COA_CMPY_CD
    FROM
        ORG_TOC_CHNG_RQST RQST
    WHERE
        RQST.GLBL_CMPY_CD = #glblCmpyCd#
    AND RQST.EZCANCELFLAG = '0'
    <!-- QC#11081 -->
    AND (
           RQST.RGTN_STS_CD = #rgtnStsCd#
        <isNotNull property="rgtnStsCdPC">
            OR RQST.RGTN_STS_CD = #rgtnStsCdPC#
        </isNotNull>
        )
    <!-- QC#11081 -->
    AND RQST.TOC_CD = #tocCd#
    AND RQST.ORG_CD = #orgCd#
    </statement>
    
    <statement id="getTocOrgMgrInfoThisMonthList" parameterClass="Map" resultClass="Map">
    SELECT
        MGR.ORG_STRU_TP_CD
        ,MGR.PSN_CD
        ,MGR.TOC_CD
        ,MGR.EFF_FROM_DT
        ,MGR.EFF_THRU_DT
        ,MGR.PSN_FIRST_NM
        ,MGR.PSN_LAST_NM
        ,MGR.ORG_FUNC_ROLE_TP_CD
        ,MGR.ORG_LAYER_NUM
        ,MGR.FIRST_ORG_CD
        ,MGR.FIRST_ORG_NM
        ,MGR.SCD_ORG_CD
        ,MGR.SCD_ORG_NM
        ,MGR.THIRD_ORG_CD
        ,MGR.THIRD_ORG_NM
        ,MGR.FRTH_ORG_CD
        ,MGR.FRTH_ORG_NM
        ,MGR.FIFTH_ORG_CD
        ,MGR.FIFTH_ORG_NM
        ,MGR.SIXTH_ORG_CD
        ,MGR.SIXTH_ORG_NM
        ,MGR.SVNTH_ORG_CD
        ,MGR.SVNTH_ORG_NM
        ,MGR.EIGHTH_ORG_CD
        ,MGR.EIGHTH_ORG_NM
        ,MGR.NINTH_ORG_CD
        ,MGR.NINTH_ORG_NM
        ,MGR.TENTH_ORG_CD
        ,MGR.TENTH_ORG_NM
        ,MGR.ELVTH_ORG_CD
        ,MGR.ELVTH_ORG_NM
        ,MGR.FIRST_ORG_MGR_PSN_CD
        ,MGR.FIRST_ORG_MGR_TOC_CD
        ,MGR.FIRST_ORG_MGR_FIRST_NM
        ,MGR.FIRST_ORG_MGR_LAST_NM
        ,MGR.SCD_ORG_MGR_PSN_CD
        ,MGR.SCD_ORG_MGR_TOC_CD
        ,MGR.SCD_ORG_MGR_FIRST_NM
        ,MGR.SCD_ORG_MGR_LAST_NM
        ,MGR.THIRD_ORG_MGR_PSN_CD
        ,MGR.THIRD_ORG_MGR_TOC_CD
        ,MGR.THIRD_ORG_MGR_FIRST_NM
        ,MGR.THIRD_ORG_MGR_LAST_NM
        ,MGR.FRTH_ORG_MGR_PSN_CD
        ,MGR.FRTH_ORG_MGR_TOC_CD
        ,MGR.FRTH_ORG_MGR_FIRST_NM
        ,MGR.FRTH_ORG_MGR_LAST_NM
        ,MGR.FIFTH_ORG_MGR_PSN_CD
        ,MGR.FIFTH_ORG_MGR_TOC_CD
        ,MGR.FIFTH_ORG_MGR_FIRST_NM
        ,MGR.FIFTH_ORG_MGR_LAST_NM
        ,MGR.SIXTH_ORG_MGR_PSN_CD
        ,MGR.SIXTH_ORG_MGR_TOC_CD
        ,MGR.SIXTH_ORG_MGR_FIRST_NM
        ,MGR.SIXTH_ORG_MGR_LAST_NM
        ,MGR.SVNTH_ORG_MGR_PSN_CD
        ,MGR.SVNTH_ORG_MGR_TOC_CD
        ,MGR.SVNTH_ORG_MGR_FIRST_NM
        ,MGR.SVNTH_ORG_MGR_LAST_NM
        ,MGR.EIGHTH_ORG_MGR_PSN_CD
        ,MGR.EIGHTH_ORG_MGR_TOC_CD
        ,MGR.EIGHTH_ORG_MGR_FIRST_NM
        ,MGR.EIGHTH_ORG_MGR_LAST_NM
        ,MGR.NINTH_ORG_MGR_PSN_CD
        ,MGR.NINTH_ORG_MGR_TOC_CD
        ,MGR.NINTH_ORG_MGR_FIRST_NM
        ,MGR.NINTH_ORG_MGR_LAST_NM
        ,MGR.TENTH_ORG_MGR_PSN_CD
        ,MGR.TENTH_ORG_MGR_TOC_CD
        ,MGR.TENTH_ORG_MGR_FIRST_NM
        ,MGR.TENTH_ORG_MGR_LAST_NM
        ,MGR.ELVTH_ORG_MGR_PSN_CD
        ,MGR.ELVTH_ORG_MGR_TOC_CD
        ,MGR.ELVTH_ORG_MGR_FIRST_NM
        ,MGR.ELVTH_ORG_MGR_LAST_NM
        ,MGR.FIRST_ORG_TIER_CD
        ,MGR.SCD_ORG_TIER_CD
        ,MGR.THIRD_ORG_TIER_CD
        ,MGR.FRTH_ORG_TIER_CD
        ,MGR.FIFTH_ORG_TIER_CD
        ,MGR.SIXTH_ORG_TIER_CD
        ,MGR.SVNTH_ORG_TIER_CD
        ,MGR.EIGHTH_ORG_TIER_CD
        ,MGR.NINTH_ORG_TIER_CD
        ,MGR.TENTH_ORG_TIER_CD
        ,MGR.ELVTH_ORG_TIER_CD
    FROM
        TOC_ORG_MGR_INFO MGR
    WHERE
        MGR.GLBL_CMPY_CD = #glblCmpyCd#
    AND MGR.EZCANCELFLAG = '0'
    AND SUBSTR(MGR.EFF_FROM_DT, 0, #cutLength#) = #procDtYyyyMm#
    </statement>
    
    <statement id="getTocOrgMgrInfoList" parameterClass="Map" resultClass="Map">
    SELECT
        TOC.TOC_CD
        ,PSN.PSN_CD
        ,PSN.PSN_FIRST_NM
        ,PSN.PSN_LAST_NM
        ,RELN.ORG_STRU_TP_CD
        <!-- QC#14117
        ,SUBSTR(MGT.MGT_DT ,1,6)||'01' START_DT
         -->
        ,#procDtYyyyMm#||'01' START_DT
        <!-- QC#9693 -->
        <!-- QC#14117
        ,TO_CHAR(LAST_DAY (TO_DATE(MGT.MGT_DT, 'YYYYMMDD')),'YYYYMMDD') END_DT
        -->
        ,TO_CHAR(LAST_DAY (TO_DATE(#procDt#, 'YYYYMMDD')),'YYYYMMDD') END_DT
        ,ORG.ORG_FUNC_ROLE_TP_CD
        ,ORG.UNIQ_ORG_LAYER_NUM AS ORG_LAYER_NUM
        ,ORG.FIRST_ORG_CD
        ,ORG.FIRST_ORG_NM
        ,ORG.SCD_ORG_CD
        ,ORG.SCD_ORG_NM
        ,ORG.THIRD_ORG_CD
        ,ORG.THIRD_ORG_NM
        ,ORG.FRTH_ORG_CD
        ,ORG.FRTH_ORG_NM
        ,ORG.FIFTH_ORG_CD
        ,ORG.FIFTH_ORG_NM
        ,ORG.SIXTH_ORG_CD
        ,ORG.SIXTH_ORG_NM
        ,ORG.SVNTH_ORG_CD
        ,ORG.SVNTH_ORG_NM
        ,ORG.EIGHTH_ORG_CD
        ,ORG.EIGHTH_ORG_NM
        ,ORG.NINTH_ORG_CD
        ,ORG.NINTH_ORG_NM
        ,ORG.TENTH_ORG_CD
        ,ORG.TENTH_ORG_NM
        ,ORG.ELVTH_ORG_CD
        ,ORG.ELVTH_ORG_NM
        ,ORG.FIRST_ORG_TIER_CD
        ,ORG.SCD_ORG_TIER_CD
        ,ORG.THIRD_ORG_TIER_CD
        ,ORG.FRTH_ORG_TIER_CD
        ,ORG.FIFTH_ORG_TIER_CD
        ,ORG.SIXTH_ORG_TIER_CD
        ,ORG.SVNTH_ORG_TIER_CD
        ,ORG.EIGHTH_ORG_TIER_CD
        ,ORG.NINTH_ORG_TIER_CD
        ,ORG.TENTH_ORG_TIER_CD
        ,ORG.ELVTH_ORG_TIER_CD
    FROM
        TOC TOC
        ,ORG_TOC_CHNG_RQST RQST
        ,ORG_FUNC_ASG ASG
        ,S21_PSN PSN
        ,TOC_ORG_STRU_RELN RELN
        ,S21_ORG ORG
        <!-- QC#14117
        ,DT_MGT MGT
         -->
    WHERE
        TOC.GLBL_CMPY_CD = #glblCmpyCd#
    AND TOC.EZCANCELFLAG = '0'
    AND TOC.GLBL_CMPY_CD = RQST.GLBL_CMPY_CD
    AND TOC.EZCANCELFLAG = RQST.EZCANCELFLAG
    AND TOC.GLBL_CMPY_CD = RELN.GLBL_CMPY_CD
    AND TOC.EZCANCELFLAG = RELN.EZCANCELFLAG
    AND TOC.GLBL_CMPY_CD = ASG.GLBL_CMPY_CD
    AND TOC.EZCANCELFLAG = ASG.EZCANCELFLAG
    AND TOC.GLBL_CMPY_CD = PSN.GLBL_CMPY_CD
    AND TOC.EZCANCELFLAG = PSN.EZCANCELFLAG
    AND TOC.GLBL_CMPY_CD = ORG.GLBL_CMPY_CD
    AND TOC.EZCANCELFLAG = ORG.EZCANCELFLAG
    AND TOC.TOC_CD = RQST.TOC_CD
    AND RQST.RGTN_STS_CD = #rgtnStsCd#
    AND RQST.TOC_CD = RELN.TOC_CD
    AND RQST.ORG_CD = RELN.ORG_CD
   <!-- START 2016/08/09 C.Yokoi [QC#13172,DEL] -->
   <!-- 
    AND RELN.EFF_FROM_DT &lt;= #procDt#
    AND NVL(RELN.EFF_THRU_DT, #maxEndDate#) &gt;= #procDt#
    AND SUBSTR(RELN.EFF_FROM_DT, 0, #cutLength#) = #procDtYyyyMm#
    -->
   <!-- END 2016/08/09 C.Yokoi [QC#13172,DEL] -->
    AND RQST.TOC_CD = ASG.TOC_CD
    AND ASG.GNRN_TP_CD = #gnrnTpCd_2#
    AND ASG.PSN_CD = PSN.PSN_CD
    AND RQST.TOC_CD = ORG.TOC_CD
    <!-- QC#14117
    AND MGT.DT_PROC_CD = #procCd_Batch# 
    AND MGT.EZCANCELFLAG = '0' 
    AND MGT.DT_MGT_PGM_ID = '*'
    -->
    <!-- QC#9693 -->
    <!-- QC#14117
    AND MGT.GLBL_CMPY_CD = #glblCmpyCd#
    -->
    
    </statement>
    
    <statement id="getMgrPersonInfoList" parameterClass="Map" resultClass="Map">
    SELECT
        PSN.PSN_CD
        ,PSN.PSN_FIRST_NM
        ,PSN.PSN_LAST_NM
        ,ASG.TOC_CD
    FROM
        ORG_TOC_CHNG_RQST RQST
        ,ORG_FUNC_ROLE_TP ROLE
        ,TOC_ORG_STRU_RELN RELN
        ,ORG_FUNC_ASG ASG
        ,S21_PSN PSN
    WHERE
        RQST.GLBL_CMPY_CD = #glblCmpyCd#
    AND RQST.EZCANCELFLAG = '0'
    AND RQST.GLBL_CMPY_CD = ROLE.GLBL_CMPY_CD
    AND RQST.EZCANCELFLAG = ROLE.EZCANCELFLAG
    AND RQST.GLBL_CMPY_CD = RELN.GLBL_CMPY_CD
    AND RQST.EZCANCELFLAG = RELN.EZCANCELFLAG    
    AND RQST.GLBL_CMPY_CD = ASG.GLBL_CMPY_CD
    AND RQST.EZCANCELFLAG = ASG.EZCANCELFLAG
    AND RQST.GLBL_CMPY_CD = PSN.GLBL_CMPY_CD
    AND RQST.EZCANCELFLAG = PSN.EZCANCELFLAG
    AND RQST.ORG_FUNC_ROLE_TP_CD = ROLE.ORG_FUNC_ROLE_TP_CD
    AND ROLE.MGR_FLG = 'Y'
    AND RQST.RGTN_STS_CD = #rgtnStsCd#
    AND RQST.ORG_CD = #orgCd#
    AND RQST.ORG_CD = RELN.ORG_CD
    AND RQST.TOC_CD = RELN.TOC_CD
    AND RELN.EFF_FROM_DT &lt;= #procDt#
    AND NVL(RELN.EFF_THRU_DT ,#maxEndDate#) &gt;= #procDt#
    AND RQST.TOC_CD = ASG.TOC_CD
    AND ASG.GNRN_TP_CD = #gnrnTpCd_2#
    AND ASG.PSN_CD = PSN.PSN_CD
    AND PSN.EFF_FROM_DT &lt;= #procDt#
    AND NVL(PSN.EFF_THRU_DT ,#maxEndDate#) &gt;= #procDt#
    </statement>
    
    <statement id="getUpdateOrgStruOrgNameList" parameterClass="Map" resultClass="Map">
    SELECT
        STRU.ORG_CD
       ,STRU.ORG_LAYER_NUM
    FROM
        ORG_STRU STRU
    WHERE
        <isEqual property="orgLayerNum" compareValue="1">
        STRU.FIRST_ORG_CD = #orgCd#
        </isEqual>
        <isEqual property="orgLayerNum" compareValue="2">
        STRU.SCD_ORG_CD = #orgCd#
        </isEqual>
        <isEqual property="orgLayerNum" compareValue="3">
        STRU.THIRD_ORG_CD = #orgCd#
        </isEqual>
        <isEqual property="orgLayerNum" compareValue="4">
        STRU.FRTH_ORG_CD = #orgCd#
        </isEqual>
        <isEqual property="orgLayerNum" compareValue="5">
        STRU.FIFTH_ORG_CD = #orgCd#
        </isEqual>
        <isEqual property="orgLayerNum" compareValue="6">
        STRU.SIXTH_ORG_CD = #orgCd#
        </isEqual>
        <isEqual property="orgLayerNum" compareValue="7">
        STRU.SVNTH_ORG_CD = #orgCd#
        </isEqual>
        <isEqual property="orgLayerNum" compareValue="8">
        STRU.EIGHTH_ORG_CD = #orgCd#
        </isEqual>
        <isEqual property="orgLayerNum" compareValue="9">
        STRU.NINTH_ORG_CD = #orgCd#
        </isEqual>
        <isEqual property="orgLayerNum" compareValue="10">
        STRU.TENTH_ORG_CD = #orgCd#
        </isEqual>
        <isEqual property="orgLayerNum" compareValue="11">
        STRU.ELVTH_ORG_CD = #orgCd#
        </isEqual>
    </statement>
        
    <statement id="getPreviousOrgStruFromParent" parameterClass="Map" resultClass="Map">
    SELECT
        RELN.PRNT_ORG_CD
        ,ORG.ORG_TIER_CD
    FROM
        DS_ORG_UNIT ORG
        ,DS_ORG_RELN RELN
    WHERE
        ORG.GLBL_CMPY_CD = #glblCmpyCd#
    AND ORG.EZCANCELFLAG = '0'
    AND ORG.GLBL_CMPY_CD = RELN.GLBL_CMPY_CD
    AND ORG.EZCANCELFLAG = RELN.EZCANCELFLAG
    AND ORG.ORG_CD = RELN.PRNT_ORG_CD
    AND ORG.ORG_STRU_TP_CD = RELN.ORG_STRU_TP_CD
    AND ORG.ORG_STRU_TP_CD = #orgStruTpCd#
    AND ORG.GNRN_TP_CD = #gnrnTpCd_2#
    AND RELN.GNRN_TP_CD = #gnrnTpCd_2#
    AND RELN.ORG_CD = #orgCd#
    </statement>
    
    <statement id="getAllBusinessAreaList" parameterClass="Map" resultClass="Map">
    SELECT
        BIZ.BIZ_AREA_ORG_CD
    FROM
        BIZ_AREA_ORG BIZ
    WHERE
        BIZ.GLBL_CMPY_CD = #glblCmpyCd#
    AND BIZ.EZCANCELFLAG = '0'
    AND BIZ.ORG_STRU_TP_CD = #orgStruTpCd#
    ORDER BY
        BIZ.BIZ_AREA_ORG_SORT_NUM
    </statement>


    <statement id="getDeleteOrgStruList" parameterClass="Map" resultClass="Map">
    SELECT
        STRU.ORG_CD
        ,STRU.ORG_LAYER_NUM
    FROM
        ORG_STRU STRU
    WHERE
        STRU.GLBL_CMPY_CD = #glblCmpyCd#
    AND STRU.EZCANCELFLAG = '0'
    AND STRU.FIRST_ORG_CD = #firstOrgCd#
    </statement>

    <statement id="getInsertOrgStruList" parameterClass="Map" resultClass="Map">
    WITH WRK AS(
        SELECT
            ORG.ORG_CD
            ,ORG.ORG_TIER_CD
            ,ORG.ORG_NM
            ,ORG.FIRST_ORG_CD
            ,ORG.TRTY_GRP_TP_CD
            ,ORG.TRTY_TP_CD
            ,RELN.PRNT_ORG_CD
            ,ORG.ORG_STRU_TP_CD
            ,ORG.EFF_FROM_DT
            ,ORG.EFF_THRU_DT
        FROM
            DS_ORG_UNIT ORG
            ,DS_ORG_RELN RELN
            ,ORG_STRU_TP STRU
        WHERE
            ORG.GLBL_CMPY_CD = #glblCmpyCd#
        AND ORG.GLBL_CMPY_CD = RELN.GLBL_CMPY_CD
        AND ORG.GLBL_CMPY_CD = STRU.GLBL_CMPY_CD
        AND ORG.EZCANCELFLAG = '0'
        AND RELN.EZCANCELFLAG = '0'
        AND STRU.EZCANCELFLAG = '0'
        AND ORG.ORG_STRU_TP_CD = STRU.ORG_STRU_TP_CD
        AND STRU.TRTY_STRU_FLG = 'N'
        AND ORG.ORG_CD = RELN.ORG_CD
        AND ORG.ORG_STRU_TP_CD = RELN.ORG_STRU_TP_CD
        AND ORG.ORG_TIER_CD != '0'
        AND ORG.GNRN_TP_CD = #gnrnTpCd_2#
        AND RELN.GNRN_TP_CD = #gnrnTpCd_2#
        UNION ALL
        SELECT
            ORG.ORG_CD
            ,ORG.ORG_TIER_CD
            ,ORG.ORG_NM
            ,ORG.FIRST_ORG_CD
            ,ORG.TRTY_GRP_TP_CD
            ,ORG.TRTY_TP_CD
            ,ORG.ORG_CD AS PRNT_ORG_CD
            ,ORG.ORG_STRU_TP_CD
            ,ORG.EFF_FROM_DT
            ,ORG.EFF_THRU_DT
        FROM
            DS_ORG_UNIT ORG
            ,ORG_STRU_TP STRU
        WHERE
            ORG.GLBL_CMPY_CD = #glblCmpyCd#
        AND ORG.EZCANCELFLAG = '0'
        AND ORG.GLBL_CMPY_CD = STRU.GLBL_CMPY_CD
        AND STRU.EZCANCELFLAG = '0'
        AND ORG.ORG_STRU_TP_CD = STRU.ORG_STRU_TP_CD
        AND STRU.TRTY_STRU_FLG = 'N'
        AND ORG.ORG_TIER_CD = '0'
        AND ORG.GNRN_TP_CD = #gnrnTpCd_2#
    )
        ,ORG1 AS(SELECT * FROM WRK)
        ,ORG2 AS(SELECT * FROM WRK)
        ,ORG3 AS(SELECT * FROM WRK)
        ,ORG4 AS(SELECT * FROM WRK)
        ,ORG5 AS(SELECT * FROM WRK)
        ,ORG6 AS(SELECT * FROM WRK)
        ,ORG7 AS(SELECT * FROM WRK)
        ,ORG8 AS(SELECT * FROM WRK)
        ,ORG9 AS(SELECT * FROM WRK)
        ,ORG10 AS(SELECT * FROM WRK)
    
    ,HIERARCHY AS(
        SELECT
            ORG1.ORG_CD
            ,ORG1.ORG_TIER_CD
            ,ORG1.ORG_STRU_TP_CD
            ,ORG1.EFF_FROM_DT
            ,ORG1.EFF_THRU_DT
            --FIRST
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '0' THEN ORG1.ORG_CD
                WHEN ORG2.ORG_TIER_CD = '0' THEN ORG2.ORG_CD
                WHEN ORG3.ORG_TIER_CD = '0' THEN ORG3.ORG_CD
                WHEN ORG4.ORG_TIER_CD = '0' THEN ORG4.ORG_CD
                WHEN ORG5.ORG_TIER_CD = '0' THEN ORG5.ORG_CD
                WHEN ORG6.ORG_TIER_CD = '0' THEN ORG6.ORG_CD
                WHEN ORG7.ORG_TIER_CD = '0' THEN ORG7.ORG_CD
                WHEN ORG8.ORG_TIER_CD = '0' THEN ORG8.ORG_CD
                WHEN ORG9.ORG_TIER_CD = '0' THEN ORG9.ORG_CD
                WHEN ORG10.ORG_TIER_CD = '0' THEN ORG10.ORG_CD
            END AS FIRST_ORG_CD
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '0' THEN ORG1.ORG_NM
                WHEN ORG2.ORG_TIER_CD = '0' THEN ORG2.ORG_NM
                WHEN ORG3.ORG_TIER_CD = '0' THEN ORG3.ORG_NM
                WHEN ORG4.ORG_TIER_CD = '0' THEN ORG4.ORG_NM
                WHEN ORG5.ORG_TIER_CD = '0' THEN ORG5.ORG_NM
                WHEN ORG6.ORG_TIER_CD = '0' THEN ORG6.ORG_NM
                WHEN ORG7.ORG_TIER_CD = '0' THEN ORG7.ORG_NM
                WHEN ORG8.ORG_TIER_CD = '0' THEN ORG8.ORG_NM
                WHEN ORG9.ORG_TIER_CD = '0' THEN ORG9.ORG_NM
                WHEN ORG10.ORG_TIER_CD = '0' THEN ORG10.ORG_NM
            END AS FIRST_ORG_NM
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '0' THEN ORG1.ORG_TIER_CD
                WHEN ORG2.ORG_TIER_CD = '0' THEN ORG2.ORG_TIER_CD
                WHEN ORG3.ORG_TIER_CD = '0' THEN ORG3.ORG_TIER_CD
                WHEN ORG4.ORG_TIER_CD = '0' THEN ORG4.ORG_TIER_CD
                WHEN ORG5.ORG_TIER_CD = '0' THEN ORG5.ORG_TIER_CD
                WHEN ORG6.ORG_TIER_CD = '0' THEN ORG6.ORG_TIER_CD
                WHEN ORG7.ORG_TIER_CD = '0' THEN ORG7.ORG_TIER_CD
                WHEN ORG8.ORG_TIER_CD = '0' THEN ORG8.ORG_TIER_CD
                WHEN ORG9.ORG_TIER_CD = '0' THEN ORG9.ORG_TIER_CD
                WHEN ORG10.ORG_TIER_CD = '0' THEN ORG10.ORG_TIER_CD
            END AS FIRST_ORG_TIER_CD
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '1' THEN ORG1.ORG_CD
                WHEN ORG2.ORG_TIER_CD = '1' THEN ORG2.ORG_CD
                WHEN ORG3.ORG_TIER_CD = '1' THEN ORG3.ORG_CD
                WHEN ORG4.ORG_TIER_CD = '1' THEN ORG4.ORG_CD
                WHEN ORG5.ORG_TIER_CD = '1' THEN ORG5.ORG_CD
                WHEN ORG6.ORG_TIER_CD = '1' THEN ORG6.ORG_CD
                WHEN ORG7.ORG_TIER_CD = '1' THEN ORG7.ORG_CD
                WHEN ORG8.ORG_TIER_CD = '1' THEN ORG8.ORG_CD
                WHEN ORG9.ORG_TIER_CD = '1' THEN ORG9.ORG_CD
                WHEN ORG10.ORG_TIER_CD = '1' THEN ORG10.ORG_CD
            END AS SCD_ORG_CD
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '1' THEN ORG1.ORG_NM
                WHEN ORG2.ORG_TIER_CD = '1' THEN ORG2.ORG_NM
                WHEN ORG3.ORG_TIER_CD = '1' THEN ORG3.ORG_NM
                WHEN ORG4.ORG_TIER_CD = '1' THEN ORG4.ORG_NM
                WHEN ORG5.ORG_TIER_CD = '1' THEN ORG5.ORG_NM
                WHEN ORG6.ORG_TIER_CD = '1' THEN ORG6.ORG_NM
                WHEN ORG7.ORG_TIER_CD = '1' THEN ORG7.ORG_NM
                WHEN ORG8.ORG_TIER_CD = '1' THEN ORG8.ORG_NM
                WHEN ORG9.ORG_TIER_CD = '1' THEN ORG9.ORG_NM
                WHEN ORG10.ORG_TIER_CD = '1' THEN ORG10.ORG_NM
            END AS SCD_ORG_NM
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '1' THEN ORG1.ORG_TIER_CD
                WHEN ORG2.ORG_TIER_CD = '1' THEN ORG2.ORG_TIER_CD
                WHEN ORG3.ORG_TIER_CD = '1' THEN ORG3.ORG_TIER_CD
                WHEN ORG4.ORG_TIER_CD = '1' THEN ORG4.ORG_TIER_CD
                WHEN ORG5.ORG_TIER_CD = '1' THEN ORG5.ORG_TIER_CD
                WHEN ORG6.ORG_TIER_CD = '1' THEN ORG6.ORG_TIER_CD
                WHEN ORG7.ORG_TIER_CD = '1' THEN ORG7.ORG_TIER_CD
                WHEN ORG8.ORG_TIER_CD = '1' THEN ORG8.ORG_TIER_CD
                WHEN ORG9.ORG_TIER_CD = '1' THEN ORG9.ORG_TIER_CD
                WHEN ORG10.ORG_TIER_CD = '1' THEN ORG10.ORG_TIER_CD
            END AS SCD_ORG_TIER_CD
            --SECOND
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '2' THEN ORG1.ORG_CD
                WHEN ORG2.ORG_TIER_CD = '2' THEN ORG2.ORG_CD
                WHEN ORG3.ORG_TIER_CD = '2' THEN ORG3.ORG_CD
                WHEN ORG4.ORG_TIER_CD = '2' THEN ORG4.ORG_CD
                WHEN ORG5.ORG_TIER_CD = '2' THEN ORG5.ORG_CD
                WHEN ORG6.ORG_TIER_CD = '2' THEN ORG6.ORG_CD
                WHEN ORG7.ORG_TIER_CD = '2' THEN ORG7.ORG_CD
                WHEN ORG8.ORG_TIER_CD = '2' THEN ORG8.ORG_CD
                WHEN ORG9.ORG_TIER_CD = '2' THEN ORG9.ORG_CD
                WHEN ORG10.ORG_TIER_CD = '2' THEN ORG10.ORG_CD
            END AS THIRD_ORG_CD
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '2' THEN ORG1.ORG_NM
                WHEN ORG2.ORG_TIER_CD = '2' THEN ORG2.ORG_NM
                WHEN ORG3.ORG_TIER_CD = '2' THEN ORG3.ORG_NM
                WHEN ORG4.ORG_TIER_CD = '2' THEN ORG4.ORG_NM
                WHEN ORG5.ORG_TIER_CD = '2' THEN ORG5.ORG_NM
                WHEN ORG6.ORG_TIER_CD = '2' THEN ORG6.ORG_NM
                WHEN ORG7.ORG_TIER_CD = '2' THEN ORG7.ORG_NM
                WHEN ORG8.ORG_TIER_CD = '2' THEN ORG8.ORG_NM
                WHEN ORG9.ORG_TIER_CD = '2' THEN ORG9.ORG_NM
                WHEN ORG10.ORG_TIER_CD = '2' THEN ORG10.ORG_NM
            END AS THIRD_ORG_NM
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '2' THEN ORG1.ORG_TIER_CD
                WHEN ORG2.ORG_TIER_CD = '2' THEN ORG2.ORG_TIER_CD
                WHEN ORG3.ORG_TIER_CD = '2' THEN ORG3.ORG_TIER_CD
                WHEN ORG4.ORG_TIER_CD = '2' THEN ORG4.ORG_TIER_CD
                WHEN ORG5.ORG_TIER_CD = '2' THEN ORG5.ORG_TIER_CD
                WHEN ORG6.ORG_TIER_CD = '2' THEN ORG6.ORG_TIER_CD
                WHEN ORG7.ORG_TIER_CD = '2' THEN ORG7.ORG_TIER_CD
                WHEN ORG8.ORG_TIER_CD = '2' THEN ORG8.ORG_TIER_CD
                WHEN ORG9.ORG_TIER_CD = '2' THEN ORG9.ORG_TIER_CD
                WHEN ORG10.ORG_TIER_CD = '2' THEN ORG10.ORG_TIER_CD
            END AS THIRD_ORG_TIER_CD
            --THIRD
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '3' THEN ORG1.ORG_CD
                WHEN ORG2.ORG_TIER_CD = '3' THEN ORG2.ORG_CD
                WHEN ORG3.ORG_TIER_CD = '3' THEN ORG3.ORG_CD
                WHEN ORG4.ORG_TIER_CD = '3' THEN ORG4.ORG_CD
                WHEN ORG5.ORG_TIER_CD = '3' THEN ORG5.ORG_CD
                WHEN ORG6.ORG_TIER_CD = '3' THEN ORG6.ORG_CD
                WHEN ORG7.ORG_TIER_CD = '3' THEN ORG7.ORG_CD
                WHEN ORG8.ORG_TIER_CD = '3' THEN ORG8.ORG_CD
                WHEN ORG9.ORG_TIER_CD = '3' THEN ORG9.ORG_CD
                WHEN ORG10.ORG_TIER_CD = '3' THEN ORG10.ORG_CD
            END AS FRTH_ORG_CD
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '3' THEN ORG1.ORG_NM
                WHEN ORG2.ORG_TIER_CD = '3' THEN ORG2.ORG_NM
                WHEN ORG3.ORG_TIER_CD = '3' THEN ORG3.ORG_NM
                WHEN ORG4.ORG_TIER_CD = '3' THEN ORG4.ORG_NM
                WHEN ORG5.ORG_TIER_CD = '3' THEN ORG5.ORG_NM
                WHEN ORG6.ORG_TIER_CD = '3' THEN ORG6.ORG_NM
                WHEN ORG7.ORG_TIER_CD = '3' THEN ORG7.ORG_NM
                WHEN ORG8.ORG_TIER_CD = '3' THEN ORG8.ORG_NM
                WHEN ORG9.ORG_TIER_CD = '3' THEN ORG9.ORG_NM
                WHEN ORG10.ORG_TIER_CD = '3' THEN ORG10.ORG_NM
            END AS FRTH_ORG_NM
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '3' THEN ORG1.ORG_TIER_CD
                WHEN ORG2.ORG_TIER_CD = '3' THEN ORG2.ORG_TIER_CD
                WHEN ORG3.ORG_TIER_CD = '3' THEN ORG3.ORG_TIER_CD
                WHEN ORG4.ORG_TIER_CD = '3' THEN ORG4.ORG_TIER_CD
                WHEN ORG5.ORG_TIER_CD = '3' THEN ORG5.ORG_TIER_CD
                WHEN ORG6.ORG_TIER_CD = '3' THEN ORG6.ORG_TIER_CD
                WHEN ORG7.ORG_TIER_CD = '3' THEN ORG7.ORG_TIER_CD
                WHEN ORG8.ORG_TIER_CD = '3' THEN ORG8.ORG_TIER_CD
                WHEN ORG9.ORG_TIER_CD = '3' THEN ORG9.ORG_TIER_CD
                WHEN ORG10.ORG_TIER_CD = '3' THEN ORG10.ORG_TIER_CD
            END AS FRTH_ORG_TIER_CD
            --FOURTH
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '4' THEN ORG1.ORG_CD
                WHEN ORG2.ORG_TIER_CD = '4' THEN ORG2.ORG_CD
                WHEN ORG3.ORG_TIER_CD = '4' THEN ORG3.ORG_CD
                WHEN ORG4.ORG_TIER_CD = '4' THEN ORG4.ORG_CD
                WHEN ORG5.ORG_TIER_CD = '4' THEN ORG5.ORG_CD
                WHEN ORG6.ORG_TIER_CD = '4' THEN ORG6.ORG_CD
                WHEN ORG7.ORG_TIER_CD = '4' THEN ORG7.ORG_CD
                WHEN ORG8.ORG_TIER_CD = '4' THEN ORG8.ORG_CD
                WHEN ORG9.ORG_TIER_CD = '4' THEN ORG9.ORG_CD
                WHEN ORG10.ORG_TIER_CD = '4' THEN ORG10.ORG_CD
            END AS FIFTH_ORG_CD
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '4' THEN ORG1.ORG_NM
                WHEN ORG2.ORG_TIER_CD = '4' THEN ORG2.ORG_NM
                WHEN ORG3.ORG_TIER_CD = '4' THEN ORG3.ORG_NM
                WHEN ORG4.ORG_TIER_CD = '4' THEN ORG4.ORG_NM
                WHEN ORG5.ORG_TIER_CD = '4' THEN ORG5.ORG_NM
                WHEN ORG6.ORG_TIER_CD = '4' THEN ORG6.ORG_NM
                WHEN ORG7.ORG_TIER_CD = '4' THEN ORG7.ORG_NM
                WHEN ORG8.ORG_TIER_CD = '4' THEN ORG8.ORG_NM
                WHEN ORG9.ORG_TIER_CD = '4' THEN ORG9.ORG_NM
                WHEN ORG10.ORG_TIER_CD = '4' THEN ORG10.ORG_NM
            END AS FIFTH_ORG_NM
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '4' THEN ORG1.ORG_TIER_CD
                WHEN ORG2.ORG_TIER_CD = '4' THEN ORG2.ORG_TIER_CD
                WHEN ORG3.ORG_TIER_CD = '4' THEN ORG3.ORG_TIER_CD
                WHEN ORG4.ORG_TIER_CD = '4' THEN ORG4.ORG_TIER_CD
                WHEN ORG5.ORG_TIER_CD = '4' THEN ORG5.ORG_TIER_CD
                WHEN ORG6.ORG_TIER_CD = '4' THEN ORG6.ORG_TIER_CD
                WHEN ORG7.ORG_TIER_CD = '4' THEN ORG7.ORG_TIER_CD
                WHEN ORG8.ORG_TIER_CD = '4' THEN ORG8.ORG_TIER_CD
                WHEN ORG9.ORG_TIER_CD = '4' THEN ORG9.ORG_TIER_CD
                WHEN ORG10.ORG_TIER_CD = '4' THEN ORG10.ORG_TIER_CD
            END AS FIFTH_ORG_TIER_CD
            --FIFTH
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '5' THEN ORG1.ORG_CD
                WHEN ORG2.ORG_TIER_CD = '5' THEN ORG2.ORG_CD
                WHEN ORG3.ORG_TIER_CD = '5' THEN ORG3.ORG_CD
                WHEN ORG4.ORG_TIER_CD = '5' THEN ORG4.ORG_CD
                WHEN ORG5.ORG_TIER_CD = '5' THEN ORG5.ORG_CD
                WHEN ORG6.ORG_TIER_CD = '5' THEN ORG6.ORG_CD
                WHEN ORG7.ORG_TIER_CD = '5' THEN ORG7.ORG_CD
                WHEN ORG8.ORG_TIER_CD = '5' THEN ORG8.ORG_CD
                WHEN ORG9.ORG_TIER_CD = '5' THEN ORG9.ORG_CD
                WHEN ORG10.ORG_TIER_CD = '5' THEN ORG10.ORG_CD
            END AS SIXTH_ORG_CD
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '5' THEN ORG1.ORG_NM
                WHEN ORG2.ORG_TIER_CD = '5' THEN ORG2.ORG_NM
                WHEN ORG3.ORG_TIER_CD = '5' THEN ORG3.ORG_NM
                WHEN ORG4.ORG_TIER_CD = '5' THEN ORG4.ORG_NM
                WHEN ORG5.ORG_TIER_CD = '5' THEN ORG5.ORG_NM
                WHEN ORG6.ORG_TIER_CD = '5' THEN ORG6.ORG_NM
                WHEN ORG7.ORG_TIER_CD = '5' THEN ORG7.ORG_NM
                WHEN ORG8.ORG_TIER_CD = '5' THEN ORG8.ORG_NM
                WHEN ORG9.ORG_TIER_CD = '5' THEN ORG9.ORG_NM
                WHEN ORG10.ORG_TIER_CD = '5' THEN ORG10.ORG_NM
            END AS SIXTH_ORG_NM
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '5' THEN ORG1.ORG_TIER_CD
                WHEN ORG2.ORG_TIER_CD = '5' THEN ORG2.ORG_TIER_CD
                WHEN ORG3.ORG_TIER_CD = '5' THEN ORG3.ORG_TIER_CD
                WHEN ORG4.ORG_TIER_CD = '5' THEN ORG4.ORG_TIER_CD
                WHEN ORG5.ORG_TIER_CD = '5' THEN ORG5.ORG_TIER_CD
                WHEN ORG6.ORG_TIER_CD = '5' THEN ORG6.ORG_TIER_CD
                WHEN ORG7.ORG_TIER_CD = '5' THEN ORG7.ORG_TIER_CD
                WHEN ORG8.ORG_TIER_CD = '5' THEN ORG8.ORG_TIER_CD
                WHEN ORG9.ORG_TIER_CD = '5' THEN ORG9.ORG_TIER_CD
                WHEN ORG10.ORG_TIER_CD = '5' THEN ORG10.ORG_TIER_CD
            END AS SIXTH_ORG_TIER_CD
            --SIXTH
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '6' THEN ORG1.ORG_CD
                WHEN ORG2.ORG_TIER_CD = '6' THEN ORG2.ORG_CD
                WHEN ORG3.ORG_TIER_CD = '6' THEN ORG3.ORG_CD
                WHEN ORG4.ORG_TIER_CD = '6' THEN ORG4.ORG_CD
                WHEN ORG5.ORG_TIER_CD = '6' THEN ORG5.ORG_CD
                WHEN ORG6.ORG_TIER_CD = '6' THEN ORG6.ORG_CD
                WHEN ORG7.ORG_TIER_CD = '6' THEN ORG7.ORG_CD
                WHEN ORG8.ORG_TIER_CD = '6' THEN ORG8.ORG_CD
                WHEN ORG9.ORG_TIER_CD = '6' THEN ORG9.ORG_CD
                WHEN ORG10.ORG_TIER_CD = '6' THEN ORG10.ORG_CD
            END AS SVNTH_ORG_CD
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '6' THEN ORG1.ORG_NM
                WHEN ORG2.ORG_TIER_CD = '6' THEN ORG2.ORG_NM
                WHEN ORG3.ORG_TIER_CD = '6' THEN ORG3.ORG_NM
                WHEN ORG4.ORG_TIER_CD = '6' THEN ORG4.ORG_NM
                WHEN ORG5.ORG_TIER_CD = '6' THEN ORG5.ORG_NM
                WHEN ORG6.ORG_TIER_CD = '6' THEN ORG6.ORG_NM
                WHEN ORG7.ORG_TIER_CD = '6' THEN ORG7.ORG_NM
                WHEN ORG8.ORG_TIER_CD = '6' THEN ORG8.ORG_NM
                WHEN ORG9.ORG_TIER_CD = '6' THEN ORG9.ORG_NM
                WHEN ORG10.ORG_TIER_CD = '6' THEN ORG10.ORG_NM
            END AS SVNTH_ORG_NM
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '6' THEN ORG1.ORG_TIER_CD
                WHEN ORG2.ORG_TIER_CD = '6' THEN ORG2.ORG_TIER_CD
                WHEN ORG3.ORG_TIER_CD = '6' THEN ORG3.ORG_TIER_CD
                WHEN ORG4.ORG_TIER_CD = '6' THEN ORG4.ORG_TIER_CD
                WHEN ORG5.ORG_TIER_CD = '6' THEN ORG5.ORG_TIER_CD
                WHEN ORG6.ORG_TIER_CD = '6' THEN ORG6.ORG_TIER_CD
                WHEN ORG7.ORG_TIER_CD = '6' THEN ORG7.ORG_TIER_CD
                WHEN ORG8.ORG_TIER_CD = '6' THEN ORG8.ORG_TIER_CD
                WHEN ORG9.ORG_TIER_CD = '6' THEN ORG9.ORG_TIER_CD
                WHEN ORG10.ORG_TIER_CD = '6' THEN ORG10.ORG_TIER_CD
            END AS SVNTH_ORG_TIER_CD
            --SEVENTH
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '7' THEN ORG1.ORG_CD
                WHEN ORG2.ORG_TIER_CD = '7' THEN ORG2.ORG_CD
                WHEN ORG3.ORG_TIER_CD = '7' THEN ORG3.ORG_CD
                WHEN ORG4.ORG_TIER_CD = '7' THEN ORG4.ORG_CD
                WHEN ORG5.ORG_TIER_CD = '7' THEN ORG5.ORG_CD
                WHEN ORG6.ORG_TIER_CD = '7' THEN ORG6.ORG_CD
                WHEN ORG7.ORG_TIER_CD = '7' THEN ORG7.ORG_CD
                WHEN ORG8.ORG_TIER_CD = '7' THEN ORG8.ORG_CD
                WHEN ORG9.ORG_TIER_CD = '7' THEN ORG9.ORG_CD
                WHEN ORG10.ORG_TIER_CD = '7' THEN ORG10.ORG_CD
            END AS EIGHTH_ORG_CD
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '7' THEN ORG1.ORG_NM
                WHEN ORG2.ORG_TIER_CD = '7' THEN ORG2.ORG_NM
                WHEN ORG3.ORG_TIER_CD = '7' THEN ORG3.ORG_NM
                WHEN ORG4.ORG_TIER_CD = '7' THEN ORG4.ORG_NM
                WHEN ORG5.ORG_TIER_CD = '7' THEN ORG5.ORG_NM
                WHEN ORG6.ORG_TIER_CD = '7' THEN ORG6.ORG_NM
                WHEN ORG7.ORG_TIER_CD = '7' THEN ORG7.ORG_NM
                WHEN ORG8.ORG_TIER_CD = '7' THEN ORG8.ORG_NM
                WHEN ORG9.ORG_TIER_CD = '7' THEN ORG9.ORG_NM
                WHEN ORG10.ORG_TIER_CD = '7' THEN ORG10.ORG_NM
            END AS EIGHTH_ORG_NM
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '7' THEN ORG1.ORG_TIER_CD
                WHEN ORG2.ORG_TIER_CD = '7' THEN ORG2.ORG_TIER_CD
                WHEN ORG3.ORG_TIER_CD = '7' THEN ORG3.ORG_TIER_CD
                WHEN ORG4.ORG_TIER_CD = '7' THEN ORG4.ORG_TIER_CD
                WHEN ORG5.ORG_TIER_CD = '7' THEN ORG5.ORG_TIER_CD
                WHEN ORG6.ORG_TIER_CD = '7' THEN ORG6.ORG_TIER_CD
                WHEN ORG7.ORG_TIER_CD = '7' THEN ORG7.ORG_TIER_CD
                WHEN ORG8.ORG_TIER_CD = '7' THEN ORG8.ORG_TIER_CD
                WHEN ORG9.ORG_TIER_CD = '7' THEN ORG9.ORG_TIER_CD
                WHEN ORG10.ORG_TIER_CD = '7' THEN ORG10.ORG_TIER_CD
            END AS EIGHTH_ORG_TIER_CD
            --EIGHTH
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '8' THEN ORG1.ORG_CD
                WHEN ORG2.ORG_TIER_CD = '8' THEN ORG2.ORG_CD
                WHEN ORG3.ORG_TIER_CD = '8' THEN ORG3.ORG_CD
                WHEN ORG4.ORG_TIER_CD = '8' THEN ORG4.ORG_CD
                WHEN ORG5.ORG_TIER_CD = '8' THEN ORG5.ORG_CD
                WHEN ORG6.ORG_TIER_CD = '8' THEN ORG6.ORG_CD
                WHEN ORG7.ORG_TIER_CD = '8' THEN ORG7.ORG_CD
                WHEN ORG8.ORG_TIER_CD = '8' THEN ORG8.ORG_CD
                WHEN ORG9.ORG_TIER_CD = '8' THEN ORG9.ORG_CD
                WHEN ORG10.ORG_TIER_CD = '8' THEN ORG10.ORG_CD
            END AS NINTH_ORG_CD
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '8' THEN ORG1.ORG_NM
                WHEN ORG2.ORG_TIER_CD = '8' THEN ORG2.ORG_NM
                WHEN ORG3.ORG_TIER_CD = '8' THEN ORG3.ORG_NM
                WHEN ORG4.ORG_TIER_CD = '8' THEN ORG4.ORG_NM
                WHEN ORG5.ORG_TIER_CD = '8' THEN ORG5.ORG_NM
                WHEN ORG6.ORG_TIER_CD = '8' THEN ORG6.ORG_NM
                WHEN ORG7.ORG_TIER_CD = '8' THEN ORG7.ORG_NM
                WHEN ORG8.ORG_TIER_CD = '8' THEN ORG8.ORG_NM
                WHEN ORG9.ORG_TIER_CD = '8' THEN ORG9.ORG_NM
                WHEN ORG10.ORG_TIER_CD = '8' THEN ORG10.ORG_NM
            END AS NINTH_ORG_NM
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '8' THEN ORG1.ORG_TIER_CD
                WHEN ORG2.ORG_TIER_CD = '8' THEN ORG2.ORG_TIER_CD
                WHEN ORG3.ORG_TIER_CD = '8' THEN ORG3.ORG_TIER_CD
                WHEN ORG4.ORG_TIER_CD = '8' THEN ORG4.ORG_TIER_CD
                WHEN ORG5.ORG_TIER_CD = '8' THEN ORG5.ORG_TIER_CD
                WHEN ORG6.ORG_TIER_CD = '8' THEN ORG6.ORG_TIER_CD
                WHEN ORG7.ORG_TIER_CD = '8' THEN ORG7.ORG_TIER_CD
                WHEN ORG8.ORG_TIER_CD = '8' THEN ORG8.ORG_TIER_CD
                WHEN ORG9.ORG_TIER_CD = '8' THEN ORG9.ORG_TIER_CD
                WHEN ORG10.ORG_TIER_CD = '8' THEN ORG10.ORG_TIER_CD
            END AS NINTH_ORG_TIER_CD
            --NINTH
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '9' THEN ORG1.ORG_CD
                WHEN ORG2.ORG_TIER_CD = '9' THEN ORG2.ORG_CD
                WHEN ORG3.ORG_TIER_CD = '9' THEN ORG3.ORG_CD
                WHEN ORG4.ORG_TIER_CD = '9' THEN ORG4.ORG_CD
                WHEN ORG5.ORG_TIER_CD = '9' THEN ORG5.ORG_CD
                WHEN ORG6.ORG_TIER_CD = '9' THEN ORG6.ORG_CD
                WHEN ORG7.ORG_TIER_CD = '9' THEN ORG7.ORG_CD
                WHEN ORG8.ORG_TIER_CD = '9' THEN ORG8.ORG_CD
                WHEN ORG9.ORG_TIER_CD = '9' THEN ORG9.ORG_CD
                WHEN ORG10.ORG_TIER_CD = '9' THEN ORG10.ORG_CD
            END AS TENTH_ORG_CD
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '9' THEN ORG1.ORG_NM
                WHEN ORG2.ORG_TIER_CD = '9' THEN ORG2.ORG_NM
                WHEN ORG3.ORG_TIER_CD = '9' THEN ORG3.ORG_NM
                WHEN ORG4.ORG_TIER_CD = '9' THEN ORG4.ORG_NM
                WHEN ORG5.ORG_TIER_CD = '9' THEN ORG5.ORG_NM
                WHEN ORG6.ORG_TIER_CD = '9' THEN ORG6.ORG_NM
                WHEN ORG7.ORG_TIER_CD = '9' THEN ORG7.ORG_NM
                WHEN ORG8.ORG_TIER_CD = '9' THEN ORG8.ORG_NM
                WHEN ORG9.ORG_TIER_CD = '9' THEN ORG9.ORG_NM
                WHEN ORG10.ORG_TIER_CD = '9' THEN ORG10.ORG_NM
            END AS TENTH_ORG_NM
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '9' THEN ORG1.ORG_TIER_CD
                WHEN ORG2.ORG_TIER_CD = '9' THEN ORG2.ORG_TIER_CD
                WHEN ORG3.ORG_TIER_CD = '9' THEN ORG3.ORG_TIER_CD
                WHEN ORG4.ORG_TIER_CD = '9' THEN ORG4.ORG_TIER_CD
                WHEN ORG5.ORG_TIER_CD = '9' THEN ORG5.ORG_TIER_CD
                WHEN ORG6.ORG_TIER_CD = '9' THEN ORG6.ORG_TIER_CD
                WHEN ORG7.ORG_TIER_CD = '9' THEN ORG7.ORG_TIER_CD
                WHEN ORG8.ORG_TIER_CD = '9' THEN ORG8.ORG_TIER_CD
                WHEN ORG9.ORG_TIER_CD = '9' THEN ORG9.ORG_TIER_CD
                WHEN ORG10.ORG_TIER_CD = '9' THEN ORG10.ORG_TIER_CD
            END AS TENTH_ORG_TIER_CD
            --TENTH
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '10' THEN ORG1.ORG_CD
                WHEN ORG2.ORG_TIER_CD = '10' THEN ORG2.ORG_CD
                WHEN ORG3.ORG_TIER_CD = '10' THEN ORG3.ORG_CD
                WHEN ORG4.ORG_TIER_CD = '10' THEN ORG4.ORG_CD
                WHEN ORG5.ORG_TIER_CD = '10' THEN ORG5.ORG_CD
                WHEN ORG6.ORG_TIER_CD = '10' THEN ORG6.ORG_CD
                WHEN ORG7.ORG_TIER_CD = '10' THEN ORG7.ORG_CD
                WHEN ORG8.ORG_TIER_CD = '10' THEN ORG8.ORG_CD
                WHEN ORG9.ORG_TIER_CD = '10' THEN ORG9.ORG_CD
                WHEN ORG10.ORG_TIER_CD = '10' THEN ORG10.ORG_CD
            END AS ELVTH_ORG_CD
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '10' THEN ORG1.ORG_NM
                WHEN ORG2.ORG_TIER_CD = '10' THEN ORG2.ORG_NM
                WHEN ORG3.ORG_TIER_CD = '10' THEN ORG3.ORG_NM
                WHEN ORG4.ORG_TIER_CD = '10' THEN ORG4.ORG_NM
                WHEN ORG5.ORG_TIER_CD = '10' THEN ORG5.ORG_NM
                WHEN ORG6.ORG_TIER_CD = '10' THEN ORG6.ORG_NM
                WHEN ORG7.ORG_TIER_CD = '10' THEN ORG7.ORG_NM
                WHEN ORG8.ORG_TIER_CD = '10' THEN ORG8.ORG_NM
                WHEN ORG9.ORG_TIER_CD = '10' THEN ORG9.ORG_NM
                WHEN ORG10.ORG_TIER_CD = '10' THEN ORG10.ORG_NM
            END AS ELVTH_ORG_NM
            ,CASE
                WHEN ORG1.ORG_TIER_CD = '10' THEN ORG1.ORG_TIER_CD
                WHEN ORG2.ORG_TIER_CD = '10' THEN ORG2.ORG_TIER_CD
                WHEN ORG3.ORG_TIER_CD = '10' THEN ORG3.ORG_TIER_CD
                WHEN ORG4.ORG_TIER_CD = '10' THEN ORG4.ORG_TIER_CD
                WHEN ORG5.ORG_TIER_CD = '10' THEN ORG5.ORG_TIER_CD
                WHEN ORG6.ORG_TIER_CD = '10' THEN ORG6.ORG_TIER_CD
                WHEN ORG7.ORG_TIER_CD = '10' THEN ORG7.ORG_TIER_CD
                WHEN ORG8.ORG_TIER_CD = '10' THEN ORG8.ORG_TIER_CD
                WHEN ORG9.ORG_TIER_CD = '10' THEN ORG9.ORG_TIER_CD
                WHEN ORG10.ORG_TIER_CD = '10' THEN ORG10.ORG_TIER_CD
            END AS ELVTH_ORG_TIER_CD
        FROM
            ORG1
            ,ORG2
            ,ORG3
            ,ORG4
            ,ORG5
            ,ORG6
            ,ORG7
            ,ORG8
            ,ORG9
            ,ORG10
        WHERE
            ORG1.PRNT_ORG_CD = ORG2.ORG_CD
        AND ORG2.PRNT_ORG_CD = ORG3.ORG_CD
        AND ORG3.PRNT_ORG_CD = ORG4.ORG_CD
        AND ORG4.PRNT_ORG_CD = ORG5.ORG_CD
        AND ORG5.PRNT_ORG_CD = ORG6.ORG_CD
        AND ORG6.PRNT_ORG_CD = ORG7.ORG_CD
        AND ORG7.PRNT_ORG_CD = ORG8.ORG_CD
        AND ORG8.PRNT_ORG_CD = ORG9.ORG_CD
        AND ORG9.PRNT_ORG_CD = ORG10.ORG_CD
    )
    SELECT
        H.ORG_CD
        ,H.ORG_TIER_CD
        ,TIER.ORG_TIER_LVL_NUM AS ORG_LAYER_NUM
        ,H.EFF_FROM_DT
        ,H.EFF_THRU_DT
        ,H.FIRST_ORG_CD
        ,H.FIRST_ORG_NM
        ,H.FIRST_ORG_TIER_CD
        ,H.SCD_ORG_CD
        ,H.SCD_ORG_NM
        ,H.SCD_ORG_TIER_CD
        ,H.THIRD_ORG_CD
        ,H.THIRD_ORG_NM
        ,H.THIRD_ORG_TIER_CD
        ,H.FRTH_ORG_CD
        ,H.FRTH_ORG_NM
        ,H.FRTH_ORG_TIER_CD
        ,H.FIFTH_ORG_CD
        ,H.FIFTH_ORG_NM
        ,H.FIFTH_ORG_TIER_CD
        ,H.SIXTH_ORG_CD
        ,H.SIXTH_ORG_NM
        ,H.SIXTH_ORG_TIER_CD
        ,H.SVNTH_ORG_CD
        ,H.SVNTH_ORG_NM
        ,H.SVNTH_ORG_TIER_CD
        ,H.EIGHTH_ORG_CD
        ,H.EIGHTH_ORG_NM
        ,H.EIGHTH_ORG_TIER_CD
        ,H.NINTH_ORG_CD
        ,H.NINTH_ORG_NM
        ,H.NINTH_ORG_TIER_CD
        ,H.TENTH_ORG_CD
        ,H.TENTH_ORG_NM
        ,H.TENTH_ORG_TIER_CD
        ,H.ELVTH_ORG_CD
        ,H.ELVTH_ORG_NM
        ,H.ELVTH_ORG_TIER_CD
    FROM
        HIERARCHY H
        ,ORG_TIER TIER
    WHERE
        TIER.GLBL_CMPY_CD = #glblCmpyCd#
    AND TIER.EZCANCELFLAG = '0'
    AND H.ORG_TIER_CD = TIER.ORG_TIER_CD
    AND H.FIRST_ORG_CD = #firstOrgCd#
    ORDER BY
        H.FIRST_ORG_CD
        ,H.ORG_CD
        ,H.ORG_TIER_CD
    </statement>

    <statement id="getDeleteS21OrgList" parameterClass="Map" resultClass="Map">
    (
        SELECT
            ORG.TOC_CD
        FROM
            S21_ORG ORG
        WHERE
            ORG.GLBL_CMPY_CD = #glblCmpyCd#
        AND ORG.EZCANCELFLAG = '0'
        AND ORG.FIRST_ORG_CD = #firstOrgCd#
        AND ORG.RGTN_STS_CD != #rgtnStsCd_P99#
    )
    <!-- QC#15096 Add Start -->
    UNION
    (
        SELECT
            ORG.TOC_CD
        FROM
            S21_ORG ORG
         ,  ORG_TOC_CHNG_RQST RQST
         ,  TOC TOC
         ,  ORG_STRU STRU
        WHERE
            ORG.GLBL_CMPY_CD  = #glblCmpyCd#
        AND ORG.EZCANCELFLAG  = '0'
        AND ORG.FIRST_ORG_CD  = #firstOrgCd#
        AND ORG.RGTN_STS_CD   = #rgtnStsCd_P99#

        AND ORG.GLBL_CMPY_CD  = RQST.GLBL_CMPY_CD
        AND ORG.EZCANCELFLAG  = RQST.EZCANCELFLAG
        AND ORG.TOC_CD        = RQST.TOC_CD
        AND RQST.RGTN_STS_CD  = #rgtnStsCd_P20#

        AND ORG.GLBL_CMPY_CD  = TOC.GLBL_CMPY_CD
        AND ORG.EZCANCELFLAG  = TOC.EZCANCELFLAG
        AND ORG.TOC_CD        = TOC.TOC_CD

        AND TOC.GLBL_CMPY_CD  = STRU.GLBL_CMPY_CD
        AND STRU.EZCANCELFLAG = STRU.EZCANCELFLAG
        AND TOC.ORG_CD        = STRU.ORG_CD
        AND STRU.FIRST_ORG_CD = #firstOrgCd#
    )
    <!-- QC#15096 Add End -->
    </statement>

    <statement id="getInsertS21OrgList" parameterClass="Map" resultClass="Map">
    SELECT
        TOC.TOC_CD
        ,TOC.TOC_NM
        ,TOC.COA_BR_CD
        ,TOC.COA_CC_CD
        ,TOC.COA_PROD_CD
        ,TOC.JOB_TTL_CD
        ,TOC.ORG_LAYER_NUM
        ,TOC.ORG_FUNC_ROLE_TP_CD
        ,TOC.COA_CH_CD
        ,ORG.FIRST_ORG_CD
        ,ORG.FIRST_ORG_NM
        ,ORG.SCD_ORG_CD
        ,ORG.SCD_ORG_NM
        ,ORG.THIRD_ORG_CD
        ,ORG.THIRD_ORG_NM
        ,ORG.FRTH_ORG_CD
        ,ORG.FRTH_ORG_NM
        ,ORG.FIFTH_ORG_CD
        ,ORG.FIFTH_ORG_NM
        ,ORG.SIXTH_ORG_CD
        ,ORG.SIXTH_ORG_NM
        ,ORG.SVNTH_ORG_CD
        ,ORG.SVNTH_ORG_NM
        ,ORG.EIGHTH_ORG_CD
        ,ORG.EIGHTH_ORG_NM
        ,ORG.NINTH_ORG_CD
        ,ORG.NINTH_ORG_NM
        ,ORG.TENTH_ORG_CD
        ,ORG.TENTH_ORG_NM
        ,ORG.ELVTH_ORG_CD
        ,ORG.ELVTH_ORG_NM
        ,ORG.FIRST_ORG_TIER_CD
        ,ORG.SCD_ORG_TIER_CD
        ,ORG.THIRD_ORG_TIER_CD
        ,ORG.FRTH_ORG_TIER_CD
        ,ORG.FIFTH_ORG_TIER_CD
        ,ORG.SIXTH_ORG_TIER_CD
        ,ORG.SVNTH_ORG_TIER_CD
        ,ORG.EIGHTH_ORG_TIER_CD
        ,ORG.NINTH_ORG_TIER_CD
        ,ORG.TENTH_ORG_TIER_CD
        ,ORG.ELVTH_ORG_TIER_CD
    FROM
        ORG_STRU ORG
        ,TOC TOC
    WHERE
        ORG.GLBL_CMPY_CD = #glblCmpyCd#
    AND ORG.EZCANCELFLAG = '0'
    AND ORG.GLBL_CMPY_CD = TOC.GLBL_CMPY_CD
    AND ORG.EZCANCELFLAG = TOC.EZCANCELFLAG
    AND ORG.ORG_CD = TOC.ORG_CD
    AND ORG.FIRST_ORG_CD = #firstOrgCd#
    AND EXISTS (
      SELECT 1
        FROM ORG_TOC_CHNG_RQST RQST
       WHERE RQST.EZCANCELFLAG = '0'
         AND RQST.GLBL_CMPY_CD = TOC.GLBL_CMPY_CD
         AND RQST.TOC_CD       = TOC.TOC_CD
         AND RQST.RGTN_STS_CD  = #rgtnSts_P20#
    )
    </statement>

    <statement id="getOrgLayerNum" parameterClass="Map" resultClass="Map">
    SELECT
        TIER.ORG_TIER_LVL_NUM AS ORG_LAYER_NUM
    FROM
         DS_ORG_UNIT ORG
        ,ORG_TIER    TIER
    WHERE
        ORG.GLBL_CMPY_CD      = #glblCmpyCd#
    AND ORG.ORG_CD            = #orgCd#
    AND ORG.EZCANCELFLAG      = '0'
    AND ORG.EFF_FROM_DT   &lt;= #procDt#
    AND NVL(ORG.EFF_THRU_DT, #maxEndDate#) &gt;= #procDt#
    AND ORG.GNRN_TP_CD       IN (#gnrnTpCd_2#, #gnrnTpCd_3#)
    AND ORG.ORG_STRU_TP_CD    = #orgStruTpCd#
    AND ORG.GLBL_CMPY_CD      = TIER.GLBL_CMPY_CD
    AND ORG.ORG_TIER_CD       = TIER.ORG_TIER_CD
    AND TIER.EZCANCELFLAG     = '0'
    </statement>

    <statement id="getEffectiveOrgRelnCount" parameterClass="Map" resultClass="Integer">
    SELECT
        COUNT(*) CNT
    FROM
        DS_ORG_RELN R
        , DS_ORG_UNIT U 
    WHERE 
        U.GLBL_CMPY_CD = #glblCmpyCd#
    AND U.EZCANCELFLAG = '0'
    AND U.ORG_TIER_CD  = #orgTierCd#
    AND U.FIRST_ORG_CD = #bizAreaOrgCd#

    AND U.GLBL_CMPY_CD = R.GLBL_CMPY_CD
    AND U.ORG_CD = R.PRNT_ORG_CD
    AND R.EZCANCELFLAG = '0'
    </statement>

    <statement id="countTocInBizArea" parameterClass="Map" resultClass="Integer">
    SELECT 
        COUNT(TOC.TOC_CD)
    FROM
        TOC TOC
     ,  DS_ORG_UNIT DOU
    WHERE
        TOC.GLBL_CMPY_CD                       = #glblCmpyCd#
    AND TOC.GLBL_CMPY_CD                       = DOU.GLBL_CMPY_CD
    AND TOC.ORG_CD                             = DOU.ORG_CD
    AND DOU.FIRST_ORG_CD                       = #bizAreaOrgCd#
    AND DOU.EFF_FROM_DT                    &lt;= #procDt#
    AND NVL(DOU.EFF_THRU_DT, #maxEndDate#) &gt;= #procDt#
    AND TOC.EZCANCELFLAG                       = 0
    AND DOU.EZCANCELFLAG                       = 0
    AND EXISTS (
      SELECT 1
        FROM ORG_TOC_CHNG_RQST RQST
       WHERE RQST.EZCANCELFLAG = '0'
         AND RQST.GLBL_CMPY_CD = TOC.GLBL_CMPY_CD
         AND RQST.TOC_CD       = TOC.TOC_CD
         AND RQST.RGTN_STS_CD  = #rgtnSts_P20#
    )
    </statement>

    <!-- START 2019/02/15 Hd.Sugawara [QC#29668,ADD] -->
    <statement id="getNewDsOrgResrcRevenue" parameterClass="Map" resultClass="Map">
    SELECT
            REV.PSN_CD
          , REV.REV_ACCT_TP_CD
          , REV.EFF_FROM_DT
          , REV.COA_CMPY_CD
          , REV.COA_EXTN_CD
          , REV.COA_BR_CD
          , REV.COA_CC_CD
          , REV.EFF_THRU_DT
          , REV.MAN_ENTRY_FLG
    FROM
            DS_ORG_RESRC_REV REV
          , REV_ACCT_TP TP
    WHERE
            REV.GLBL_CMPY_CD                       = #glblCmpyCd#
        AND REV.EZCANCELFLAG                       = '0'
        AND REV.GLBL_CMPY_CD                       = TP.GLBL_CMPY_CD
        AND REV.EZCANCELFLAG                       = TP.EZCANCELFLAG
        AND REV.REV_ACCT_TP_CD                     = TP.REV_ACCT_TP_CD
        AND TP.REV_COA_FLG                         = #revCoaFlg#
        AND REV.EFF_FROM_DT                    &lt;= #procDt#
        AND NVL(REV.EFF_THRU_DT, #maxEndDate#) &gt;= #procDt#
        AND REV.TOC_RGTN_REQ_FLG                   = #tocRgtnReqFlg#
    </statement>

    <statement id="getActiveOrganization" parameterClass="Map" resultClass="Map">
    SELECT
            PSN.PSN_FIRST_NM
          , PSN.PSN_LAST_NM
          , ASG.TOC_CD
          , ASG.EFF_FROM_DT AS EFF_FROM_DT_ASG
          , ASG.EFF_THRU_DT AS EFF_THRU_DT_ASG
          , RQST.ORG_FUNC_ROLE_TP_CD
          , RELN.ORG_STRU_TP_CD
          , RELN.ORG_CD
          , RELN.ORG_LAYER_NUM
          , RELN.EFF_FROM_DT AS EFF_FROM_DT_RELN
          , RELN.EFF_THRU_DT AS EFF_THRU_DT_RELN
    FROM
            S21_PSN PSN
          , ORG_FUNC_ASG ASG
          , ORG_TOC_CHNG_RQST RQST
          , TOC_ORG_STRU_RELN RELN
          , DS_ORG_UNIT ORG
          , ORG_STRU_TP STRU
          , BIZ_AREA_ORG BIZ
    WHERE
            PSN.GLBL_CMPY_CD                       = #glblCmpyCd#
        AND PSN.EZCANCELFLAG                       = '0'
        AND ASG.GLBL_CMPY_CD                       = #glblCmpyCd#
        AND ASG.EZCANCELFLAG                       = '0'
        AND RQST.GLBL_CMPY_CD                      = #glblCmpyCd#
        AND RQST.EZCANCELFLAG                      = '0'
        AND RELN.GLBL_CMPY_CD                      = #glblCmpyCd#
        AND RELN.EZCANCELFLAG                      = '0'
        AND ORG.GLBL_CMPY_CD                       = #glblCmpyCd#
        AND ORG.EZCANCELFLAG                       = '0'
        AND STRU.GLBL_CMPY_CD                      = #glblCmpyCd#
        AND STRU.EZCANCELFLAG                      = '0'
        AND BIZ.GLBL_CMPY_CD                       = #glblCmpyCd#
        AND BIZ.EZCANCELFLAG                       = '0'
        AND PSN.PSN_CD                             = #psnCd#
        AND PSN.PSN_CD                             = ASG.PSN_CD
        AND ASG.TOC_CD                             = RQST.TOC_CD
        AND RQST.TOC_CD                            = RELN.TOC_CD
        AND RQST.ORG_CD                            = RELN.ORG_CD
        AND ORG.ORG_CD                             = RELN.ORG_CD
        AND ORG.ORG_STRU_TP_CD                     = STRU.ORG_STRU_TP_CD
        AND STRU.TRTY_STRU_FLG                     = #flgOffN#
        AND ORG.FIRST_ORG_CD                       = BIZ.BIZ_AREA_ORG_CD
        AND ORG.ORG_STRU_TP_CD                     = BIZ.ORG_STRU_TP_CD
        AND ASG.GNRN_TP_CD                        != #gnrnTpDelete#
        AND ASG.GNRN_TP_CD                        != #gnrnTpTerminated#
        AND ASG.GNRN_TP_CD                        != #gnrnTpPast#
        AND ASG.EFF_FROM_DT                    &lt;= #procDt#
        AND NVL(ASG.EFF_THRU_DT, #maxEndDate#) &gt;= #procDt#
    ORDER BY
            ASG.TOC_CD
          , RELN.ORG_CD
    </statement>
    <!-- END 2019/02/15 Hd.Sugawara [QC#29668,ADD] -->
</sqlMap>
