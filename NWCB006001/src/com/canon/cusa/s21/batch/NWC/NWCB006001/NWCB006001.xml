<?xml version="1.0" encoding="UTF-8"?>
<sqlMap namespace="NWCB006001">

	<statement id="getInvoiceNumberForFinalize" parameterClass="Map" resultClass="String">
		SELECT
			I.INV_NUM
		FROM
			 INV I
		WHERE
				I.GLBL_CMPY_CD       = #glblCmpyCd#
			AND I.FNLZ_INV_FLG       = #fnlzInvFlg#
            AND I.SYS_SRC_CD        != #sysSrcCd_NFC#
			AND I.EZCANCELFLAG       = '0'
			AND I.ITRL_INV_ERR_FLG   = #itrlInvErrFlg#
	</statement>
	
	<statement id="getCpoNumberForChgSts" parameterClass="Map" resultClass="Map">
		SELECT
			I.CPO_ORD_NUM
           ,IL.CPO_DTL_LINE_NUM
           ,IL.SHPG_PLN_NUM
           <!-- 2018/05/24 S21_NA#25562 Add Start -->
           ,IL.CPO_DTL_LINE_NUM
           ,IL.CPO_DTL_LINE_SUB_NUM
           <!-- 2018/05/24 S21_NA#25562 Add End -->
		FROM
			 INV      I
            ,INV_LINE IL
		WHERE
				I.GLBL_CMPY_CD       = #glblCmpyCd#
            AND I.INV_NUM            = #invNum#
            AND I.CPO_ORD_NUM        IS NOT NULL
			AND I.EZCANCELFLAG       = '0'
            
            AND I.GLBL_CMPY_CD       = IL.GLBL_CMPY_CD
            AND I.INV_NUM            = IL.INV_NUM
            AND IL.CPO_DTL_LINE_NUM  IS NOT NULL
            AND IL.EZCANCELFLAG      = '0'
        ORDER BY
            I.CPO_ORD_NUM
	</statement>

</sqlMap>