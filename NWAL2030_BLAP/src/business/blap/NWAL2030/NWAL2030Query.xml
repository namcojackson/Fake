<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NWAL2030Query">
    <typeAlias alias="NWAL2030_LCMsg" type="business.blap.NWAL2030.NWAL2030_LCMsg"/>
    <typeAlias alias="NWAL2030_WCMsg" type="business.blap.NWAL2030.NWAL2030_WCMsg"/>
    <typeAlias alias="NWAL2030_ACMsg" type="business.blap.NWAL2030.NWAL2030_ACMsg"/>

    <statement id="getPulldownListLevel" parameterClass="Map" resultMap="result.getPulldownListLevel">
        SELECT
             HLD_LVL_CD
            ,HLD_LVL_DESC_TXT
        FROM
            (
                SELECT
                     HL.HLD_LVL_CD
                    ,HL.HLD_LVL_DESC_TXT
                FROM
                    HLD_LVL HL
                WHERE
                        HL.GLBL_CMPY_CD = #glblCmpyCd#
                    <iterate property="hldLvlCdArray" var="hldLvlCd[]" open="AND HL.HLD_LVL_CD IN ("  close=")" conjunction=",">
                    #hldLvlCd[]#
                    </iterate>
                    AND HL.EZCANCELFLAG = '0'
                ORDER BY
                    HL.HLD_LVL_SORT_NUM ASC
            )
        WHERE
            ROWNUM &lt;= #rowNum#
    </statement>

    <statement id="getPulldownListWorkflow" parameterClass="Map" resultMap="result.getPulldownListWorkflow">
        SELECT
             ORD_PROC_NODE_CD
            ,ORD_PROC_NODE_NM
            ,CHK_PNT_ORD_VLD_FLG
            ,CHK_PNT_SOFT_ALLOC_FLG
            ,CHK_PNT_SHPG_VLD_FLG
            ,CHK_PNT_SO_CANC_FLG
            ,CHK_PNT_CR_CHK_FLG
            ,REL_PNT_SOFT_ALLOC_FLG
            ,REL_PNT_HARD_ALLOC_FLG
            ,REL_PNT_CR_CHK_FLG
            ,REL_PNT_SO_CRAT_FLG
            ,REL_PNT_SO_PRINT_FLG
            ,REL_PNT_SHPG_FLG
            ,REL_PNT_REV_FLG
        FROM
            (
                SELECT
                     OPN.ORD_PROC_NODE_CD
                    ,OPN.ORD_PROC_NODE_NM
                    ,HST.CHK_PNT_ORD_VLD_FLG
                    ,HST.CHK_PNT_SOFT_ALLOC_FLG
                    ,HST.CHK_PNT_SHPG_VLD_FLG
                    ,HST.CHK_PNT_SO_CANC_FLG
                    ,HST.CHK_PNT_CR_CHK_FLG
                    ,HST.REL_PNT_SOFT_ALLOC_FLG
                    ,HST.REL_PNT_HARD_ALLOC_FLG
                    ,HST.REL_PNT_CR_CHK_FLG
                    ,HST.REL_PNT_SO_CRAT_FLG
                    ,HST.REL_PNT_SO_PRINT_FLG
                    ,HST.REL_PNT_SHPG_FLG
                    ,HST.REL_PNT_REV_FLG
                FROM
                     ORD_PROC_NODE  OPN
                    ,HLD_SETUP_TMPL HST
                WHERE
                        OPN.GLBL_CMPY_CD     = #glblCmpyCd#
                    AND OPN.GLBL_CMPY_CD     = HST.GLBL_CMPY_CD
                    AND OPN.ORD_PROC_NODE_CD = HST.ORD_PROC_NODE_CD
                    AND OPN.EZCANCELFLAG     = '0'
                    AND HST.EZCANCELFLAG     = '0'
                ORDER BY
                    OPN.ORD_PROC_NODE_SORT_NUM ASC
            )
        WHERE
            ROWNUM &lt;= #rowNum#
    </statement>

    <statement id="getSearchData" parameterClass="Map" resultMap="result.getSearchData">
        SELECT
             HLD_RSN_CD
            ,HLD_RSN_NM
            ,HLD_RSN_DESC_TXT
            ,HLD_LVL_CD
            ,ORD_PROC_NODE_CD
            ,HLD_EFF_FROM_DT
            ,HLD_EFF_TO_DT
            ,HR_EZUPTIME
            ,HR_EZUPTIMEZONE
            ,XX_EXST_FLG
        FROM
            (
                SELECT
                     HR.HLD_RSN_CD
                    ,HR.HLD_RSN_NM
                    ,HR.HLD_RSN_DESC_TXT
                    ,HR.HLD_LVL_CD
                    ,HR.ORD_PROC_NODE_CD
                    ,HR.HLD_EFF_FROM_DT
                    ,HR.HLD_EFF_TO_DT
                    ,HR.EZUPTIME      AS HR_EZUPTIME
                    ,HR.EZUPTIMEZONE  AS HR_EZUPTIMEZONE
                    ,'Y' AS XX_EXST_FLG
                FROM
                     HLD_RSN        HR
                    ,HLD_SETUP_TMPL HST
                WHERE
                        HR.GLBL_CMPY_CD      = #glblCmpyCd#
                    <isNotNull property="hldRsnCd" >
                    AND HR.HLD_RSN_CD     LIKE #hldRsnCd#
                    </isNotNull>
                    <isNotNull property="hldRsnNm" >
                    AND HR.HLD_RSN_NM     LIKE #hldRsnNm#
                    </isNotNull>
                    AND HR.GLBL_CMPY_CD      = HST.GLBL_CMPY_CD
                    AND HR.ORD_PROC_NODE_CD  = HST.ORD_PROC_NODE_CD
                    AND HR.EZCANCELFLAG      = '0'
                    AND HST.EZCANCELFLAG     = '0'
                ORDER BY
                    HR.HLD_RSN_CD ASC
            )
        WHERE
            ROWNUM &lt;= #rowNum#
    </statement>

    <statement id="getMaxSortNum" parameterClass="Map" resultMap="BigDecimal">
        SELECT
            MAX(HR.HLD_RSN_SORT_NUM) AS MAX_HLD_RSN_SORT_NUM
        FROM
            HLD_RSN HR
        WHERE
                HR.GLBL_CMPY_CD = #glblCmpyCd#
            AND HR.EZCANCELFLAG = '0'
    </statement>

    <resultMap id="result.getPulldownListLevel" class="NWAL2030_LCMsg">
        <result property="hldLvlCd_L"        column="HLD_LVL_CD"          javaType="EZDSStringItem"/>
        <result property="hldLvlDescTxt_L"   column="HLD_LVL_DESC_TXT"    javaType="EZDSStringItem"/>
    </resultMap>

    <resultMap id="result.getPulldownListWorkflow" class="NWAL2030_WCMsg">
        <result property="ordProcNodeCd_W"        column="ORD_PROC_NODE_CD"         javaType="EZDSStringItem"/>
        <result property="ordProcNodeDescTxt_W"   column="ORD_PROC_NODE_NM"         javaType="EZDSStringItem"/>
        <result property="chkPntOrdVldFlg_W"      column="CHK_PNT_ORD_VLD_FLG"      javaType="EZDSStringItem"/>
        <result property="chkPntSoftAllocFlg_W"   column="CHK_PNT_SOFT_ALLOC_FLG"   javaType="EZDSStringItem"/>
        <result property="chkPntShpgVldFlg_W"     column="CHK_PNT_SHPG_VLD_FLG"     javaType="EZDSStringItem"/>
        <result property="chkPntSoCancFlg_W"      column="CHK_PNT_SO_CANC_FLG"      javaType="EZDSStringItem"/>
        <result property="chkPntCrChkFlg_W"       column="CHK_PNT_CR_CHK_FLG"       javaType="EZDSStringItem"/>
        <result property="relPntSoftAllocFlg_W"   column="REL_PNT_SOFT_ALLOC_FLG"   javaType="EZDSStringItem"/>
        <result property="relPntHardAllocFlg_W"   column="REL_PNT_HARD_ALLOC_FLG"   javaType="EZDSStringItem"/>
        <result property="relPntCrChkFlg_W"       column="REL_PNT_CR_CHK_FLG"       javaType="EZDSStringItem"/>
        <result property="relPntSoCratFlg_W"      column="REL_PNT_SO_CRAT_FLG"      javaType="EZDSStringItem"/>
        <result property="relPntSoPrintFlg_W"     column="REL_PNT_SO_PRINT_FLG"     javaType="EZDSStringItem"/>
        <result property="relPntShpgFlg_W"        column="REL_PNT_SHPG_FLG"         javaType="EZDSStringItem"/>
        <result property="relPntRevFlg_W"         column="REL_PNT_REV_FLG"          javaType="EZDSStringItem"/>
    </resultMap>

    <resultMap id="result.getSearchData" class="NWAL2030_ACMsg">
        <result property="hldRsnCd_A"         column="HLD_RSN_CD"         javaType="EZDSStringItem"/>
        <result property="hldRsnNm_A"         column="HLD_RSN_NM"         javaType="EZDSStringItem"/>
        <result property="hldRsnDescTxt_A"    column="HLD_RSN_DESC_TXT"   javaType="EZDSStringItem"/>
        <result property="hldLvlCd_SV"        column="HLD_LVL_CD"         javaType="EZDSStringItem"/>
        <result property="ordProcNodeCd_SV"   column="ORD_PROC_NODE_CD"   javaType="EZDSStringItem"/>
        <result property="hldEffFromDt_A"     column="HLD_EFF_FROM_DT"    javaType="EZDSStringItem"/>
        <result property="hldEffToDt_A"       column="HLD_EFF_TO_DT"      javaType="EZDSStringItem"/>
        <result property="ezUpTime_AH"        column="HR_EZUPTIME"        javaType="EZDSStringItem"/>
        <result property="ezUpTimeZone_AH"    column="HR_EZUPTIMEZONE"    javaType="EZDSStringItem"/>
        <result property="xxExstFlg_A"        column="XX_EXST_FLG"        javaType="EZDSStringItem"/>
    </resultMap>
</sqlMap>
