<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NLGL0030Query">

    <typeAlias alias="NLGL0030CMsg"    type="business.blap.NLGL0030.NLGL0030CMsg"/>
    <typeAlias alias="NLGL0030_ASMsg"  type="business.blap.NLGL0030.NLGL0030_ASMsg"/>
    <typeAlias alias="NLGL0030_BSMsg"  type="business.blap.NLGL0030.NLGL0030_BSMsg"/>
    <typeAlias alias="NLGL0030SMsg"    type="business.blap.NLGL0030.NLGL0030SMsg"/>

    <statement id="getWHPullDownListHistScrn" parameterClass="Map" resultClass="Map">
    SELECT
           DECODE(WH.WH_CD, #whAllVal#, #whAllSelval#, WH.WH_CD)  WH_CD
          ,WH.WMS_DESC_NM                                         WMS_DESC_NM
      FROM
           WMS_WH WH
     WHERE
           WH.GLBL_CMPY_CD = #glblCmpyCd#
       AND WH.MW_REPL_TRGT_GRP_CD   IS NOT NULL
       AND WH.EZCANCELFLAG = '0'
     ORDER BY
           WH.WH_CD
    </statement>

    <statement id="getWHPullDownListDnldScrn" parameterClass="Map" resultClass="Map">
    SELECT
           WH.WH_CD       WH_CD
          ,WH.WMS_DESC_NM WMS_DESC_NM
      FROM
           WMS_WH WH
     WHERE
           WH.GLBL_CMPY_CD = #glblCmpyCd#
       AND WH.WH_CD        &lt; &gt; #whAllVal#
       AND WH.MW_REPL_TRGT_GRP_CD   IS NOT NULL
       AND WH.EZCANCELFLAG = '0'
     ORDER BY
           WH.WH_CD
    </statement>

    <statement id="getMdseHistList" parameterClass="Map" resultMap="result.NLGL0030_ASMsg">
    SELECT
           WML.WH_CD                              WH_CD
          ,WML.WMS_MDSE_CD                        WMS_MDSE_CD
          ,MDSE.MDSE_NM                           MDSE_NM
          ,MDSE.MDSE_FML_NM                       MDSE_FML_NM
          ,SUBSTR(MDSE.FIFTH_PROD_CTRL_CD,1,1)    FIFTH_PROD_CTRL_CD
          ,MDSE.SHPG_SER_TAKE_FLG                 SHPG_SER_TAKE_FLG
          ,FC.NMFC_CLS_NUM                        NMFC_CLS_NUM
          ,MSP_CA.IN_EACH_QTY                     IN_EACH_QTY_CA
          ,MSP_PL.IN_EACH_QTY                     IN_EACH_QTY_PL
          ,MSP_CA.PKG_UOM_CD                      PKG_UOM_CD_CA
          ,MSP_PL.PKG_UOM_CD                      PKG_UOM_CD_PL
          ,WML.WMS_ITEM_DNLD_STS_CD               WMS_ITEM_DNLD_STS_CD
          ,WML.EZUPTIME                           WML_EZUPTIME
          ,WML.EZUPTIMEZONE                       WML_EZUPTIMEZONE
      FROM
           WMS_MDSE_LIST WML
          ,MDSE MDSE
          ,FRT_CLS FC
          ,MDSE_STORE_PKG MSP_CA
          ,MDSE_STORE_PKG MSP_PL
     WHERE
           WML.GLBL_CMPY_CD        = #glblCmpyCd#
       AND WML.WMS_MDSE_CD         = MDSE.MDSE_CD
       AND WML.WMS_MDSE_CD         = MSP_CA.MDSE_CD(+)
       AND WML.WMS_MDSE_CD         = MSP_PL.MDSE_CD(+)
       AND MDSE.FRT_CLS_CD         = FC.FRT_CLS_CD(+)
       <isNotEqual property="whCd" compareValue="00">
       AND WML.WH_CD               = #whCd#
       </isNotEqual>
       <isNotNull property="wmsMdseCd">
       AND WML.WMS_MDSE_CD         = #wmsMdseCd#
       </isNotNull>
       AND WML.EZCANCELFLAG        = '0'
       AND WML.GLBL_CMPY_CD        = MDSE.GLBL_CMPY_CD
       AND MDSE.EZCANCELFLAG       = '0'
       AND MDSE.GLBL_CMPY_CD       = FC.GLBL_CMPY_CD(+)
       AND FC.EZCANCELFLAG(+)      = '0'
       AND WML.GLBL_CMPY_CD        = MSP_CA.GLBL_CMPY_CD(+)
       AND MSP_CA.PKG_UOM_CD(+)    = #uomCA#
       AND MSP_CA.EZCANCELFLAG(+)  = '0'
       AND WML.GLBL_CMPY_CD        = MSP_PL.GLBL_CMPY_CD(+)
       AND MSP_PL.PKG_UOM_CD(+)    = #uomPL#
       AND MSP_PL.EZCANCELFLAG(+)  = '0'
       AND ROWNUM                  &lt;= #rownum#
     ORDER BY
              WML.WH_CD
             ,WML.WMS_MDSE_CD DESC
    </statement>

    <resultMap id="result.NLGL0030_ASMsg" class="NLGL0030_ASMsg">
        <result property="whCd_D0"                 column="WH_CD"                      javaType="EZDSStringItem"/>
        <result property="wmsMdseCd_D0"            column="WMS_MDSE_CD"                javaType="EZDSStringItem"/>
        <result property="mdseDescShortTxt_D0"     column="MDSE_NM"                    javaType="EZDSStringItem"/>
        <result property="mdseFmlNm_D0"            column="MDSE_FML_NM"                javaType="EZDSStringItem"/>
        <result property="fifthProdCtrlCd_D0"      column="FIFTH_PROD_CTRL_CD"         javaType="EZDSStringItem"/>
        <result property="nmfcClsNum_D0"           column="NMFC_CLS_NUM"               javaType="EZDSBigDecimalItem"/>
        <result property="inEachQty_Q0"            column="IN_EACH_QTY_CA"             javaType="EZDSBigDecimalItem"/>
        <result property="inEachQty_Q1"            column="IN_EACH_QTY_PL"             javaType="EZDSBigDecimalItem"/>
        <result property="shpgSerTakeFlg_D0"       column="SHPG_SER_TAKE_FLG"          javaType="EZDSStringItem"/>
        <result property="wmsItemDnldStsCd_D0"     column="WMS_ITEM_DNLD_STS_CD"       javaType="EZDSStringItem"/>
        <result property="ezUpTime_D0"             column="WML_EZUPTIME"               javaType="EZDSStringItem"/>
    </resultMap>

    <statement id="getMdseDnldList" parameterClass="Map" resultMap="result.NLGL0030_BSMsg">
    SELECT
           WML.WH_CD                              WH_CD
          ,MDSE.MDSE_CD                           MDSE_CD
          ,MDSE.MDSE_NM                           MDSE_NM
          ,MDSE.MDSE_FML_NM                       MDSE_FML_NM
          ,SUBSTR(MDSE.FIFTH_PROD_CTRL_CD,1,1)    FIFTH_PROD_CTRL_CD
          ,MDSE.SHPG_SER_TAKE_FLG                 SHPG_SER_TAKE_FLG
          ,FC.NMFC_CLS_NUM                        NMFC_CLS_NUM
          ,MSP_CA.IN_EACH_QTY                     IN_EACH_QTY_CA
          ,MSP_PL.IN_EACH_QTY                     IN_EACH_QTY_PL
          ,WML.WMS_ITEM_DNLD_STS_CD               WMS_ITEM_DNLD_STS_CD
          ,MDSE.EZUPTIME                          EZUPTIME
          ,WML.EZUPTIME                           WML_EZUPTIME
          ,WML.EZUPTIMEZONE                       WML_EZUPTIMEZONE
      FROM
           MDSE MDSE
          ,FRT_CLS FC
          ,MDSE_STORE_PKG MSP_CA
          ,MDSE_STORE_PKG MSP_PL
          ,WMS_MDSE_LIST WML
     WHERE
           MDSE.GLBL_CMPY_CD        = #glblCmpyCd#
       AND MDSE.MDSE_CD             = #mdseCd#
       AND MDSE.EZCANCELFLAG        = '0'
       AND MDSE.GLBL_CMPY_CD        = FC.GLBL_CMPY_CD(+)
       AND MDSE.GLBL_CMPY_CD        = MSP_CA.GLBL_CMPY_CD(+)
       AND MDSE.GLBL_CMPY_CD        = MSP_PL.GLBL_CMPY_CD(+)
       AND MDSE.FRT_CLS_CD          = FC.FRT_CLS_CD(+)
       AND MDSE.MDSE_CD             = MSP_CA.MDSE_CD(+)
       AND MDSE.MDSE_CD             = MSP_PL.MDSE_CD(+)
       AND MDSE.MDSE_CD             = WML.WMS_MDSE_CD(+)
       AND FC.EZCANCELFLAG(+)       = '0'
       AND MSP_CA.PKG_UOM_CD(+)     = #uomCA#
       AND MSP_CA.EZCANCELFLAG(+)   = '0'
       AND MSP_PL.PKG_UOM_CD(+)     = #uomPL#
       AND MSP_PL.EZCANCELFLAG(+)   = '0'
       AND WML.WH_CD(+)             = #whCd#
       AND WML.EZCANCELFLAG(+)      = '0'
    </statement>

    <resultMap id="result.NLGL0030_BSMsg" class="NLGL0030_BSMsg">
        <result property="whCd_D1"                 column="WH_CD"                      javaType="EZDSStringItem"/>
        <result property="mdseCd_D1"               column="MDSE_CD"                    javaType="EZDSStringItem"/>
        <result property="mdseDescShortTxt_D1"     column="MDSE_NM"                    javaType="EZDSStringItem"/>
        <result property="mdseFmlNm_D1"            column="MDSE_FML_NM"                javaType="EZDSStringItem"/>
        <result property="fifthProdCtrlCd_D1"      column="FIFTH_PROD_CTRL_CD"         javaType="EZDSStringItem"/>
        <result property="nmfcClsNum_D1"           column="NMFC_CLS_NUM"               javaType="EZDSBigDecimalItem"/>
        <result property="inEachQty_Q2"            column="IN_EACH_QTY_CA"             javaType="EZDSBigDecimalItem"/>
        <result property="inEachQty_Q3"            column="IN_EACH_QTY_PL"             javaType="EZDSBigDecimalItem"/>
        <result property="shpgSerTakeFlg_D1"       column="SHPG_SER_TAKE_FLG"          javaType="EZDSStringItem"/>
        <result property="wmsItemDnldStsCd_D1"     column="WMS_ITEM_DNLD_STS_CD"       javaType="EZDSStringItem"/>
        <result property="ezUpTime_D1"             column="EZUPTIME"                   javaType="EZDSStringItem"/>
        <result property="ezUpTime_D2"             column="WML_EZUPTIME"               javaType="EZDSStringItem"/>
        <result property="ezUpTimeZone_D2"         column="WML_EZUPTIMEZONE"           javaType="EZDSStringItem"/>
    </resultMap>

    <statement id="cntMdse" parameterClass="Map" resultClass="Integer">
    SELECT
           COUNT(MDSE.MDSE_CD)
      FROM
           MDSE MDSE
     WHERE
           MDSE.GLBL_CMPY_CD     = #glblCmpyCd#
       AND MDSE.MDSE_CD          = #mdseCd#
       AND MDSE.EZCANCELFLAG     = '0'
    </statement>
</sqlMap>
