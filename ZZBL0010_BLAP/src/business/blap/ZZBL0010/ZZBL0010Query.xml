<?xml version="1.0" encoding="UTF-8"?>
<sqlMap namespace="ZZBL0010Query">
	
	<typeAlias alias="ZZBL0010_ASMsg" type="business.blap.ZZBL0010.ZZBL0010_ASMsg"/>
    <typeAlias alias="ZZBL0010_ASMsgArray" type="business.blap.ZZBL0010.ZZBL0010_ASMsgArray"/>
	
	<statement id="getBatchLog" resultMap="result.ZZBL0010_ASMsg" parameterClass="Map">
		SELECT 
			BAT_PROC_LOG_PK,
			GLBL_CMPY_CD,
			BAT_PROC_SUB_SYS_CD,
			BAT_PROC_JBNT_ID,
			BAT_PROC_JOB_ID,
			BAT_PROC_PGM_ID,
			decode(BAT_PROC_TRM_CD,'0','Normal End','99','Abnormal End','10','Warning End') as BAT_PROC_TRM_CD_NM,
			BAT_PROC_START_TS,
			BAT_PROC_START_TZ,
			BAT_PROC_END_TS,
			BAT_PROC_END_TZ,
			BAT_PROC_TM_CNT,
			BAT_PROC_JOB_LOG_PATH_NM,
			BAT_PROC_NORM_REC_CNT,
			BAT_PROC_ERR_REC_CNT,
			BAT_PROC_TOT_REC_CNT,
			BAT_PROC_DEAD_LOCK_RTRY_CNT,
			BAT_PROC_REC_LOCK_RTRY_CNT,
			BAT_PROC_HOST_NM
	    FROM 
	    	BAT_PROC_LOG 
		WHERE 
			EZCANCELFLAG = 0 
			<isNotNull property="batProcLogPk">
				AND BAT_PROC_LOG_PK = #batProcLogPk# 
			</isNotNull>
			<isNotNull property="glblCmpyCd">
				AND  GLBL_CMPY_CD = #glblCmpyCd#
			</isNotNull>
			<isNotNull property="batProcSubSysCd">
				AND BAT_PROC_SUB_SYS_CD= #batProcSubSysCd# 
			</isNotNull>
			<isNotNull property="batProcJbntId">
				AND BAT_PROC_JBNT_ID = #batProcJbntId# 
			</isNotNull>
			<isNotNull property="batProcJobId" >
				AND BAT_PROC_JOB_ID = #batProcJobId#
			</isNotNull>
			<isNotNull property="batProcPgmId" >
				AND BAT_PROC_PGM_ID = #batProcPgmId#
			</isNotNull>
			<isNotNull property="batProcTrmCd">
				AND BAT_PROC_TRM_CD = #batProcTrmCd# 
			</isNotNull>
			<isNotNull property="effFromDt">
				AND BAT_PROC_START_TS &gt;= #effFromDt# 
			</isNotNull>
			<isNotNull property="effToDt">
				AND BAT_PROC_END_TS &lt;= #effToDt#
			</isNotNull>
				AND ROWNUM &lt;= 2001	
			Order by BAT_PROC_LOG_PK DESC
	</statement>
	
	<resultMap id="result.ZZBL0010_ASMsg" class="ZZBL0010_ASMsg">
		<result property="batProcLogPk_A" column="BAT_PROC_LOG_PK" javaType="BigDecimalItemEZD"/>
		<result property="glblCmpyCd_A" column="GLBL_CMPY_CD" javaType="StringItemEZD"/>
		<result property="batProcSubSysCd_A" column="BAT_PROC_SUB_SYS_CD" javaType="StringItemEZD"/>
		<result property="batProcJbntId_A" column="BAT_PROC_JBNT_ID" javaType="StringItemEZD"/>	
		<result property="batProcJobId_A" column="BAT_PROC_JOB_ID" javaType="StringItemEZD"/>		
		<result property="batProcPgmId_A" column="BAT_PROC_PGM_ID" javaType="StringItemEZD"/>	
		<result property="xxBatProcTrmNm_A" column="BAT_PROC_TRM_CD_NM" javaType="StringItemEZD"/>		
		<result property="batProcStartTs_A" column="BAT_PROC_START_TS" javaType="StringItemEZD"/>		
		<result property="batProcStartTz_A" column="BAT_PROC_START_TZ" javaType="StringItemEZD"/>		
		<result property="batProcEndTs_A" column="BAT_PROC_END_TS" javaType="StringItemEZD"/>		
		<result property="batProcEndTz_A" column="BAT_PROC_END_TZ" javaType="StringItemEZD"/>	
		<result property="batProcTmCnt_A" column="BAT_PROC_TM_CNT" javaType="BigDecimalItemEZD"/>	
		<result property="batProcJobLogPathNm_A" column="BAT_PROC_JOB_LOG_PATH_NM" javaType="StringItemEZD"/>		
		<result property="batProcNormRecCnt_A" column="BAT_PROC_NORM_REC_CNT" javaType="BigDecimalItemEZD"/>	
		<result property="batProcErrRecCnt_A" column="BAT_PROC_ERR_REC_CNT" javaType="BigDecimalItemEZD"/>		
		<result property="batProcTotRecCnt_A" column="BAT_PROC_TOT_REC_CNT" javaType="BigDecimalItemEZD"/>	
		<result property="batProcDeadLockRtryCnt_A" column="BAT_PROC_DEAD_LOCK_RTRY_CNT" javaType="BigDecimalItemEZD"/>	
		<result property="batProcRecLockRtryCnt_A" column="BAT_PROC_REC_LOCK_RTRY_CNT" javaType="BigDecimalItemEZD"/>	
		<result property="batProcHostNm_A" column="BAT_PROC_HOST_NM" javaType="StringItemEZD"/>	
	</resultMap>
</sqlMap>    
