<?xml version="1.0" encoding="UTF-8"?>
<sqlMap namespace="NWAB414001">
    <statement id="getMaxTransactionPerSomQuoteID" parameterClass="Map" resultClass="Map">
        SELECT
            MAX_QUOTE.SOM_QUOTE_ID
           ,MAX_QUOTE.TRANSACTION_ID
           ,S.SOM_HDR_VIEW_SNAP_PK
        FROM
            (SELECT
                II.SOM_QUOTE_ID
               ,II.TRANSACTION_ID
             FROM
                 NWAI4120_01 II
             WHERE 
                 II.EZCANCELFLAG = '0'
             AND II.INTERFACE_ID = #intfcId#
             AND (II.SOM_QUOTE_ID, II.EZINTIME) IN 
             (
            SELECT
                I.SOM_QUOTE_ID
               ,MAX(I.EZINTIME) EZINTIME
            FROM
                NWAI4120_01 I
            WHERE
                I.EZCANCELFLAG = '0'
            AND I.INTERFACE_ID = #intfcId#
            GROUP BY
                I.SOM_QUOTE_ID
            )
            ) MAX_QUOTE
           ,SOM_HDR_VIEW_SNAP S
           ,NWAI4120_01 I
        WHERE
            1 = 1
        AND MAX_QUOTE.SOM_QUOTE_ID = S.SOM_QUOTE_ID(+)
        AND S.GLBL_CMPY_CD(+) = #glblCmpyCd#
        AND S.EZCANCELFLAG(+) = '0'
        AND I.EZCANCELFLAG = '0'
        AND I.INTERFACE_ID = #intfcId#
        AND I.TRANSACTION_ID = MAX_QUOTE.TRANSACTION_ID
        AND I.SOM_QUOTE_ID = MAX_QUOTE.SOM_QUOTE_ID
        AND NVL(I.SUBMT_TO_OM_TS, 'DUMMY') != NVL(S.SUBMT_TO_OM_TS, 'DUMMY')
    </statement>
    <statement id="getSomHdrViewSnapPk" parameterClass="Map" resultClass="Map">
        SELECT
            C.SOM_HDR_VIEW_SNAP_PK
        FROM
            SOM_HDR_VIEW_SNAP C
        WHERE
            C.EZCANCELFLAG = '0'
        AND C.GLBL_CMPY_CD = #glblCmpyCd#
        AND C.SOM_QUOTE_ID = #somQuoteId#
    </statement>
    <statement id="getNWAI4120_01" parameterClass="Map" resultClass="Map">
        SELECT
            I.SEGMENT_ID
           ,I.UNIT_ID
           ,I.SEQ_NUMBER
           ,I.INTFC_REC_ID
           ,I.SOM_QUOTE_ID
           ,I.SOM_QUOTE_NUM
           ,I.SOM_SHIP_TO_CUST_ID
           ,I.SOM_SHIP_TO_PTY_NUM
           ,I.SOM_FM_DEPT_ID
           ,I.SOM_DISC_AMT
           ,I.SOM_LEASE_TERM_AOT
           ,I.SOM_STEP_CNT
           ,I.SOM_SUB_SVC_AOT
           ,I.SOM_PRC_LIST_ID
           ,I.NEGO_DEAL_AMT
           ,I.LEASE_PMT_AMT
           ,I.LEASE_SVC_PMT_AMT
           ,I.LEASE_EQUIP_PMT_AMT
           ,I.LEASE_UPG_AMT
           ,I.SOM_REV_AMT
           ,I.ISTL_FEE_AMT
           ,I.SOM_REB_AMT
           ,I.LEASE_DOWN_PMT_AMT
           ,I.LEASE_IN_ELIG_FIN_AMT
           ,I.LEASE_CR_AMT
           ,I.DELY_CHRG_AMT
           ,I.SOM_DEP_AMT
           ,I.SEC_DEP_AMT
           ,I.CRAT_TS
           ,I.ERLST_DELY_TS
           ,I.LAST_UPD_TS
           ,I.SOM_LEASE_RATE
           ,I.LEASE_TAX_RATE
           ,I.LEASE_SOFT_COST_RATE
           ,I.LEASE_IN_ELIG_RATE
           ,I.SALES_TAX_RATE
           ,I.SOM_REB_RATE
           ,I.SOM_QUOTE_NM
           ,I.SOM_QUOTE_STS_NM
           ,I.SOM_SLS_REP_ID
           ,I.SOM_SLS_REP_LAST_NM
           ,I.SOM_SLS_REP_FIRST_NM
           ,I.SOM_BR_NM
           ,I.SOM_ACCT_MGR_TXT
           ,I.REB_MERC_CD
           ,I.CSA_PMT_FIRST_NM
           ,I.CSA_PMT_LAST_NM
           ,I.CSA_PMT_PHO_TXT
           ,I.CSA_PMT_PHO_EXT_TXT
           ,I.CSA_PMT_EML_TXT
           ,I.CSA_PMT_TP_TXT
           ,I.MAINT_BLLG_ST_TXT
           ,I.MAINT_BLLG_ZIP_TXT
           ,I.MAINT_BLLG_CNTY_TXT
           ,I.BID_PRC_LIST_NM
           ,I.DELY_FAX_TXT
           ,I.MAINT_PO_VRSN_TXT
           ,I.MAINT_BILL_TO_LAST_NM
           ,I.MAINT_BILL_TO_PHO_TXT
           ,I.MAINT_BILL_TO_PHO_EXT_TXT
           ,I.MAINT_BILL_TO_EML_TXT
           ,I.MAINT_BLLG_ADDR_DESC_TXT
           ,I.MAINT_BLLG_CITY_DESC_TXT
           ,I.SUB_SVC_CTAC_PHO_TXT
           ,I.SUB_SVC_CTAC_EML_TXT
           ,I.MARK_VIEW_BRCD_TXT
           ,I.SOM_SPIFF_DTL_TXT_01
           ,I.MAINT_BILL_IND_SOM_TXT
           ,I.MAINT_BILL_TO_FIRST_NM
           ,I.CHK_AGMT_IND_SOM_TXT
           ,I.REAL_FAIR_IND_SOM_TXT
           ,I.SUB_SVC_PMT_TERM_TXT
           ,I.SUB_SVC_AGMT_TERM_TXT
           ,I.SUB_SVC_CTAC_FIRST_NM
           ,I.SUB_SVC_CTAC_LAST_NM
           ,I.QTLY_PMT_TXT
           ,I.OTH_LEASE_IND_SOM_TXT
           ,I.OTH_PMT_LEASE_TXT
           ,I.ACH_RTE_CD
           ,I.ACH_ACCT_NUM
           ,I.NON_RF_IND_SOM_TXT
           ,I.DELY_INSTN_TXT
           ,I.ZERO_DUE_IND_SOM_TXT
           ,I.SVC_PRVD_TXT
           ,I.LEASE_TP_TXT
           ,I.LEASE_FAX_IND_SOM_TXT
           ,I.MTH_PMT_IND_SOM_TXT
           ,I.TAX_EXEM_IND_SOM_TXT
           ,I.DCLN_MAINT_IND_SOM_TXT
           ,I.SHIP_VIA_INSTN_TXT
           ,I.HRS_OP_TXT
           ,I.ELEV_IND_SOM_TXT
           ,I.LOAD_DOCK_IND_SOM_TXT
           ,I.IT_PHO_TXT
           ,I.IT_PHO_EXT_TXT
           ,I.IT_EML_TXT
           ,I.IT_CTAC_DEPT_TXT
           ,I.PO_REQ_IND_SOM_TXT
           ,I.SOM_PO_NUM
           ,I.DELY_FIRST_NM
           ,I.DELY_PHO_TXT
           ,I.DELY_PHO_EXT_TXT
           ,I.DELY_EML_TXT
           ,I.IT_LAST_NM
           ,I.IT_FIRST_NM
           ,I.OTH_PMT_TXT_AQU_TXT
           ,I.SOM_CHK_NUM
           ,I.SOM_CR_CARD_NUM
           ,I.SOM_CR_CARD_EXPR_TXT
           ,I.SOM_CR_CARD_NM
           ,I.DELY_LAST_NM
           ,I.BILL_TO_FAX_TXT
           ,I.BILL_TO_EML_TXT
           ,I.CHK_ORD_IND_SOM_TXT
           ,I.TRX_TP_TXT
           ,I.NET_THRTY_IND_SOM_TXT
           ,I.OTH_AQU_IND_SOM_TXT
           ,I.ISTL_BR_DESC_TXT
           ,I.SOM_SPIFF_DTL_TXT_02
           ,I.BILL_TO_LAST_NM
           ,I.BILL_TO_FIRST_NM
           ,I.BILL_TO_PHO_TXT
           ,I.BILL_TO_PHO_EXT_TXT
           ,I.LEASE_PRCH_ORDER_TXT
           ,I.LEASE_CR_APPLY_TO_TXT
           ,I.ISTL_REP_NM
           ,I.ISTL_REP_TXT
           ,I.ISTL_BR_DRCTR_NM
           ,I.ISTL_BR_DRCTR_NUM
           ,I.LEASE_EQUIP_TP_TXT
           ,I.CPC_RNTL_IND_SOM_TXT
           ,I.LEASE_RG_IND_SOM_TXT
           ,I.LEASE_TRTY_IND_SOM_TXT
           ,I.LEASE_CUSA_CH_TXT
           ,I.LEASE_APP_TXT
           ,I.BLLG_CITY_DESC_TXT
           ,I.BLLG_ST_TXT
           ,I.BLLG_ZIP_TXT
           ,I.LEASE_CMPY_NM
           ,I.LEASE_SVC_IND_SOM_TXT
           ,I.LEASE_TAX_IND_SOM_TXT
           ,I.CUSA_CH_TXT
           ,I.SVC_INCL_IND_SOM_TXT
           ,I.BILL_TO_CUST_LEGAL_NM
           ,I.BILL_TO_DBA_TXT
           ,I.BLLG_CMPY_TXT
           ,I.BLLG_ADDR_DESC_TXT
           ,I.SHIP_TO_CNTY_TXT
           ,I.SOM_SHIP_TO_ZIP_CD
           ,I.SHIP_TO_CUST_PTY_SITE_NUM
           ,I.SHIP_TO_CRM_SLS_ID
           ,I.SHIP_TO_CRM_SLS_NUM
           ,I.PRC_LIST_DESC_TXT
           ,I.SHIP_TO_ACCT_NUM
           ,I.SHIP_TO_CUST_LEGAL_NM
           ,I.SOM_SHIP_TO_CUST_NM
           ,I.SHIP_TO_ADDR_DESC_TXT_01
           ,I.SHIP_TO_ADDR_DESC_TXT_02
           ,I.SHIP_TO_CITY_TXT
           ,I.CRAT_BY_TXT
           ,I.SHIP_TO_ST_TXT
           ,I.PRC_CONTR_NUM
           ,I.PRC_CONTR_NM
           ,I.PRC_CONTR_PK
           ,I.SOM_CSMP_NUM
           ,I.CSMP_CR_AMT
           ,I.CSMP_IND_SOM_TXT
           ,I.CUST_ISS_PO_DT
           ,I.SUBMT_TO_OM_TS
           ,I.SOM_MAINT_PO_NUM
        FROM
            NWAI4120_01 I
        WHERE
            I.EZCANCELFLAG = '0'
        AND I.INTERFACE_ID = #intfcId#
        AND I.TRANSACTION_ID = #transactionId#
        AND I.SOM_QUOTE_ID = #somQuoteId#
    </statement>
    <statement id="getSomConfigViewSnapPk" parameterClass="Map" resultClass="Map">
        SELECT
            C.SOM_CONFIG_VIEW_SNAP_PK
        FROM
            SOM_CONFIG_VIEW_SNAP C
        WHERE
            C.EZCANCELFLAG = '0'
        AND C.GLBL_CMPY_CD = #glblCmpyCd#
        AND C.SOM_QUOTE_ID = #somQuoteId#
    </statement>
    <statement id="getNWAI4120_12" parameterClass="Map" resultClass="Map">
        SELECT
            I.SEGMENT_ID
           ,I.UNIT_ID
           ,I.SEQ_NUMBER
           ,I.INTFC_REC_ID
           ,I.SOM_QUOTE_ID
           ,I.SOM_CONFIG_ID
           ,I.SOM_CONFIG_LTR_TXT
           ,I.SOM_ORD_QTY
           ,I.SOM_PSN_CNT
           ,I.SOM_STEP_CNT
           ,I.FL_PRC_LIST_ID
           ,I.BID_PRC_LIST_ID
           ,I.LAST_UPD_TS
           ,I.ERLST_DELY_TS
           ,I.SOM_ELEV_CNT
           ,I.LOAD_DOCK_CNT
           ,I.SOM_TAX_RATE
           ,I.SOM_CRM_SLS_TXT
           ,I.SOM_ACCT_NUM
           ,I.SOM_SHIP_TO_ADDR_01
           ,I.SOM_SHIP_TO_ADDR_02
           ,I.SOM_CITY_ADDR
           ,I.SOM_ST_CD
           ,I.CSA_PMT_TP_TXT
           ,I.BID_PRC_LIST_NM
           ,I.CSA_PMT_FIRST_NM
           ,I.CSA_PMT_LAST_NM
           ,I.CSA_PMT_PHO_TXT
           ,I.CSA_PMT_PHO_EXT_DESC_TXT
           ,I.CSA_PMT_EML_TXT
           ,I.SOM_DLR_TXT
           ,I.MTR_METH_TXT
           ,I.SPLIT_TP_TXT
           ,I.ADDR_LB_TXT
           ,I.PRC_BOOK_NM
           ,I.SOM_FL_PRC_LIST_NM
           ,I.SCD_PHO_TXT
           ,I.SCD_PHO_EXT_TXT
           ,I.SCD_EML_TXT
           ,I.ISTL_REP_DESC_TXT
           ,I.ISTL_BR_DESC_TXT
           ,I.BR_DRCTR_DESC_TXT
           ,I.PRIM_CTAC_LAST_NM
           ,I.PRIM_PHO_TXT
           ,I.PRIM_PHO_EXT_TXT
           ,I.PRIM_EML_TXT
           ,I.SCD_CTAC_FIRST_NM
           ,I.SCD_CTAC_LAST_NM
           ,I.SOM_CNTY_NM
           ,I.SOM_ZIP_CD
           ,I.SOM_SHIP_VIA_TXT
           ,I.HRS_OP_TXT
           ,I.SOM_INSTN_TXT
           ,I.PRIM_CTAC_FIRST_NM
        FROM
            NWAI4120_12 I
        WHERE
            I.EZCANCELFLAG = '0'
        AND I.INTERFACE_ID = #intfcId#
        AND I.TRANSACTION_ID = #transactionId#
        AND I.SOM_QUOTE_ID = #somQuoteId#
    </statement>
    <statement id="getSomLineViewSnapPk" parameterClass="Map" resultClass="Map">
        SELECT
            C.SOM_LINE_VIEW_SNAP_PK
        FROM
            SOM_LINE_VIEW_SNAP C
        WHERE
            C.EZCANCELFLAG = '0'
        AND C.GLBL_CMPY_CD = #glblCmpyCd#
        AND C.SOM_QUOTE_ID = #somQuoteId#
    </statement>
    <statement id="getNWAI4120_10" parameterClass="Map" resultClass="Map">
        SELECT
            I.SEGMENT_ID
           ,I.UNIT_ID
           ,I.SEQ_NUMBER
           ,I.INTFC_REC_ID
           ,I.SOM_QUOTE_ID
           ,I.SOM_CONFIG_ID
           ,I.SOM_SORT_ORD_NUM
           ,I.SOM_ORD_QTY
           ,I.SOM_CONFIG_QTY
           ,I.USED_DEMO_ID
           ,I.FL_PRC_AMT
           ,I.PRF_PRC_AMT
           ,I.MSRP_LIST_PRC_AMT
           ,I.SELL_PRC_LIST_AMT
           ,I.EXT_SELL_PRC_AMT
           ,I.LTST_PRC_AMT
           ,I.EXT_FL_PRC_AMT
           ,I.ENGNR_BDL_CNT
           ,I.SOM_MERC_CD
           ,I.SOM_MERC_NM
           ,I.SOM_MDL_DESC_TXT
           ,I.SOM_MDSE_TP_TXT
           ,I.SOM_SEG_TXT
        FROM
            NWAI4120_10 I
        WHERE
            I.EZCANCELFLAG = '0'
        AND I.INTERFACE_ID = #intfcId#
        AND I.TRANSACTION_ID = #transactionId#
        AND I.SOM_QUOTE_ID = #somQuoteId#
    </statement>
    <statement id="getSomSoftCostViewSnapPk" parameterClass="Map" resultClass="Map">
        SELECT
            C.SOM_SOFT_COST_VIEW_SNAP_PK
        FROM
            SOM_SOFT_COST_VIEW_SNAP C
        WHERE
            C.EZCANCELFLAG = '0'
        AND C.GLBL_CMPY_CD = #glblCmpyCd#
        AND C.SOM_QUOTE_ID = #somQuoteId#
    </statement>
    <statement id="getNWAI4120_05" parameterClass="Map" resultClass="Map">
        SELECT
            I.SEGMENT_ID
           ,I.UNIT_ID
           ,I.SEQ_NUMBER
           ,I.INTFC_REC_ID
           ,I.SOM_QUOTE_ID
           ,I.SOM_SOFT_COST_ID
           ,I.SOM_ORD_QTY
           ,I.MTR_READ_CNT
           ,I.SOM_STEP_CNT
           ,I.SOM_PRC_AMT
           ,I.SOM_EXT_PRC_AMT
           ,I.ERLST_DELY_TS
           ,I.SOM_ELEV_CNT
           ,I.LOAD_DOCK_CNT
           ,I.SOM_TAX_RATE
           ,I.SOM_MERC_ITEM_CD
           ,I.SOM_ITEM_DESC_TXT
           ,I.SOM_DESC_TXT
           ,I.SOM_MDL_TXT
           ,I.QUOTE_LINE_TP_TXT
           ,I.SOM_DESC_SER_NUM
           ,I.SOM_BYOT_ST_CD
           ,I.SOM_BYOT_ZIP_CD
           ,I.SOM_BYOT_LAST_NM
           ,I.SOM_BYOT_PHO_TXT
           ,I.SOM_BYOT_PHO_EXT_TXT
           ,I.SOM_BYOT_ADDR_01
           ,I.SOM_BYOT_ADDR_02
           ,I.SOM_BYOT_CITY_TXT
           ,I.SOM_SOFT_COST_DLR_TXT
           ,I.MTR_METH_TXT
           ,I.SPLIT_TP_TXT
           ,I.SOM_BYOT_NM
           ,I.SOM_MNF_TXT
           ,I.SOM_BYOT_FIRST_NM
           ,I.SCD_PHO_TXT
           ,I.SCD_PHO_EXT_TXT
           ,I.SCD_EML_TXT
           ,I.ISTL_REP_TXT
           ,I.ISTL_BR_TXT
           ,I.BR_DRCTR_TXT
           ,I.PRIM_CTAC_LAST_NM
           ,I.PRIM_PHO_TXT
           ,I.PRIM_PHO_EXT_TXT
           ,I.PRIM_EML_TXT
           ,I.SCD_CTAC_FIRST_NM
           ,I.SCD_CTAC_LAST_NM
           ,I.SOM_SOFT_COST_CNTY_NM
           ,I.SOM_SOFT_COST_ZIP_CD
           ,I.SHIP_VIA_TXT
           ,I.HRS_OP_TXT
           ,I.SOM_SOFT_COST_INSTN_TXT
           ,I.PRIM_CTAC_FIRST_NM
           ,I.SOM_CRM_SLS_TXT
           ,I.SOM_ACCT_NUM
           ,I.SOM_SOFT_COST_ADDR_01
           ,I.SOM_SOFT_COST_ADDR_02
           ,I.SOM_SOFT_COST_CITY_TXT
           ,I.SOM_SOFT_COST_ST_CD
           ,I.RTRN_TP_TXT
           ,I.RTRN_ISTL_TXT
           ,I.DTL_DESC_TXT
           ,I.CFS_IND_SOM_TXT
           ,I.NON_CFS_LEASE_CMPY_TXT
           ,I.SOM_PSN_TXT
        FROM
            NWAI4120_05 I
        WHERE
            I.EZCANCELFLAG = '0'
        AND I.INTERFACE_ID = #intfcId#
        AND I.TRANSACTION_ID = #transactionId#
        AND I.SOM_QUOTE_ID = #somQuoteId#
    </statement>
    <statement id="getSomSvcHdrViewSnapPk" parameterClass="Map" resultClass="Map">
        SELECT
            C.SOM_SVC_HDR_VIEW_SNAP_PK
        FROM
            SOM_SVC_HDR_VIEW_SNAP C
        WHERE
            C.EZCANCELFLAG = '0'
        AND C.GLBL_CMPY_CD = #glblCmpyCd#
        AND C.SOM_QUOTE_ID = #somQuoteId#
    </statement>
    <statement id="getNWAI4120_16" parameterClass="Map" resultClass="Map">
        SELECT
            I.SEGMENT_ID
           ,I.UNIT_ID
           ,I.SEQ_NUMBER
           ,I.INTFC_REC_ID
           ,I.SOM_SRV_ID
           ,I.SOM_QUOTE_ID
           ,I.FLEET_TERM_NUM
           ,I.FLEET_VOL_CLR_CNT
           ,I.FLEET_VOL_BW_CNT
           ,I.SVC_COST_ID
           ,I.SVC_COST_TRNSF_AMT
           ,I.CLR_OVAG_COST_TRNSF_AMT
           ,I.BW_OVAG_COST_TRNSF_AMT
           ,I.FIN_SVC_COST_AMT
           ,I.TOT_SVC_COST_AMT
           ,I.TOT_SVC_COST_TRNSF_AMT
           ,I.TOT_SVC_REV_TRNSF_AMT
           ,I.FLEET_BW_REQ_BASE_AMT
           ,I.FLEET_CLR_REQ_BASE_AMT
           ,I.ADDL_PRMO_ID
           ,I.FLEET_CLR_CPC_CNT
           ,I.FLEET_BW_CPC_CNT
           ,I.FLEET_PLAN_DESC_TXT
           ,I.FLEET_BILL_BY_TXT
           ,I.FLEET_BLLG_CYCLE_TXT
           ,I.CONTR_TP_TXT
           ,I.SVC_COST_TRNSF_TXT
           ,I.SVC_COST_APVL_TXT
           ,I.STPL_IND_SOM_TXT
           ,I.CT_WAV_IND_SOM_TXT
           ,I.CONTR_IND_SOM_TXT
           ,I.SOM_CONTR_NUM
           ,I.TRNSF_OVRD_IND_SOM_TXT
           ,I.SOM_MAINT_PO_DT
           <!-- ,I.SOM_BLLG_FROM_OM_TXT -->
        FROM
            NWAI4120_16 I
        WHERE
            I.EZCANCELFLAG = '0'
        AND I.INTERFACE_ID = #intfcId#
        AND I.TRANSACTION_ID = #transactionId#
        AND I.SOM_QUOTE_ID = #somQuoteId#
    </statement>
    <statement id="getSomSvcCoprViewSnapPk" parameterClass="Map" resultClass="Map">
        SELECT
            C.SOM_SVC_COPR_VIEW_SNAP_PK
        FROM
            SOM_SVC_COPR_VIEW_SNAP C
        WHERE
            C.EZCANCELFLAG = '0'
        AND C.GLBL_CMPY_CD = #glblCmpyCd#
        AND C.SOM_QUOTE_ID = #somQuoteId#
    </statement>
    <statement id="getNWAI4120_18" parameterClass="Map" resultClass="Map">
        SELECT
            I.SEGMENT_ID
           ,I.UNIT_ID
           ,I.SEQ_NUMBER
           ,I.INTFC_REC_ID
           ,I.SOM_SRV_ID
           ,I.SOM_SRV_LINE_ID
           ,I.SOM_SRV_TERM_ID
           ,I.SOM_SRV_UNIT_ID
           ,I.SOM_VOL_MTH_SRV_CNT
           ,I.SOM_VOL_TOT_SRV_CNT
           ,I.SOM_QUOTE_ID
           ,I.SOM_SRV_VOL_COMIT_CNT
           ,I.BASE_CLICK_REQ_BASE_AMT
           ,I.SVC_PRMO_ID
           ,I.BAND_MAX_CNT
           ,I.TERM_MIN_CNT
           ,I.TERM_MAX_CNT
           ,I.REQ_BASE_AMT
           ,I.COST_TRNSF_AMT
           ,I.OVAG_COST_TRNSF_AMT
           ,I.TOT_COST_TRNSF_AMT
           ,I.BASE_CLICK_PUB_BASE_AMT
           ,I.BASE_CLICK_COST_TRNSF_AMT
           ,I.BASE_SVC_REV_TRNSF_AMT
           ,I.OVAG_SVC_REV_TRNSF_AMT
           ,I.TOT_SVC_REV_TRNSF_AMT
           ,I.ORIG_COST_TRNSF_AMT
           ,I.ORIG_SVC_REV_TRNSF_AMT
           ,I.REQ_CPC_CNT
           ,I.SVC_PUB_BASE_AMT
           ,I.PUB_CPC_CNT
           ,I.SOM_MULT_CNT
           ,I.BAND_MIN_CNT
           ,I.CONTR_OPT_TXT
           ,I.PRMO_BT_IND_SOM_TXT
           ,I.IS_CLR_BT_IND_SOM_TXT
           ,I.PLAN_DESC_TXT
           ,I.SOM_BLLG_CYCLE_DESC_TXT
           ,I.USG_CYCLE_DESC_TXT
           ,I.SVC_CONTR_IND_SOM_TXT
           ,I.SOM_PKG_NM
           ,I.SOM_SRV_MTR_TP_NM
           ,I.SOM_SRV_CNTR_NM
           ,I.SVC_CLICK_TP_TXT
           ,I.CLICK_TP_DESC_TXT
           ,I.SVC_PRC_BOOK_DESC_TXT
           ,I.SOM_BAND_DESC_TXT
           ,I.ORCL_MDL_NM
           ,I.SOM_SVC_ITEM_CD
           ,I.SOM_SRV_PRMO_CD
           ,I.SOM_SRV_PRMO_NM
           ,I.SVC_PRMO_TXT
           ,I.DBL_CLICK_IND_SOM_TXT
           ,I.RATE_IND_SOM_TXT
           ,I.SVC_PRC_BOOK_TXT
           ,I.WITH_RMT_IND_SOM_TXT
           ,I.SOM_BAND_CD
           ,I.DCLN_MAINT_IND_SOM_TXT
           ,I.MTR_READ_METH_TXT
           ,I.PRMO_IND_SOM_TXT
           ,I.IS_PRMO_IND_SOM_TXT
           ,I.CONTR_TP_DESC_TXT
           ,I.SOM_MDL_ID
           ,I.SOM_MDL_GRP_ID
           ,I.SOM_MDL_DESC_TXT
           ,I.IS_FLEET_IND_SOM_TXT
           ,I.IS_BASE_CLICK_IND_SOM_TXT
           ,I.PRC_CATG_CD
           ,I.SOM_PRC_CATG_NM
           ,(SELECT
                COUNT(*)
            FROM
                NWAI4120_18 X
            WHERE
                X.EZCANCELFLAG = '0'
            AND X.INTERFACE_ID = I.INTERFACE_ID
            AND X.TRANSACTION_ID = I.TRANSACTION_ID
            AND X.SOM_QUOTE_ID = I.SOM_QUOTE_ID
            AND X.ORIG_COST_TRNSF_AMT &lt; 0
            ) POSITIVE_EXISTS_CNT
           ,(SELECT
                COUNT(*)
            FROM
                NWAI4120_18 X
            WHERE
                X.EZCANCELFLAG = '0'
            AND X.INTERFACE_ID = I.INTERFACE_ID
            AND X.TRANSACTION_ID = I.TRANSACTION_ID
            AND X.SOM_QUOTE_ID = I.SOM_QUOTE_ID
            AND X.ORIG_SVC_REV_TRNSF_AMT &gt; 0
            ) SRT_EXISTS_CNT
        FROM
            NWAI4120_18 I
        WHERE
            I.EZCANCELFLAG = '0'
        AND I.INTERFACE_ID = #intfcId#
        AND I.TRANSACTION_ID = #transactionId#
        AND I.SOM_QUOTE_ID = #somQuoteId#
    </statement>
    <statement id="getSomPrftViewSnapPk" parameterClass="Map" resultClass="Map">
        SELECT
            C.SOM_PRFT_VIEW_SNAP_PK
        FROM
            SOM_PRFT_VIEW_SNAP C
        WHERE
            C.EZCANCELFLAG = '0'
        AND C.GLBL_CMPY_CD = #glblCmpyCd#
        AND C.SOM_QUOTE_ID = #somQuoteId#
    </statement>
    <statement id="getNWAI4120_04" parameterClass="Map" resultClass="Map">
        SELECT
            I.SEGMENT_ID
           ,I.UNIT_ID
           ,I.SEQ_NUMBER
           ,I.INTFC_REC_ID
           ,I.SOM_QUOTE_ID
           ,I.SOM_CMSN_AMT
           ,I.SVC_COST_AMT
           ,I.SVC_COST_PMT_AMT
           ,I.SVC_COST_TRNSF_AMT
           ,I.SOM_MKUP_AMT
           ,I.ORD_TOT_AMT
           ,I.SOM_TOT_REV_AMT
           ,I.SOM_TOT_EARN_AMT
           ,I.INTER_RG_EARN_AMT
           ,I.INTER_TRTY_REV_AMT
           ,I.INTER_TRTY_EARN_AMT
           ,I.SPIFF_REV_AMT
           ,I.SPIFF_EARN_AMT
           ,I.UNIT_SOLD_EARN_AMT
           ,I.SBSCR_SVC_AMT
           ,I.GP_EQUIP_REV_AMT
           ,I.GP_EQUIP_EARN_AMT
           ,I.SBSCR_SVC_REV_AMT
           ,I.SBSCR_SVC_EARN_AMT
           ,I.INTER_RG_REV_AMT
           ,I.REP_EQUIP_REV_AMT
           ,I.GP_EQUIP_AMT
           ,I.EXT_FL_PRC_AMT
           ,I.SOM_PRMO_AMT
           ,I.SOM_TRADE_IN_AMT
           ,I.SOM_TAX_AMT
           ,I.SOM_CBS_INV_AMT
           ,I.SOM_FINAL_FL_AMT
           ,I.GP_COST_TRNSF_AMT
           ,I.TOT_REP_REV_AMT
           ,I.SBSCR_SVC_REP_REV_AMT
           ,I.SOM_BYOT_FIN_AMT
           ,I.MISC_NON_TAX_ABLE_AMT
           ,I.SOM_OTH_EQUIP_AMT
           ,I.MSRP_LIST_PRC_AMT
           ,I.SOM_TAX_ABLE_AMT
           ,I.NON_TAX_ABLE_AMT
           ,I.SOM_TOT_FIN_AMT
           ,I.SOM_EQUIP_FIN_AMT
           ,I.SOM_EQUIP_PAY_AMT
           ,I.SOM_SVC_FIN_AMT
           ,I.SOM_SPLY_FIN_AMT
           ,I.SOM_UPG_FIN_AMT
           ,I.SOM_PCT_MKUP_RATE
           ,I.SOM_SOFT_PCT_COST_RATE
           ,I.SOM_FIN_VS_LIST_RATE
           ,I.GP_COST_PCT_TRNSF_RATE
           ,I.GP_PCT_EQUIP_RATE
           ,I.UNIT_SOLD_REV_AMT
           ,I.GP_WOT_COST_TRNSF_AMT
           ,I.FL_ADJ_AMT
           ,I.SOM_SVC_REV_TRNSF_AMT
           ,I.SOM_TOT_COST_TRNSF_AMT
           ,I.PRO_SVC_AMT
           ,I.GP_WOT_COST_TRNSF_RATE
        FROM
            NWAI4120_04 I
        WHERE
            I.EZCANCELFLAG = '0'
        AND I.INTERFACE_ID = #intfcId#
        AND I.TRANSACTION_ID = #transactionId#
        AND I.SOM_QUOTE_ID = #somQuoteId#
    </statement>
</sqlMap>