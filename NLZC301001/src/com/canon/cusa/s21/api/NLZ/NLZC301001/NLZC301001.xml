<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NLZC301001">

    <typeAlias alias="SHPG_PLNTMsg"  type="business.db.SHPG_PLNTMsg"/>
    <typeAlias alias="SVC_MACH_MSTRTMsg"  type="business.db.SVC_MACH_MSTRTMsg"/>
    <typeAlias alias="SHIP_TO_CUSTTMsg"  type="business.db.SHIP_TO_CUSTTMsg"/>

    <statement id="queryShpgPln" parameterClass="Map" resultMap="result.SHPG_PLNTMsg">
        SELECT
            S.SHPG_PLN_NUM AS SHPG_PLN_NUM
        FROM
            SHPG_PLN S
        WHERE
            S.GLBL_CMPY_CD       = #glblCmpyCd#
            AND S.EZCANCELFLAG   = '0'
            AND S.TRX_HDR_NUM    = #invtyOrdNum#
            AND S.TRX_LINE_NUM   = #invtyOrdLineNum#
    </statement>

    <resultMap id="result.SHPG_PLNTMsg" class="SHPG_PLNTMsg">
        <result property="shpgPlnNum" column="SHPG_PLN_NUM" javaType="EZDTStringItem" />
    </resultMap>

    <statement id="querySvcMachMstr" parameterClass="Map" resultMap="result.SVC_MACH_MSTRTMsg">
        SELECT
            S.SVC_MACH_MSTR_PK AS SVC_MACH_MSTR_PK
        FROM
            SVC_MACH_MSTR S
        WHERE
            S.GLBL_CMPY_CD       = #glblCmpyCd#
            AND S.EZCANCELFLAG   = '0'
            AND S.MDSE_CD        = #mdseCd#
            AND S.SER_NUM IN 
            <iterate property="serNums" var="serNum[]" open="( " close=" )" conjunction=",">
                #serNums[]#
            </iterate>
    </statement>

    <resultMap id="result.SVC_MACH_MSTRTMsg" class="SVC_MACH_MSTRTMsg">
        <result property="svcMachMstrPk" column="SVC_MACH_MSTR_PK" javaType="EZDTStringItem" />
    </resultMap>

    <statement id="queryShipToCust" parameterClass="Map" resultMap="result.SHIP_TO_CUSTTMsg">
        SELECT
            S.BILL_TO_CUST_CD    AS BILL_TO_CUST_CD
            , S.SELL_TO_CUST_CD  AS SELL_TO_CUST_CD
        FROM
            SHIP_TO_CUST S
        WHERE
            S.GLBL_CMPY_CD        = #glblCmpyCd#
            AND S.EZCANCELFLAG    = '0'
            AND S.SHIP_TO_CUST_CD = #ShipToCustCd#
    </statement>

    <resultMap id="result.SHIP_TO_CUSTTMsg" class="SHIP_TO_CUSTTMsg">
        <result property="billToCustCd" column="BILL_TO_CUST_CD" javaType="EZDTStringItem" />
        <result property="sellToCustCd" column="SELL_TO_CUST_CD" javaType="EZDTStringItem" />
    </resultMap>

</sqlMap>
