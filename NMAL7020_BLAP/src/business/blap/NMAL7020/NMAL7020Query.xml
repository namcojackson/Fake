<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NMAL7020Query">


    <statement id="getPriceListType" parameterClass="Map" resultClass="String">
    SELECT
         PLS.PRC_LIST_STRU_TP_CD
    FROM
         PRC_CATG PC
        ,PRC_LIST_TP PL
        ,PRC_LIST_STRU_TP PLS
    WHERE
        PC.GLBL_CMPY_CD = #glblCmpyCd#
        AND PC.EZCANCELFLAG = '0'
        AND PC.PRC_CATG_NM = #prcCatgNm#

        AND PC.PRC_LIST_TP_CD = PL.PRC_LIST_TP_CD
        AND PC.GLBL_CMPY_CD = PL.GLBL_CMPY_CD
        AND PL.EZCANCELFLAG = '0'

        AND PL.PRC_LIST_STRU_TP_CD = PLS.PRC_LIST_STRU_TP_CD
        AND PL.GLBL_CMPY_CD = PLS.GLBL_CMPY_CD
        AND PLS.EZCANCELFLAG = '0'

    </statement>
    <statement id="checkExistPrcCatgNm" parameterClass="Map" resultClass="String">
    SELECT
         PC.PRC_CATG_NM
    FROM
         PRC_CATG PC
    WHERE
            PC.GLBL_CMPY_CD = #glblCmpyCd#
        AND PC.EZCANCELFLAG = '0'
        AND PC.PRC_CATG_NM = #prcCatgNm#
        AND PC.DEL_FLG = 'N' 
    </statement>
    <statement id="checkExistRqst" parameterClass="Map" resultClass="String">
    SELECT
        NEW_PRC_LIST_NM
    FROM
        COPY_PRC_LIST_RQST PLR
    WHERE
            PLR.NEW_PRC_LIST_NM = #prcCatgNm#
        <!-- QC#27932 2018/08/24 Add Start -->
        AND PLR.COPY_RSLT_TP_CD &lt;&gt; #copyRsltTpCd#
        <!-- QC#27932 2018/08/24 Add End -->
        AND PLR.GLBL_CMPY_CD = #glblCmpyCd#
        AND PLR.EZCANCELFLAG = '0'
    </statement>
    <statement id="getPriceListPeriod" parameterClass="Map" resultClass="Map">
    SELECT
         MAX(PC.EFF_FROM_DT)  AS HEADER_FROM
        ,MAX(PC.EFF_THRU_DT)  AS HEADER_TO
        ,MIN(PL.EFF_FROM_DT)  AS DETAIL_FROM
        ,MAX(PL.EFF_THRU_DT)  AS DETAIL_TO
    FROM
    PRC_CATG PC
        ,$priceListTableNm$ PL
    WHERE
            PC.GLBL_CMPY_CD = #glblCmpyCd#
        AND PC.EZCANCELFLAG = '0'
        AND PC.PRC_CATG_NM  = #prcCatgNm#

        AND PC.PRC_CATG_CD = PL.PRC_CATG_CD(+)
        AND PC.GLBL_CMPY_CD = PL.GLBL_CMPY_CD(+)
        AND PL.EZCANCELFLAG(+) = '0'
        AND PL.DEL_FLG (+) = 'N'
    </statement>
</sqlMap>
