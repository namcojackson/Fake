<?xml version="1.0" encoding="UTF-8"?>
<sqlMap namespace="ZZBL0030Query">
	
	<typeAlias alias="ZZBL0030_ASMsg" type="business.blap.ZZBL0030.ZZBL0030_ASMsg"/>
    <typeAlias alias="ZZBL0030_ASMsgArray" type="business.blap.ZZBL0030.ZZBL0030_ASMsgArray"/>
	
	<statement id="getART10Records" resultMap="result.ZZBL0030_ASMsg" parameterClass="Map">
        SELECT 
               EZREQBUSINESSID
              ,EZREQINPUTUSERID
              ,EZREQINPUTDEPTCODE
              ,EZREQINPUTDATE
              ,EZREQINPUTTIME
              ,(CASE WHEN (EZREQINPUTDATE is NULL OR EZREQINPUTTIME is NULL)
                     THEN ' '
                     ELSE substr(EZREQINPUTDATE,5,2)  ||  '/' || substr(EZREQINPUTDATE,7,2)  ||  '/' ||substr(EZREQINPUTDATE,0,4) || ' ' ||
                          substr(EZREQINPUTTIME,0,2)  ||  ':' || substr(EZREQINPUTTIME,3,2)  ||  ':' ||substr(EZREQINPUTTIME,5,2)
                     END) as REGISTERDATETIME
              ,EZREQUSERKEYITEM
              ,EZREQCONDITION
              ,EZREQJOBSTATUS
              ,EZREQJOBSEQNO
              ,(CASE WHEN (EZREQJOBSTARTDATE is NULL OR EZREQJOBSTARTTIME is NULL)
                     THEN ' '
                     ELSE substr(EZREQJOBSTARTDATE,5,2)  ||  '/' || substr(EZREQJOBSTARTDATE,7,2)  ||  '/' ||substr(EZREQJOBSTARTDATE,0,4) || ' ' ||
                          substr(EZREQJOBSTARTTIME,0,2)  ||  ':' || substr(EZREQJOBSTARTTIME,3,2)  ||  ':' ||substr(EZREQJOBSTARTTIME,5,2)
                     END) as STARTDATETIME
              ,EZREQTRANSACTIONCOUNT
              ,(CASE WHEN (EZREQJOBENDDATE is NULL OR EZREQJOBENDTIME is NULL)
                     THEN ' '
                     ELSE substr(EZREQJOBENDDATE,5,2)  ||  '/' || substr(EZREQJOBENDDATE,7,2)  ||  '/' ||substr(EZREQJOBENDDATE,0,4) || ' ' ||
                          substr(EZREQJOBENDTIME,0,2)  ||  ':' || substr(EZREQJOBENDTIME,3,2)  ||  ':' ||substr(EZREQJOBENDTIME,5,2)
                     END) as ENDDATETIME
              ,EZUPTIME
              ,EZUPTIMEZONE
        FROM   ART10 
        WHERE  EZCANCELFLAG = 0 
			<isNotNull property="ezReqBusinessName">
				AND UPPER(EZREQBUSINESSID) like #ezReqBusinessName# 
			</isNotNull>
			<isNotNull property="ezReqJobStatus">
				AND  EZREQJOBSTATUS = #ezReqJobStatus#
			</isNotNull>
			<isNotNull property="ezReqStartTime">
				AND EZREQINPUTDATE || EZREQINPUTTIME &gt;= #ezReqStartTime# 
			</isNotNull>
			<isNotNull property="ezReqEndTime">
				AND EZREQINPUTDATE || EZREQINPUTTIME &lt;= #ezReqEndTime# 
			</isNotNull>
			<isNotNull property="ezReqJobStartDate" >
				AND EZREQJOBSTARTDATE &gt;=  #ezReqJobStartDate#
			</isNotNull>
			<isNotNull property="ezReqJobStartTime" >
				AND EZREQJOBSTARTTIME &gt;=  #ezReqJobStartTime#
			</isNotNull>
			<isNotNull property="ezReqJobEndDate" >
				AND EZREQJOBENDDATE &lt;= #ezReqJobEndDate#
			</isNotNull>
			<isNotNull property="ezReqJobEndTime" >
				AND EZREQJOBENDTIME &lt;=  #ezReqJobEndTime#
			</isNotNull>			
			Order by EZREQBUSINESSID
	</statement>
	
	<resultMap id="result.ZZBL0030_ASMsg" class="ZZBL0030_ASMsg">
		<result property="ezReqBusinessName_A" column="EZREQBUSINESSID" javaType="StringItemEZD"/>
		<result property="ezReqInputUserID_A" column="EZREQINPUTUSERID" javaType="StringItemEZD"/>	
		<result property="ezReqInputDeptCode_A" column="EZREQINPUTDEPTCODE" javaType="StringItemEZD"/>	
		<result property="ezReqInputDate_A" column="EZREQINPUTDATE" javaType="StringItemEZD"/>	
		<result property="ezReqInputTime_A" column="EZREQINPUTTIME" javaType="StringItemEZD"/>							
		<result property="xxDtTm_RG" column="REGISTERDATETIME" javaType="StringItemEZD"/>
		<result property="ezReqUserKeyItem_A" column="EZREQUSERKEYITEM" javaType="StringItemEZD"/>	
		<result property="ezReqCondition_A" column="EZREQCONDITION" javaType="StringItemEZD"/>		
		<result property="ezReqJobStatus_A" column="EZREQJOBSTATUS" javaType="StringItemEZD"/>
		<result property="ezReqJobStatus_BK" column="EZREQJOBSTATUS" javaType="StringItemEZD"/>	
		<result property="ezReqJobSeqNo_A" column="EZREQJOBSEQNO" javaType="StringItemEZD"/>		
		<result property="xxDtTm_ST" column="STARTDATETIME" javaType="StringItemEZD"/>		
		<result property="ezReqTransactionCount_A" column="EZREQTRANSACTIONCOUNT" javaType="EZDSBigDecimalItem"/>		
		<result property="xxDtTm_EN" column="ENDDATETIME" javaType="StringItemEZD"/>
		<result property="ezUpTime" column="EZUPTIME" javaType="StringItemEZD"/>		
		<result property="ezUpTimeZone" column="EZUPTIMEZONE" javaType="StringItemEZD"/>
	</resultMap>
</sqlMap>    
