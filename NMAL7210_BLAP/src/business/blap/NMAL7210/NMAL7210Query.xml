<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NMAL7210Query">

    <typeAlias alias="NMAL7210CMsg"    type="business.blap.NMAL7210.NMAL7210CMsg"/>
    <typeAlias alias="NMAL7210_ACMsg"  type="business.blap.NMAL7210.NMAL7210_ACMsg"/>

    <statement id="search" parameterClass="Map" resultMap="result.search">
        SELECT
             PRC_DATA.PRC_FMLA_PK
            ,PRC_DATA.PRC_FMLA_TP_NM
            ,PRC_DATA.PRC_FMLA_NM
            ,PRC_DATA.PRC_FMLA_DESC_TXT
            ,PRC_DATA.EFF_FROM_DT
            ,PRC_DATA.EFF_THRU_DT
        FROM(
             SELECT
                 PFP.PRC_FMLA_PK
                ,PFT.PRC_FMLA_TP_NM
                ,PFP.PRC_FMLA_NM
                ,PFP.PRC_FMLA_DESC_TXT
                ,PFP.EFF_FROM_DT
                ,PFP.EFF_THRU_DT
             FROM
                 PRC_FMLA PFP
                ,PRC_FMLA_TP PFT
             WHERE
                 PFP.GLBL_CMPY_CD = #glblCmpyCd#
             AND
                 PFP.EZCANCELFLAG = '0'
             AND
                 PFP.PRC_FMLA_TP_CD = PFT.PRC_FMLA_TP_CD
             AND
                 PFP.GLBL_CMPY_CD = PFT.GLBL_CMPY_CD
             AND
                 PFP.EZCANCELFLAG = PFT.EZCANCELFLAG
             <isNotNull property="prcFmlaNm">
             AND PFP.PRC_FMLA_NM like #prcFmlaNm#
             </isNotNull>
             <isNotNull property="prcFmlaDesctxt">
             AND PFP.PRC_FMLA_DESC_TXT like #prcFmlaDesctxt# || '%'
             </isNotNull>
             <isNotNull property="prcFmlaTpCd">
             AND PFT.PRC_FMLA_TP_CD = #prcFmlaTpCd#
             </isNotNull>
             <isNotNull property="effFromDt">
             AND PFP.EFF_FROM_DT &gt;= #effFromDt#
             </isNotNull>
             <isNotNull property="effThruDt">
             AND NVL(PFP.EFF_THRU_DT,#effThruMaxDt#) &lt;= #effThruDt#
             </isNotNull>
             <isNotNull property="actvFlg">
             AND PFP.ACTV_FLG = #actvFlg#
             </isNotNull>
             ORDER BY
                 PFP.PRC_FMLA_NM
                ,PFP.EFF_FROM_DT
            ) PRC_DATA
        WHERE
             ROWNUM &lt; #rowNum#
    </statement>

    <resultMap id="result.search" class="NMAL7210_ACMsg">
        <result property="prcFmlaPk_A1"        column="PRC_FMLA_PK"           javaType="EZDCBigDecimalItem"/>
        <result property="prcFmlaTpNm_A1"      column="PRC_FMLA_TP_NM"        javaType="EZDCStringItem"/>
        <result property="prcFmlaNm_A1"        column="PRC_FMLA_NM"           javaType="EZDCStringItem"/>
        <result property="prcFmlaDescTxt_A1"   column="PRC_FMLA_DESC_TXT"     javaType="EZDCStringItem"/>
        <result property="effFromDt_A1"        column="EFF_FROM_DT"           javaType="EZDCDateItem"/>
        <result property="effThruDt_A1"        column="EFF_THRU_DT"           javaType="EZDCDateItem"/>
    </resultMap>

</sqlMap>
