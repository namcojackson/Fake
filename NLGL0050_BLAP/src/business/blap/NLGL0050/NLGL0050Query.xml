<?xml version="1.0" encoding="UTF-8"?>
<sqlMap namespace="NLGL0050Query">

    <typeAlias alias="NLGL0050CMsg"     type="business.blap.NLGL0050.NLGL0050CMsg"/>
    <typeAlias alias="NLGL0050SMsg"     type="business.blap.NLGL0050.NLGL0050SMsg"/>
    <typeAlias alias="NLGL0050_ASMsg"   type="business.blap.NLGL0050.NLGL0050_ASMsg"/>

    <statement id="getCarrCodeList" parameterClass="Map" resultMap="result.NLGL0050_ASMsg">
    SELECT
           WMS_TRNSP_TP_CD
          ,WMS_CARR_CD
          ,WMS_DESC_TXT
          ,WMS_CARR_NM
          ,CARR_SVC_TXT
          ,CARR_SCAC_CD
          ,SHPG_SVC_LVL_DESC_TXT
          ,FUEL_UPCHG_TP_CD
          ,FUEL_UPCHG_AMT
          ,ADDL_UPCHG_TP_CD
          ,ADDL_UPCHG_AMT
          ,EZUPUSERID
          ,EZUPTIME
          ,EZUPTIMEZONE
    FROM
          (
            SELECT
                   WSV.WMS_TRNSP_TP_CD
                  ,WSV.WMS_CARR_CD
                  ,WSV.WMS_DESC_TXT
                  ,WSV.WMS_CARR_NM
                  ,WSV.CARR_SVC_TXT
                  ,WSV.CARR_SCAC_CD
                  ,SSL.SHPG_SVC_LVL_DESC_TXT
                  ,WSV.FUEL_UPCHG_TP_CD
                  ,WSV.FUEL_UPCHG_AMT
                  ,WSV.ADDL_UPCHG_TP_CD
                  ,WSV.ADDL_UPCHG_AMT
                  ,WSV.EZUPUSERID
                  ,WSV.EZUPTIME
                  ,WSV.EZUPTIMEZONE
              FROM
                   WMS_SHIP_VIA WSV
                  ,SHPG_SVC_LVL SSL
             WHERE
                   WSV.GLBL_CMPY_CD     = #glblCmpyCd#
               AND WSV.EZCANCELFLAG     = '0'
               <isNotNull property="wmsOrgHostId">
               AND WSV.WMS_ORG_HOST_ID  = #wmsOrgHostId#
               </isNotNull>
               <isNotNull property="wmsTrnspTpCd">
               AND WSV.WMS_TRNSP_TP_CD  = #wmsTrnspTpCd#
               </isNotNull>
               <isNotNull property="carrScacCd">
               AND WSV.CARR_SCAC_CD     = #carrScacCd#
               </isNotNull>
               <!-- START 2018/03/09 M.Naito [QC#24696,ADD] -->
               <isNotNull property="wmsCarrCd">
               AND WSV.WMS_CARR_CD      = #wmsCarrCd#
               </isNotNull>
               <!-- END 2018/03/09 M.Naito [QC#24696,ADD] -->
               AND WSV.GLBL_CMPY_CD     = SSL.GLBL_CMPY_CD(+)
               AND WSV.SHPG_SVC_LVL_CD  = SSL.SHPG_SVC_LVL_CD(+)
               AND SSL.EZCANCELFLAG(+)  = '0'
             ORDER BY
                   WSV.WMS_ORG_HOST_ID
                  ,WSV.WMS_CARR_CD
          )
    WHERE
       ROWNUM                       &lt;= #rownum# 
    </statement>

    <resultMap id="result.NLGL0050_ASMsg" class="NLGL0050_ASMsg">
        <result property="wmsTrnspTpCd_A1"      column="WMS_TRNSP_TP_CD"        javaType="EZDSStringItem"/>
        <result property="wmsCarrCd_A1"         column="WMS_CARR_CD"            javaType="EZDSStringItem"/>
        <result property="wmsDescTxt_A1"        column="WMS_DESC_TXT"           javaType="EZDSStringItem"/>
        <result property="wmsCarrNm_A1"         column="WMS_CARR_NM"            javaType="EZDSStringItem"/>
        <result property="carrSvcTxt_A1"        column="CARR_SVC_TXT"           javaType="EZDSStringItem"/>
        <result property="carrScacCd_A1"        column="CARR_SCAC_CD"           javaType="EZDSStringItem"/>
        <result property="shpgSvcLvlDescTxt_A1" column="SHPG_SVC_LVL_DESC_TXT"  javaType="EZDSStringItem"/>
        <result property="fuelUpchgTpCd_A1"     column="FUEL_UPCHG_TP_CD"       javaType="EZDSStringItem"/>
        <result property="fuelUpchgAmt_A1"      column="FUEL_UPCHG_AMT"         javaType="EZDSStringItem"/>
        <result property="addlUpchgTpCd_A1"     column="ADDL_UPCHG_TP_CD"       javaType="EZDSStringItem"/>
        <result property="addlUpchgAmt_A1"      column="ADDL_UPCHG_AMT"         javaType="EZDSStringItem"/>
        <result property="ezUpUserID_A1"        column="EZUPUSERID"             javaType="EZDSStringItem"/>
        <result property="ezUpTime_A1"          column="EZUPTIME"               javaType="EZDSStringItem"/>
        <result property="ezUpTimeZone_A1"      column="EZUPTIMEZONE"           javaType="EZDSStringItem"/>
    </resultMap>

    <statement id="getHostSystemList" parameterClass="NLGL0050CMsg" resultClass="Map">
    SELECT
           WMS_ORG_HOST_ID
      FROM
           WMS_SHIP_VIA
     GROUP BY
           WMS_ORG_HOST_ID
    </statement>

    <statement id="getTransportModeList" parameterClass="NLGL0050CMsg" resultClass="Map">
    SELECT
           WMS_TRNSP_TP_CD
          ,WMS_TRNSP_TP_NM
      FROM
           WMS_TRNSP_TP
     ORDER BY
           WMS_TRNSP_TP_SORT_NUM
    </statement>

    <statement id="getCarrCdEdit" parameterClass="Map" resultMap="result.NLGL0050SMsg">
    SELECT
           WMS_TRNSP_TP_CD
          ,WMS_CARR_CD
          ,WMS_DESC_TXT
          ,WMS_CARR_NM
          ,CARR_SVC_TXT
          ,CARR_SCAC_CD
          ,SHPG_SVC_LVL_CD
          ,FUEL_UPCHG_TP_CD
          ,FUEL_UPCHG_AMT
          ,ADDL_UPCHG_TP_CD
          ,ADDL_UPCHG_AMT
          ,EZUPUSERID
          ,EZUPTIME
          ,EZUPTIMEZONE
      FROM
           WMS_SHIP_VIA
     WHERE
           GLBL_CMPY_CD    = #glblCmpyCd#
       AND EZCANCELFLAG    = '0'
       AND WMS_ORG_HOST_ID = #wmsOrgHostId#
       AND WMS_CARR_CD     = #wmsCarrCd#
    </statement>
    <resultMap id="result.NLGL0050SMsg" class="NLGL0050SMsg">
        <result property="wmsTrnspTpCd_P2"   column="WMS_TRNSP_TP_CD"    javaType="EZDSStringItem"/>
        <result property="wmsCarrCd_T2"	     column="WMS_CARR_CD"        javaType="EZDSStringItem"/>
        <result property="wmsDescTxt_T2"     column="WMS_DESC_TXT"       javaType="EZDSStringItem"/>
        <result property="wmsCarrNm_T2"      column="WMS_CARR_NM"        javaType="EZDSStringItem"/>
        <result property="carrSvcTxt_T2"     column="CARR_SVC_TXT"       javaType="EZDSStringItem"/>
        <result property="carrScacCd_T2"     column="CARR_SCAC_CD"       javaType="EZDSStringItem"/>
        <result property="shpgSvcLvlCd_P2"   column="SHPG_SVC_LVL_CD"    javaType="EZDSStringItem"/>
        <result property="fuelUpchgTpCd_P2"  column="FUEL_UPCHG_TP_CD"   javaType="EZDSStringItem"/>
        <result property="fuelUpchgAmt_T2"   column="FUEL_UPCHG_AMT"     javaType="EZDSStringItem"/>
        <result property="addlUpchgTpCd_P2"  column="ADDL_UPCHG_TP_CD"   javaType="EZDSStringItem"/>
        <result property="addlUpchgAmt_T2"   column="ADDL_UPCHG_AMT"     javaType="EZDSStringItem"/>
        <result property="ezUpUserID_T2"     column="EZUPUSERID"         javaType="EZDSStringItem"/>
        <result property="ezUpTime_T2"       column="EZUPTIME"           javaType="EZDSStringItem"/>
        <result property="ezUpTimeZone_T2"   column="EZUPTIMEZONE"       javaType="EZDSStringItem"/>
    </resultMap>
</sqlMap>
