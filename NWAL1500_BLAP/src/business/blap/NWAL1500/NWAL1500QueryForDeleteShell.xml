<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NWAL1500QueryForDeleteShell">
    <!-- 2019/12/18 S21_NA#54223 Create -->
    <statement id="getDetailRelatedShell"  parameterClass="Map" resultClass="Map">
        SELECT
            CD.CPO_ORD_NUM
            , CD.CPO_DTL_LINE_NUM
            , CD.CPO_DTL_LINE_SUB_NUM
        FROM
            CPO_DTL CD
            , DS_CONTR_DTL DCD
            , DS_CONTR DC
            , DS_CONTR_CATG DCC
        WHERE
                CD.GLBL_CMPY_CD         = #glblCmpyCd#
            AND CD.CPO_ORD_NUM          = #cpoOrdNum#
            AND CD.EZCANCELFLAG         = '0'
            AND CD.GLBL_CMPY_CD         = DCD.GLBL_CMPY_CD
            AND CD.CPO_ORD_NUM          = DCD.CPO_ORD_NUM
            AND CD.CPO_DTL_LINE_NUM     = DCD.CPO_DTL_LINE_NUM
            AND CD.CPO_DTL_LINE_SUB_NUM = DCD.CPO_DTL_LINE_SUB_NUM
            AND DCD.EZCANCELFLAG        = '0'
            AND DCD.GLBL_CMPY_CD        = DC.GLBL_CMPY_CD
            AND DCD.DS_CONTR_PK         = DC.DS_CONTR_PK
            AND DC.EZCANCELFLAG         = '0'
            AND DC.GLBL_CMPY_CD         = DCC.GLBL_CMPY_CD
            AND DC.DS_CONTR_CATG_CD     = DCC.DS_CONTR_CATG_CD
            AND DCC.OM_CATG_FLG         = #flgOnY#
            AND DCC.EZCANCELFLAG        = '0'
    </statement>

    <statement id="getSvcAddlMdseTpList" parameterClass="Map" resultClass="String">
        SELECT
            VS.COA_MDSE_TP_CD
        FROM
            MDSE_TP_VAL_SET VS
        WHERE
            VS.GLBL_CMPY_CD             = #glblCmpyCd#
            AND VS.MDSE_TP_CTX_TP_CD    = #cpoSvcAddlBaseItems#
            AND VS.EZCANCELFLAG         = '0'
    </statement>

    <statement id="getBillByTpCount" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            COUNT(BBT.BILL_BY_TP_CD) CNT
        FROM
              CPO_SVC_DEF_CUST_DECN CD
            , BILL_BY_TP BBT
        WHERE
            CD.GLBL_CMPY_CD         = #glblCmpyCd#
            AND CD.DS_ORD_CATG_CD   = #dsOrdCatgCd#
            AND CD.DS_ORD_TP_CD     = #dsOrdTpCd#
            AND CD.EZCANCELFLAG     = '0'
            AND CD.GLBL_CMPY_CD     = BBT.GLBL_CMPY_CD 
            AND CD.BILL_BY_TP_CD    = BBT.BILL_BY_TP_CD
            AND BBT.EZCANCELFLAG    = '0'
    </statement>
</sqlMap>
