<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NWAL1500QueryForPriceChanges">

    <statement id="getInPondWt" parameterClass="Map" resultClass="BigDecimal">
        SELECT
                  IN_POUND_WT
        FROM (
            SELECT
                      P.IN_POUND_WT 
                FROM
                      ALL_MDSE_V M
                    , MDSE_STORE_PKG P 
                WHERE
                    M.GLBL_CMPY_CD     = #glblCmpyCd#
                    AND M.MDSE_CD      = #mdseCd#
                    AND M.EZCANCELFLAG = '0' 
                    AND M.GLBL_CMPY_CD = P.GLBL_CMPY_CD 
                    AND M.MDSE_CD      = P.MDSE_CD 
                    AND P.EZCANCELFLAG = '0'
            UNION ALL
            SELECT
                      P.IN_POUND_WT 
                FROM
                      ALL_MDSE_V M
                    , ORD_TAKE_MDSE O
                    , MDSE_STORE_PKG P 
                WHERE
                    M.GLBL_CMPY_CD     = #glblCmpyCd#
                    AND M.MDSE_CD      = #mdseCd#
                    AND M.EZCANCELFLAG = '0' 
                    AND M.GLBL_CMPY_CD = O.GLBL_CMPY_CD 
                    AND M.MDSE_CD      = O.ORD_TAKE_MDSE_CD 
                    AND O.EZCANCELFLAG = '0'
                    AND O.GLBL_CMPY_CD = P.GLBL_CMPY_CD 
                    AND O.MDSE_CD      = P.MDSE_CD 
                    AND P.EZCANCELFLAG = '0'
        )
        WHERE ROWNUM = 1
    </statement>

    <statement id="getUncancelableOrderForLineConfig" parameterClass="Map" resultClass="Map">
        SELECT
             DCC.DS_CPO_CONFIG_PK
            ,DCC.DS_ORD_POSN_NUM
        FROM
             DS_CPO_CONFIG DCC
            ,CPO_DTL DCD
            ,SHPG_PLN SP
        WHERE
                DCC.GLBL_CMPY_CD            = #glblCmpyCd#
            AND DCC.EZCANCELFLAG            = '0'
            AND DCC.GLBL_CMPY_CD            = DCD.GLBL_CMPY_CD
            AND DCC.EZCANCELFLAG            = DCD.EZCANCELFLAG
            AND DCC.DS_CPO_CONFIG_PK        = DCD.DS_CPO_CONFIG_PK
            AND DCD.CPO_ORD_NUM             = #cpoOrdNum#
            AND DCD.DS_ORD_POSN_NUM         = #dsOrdPosnNum#
            AND DCD.GLBL_CMPY_CD            = SP.GLBL_CMPY_CD
            AND DCD.EZCANCELFLAG            = SP.EZCANCELFLAG
            AND DCD.CPO_ORD_NUM             = SP.TRX_HDR_NUM
            AND DCD.CPO_DTL_LINE_NUM        = SP.TRX_LINE_NUM
            AND DCD.CPO_DTL_LINE_SUB_NUM    = SP.TRX_LINE_SUB_NUM
            AND SP.SHPG_STS_CD              IN 
            <iterate property="shpgStsCdList" var="shpgStsCd[]" open="(" close=")" conjunction=",">
                #shpgStsCd[]#
            </iterate>
            AND ROWNUM                      = 1
    </statement>

</sqlMap>