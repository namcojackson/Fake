<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NWAL1500QueryForLineConfig">

    <statement id="getMnfItemCd" parameterClass="Map" resultClass="String">
        SELECT
            MDSE.MNF_ITEM_CD
        FROM
            MDSE MDSE
        WHERE
            MDSE.GLBL_CMPY_CD     = #glblCmpyCd#
            AND MDSE.MDSE_CD      = #mdseCd#
            AND MDSE.EZCANCELFLAG = '0'
            AND MDSE.RGTN_STS_CD  = #rgtnStsCd#
    </statement>

    <statement id="getBaseMdseCdFromMnfItemCd" parameterClass="Map" resultClass="Map"> <!-- S21_NA#9761 2016/09/28 MOD -->
        SELECT
            MDSE.MDSE_CD
        FROM
            MDSE MDSE
        WHERE
            MDSE.GLBL_CMPY_CD     = #glblCmpyCd#
            AND MDSE.MNF_ITEM_CD  = #mnfItemCd#
            AND MDSE.EZCANCELFLAG = '0'
            AND MDSE.RGTN_STS_CD  = #rgtnStsCd#
    </statement>

    <statement id="isExistOrdCatg" parameterClass="Map" resultClass="Integer">
        SELECT
            COUNT(OCBC.ORD_CATG_BIZ_CTX_PK)
        FROM
            ORD_CATG_BIZ_CTX OCBC
        WHERE
            OCBC.GLBL_CMPY_CD           = #glblCmpyCd#
            AND OCBC.ORD_CATG_CTX_TP_CD = #ordCatgCtxTpCd#
            AND OCBC.EZCANCELFLAG       = '0'
            AND (
                 (
                  OCBC.DS_ORD_CATG_CD    = #dsOrdCatgCd#
                  AND OCBC.DS_ORD_TP_CD  IS NULL
                  AND OCBC.DS_ORD_RSN_CD IS NULL
                 )
                 <isNotNull property="dsOrdTpCd">
                 OR
                 (
                  OCBC.DS_ORD_CATG_CD    = #dsOrdCatgCd#
                  AND OCBC.DS_ORD_TP_CD  = #dsOrdTpCd#
                  AND OCBC.DS_ORD_RSN_CD IS NULL
                 )
                 </isNotNull>
                 <isNotNull property="dsOrdTpCd">
                     <isNotNull property="dsOrdRsnCd">
                     OR
                     (
                      OCBC.DS_ORD_CATG_CD    = #dsOrdCatgCd#
                      AND OCBC.DS_ORD_TP_CD  = #dsOrdTpCd#
                      AND OCBC.DS_ORD_RSN_CD = #dsOrdRsnCd#
                     )
                     </isNotNull>
                 </isNotNull>
                )
    </statement>

    <statement id="getMdseInfo" parameterClass="Map" resultClass="Map">
        SELECT
            MDSE.COA_PROD_CD         AS COA_PROD_CD
           ,CP.COA_PROD_DESC_TXT     AS COA_PROD_DESC_TXT
           <!-- 2016/06/28 S21_NA#545 Mod Start -->
           <!-- ,CMT.COA_MDSE_TP_CD       AS COA_MDSE_TP_CD -->
           <!-- ,CMT.COA_MDSE_TP_DESC_TXT AS COA_MDSE_TP_DESC_TXT -->
           ,CPJ.COA_PROJ_CD          AS COA_MDSE_TP_CD
           ,CPJ.COA_PROJ_DESC_TXT    AS COA_MDSE_TP_DESC_TXT
           <!-- 2016/06/28 S21_NA#545 Mod End -->
           ,DMSP.PKG_UOM_CD          AS PKG_UOM_CD
           ,MDSE.MDSE_DESC_SHORT_TXT  AS MDSE_DESC_SHORT_TXT
        FROM
            MDSE              MDSE
           ,COA_PROD          CP
           <!-- 2016/06/28 S21_NA#545 Mod Start -->
           <!-- ,COA_MDSE_TP       CMT  -->
           ,COA_PROJ          CPJ
           <!-- 2016/06/28 S21_NA#545 Mod End -->
           ,MDSE_STORE_PKG DMSP
        WHERE
            MDSE.GLBL_CMPY_CD     = #glblCmpyCd#
            AND MDSE.MDSE_CD      = #mdseCd#
            AND MDSE.RGTN_STS_CD  = #rgtnStsCd#
            AND MDSE.EZCANCELFLAG = '0'

            AND MDSE.GLBL_CMPY_CD = CP.GLBL_CMPY_CD
            AND MDSE.COA_PROD_CD  = CP.COA_PROD_CD
            AND CP.EZCANCELFLAG   = '0'

           <!-- 2016/06/28 S21_NA#545 Mod Start -->
            <!-- AND DMI.GLBL_CMPY_CD   = CMT.GLBL_CMPY_CD -->
            <!-- AND DMI.COA_MDSE_TP_CD = CMT.COA_MDSE_TP_CD -->
            <!-- AND CMT.EZCANCELFLAG   = '0' -->
            AND MDSE.GLBL_CMPY_CD   = CPJ.GLBL_CMPY_CD
            AND MDSE.COA_MDSE_TP_CD = CPJ.COA_PROJ_CD
            AND CPJ.EZCANCELFLAG   = '0'
           <!-- 2016/06/28 S21_NA#545 Mod End -->

            AND MDSE.GLBL_CMPY_CD = DMSP.GLBL_CMPY_CD
            AND MDSE.MDSE_CD      = DMSP.MDSE_CD
            <isEqual property="isCalledMdl" compareValue="true">
                AND DMSP.BASE_PKG_UOM_CD IS NOT NULL
            </isEqual>
            <isEqual property="isCalledMdl" compareValue="false">
                AND DMSP.PRIM_PKG_UOM_FLG = 'Y'
            </isEqual>
            AND DMSP.EZCANCELFLAG = '0'
    </statement>

    <statement id="getSvcConfInfo" parameterClass="Map" resultClass="Map">
        SELECT
            SMM.SVC_MACH_TP_CD AS SVC_MACH_TP_CD
           ,SMM.MDSE_CD        AS MDSE_CD
        FROM
            SVC_CONFIG_MSTR SCM
           ,SVC_MACH_MSTR   SMM
           ,SVC_MACH_TP     SMT
        WHERE
            SCM.GLBL_CMPY_CD           = #glblCmpyCd#
            AND SCM.SVC_CONFIG_MSTR_PK = #configId#
            AND SCM.EZCANCELFLAG       = '0'

            AND SCM.GLBL_CMPY_CD       = SMM.GLBL_CMPY_CD
            AND SCM.SVC_CONFIG_MSTR_PK = SMM.SVC_CONFIG_MSTR_PK
            AND SMM.EZCANCELFLAG       = '0'

            AND SMM.GLBL_CMPY_CD   = SMT.GLBL_CMPY_CD
            AND SMM.SVC_MACH_TP_CD = SMT.SVC_MACH_TP_CD
            AND SMT.EZCANCELFLAG   = '0'
        ORDER BY
            SMT.SVC_MACH_TP_SORT_NUM
           ,SMM.SVC_MACH_MSTR_PK
    </statement>

    <statement id="isExistWh" parameterClass="Map" resultClass="Integer">
        SELECT
            COUNT(RW.RTL_WH_CD)
        FROM
            RTL_WH RW
        WHERE
            RW.GLBL_CMPY_CD     = #glblCmpyCd#
            AND RW.RTL_WH_NM    = #rtlWhNm#
            AND RW.EZCANCELFLAG = '0'
    </statement>

    <statement id="isExistWhWithDsOrdTp" parameterClass="Map" resultClass="Integer">
        SELECT
            COUNT(WH.RTL_WH_CD)
        FROM
            DS_ORD_TP_LOC_ROLE_RELN              LRR
            ,LOC_USG                             LU
            ,DS_INVTY_LOC_V                      WH
        WHERE
                LRR.GLBL_CMPY_CD                 = #glblCmpyCd#
            AND LRR.DS_ORD_TP_CD                 = #dsOrdTpCd#
            AND LRR.EZCANCELFLAG                 = '0'
            AND LRR.GLBL_CMPY_CD                 = LU.GLBL_CMPY_CD
            AND LRR.LOC_ROLE_TP_CD               = LU.LOC_ROLE_TP_CD
            AND LU.EZCANCELFLAG                  = '0'
            AND LU.GLBL_CMPY_CD                  = WH.GLBL_CMPY_CD
            AND LU.PTY_LOC_PK                    = WH.PTY_LOC_PK
            AND WH.RGTN_STS_CD                   = #rgtnStsReadyForOrderTaking#
            AND WH.EFF_FROM_DT                   <![CDATA[<=]]> #slsDt#
            AND NVL(WH.EFF_THRU_DT, '99991231')  <![CDATA[>=]]> #slsDt#
            AND UPPER(WH.RTL_WH_NM)              = UPPER(#rtlWhNm#)
            AND WH.EZCANCELFLAG                  = '0'
    </statement>

    <statement id="isExistWhWithOutDsOrdTp" parameterClass="Map" resultClass="Integer">
        SELECT
            COUNT(WH.RTL_WH_CD)
        FROM
            DS_INVTY_LOC_V                       WH
        WHERE
                WH.GLBL_CMPY_CD                  = #glblCmpyCd#
            AND WH.RGTN_STS_CD                   = #rgtnStsReadyForOrderTaking#
            AND WH.EFF_FROM_DT                   <![CDATA[<=]]> #slsDt#
            AND NVL(WH.EFF_THRU_DT, '99991231')  <![CDATA[>=]]> #slsDt#
            AND UPPER(WH.RTL_WH_NM)              = UPPER(#rtlWhNm#)
            AND WH.EZCANCELFLAG                  = '0'
    </statement>

    <statement id="getWhInfo" parameterClass="Map" resultClass="Map">
    <!-- 
        SELECT
            RW.RTL_WH_CD AS RTL_WH_CD
           ,RW.RTL_WH_NM AS RTL_WH_NM
        FROM
            RTL_SWH RSW
           ,RTL_WH  RW
        WHERE
            RSW.GLBL_CMPY_CD         = #glblCmpyCd#
            AND RSW.RTL_SWH_DSBL_FLG = 'N'
            AND RSW.EFF_FROM_DT      &lt;= #slsDt#
            AND NVL(RSW.EFF_THRU_DT, '99991231') &gt;= #slsDt#
            AND RSW.EZCANCELFLAG     = '0'

            AND RSW.GLBL_CMPY_CD = RW.GLBL_CMPY_CD
            AND RSW.RTL_WH_CD    = RW.RTL_WH_CD
            AND RW.RTL_WH_NM     LIKE #rtlWhNm#
            AND RW.EFF_FROM_DT   &lt;= #slsDt#
            AND NVL(RW.EFF_THRU_DT, '99991231') &gt;= #slsDt#
            AND RW.EZCANCELFLAG  = '0'
        GROUP BY
            RW.RTL_WH_CD
           ,RW.RTL_WH_NM -->
        SELECT
            WH.RTL_WH_CD AS RTL_WH_CD
           ,WH.RTL_WH_NM AS RTL_WH_NM
           ,WH.RTL_WH_CATG_CD AS RTL_WH_CATG_CD <!-- 2020/03/16 QC#56132 Add -->
        FROM
            DS_INVTY_LOC_V WH
        WHERE
            WH.GLBL_CMPY_CD         = #glblCmpyCd#
            AND WH.EFF_FROM_DT      <![CDATA[<=]]> #slsDt#
            AND NVL(WH.EFF_THRU_DT, '99991231') <![CDATA[>=]]> #slsDt#
            AND WH.EZCANCELFLAG     = '0'

            AND UPPER(WH.RTL_WH_NM) LIKE UPPER(#rtlWhNm#)
        GROUP BY
            WH.RTL_WH_CD
           ,WH.RTL_WH_NM
           ,WH.RTL_WH_CATG_CD <!-- 2020/03/16 QC#56132 Add -->
    </statement>

    <statement id="getWhInfoWithRsn" parameterClass="Map" resultClass="Map">
    <!--     SELECT
            RW.RTL_WH_CD AS RTL_WH_CD
           ,RW.RTL_WH_NM AS RTL_WH_NM
        FROM
            DS_ORD_TP_LOC_ROLE_RELN LRR
           ,LOC_USG                 LU
           ,WH                      WH
           ,RTL_SWH                 RSW
           ,RTL_WH                  RW
        WHERE
            LRR.GLBL_CMPY_CD     = #glblCmpyCd#
            AND LRR.DS_ORD_TP_CD = #dsOrdTpCd#
            AND LRR.EZCANCELFLAG = '0'

            AND LRR.GLBL_CMPY_CD   = LU.GLBL_CMPY_CD
            AND LRR.LOC_ROLE_TP_CD = LU.LOC_ROLE_TP_CD
            AND LU.EZCANCELFLAG    = '0'

            AND LU.GLBL_CMPY_CD = WH.GLBL_CMPY_CD
            AND LU.PTY_LOC_PK   = WH.PTY_LOC_PK
            AND WH.RGTN_STS_CD  = #rgtnStsCd#
            AND WH.EFF_FROM_DT  &lt;= #slsDt#
            AND NVL(WH.EFF_THRU_DT, '99991231') &gt;= #slsDt#
            AND WH.EZCANCELFLAG = '0'

            AND WH.GLBL_CMPY_CD      = RSW.GLBL_CMPY_CD
            AND WH.WH_CD             = RSW.INVTY_LOC_CD
            AND RSW.RTL_SWH_DSBL_FLG = 'N'
            AND RSW.EFF_FROM_DT      &lt;= #slsDt#
            AND NVL(RSW.EFF_THRU_DT, '99991231') &gt;= #slsDt#
            AND RSW.EZCANCELFLAG     = '0'

            AND RSW.GLBL_CMPY_CD = RW.GLBL_CMPY_CD
            AND RSW.RTL_WH_CD    = RW.RTL_WH_CD
            AND RW.RTL_WH_NM     LIKE #rtlWhNm#
            AND RW.EFF_FROM_DT   &lt;= #slsDt#
            AND NVL(RW.EFF_THRU_DT, '99991231') &gt;= #slsDt#
            AND RW.EZCANCELFLAG  = '0'
        GROUP BY
            RW.RTL_WH_CD
           ,RW.RTL_WH_NM -->
    <!-- 2018/11/29 QC#28432 Add Start -->
    WITH WH_LIST AS(
    SELECT                   --1.WH
        W.EZCANCELFLAG
       ,W.GLBL_CMPY_CD
       ,RWH1.RTL_WH_CD
       ,RWH1.RTL_WH_NM
       ,RWH1.RTL_WH_CATG_CD <!-- 2020/03/16 QC#56132 Add -->
       ,W.RGTN_STS_CD
       ,W.PTY_LOC_PK
       ,W.EFF_FROM_DT
       ,W.EFF_THRU_DT
    FROM
        WH W
       ,RTL_SWH RSW
       ,RTL_WH RWH1
    WHERE
            W.GLBL_CMPY_CD                 = RSW.GLBL_CMPY_CD
        AND W.WH_CD                        = RSW.INVTY_LOC_CD
        AND RSW.GLBL_CMPY_CD               = RWH1.GLBL_CMPY_CD
        AND RSW.RTL_WH_CD                  = RWH1.RTL_WH_CD
        AND RWH1.RTL_WH_NM                 LIKE #rtlWhNm#
        AND W.RGTN_STS_CD                  = #rgtnStsCd#
        AND W.EFF_FROM_DT                  <![CDATA[<=]]> #slsDt#
        AND NVL(W.EFF_THRU_DT, '99991231') <![CDATA[>=]]> #slsDt#
        AND W.EZCANCELFLAG                 = '0'
        AND RWH1.EZCANCELFLAG              = '0'
        AND RSW.EZCANCELFLAG               = '0'
    UNION ALL
    SELECT                   --1.WH NO SUB WAREHOUSE
        W.EZCANCELFLAG
       ,W.GLBL_CMPY_CD
       ,RWH2.RTL_WH_CD RTL_WH_CD
       ,RWH2.RTL_WH_NM RTL_WH_NM
       ,RWH2.RTL_WH_CATG_CD <!-- 2020/02/16 QC#56132 Add -->
       ,W.RGTN_STS_CD
       ,W.PTY_LOC_PK
       ,W.EFF_FROM_DT
       ,W.EFF_THRU_DT
    FROM
        WH W
       ,RTL_WH RWH2
    WHERE
        W.GLBL_CMPY_CD                     = RWH2.GLBL_CMPY_CD(+)
        AND W.WH_CD                        = RWH2.RTL_WH_CD(+)
        AND RWH2.RTL_WH_NM                 LIKE #rtlWhNm#
        AND W.RGTN_STS_CD                  = #rgtnStsCd#
        AND W.EFF_FROM_DT                  <![CDATA[<=]]> #slsDt#
        AND NVL(W.EFF_THRU_DT, '99991231') <![CDATA[>=]]> #slsDt#
        AND W.EZCANCELFLAG                 = '0'
        AND RWH2.EZCANCELFLAG(+)           = '0'
        AND NOT EXISTS (
            SELECT
                1
            FROM
                RTL_SWH RSW
               ,RTL_WH RWH1
            WHERE
                RSW.GLBL_CMPY_CD  = W.GLBL_CMPY_CD
            AND RSW.INVTY_LOC_CD  = W.WH_CD
            AND RSW.GLBL_CMPY_CD  = RWH1.GLBL_CMPY_CD
            AND RSW.RTL_WH_CD     = RWH1.RTL_WH_CD
            AND RSW.EZCANCELFLAG  = '0'
            AND RWH1.EZCANCELFLAG = '0'
        )
    UNION ALL
    SELECT                   --2.TECH_LOC
        T.EZCANCELFLAG
       ,T.GLBL_CMPY_CD
       ,RWH1.RTL_WH_CD RTL_WH_CD
       ,RWH1.RTL_WH_NM RTL_WH_NM
       ,RWH1.RTL_WH_CATG_CD <!-- 2020/03/16 QC#56132 Add -->
       ,T.RGTN_STS_CD
       ,T.PTY_LOC_PK
       ,T.EFF_FROM_DT
       ,T.EFF_THRU_DT
    FROM
        TECH_LOC T
       ,RTL_SWH RSW
       ,RTL_WH RWH1
    WHERE
        T.GLBL_CMPY_CD                     = RSW.GLBL_CMPY_CD
        AND T.TECH_LOC_CD                  = RSW.INVTY_LOC_CD
        AND RSW.GLBL_CMPY_CD               = RWH1.GLBL_CMPY_CD
        AND RSW.RTL_WH_CD                  = RWH1.RTL_WH_CD
        AND RWH1.RTL_WH_NM                 LIKE #rtlWhNm#
        AND T.RGTN_STS_CD                  = #rgtnStsCd#
        AND T.EFF_FROM_DT                  <![CDATA[<=]]> #slsDt#
        AND NVL(T.EFF_THRU_DT, '99991231') <![CDATA[>=]]> #slsDt#
        AND T.EZCANCELFLAG                 = '0'
        AND RWH1.EZCANCELFLAG              = '0'
        AND RSW.EZCANCELFLAG               = '0'
    UNION ALL
    SELECT                   --2.TECH_LOC NO SUB WAREHOUSE
        T.EZCANCELFLAG
       ,T.GLBL_CMPY_CD
       ,RWH2.RTL_WH_CD RTL_WH_CD
       ,RWH2.RTL_WH_NM RTL_WH_NM
       ,RWH2.RTL_WH_CATG_CD <!-- 2020/03/16 QC#56132 Add -->
       ,T.RGTN_STS_CD
       ,T.PTY_LOC_PK
       ,T.EFF_FROM_DT
       ,T.EFF_THRU_DT
    FROM
        TECH_LOC T
       ,RTL_WH RWH2
    WHERE
        T.GLBL_CMPY_CD                     = RWH2.GLBL_CMPY_CD(+)
        AND T.TECH_LOC_CD                  = RWH2.RTL_WH_CD(+)
        AND RWH2.RTL_WH_NM                 LIKE #rtlWhNm#
        AND T.RGTN_STS_CD                  = #rgtnStsCd#
        AND T.EFF_FROM_DT                  <![CDATA[<=]]> #slsDt#
        AND NVL(T.EFF_THRU_DT, '99991231') <![CDATA[>=]]> #slsDt#
        AND T.EZCANCELFLAG                 = '0'
        AND RWH2.EZCANCELFLAG(+)           = '0'
        AND NOT EXISTS (
            SELECT
                1
            FROM
                RTL_SWH RSW
               ,RTL_WH RWH1
            WHERE
                RSW.GLBL_CMPY_CD      = T.GLBL_CMPY_CD
                AND RSW.INVTY_LOC_CD  = T.TECH_LOC_CD
                AND RSW.GLBL_CMPY_CD  = RWH1.GLBL_CMPY_CD
                AND RSW.RTL_WH_CD     = RWH1.RTL_WH_CD
                AND RWH1.EZCANCELFLAG = '0'
                AND RSW.EZCANCELFLAG  = '0'
        )
    )
    <!-- 2018/11/29 QC#28432 Add End -->
        SELECT
            WH.RTL_WH_CD AS RTL_WH_CD
           ,WH.RTL_WH_NM AS RTL_WH_NM
           ,WH.RTL_WH_CATG_CD AS RTL_WH_CATG_CD <!-- 2020/03/16 QC#56132 Add -->
        FROM
            DS_ORD_TP_LOC_ROLE_RELN LRR
           ,LOC_USG                 LU
           <!-- 2018/11/29 QC#28432 Mod Start -->
           <!--
           ,DS_INVTY_LOC_V          WH
           -->
           ,WH_LIST                 WH
           <!-- 2018/11/29 QC#28432 Mod End -->
        WHERE
            LRR.GLBL_CMPY_CD     = #glblCmpyCd#
            AND LRR.DS_ORD_TP_CD = #dsOrdTpCd#
            AND LRR.EZCANCELFLAG = '0'

            AND LRR.GLBL_CMPY_CD   = LU.GLBL_CMPY_CD
            AND LRR.LOC_ROLE_TP_CD = LU.LOC_ROLE_TP_CD
            AND LU.EZCANCELFLAG    = '0'

            AND LU.GLBL_CMPY_CD = WH.GLBL_CMPY_CD
            AND LU.PTY_LOC_PK   = WH.PTY_LOC_PK
            <!-- 2018/11/29 QC#28432 Del Start -->
            <!--
            AND WH.RGTN_STS_CD  = #rgtnStsCd#
            AND WH.EFF_FROM_DT  <![CDATA[<=]]> #slsDt#
            AND NVL(WH.EFF_THRU_DT, '99991231') <![CDATA[>=]]> #slsDt#
            AND WH.EZCANCELFLAG = '0'

            AND UPPER(WH.RTL_WH_NM) LIKE UPPER(#rtlWhNm#)
            -->
            <!-- 2018/11/29 QC#28432 Del End -->
        GROUP BY
            WH.RTL_WH_CD
           ,WH.RTL_WH_NM
           ,WH.RTL_WH_CATG_CD <!-- 2020/03/16 QC#56132 Add -->
    </statement>

    <!-- 2016/08/25 S21_NA#10321 Add Start -->
    <statement id="getWhInfoWithRsnOfPerfectMatching" parameterClass="Map" resultClass="String">
        SELECT
            WH.RTL_WH_CD AS RTL_WH_CD
        FROM
            DS_ORD_TP_LOC_ROLE_RELN LRR
           ,LOC_USG                 LU
           ,DS_INVTY_LOC_V          WH
        WHERE
            LRR.GLBL_CMPY_CD     = #glblCmpyCd#
            AND LRR.DS_ORD_TP_CD = #dsOrdTpCd#
            AND LRR.EZCANCELFLAG = '0'

            AND LRR.GLBL_CMPY_CD   = LU.GLBL_CMPY_CD
            AND LRR.LOC_ROLE_TP_CD = LU.LOC_ROLE_TP_CD
            AND LU.EZCANCELFLAG    = '0'

            AND LU.GLBL_CMPY_CD = WH.GLBL_CMPY_CD
            AND LU.PTY_LOC_PK   = WH.PTY_LOC_PK
            AND WH.RTL_WH_NM    = #rtlWhNm#
            AND WH.RGTN_STS_CD  = #rgtnStsCd#
            AND WH.EFF_FROM_DT  <![CDATA[<=]]> #slsDt#
            AND NVL(WH.EFF_THRU_DT, '99991231') <![CDATA[>=]]> #slsDt#
            AND WH.EZCANCELFLAG = '0'
        GROUP BY
            WH.RTL_WH_CD
    </statement>
    <!-- 2016/08/25 S21_NA#10321 Add End -->

    <!-- 2020/03/16 QC#56132 Add Start -->
    <statement id="getWhInfoWithRsnOfPerfectMatchingForRMA" parameterClass="Map" resultClass="Map">
        SELECT
            WH.RTL_WH_CD AS RTL_WH_CD
           ,WH.RTL_WH_CATG_CD AS RTL_WH_CATG_CD
        FROM
            DS_ORD_TP_LOC_ROLE_RELN LRR
           ,LOC_USG                 LU
           ,DS_INVTY_LOC_V          WH
        WHERE
            LRR.GLBL_CMPY_CD     = #glblCmpyCd#
            AND LRR.DS_ORD_TP_CD = #dsOrdTpCd#
            AND LRR.EZCANCELFLAG = '0'

            AND LRR.GLBL_CMPY_CD   = LU.GLBL_CMPY_CD
            AND LRR.LOC_ROLE_TP_CD = LU.LOC_ROLE_TP_CD
            AND LU.EZCANCELFLAG    = '0'

            AND LU.GLBL_CMPY_CD = WH.GLBL_CMPY_CD
            AND LU.PTY_LOC_PK   = WH.PTY_LOC_PK
            AND WH.RTL_WH_NM    = #rtlWhNm#
            AND WH.RGTN_STS_CD  = #rgtnStsCd#
            AND WH.EFF_FROM_DT  <![CDATA[<=]]> #slsDt#
            AND NVL(WH.EFF_THRU_DT, '99991231') <![CDATA[>=]]> #slsDt#
            AND WH.EZCANCELFLAG = '0'
        GROUP BY
            WH.RTL_WH_CD
           ,WH.RTL_WH_CATG_CD
    </statement>
    <!-- 2020/03/16 QC#56132 Add End -->

    <statement id="getMdlIdInfoList" parameterClass="Map" resultClass="Map">
        SELECT
            MN.T_MDL_ID AS T_MDL_ID
           ,MN.T_MDL_NM AS T_MDL_NM
        FROM
            MDL_NM MN
        WHERE
            MN.T_GLBL_CMPY_CD   = #glblCmpyCd#
            AND MN.T_MDL_NM     LIKE #mdlDescTxt#
            AND MN.EZCANCELFLAG = '0'
    </statement>

    <statement id="getMdlConfList" parameterClass="Map" resultClass="Map">
        SELECT
            DMC.PRNT_MDSE_CD  AS PRNT_MDSE_CD
           ,DMC.CHILD_MDSE_CD AS CHILD_MDSE_CD
        FROM
            DS_MDL        DM
           ,DS_MDL_CONFIG DMC
        WHERE
            DM.GLBL_CMPY_CD     = #glblCmpyCd#
            AND DM.MDL_ID       = #mdlId#
            AND DM.EZCANCELFLAG = '0'

            AND DM.GLBL_CMPY_CD  = DMC.GLBL_CMPY_CD
            AND DM.MDL_ID        = DMC.MDL_ID
            AND DMC.EFF_FROM_DT  &lt;= #slsDt#
            AND NVL(DMC.EFF_THRU_DT, '99991231')  &gt;= #slsDt#
            AND DMC.EZCANCELFLAG = '0'
        ORDER BY
            DMC.CHILD_MDSE_CD NULLS FIRST
           ,DMC.CHILD_MDSE_CD
    </statement>

    <statement id="getBillToCustInfo" parameterClass="Map" resultClass="Map">
        SELECT
            LOC_NM
           ,FIRST_LINE_ADDR
           ,CTY_ADDR
           ,ST_CD
           ,POST_CD
           ,SELL_TO_CUST_CD
        FROM
            (
             SELECT
                 BTC.LOC_NM           AS LOC_NM
                ,BTC.FIRST_LINE_ADDR  AS FIRST_LINE_ADDR
                ,BTC.CTY_ADDR         AS CTY_ADDR
                ,BTC.ST_CD            AS ST_CD
                ,BTC.POST_CD          AS POST_CD
                ,BTC.SELL_TO_CUST_CD AS SELL_TO_CUST_CD
             FROM
                BILL_TO_CUST    BTC
             WHERE
                 BTC.GLBL_CMPY_CD        = #glblCmpyCd#
                 AND BTC.BILL_TO_CUST_CD = #custCd#
                 AND BTC.RGTN_STS_CD     = #rgtnStsCd#
                 AND BTC.EZCANCELFLAG    = '0'
             ORDER BY
                 BTC.BILL_TO_CUST_PK DESC
            )
        WHERE
            ROWNUM = 1
    </statement>

    <!-- 2016/07/04 S21_NA#1698 Del Start -->
    <!--statement id="getSbstMdseCdList" parameterClass="Map" resultClass="String">
        SELECT
            V.MDSE_CD
        FROM
            ALL_MDSE_V V
        WHERE
            V.GLBL_CMPY_CD     = #glblCmpyCd#
            AND V.RGTN_STS_CD  = #rgtnStsCd#
            AND V.MDSE_CD IN (
                              SELECT
                                  SUPD.SUPD_TO_MDSE_CD
                              FROM
                                  SUPD_RELN SUPD
                              WHERE
                                  SUPD.GLBL_CMPY_CD          = V.GLBL_CMPY_CD
                                  AND SUPD.SUPD_FROM_MDSE_CD = #mdseCd#
                                  AND SUPD.SUPD_TO_MDSE_CD   LIKE #sbstMdseCd#
                                  AND SUPD.EZCANCELFLAG      = '0'
                              UNION
                              SELECT
                                  SUPD.SUPD_TO_MDSE_CD
                              FROM
                                  ORD_TAKE_MDSE OTM
                                 ,SUPD_RELN SUPD
                              WHERE
                                  OTM.GLBL_CMPY_CD         = V.GLBL_CMPY_CD
                                  AND OTM.ORD_TAKE_MDSE_CD = #mdseCd#
                                  AND OTM.EZCANCELFLAG     = '0'
                                  AND OTM.GLBL_CMPY_CD     = SUPD.GLBL_CMPY_CD
                                  AND OTM.MDSE_CD          = SUPD.SUPD_FROM_MDSE_CD
                                  AND SUPD.SUPD_TO_MDSE_CD LIKE #sbstMdseCd#
                                  AND SUPD.EZCANCELFLAG    = '0'
                              UNION
                              SELECT
                                  FLIP.RELN_MDSE_CD
                              FROM
                                  MDSE_ITEM_FLIP_SET FLIP
                              WHERE
                                  FLIP.GLBL_CMPY_CD     = V.GLBL_CMPY_CD
                                  AND FLIP.MDSE_CD      = #mdseCd#
                                  AND FLIP.RELN_MDSE_CD LIKE #sbstMdseCd#
                                  AND FLIP.EZCANCELFLAG = '0'
                              UNION
                              SELECT
                                  FLIP.RELN_MDSE_CD
                              FROM
                                  ORD_TAKE_MDSE OTM
                                 ,MDSE_ITEM_FLIP_SET FLIP
                              WHERE
                                  OTM.GLBL_CMPY_CD         = V.GLBL_CMPY_CD
                                  AND OTM.ORD_TAKE_MDSE_CD = #mdseCd#
                                  AND OTM.EZCANCELFLAG     = '0'
                                  AND OTM.GLBL_CMPY_CD     = FLIP.GLBL_CMPY_CD
                                  AND OTM.MDSE_CD          = FLIP.MDSE_CD
                                  AND FLIP.RELN_MDSE_CD LIKE #sbstMdseCd#
                                  AND FLIP.EZCANCELFLAG    = '0'
                             )
            AND V.EZCANCELFLAG = '0'
        SELECT 
             MDSE_CD 
          FROM (
                SELECT 
                     V.MDSE_CD
                  FROM 
                     ALL_MDSE_V V
                 WHERE 
                       V.GLBL_CMPY_CD = #glblCmpyCd#
                   AND V.RGTN_STS_CD = #rgtnStsCd#
                   AND V.MDSE_CD IN (
                              SELECT 
                                   SUPD.SUPD_TO_MDSE_CD
                                FROM 
                                   SUPD_RELN SUPD
                               WHERE 
                                     SUPD.GLBL_CMPY_CD = V.GLBL_CMPY_CD
                                 AND SUPD.SUPD_FROM_MDSE_CD = #mdseCd#
                                 AND SUPD.EZCANCELFLAG = '0'
                              UNION
                              SELECT 
                                   SUPD.SUPD_TO_MDSE_CD
                                FROM 
                                   ORD_TAKE_MDSE OTM ,
                                   SUPD_RELN SUPD
                               WHERE 
                                     OTM.GLBL_CMPY_CD = V.GLBL_CMPY_CD
                                 AND OTM.ORD_TAKE_MDSE_CD = #mdseCd#
                                 AND OTM.EZCANCELFLAG = '0'
                                 AND OTM.GLBL_CMPY_CD = SUPD.GLBL_CMPY_CD
                                 AND OTM.MDSE_CD = SUPD.SUPD_FROM_MDSE_CD
                                 AND SUPD.EZCANCELFLAG = '0'
                              UNION
                              SELECT 
                                   NVL(OTM.ORD_TAKE_MDSE_CD, FLIP.RELN_MDSE_CD)
                                FROM MDSE_ITEM_FLIP_SET FLIP ,
                                   ORD_TAKE_MDSE OTM
                               WHERE 
                                     FLIP.GLBL_CMPY_CD = V.GLBL_CMPY_CD
                                 AND FLIP.MDSE_CD = #mdseCd#
                                 AND FLIP.EZCANCELFLAG = '0'
                                 AND OTM.GLBL_CMPY_CD(+) = FLIP.GLBL_CMPY_CD
                                 AND OTM.ORD_TAKE_MDSE_CD(+) = SUBSTR(FLIP.RELN_MDSE_CD, 1, 8)
                                 AND OTM.EZCANCELFLAG(+) = '0'
                              UNION
                              SELECT 
                                   OTM.ORD_TAKE_MDSE_CD
                                FROM 
                                   MDSE_ITEM_FLIP_SET FLIP ,
                                   ORD_TAKE_MDSE OTM
                               WHERE 
                                     FLIP.GLBL_CMPY_CD = V.GLBL_CMPY_CD
                                 AND FLIP.MDSE_CD LIKE SUBSTR(#mdseCd#, 1, 8) || '%'
                                 AND FLIP.EZCANCELFLAG = '0'
                                 AND OTM.GLBL_CMPY_CD = FLIP.GLBL_CMPY_CD
                                 AND OTM.ORD_TAKE_MDSE_CD = SUBSTR(FLIP.RELN_MDSE_CD, 1, 8)
                                 AND OTM.EZCANCELFLAG = '0')
                AND V.EZCANCELFLAG = '0'
        ) WHERE 
              MDSE_CD LIKE #sbstMdseCd#
    </statement-->

    <statement id="getRtlSubWhInfoList" parameterClass="Map" resultClass="Map">
        SELECT
            V.RTL_SWH_CD AS RTL_SWH_CD
           ,V.RTL_SWH_NM AS RTL_SWH_NM
        FROM
            DS_INVTY_LOC_V V
        WHERE
            V.GLBL_CMPY_CD     = #glblCmpyCd#
            AND V.RTL_WH_CD    = #rtlWhCd#
            <!-- 2017/11/28 S21_NA#22252 Mod Start -->
            <!-- AND V.RTL_SWH_NM   LIKE #rtlSwhNm# -->
            AND UPPER(V.RTL_SWH_NM) LIKE UPPER(#rtlSwhNm#)
            <!-- 2017/11/28 S21_NA#22252 Mod End -->
            AND V.EZCANCELFLAG = '0'
    </statement>

    <statement id="getMdlInfo" parameterClass="Map" resultClass="Map">
        SELECT
            MDL.T_MDL_NM
           ,DM.MDL_DESC_TXT
           ,DMG.MDL_GRP_DESC_TXT
           ,SS.SVC_SEG_DESC_TXT
           ,DM.SVC_ISTL_REQ_FLG
           ,DM.SITE_SRVY_REQ_FLG
           <!-- 2018/01/11 S21_NA#23329 Add Start -->
           ,DM.SVC_MDL_TP_CD
           <!-- 2018/01/11 S21_NA#23329 Add End -->
        FROM
            MDL_NM     MDL
           ,DS_MDL     DM
           ,DS_MDL_GRP DMG
           ,SVC_SEG    SS
        WHERE
                MDL.T_GLBL_CMPY_CD  = #glblCmpyCd#
            AND MDL.T_MDL_ID        = #mdlId#
            AND MDL.EZCANCELFLAG    = '0'

            AND MDL.T_GLBL_CMPY_CD  = DM.GLBL_CMPY_CD
            AND MDL.T_MDL_ID        = DM.MDL_ID
            AND DM.EZCANCELFLAG     = '0'

            AND DM.GLBL_CMPY_CD     = DMG.GLBL_CMPY_CD(+)
            AND DM.MDL_GRP_ID       = DMG.MDL_GRP_ID(+)
            AND DMG.EZCANCELFLAG(+) = '0'

            AND DM.GLBL_CMPY_CD     = SS.GLBL_CMPY_CD(+)
            AND DM.SVC_SEG_CD       = SS.SVC_SEG_CD(+)
            AND SS.EZCANCELFLAG(+)  = '0'
    </statement>

    <!-- 2016/03/15 S21_NA#4691 Add Start -->
    <statement id="getInvtyAvalQty" parameterClass="Map" resultClass="Map">
        SELECT
              IVT.INVTY_LOC_CD
            , IVT.INVTY_AVAL_QTY
        FROM
            INVTY IVT
        WHERE
                IVT.GLBL_CMPY_CD    = #glblCmpyCd#
            AND IVT.MDSE_CD         = #mdseCd#
            AND IVT.INVTY_LOC_CD    = #invtyLocCd#
            AND IVT.LOC_STS_CD      = #locStsCd#
            AND IVT.STK_STS_CD      = #stkStsCd#
            <!-- AND IVT.LOC_TP_CD       = #whTp#  2016/07/04 S21_NA#7645 Del -->
            AND IVT.EZCANCELFLAG    = '0'
    </statement>
    <!-- 2016/03/15 S21_NA#4691 Add End -->
    <!-- 2016/07/04 S21_NA#7645 Add Start -->
    <statement id="getValidatedQty" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            SUM(ORD_QTY) BO_QTY
        FROM
            SHPG_PLN SP
        WHERE
            SP.GLBL_CMPY_CD     = #glblCmpyCd#
            AND SP.SHPG_STS_CD  = #shpgStsValid#
            AND SP.MDSE_CD      LIKE #mdseCd#
            AND SP.INVTY_LOC_CD = #invtyLocCd#
            AND SP.TRX_HDR_NUM  <![CDATA[<]]> #cpoOrdNum#
            AND SP.EZCANCELFLAG = '0'
    </statement>
    <!-- 2016/07/04 S21_NA#7645 Add End -->
    <!-- 2016/07/27 S21_NA#4691-2 Add Start -->
    <statement id="getValidateQtyOnDtlLine" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            SUM(ORD_QTY) BO_QTY
        FROM
            SHPG_PLN SP
        WHERE
            SP.GLBL_CMPY_CD         = #glblCmpyCd#
            AND SP.TRX_HDR_NUM      = #trxHdrNum#
            AND SP.TRX_LINE_NUM     = #trxLineNum#
            AND SP.TRX_LINE_SUB_NUM = #trxLineSubNum#
            AND SP.SHPG_STS_CD      = #shpgStsValid#
            AND SP.EZCANCELFLAG = '0'
            AND NOT EXISTS (
                SELECT
                    1
                FROM
                    HLD H
                    ,HLD_RSN HR
                WHERE
                    SP.GLBL_CMPY_CD         = H.GLBL_CMPY_CD
                    AND SP.TRX_HDR_NUM      = H.CPO_ORD_NUM
                    AND H.HLD_RSN_CD        = #hldRsnCdSoCancel#
                    AND H.REL_FLG           = #flgOffN#
                    AND H.EZCANCELFLAG      = '0'
                    AND H.GLBL_CMPY_CD      = HR.GLBL_CMPY_CD
                    AND H.HLD_RSN_CD        = HR.HLD_RSN_CD
                    AND (CASE   
                          WHEN  HR.HLD_LVL_CD = #hldLvlCpo#
                          THEN '1'
                          WHEN  HR.HLD_LVL_CD = #hldLvlCpoDtl# 
                             AND SP.TRX_LINE_NUM     = H.CPO_DTL_LINE_NUM
                             AND SP.TRX_LINE_SUB_NUM = H.CPO_DTL_LINE_SUB_NUM
                          THEN '1'
                          WHEN  HR.HLD_LVL_CD = #hldLvlShpg# 
                             AND SP.TRX_LINE_NUM     = H.CPO_DTL_LINE_NUM
                             AND SP.TRX_LINE_SUB_NUM = H.CPO_DTL_LINE_SUB_NUM
                             AND SP.SHPG_PLN_NUM     = H.SHPG_PLN_NUM 
                          THEN '1'
                          ELSE '0'
                        END ) = '1'
                    AND HR.EZCANCELFLAG     = '0'
            )
        GROUP BY
            SP.TRX_HDR_NUM
            , SP.TRX_LINE_NUM
            , SP.TRX_LINE_SUB_NUM
    </statement>
    <!-- 2016/07/27 S21_NA#4691-2 Add Emd -->
    <!-- 2016/11/09 S21_NA#15746 Add Start -->
    <statement id="getRelatedShellDataCount" parameterClass="Map" resultClass="BigDecimal">
    <!-- 2017/05/18 S21_NA#Review structure Lv.2 RS#8337 Mod Start -->
<!--         SELECT -->
<!--             COUNT(CSCR.CPO_SVC_CONFIG_REF_PK) CNT -->
<!--         FROM -->
<!--             CPO_SVC_CONFIG_REF CSCR -->
<!--         WHERE -->
<!--             CSCR.GLBL_CMPY_CD = #glblCmpyCd# -->
<!--             AND CSCR.CPO_ORD_NUM = #cpoOrdNum# -->
<!--             AND CSCR.CPO_DTL_LINE_NUM = #cpoDtlLineNum# -->
            <!-- isNotNull property="cpoDtlLineSubNum" --> <!-- 2016/11/11 S21_NA#15746-3 Add Condition -->
<!--             AND CSCR.CPO_DTL_LINE_SUB_NUM = #cpoDtlLineSubNum# -->
            <!-- /isNotNull -->
<!--             AND CSCR.EZCANCELFLAG = '0' -->
<!--         UNION -->
<!--         SELECT -->
<!--             COUNT(CSABP.CPO_SVC_ADDL_BASE_PRC_PK) CNT -->
<!--         FROM -->
<!--             CPO_SVC_ADDL_BASE_PRC CSABP -->
<!--         WHERE -->
<!--             CSABP.GLBL_CMPY_CD = #glblCmpyCd# -->
<!--             AND CSABP.CPO_ORD_NUM = #cpoOrdNum# -->
<!--             AND CSABP.CPO_DTL_LINE_NUM = #cpoDtlLineNum# -->
            <!-- isNotNull property="cpoDtlLineSubNum" --> <!-- 2016/11/11 S21_NA#15746-3 Add Condition -->
<!--             AND CSABP.CPO_DTL_LINE_SUB_NUM = #cpoDtlLineSubNum# -->
            <!-- /isNotNull -->
<!--             AND CSABP.EZCANCELFLAG = '0' -->
<!--         UNION -->
<!--         SELECT -->
<!--             COUNT(CSACP.CPO_SVC_ADDL_CHRG_PRC_PK) CNT -->
<!--         FROM -->
<!--             CPO_SVC_ADDL_CHRG_PRC CSACP -->
<!--         WHERE -->
<!--             CSACP.GLBL_CMPY_CD = #glblCmpyCd# -->
<!--             AND CSACP.CPO_ORD_NUM = #cpoOrdNum# -->
<!--             AND CSACP.CPO_DTL_LINE_NUM = #cpoDtlLineNum# -->
            <!-- isNotNull property="cpoDtlLineSubNum" --> <!-- 2016/11/11 S21_NA#15746-3 Add Condition -->
<!--             AND CSACP.CPO_DTL_LINE_SUB_NUM = #cpoDtlLineSubNum# -->
            <!-- /isNotNull -->
<!--             AND CSACP.EZCANCELFLAG = '0' -->
        SELECT
            COUNT(DCD.DS_CONTR_DTL_PK) CNT
        FROM
            DS_CONTR_DTL DCD
        WHERE
            DCD.GLBL_CMPY_CD         = #glblCmpyCd#
        AND DCD.CPO_ORD_NUM          = #cpoOrdNum#
        AND DCD.CPO_DTL_LINE_NUM     = #cpoDtlLineNum#
        <isNotNull property="cpoDtlLineSubNum"> <!-- 2016/11/11 S21_NA#15746-3 Add Condition -->
        AND DCD.CPO_DTL_LINE_SUB_NUM = #cpoDtlLineSubNum#
        </isNotNull>
        AND DCD.EZCANCELFLAG         = '0'
    <!-- 2017/05/18 S21_NA#Review structure Lv.2 RS#8337 Mod End -->
    </statement>
    <!-- 2016/11/09 S21_NA#15746 Add End -->
    <!-- 2016/11/30 S21_NA#16098 Add Start -->
    <statement id="getRelatedShellDataCountFromConfig" parameterClass="Map" resultClass="BigDecimal">
    <!-- 2017/05/18 S21_NA#Review structure Lv.2 RS#8338 Mod Start -->
<!--         SELECT -->
<!--             COUNT(CSCR.CPO_SVC_CONFIG_REF_PK) CNT  -->
<!--         FROM -->
<!--             CPO_DTL            DCD -->
<!--            ,CPO_SVC_CONFIG_REF CSCR  -->
<!--         WHERE -->
<!--                 DCD.GLBL_CMPY_CD         = #glblCmpyCd#  -->
<!--             AND DCD.CPO_ORD_NUM          = #cpoOrdNum#  -->
<!--             AND DCD.DS_ORD_POSN_NUM      = #dsOrdPosnNum#  -->
<!--             AND DCD.EZCANCELFLAG         = '0'  -->
<!--             AND DCD.GLBL_CMPY_CD         = CSCR.GLBL_CMPY_CD  -->
<!--             AND DCD.CPO_ORD_NUM          = CSCR.CPO_ORD_NUM  -->
<!--             AND DCD.CPO_DTL_LINE_NUM     = CSCR.CPO_DTL_LINE_NUM  -->
<!--             AND DCD.CPO_DTL_LINE_SUB_NUM = CSCR.CPO_DTL_LINE_SUB_NUM  -->
<!--             AND CSCR.EZCANCELFLAG        = '0'  -->
<!--         UNION  -->
<!--         SELECT -->
<!--             COUNT(CSABP.CPO_SVC_ADDL_BASE_PRC_PK) CNT  -->
<!--         FROM -->
<!--             CPO_DTL               DCD -->
<!--            ,CPO_SVC_ADDL_BASE_PRC CSABP  -->
<!--         WHERE -->
<!--                 DCD.GLBL_CMPY_CD         = #glblCmpyCd# -->
<!--             AND DCD.CPO_ORD_NUM          = #cpoOrdNum#  -->
<!--             AND DCD.DS_ORD_POSN_NUM      = #dsOrdPosnNum#  -->
<!--             AND DCD.EZCANCELFLAG         = '0'  -->
<!--             AND DCD.GLBL_CMPY_CD         = CSABP.GLBL_CMPY_CD  -->
<!--             AND DCD.CPO_ORD_NUM          = CSABP.CPO_ORD_NUM  -->
<!--             AND DCD.CPO_DTL_LINE_NUM     = CSABP.CPO_DTL_LINE_NUM  -->
<!--             AND DCD.CPO_DTL_LINE_SUB_NUM = CSABP.CPO_DTL_LINE_SUB_NUM  -->
<!--             AND CSABP.EZCANCELFLAG       = '0'  -->
<!--         UNION  -->
<!--         SELECT -->
<!--             COUNT(CSACP.CPO_SVC_ADDL_CHRG_PRC_PK) CNT  -->
<!--         FROM -->
<!--             CPO_DTL               DCD -->
<!--            ,CPO_SVC_ADDL_CHRG_PRC CSACP  -->
<!--         WHERE -->
<!--                 DCD.GLBL_CMPY_CD         = #glblCmpyCd# -->
<!--             AND DCD.CPO_ORD_NUM          = #cpoOrdNum#  -->
<!--             AND DCD.DS_ORD_POSN_NUM      = #dsOrdPosnNum#  -->
<!--             AND DCD.EZCANCELFLAG         = '0'  -->
<!--             AND DCD.GLBL_CMPY_CD         = CSACP.GLBL_CMPY_CD  -->
<!--             AND DCD.CPO_ORD_NUM          = CSACP.CPO_ORD_NUM  -->
<!--             AND DCD.CPO_DTL_LINE_NUM     = CSACP.CPO_DTL_LINE_NUM  -->
<!--             AND DCD.CPO_DTL_LINE_SUB_NUM = CSACP.CPO_DTL_LINE_SUB_NUM  -->
<!--             AND CSACP.EZCANCELFLAG       = '0' -->
        SELECT
            COUNT(DCD.DS_CONTR_DTL_PK) CNT 
        FROM
            CPO_DTL            CD
           ,DS_CONTR_DTL       DCD
        WHERE
                CD.GLBL_CMPY_CD         = #glblCmpyCd#
            AND CD.CPO_ORD_NUM          = #cpoOrdNum#
            AND CD.DS_ORD_POSN_NUM      = #dsOrdPosnNum#
            AND CD.EZCANCELFLAG         = '0'
            AND CD.GLBL_CMPY_CD         = DCD.GLBL_CMPY_CD
            AND CD.CPO_ORD_NUM          = DCD.CPO_ORD_NUM
            AND CD.CPO_DTL_LINE_NUM     = DCD.CPO_DTL_LINE_NUM
            AND CD.CPO_DTL_LINE_SUB_NUM = DCD.CPO_DTL_LINE_SUB_NUM
            AND DCD.EZCANCELFLAG        = '0'
    <!-- 2017/05/18 S21_NA#Review structure Lv.2 RS#8338 Mod End -->
    </statement>
    <!-- 2016/11/30 S21_NA#16098 Add End -->

    <!-- Add Start 2017/01/28 QC#17257 -->
    <statement id="getBaseComponentFlag" parameterClass="Map" resultClass="Map">
        SELECT
            DM.INSTL_BASE_CTRL_FLG
           ,MT.MDSE_TP_CTX_TP_CD
        FROM
            MDSE            DM
           ,MDSE_TP_VAL_SET MT
        WHERE
            DM.GLBL_CMPY_CD             = #glblCmpyCd#
            AND DM.MDSE_CD              = #mdseCd#
            AND DM.EZCANCELFLAG         = '0'
            AND DM.GLBL_CMPY_CD         = MT.GLBL_CMPY_CD(+)
            AND DM.COA_MDSE_TP_CD       = MT.COA_MDSE_TP_CD(+)
            AND MT.MDSE_TP_CTX_TP_CD(+) = #mdseTpCtxTpCd#
            AND MT.EZCANCELFLAG(+)      = '0'
            AND ROWNUM                  = 1
    </statement>
    <!-- Add End 2017/01/28 QC#17257 -->

    <!-- 2018/03/20 S21_NA#24842 Add Start -->
    <statement id="getMdlIdByChildMdseCd" parameterClass="Map" resultClass="Map">
        SELECT
            MDL_ID
        FROM
            (
                SELECT
                    DMC.MDL_ID
                FROM
                    DS_MDL_CONFIG DMC
                WHERE
                    DMC.GLBL_CMPY_CD = #glblCmpyCd#
                    AND DMC.CHILD_MDSE_CD = #mdseCd#
                    AND #slsDt# BETWEEN DMC.EFF_FROM_DT AND NVL(DMC.EFF_THRU_DT, '99991231')
                    AND DMC.EZCANCELFLAG = '0'
                UNION
                SELECT
                    DMC.MDL_ID
                FROM
                    DS_MDL_CONFIG DMC
                WHERE
                    DMC.GLBL_CMPY_CD = #glblCmpyCd#
                    AND DMC.CHILD_MDSE_CD = #ordTakeMdseCd#
                    AND #slsDt# BETWEEN DMC.EFF_FROM_DT AND NVL(DMC.EFF_THRU_DT, '99991231')
                    AND DMC.EZCANCELFLAG = '0'
            )
        GROUP BY
            MDL_ID
    </statement>
    <!-- 2018/03/20 S21_NA#24842 Add End -->
    <!-- 2018/07/03 S21_NA#26908 Add Start -->
    <statement id="getImptOrdDtlPk" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            IOD.DS_IMPT_ORD_DTL_PK
        FROM
            DS_IMPT_ORD_DTL IOD
        WHERE
            IOD.GLBL_CMPY_CD                 = #glblCmpyCd#
            AND IOD.DS_IMPT_ORD_PK           = #dsImptOrdPk#
            AND IOD.DS_ORD_POSN_NUM          = #dsOrdPosnNum#
            AND IOD.ORD_SRC_REF_LINE_NUM     = #ordSrcRefLineNum#
            AND IOD.ORD_SRC_REF_LINE_SUB_NUM = #ordSrcRefLineSubNum#
            AND IOD.EZCANCELFLAG             = '0'
    </statement>
    <!-- 2018/07/03 S21_NA#26908 Add End -->
</sqlMap>
