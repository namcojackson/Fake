<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NWAL1500Query">

    <typeAlias alias="NWAL1500_ASMsg"           type="business.blap.NWAL1500.NWAL1500_ASMsg"/>
    <typeAlias alias="NWAL1500_BSMsg"           type="business.blap.NWAL1500.NWAL1500_BSMsg"/>
    <typeAlias alias="NWAL1500_CSMsg"           type="business.blap.NWAL1500.NWAL1500_CSMsg"/>
    <typeAlias alias="NWAL1500_DSMsg"           type="business.blap.NWAL1500.NWAL1500_DSMsg"/>
    <typeAlias alias="NWAL1500_GCMsg"           type="business.blap.NWAL1500.NWAL1500_GCMsg"/>
    <typeAlias alias="NWAL1500_HCMsg"           type="business.blap.NWAL1500.NWAL1500_HCMsg"/>
    <typeAlias alias="NWAL1500_ISMsg"           type="business.blap.NWAL1500.NWAL1500_ISMsg"/>

    <typeAlias alias="DS_ORD_TPTMsg"            type="business.db.DS_ORD_TPTMsg"/>
    <typeAlias alias="DS_ORD_RSNTMsg"           type="business.db.DS_ORD_RSNTMsg"/>
    <typeAlias alias="DS_ORD_LINE_CATGTMsg"     type="business.db.DS_ORD_LINE_CATGTMsg"/>

    <!-- typeAlias alias="CPO_SVCTMsg"             type="business.db.CPO_SVCTMsg"/ -->

    <resultMap id="result.DS_ORD_RSNTMsg" class="DS_ORD_RSNTMsg">
        <result property="dsOrdRsnCd"       column="DS_ORD_RSN_CD"         javaType="EZDTStringItem"/>
        <result property="dsOrdRsnDescTxt"  column="DS_ORD_RSN_DESC_TXT"   javaType="EZDTStringItem"/>
    </resultMap>

    <statement id="getDsOrdTpList" parameterClass="Map" resultClass="Map">
        SELECT
            DOT.DS_ORD_TP_CD       AS DS_ORD_TP_CD
           ,DOT.DS_ORD_TP_DESC_TXT AS DS_ORD_TP_DESC_TXT
        FROM
            DS_ORD_TP DOT
        WHERE
            DOT.GLBL_CMPY_CD       = #glblCmpyCd#
            AND DOT.DS_ORD_CATG_CD = #dsOrdCatgCd#
            AND DOT.EZCANCELFLAG   = '0'
        ORDER BY
            DOT.DS_ORD_TP_SORT_NUM
    </statement>

    <statement id="getDsOrdRsnList" parameterClass="Map" resultClass="Map">
        SELECT
            DOR.DS_ORD_RSN_CD       AS DS_ORD_RSN_CD
           ,DOR.DS_ORD_RSN_DESC_TXT AS DS_ORD_RSN_DESC_TXT
        FROM
            DS_ORD_TP_PROC_DFN PD
           ,DS_ORD_RSN DOR
        WHERE
            PD.GLBL_CMPY_CD     = #glblCmpyCd#
            AND PD.DS_ORD_TP_CD = #dsOrdTpCd#
            AND PD.ACTV_FLG     = 'Y'
            AND PD.EFF_FROM_DT  &lt;= #effDt#
            AND NVL(PD.EFF_THRU_DT, '99991231') &gt;= #effDt#
            AND PD.EZCANCELFLAG = '0'

            AND PD.GLBL_CMPY_CD      = DOR.GLBL_CMPY_CD
            AND PD.DS_ORD_RSN_GRP_CD = DOR.DS_ORD_RSN_GRP_CD
            AND DOR.EZCANCELFLAG     = '0'
        ORDER BY
            DOR.DS_ORD_RSN_SORT_NUM
    </statement>

    <statement id="getOrdLogTpList" parameterClass="Map" resultClass="Map">
        SELECT
             OLT.ORD_LOG_TP_CD          AS ORD_LOG_TP_CD
            ,OLT.ORD_LOG_TP_DESC_TXT    AS ORD_LOG_TP_DESC_TXT
        FROM
            ORD_LOG_TP           OLT        -- Order Log Type Code
        WHERE
            OLT.EZCANCELFLAG       = '0'
            AND OLT.GLBL_CMPY_CD   = #glblCmpyCd#
            AND UPPER(OLT.ORD_LOG_TP_CD) LIKE #ordLogTpCd#
            AND ROWNUM         &lt;= 2  <!-- 2018/10/26 QC#28870 Add -->
    </statement>

    <statement id="getDsOrdLineCatgList" parameterClass="Map" resultClass="Map">
        SELECT
            PD.PRIM_LINE_CATG_FLG       AS PRIM_LINE_CATG_FLG
           ,C.DS_ORD_LINE_CATG_CD       AS DS_ORD_LINE_CATG_CD
           ,C.DS_ORD_LINE_CATG_DESC_TXT AS DS_ORD_LINE_CATG_DESC_TXT
        FROM
            DS_ORD_LINE_PROC_DFN PD
           ,DS_ORD_LINE_CATG C
        WHERE
            PD.GLBL_CMPY_CD     = #glblCmpyCd#
            AND PD.DS_ORD_TP_CD = #dsOrdTpCd#
            AND PD.ACTV_FLG     = 'Y'
            AND PD.EFF_FROM_DT  &lt;= #effDt#
            AND NVL(PD.EFF_THRU_DT, '99991231') &gt;= #effDt#
            AND PD.EZCANCELFLAG = '0'

            AND PD.GLBL_CMPY_CD        = C.GLBL_CMPY_CD
            AND PD.DS_ORD_LINE_CATG_CD = C.DS_ORD_LINE_CATG_CD
            AND C.DS_ORD_LINE_DRCTN_CD = #dsOrdLineDrctnCd#
            AND C.EZCANCELFLAG         = '0'
        ORDER BY
            C.DS_ORD_LINE_CATG_SORT_NUM
    </statement>

    <!-- Add Start 2017/09/21 S21_NA#18859  -->
    <statement id="getDsOrdLineCatgInbound" parameterClass="Map" resultClass="Map">
        SELECT
            A.INBD_ORD_LINE_CATG_CD       DS_ORD_LINE_CATG_CD
           ,C.DS_ORD_LINE_CATG_DESC_TXT   DS_ORD_LINE_CATG_DESC_TXT
        FROM 
            (
            SELECT 
                 OLCR.INBD_ORD_LINE_CATG_CD INBD_ORD_LINE_CATG_CD
            FROM
                CPO                     C
               ,CPO_DTL                 CD
               ,ORD_LINE_CATG_RELN      OLCR
            WHERE
                C.GLBL_CMPY_CD          = #glblCmpyCd#
            AND C.CPO_ORD_NUM           = #origCpoOrdNum#
            AND C.EZCANCELFLAG          = '0'
            AND C.GLBL_CMPY_CD          = CD.GLBL_CMPY_CD
            AND C.CPO_ORD_NUM           = CD.CPO_ORD_NUM
            AND CD.CPO_DTL_LINE_NUM     = #origCpoLineNum#
            AND CD.CPO_DTL_LINE_SUB_NUM = #origCpoLineSubNum#
            AND CD.EZCANCELFLAG         = '0'

            AND CD.GLBL_CMPY_CD         = OLCR.GLBL_CMPY_CD
            AND C.DS_ORD_CATG_CD        = OLCR.OTBD_ORD_CATG_CD
            AND CD.DS_ORD_LINE_CATG_CD  = OLCR.OTBD_ORD_LINE_CATG_CD
            AND OLCR.EZCANCELFLAG       = '0'

            UNION ALL
            SELECT 
                 OLCR.INBD_ORD_LINE_CATG_CD INBD_ORD_LINE_CATG_CD
            FROM
                CPO                     C
               ,CPO_DTL                 CD
               ,ORD_LINE_CATG_RELN      OLCR
            WHERE
                C.GLBL_CMPY_CD          = #glblCmpyCd#
            AND C.CPO_ORD_NUM           = #origCpoOrdNum#
            AND C.EZCANCELFLAG          = '0'
            AND C.GLBL_CMPY_CD          = CD.GLBL_CMPY_CD
            AND C.CPO_ORD_NUM           = CD.CPO_ORD_NUM
            AND CD.CPO_DTL_LINE_NUM     = #origCpoLineNum#
            AND CD.CPO_DTL_LINE_SUB_NUM = #origCpoLineSubNum#
            AND CD.EZCANCELFLAG         = '0'

            AND CD.GLBL_CMPY_CD         = OLCR.GLBL_CMPY_CD
            AND OLCR.OTBD_ORD_CATG_CD   = #astrLineCatg#
            AND CD.DS_ORD_LINE_CATG_CD  = OLCR.OTBD_ORD_LINE_CATG_CD
            AND NOT EXISTS (SELECT 1 FROM ORD_LINE_CATG_RELN A
                            WHERE 
                                A.GLBL_CMPY_CD      = C.GLBL_CMPY_CD
                            AND A.OTBD_ORD_CATG_CD  = C.DS_ORD_CATG_CD
                            AND A.OTBD_ORD_LINE_CATG_CD = CD.DS_ORD_LINE_CATG_CD
                            AND A.EZCANCELFLAG          = '0') 
            AND OLCR.EZCANCELFLAG       = '0'
            ) A
           ,DS_ORD_LINE_PROC_DFN    DOLP
           ,DS_ORD_LINE_CATG        C
        WHERE
            DOLP.GLBL_CMPY_CD        =#glblCmpyCd#
        AND A.INBD_ORD_LINE_CATG_CD  = DOLP.DS_ORD_LINE_CATG_CD
        AND DOLP.DS_ORD_TP_CD        = #dsOrdTpCd#
        AND DOLP.ACTV_FLG     = 'Y'
        AND DOLP.EFF_FROM_DT  &lt;= #effDt#
        AND NVL(DOLP.EFF_THRU_DT, '99991231') &gt;= #effDt#
        AND DOLP.EZCANCELFLAG        = '0'

        AND DOLP.GLBL_CMPY_CD        = C.GLBL_CMPY_CD
        AND DOLP.DS_ORD_LINE_CATG_CD = C.DS_ORD_LINE_CATG_CD
        AND C.DS_ORD_LINE_DRCTN_CD   = #dsOrdLineDrctnCd#
        AND C.EZCANCELFLAG           = '0'
    </statement>
    <!-- Add End 2017/09/21 S21_NA#18859  -->

    <statement id="getBaseComponentFlag" parameterClass="Map" resultClass="Map">
        SELECT
            DM.INSTL_BASE_CTRL_FLG
           ,MT.MDSE_TP_CTX_TP_CD
        FROM
            MDSE            DM
           ,MDSE_TP_VAL_SET MT
        WHERE
            DM.GLBL_CMPY_CD             = #glblCmpyCd#
            AND DM.MDSE_CD              = #mdseCd#
            AND DM.EZCANCELFLAG         = '0'
            AND DM.GLBL_CMPY_CD         = MT.GLBL_CMPY_CD(+)
            AND DM.COA_MDSE_TP_CD       = MT.COA_MDSE_TP_CD(+)
            AND MT.MDSE_TP_CTX_TP_CD(+) = #mdseTpCtxTpCd#
            AND MT.EZCANCELFLAG(+)      = '0'
    </statement>

    <statement id="getPkgUomPullDownList" parameterClass="Map" resultClass="Map">
        SELECT
             PU1.PKG_UOM_CD
            ,DECODE(PU2.PKG_UOM_DESC_TXT, null, PU1.PKG_UOM_DESC_TXT, PU2.PKG_UOM_DESC_TXT) PKG_UOM_DESC_TXT
        FROM
            MDSE_STORE_PKG DMSP
            ,PKG_UOM PU1
            ,PKG_UOM PU2
        WHERE
                DMSP.GLBL_CMPY_CD = #glblCmpyCd#
            AND DMSP.MDSE_CD = #mdseCd#
            AND DMSP.EZCANCELFLAG = '0'
            AND DMSP.GLBL_CMPY_CD = PU1.GLBL_CMPY_CD
            AND DMSP.PKG_UOM_CD = PU1.PKG_UOM_CD
            AND PU1.EZCANCELFLAG = '0'
            AND DMSP.GLBL_CMPY_CD = PU2.GLBL_CMPY_CD(+)
            AND DMSP.BASE_PKG_UOM_CD = PU2.PKG_UOM_CD(+)
            AND PU2.EZCANCELFLAG(+) = '0'
        ORDER BY
            PU1.PKG_UOM_SORT_NUM
    </statement>

    <statement id="getSlsRepInfoList" parameterClass="Map" resultClass="Map">
        SELECT 
            SP.PSN_CD            AS PSN_CD
           ,SP.PSN_NUM           AS PSN_NUM
           ,TOC.TOC_CD           AS TOC_CD
           ,TOC.TOC_NM           AS TOC_NM
           ,CB.COA_BR_CD         AS COA_BR_CD
           ,CB.COA_BR_DESC_TXT   AS COA_BR_DESC_TXT
           ,CE.COA_EXTN_CD       AS COA_EXTN_CD
           ,CE.COA_EXTN_DESC_TXT AS COA_EXTN_DESC_TXT
           ,(CASE
                  WHEN CB.COA_BR_CD IS NOT NULL
                  THEN CB.COA_BR_CD || ':' || CB.COA_BR_DESC_TXT
             END) AS COA_BR_ITEM
           ,(CASE
                  WHEN CE.COA_EXTN_CD IS NOT NULL
                  THEN CE.COA_EXTN_CD || ':' || CE.COA_EXTN_DESC_TXT
             END) AS COA_EXTN_ITEM
        FROM 
            TOC              TOC
           ,ORG_FUNC_ROLE_TP OFRT
           ,BIZ_AREA_ORG     BA
           ,ORG_FUNC_ASG     OFA
           ,S21_PSN          SP
           ,COA_BR           CB
           ,COA_EXTN         CE
           ,S21_ORG          SO  <!-- 2016/10/21 S21_NA#14607 Add -->
        WHERE 
            TOC.GLBL_CMPY_CD     = #glblCmpyCd#
            <isNotNull property="slsRepTocNm">
                AND UPPER(TOC.TOC_NM)   LIKE UPPER(#slsRepTocNm#) <!-- S21_NA#13627 MOD -->
            </isNotNull>
            AND TOC.EZCANCELFLAG = '0'

            AND TOC.GLBL_CMPY_CD        = OFRT.GLBL_CMPY_CD
            AND TOC.ORG_FUNC_ROLE_TP_CD = OFRT.ORG_FUNC_ROLE_TP_CD
            AND OFRT.SLS_REP_FLG        = #slsRepFlg#
            AND OFRT.EZCANCELFLAG       = '0'

            AND OFRT.GLBL_CMPY_CD = BA.GLBL_CMPY_CD
            AND OFRT.FIRST_ORG_CD = BA.BIZ_AREA_ORG_CD
            AND BA.SLS_FLG        = #slsRepFlg#
            AND BA.ORG_STRU_TP_CD = #orgStruTpCd#
            AND BA.EZCANCELFLAG   = '0'

            AND TOC.GLBL_CMPY_CD = OFA.GLBL_CMPY_CD
            AND TOC.TOC_CD       = OFA.TOC_CD
            AND OFA.EZCANCELFLAG = '0'

            AND OFA.GLBL_CMPY_CD = SP.GLBL_CMPY_CD
            AND OFA.PSN_CD       = SP.PSN_CD
            <!-- 2018/04/04 S21_NA#24982 Add Start -->
            AND OFA.EFF_FROM_DT   &lt;= #slsDt#
            AND (OFA.EFF_THRU_DT  &gt;= #slsDt# OR OFA.EFF_THRU_DT IS NULL)
            <!-- 2018/04/04 S21_NA#24982 Add End -->
            <isNotNull property="psnNum">
                AND SP.PSN_NUM    LIKE #psnNum#
            </isNotNull>
            AND SP.EFF_FROM_DT   &lt;= #slsDt#
            AND (SP.EFF_THRU_DT  &gt;= #slsDt# OR SP.EFF_THRU_DT IS NULL)
            AND SP.EZCANCELFLAG       = '0'

            AND TOC.GLBL_CMPY_CD    = CB.GLBL_CMPY_CD (+)
            AND TOC.COA_BR_CD       = CB.COA_BR_CD (+)
            AND CB.EZCANCELFLAG (+) = '0'

            AND TOC.GLBL_CMPY_CD    = CE.GLBL_CMPY_CD (+)
            AND TOC.COA_EXTN_CD     = CE.COA_EXTN_CD (+)
            AND CE.EZCANCELFLAG (+) = '0'

            <!-- 2016/10/21 S21_NA#14607 Add Start -->
            AND TOC.GLBL_CMPY_CD    = SO.GLBL_CMPY_CD
            AND TOC.TOC_CD          = SO.TOC_CD
            AND SO.RGTN_STS_CD     != #rgtnStsCd#
            AND SO.EZCANCELFLAG     = '0'
            <!-- 2016/10/21 S21_NA#14607 Add End -->
            AND ROWNUM          &lt;= 2  <!-- 2018/10/26 QC#28870 Add -->
    </statement>

    <statement id="getPrimSlsRepInfo" parameterClass="Map" resultClass="Map">
        SELECT
            TOC.TOC_NM           AS TOC_NM
           ,CB.COA_BR_CD         AS COA_BR_CD
           ,CB.COA_BR_DESC_TXT   AS COA_BR_DESC_TXT
           ,CE.COA_EXTN_CD       AS COA_EXTN_CD
           ,CE.COA_EXTN_DESC_TXT AS COA_EXTN_DESC_TXT
           ,(CASE
                  WHEN CB.COA_BR_CD IS NOT NULL
                  THEN CB.COA_BR_CD || ':' || CB.COA_BR_DESC_TXT
             END) AS COA_BR_ITEM
           ,(CASE
                  WHEN CE.COA_EXTN_CD IS NOT NULL
                  THEN CE.COA_EXTN_CD || ':' || CE.COA_EXTN_DESC_TXT
             END) AS COA_EXTN_ITEM
            <!--  ,OFA.PSN_CD         AS PSN_CD-->  <!-- ADD 2016/03/28 --> <!-- DEL 2016/05/12  -->   
             ,SP.PSN_NUM         AS PSN_NUM  <!-- ADD 2016/03/28 -->
        FROM
            TOC      TOC
           ,COA_BR   CB
           ,COA_EXTN CE
           ,ORG_FUNC_ASG OFA  <!-- ADD 2016/03/28 -->
           ,S21_PSN  SP       <!-- ADD 2016/05/12 -->
           ,S21_ORG  SO       <!-- 2016/10/21 S21_NA#14607 Add -->
        WHERE
            TOC.GLBL_CMPY_CD     = #glblCmpyCd#
            AND TOC.TOC_CD       = #primRepTocCd#
            AND TOC.EZCANCELFLAG = '0'

            AND TOC.GLBL_CMPY_CD    = CB.GLBL_CMPY_CD (+)
            AND TOC.COA_BR_CD       = CB.COA_BR_CD (+)
            AND CB.EZCANCELFLAG (+) = '0'

            AND TOC.GLBL_CMPY_CD    = CE.GLBL_CMPY_CD (+)
            AND TOC.COA_EXTN_CD     = CE.COA_EXTN_CD (+)
            AND CE.EZCANCELFLAG (+) = '0'

            <!-- ADD 2016/03/28 Start -->
            AND TOC.GLBL_CMPY_CD    = OFA.GLBL_CMPY_CD (+)
            AND TOC.TOC_CD          = OFA.TOC_CD (+)
            AND OFA.EZCANCELFLAG (+) = '0'
            <!-- ADD 2016/03/28 End -->
            
            <!-- ADD 2016/05/12 Start -->
            AND OFA.GLBL_CMPY_CD    = SP.GLBL_CMPY_CD (+)
            AND OFA.PSN_CD          = SP.PSN_CD (+)
            AND SP.EZCANCELFLAG (+) = '0'
            <!-- ADD 2016/05/12 End -->

           <!-- 2016/10/21 S21_NA#14607 Add Start -->
            AND TOC.GLBL_CMPY_CD    = SO.GLBL_CMPY_CD
            AND TOC.TOC_CD          = SO.TOC_CD
            AND SO.RGTN_STS_CD     != #rgtnStsCd#
            AND SO.EZCANCELFLAG     = '0'
           <!-- 2016/10/21 S21_NA#14607 Add End -->
    </statement>

    <statement id="getCarrSvcLvlDescTxt" parameterClass="Map" resultClass="String">
        SELECT
            CARR_SVC_LVL_DESC_TXT
        FROM
            (
             SELECT 
                 CSL.CARR_SVC_LVL_DESC_TXT
             FROM
                 SHPG_SVC_LVL_CARR_RELN SSLCR
                ,CARR_SVC_LVL           CSL
             WHERE
                 SSLCR.GLBL_CMPY_CD        = #glblCmpyCd#
                 AND SSLCR.SHPG_SVC_LVL_CD = #shpgSvcLvlCd#
                 AND SSLCR.CARR_CD         = #carrCd#
                 AND SSLCR.EZCANCELFLAG    = '0'

                 AND SSLCR.GLBL_CMPY_CD    = CSL.GLBL_CMPY_CD
                 AND SSLCR.CARR_SVC_LVL_CD = CSL.CARR_SVC_LVL_CD
                 AND CSL.EZCANCELFLAG      = '0'
             ORDER BY
                 SSLCR.CARR_SVC_LVL_CD DESC
            )
        WHERE
            ROWNUM = 1
    </statement>
    <statement id="isEnableToCancelForOutbound" parameterClass="Map" resultClass="Map">
        SELECT
                COUNT(*) CNT
                ,'1' TP_CD <!-- 2017/10/04 S21_NA#21300 Add -->
        FROM
                SHPG_PLN SP
               <!-- 2019/11/27 QC#52339 Add Start -->
               ,MDSE     M
                ,ORD_TAKE_MDSE     OTM
                ,MDSE     M_OTM        
               <!-- 2019/11/27 QC#52339 Add End -->
        WHERE
             SP.GLBL_CMPY_CD        = #glblCmpyCd#
        AND SP.EZCANCELFLAG        = '0'
        AND SP.TRX_HDR_NUM         = #trxHdrNum#
        <!-- 2019/11/27 QC#52339 Del Start -->
        <!-- AND SP.SHPG_STS_CD NOT IN -->
        <!-- <iterate property="shpgStsCdList" var="shpgStsCd[]" open="(" close=")" conjunction=","> -->
        <!--    #shpgStsCd[]# -->
        <!-- </iterate> -->
        <!-- 2019/11/27 QC#52339 Del End -->
        <!-- 2017/10/04 S21_NA#21300 Add Start -->
        <!-- 2019/11/27 QC#52339 Add Start -->
        AND SP.GLBL_CMPY_CD = M.GLBL_CMPY_CD(+)
        AND SP.MDSE_CD      = M.MDSE_CD(+)
        AND M.EZCANCELFLAG(+)  = '0'
        AND SP.GLBL_CMPY_CD = OTM.GLBL_CMPY_CD(+)
        AND SP.MDSE_CD      = OTM.MDSE_CD(+)
        AND OTM.EZCANCELFLAG(+) = '0'
        AND OTM.GLBL_CMPY_CD = M_OTM.GLBL_CMPY_CD(+)
        AND OTM.MDSE_CD      = M_OTM.MDSE_CD(+)
        AND M_OTM.EZCANCELFLAG(+) = '0'
        AND ((NVL(M.INVTY_CTRL_FLG, M_OTM.INVTY_CTRL_FLG) = #invtyCtrlFlgY# AND SP.SHPG_STS_CD NOT IN 
            <iterate property="shpgStsCdList" var="shpgStsCd[]" open="(" close=")" conjunction=",">
               #shpgStsCd[]#
            </iterate>
             ) OR (
              NVL(M.INVTY_CTRL_FLG, M_OTM.INVTY_CTRL_FLG) = #invtyCtrlFlgN# AND SP.SHPG_STS_CD IN 
            <iterate property="shpgStsCdIntangibleList" var="shpgStsCdIntangible[]" open="(" close=")" conjunction=",">
                #shpgStsCdIntangible[]#
            </iterate>
            ))
        <!-- 2019/11/27 QC#52339 Add End -->
        UNION
        SELECT
                COUNT(*) CNT
                ,'2' TP_CD <!-- 2017/10/04 S21_NA#21300 Add -->
        FROM
                CPO_DTL CD
                ,SHPG_PLN SP
        WHERE
            CD.GLBL_CMPY_CD        = #glblCmpyCd#
        AND CD.CPO_ORD_NUM         = #trxHdrNum#
        AND CD.ORD_LINE_SRC_CD NOT IN
        <iterate property="ittAvalCancOrdLineSrcList" var="ittAvalCancOrdLineSrcCd[]" open="(" close=")" conjunction=",">
           #ittAvalCancOrdLineSrcCd[]#
        </iterate>
        AND CD.EZCANCELFLAG        = '0'
        AND CD.GLBL_CMPY_CD        = SP.GLBL_CMPY_CD
        AND CD.CPO_ORD_NUM         = SP.TRX_HDR_NUM
        AND CD.CPO_DTL_LINE_NUM    = SP.TRX_LINE_NUM
        AND CD.CPO_DTL_LINE_SUB_NUM = SP.TRX_LINE_SUB_NUM
        AND SP.SHPG_STS_CD         = #shpgStsPoPrinted#
        AND SP.EZCANCELFLAG        = '0'
        UNION
        SELECT
                COUNT(*) CNT
                ,'3' TP_CD <!-- 2017/10/04 S21_NA#21300 Add -->
        FROM
                CPO_DTL CD
                ,PO_DTL PD
        WHERE
            CD.GLBL_CMPY_CD        = #glblCmpyCd#
        AND CD.CPO_ORD_NUM         = #trxHdrNum#
        AND CD.ORD_LINE_SRC_CD IN 
        <iterate property="ittAvalCancOrdLineSrcList" var="ittAvalCancOrdLineSrcCd[]" open="(" close=")" conjunction=",">
           #ittAvalCancOrdLineSrcCd[]#
        </iterate>
        AND CD.GLBL_CMPY_CD         = PD.GLBL_CMPY_CD
        AND CD.CPO_ORD_NUM          = PD.CPO_ORD_NUM
        AND CD.CPO_DTL_LINE_NUM     = PD.CPO_DTL_LINE_NUM
        AND CD.CPO_DTL_LINE_SUB_NUM = PD.CPO_DTL_LINE_SUB_NUM
        AND PD.PO_STS_CD NOT IN 
        <iterate property="ittAvalCancStsList" var="ittAvalCancStsCd[]" open="(" close=")" conjunction=",">
           #ittAvalCancStsCd[]#
        </iterate>
        AND CD.EZCANCELFLAG         = '0'
        AND PD.EZCANCELFLAG         = '0'
    <!-- 2017/10/04 S21_NA#21300 Add End -->
    </statement>
    <statement id="isEnableToCancelForInbound" parameterClass="Map" resultClass="BigDecimal">
        SELECT
                COUNT(*)
        FROM
                DS_CPO_RTRN_DTL DCRD
        WHERE
            DCRD.GLBL_CMPY_CD        = #glblCmpyCd#
        AND DCRD.EZCANCELFLAG        = '0'
        AND DCRD.CPO_ORD_NUM         = #cpoOrdNum#
        AND DCRD.RTRN_LINE_STS_CD NOT IN
        <iterate property="rtrnLineStsCdList" var="rtrnLineStsCd[]" open="(" close=")" conjunction=",">
           #rtrnLineStsCd[]#
        </iterate>
    </statement>

    <statement id="getConfigInfoForCopy" parameterClass="Map" resultMap="result.getConfigInfoForCopy">
        SELECT
              DCC.CPO_ORD_NUM                                        CPO_ORD_NUM
            , DCC.DS_ORD_POSN_NUM                                    DS_ORD_POSN_NUM
            , DCC.CONFIG_TP_CD                                       CONFIG_TP_CD
            , DCC.MDL_ID                                             MDL_ID
            , DCC.T_MDL_NM                                           MDL_NM
            , DCC.SHIP_TO_CUST_ACCT_CD                               SHIP_TO_CUST_ACCT_CD
            , DCC.SHIP_TO_CUST_ACCT_NM                               SHIP_TO_CUST_ACCT_NM
            , DCC.SHIP_TO_CUST_LOC_CD                                SHIP_TO_CUST_CD
            , DCC.SHIP_TO_CUST_LOC_ADDR                              SHIP_TO_CUST_LOC_ADDR
            , DCC.BILL_TO_CUST_ACCT_CD                               BILL_TO_CUST_ACCT_CD
            , DCC.BILL_TO_CUST_ACCT_NM                               BILL_TO_CUST_ACCT_NM
            , DCC.BILL_TO_CUST_LOC_CD                                BILL_TO_CUST_CD
            , DCC.BILL_TO_CUST_LOC_ADDR                              BILL_TO_CUST_LOC_ADDR
            , DCC.SELL_TO_CUST_CD                                    SELL_TO_CUST_CD
            , DCC.SOLD_TO_CUST_LOC_CD                                SOLD_TO_CUST_LOC_CD
            , DCC.SOLD_TO_CUST_ACCT_NM                               SOLD_TO_CUST_ACCT_NM
            , DCC.SOLD_TO_CUST_LOC_ADDR                              SOLD_TO_CUST_LOC_ADDR
            , DCC.MDL_DESC_TXT                                       MDL_DESC_TXT
            , DCC.MDL_GRP_DESC_TXT                                   MDL_GRP_DESC_TXT
            , DCC.SVC_SEG_DESC_TXT                                   SVC_SEG_DESC_TXT
            , DCC.SVC_ISTL_REQ_FLG                                   SVC_ISTL_REQ_FLG
            , DCC.SITE_SRVY_REQ_FLG                                  SITE_SRVY_REQ_FLG
            , DCC.SLS_CR_SPL_FLG                                     SLS_CR_SPL_FLG
            , DCC.DS_CPO_CONFIG_HLD_FLG                              DS_CPO_CONFIG_HLD_FLG
            , DCC.CRAT_USR_NM                                        CRAT_USR_NM
            , DCC.CRAT_TS_DPLY_TXT                                   CRAT_TS_DPLY_TXT
            , DCC.UPD_USR_NM                                         UPD_USR_NM
            , DCC.UPD_TS_DPLY_TXT                                    UPD_TS_DPLY_TXT
            , DCC.CONFIG_TOT_DEAL_NET_AMT                            CONFIG_TOT_DEAL_NET_AMT
            , DCC.CONFIG_TOT_DEAL_CHRG_AMT                           CONFIG_TOT_DEAL_CHRG_AMT
            , DCC.CONFIG_TOT_DEAL_TAX_AMT                            CONFIG_TOT_DEAL_TAX_AMT
            , DCC.CONFIG_SUB_TOT_DEAL_AMT                            CONFIG_SUB_TOT_DEAL_AMT
            , DCC.DROP_SHIP_FLG                                      DROP_SHIP_FLG
            <!-- Line Config Tab ** Config Level ** Hidden -->
            , DCC.SHIP_TO_LOC_NM                                     SHIP_TO_LOC_NM
            , DCC.SHIP_TO_ADDL_LOC_NM                                SHIP_TO_ADDL_LOC_NM
            , DCC.SHIP_TO_FIRST_LINE_ADDR                            SHIP_TO_FIRST_LINE_ADDR
            , DCC.SHIP_TO_SCD_LINE_ADDR                              SHIP_TO_SCD_LINE_ADDR
            , DCC.SHIP_TO_THIRD_LINE_ADDR                            SHIP_TO_THIRD_LINE_ADDR
            , DCC.SHIP_TO_FRTH_LINE_ADDR                             SHIP_TO_FRTH_LINE_ADDR
            , DCC.SHIP_TO_FIRST_REF_CMNT_TXT                         SHIP_TO_FIRST_REF_CMNT_TXT
            , DCC.SHIP_TO_SCD_REF_CMNT_TXT                           SHIP_TO_SCD_REF_CMNT_TXT
            , DCC.SHIP_TO_POST_CD                                    SHIP_TO_POST_CD
            , DCC.SHIP_TO_CTY_ADDR                                   SHIP_TO_CTY_ADDR
            , DCC.SHIP_TO_ST_CD                                      SHIP_TO_ST_CD
            , DCC.SHIP_TO_PROV_NM                                    SHIP_TO_PROV_NM
            , DCC.SHIP_TO_CTRY_CD                                    SHIP_TO_CTRY_CD
            , DCC.SHIP_TO_CNTY_NM                                    SHIP_TO_CNTY_NM
            , DCC.DS_CPO_CONFIG_PK                                   DS_CPO_CONFIG_PK
            , DECODE(DCC.PICK_SVC_CONFIG_MSTR_PK, null, DCC.SVC_CONFIG_MSTR_PK, DCC.PICK_SVC_CONFIG_MSTR_PK)    SVC_CONFIG_MSTR_PK
            , DCC.PICK_SVC_CONFIG_MSTR_PK                            PICK_SVC_CONFIG_MSTR_PK
            <!-- 2016/02/09 S21_NA#3398 Add Start -->
            , CASE
                WHEN SCM.SVC_CONFIG_MSTR_PK IS NOT NULL THEN 'Y'
                ELSE 'N' END AS CTRL_INPUT
             <!-- S21_NA#8388 ADD -->
            , (CASE WHEN DCC.DCLN_SVC_CD = '1' THEN 'Y' ELSE ''      <!-- 2016/09/27 S21_NA#12598 Mod -->
                END)                                                 DCLN_SVC_CD
        FROM
              DS_CPO_CONFIG_V  DCC
            , SVC_CONFIG_MSTR  SCM
        WHERE
                DCC.GLBL_CMPY_CD             = #glblCmpyCd#
            AND DCC.CPO_ORD_NUM              = #cpoOrdNum#
            AND DCC.DS_ORD_POSN_NUM          = #dsOrdPosnNum#
            AND DCC.CONFIG_CATG_CD           = #configCatgCd#
            AND DCC.EZCANCELFLAG             = '0'
            AND DCC.GLBL_CMPY_CD             = SCM.GLBL_CMPY_CD(+)
            AND DCC.SVC_CONFIG_MSTR_PK       = SCM.SVC_CONFIG_MSTR_PK(+)
            AND SCM.EZCANCELFLAG(+)          = '0'
        ORDER BY
               DCC.CONFIG_CATG_CD              ASC
             , TO_NUMBER(DCC.DS_ORD_POSN_NUM)  ASC

    </statement>

    <resultMap id="result.getConfigInfoForCopy"     class="NWAL1500_ASMsg">
        <!-- Line Config Tab ** Config Level -->
        <result property="dsOrdPosnNum_LC"          column="DS_ORD_POSN_NUM"             javaType="EZDCStringItem"/>
        <result property="configTpCd_LC"            column="CONFIG_TP_CD"                javaType="EZDCStringItem"/>
        <result property="svcConfigMstrPk_LC"       column="SVC_CONFIG_MSTR_PK"          javaType="EZDCBigDecimalItem"/>
        <result property="mdlNm_LC"                 column="MDL_NM"                      javaType="EZDCStringItem"/>
        <result property="shipToCustAcctCd_LC"      column="SHIP_TO_CUST_ACCT_CD"        javaType="EZDCStringItem"/>
        <result property="shipToCustAcctNm_LC"      column="SHIP_TO_CUST_ACCT_NM"        javaType="EZDCStringItem"/>
        <result property="shipToCustCd_LC"          column="SHIP_TO_CUST_CD"             javaType="EZDCStringItem"/>
        <result property="shipToCustLocAddr_LC"     column="SHIP_TO_CUST_LOC_ADDR"       javaType="EZDCStringItem"/>
        <result property="billToCustAcctCd_LC"      column="BILL_TO_CUST_ACCT_CD"        javaType="EZDCStringItem"/>
        <result property="billToCustAcctNm_LC"      column="BILL_TO_CUST_ACCT_NM"        javaType="EZDCStringItem"/>
        <result property="billToCustCd_LC"          column="BILL_TO_CUST_CD"             javaType="EZDCStringItem"/>
        <result property="billToCustLocAddr_LC"     column="BILL_TO_CUST_LOC_ADDR"       javaType="EZDCStringItem"/>
        <result property="sellToCustCd_LC"          column="SELL_TO_CUST_CD"             javaType="EZDCStringItem"/>
        <result property="soldToCustLocCd_LC"       column="SOLD_TO_CUST_LOC_CD"         javaType="EZDCStringItem"/>
        <result property="soldToCustAcctNm_LC"      column="SOLD_TO_CUST_ACCT_NM"        javaType="EZDCStringItem"/>
        <result property="soldToCustLocAddr_LC"     column="SOLD_TO_CUST_LOC_ADDR"       javaType="EZDCStringItem"/>
        <result property="mdlDescTxt_LC"            column="MDL_DESC_TXT"                javaType="EZDCStringItem"/>
        <result property="mdlGrpDescTxt_LC"         column="MDL_GRP_DESC_TXT"            javaType="EZDCStringItem"/>
        <result property="svcSegDescTxt_LC"         column="SVC_SEG_DESC_TXT"            javaType="EZDCStringItem"/>
        <result property="svcIstlReqFlg_LC"         column="SVC_ISTL_REQ_FLG"            javaType="EZDCStringItem"/>
        <result property="siteSrvyReqFlg_LC"        column="SITE_SRVY_REQ_FLG"           javaType="EZDCStringItem"/>
        <result property="slsCrSplFlg_LC"           column="SLS_CR_SPL_FLG"              javaType="EZDCStringItem"/>
        <result property="dsCpoConfigHldFlg_LC"     column="DS_CPO_CONFIG_HLD_FLG"       javaType="EZDCStringItem"/>
        <result property="cratUsrNm_LC"             column="CRAT_USR_NM"                 javaType="EZDCStringItem"/>
        <result property="cratTsDplyTxt_LC"         column="CRAT_TS_DPLY_TXT"            javaType="EZDCStringItem"/>
        <result property="updUsrNm_LC"              column="UPD_USR_NM"                  javaType="EZDCStringItem"/>
        <result property="updTsDplyTxt_LC"          column="UPD_TS_DPLY_TXT"             javaType="EZDCStringItem"/>
        <result property="configTotDealNetAmt_LC"   column="CONFIG_TOT_DEAL_NET_AMT"     javaType="EZDCBigDecimalItem"/>
        <result property="configTotDealChrgAmt_LC"  column="CONFIG_TOT_DEAL_CHRG_AMT"    javaType="EZDCBigDecimalItem"/>
        <result property="configTotDealTaxAmt_LC"   column="CONFIG_TOT_DEAL_TAX_AMT"     javaType="EZDCBigDecimalItem"/>
        <result property="configSubTotDealAmt_LC"   column="CONFIG_SUB_TOT_DEAL_AMT"     javaType="EZDCBigDecimalItem"/>
        <result property="dropShipFlg_LC"           column="DROP_SHIP_FLG"               javaType="EZDCStringItem"/>
        <result property="dclnSvcCd_LC"             column="DCLN_SVC_CD"                 javaType="EZDCStringItem"/> <!-- S21_NA#8388 ADD -->
        <!-- Line Config Tab ** Config Level ** Hidden -->
        <result property="shipToLocNm_LC"           column="SHIP_TO_LOC_NM"              javaType="EZDCStringItem"/>
        <result property="shipToAddlLocNm_LC"       column="SHIP_TO_ADDL_LOC_NM"         javaType="EZDCStringItem"/>
        <result property="shipToFirstLineAddr_LC"   column="SHIP_TO_FIRST_LINE_ADDR"     javaType="EZDCStringItem"/>
        <result property="shipToScdLineAddr_LC"     column="SHIP_TO_SCD_LINE_ADDR"       javaType="EZDCStringItem"/>
        <result property="shipToThirdLineAddr_LC"   column="SHIP_TO_THIRD_LINE_ADDR"     javaType="EZDCStringItem"/>
        <result property="shipToFrthLineAddr_LC"    column="SHIP_TO_FRTH_LINE_ADDR"      javaType="EZDCStringItem"/>
        <result property="shipToFirstRefCmntTxt_LC" column="SHIP_TO_FIRST_REF_CMNT_TXT"  javaType="EZDCStringItem"/>
        <result property="shipToScdRefCmntTxt_LC"   column="SHIP_TO_SCD_REF_CMNT_TXT"    javaType="EZDCStringItem"/>
        <result property="shipToPostCd_LC"          column="SHIP_TO_POST_CD"             javaType="EZDCStringItem"/>
        <result property="shipToCtyAddr_LC"         column="SHIP_TO_CTY_ADDR"            javaType="EZDCStringItem"/>
        <result property="shipToStCd_LC"            column="SHIP_TO_ST_CD"               javaType="EZDCStringItem"/>
        <result property="shipToProvNm_LC"          column="SHIP_TO_PROV_NM"             javaType="EZDCStringItem"/>
        <result property="shipToCtryCd_LC"          column="SHIP_TO_CTRY_CD"             javaType="EZDCStringItem"/>
        <result property="shipToCntyNm_LC"          column="SHIP_TO_CNTY_NM"             javaType="EZDCStringItem"/>
        <result property="mdlId_LC"                 column="MDL_ID"                      javaType="EZDCBigDecimalItem"/>
        <result property="dsCpoConfigPk_LC"         column="DS_CPO_CONFIG_PK"            javaType="EZDCBigDecimalItem"/>
        <result property="pickSvcConfigMstrPk_LC"   column="PICK_SVC_CONFIG_MSTR_PK"     javaType="EZDCBigDecimalItem"/>
        <result property="xxYesNoCd_LC"             column="CTRL_INPUT"                  javaType="EZDCStringItem"/>
    </resultMap>

    <statement id="getConfigRtrnInfoForCopy" parameterClass="Map" resultMap="result.getConfigRtrnInfoForCopy">
        SELECT
              DCC.CPO_ORD_NUM                                        CPO_ORD_NUM
            , DCC.DS_ORD_POSN_NUM                                    DS_ORD_POSN_NUM
            , DCC.CONFIG_TP_CD                                       CONFIG_TP_CD
            , DCC.MDL_ID                                             MDL_ID
            , DCC.T_MDL_NM                                           MDL_NM
            , DCC.SHIP_TO_CUST_ACCT_CD                               SHIP_TO_CUST_ACCT_CD
            , DCC.SHIP_TO_CUST_ACCT_NM                               SHIP_TO_CUST_ACCT_NM
            , DCC.SHIP_TO_CUST_LOC_CD                                SHIP_TO_CUST_CD
            , DCC.SHIP_TO_CUST_LOC_ADDR                              SHIP_TO_CUST_LOC_ADDR
            , DCC.BILL_TO_CUST_ACCT_CD                               BILL_TO_CUST_ACCT_CD
            , DCC.BILL_TO_CUST_ACCT_NM                               BILL_TO_CUST_ACCT_NM
            , DCC.BILL_TO_CUST_LOC_CD                                BILL_TO_CUST_CD
            , DCC.BILL_TO_CUST_LOC_ADDR                              BILL_TO_CUST_LOC_ADDR
            , DCC.SELL_TO_CUST_CD                                    SELL_TO_CUST_CD
            , DCC.SOLD_TO_CUST_LOC_CD                                SOLD_TO_CUST_LOC_CD
            , DCC.SOLD_TO_CUST_ACCT_NM                               SOLD_TO_CUST_ACCT_NM
            , DCC.SOLD_TO_CUST_LOC_ADDR                              SOLD_TO_CUST_LOC_ADDR
            , DCC.MDL_DESC_TXT                                       MDL_DESC_TXT
            , DCC.MDL_GRP_DESC_TXT                                   MDL_GRP_DESC_TXT
            , DCC.SVC_SEG_DESC_TXT                                   SVC_SEG_DESC_TXT
            , DCC.SVC_ISTL_REQ_FLG                                   SVC_ISTL_REQ_FLG
            , DCC.SITE_SRVY_REQ_FLG                                  SITE_SRVY_REQ_FLG
            , DCC.SLS_CR_SPL_FLG                                     SLS_CR_SPL_FLG
            , DCC.DS_CPO_CONFIG_HLD_FLG                              DS_CPO_CONFIG_HLD_FLG
            , DCC.CRAT_USR_NM                                        CRAT_USR_NM
            , DCC.CRAT_TS_DPLY_TXT                                   CRAT_TS_DPLY_TXT
            , DCC.UPD_USR_NM                                         UPD_USR_NM
            , DCC.UPD_TS_DPLY_TXT                                    UPD_TS_DPLY_TXT
            , DCC.CONFIG_TOT_DEAL_NET_AMT                            CONFIG_TOT_DEAL_NET_AMT
            , DCC.CONFIG_TOT_DEAL_CHRG_AMT                           CONFIG_TOT_DEAL_CHRG_AMT
            , DCC.CONFIG_TOT_DEAL_TAX_AMT                            CONFIG_TOT_DEAL_TAX_AMT
            , DCC.CONFIG_SUB_TOT_DEAL_AMT                            CONFIG_SUB_TOT_DEAL_AMT
            , DCC.DROP_SHIP_FLG                                      DROP_SHIP_FLG
            <!-- Line Config Tab ** Config Level ** Hidden -->
            , DCC.SHIP_TO_LOC_NM                                     SHIP_TO_LOC_NM
            , DCC.SHIP_TO_ADDL_LOC_NM                                SHIP_TO_ADDL_LOC_NM
            , DCC.SHIP_TO_FIRST_LINE_ADDR                            SHIP_TO_FIRST_LINE_ADDR
            , DCC.SHIP_TO_SCD_LINE_ADDR                              SHIP_TO_SCD_LINE_ADDR
            , DCC.SHIP_TO_THIRD_LINE_ADDR                            SHIP_TO_THIRD_LINE_ADDR
            , DCC.SHIP_TO_FRTH_LINE_ADDR                             SHIP_TO_FRTH_LINE_ADDR
            , DCC.SHIP_TO_FIRST_REF_CMNT_TXT                         SHIP_TO_FIRST_REF_CMNT_TXT
            , DCC.SHIP_TO_SCD_REF_CMNT_TXT                           SHIP_TO_SCD_REF_CMNT_TXT
            , DCC.SHIP_TO_POST_CD                                    SHIP_TO_POST_CD
            , DCC.SHIP_TO_CTY_ADDR                                   SHIP_TO_CTY_ADDR
            , DCC.SHIP_TO_ST_CD                                      SHIP_TO_ST_CD
            , DCC.SHIP_TO_PROV_NM                                    SHIP_TO_PROV_NM
            , DCC.SHIP_TO_CTRY_CD                                    SHIP_TO_CTRY_CD
            , DCC.SHIP_TO_CNTY_NM                                    SHIP_TO_CNTY_NM
            , DCC.MDL_ID                                             MDL_ID
            , DCC.DS_CPO_CONFIG_PK                                   DS_CPO_CONFIG_PK
            , DECODE(DCC.PICK_SVC_CONFIG_MSTR_PK, null, DCC.SVC_CONFIG_MSTR_PK, DCC.PICK_SVC_CONFIG_MSTR_PK)    SVC_CONFIG_MSTR_PK
            , DCC.PICK_SVC_CONFIG_MSTR_PK                            PICK_SVC_CONFIG_MSTR_PK
            , CASE
                WHEN SCM.SVC_CONFIG_MSTR_PK IS NOT NULL THEN 'Y'
                ELSE 'N' END AS CTRL_INPUT
         FROM
                DS_CPO_CONFIG_V  DCC
              , SVC_CONFIG_MSTR  SCM
        WHERE
                DCC.GLBL_CMPY_CD             = #glblCmpyCd#
            AND DCC.CPO_ORD_NUM              = #cpoOrdNum#
            AND DCC.DS_ORD_POSN_NUM          = #dsOrdPosnNum#
            AND DCC.CONFIG_CATG_CD           = #configCatgCd#
            AND DCC.EZCANCELFLAG             = '0'
            AND DCC.GLBL_CMPY_CD             = SCM.GLBL_CMPY_CD(+)
            AND DCC.SVC_CONFIG_MSTR_PK       = SCM.SVC_CONFIG_MSTR_PK(+)
            AND SCM.EZCANCELFLAG(+)          = '0'
        ORDER BY
               DCC.CONFIG_CATG_CD   ASC
             , TO_NUMBER(DCC.DS_ORD_POSN_NUM)  ASC

    </statement>

    <resultMap id="result.getConfigRtrnInfoForCopy"     class="NWAL1500_CSMsg">
        <!-- Line Config Tab ** Config Level -->
        <result property="dsOrdPosnNum_RC"          column="DS_ORD_POSN_NUM"             javaType="EZDCStringItem"/>
        <result property="configTpCd_RC"            column="CONFIG_TP_CD"                javaType="EZDCStringItem"/>
        <result property="svcConfigMstrPk_RC"       column="SVC_CONFIG_MSTR_PK"          javaType="EZDCBigDecimalItem"/>
        <result property="mdlNm_RC"                 column="MDL_NM"                      javaType="EZDCStringItem"/>
        <result property="shipToCustAcctCd_RC"      column="SHIP_TO_CUST_ACCT_CD"        javaType="EZDCStringItem"/>
        <result property="shipToCustAcctNm_RC"      column="SHIP_TO_CUST_ACCT_NM"        javaType="EZDCStringItem"/>
        <result property="shipToCustCd_RC"          column="SHIP_TO_CUST_CD"             javaType="EZDCStringItem"/>
        <result property="shipToCustLocAddr_RC"     column="SHIP_TO_CUST_LOC_ADDR"       javaType="EZDCStringItem"/>
        <result property="billToCustAcctCd_RC"      column="BILL_TO_CUST_ACCT_CD"        javaType="EZDCStringItem"/>
        <result property="billToCustAcctNm_RC"      column="BILL_TO_CUST_ACCT_NM"        javaType="EZDCStringItem"/>
        <result property="billToCustCd_RC"          column="BILL_TO_CUST_CD"             javaType="EZDCStringItem"/>
        <result property="billToCustLocAddr_RC"     column="BILL_TO_CUST_LOC_ADDR"       javaType="EZDCStringItem"/>
        <result property="sellToCustCd_RC"          column="SELL_TO_CUST_CD"             javaType="EZDCStringItem"/>
        <result property="soldToCustLocCd_RC"       column="SOLD_TO_CUST_LOC_CD"         javaType="EZDCStringItem"/>
        <result property="soldToCustAcctNm_RC"      column="SOLD_TO_CUST_ACCT_NM"        javaType="EZDCStringItem"/>
        <result property="soldToCustLocAddr_RC"     column="SOLD_TO_CUST_LOC_ADDR"       javaType="EZDCStringItem"/>
        <result property="mdlDescTxt_RC"            column="MDL_DESC_TXT"                javaType="EZDCStringItem"/>
        <result property="mdlGrpDescTxt_RC"         column="MDL_GRP_DESC_TXT"            javaType="EZDCStringItem"/>
        <result property="svcSegDescTxt_RC"         column="SVC_SEG_DESC_TXT"            javaType="EZDCStringItem"/>
        <result property="svcIstlReqFlg_RC"         column="SVC_ISTL_REQ_FLG"            javaType="EZDCStringItem"/>
        <result property="siteSrvyReqFlg_RC"        column="SITE_SRVY_REQ_FLG"           javaType="EZDCStringItem"/>
        <result property="slsCrSplFlg_RC"           column="SLS_CR_SPL_FLG"              javaType="EZDCStringItem"/>
        <result property="dsCpoConfigHldFlg_RC"     column="DS_CPO_CONFIG_HLD_FLG"       javaType="EZDCStringItem"/>
        <result property="cratUsrNm_RC"             column="CRAT_USR_NM"                 javaType="EZDCStringItem"/>
        <result property="cratTsDplyTxt_RC"         column="CRAT_TS_DPLY_TXT"            javaType="EZDCStringItem"/>
        <result property="updUsrNm_RC"              column="UPD_USR_NM"                  javaType="EZDCStringItem"/>
        <result property="updTsDplyTxt_RC"          column="UPD_TS_DPLY_TXT"             javaType="EZDCStringItem"/>
        <result property="configTotDealNetAmt_RC"   column="CONFIG_TOT_DEAL_NET_AMT"     javaType="EZDCBigDecimalItem"/>
        <result property="configTotDealChrgAmt_RC"  column="CONFIG_TOT_DEAL_CHRG_AMT"    javaType="EZDCBigDecimalItem"/>
        <result property="configTotDealTaxAmt_RC"   column="CONFIG_TOT_DEAL_TAX_AMT"     javaType="EZDCBigDecimalItem"/>
        <result property="configSubTotDealAmt_RC"   column="CONFIG_SUB_TOT_DEAL_AMT"     javaType="EZDCBigDecimalItem"/>
        <result property="dropShipFlg_RC"           column="DROP_SHIP_FLG"               javaType="EZDCStringItem"/>
        <!-- Line Config Tab ** Config Level ** Hidden -->
        <result property="shipToLocNm_RC"           column="SHIP_TO_LOC_NM"              javaType="EZDCStringItem"/>
        <result property="shipToAddlLocNm_RC"       column="SHIP_TO_ADDL_LOC_NM"         javaType="EZDCStringItem"/>
        <result property="shipToFirstLineAddr_RC"   column="SHIP_TO_FIRST_LINE_ADDR"     javaType="EZDCStringItem"/>
        <result property="shipToScdLineAddr_RC"     column="SHIP_TO_SCD_LINE_ADDR"       javaType="EZDCStringItem"/>
        <result property="shipToThirdLineAddr_RC"   column="SHIP_TO_THIRD_LINE_ADDR"     javaType="EZDCStringItem"/>
        <result property="shipToFrthLineAddr_RC"    column="SHIP_TO_FRTH_LINE_ADDR"      javaType="EZDCStringItem"/>
        <result property="shipToFirstRefCmntTxt_RC" column="SHIP_TO_FIRST_REF_CMNT_TXT"  javaType="EZDCStringItem"/>
        <result property="shipToScdRefCmntTxt_RC"   column="SHIP_TO_SCD_REF_CMNT_TXT"    javaType="EZDCStringItem"/>
        <result property="shipToPostCd_RC"          column="SHIP_TO_POST_CD"             javaType="EZDCStringItem"/>
        <result property="shipToCtyAddr_RC"         column="SHIP_TO_CTY_ADDR"            javaType="EZDCStringItem"/>
        <result property="shipToStCd_RC"            column="SHIP_TO_ST_CD"               javaType="EZDCStringItem"/>
        <result property="shipToProvNm_RC"          column="SHIP_TO_PROV_NM"             javaType="EZDCStringItem"/>
        <result property="shipToCtryCd_RC"          column="SHIP_TO_CTRY_CD"             javaType="EZDCStringItem"/>
        <result property="shipToCntyNm_RC"          column="SHIP_TO_CNTY_NM"             javaType="EZDCStringItem"/>
        <result property="mdlId_RC"                 column="MDL_ID"                      javaType="EZDCBigDecimalItem"/>
        <result property="dsCpoConfigPk_RC"         column="DS_CPO_CONFIG_PK"            javaType="EZDCBigDecimalItem"/>
        <result property="pickSvcConfigMstrPk_RC"   column="PICK_SVC_CONFIG_MSTR_PK"     javaType="EZDCBigDecimalItem"/>
        <result property="xxYesNoCd_RC"             column="CTRL_INPUT"                  javaType="EZDCStringItem"/><!-- 2016/02/09 S21_NA#3398 Add -->
    </resultMap>

    <statement id="getCpoDtlViewInfoForCopy" parameterClass="Map"  resultMap="result.getCpoDtlInfoForCopy">
        SELECT  
              DCD.DS_ORD_POSN_NUM                                           DS_ORD_POSN_NUM
            , DCD.DS_CPO_LINE_NUM                                           DS_CPO_LINE_NUM
            , DCD.DS_CPO_LINE_SUB_NUM                                       DS_CPO_LINE_SUB_NUM
            , DCD.CPO_DTL_LINE_NUM                                          CPO_DTL_LINE_NUM
            , DCD.CPO_DTL_LINE_SUB_NUM                                      CPO_DTL_LINE_SUB_NUM
            , DCD.DPLY_LINE_NUM                                             DPLY_LINE_NUM
            , DECODE(DCD.SBST_MDSE_CD, null, DCD.MDSE_CD, DCD.ORIG_MDSE_CD) MDSE_CD
            , DECODE(DCD.SBST_MDSE_CD, null, DCD.MDSE_NM, DCD.ORIG_MDSE_NM) MDSE_NM
            , DCD.MDSE_DESC_SHORT_TXT                                       MDSE_DESC_SHORT_TXT
            , DCD.ORD_CUST_UOM_QTY                                          ORD_CUST_UOM_QTY
            , NVL(DCD.CPO_DTL_DEAL_GRS_AMT, 0)                              CPO_DTL_DEAL_GRS_AMT
            , DCD.ENT_DEAL_NET_UNIT_PRC_AMT                                 ENT_DEAL_NET_UNIT_PRC_AMT
            , DCD.ORD_LINE_STS_CD                                           ORD_LINE_STS_CD
            , (SELECT
                   ORD_LINE_STS_NM
               FROM
                  (SELECT
                       DOS.ORD_LINE_STS_NM
                   FROM
                       DS_ORD_STS_V DOS
                   WHERE
                           DOS.GLBL_CMPY_CD         = DCD.GLBL_CMPY_CD
                       AND DOS.CPO_ORD_NUM          = DCD.CPO_ORD_NUM
                       AND DOS.CPO_DTL_LINE_NUM     = DCD.CPO_DTL_LINE_NUM
                       AND DOS.CPO_DTL_LINE_SUB_NUM = DCD.CPO_DTL_LINE_SUB_NUM
                       AND DOS.EZCANCELFLAG         = '0'
                   ORDER BY
                       DOS.SHPG_STS_CD NULLS FIRST)
               WHERE
                   ROWNUM = 1)                                              ORD_LINE_STS_DESC_TXT
            <!-- 2016/08/10 S21_NA#12462 Add Start -->
            , CASE WHEN (DCD.SHIP_QTY + DCD.INV_QTY) > 0 AND DCD.ORD_QTY > (DCD.SHIP_QTY + DCD.INV_QTY)
                   THEN 'PARTIALLY SHIPPED'
                   WHEN DCD.ALLOC_QTY > 0 AND DCD.ORD_QTY > DCD.ALLOC_QTY
                   THEN 'PARTIALLY ALLOCATED'
                   ELSE 
              (SELECT
                   ORD_LINE_STS_NM
               FROM
                  (SELECT
                       DOS.ORD_LINE_STS_NM
                   FROM
                       DS_ORD_STS_V DOS
                   WHERE
                           DOS.GLBL_CMPY_CD         = DCD.GLBL_CMPY_CD
                       AND DOS.CPO_ORD_NUM          = DCD.CPO_ORD_NUM
                       AND DOS.CPO_DTL_LINE_NUM     = DCD.CPO_DTL_LINE_NUM
                       AND DOS.CPO_DTL_LINE_SUB_NUM = DCD.CPO_DTL_LINE_SUB_NUM
                       AND DOS.EZCANCELFLAG         = '0'
                   ORDER BY
                       DOS.SHPG_STS_CD NULLS FIRST)
               WHERE
                   ROWNUM = 1)
                   END                                                      ORD_LINE_STS_DPLY_TXT
            <!-- 2016/08/10 S21_NA#12462 Add End -->
            , DCD.DS_ORD_LINE_CATG_CD                                       DS_ORD_LINE_CATG_CD
            , DCD.DS_ORD_LINE_CATG_DESC_TXT                                 DS_ORD_LINE_CATG_DESC_TXT
            , DCD.CR_REBIL_CD                                               CR_REBIL_CD
            , DCD.CR_REBIL_DESC_TXT                                         CR_REBIL_DESC_TXT
            , DCD.RTL_WH_NM                                                 RTL_WH_NM
            , DCD.RTL_SWH_NM                                                RTL_SWH_NM
            , DCD.ORD_LINE_SRC_CD                                           ORD_LINE_SRC_CD
            , PU.PKG_UOM_CD                                                 PKG_UOM_CD
            , DCD.PRC_CATG_NM                                               PRC_CATG_NM
            , DCD.FL_PRC_LIST_CD                                            FL_PRC_LIST_CD
            , DCD.FL_PRC_LIST_NM                                            FL_PRC_LIST_NM
            , DCD.DEAL_PRC_LIST_PRC_AMT                                     DEAL_PRC_LIST_PRC_AMT
            , DCD.SER_NUM                                                   SER_NUM
            , DCD.SBST_MDSE_CD                                              SBST_MDSE_CD 
            , DCD.CUST_MDSE_CD                                              CUST_MDSE_CD
            , DCD.RDD_DT                                                    RDD_DT
            , DCD.PRC_BASE_DT                                               PRC_BASE_DT
            , DCD.CRAT_TS_DPLY_TXT                                          CRAT_TS_DPLY_TXT
            , DCD.ORD_BOOK_TS_DPLY_TXT                                      ORD_BOOK_TS_DPLY_TXT
            , DCD.SHIP_DT_TS_DPLY_TXT                                       SHIP_DT_TS_DPLY_TXT
            , DCD.SCHD_DELY_TS_DPLY_TXT                                     SCHD_DELY_TS_DPLY_TXT
            , DCD.ALLOC_QTY                                                 ALLOC_QTY
            , DCD.SHIP_QTY                                                  SHIP_QTY
            , DCD.INV_QTY                                                   INV_QTY
            , DCD.CANC_QTY                                                  CANC_QTY
            , DCD.CANC_RSN_DESC_TXT                                         CANC_RSN_DESC_TXT
            , DCD.SUPD_LOCK_FLG                                             SUPD_LOCK_FLG
            , DCD.PRC_LIST_EQUIP_CONFIG_NUM                                 PRC_LIST_EQUIP_CONFIG_NUM
            <!-- , DCD.PRC_LIST_EQUIP_CONFIG_NM                                  PRC_LIST_EQUIP_CONFIG_NM--><!-- 2018/07/12 S21_NA#24256 Mod -->
            ,(SELECT PRC_LIST_EQUIP_CONFIG_NM
                FROM 
                   (SELECT PLE.PRC_LIST_EQUIP_CONFIG_NM
                      FROM PRC_LIST_EQUIP PLE
                          ,CPO C
                     WHERE     1 = 1
                          AND DCD.GLBL_CMPY_CD = PLE.GLBL_CMPY_CD
                          AND DCD.PRC_LIST_EQUIP_CONFIG_NUM =
                              PLE.PRC_LIST_EQUIP_CONFIG_NUM
                          AND DCD.PRC_CATG_CD = PLE.PRC_CATG_CD
                          AND PLE.PRC_QLFY_TP_CD = '01'
                          AND DCD.MDSE_CD = PLE.PRC_QLFY_VAL_TXT
                          AND DCD.CUST_UOM_CD = PLE.PKG_UOM_CD
                          AND DCD.GLBL_CMPY_CD = C.GLBL_CMPY_CD
                          AND DCD.CPO_ORD_NUM = C.CPO_ORD_NUM
                          AND PLE.EZCANCELFLAG = '0'
                          AND PLE.DEL_FLG = 'N'
                          AND PLE.EFF_FROM_DT <![CDATA[<=]]> NVL(DCD.CPO_ORD_TS, C.CPO_ORD_TS)
                          AND NVL (PLE.EFF_THRU_DT, '99991231') <![CDATA[>=]]> NVL(DCD.CPO_ORD_TS, C.CPO_ORD_TS)
                    UNION ALL
                    SELECT PLE.PRC_LIST_EQUIP_CONFIG_NM
                      FROM PRC_LIST_EQUIP PLE
                          ,ORD_TAKE_MDSE OTM
                          ,CPO C
                    WHERE     1 = 1
                          AND DCD.GLBL_CMPY_CD = PLE.GLBL_CMPY_CD
                          AND DCD.PRC_LIST_EQUIP_CONFIG_NUM = PLE.PRC_LIST_EQUIP_CONFIG_NUM
                          AND DCD.PRC_CATG_CD = PLE.PRC_CATG_CD
                          AND PLE.PRC_QLFY_TP_CD = '01'
                          AND DCD.GLBL_CMPY_CD = OTM.GLBL_CMPY_CD
                          AND SUBSTR (DCD.MDSE_CD,1,8) = OTM.ORD_TAKE_MDSE_CD
                          AND OTM.EZCANCELFLAG = '0'
                          AND OTM.ORD_TAKE_MDSE_CD = PLE.PRC_QLFY_VAL_TXT
                          AND DCD.CUST_UOM_CD = PLE.PKG_UOM_CD
                          AND DCD.GLBL_CMPY_CD = C.GLBL_CMPY_CD
                          AND DCD.CPO_ORD_NUM = C.CPO_ORD_NUM
                          AND PLE.EZCANCELFLAG = '0'
                          AND PLE.DEL_FLG = 'N'
                          AND PLE.EFF_FROM_DT <![CDATA[<=]]> NVL(DCD.CPO_ORD_TS, C.CPO_ORD_TS)
                          AND NVL(PLE.EFF_THRU_DT, '99991231') <![CDATA[>=]]> NVL(DCD.CPO_ORD_TS, C.CPO_ORD_TS)
             ) WHERE ROWNUM <![CDATA[<=]]> 1)
                  AS PRC_LIST_EQUIP_CONFIG_NM
            , DCD.COA_MDSE_TP_DESC_TXT                                      COA_MDSE_TP_DESC_TXT
            , DCD.COA_PROD_DESC_TXT                                         COA_PROD_DESC_TXT
            , DCD.MDSE_ITEM_CLS_TP_DESC_TXT                                 MDSE_ITEM_CLS_TP_DESC_TXT
            , DCD.MNF_ITEM_CD                                               MNF_ITEM_CD
            , DCD.DPLY_LINE_REF_NUM                                         DPLY_LINE_REF_NUM
            , DCD.CUST_ISS_PO_NUM                                           CUST_ISS_PO_NUM
            , DCD.CUST_ISS_PO_DT                                            CUST_ISS_PO_DT
            , DCD.CPO_SRC_TP_DESC_TXT                                       CPO_SRC_TP_DESC_TXT
            , DCD.ORD_SRC_REF_NUM                                           ORD_SRC_REF_NUM
            , DCD.LINE_SRC_REF_NUM                                          LINE_SRC_REF_NUM
            , DCD.SET_PRNT_LINE_NUM                                         SET_PRNT_LINE_NUM
            , DCD.CMPSN_REVN_NUM                                            CMPSN_REVN_NUM
            , DCD.SET_MDSE_CD                                               SET_MDSE_CD
            , DCD.CRAT_USR_NM                                               CRAT_USR_NM
            , DCD.UPD_TS_DPLY_TXT                                           UPD_TS_DPLY_TXT
            , DCD.UPD_USR_NM                                                UPD_USR_NM
            , NVL(DCD.LINE_DEAL_SUB_TOT_AMT,0)                              LINE_DEAL_SUB_TOT_AMT
            , NVL(DCD.LINE_DEAL_CHRG_AMT,0)                                 LINE_DEAL_CHRG_AMT
            , NVL(DCD.LINE_DEAL_TAX_AMT,0)                                  LINE_DEAL_TAX_AMT
            , NVL(DCD.LINE_DEAL_TOT_AMT,0)                                  LINE_DEAL_TOT_AMT

            , DCD.ORD_QTY                                                   ORD_QTY
            , DCD.CPO_DTL_DEAL_TAX_AMT                                      CPO_DTL_DEAL_TAX_AMT
            , DCD.ISTL_QTY                                                  ISTL_QTY
            , DCD.SHOP_ITEM_FLG                                             SHOP_ITEM_FLG
            , DCD.DS_CPO_CONFIG_PK                                          DS_CPO_CONFIG_PK
            , DCD.BASE_CMPT_FLG                                             BASE_CMPT_FLG
            , DCD.BLLG_ATTRB_CUST_ACCT_CD                                   BLLG_ATTRB_CUST_ACCT_CD
            , DCD.FIRST_BLLG_ATTRB_NM                                       FIRST_BLLG_ATTRB_NM
            , DCD.FIRST_BLLG_ATTRB_VAL_TXT                                  FIRST_BLLG_ATTRB_VAL_TXT
            , DCD.SCD_BLLG_ATTRB_NM                                         SCD_BLLG_ATTRB_NM
            , DCD.SCD_BLLG_ATTRB_VAL_TXT                                    SCD_BLLG_ATTRB_VAL_TXT
            , DCD.THIRD_BLLG_ATTRB_NM                                       THIRD_BLLG_ATTRB_NM
            , DCD.THIRD_BLLG_ATTRB_VAL_TXT                                  THIRD_BLLG_ATTRB_VAL_TXT
            , DCD.FRTH_BLLG_ATTRB_NM                                        FRTH_BLLG_ATTRB_NM
            , DCD.FRTH_BLLG_ATTRB_VAL_TXT                                   FRTH_BLLG_ATTRB_VAL_TXT
            , DCD.FIFTH_BLLG_ATTRB_NM                                       FIFTH_BLLG_ATTRB_NM
            , DCD.FIFTH_BLLG_ATTRB_VAL_TXT                                  FIFTH_BLLG_ATTRB_VAL_TXT
            , DCD.SIXTH_BLLG_ATTRB_NM                                       SIXTH_BLLG_ATTRB_NM
            , DCD.SIXTH_BLLG_ATTRB_VAL_TXT                                  SIXTH_BLLG_ATTRB_VAL_TXT
            , DCD.SPLY_TP_CD                                                SPLY_TP_CD
            , DCD.SPLY_NM                                                   SPLY_NM
            , DCD.SPLY_FIRST_ADDR                                           SPLY_FIRST_ADDR
            , DCD.SPLY_CTY_ADDR                                             SPLY_CTY_ADDR
            , DCD.SPLY_ST_CD                                                SPLY_ST_CD
            , DCD.SPLY_POST_CD                                              SPLY_POST_CD
            , CASE
                WHEN SCM.SVC_CONFIG_MSTR_PK IS NOT NULL THEN 'Y'
                ELSE 'N' END AS CTRL_INPUT
            , DCD.CSMP_PRC_LIST_CD                                          CSMP_PRC_LIST_CD
            , DCD.CHILD_MDSE_QTY                                            CHILD_MDSE_QTY
            <!-- 2016/05/10 S21_NA#7706 Add Start -->
            , DCD.FUNC_SVC_REV_TRNSF_AMT                                    FUNC_SVC_REV_TRNSF_AMT
            , DCD.DEAL_SVC_REV_TRNSF_AMT                                    DEAL_SVC_REV_TRNSF_AMT
            , DCD.FUNC_SVC_COST_TRNSF_AMT                                   FUNC_SVC_COST_TRNSF_AMT
            , DCD.DEAL_SVC_COST_TRNSF_AMT                                   DEAL_SVC_COST_TRNSF_AMT
            , DCD.FUNC_MAN_FL_ADJ_AMT                                       FUNC_MAN_FL_ADJ_AMT
            , DCD.DEAL_MAN_FL_ADJ_AMT                                       DEAL_MAN_FL_ADJ_AMT
            , DCD.FUNC_MAN_REP_REV_ADJ_AMT                                  FUNC_MAN_REP_REV_ADJ_AMT
            , DCD.DEAL_MAN_REP_REV_ADJ_AMT                                  DEAL_MAN_REP_REV_ADJ_AMT
            <!-- 2016/05/10 S21_NA#7706 Add End -->
            <!-- 2016/06/10 S21_NA#8912 Add Start -->
            , DCD.CSMP_CONTR_NUM                                            CSMP_CONTR_NUM
            , DCD.DLR_REF_NUM                                               DLR_REF_NUM
            <!-- 2016/06/10 S21_NA#8912 Add Start -->
            , FUNC_UNIT_FL_PRC_AMT
            <!-- 2019/10/04 S21_NA#51372 Add Start -->
            , DCD.PRNT_VND_NM                                               PRNT_VND_NM
            <!-- 2019/10/04 S21_NA#51372 Add End -->
        FROM
              CPO_DTL_V                   DCD
            , DS_CPO_CONFIG               DCC
            , PKG_UOM                     PU
            , SVC_CONFIG_MSTR             SCM
        WHERE
                DCD.GLBL_CMPY_CD                = #glblCmpyCd#
            AND DCD.CPO_ORD_NUM                 = #cpoOrdNum#
            AND DCD.DS_ORD_POSN_NUM             = #dsOrdPosnNum#
            <isNotNull property="dsCpoLineNum">
            AND DCD.DS_CPO_LINE_NUM             = #dsCpoLineNum#
            </isNotNull>

            AND DCD.GLBL_CMPY_CD                = DCC.GLBL_CMPY_CD
            AND DCD.DS_CPO_CONFIG_PK            = DCC.DS_CPO_CONFIG_PK
            AND DCC.EZCANCELFLAG                = '0'
            AND DCD.GLBL_CMPY_CD                = PU.GLBL_CMPY_CD
            AND DCD.CUST_UOM_CD                 = PU.PKG_UOM_CD
            AND DCD.EZCANCELFLAG                = '0'
            AND PU.EZCANCELFLAG                 = '0'
            AND DCC.GLBL_CMPY_CD                = SCM.GLBL_CMPY_CD(+)
            AND DCC.SVC_CONFIG_MSTR_PK          = SCM.SVC_CONFIG_MSTR_PK(+)
            AND SCM.EZCANCELFLAG(+)             = '0'

        ORDER BY  
              DCD.CPO_ORD_NUM
             ,TO_NUMBER(DCD.DS_ORD_POSN_NUM)
             ,DCD.DS_CPO_LINE_NUM
             ,DCD.DS_CPO_LINE_SUB_NUM NULLS FIRST
    </statement>

    <resultMap id="result.getCpoDtlInfoForCopy"      class="NWAL1500_BSMsg">
        <!-- Line Config Tab ** Line Level -->
        <result property="dsOrdPosnNum_LL"             column="DS_ORD_POSN_NUM"                 javaType="EZDCStringItem"/>
        <result property="dsCpoLineNum_LL"             column="DS_CPO_LINE_NUM"                 javaType="EZDCStringItem"/>
        <result property="dsCpoLineSubNum_LL"          column="DS_CPO_LINE_SUB_NUM"             javaType="EZDCStringItem"/>
        <result property="cpoDtlLineNum_LL"            column="CPO_DTL_LINE_NUM"                javaType="EZDCStringItem"/>
        <result property="cpoDtlLineSubNum_LL"         column="CPO_DTL_LINE_SUB_NUM"            javaType="EZDCStringItem"/>
        <result property="xxLineNum_LL"                column="DPLY_LINE_NUM"                   javaType="EZDCStringItem"/>
        <result property="mdseCd_LL"                   column="MDSE_CD"                         javaType="EZDCStringItem"/>
        <result property="mdseNm_LL"                   column="MDSE_NM"                         javaType="EZDCStringItem"/>
        <result property="mdseDescShortTxt_LL"         column="MDSE_DESC_SHORT_TXT"             javaType="EZDCStringItem"/>
        <result property="ordCustUomQty_LL"            column="ORD_CUST_UOM_QTY"                javaType="EZDCBigDecimalItem"/>
        <result property="entCpoDtlDealSlsAmt_LL"      column="CPO_DTL_DEAL_GRS_AMT"            javaType="EZDCBigDecimalItem"/>
        <result property="entDealNetUnitPrcAmt_LL"     column="ENT_DEAL_NET_UNIT_PRC_AMT"       javaType="EZDCBigDecimalItem"/>
        <result property="ordLineStsCd_LL"             column="ORD_LINE_STS_CD"                 javaType="EZDCStringItem"/>
        <result property="ordLineStsDescTxt_LL"        column="ORD_LINE_STS_DESC_TXT"           javaType="EZDCStringItem"/>
        <result property="ordLineStsDescTxt_LD"        column="ORD_LINE_STS_DPLY_TXT"           javaType="EZDCStringItem"/> <!-- 2016/10/08 S21_NA#12462 ADD -->
        <result property="dsOrdLineCatgCd_LL"          column="DS_ORD_LINE_CATG_CD"             javaType="EZDCStringItem"/>
        <result property="dsOrdLineCatgDescTxt_LL"     column="DS_ORD_LINE_CATG_DESC_TXT"       javaType="EZDCStringItem"/>
        <result property="crRebilCd_LL"                column="CR_REBIL_CD"                     javaType="EZDCStringItem"/>
        <result property="crRebilDescTxt_LL"           column="CR_REBIL_DESC_TXT"               javaType="EZDCStringItem"/>
        <result property="rtlWhNm_LL"                  column="RTL_WH_NM"                       javaType="EZDCStringItem"/>
        <result property="rtlSwhNm_LL"                 column="RTL_SWH_NM"                      javaType="EZDCStringItem"/>
        <result property="ordLineSrcCd_LL"             column="ORD_LINE_SRC_CD"                 javaType="EZDCStringItem"/>
        <result property="custUomCd_LL"                column="PKG_UOM_CD"                      javaType="EZDCStringItem"/>
        <result property="prcCatgNm_LL"                column="PRC_CATG_NM"                     javaType="EZDCStringItem"/>
        <result property="flPrcListCd_LL"              column="FL_PRC_LIST_CD"                  javaType="EZDCStringItem"/>
        <result property="flPrcListNm_LL"              column="FL_PRC_LIST_NM"                  javaType="EZDCStringItem"/>
        <result property="dealPrcListPrcAmt_LL"        column="DEAL_PRC_LIST_PRC_AMT"           javaType="EZDCBigDecimalItem"/>
        <result property="serNum_LL"                   column="SER_NUM"                         javaType="EZDCStringItem"/>
        <result property="sbstMdseCd_LL"               column="SBST_MDSE_CD"                    javaType="EZDCStringItem"/>
        <result property="custMdseCd_LL"               column="CUST_MDSE_CD"                    javaType="EZDCStringItem"/>
        <result property="rddDt_LL"                    column="RDD_DT"                          javaType="EZDCStringItem"/>
        <result property="prcBaseDt_LL"                column="PRC_BASE_DT"                     javaType="EZDCStringItem"/>
        <result property="cratTsDplyTxt_LL"            column="CRAT_TS_DPLY_TXT"                javaType="EZDCStringItem"/>
        <result property="ordBookTsDplyTxt_LL"         column="ORD_BOOK_TS_DPLY_TXT"            javaType="EZDCStringItem"/>
        <result property="shipDtTsDplyTxt_LL"          column="SHIP_DT_TS_DPLY_TXT"             javaType="EZDCStringItem"/>
        <result property="schdDelyTsDplyTxt_LL"        column="SCHD_DELY_TS_DPLY_TXT"           javaType="EZDCStringItem"/>
        <result property="allocQty_LL"                 column="ALLOC_QTY"                       javaType="EZDCStringItem"/>
        <result property="shipQty_LL"                  column="SHIP_QTY"                        javaType="EZDCStringItem"/>
        <result property="invQty_LL"                   column="INV_QTY"                         javaType="EZDCStringItem"/>
        <result property="cancQty_LL"                  column="CANC_QTY"                        javaType="EZDCStringItem"/>
        <result property="cancRsnDescTxt_LL"           column="CANC_RSN_DESC_TXT"               javaType="EZDCStringItem"/>
        <result property="supdLockFlg_LL"              column="SUPD_LOCK_FLG"                   javaType="EZDCStringItem"/>
        <result property="prcListEquipConfigNum_LL"    column="PRC_LIST_EQUIP_CONFIG_NUM"       javaType="EZDCStringItem"/>
        <result property="prcListEquipConfigNm_LL"     column="PRC_LIST_EQUIP_CONFIG_NM"        javaType="EZDCStringItem"/>
        <result property="coaMdseTpDescTxt_LL"         column="COA_MDSE_TP_DESC_TXT"            javaType="EZDCStringItem"/>
        <result property="coaProdDescTxt_LL"           column="COA_PROD_DESC_TXT"               javaType="EZDCStringItem"/>
        <result property="mdseItemClsTpDescTxt_LL"     column="MDSE_ITEM_CLS_TP_DESC_TXT"       javaType="EZDCStringItem"/>
        <result property="mnfItemCd_LL"                column="MNF_ITEM_CD"                     javaType="EZDCStringItem"/>
        <result property="dplyLineRefNum_LL"           column="DPLY_LINE_REF_NUM"               javaType="EZDCStringItem"/>
        <result property="custIssPoNum_LL"             column="CUST_ISS_PO_NUM"                 javaType="EZDCStringItem"/>
        <result property="custIssPoDt_LL"              column="CUST_ISS_PO_DT"                  javaType="EZDCStringItem"/>
        <result property="cpoSrcTpDescTxt_LL"          column="CPO_SRC_TP_DESC_TXT"             javaType="EZDCStringItem"/>
        <result property="lineSrcRefNum_LL"            column="LINE_SRC_REF_NUM"                javaType="EZDCStringItem"/>
        <result property="ordSrcRefNum_LL"             column="ORD_SRC_REF_NUM"                 javaType="EZDCStringItem"/>
        <result property="setPrntLineNum_LL"           column="SET_PRNT_LINE_NUM"               javaType="EZDCStringItem"/>
        <result property="cmpsnRevnNum_LL"             column="CMPSN_REVN_NUM"                  javaType="EZDCStringItem"/>
        <result property="setMdseCd_LL"                column="SET_MDSE_CD"                     javaType="EZDCStringItem"/>
        <result property="cratUsrNm_LL"                column="CRAT_USR_NM"                     javaType="EZDCStringItem"/>
        <result property="updTsDplyTxt_LL"             column="UPD_TS_DPLY_TXT"                 javaType="EZDCStringItem"/>
        <result property="updUsrNm_LL"                 column="UPD_USR_NM"                      javaType="EZDCStringItem"/>
        <result property="lineDealSubTotAmt_LL"        column="LINE_DEAL_SUB_TOT_AMT"           javaType="EZDCBigDecimalItem"/>
        <result property="lineDealChrgAmt_LL"          column="LINE_DEAL_CHRG_AMT"              javaType="EZDCBigDecimalItem"/>
        <result property="lineDealTaxAmt_LL"           column="LINE_DEAL_TAX_AMT"               javaType="EZDCBigDecimalItem"/>
        <result property="lineDealTotAmt_LL"           column="LINE_DEAL_TOT_AMT"               javaType="EZDCBigDecimalItem"/>

        <!-- Line Config Tab ** Line Level ** Hidden -->
        <result property="ordQty_LL"                   column="ORD_QTY"                         javaType="EZDCBigDecimalItem"/>
        <result property="cpoDtlDealTaxAmt_LL"         column="CPO_DTL_DEAL_TAX_AMT"            javaType="EZDCBigDecimalItem"/>
        <result property="istlQty_LL"                  column="ISTL_QTY"                        javaType="EZDCStringItem"/>
        <result property="shopItemFlg_LL"              column="SHOP_ITEM_FLG"                   javaType="EZDCStringItem"/>
        <result property="dsCpoConfigPk_LL"            column="DS_CPO_CONFIG_PK"                javaType="EZDCBigDecimalItem"/>
        <result property="baseCmptFlg_LL"              column="BASE_CMPT_FLG"                   javaType="EZDCStringItem"/>
        <result property="bllgAttrbCustAcctCd_LL"      column="BLLG_ATTRB_CUST_ACCT_CD"         javaType="EZDCStringItem"/>
        <result property="firstBllgAttrbNm_LL"         column="FIRST_BLLG_ATTRB_NM"             javaType="EZDCStringItem"/>
        <result property="firstBllgAttrbValTxt_LL"     column="FIRST_BLLG_ATTRB_VAL_TXT"        javaType="EZDCStringItem"/>
        <result property="scdBllgAttrbNm_LL"           column="SCD_BLLG_ATTRB_NM"               javaType="EZDCStringItem"/>
        <result property="scdBllgAttrbValTxt_LL"       column="SCD_BLLG_ATTRB_VAL_TXT"          javaType="EZDCStringItem"/>
        <result property="thirdBllgAttrbNm_LL"         column="THIRD_BLLG_ATTRB_NM"             javaType="EZDCStringItem"/>
        <result property="thirdBllgAttrbValTxt_LL"     column="THIRD_BLLG_ATTRB_VAL_TXT"        javaType="EZDCStringItem"/>
        <result property="frthBllgAttrbNm_LL"          column="FRTH_BLLG_ATTRB_NM"              javaType="EZDCStringItem"/>
        <result property="frthBllgAttrbValTxt_LL"      column="FRTH_BLLG_ATTRB_VAL_TXT"         javaType="EZDCStringItem"/>
        <result property="fifthBllgAttrbNm_LL"         column="FIFTH_BLLG_ATTRB_NM"             javaType="EZDCStringItem"/>
        <result property="fifthBllgAttrbValTxt_LL"     column="FIFTH_BLLG_ATTRB_VAL_TXT"        javaType="EZDCStringItem"/>
        <result property="sixthBllgAttrbNm_LL"         column="SIXTH_BLLG_ATTRB_NM"             javaType="EZDCStringItem"/>
        <result property="sixthBllgAttrbValTxt_LL"     column="SIXTH_BLLG_ATTRB_VAL_TXT"        javaType="EZDCStringItem"/>
        <result property="splyTpCd_LL"                 column="SPLY_TP_CD"                      javaType="EZDCStringItem"/>
        <result property="splyNm_LL"                   column="SPLY_NM"                         javaType="EZDCStringItem"/>
        <result property="splyFirstAddr_LL"            column="SPLY_FIRST_ADDR"                 javaType="EZDCStringItem"/>
        <result property="splyCtyAddr_LL"              column="SPLY_CTY_ADDR"                   javaType="EZDCStringItem"/>
        <result property="splyStCd_LL"                 column="SPLY_ST_CD"                      javaType="EZDCStringItem"/>
        <result property="splyPostCd_LL"               column="SPLY_POST_CD"                    javaType="EZDCStringItem"/>
        <result property="xxYesNoCd_LL"                column="CTRL_INPUT"                      javaType="EZDCStringItem"/><!-- 2016/02/09 S21_NA#3398 Add -->
        <result property="csmpPrcListCd_LL"            column="CSMP_PRC_LIST_CD"                javaType="EZDCStringItem"/> <!-- 2016/03/01 Order Entry #7 Add -->
        <result property="childMdseQty_LL"             column="CHILD_MDSE_QTY"                  javaType="EZDCBigDecimalItem"/>
        <!-- 2016/05/10 S21_NA#7706 Add Start -->
        <result property="funcSvcRevTrnsfAmt_LL"       column="FUNC_SVC_REV_TRNSF_AMT"          javaType="EZDCBigDecimalItem"/>
        <result property="dealSvcRevTrnsfAmt_LL"       column="DEAL_SVC_REV_TRNSF_AMT"          javaType="EZDCBigDecimalItem"/>
        <result property="funcSvcCostTrnsfAmt_LL"      column="FUNC_SVC_COST_TRNSF_AMT"         javaType="EZDCBigDecimalItem"/>
        <result property="dealSvcCostTrnsfAmt_LL"      column="DEAL_SVC_COST_TRNSF_AMT"         javaType="EZDCBigDecimalItem"/>
        <result property="funcManFlAdjAmt_LL"          column="FUNC_MAN_FL_ADJ_AMT"             javaType="EZDCBigDecimalItem"/>
        <result property="dealManFlAdjAmt_LL"          column="DEAL_MAN_FL_ADJ_AMT"             javaType="EZDCBigDecimalItem"/>
        <result property="funcManRepRevAdjAmt_LL"      column="FUNC_MAN_REP_REV_ADJ_AMT"        javaType="EZDCBigDecimalItem"/>
        <result property="dealManRepRevAdjAmt_LL"      column="DEAL_MAN_REP_REV_ADJ_AMT"        javaType="EZDCBigDecimalItem"/>
        <!-- 2016/05/10 S21_NA#7706 Add End -->
        <!-- 2016/06/10 S21_NA#8912 Add Start -->
        <result property="csmpContrNum_LL"             column="CSMP_CONTR_NUM"                  javaType="EZDCStringItem"/>
        <result property="dlrRefNum_LL"                column="DLR_REF_NUM"                     javaType="EZDCStringItem"/>
        <!-- 2016/06/10 S21_NA#8912 Add Start -->
        <result property="funcUnitFlPrcAmt_LL"         column="FUNC_UNIT_FL_PRC_AMT"            javaType="EZDCBigDecimalItem"/>
        <!-- 2019/10/04 S21_NA#51372 Add Start -->
        <result property="prntVndNm_LL"                column="PRNT_VND_NM"                     javaType="EZDCStringItem"/>
        <!-- 2019/10/04 S21_NA#51372 Add End -->
    </resultMap>

    <statement id="getCpoRtrnDtlViewInfoForCopy" parameterClass="Map"  resultMap="result.getCpoRtrnDtlInfoForCopy">
        SELECT  
            <!-- RMA Tab ** Line Level -->
              RD.DS_ORD_POSN_NUM                                            DS_ORD_POSN_NUM
            , RD.DS_CPO_LINE_NUM                                            DS_CPO_LINE_NUM
            , RD.DS_CPO_LINE_SUB_NUM                                        DS_CPO_LINE_SUB_NUM
            , RD.DS_CPO_RTRN_LINE_NUM                                       DS_CPO_RTRN_LINE_NUM
            , RD.DS_CPO_RTRN_LINE_SUB_NUM                                   DS_CPO_RTRN_LINE_SUB_NUM
            , RD.DPLY_LINE_NUM                                              DPLY_LINE_NUM
            , RD.MDSE_CD                                                    MDSE_CD
            , RD.MDSE_NM                                                    MDSE_NM
            , RD.MDSE_DESC_SHORT_TXT                                        MDSE_DESC_SHORT_TXT
            , RD.ORIG_MDSE_CD                                               ORIG_MDSE_CD <!-- QC#26415 2018/06/07 Add -->
            , RD.ORD_CUST_UOM_QTY                                           ORD_CUST_UOM_QTY
            , RD.RTRN_RSN_CD                                                RTRN_RSN_CD
            , NVL(RD.CPO_DTL_DEAL_GRS_AMT, 0)                               CPO_DTL_DEAL_GRS_AMT
            , RD.ENT_DEAL_NET_UNIT_PRC_AMT                                  ENT_DEAL_NET_UNIT_PRC_AMT
            , RD.RTRN_LINE_STS_CD                                           ORD_LINE_STS_CD
            , DOS.ORD_LINE_STS_NM                                           RTRN_LINE_STS_DESC_TXT
            , RD.DS_ORD_LINE_CATG_DESC_TXT                                  DS_ORD_LINE_CATG_DESC_TXT
            , RD.DS_ORD_LINE_CATG_CD                                        DS_ORD_LINE_CATG_CD
            , RD.RTL_WH_NM                                                  RTL_WH_NM
            , RD.RTL_SWH_NM                                                 RTL_SWH_NM
            , RD.CUST_UOM_CD                                                CUST_UOM_CD
            , RD.PRC_CATG_NM                                                PRC_CATG_NM
            , RD.FL_PRC_LIST_NM                                             FL_PRC_LIST_NM
            , RD.DEAL_PRC_LIST_PRC_AMT                                      DEAL_PRC_LIST_PRC_AMT
            , RD.SER_NUM                                                    SER_NUM
            , RD.CUST_MDSE_CD                                               CUST_MDSE_CD
            , RD.RQST_PICK_UP_DT                                            RQST_PICK_UP_DT
            , RD.PRC_BASE_DT                                                PRC_BASE_DT
            , RD.CRAT_TS_DPLY_TXT                                           CRAT_TS_DPLY_TXT
            , RD.ORD_BOOK_TS_DPLY_TXT                                       ORD_BOOK_TS_DPLY_TXT
            , RD.SCHD_PICK_UP_DT_DPLY_TXT                                   SCHD_PICK_UP_DT_DPLY_TXT
            , RD.RCV_TS_DPLY_TXT                                            RCV_TS_DPLY_TXT
            , RD.RTRN_QTY                                                   RTRN_QTY
            , RD.CANC_QTY                                                   CANC_QTY
            , RD.CANC_RSN_DESC_TXT                                          CANC_RSN_DESC_TXT
            , RD.COA_MDSE_TP_DESC_TXT                                       COA_MDSE_TP_DESC_TXT
            , RD.COA_PROD_DESC_TXT                                          COA_PROD_DESC_TXT
            , RD.MDSE_ITEM_CLS_TP_DESC_TXT                                  MDSE_ITEM_CLS_TP_DESC_TXT
            , RD.MNF_ITEM_CD                                                MNF_ITEM_CD
            , RD.DPLY_LINE_REF_NUM                                          DPLY_LINE_REF_NUM
            , RD.CUST_ISS_PO_NUM                                            CUST_ISS_PO_NUM
            , RD.CUST_ISS_PO_DT                                             CUST_ISS_PO_DT
            , RD.CPO_SRC_TP_DESC_TXT                                        CPO_SRC_TP_DESC_TXT
            , RD.ORD_SRC_REF_NUM                                            ORD_SRC_REF_NUM
            , RD.LINE_SRC_REF_NUM                                           LINE_SRC_REF_NUM
            , RD.SET_PRNT_LINE_NUM                                          SET_PRNT_LINE_NUM
            , RD.CMPSN_REVN_NUM                                             CMPSN_REVN_NUM
            , RD.SET_MDSE_CD                                                SET_MDSE_CD
            , RD.CRAT_USR_NM                                                CRAT_USR_NM
            , RD.UPD_TS_DPLY_TXT                                            UPD_TS_DPLY_TXT
            , RD.UPD_USR_NM                                                 UPD_USR_NM
            , NVL(RD.LINE_DEAL_SUB_TOT_AMT,0)                               LINE_DEAL_SUB_TOT_AMT
            , NVL(RD.LINE_DEAL_CHRG_AMT,0)                                  LINE_DEAL_CHRG_AMT
            , NVL(RD.LINE_DEAL_TAX_AMT,0)                                   LINE_DEAL_TAX_AMT
            , NVL(RD.LINE_DEAL_TOT_AMT,0)                                   LINE_DEAL_TOT_AMT
            , RD.HDD_RMV_CD                                                 HDD_RMV_CD

            <!-- RMA Tab ** Line Level ** Hidden -->
            , RD.ORD_QTY                                                    ORD_QTY
            , RD.DS_CPO_RTRN_LINE_NUM                                       DS_CPO_RTRN_LINE_NUM
            , RD.DS_CPO_RTRN_LINE_SUB_NUM                                   DS_CPO_RTRN_LINE_SUB_NUM
            , RD.CPO_DTL_DEAL_TAX_AMT                                       CPO_DTL_DEAL_TAX_AMT
            , RD.ENT_DEAL_NET_UNIT_PRC_AMT * RD.ORD_QTY                     CPO_LINE_TOT_AMT
            , RD.DS_CPO_CONFIG_PK                                           DS_CPO_CONFIG_PK
            , RD.EZUPTIME                                                   EZUPTIME
            , RD.EZUPTIMEZONE                                               EZUPTIMEZONE
            , RD.BLLG_ATTRB_CUST_ACCT_CD                                    BLLG_ATTRB_CUST_ACCT_CD
            , RD.FIRST_BLLG_ATTRB_NM                                        FIRST_BLLG_ATTRB_NM
            , RD.FIRST_BLLG_ATTRB_VAL_TXT                                   FIRST_BLLG_ATTRB_VAL_TXT
            , RD.SCD_BLLG_ATTRB_NM                                          SCD_BLLG_ATTRB_NM
            , RD.SCD_BLLG_ATTRB_VAL_TXT                                     SCD_BLLG_ATTRB_VAL_TXT
            , RD.THIRD_BLLG_ATTRB_NM                                        THIRD_BLLG_ATTRB_NM
            , RD.THIRD_BLLG_ATTRB_VAL_TXT                                   THIRD_BLLG_ATTRB_VAL_TXT
            , RD.FRTH_BLLG_ATTRB_NM                                         FRTH_BLLG_ATTRB_NM
            , RD.FRTH_BLLG_ATTRB_VAL_TXT                                    FRTH_BLLG_ATTRB_VAL_TXT
            , RD.FIFTH_BLLG_ATTRB_NM                                        FIFTH_BLLG_ATTRB_NM
            , RD.FIFTH_BLLG_ATTRB_VAL_TXT                                   FIFTH_BLLG_ATTRB_VAL_TXT
            , RD.SIXTH_BLLG_ATTRB_NM                                        SIXTH_BLLG_ATTRB_NM
            , RD.SIXTH_BLLG_ATTRB_VAL_TXT                                   SIXTH_BLLG_ATTRB_VAL_TXT
            , CASE
                WHEN SCM.SVC_CONFIG_MSTR_PK IS NOT NULL THEN 'Y'
                ELSE 'N' END AS CTRL_INPUT
            , RD.CHILD_MDSE_QTY                                             CHILD_MDSE_QTY
            <!-- 2016/05/10 S21_NA#7706 Add Start -->
            , RD.FUNC_SVC_REV_TRNSF_AMT                                     FUNC_SVC_REV_TRNSF_AMT
            , RD.DEAL_SVC_REV_TRNSF_AMT                                     DEAL_SVC_REV_TRNSF_AMT
            , RD.FUNC_SVC_COST_TRNSF_AMT                                    FUNC_SVC_COST_TRNSF_AMT
            , RD.DEAL_SVC_COST_TRNSF_AMT                                    DEAL_SVC_COST_TRNSF_AMT
            , RD.FUNC_MAN_FL_ADJ_AMT                                        FUNC_MAN_FL_ADJ_AMT
            , RD.DEAL_MAN_FL_ADJ_AMT                                        DEAL_MAN_FL_ADJ_AMT
            , RD.FUNC_MAN_REP_REV_ADJ_AMT                                   FUNC_MAN_REP_REV_ADJ_AMT
            , RD.DEAL_MAN_REP_REV_ADJ_AMT                                   DEAL_MAN_REP_REV_ADJ_AMT
            <!-- 2016/05/10 S21_NA#7706 Add End -->
            <!-- 2016/06/10 S21_NA#8912 Add Start -->
            , RD.CSMP_CONTR_NUM                                             CSMP_CONTR_NUM
            , RD.DLR_REF_NUM                                                DLR_REF_NUM
            <!-- 2016/06/10 S21_NA#8912 Add Start -->
            , FUNC_UNIT_FL_PRC_AMT
        FROM
              DS_CPO_RTRN_DTL_V            RD
            , DS_CPO_CONFIG                DCC
            , PKG_UOM                      PU
            , SVC_CONFIG_MSTR              SCM
            , DS_ORD_STS_V                 DOS
        WHERE
                RD.GLBL_CMPY_CD                = #glblCmpyCd#
            AND RD.CPO_ORD_NUM                 = #cpoOrdNum#
            AND RD.DS_ORD_POSN_NUM             = #dsOrdPosnNum#
            <isNotNull property="dsCpoLineNum">
            AND RD.DS_CPO_LINE_NUM             = #dsCpoLineNum#
            </isNotNull>

            AND RD.GLBL_CMPY_CD                 = DCC.GLBL_CMPY_CD
            AND RD.DS_CPO_CONFIG_PK             = DCC.DS_CPO_CONFIG_PK
            AND DCC.EZCANCELFLAG                = '0'

            AND RD.GLBL_CMPY_CD                 = PU.GLBL_CMPY_CD
            AND RD.CUST_UOM_CD                  = PU.PKG_UOM_CD
            AND RD.EZCANCELFLAG                 = '0'
            AND PU.EZCANCELFLAG                 = '0'

            AND DCC.GLBL_CMPY_CD                = SCM.GLBL_CMPY_CD(+)
            AND DCC.SVC_CONFIG_MSTR_PK          = SCM.SVC_CONFIG_MSTR_PK(+)
            AND SCM.EZCANCELFLAG(+)             = '0'
            AND RD.GLBL_CMPY_CD                 = DOS.GLBL_CMPY_CD
            AND RD.CPO_ORD_NUM                  = DOS.CPO_ORD_NUM
            AND RD.DS_CPO_RTRN_LINE_NUM         = DOS.DS_CPO_RTRN_LINE_NUM
            AND RD.DS_CPO_RTRN_LINE_SUB_NUM     = DOS.DS_CPO_RTRN_LINE_SUB_NUM
            AND DOS.EZCANCELFLAG                = '0'

        ORDER BY  
               TO_NUMBER(RD.DS_ORD_POSN_NUM)   ASC
             , RD.DS_CPO_RTRN_LINE_NUM         ASC
             , RD.DS_CPO_RTRN_LINE_SUB_NUM     ASC
    </statement>


    <resultMap id="result.getCpoRtrnDtlInfoForCopy"       class="NWAL1500_DSMsg">
        <result property="dsOrdPosnNum_RL"             column="DS_ORD_POSN_NUM"                 javaType="EZDCStringItem"/>
        <result property="dsCpoLineNum_RL"             column="DS_CPO_LINE_NUM"                 javaType="EZDCBigDecimalItem"/>
        <result property="dsCpoLineSubNum_RL"          column="DS_CPO_LINE_SUB_NUM"             javaType="EZDCBigDecimalItem"/>
        <result property="cpoDtlLineNum_RL"            column="DS_CPO_RTRN_LINE_NUM"            javaType="EZDCStringItem"/>
        <result property="cpoDtlLineSubNum_RL"         column="DS_CPO_RTRN_LINE_SUB_NUM"        javaType="EZDCStringItem"/>
        <result property="xxLineNum_RL"                column="DPLY_LINE_NUM"                   javaType="EZDCStringItem"/>
        <result property="mdseCd_RL"                   column="MDSE_CD"                         javaType="EZDCStringItem"/>
        <result property="mdseNm_RL"                   column="MDSE_NM"                         javaType="EZDCStringItem"/>
        <result property="mdseDescShortTxt_RL"         column="MDSE_DESC_SHORT_TXT"             javaType="EZDCStringItem"/>
        <result property="origMdseCd_RL"               column="ORIG_MDSE_CD"                    javaType="EZDCStringItem"/>
        <result property="ordCustUomQty_RL"            column="ORD_CUST_UOM_QTY"                javaType="EZDCBigDecimalItem"/>
        <result property="rtrnRsnCd_RL"                column="RTRN_RSN_CD"                     javaType="EZDCStringItem"/>
        <result property="entCpoDtlDealSlsAmt_RL"      column="CPO_DTL_DEAL_GRS_AMT"            javaType="EZDCBigDecimalItem"/>
        <result property="entDealNetUnitPrcAmt_RL"     column="ENT_DEAL_NET_UNIT_PRC_AMT"       javaType="EZDCBigDecimalItem"/>
        <result property="ordLineStsCd_RL"             column="ORD_LINE_STS_CD"                 javaType="EZDCStringItem"/>
        <result property="rtrnLineStsDescTxt_RL"       column="RTRN_LINE_STS_DESC_TXT"          javaType="EZDCStringItem"/>
        <result property="dsOrdLineCatgDescTxt_RL"     column="DS_ORD_LINE_CATG_DESC_TXT"       javaType="EZDCStringItem"/>
        <result property="dsOrdLineCatgCd_RL"          column="DS_ORD_LINE_CATG_CD"             javaType="EZDCStringItem"/>
        <result property="rtlWhNm_RL"                  column="RTL_WH_NM"                       javaType="EZDCStringItem"/>
        <result property="rtlSwhNm_RL"                 column="RTL_SWH_NM"                      javaType="EZDCStringItem"/>
        <result property="custUomCd_RL"                column="CUST_UOM_CD"                     javaType="EZDCStringItem"/>
        <result property="pkgUomDescTxt_RL"            column="PKG_UOM_DESC_TXT"                javaType="EZDCStringItem"/>
        <result property="prcCatgNm_RL"                column="PRC_CATG_NM"                     javaType="EZDCStringItem"/>
        <result property="flPrcListNm_RL"              column="FL_PRC_LIST_NM"                  javaType="EZDCStringItem"/>
        <result property="dealPrcListPrcAmt_RL"        column="DEAL_PRC_LIST_PRC_AMT"           javaType="EZDCBigDecimalItem"/>
        <result property="serNum_RL"                   column="SER_NUM"                         javaType="EZDCStringItem"/>
        <result property="custMdseCd_RL"               column="CUST_MDSE_CD"                    javaType="EZDCStringItem"/>
        <result property="rqstPickUpDt_RL"             column="RQST_PICK_UP_DT"                 javaType="EZDCStringItem"/>
        <result property="prcBaseDt_RL"                column="PRC_BASE_DT"                     javaType="EZDCStringItem"/>
        <result property="cratTsDplyTxt_RL"            column="CRAT_TS_DPLY_TXT"                javaType="EZDCStringItem"/>
        <result property="ordBookTsDplyTxt_RL"         column="ORD_BOOK_TS_DPLY_TXT"            javaType="EZDCStringItem"/>
        <result property="schdPickUpDtDplyTxt_RL"      column="SCHD_PICK_UP_DT_DPLY_TXT"        javaType="EZDCStringItem"/>
        <result property="rcvTsDplyTxt_RL"             column="RCV_TS_DPLY_TXT"                 javaType="EZDCStringItem"/>
        <result property="rtrnQty_RL"                  column="RTRN_QTY"                        javaType="EZDCStringItem"/>
        <result property="cancQty_RL"                  column="CANC_QTY"                        javaType="EZDCStringItem"/>
        <result property="cancRsnDescTxt_RL"           column="CANC_RSN_DESC_TXT"               javaType="EZDCStringItem"/>
        <result property="coaMdseTpDescTxt_RL"         column="COA_MDSE_TP_DESC_TXT"            javaType="EZDCStringItem"/>
        <result property="coaProdDescTxt_RL"           column="COA_PROD_DESC_TXT"               javaType="EZDCStringItem"/>
        <result property="mdseItemClsTpDescTxt_RL"     column="MDSE_ITEM_CLS_TP_DESC_TXT"       javaType="EZDCStringItem"/>
        <result property="mnfItemCd_RL"                column="MNF_ITEM_CD"                     javaType="EZDCStringItem"/>
        <result property="dplyLineRefNum_RL"           column="DPLY_LINE_REF_NUM"               javaType="EZDCStringItem"/>
        <result property="custIssPoNum_RL"             column="CUST_ISS_PO_NUM"                 javaType="EZDCStringItem"/>
        <result property="custIssPoDt_RL"              column="CUST_ISS_PO_DT"                  javaType="EZDCStringItem"/>
        <result property="cpoSrcTpDescTxt_RL"          column="CPO_SRC_TP_DESC_TXT"             javaType="EZDCStringItem"/>
        <result property="lineSrcRefNum_RL"            column="LINE_SRC_REF_NUM"                javaType="EZDCStringItem"/>
        <result property="ordSrcRefNum_RL"             column="ORD_SRC_REF_NUM"                 javaType="EZDCStringItem"/>
        <result property="setPrntLineNum_RL"           column="SET_PRNT_LINE_NUM"               javaType="EZDCStringItem"/>
        <result property="cmpsnRevnNum_RL"             column="CMPSN_REVN_NUM"                  javaType="EZDCStringItem"/>
        <result property="setMdseCd_RL"                column="SET_MDSE_CD"                     javaType="EZDCStringItem"/>
        <result property="cratUsrNm_RL"                column="CRAT_USR_NM"                     javaType="EZDCStringItem"/>
        <result property="updTsDplyTxt_RL"             column="UPD_TS_DPLY_TXT"                 javaType="EZDCStringItem"/>
        <result property="updUsrNm_RL"                 column="UPD_USR_NM"                      javaType="EZDCStringItem"/>
        <result property="lineDealSubTotAmt_RL"        column="LINE_DEAL_SUB_TOT_AMT"           javaType="EZDCBigDecimalItem"/>
        <result property="lineDealChrgAmt_RL"          column="LINE_DEAL_CHRG_AMT"              javaType="EZDCBigDecimalItem"/>
        <result property="lineDealTaxAmt_RL"           column="LINE_DEAL_TAX_AMT"               javaType="EZDCBigDecimalItem"/>
        <result property="lineDealTotAmt_RL"           column="LINE_DEAL_TOT_AMT"               javaType="EZDCBigDecimalItem"/>
        <!-- RMA Tab ** Line Level ** Hidden -->
        <result property="ordQty_RL"                   column="ORD_QTY"                         javaType="EZDCBigDecimalItem"/>
        <result property="prcListEquipConfigNum_RL"    column="PRC_LIST_EQUIP_CONFIG_NUM"       javaType="EZDCStringItem"/>
        <result property="cpoDtlLineNum_RL"            column="DS_CPO_RTRN_LINE_NUM"            javaType="EZDCStringItem"/>
        <result property="cpoDtlLineSubNum_RL"         column="DS_CPO_RTRN_LINE_SUB_NUM"        javaType="EZDCStringItem"/>
        <result property="cpoDtlDealTaxAmt_RL"         column="CPO_DTL_DEAL_TAX_AMT"            javaType="EZDCBigDecimalItem"/>
        <result property="hddRmvCd_RL"                 column="HDD_RMV_CD"                      javaType="EZDCStringItem"/>
        <result property="xxLineTotPrcAmt_RL"          column="CPO_LINE_TOT_AMT"                javaType="EZDCBigDecimalItem"/>
        <result property="ezUpTime_RL"                 column="EZUPTIME"                        javaType="EZDCStringItem"/>
        <result property="ezUpTimeZone_RL"             column="EZUPTIMEZONE"                    javaType="EZDCStringItem"/>
        <result property="dsCpoConfigPk_RL"            column="DS_CPO_CONFIG_PK"                javaType="EZDCBigDecimalItem"/>
        <result property="bllgAttrbCustAcctCd_RL"      column="BLLG_ATTRB_CUST_ACCT_CD"         javaType="EZDCStringItem"/>
        <result property="firstBllgAttrbNm_RL"         column="FIRST_BLLG_ATTRB_NM"             javaType="EZDCStringItem"/>
        <result property="firstBllgAttrbValTxt_RL"     column="FIRST_BLLG_ATTRB_VAL_TXT"        javaType="EZDCStringItem"/>
        <result property="scdBllgAttrbNm_RL"           column="SCD_BLLG_ATTRB_NM"               javaType="EZDCStringItem"/>
        <result property="scdBllgAttrbValTxt_RL"       column="SCD_BLLG_ATTRB_VAL_TXT"          javaType="EZDCStringItem"/>
        <result property="thirdBllgAttrbNm_RL"         column="THIRD_BLLG_ATTRB_NM"             javaType="EZDCStringItem"/>
        <result property="thirdBllgAttrbValTxt_RL"     column="THIRD_BLLG_ATTRB_VAL_TXT"        javaType="EZDCStringItem"/>
        <result property="frthBllgAttrbNm_RL"          column="FRTH_BLLG_ATTRB_NM"              javaType="EZDCStringItem"/>
        <result property="frthBllgAttrbValTxt_RL"      column="FRTH_BLLG_ATTRB_VAL_TXT"         javaType="EZDCStringItem"/>
        <result property="fifthBllgAttrbNm_RL"         column="FIFTH_BLLG_ATTRB_NM"             javaType="EZDCStringItem"/>
        <result property="fifthBllgAttrbValTxt_RL"     column="FIFTH_BLLG_ATTRB_VAL_TXT"        javaType="EZDCStringItem"/>
        <result property="sixthBllgAttrbNm_RL"         column="SIXTH_BLLG_ATTRB_NM"             javaType="EZDCStringItem"/>
        <result property="sixthBllgAttrbValTxt_RL"     column="SIXTH_BLLG_ATTRB_VAL_TXT"        javaType="EZDCStringItem"/>
        <result property="xxYesNoCd_RL"                column="CTRL_INPUT"                      javaType="EZDCStringItem"/>
        <result property="childMdseQty_RL"             column="CHILD_MDSE_QTY"                  javaType="EZDCBigDecimalItem"/>
        <!-- 2016/05/10 S21_NA#7706 Add Start -->
        <result property="funcSvcRevTrnsfAmt_RL"       column="FUNC_SVC_REV_TRNSF_AMT"          javaType="EZDCBigDecimalItem"/>
        <result property="dealSvcRevTrnsfAmt_RL"       column="DEAL_SVC_REV_TRNSF_AMT"          javaType="EZDCBigDecimalItem"/>
        <result property="funcSvcCostTrnsfAmt_RL"      column="FUNC_SVC_COST_TRNSF_AMT"         javaType="EZDCBigDecimalItem"/>
        <result property="dealSvcCostTrnsfAmt_RL"      column="DEAL_SVC_COST_TRNSF_AMT"         javaType="EZDCBigDecimalItem"/>
        <result property="funcManFlAdjAmt_RL"          column="FUNC_MAN_FL_ADJ_AMT"             javaType="EZDCBigDecimalItem"/>
        <result property="dealManFlAdjAmt_RL"          column="DEAL_MAN_FL_ADJ_AMT"             javaType="EZDCBigDecimalItem"/>
        <result property="funcManRepRevAdjAmt_RL"      column="FUNC_MAN_REP_REV_ADJ_AMT"        javaType="EZDCBigDecimalItem"/>
        <result property="dealManRepRevAdjAmt_RL"      column="DEAL_MAN_REP_REV_ADJ_AMT"        javaType="EZDCBigDecimalItem"/>
        <!-- 2016/05/10 S21_NA#7706 Add End -->
        <!-- 2016/06/10 S21_NA#8912 Add Start -->
        <result property="csmpContrNum_RL"             column="CSMP_CONTR_NUM"                  javaType="EZDCStringItem"/>
        <result property="dlrRefNum_RL"                column="DLR_REF_NUM"                     javaType="EZDCStringItem"/>
        <!-- 2016/06/10 S21_NA#8912 Add Start -->
        <result property="funcUnitFlPrcAmt_RL"         column="FUNC_UNIT_FL_PRC_AMT"            javaType="EZDCBigDecimalItem"/>
    </resultMap>
    <statement id="getSalesCreditForConfigOutForCopy" parameterClass="Map" resultMap="result.getSalesCreditOutBoundForCopy">
        SELECT
              CSC.DS_CPO_SLS_CR_PK
            , CSC.DS_ORD_POSN_NUM
            , CSC.DS_CPO_CONFIG_PK
            , CSC.SLS_REP_TOC_CD
            , CSC.SLS_REP_ROLE_TP_CD
            , CSC.SLS_REP_CR_PCT
            , CSC.SLS_CR_QUOT_FLG
            , DCC.CONFIG_CATG_CD

        FROM
               DS_CPO_SLS_CR     CSC
             , DS_CPO_CONFIG     DCC

        WHERE
                CSC.GLBL_CMPY_CD             = #glblCmpyCd#
            AND CSC.CPO_ORD_NUM              = #cpoOrdNum#
            AND CSC.DS_ORD_POSN_NUM          = #dsOrdPosnNum#
            AND CSC.GLBL_CMPY_CD             = DCC.GLBL_CMPY_CD
            AND CSC.CPO_ORD_NUM              = DCC.CPO_ORD_NUM
            AND CSC.DS_CPO_CONFIG_PK         = DCC.DS_CPO_CONFIG_PK
            AND DCC.CONFIG_CATG_CD           = #configCatgCd#
            AND CSC.EZCANCELFLAG             = '0'
            AND DCC.EZCANCELFLAG             = '0'
        ORDER BY
               TO_NUMBER(DCC.DS_ORD_POSN_NUM)     ASC
             , CSC.DS_CPO_SLS_CR_PK               ASC
    </statement>

    <resultMap id="result.getSalesCreditOutBoundForCopy" class="NWAL1500_GCMsg">
        <result property="dsCpoSlsCrPk_GS"            column="DS_CPO_SLS_CR_PK"             javaType="EZDCBigDecimalItem"/>
        <result property="dsOrdPosnNum_GS"            column="DS_ORD_POSN_NUM"              javaType="EZDCStringItem"/>
        <result property="dsCpoConfigPk_GS"           column="DS_CPO_CONFIG_PK"             javaType="EZDCBigDecimalItem"/>
        <result property="slsRepTocCd_GS"             column="SLS_REP_TOC_CD"               javaType="EZDCStringItem"/>
        <result property="slsRepRoleTpCd_GS"          column="SLS_REP_ROLE_TP_CD"           javaType="EZDCStringItem"/>
        <result property="lineBizRoleTpCd_GS"         column="SLS_REP_ROLE_TP_CD"           javaType="EZDCStringItem"/>
        <result property="slsRepCrPct_GS"             column="SLS_REP_CR_PCT"               javaType="EZDCBigDecimalItem"/>
        <result property="slsCrQuotFlg_GS"            column="SLS_CR_QUOT_FLG"              javaType="EZDCStringItem"/>
        <!-- result property="configCatgCd_GS"            column="CONFIG_CATG_CD"               javaType="EZDCStringItem"/ -->
    </resultMap>

    <statement id="getSalesCreditForConfigInForCopy" parameterClass="Map" resultMap="result.getSalesCreditInBoundForCopy">
        SELECT
              CSC.DS_CPO_SLS_CR_PK
            , CSC.DS_ORD_POSN_NUM
            , CSC.DS_CPO_CONFIG_PK
            , CSC.SLS_REP_TOC_CD
            , CSC.SLS_REP_ROLE_TP_CD
            , CSC.SLS_REP_CR_PCT
            , CSC.SLS_CR_QUOT_FLG
            , DCC.CONFIG_CATG_CD

        FROM
               DS_CPO_SLS_CR     CSC
             , DS_CPO_CONFIG     DCC

        WHERE
                CSC.GLBL_CMPY_CD             = #glblCmpyCd#
            AND CSC.CPO_ORD_NUM              = #cpoOrdNum#
            AND CSC.DS_ORD_POSN_NUM          = #dsOrdPosnNum#
            AND CSC.GLBL_CMPY_CD             = DCC.GLBL_CMPY_CD
            AND CSC.CPO_ORD_NUM              = DCC.CPO_ORD_NUM
            AND CSC.DS_CPO_CONFIG_PK         = DCC.DS_CPO_CONFIG_PK
            AND DCC.CONFIG_CATG_CD           = #configCatgCd#
            AND CSC.EZCANCELFLAG             = '0'
            AND DCC.EZCANCELFLAG             = '0'
        ORDER BY
               TO_NUMBER(DCC.DS_ORD_POSN_NUM)     ASC
             , CSC.DS_CPO_SLS_CR_PK               ASC
    </statement>

    <resultMap id="result.getSalesCreditInBoundForCopy" class="NWAL1500_HCMsg">
        <result property="dsCpoSlsCrPk_HS"            column="DS_CPO_SLS_CR_PK"             javaType="EZDCBigDecimalItem"/>
        <result property="dsOrdPosnNum_HS"            column="DS_ORD_POSN_NUM"              javaType="EZDCStringItem"/>
        <result property="dsCpoConfigPk_HS"           column="DS_CPO_CONFIG_PK"             javaType="EZDCBigDecimalItem"/>
        <result property="slsRepTocCd_HS"             column="SLS_REP_TOC_CD"               javaType="EZDCStringItem"/>
        <result property="slsRepRoleTpCd_HS"          column="SLS_REP_ROLE_TP_CD"           javaType="EZDCStringItem"/>
        <result property="lineBizRoleTpCd_HS"         column="SLS_REP_ROLE_TP_CD"           javaType="EZDCStringItem"/>
        <result property="slsRepCrPct_HS"             column="SLS_REP_CR_PCT"               javaType="EZDCBigDecimalItem"/>
        <result property="slsCrQuotFlg_HS"            column="SLS_CR_QUOT_FLG"              javaType="EZDCStringItem"/>
        <!-- result property="configCatgCd_HS"            column="CONFIG_CATG_CD"               javaType="EZDCStringItem"/ -->
    </resultMap>

    <statement id="getPriceInfoOutForCopy" parameterClass="Map" resultMap="result.getPriceInfoForCopy">
        SELECT
              OP.ORD_PRC_CALC_BASE_PK
            , OP.CPO_ORD_NUM
            , OP.CPO_DTL_LINE_NUM
            , OP.CPO_DTL_LINE_SUB_NUM
            , #configCatgCdOutbound#             CONFIG_CATG_CD
            , OP.PRC_COND_TP_CD
            , OP.PRC_DTL_GRP_CD
            , OP.PRC_JRNL_GRP_CD
            , OP.PKG_UOM_CD
            , OP.PRC_COND_UNIT_CD
            , OP.PRC_CALC_METH_CD
            , OP.DS_MDSE_PRC_PK
            , OP.SPEC_COND_PRC_PK
            , OP.FRT_PER_WT_PK
            , OP.PRC_COND_MAN_ENTRY_FLG
            , OP.PRC_COND_MAN_ADD_FLG
            , OP.PRC_COND_MAN_DEL_FLG
            , OP.AUTO_PRC_AMT_RATE
            , OP.MAX_PRC_AMT_RATE
            , OP.MIN_PRC_AMT_RATE
            , OP.MAN_PRC_AMT_RATE
            , OP.CALC_PRC_AMT_RATE
            , OP.UNIT_PRC_AMT
            , OP.AUTO_PRC_CCY_CD
            , PCT.PRC_COND_TP_DESC_TXT
        FROM
              CPO_DTL_V             DCD
            , ORD_PRC_CALC_BASE     OP
            , PRC_COND_TP           PCT
        WHERE
                DCD.GLBL_CMPY_CD            = #glblCmpyCd#
            AND DCD.EZCANCELFLAG            = '0'
            AND DCD.CPO_ORD_NUM             = #cpoOrdNum#
            AND DCD.DS_ORD_POSN_NUM         = #dsOrdPosnNum#
            <isNotNull property="dsCpoLineNum">
            AND DCD.DS_CPO_LINE_NUM         = #dsCpoLineNum#
            </isNotNull>
            AND DCD.GLBL_CMPY_CD            = OP.GLBL_CMPY_CD
            AND DCD.CPO_ORD_NUM             = OP.CPO_ORD_NUM
            AND DCD.CPO_DTL_LINE_NUM        = OP.CPO_DTL_LINE_NUM
            AND DCD.CPO_DTL_LINE_SUB_NUM    = OP.CPO_DTL_LINE_SUB_NUM
            AND OP.EZCANCELFLAG             = '0'
            AND OP.GLBL_CMPY_CD             = PCT.GLBL_CMPY_CD (+)
            AND OP.PRC_COND_TP_CD           = PCT.PRC_COND_TP_CD (+)
            AND PCT.EZCANCELFLAG (+)        = '0'
        ORDER BY
               ORD_PRC_CALC_BASE_PK      ASC
    </statement>

    <statement id="getPriceInfoInForCopy" parameterClass="Map" resultMap="result.getPriceInfoForCopy">
        SELECT
              OP.CPO_RTRN_PRC_CALC_BASE_PK
            , OP.CPO_ORD_NUM
            , OP.DS_CPO_RTRN_LINE_NUM           CPO_DTL_LINE_NUM
            , OP.DS_CPO_RTRN_LINE_SUB_NUM       CPO_DTL_LINE_SUB_NUM
            , #configCatgCdInbound#             CONFIG_CATG_CD
            , OP.PRC_COND_TP_CD
            , OP.PRC_DTL_GRP_CD
            , OP.PRC_JRNL_GRP_CD
            , OP.PKG_UOM_CD
            , OP.PRC_COND_UNIT_CD
            , OP.PRC_CALC_METH_CD
            , OP.DS_MDSE_PRC_PK
            , OP.SPEC_COND_PRC_PK
            , OP.FRT_PER_WT_PK
            , OP.PRC_COND_MAN_ENTRY_FLG
            , OP.PRC_COND_MAN_ADD_FLG
            , OP.PRC_COND_MAN_DEL_FLG
            , OP.AUTO_PRC_AMT_RATE
            , OP.MAX_PRC_AMT_RATE
            , OP.MIN_PRC_AMT_RATE
            , OP.MAN_PRC_AMT_RATE
            , OP.CALC_PRC_AMT_RATE
            , OP.UNIT_PRC_AMT
            , OP.AUTO_PRC_CCY_CD
            , PCT.PRC_COND_TP_DESC_TXT
        FROM
              DS_CPO_RTRN_DTL_V            RD
            , CPO_RTRN_PRC_CALC_BASE       OP
            , PRC_COND_TP                  PCT
        WHERE
                RD.GLBL_CMPY_CD             = #glblCmpyCd#
            AND RD.EZCANCELFLAG             = '0'
            AND RD.CPO_ORD_NUM              = #cpoOrdNum#
            AND RD.DS_ORD_POSN_NUM          = #dsOrdPosnNum#
            <isNotNull property="dsCpoLineNum">
            AND RD.DS_CPO_LINE_NUM          = #dsCpoLineNum#
            </isNotNull>
            AND RD.GLBL_CMPY_CD             = OP.GLBL_CMPY_CD
            AND RD.CPO_ORD_NUM              = OP.CPO_ORD_NUM
            AND RD.DS_CPO_RTRN_LINE_NUM     = OP.DS_CPO_RTRN_LINE_NUM
            AND RD.DS_CPO_RTRN_LINE_SUB_NUM = OP.DS_CPO_RTRN_LINE_SUB_NUM
            AND OP.EZCANCELFLAG              = '0'
            AND OP.GLBL_CMPY_CD              = PCT.GLBL_CMPY_CD (+)
            AND OP.PRC_COND_TP_CD            = PCT.PRC_COND_TP_CD (+)
            AND PCT.EZCANCELFLAG (+)         = '0'
        ORDER BY
               CPO_RTRN_PRC_CALC_BASE_PK      ASC
    </statement>

    <resultMap id="result.getPriceInfoForCopy" class="NWAL1500_ISMsg">
        <result property="ordPrcCalcBasePk_LP"         column="ORD_PRC_CALC_BASE_PK"          javaType="EZDCBigDecimalItem"/>
        <result property="cpoOrdNum_LP"                column="CPO_ORD_NUM"                   javaType="EZDCStringItem"/>
        <result property="cpoDtlLineNum_LP"            column="CPO_DTL_LINE_NUM"              javaType="EZDCStringItem"/>
        <result property="cpoDtlLineSubNum_LP"         column="CPO_DTL_LINE_SUB_NUM"          javaType="EZDCStringItem"/>
        <result property="configCatgCd_LP"             column="CONFIG_CATG_CD"                javaType="EZDCStringItem"/>
        <result property="prcCondTpCd_LP"              column="PRC_COND_TP_CD"                javaType="EZDCStringItem"/>
        <result property="prcDtlGrpCd_LP"              column="PRC_DTL_GRP_CD"                javaType="EZDCStringItem"/>
        <result property="prcJrnlGrpCd_LP"             column="PRC_JRNL_GRP_CD"               javaType="EZDCStringItem"/>
        <result property="pkgUomCd_LP"                 column="PKG_UOM_CD"                    javaType="EZDCStringItem"/>
        <result property="prcCondUnitCd_LP"            column="PRC_COND_UNIT_CD"              javaType="EZDCStringItem"/>
        <result property="prcCalcMethCd_LP"            column="PRC_CALC_METH_CD"              javaType="EZDCStringItem"/>
        <result property="dsMdsePrcPk_LP"              column="DS_MDSE_PRC_PK"                javaType="EZDCBigDecimalItem"/>
        <result property="specCondPrcPk_LP"            column="SPEC_COND_PRC_PK"              javaType="EZDCBigDecimalItem"/>
        <result property="frtPerWtPk_LP"               column="FRT_PER_WT_PK"                 javaType="EZDCBigDecimalItem"/>
        <result property="prcCondManEntryFlg_LP"       column="PRC_COND_MAN_ENTRY_FLG"        javaType="EZDCStringItem"/>
        <result property="prcCondManAddFlg_LP"         column="PRC_COND_MAN_ADD_FLG"          javaType="EZDCStringItem"/>
        <result property="prcCondManDelFlg_LP"         column="PRC_COND_MAN_DEL_FLG"          javaType="EZDCStringItem"/>
        <result property="autoPrcAmtRate_LP"           column="AUTO_PRC_AMT_RATE"             javaType="EZDCBigDecimalItem"/>
        <result property="maxPrcAmtRate_LP"            column="MAX_PRC_AMT_RATE"              javaType="EZDCBigDecimalItem"/>
        <result property="minPrcAmtRate_LP"            column="MIN_PRC_AMT_RATE"              javaType="EZDCBigDecimalItem"/>
        <result property="manPrcAmtRate_LP"            column="MAN_PRC_AMT_RATE"              javaType="EZDCBigDecimalItem"/>
        <result property="calcPrcAmtRate_LP"           column="CALC_PRC_AMT_RATE"             javaType="EZDCBigDecimalItem"/>
        <result property="unitPrcAmt_LP"               column="UNIT_PRC_AMT"                  javaType="EZDCBigDecimalItem"/>
        <result property="autoPrcCcyCd_LP"             column="AUTO_PRC_CCY_CD"               javaType="EZDCStringItem"/>
        <result property="prcCondTpDescTxt_LP"         column="PRC_COND_TP_DESC_TXT"          javaType="EZDCStringItem"/>
    </resultMap>

    <statement id="getCpoForChangeOrderModification" parameterClass="Map" resultClass="Map">
        SELECT
                C.CPO_SRC_TP_CD
               ,C.ORD_HDR_STS_CD
               ,C.DS_ORD_CATG_CD
               ,C.DS_ORD_TP_CD
               ,C.DS_ORD_RSN_CD
        FROM
                CPO C
        WHERE
                C.GLBL_CMPY_CD             = #glblCmpyCd#
            AND C.EZCANCELFLAG             = '0'
            AND C.CPO_ORD_NUM              = #cpoOrdNum#
    </statement>

    <statement id="checkEnableChangeOrderModification" parameterClass="Map" resultClass="BigDecimal">
        SELECT
                COUNT(*)
        FROM
                ORD_CATG_BIZ_CTX OCBC
        WHERE
                OCBC.GLBL_CMPY_CD             = #glblCmpyCd#
            AND OCBC.EZCANCELFLAG             = '0'
            AND OCBC.ORD_CATG_CTX_TP_CD       = #ordCatgCtxTpCd#
            AND OCBC.FIRST_BIZ_CTX_ATTRB_TXT  = #cpoSrcTpCd#
            AND
            (
               (    OCBC.DS_ORD_CATG_CD       IS NULL
                AND OCBC.DS_ORD_TP_CD         IS NULL
                AND OCBC.DS_ORD_RSN_CD        IS NULL)
              OR
               (    OCBC.DS_ORD_CATG_CD       = #dsOrdCatgCd#
                AND OCBC.DS_ORD_TP_CD         IS NULL
                AND OCBC.DS_ORD_RSN_CD        IS NULL)
              OR
               (    OCBC.DS_ORD_CATG_CD       = #dsOrdCatgCd#
                AND OCBC.DS_ORD_TP_CD         = #dsOrdTpCd#
                AND OCBC.DS_ORD_RSN_CD        IS NULL)
              <isNotNull property="dsOrdRsnCd">       -- 2016/03/23 S21_NA5918
              OR
               (    OCBC.DS_ORD_CATG_CD       = #dsOrdCatgCd#
                AND OCBC.DS_ORD_TP_CD         = #dsOrdTpCd#
                AND OCBC.DS_ORD_RSN_CD        = #dsOrdRsnCd#)
              </isNotNull>
            )
    </statement>


    <statement id="cntBackOrderForItem" parameterClass="Map" resultClass="BigDecimal">
        SELECT
                COUNT(*)
        FROM
                CPO_DTL  DCD
               ,SHPG_PLN    SP
        WHERE
                DCD.GLBL_CMPY_CD         = #glblCmpyCd#
            AND DCD.EZCANCELFLAG         = '0'
            AND DCD.CPO_ORD_NUM          = #cpoOrdNum#
            AND DCD.DS_ORD_POSN_NUM      = #dsOrdPosnNum#
            <isNotNull property="cpoDtlLineNum">
            AND DCD.CPO_DTL_LINE_NUM      = #cpoDtlLineNum#
            </isNotNull>
            <isNotNull property="cpoDtlLineSubNum">
            AND DCD.CPO_DTL_LINE_SUB_NUM  = #cpoDtlLineSubNum#
            </isNotNull>
            AND DCD.GLBL_CMPY_CD         = SP.GLBL_CMPY_CD
            AND DCD.CPO_ORD_NUM          = SP.TRX_HDR_NUM
            AND DCD.CPO_DTL_LINE_NUM     = SP.TRX_LINE_NUM
            AND DCD.CPO_DTL_LINE_SUB_NUM = SP.TRX_LINE_SUB_NUM
            AND SP.SHPG_STS_CD NOT IN 
            <iterate property="shpgStsList" var="shpgStsCd[]" open="(" close=")" conjunction=",">
               #shpgStsCd[]#
            </iterate>
    </statement>

    <statement id="cntBackOrderForRMA" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            COUNT(*)
        FROM
            DS_CPO_RTRN_DTL DCRD
        WHERE
                DCRD.GLBL_CMPY_CD         = #glblCmpyCd#
            AND DCRD.EZCANCELFLAG         = '0'
            AND DCRD.CPO_ORD_NUM          = #cpoOrdNum#
            AND DCRD.DS_ORD_POSN_NUM      = #dsOrdPosnNum#
            <isNotNull property="dsCpoRtrnLineNum">
            AND DCRD.DS_CPO_RTRN_LINE_NUM = #dsCpoRtrnLineNum#
            </isNotNull>
            <isNotNull property="dsCpoRtrnLineSubNum">
            AND DCRD.DS_CPO_RTRN_LINE_SUB_NUM = #dsCpoRtrnLineSubNum#
            </isNotNull>
            AND DCRD.RTRN_LINE_STS_CD NOT IN 
            <iterate property="rtrnLineStsList" var="rtrnLineStsCd[]" open="(" close=")" conjunction=",">
                #rtrnLineStsCd[]#
            </iterate>
    </statement>

    <statement id="getDropShipInfo" parameterClass="Map" resultClass="Map">
        SELECT
                STC.SHIP_TO_CUST_CD
               ,STC.FIRST_LINE_ADDR
               ,STC.SCD_LINE_ADDR
               ,STC.THIRD_LINE_ADDR
               ,STC.FRTH_LINE_ADDR
               ,STC.FIRST_REF_CMNT_TXT
               ,STC.SCD_REF_CMNT_TXT
               ,STC.CTY_ADDR
               ,STC.ST_CD
               ,STC.POST_CD
               ,STC.PROV_NM
               ,STC.CTRY_CD
               ,C.CNTY_NM
               ,(
                 CASE WHEN STC.FIRST_LINE_ADDR IS NOT NULL THEN
                     STC.FIRST_LINE_ADDR || ' ' ||
                     STC.SCD_LINE_ADDR   || ' ' ||
                     STC.THIRD_LINE_ADDR || ' ' ||
                     STC.FRTH_LINE_ADDR  || ' ' ||
                     STC.CTY_ADDR        || ',' ||
                     STC.ST_CD           || ' ' ||
                     STC.POST_CD
                 END)                  AS SHIP_TO_ADDR
               <!-- QC#26151 -->
                ,STC.SELL_TO_CUST_CD   AS SHIP_TO_ACCT_CD
                ,STC.DS_ACCT_NM        AS SHIP_TO_ACCT_NM
        FROM
                SHIP_TO_CUST STC
               ,CNTY         C
        WHERE
                STC.GLBL_CMPY_CD        = #glblCmpyCd#
            AND STC.EZCANCELFLAG        = '0'
            AND STC.SHIP_TO_CUST_CD     = #shipToCustCd#
            AND STC.RGTN_STS_CD         = #rgtnStsCd#
            AND STC.GLBL_CMPY_CD        = C.GLBL_CMPY_CD(+)
            AND STC.EZCANCELFLAG        = C.EZCANCELFLAG(+)
            AND STC.CNTY_PK             = C.CNTY_PK(+)
    </statement>

    <statement id="getOrdCatgBizCtx" parameterClass="Map" resultClass="String">
        SELECT 
                #flgY#
          FROM
                ORD_CATG_BIZ_CTX OCBC
         WHERE
                OCBC.GLBL_CMPY_CD        = #glblCmpyCd#
            AND OCBC.EZCANCELFLAG        = '0'
            AND OCBC.ORD_CATG_CTX_TP_CD  = #ordCatgCtxTpCd#
        <isNotNull property="dsOrdCatgCd">
            AND (OCBC.DS_ORD_CATG_CD = #dsOrdCatgCd# OR OCBC.DS_ORD_CATG_CD IS NULL)
        </isNotNull>
        <isNull property="dsOrdCatgCd">
            AND OCBC.DS_ORD_CATG_CD IS NULL
        </isNull>
        <isNotNull property="dsOrdTpCd">
            AND (OCBC.DS_ORD_TP_CD = #dsOrdTpCd# OR OCBC.DS_ORD_TP_CD IS NULL)
        </isNotNull>
        <isNull property="dsOrdTpCd">
            AND OCBC.DS_ORD_TP_CD IS NULL
        </isNull>
    </statement>

    <statement id="getPrcCatgCdList" parameterClass="Map" resultClass="String">
        SELECT
            PC.PRC_CATG_CD AS PRC_CATG_CD
        FROM
            PRC_CATG PC
        WHERE
            PC.GLBL_CMPY_CD     = #glblCmpyCd#
            AND PC.PRC_CATG_NM  LIKE #prcCatgNm#
            AND PC.EZCANCELFLAG = '0'
    </statement>

<!-- QC#14698 Add Start -->
    <statement id="getShpgPlnList" parameterClass="Map" resultClass="Map">
        SELECT
            SP.SHPG_PLN_NUM
           ,SP.EZUPTIME
           ,SP.EZUPTIMEZONE
        FROM
            SHPG_PLN SP
        WHERE
            SP.GLBL_CMPY_CD     = #glblCmpyCd#
            AND SP.TRX_HDR_NUM  = #cpoOrdNum#
            AND SP.EZCANCELFLAG = '0'
    </statement>
<!-- QC#14698 Add End -->
<!-- QC#7700 Add Start -->
    <statement id="countOrdEntryCancelNotAvailable" parameterClass="Map" resultClass="BigDecimal">
        SELECT 
            COUNT(OCBC.ORD_CATG_BIZ_CTX_PK)
        FROM
            ORD_CATG_BIZ_CTX OCBC
       WHERE
           OCBC.GLBL_CMPY_CD        = #glblCmpyCd#
       AND OCBC.EZCANCELFLAG        = '0'
       AND OCBC.ORD_CATG_CTX_TP_CD  = #ordCatgCtxTpCd#
        <isNotNull property="dsOrdCatgCd">
            AND (OCBC.DS_ORD_CATG_CD = #dsOrdCatgCd# OR OCBC.DS_ORD_CATG_CD IS NULL)
        </isNotNull>
        <isNull property="dsOrdCatgCd">
            AND OCBC.DS_ORD_CATG_CD IS NULL
        </isNull>
        <isNotNull property="dsOrdTpCd">
            AND (OCBC.DS_ORD_TP_CD = #dsOrdTpCd# OR OCBC.DS_ORD_TP_CD IS NULL)
        </isNotNull>
        <isNull property="dsOrdTpCd">
            AND OCBC.DS_ORD_TP_CD IS NULL
        </isNull> 
    </statement>
<!-- QC#7700 Add End -->

<!-- QC#15463 Add Start -->
    <statement id="getSvcAmount" parameterClass="Map" resultClass="Map">
<!-- 2017/05/18 S21_NA#Review structure Lv.2 RS#8336 Mod Start -->
<!--         SELECT NVL(SUM (CSD.TOT_BASE_PRC_FUNC_AMT),0) AS CPO_SVC_DEAL_NET_AMT, -->
<!--                NVL(SUM (CTAX.DEAL_CPO_SVC_TAX_AMT),0) AS CPO_SVC_DEAL_TAX_AMT -->
<!--           FROM CPO_SVC CS, -->
<!--                CPO_SVC_DTL CSD, -->
<!--                CPO_SVC_PRC_TAX_DTL CTAX -->
<!--          WHERE     CS.GLBL_CMPY_CD      = #glblCmpyCd# -->
<!--                AND CS.EZCANCELFLAG      = '0' -->
<!--                AND CS.REF_CPO_ORD_NUM   = #cpoOrdNum# -->
<!--                AND CS.GLBL_CMPY_CD      = CSD.GLBL_CMPY_CD -->
<!--                AND CS.EZCANCELFLAG      = CSD.EZCANCELFLAG -->
<!--                AND CS.CPO_SVC_PK        = CSD.CPO_SVC_PK -->
<!--                AND CSD.BILL_WITH_EQUIP_FLG = #billWithEquipFlg# -->
<!--                AND CSD.GLBL_CMPY_CD     = CTAX.GLBL_CMPY_CD(+) -->
<!--                AND CSD.EZCANCELFLAG     = CTAX.EZCANCELFLAG(+) -->
<!--                AND CSD.CPO_SVC_DTL_PK   = CTAX.CPO_SVC_DTL_PK(+) -->
        SELECT CV.CPO_SVC_DEAL_NET_AMT AS CPO_SVC_DEAL_NET_AMT,
               CV.CPO_SVC_DEAL_TAX_AMT AS CPO_SVC_DEAL_TAX_AMT
          FROM CPO_V CV
         WHERE     CV.GLBL_CMPY_CD  = #glblCmpyCd#
               AND CV.CPO_ORD_NUM   = #cpoOrdNum#
<!-- 2017/05/18 S21_NA#Review structure Lv.2 RS#8336 Mod End -->
    </statement>
<!-- QC#15463 Add End -->

    <!-- 2017/05/15 S21_NA#Review structure Lv.2 RS#8335 Del Start -->
    <!-- 2017/04/25 S21_NA#Review structure Lv.2 Del Start -->
    <!-- 2016/10/11 S21_NA#7924-2 Add Start -->
    <!-- statement id="getCpoSvcInfoByCpoOrdNum" parameterClass="Map" resultMap="result.getCpoSvcInfoByCpoOrdNum" -->
<!--         SELECT -->
<!--              CS.GLBL_CMPY_CD -->
<!--             ,CS.CPO_SVC_PK -->
<!--             ,CS.REF_CPO_ORD_NUM -->
<!--         FROM -->
<!--             CPO_SVC              CS -->
<!--         WHERE -->
<!--                 CS.GLBL_CMPY_CD     = #glblCmpyCd# -->
<!--             AND CS.REF_CPO_ORD_NUM  = #cpoOrdNum# -->
<!--             AND CS.EZCANCELFLAG         = '0' -->
    <!--/statement -->
    <!--resultMap id="result.getCpoSvcInfoByCpoOrdNum" class="CPO_SVCTMsg" noCheckSet="True" -->
        <!--result property="glblCmpyCd"               column="GLBL_CMPY_CD"                       javaType="EZDTStringItem"/ -->
        <!--result property="cpoSvcPk"                 column="CPO_SVC_PK"                         javaType="EZDTBigDecimalItem"/ -->
        <!--result property="refCpoOrdNum"             column="REF_CPO_ORD_NUM"                    javaType="EZDTStringItem"/ -->
    <!--/resultMap -->

    <!--statement id="getMaxBizProcPk" parameterClass="Map" resultClass="BigDecimal" -->
<!--         SELECT -->
<!--              MAX(BIZ_PROC_LOG_PK) BIZ_PROC_LOG_PK -->
<!--         FROM -->
<!--             BIZ_PROC_LOG BPL -->
<!--         WHERE -->
<!--                 BPL.SUB_SYS_ID      = #subSysId# -->
<!--             AND BPL.PROC_ID         = #procId# -->
<!--             AND BPL.EVENT_ID        LIKE #eventId# -->
<!--             AND BPL.DOC_TP_CD       = #docTpCd# -->
<!--             <isNotNull property="docId"> -->
<!--                 AND BPL.DOC_ID          = #docId# -->
<!--             </isNotNull> -->
<!--             AND BPL.PRNT_DOC_ID     = #cpoOrdNum# -->
<!--             AND BPL.EZUPUSERID      = #userId# -->
<!--             AND BPL.EZUPTIME        <![CDATA[>=]]> #ezUptime# -->
<!--             AND BPL.EZCANCELFLAG    = '0' -->
    <!-- /statement -->
    <!-- 2016/10/11 S21_NA#7924-2 Add End -->
    <!-- 2017/04/25 S21_NA#Review structure Lv.2 Del End -->
    <!-- 2017/05/15 S21_NA#Review structure Lv.2 RS#8335 Del End -->
    <statement id="getRtlWh" parameterClass="Map" resultClass="Map">
        SELECT DISTINCT
              SWH.RTL_WH_CD
            , SWH.RTL_SWH_CD
        FROM
             RTL_SWH SWH
        WHERE
                SWH.GLBL_CMPY_CD = #glblCmpyCd#
            AND SWH.INVTY_LOC_CD = #invtyLocCd#
            AND SWH.EZCANCELFLAG = '0'
    </statement>

    <!-- 2017/11/02 S21_NA#20146 Add Start -->
    <statement id="getSalesRepList" parameterClass="Map" resultClass="Map">
        SELECT 
            T.TOC_NM
            ,CE.COA_EXTN_CD
            ,CE.COA_EXTN_DESC_TXT
            ,CB.COA_BR_CD
            ,CB.COA_BR_DESC_TXT
            ,CC.COA_CC_CD
            ,CC.COA_CC_DESC_TXT
            ,T.TOC_CD
            ,SP.PSN_NUM
        FROM 
            TOC T
            ,COA_EXTN CE
            ,COA_BR   CB
            ,COA_CC   CC
            ,ORG_FUNC_ASG OFA
            ,S21_PSN SP
        WHERE 
                T.GLBL_CMPY_CD        = #glblCmpyCd#
            AND T.EZCANCELFLAG        = '0'
            <isNotNull property="slsRepTocCd">
            AND T.TOC_CD              = #slsRepTocCd#
            </isNotNull>
            AND T.GLBL_CMPY_CD        = OFA.GLBL_CMPY_CD
            AND T.TOC_CD              = OFA.TOC_CD
            AND OFA.EZCANCELFLAG      = '0'
            AND OFA.GLBL_CMPY_CD      = SP.GLBL_CMPY_CD
            AND OFA.PSN_CD            = SP.PSN_CD
            AND SP.EZCANCELFLAG       = '0'
            AND T.GLBL_CMPY_CD        = CE.GLBL_CMPY_CD (+)
            AND T.COA_EXTN_CD         = CE.COA_EXTN_CD (+)
            AND CE.EZCANCELFLAG (+)   = '0'
            AND T.GLBL_CMPY_CD        = CB.GLBL_CMPY_CD (+)
            AND T.COA_BR_CD           = CB.COA_BR_CD (+)
            AND CB.EZCANCELFLAG (+)   = '0'
            AND T.GLBL_CMPY_CD        = CC.GLBL_CMPY_CD (+)
            AND T.COA_CC_CD           = CC.COA_CC_CD (+)
            AND CC.EZCANCELFLAG (+)   = '0'
    </statement>

    <statement id="getOrdCatgBizCtxFstAttbTxt" parameterClass="Map" resultClass="String">
        SELECT 
                OCBC.FIRST_BIZ_CTX_ATTRB_TXT
          FROM
                ORD_CATG_BIZ_CTX OCBC
         WHERE
                OCBC.GLBL_CMPY_CD        = #glblCmpyCd#
            AND OCBC.EZCANCELFLAG        = '0'
            AND OCBC.ORD_CATG_CTX_TP_CD  = #ordCatgCtxTpCd#
        <isNotNull property="dsOrdCatgCd">
            AND (OCBC.DS_ORD_CATG_CD = #dsOrdCatgCd# OR OCBC.DS_ORD_CATG_CD IS NULL)
        </isNotNull>
        <isNull property="dsOrdCatgCd">
            AND OCBC.DS_ORD_CATG_CD IS NULL
        </isNull>
        <isNotNull property="dsOrdTpCd">
            AND (OCBC.DS_ORD_TP_CD = #dsOrdTpCd# OR OCBC.DS_ORD_TP_CD IS NULL)
        </isNotNull>
        <isNull property="dsOrdTpCd">
            AND OCBC.DS_ORD_TP_CD IS NULL
        </isNull>
    </statement>
    <!-- 2017/11/02 S21_NA#20146 Add End -->
    <!-- 2018/03/20 S21_NA#24840 Add Start -->
    <statement id="getOrdCatgBizCtxScdAttbTxt" parameterClass="Map" resultClass="String">
        SELECT 
                OCBC.SCD_BIZ_CTX_ATTRB_TXT
          FROM
                ORD_CATG_BIZ_CTX OCBC
         WHERE
                OCBC.GLBL_CMPY_CD        = #glblCmpyCd#
            AND OCBC.EZCANCELFLAG        = '0'
            AND OCBC.ORD_CATG_CTX_TP_CD  = #ordCatgCtxTpCd#
        <isNotNull property="dsOrdCatgCd">
            AND (OCBC.DS_ORD_CATG_CD = #dsOrdCatgCd# OR OCBC.DS_ORD_CATG_CD IS NULL)
        </isNotNull>
        <isNull property="dsOrdCatgCd">
            AND OCBC.DS_ORD_CATG_CD IS NULL
        </isNull>
        <isNotNull property="dsOrdTpCd">
            AND (OCBC.DS_ORD_TP_CD = #dsOrdTpCd# OR OCBC.DS_ORD_TP_CD IS NULL)
        </isNotNull>
        <isNull property="dsOrdTpCd">
            AND OCBC.DS_ORD_TP_CD IS NULL
        </isNull>
    </statement>
    <!-- 2018/03/20 S21_NA#24840 Add End -->
    <!-- 2018/04/16 S21_NA#22965 Add Start -->
        <statement id="getInPondWt" parameterClass="Map" resultClass="BigDecimal">
        SELECT
                  IN_POUND_WT
        FROM (
            SELECT
                      P.IN_POUND_WT 
                FROM
                      ALL_MDSE_V M
                    , MDSE_STORE_PKG P 
                WHERE
                    M.GLBL_CMPY_CD     = #glblCmpyCd#
                    AND M.MDSE_CD      = #mdseCd#
                    AND M.EZCANCELFLAG = '0' 
                    AND M.GLBL_CMPY_CD = P.GLBL_CMPY_CD 
                    AND M.MDSE_CD      = P.MDSE_CD 
                    AND P.EZCANCELFLAG = '0'
            UNION ALL
            SELECT
                      P.IN_POUND_WT 
                FROM
                      ALL_MDSE_V M
                    , ORD_TAKE_MDSE O
                    , MDSE_STORE_PKG P 
                WHERE
                    M.GLBL_CMPY_CD     = #glblCmpyCd#
                    AND M.MDSE_CD      = #mdseCd#
                    AND M.EZCANCELFLAG = '0' 
                    AND M.GLBL_CMPY_CD = O.GLBL_CMPY_CD 
                    AND M.MDSE_CD      = O.ORD_TAKE_MDSE_CD 
                    AND O.EZCANCELFLAG = '0'
                    AND O.GLBL_CMPY_CD = P.GLBL_CMPY_CD 
                    AND O.MDSE_CD      = P.MDSE_CD 
                    AND P.EZCANCELFLAG = '0'
        )
        WHERE ROWNUM = 1
    </statement>
    <!-- 2018/04/16 S21_NA#22965 Add End -->

    <!-- 2023/02/07 QC#61010 Add Start -->
    <statement id="getSerialTakeFlag" parameterclass="Map" resultClass="Map">
        SELECT
            AMV.MDSE_CD
           ,AMV.RCV_SER_TAKE_FLG
           ,AMV.SHPG_SER_TAKE_FLG
        FROM
            ALL_MDSE_V AMV
        WHERE
                AMV.GLBL_CMPY_CD = #glblCmpyCd#
            AND AMV.MDSE_CD      = #mdseCd#
            AND AMV.EZCANCELFLAG = '0'
    </statement>
    <!-- 2023/02/07 QC#61010 Add End -->
    <!-- 2018/05/11 S21_NA#22139 Add Start -->
    <statement id="getSplyQuoteNum" parameterclass="Map" resultClass="String">
        SELECT
            SQ.SPLY_QUOTE_NUM
        FROM
            SPLY_QUOTE SQ
        WHERE
                SQ.GLBL_CMPY_CD = #glblCmpyCd#
            AND SQ.CPO_ORD_NUM  = #cpoOrdNum#
            AND SQ.EZCANCELFLAG = '0'
    </statement>
    <!-- 2018/05/11 S21_NA#22139 Add End -->

    <!-- 2018/07/03 QC#26932 Add Start -->
    <statement id="getReturnAuthorizationMailAddress" parameterclass="Map" resultClass="Map">
    SELECT
        DCCP2.CTAC_PSN_EML_ADDR
    FROM
      (
        SELECT
            DCCP.CTAC_PSN_EML_ADDR
        FROM
           DS_CPO_CTAC_PSN   DCCP
          ,DS_CPO_CONFIG     DCC
        WHERE
            DCCP.GLBL_CMPY_CD       = #glblCmpyCd#
        AND DCCP.EZCANCELFLAG       = '0'
        AND DCCP.CPO_ORD_NUM        = #cpoOrdNum#
        AND DCCP.CTAC_PSN_TP_CD     = #ctacPsnTpCd#

        AND DCCP.GLBL_CMPY_CD       = DCC.GLBL_CMPY_CD(+)
        AND DCCP.EZCANCELFLAG       = DCC.EZCANCELFLAG(+)
        AND DCCP.DS_CPO_CONFIG_PK   = DCC.DS_CPO_CONFIG_PK(+)
        AND (DCCP.DS_CPO_CONFIG_PK   IS NULL
              OR DCC.CONFIG_CATG_CD = #configCatgCd#)
        ORDER BY DCC.DS_ORD_POSN_NUM NULLS FIRST, DCCP.DS_CPO_CTAC_PSN_PK
      )DCCP2
    GROUP BY DCCP2.CTAC_PSN_EML_ADDR
    </statement>
    <!-- 2018/07/03 QC#26932 Add End -->
    
    <!-- 2019/10/03 QC#53595 Add Start -->
    <statement id="cntOrdTpCd" parameterClass="Map" resultClass="BigDecimal">
    SELECT 
      COUNT(OD.DS_ORD_TP_CD)
    FROM
      DS_ORD_TP_PROC_DFN OD
    WHERE 
          DS_ORD_TP_CD = #ordTpCd#
      AND OD.TRTY_GRP_TP_TXT = 'IS' 
      AND OD.EZCANCELFLAG = '0'
      AND OD.GLBL_CMPY_CD= #glblCmpyCd#
      AND OD.EFF_FROM_DT &lt;= #slsDt#
      AND (OD.EFF_THRU_DT IS NULL
        OR OD.EFF_THRU_DT &gt;= #slsDt#)
    </statement>

    <statement id="cntAssignedISGroup" parameterClass="Map" resultClass="BigDecimal">
    SELECT 
      COUNT(RESRC.ORG_CD)
    FROM 
      DS_ORG_RESRC_RELN RESRC
    WHERE 
          RESRC.GLBL_CMPY_CD = #glblCmpyCd#
      AND RESRC.EZCANCELFLAG = '0'
      AND RESRC.EZCANCELFLAG = '0'
      AND RESRC.GNRN_TP_CD IN ('2' , '3')
      AND RESRC.PSN_CD = #psnNum#
      AND RESRC.EFF_FROM_DT &lt;= #slsDt#
      AND (RESRC.EFF_THRU_DT IS NULL
        OR RESRC.EFF_THRU_DT &gt;= #slsDt#)
      <!-- 2019/12/07 QC#54670 Add Start -->
      AND NON_SLS_REP_FLG = 'N'
      <!-- 2019/12/07 QC#54670 Add End -->
      AND RESRC.ORG_CD IN (
        SELECT ORG_CD
        FROM DS_ORG_UNIT OU
        WHERE OU.TRTY_GRP_TP_CD = 'IS'
        AND OU.GLBL_CMPY_CD = #glblCmpyCd#
        AND OU.EZCANCELFLAG = '0'
        AND OU.EFF_FROM_DT &lt;= #slsDt#
        AND (OU.EFF_THRU_DT IS NULL
          OR OU.EFF_THRU_DT &gt;= #slsDt#)
      )
    </statement>
    <!-- 2019/10/03 QC#53595 Add End -->

    <!-- 2019/07/18 QC#51327 Add Start -->
    <!-- <statement id="checkCreatedContract" parameterclass="Map" resultClass="Map"> -->
    <!--     SELECT -->
    <!--         CNTD.DS_CONTR_PK -->
    <!--     FROM -->
    <!--             CPO                 DC -->
    <!--          ,  DS_CPO_CONFIG       DCC -->
    <!--          ,  CPO_DTL             DCD -->
    <!--          ,  DS_CONTR_DTL        CNTD -->
    <!--          ,  DS_CONTR            CNT -->
    <!--     WHERE -->
    <!--             DC.GLBL_CMPY_CD           = #glblCmpyCd# -->
    <!--         AND DC.CPO_ORD_NUM            = #cpoOrdNum# -->
    <!--         AND DC.EZCANCELFLAG           = '0' -->
    <!--  -->
    <!--         AND DC.GLBL_CMPY_CD           = DCC.GLBL_CMPY_CD -->
    <!--         AND DC.CPO_ORD_NUM            = DCC.CPO_ORD_NUM -->
    <!--         AND DCC.DS_ORD_POSN_NUM       = #dsOrdPosnNum# -->
    <!--         AND DCC.EZCANCELFLAG          = '0' -->
    <!--  -->
    <!--         AND DCC.GLBL_CMPY_CD          = DCD.GLBL_CMPY_CD -->
    <!--         AND DCC.CPO_ORD_NUM           = DCD.CPO_ORD_NUM -->
    <!--         AND DCC.DS_CPO_CONFIG_PK      = DCD.DS_CPO_CONFIG_PK -->
    <!--         AND DCD.EZCANCELFLAG          = '0' -->
    <!--  -->
    <!--         AND DCD.GLBL_CMPY_CD          = CNTD.GLBL_CMPY_CD -->
    <!--         AND DCD.CPO_ORD_NUM           = CNTD.CPO_ORD_NUM -->
    <!--         AND DCD.CPO_DTL_LINE_NUM      = CNTD.CPO_DTL_LINE_NUM -->
    <!--         AND DCD.CPO_DTL_LINE_SUB_NUM  = CNTD.CPO_DTL_LINE_SUB_NUM -->
    <!--         AND CNTD.EZCANCELFLAG         = '0' -->
    <!--  -->
    <!--         AND CNTD.GLBL_CMPY_CD         = CNT.GLBL_CMPY_CD -->
    <!--         AND CNTD.CPO_ORD_NUM          = CNT.CPO_ORD_NUM -->
    <!--         AND CNTD.DS_CONTR_PK          = CNT.DS_CONTR_PK -->
    <!--         AND CNT.DS_CONTR_STS_CD       &lt;&gt; #dsContrStsCd# -->
    <!--         AND CNT.EZCANCELFLAG          = '0' -->
    <!--  -->
    <!--         AND ROWNUM                    = 1 -->
    <!-- </statement> -->
    <!-- 2019/07/18 QC#51327 Add End -->
</sqlMap>
