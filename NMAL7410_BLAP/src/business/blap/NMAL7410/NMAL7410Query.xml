<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NMAL7410Query">

    <typeAlias alias="NMAL7410_ASMsg"   type="business.blap.NMAL7410.NMAL7410_ASMsg"/>

    <statement id="getSearchResult" parameterClass="Map" resultMap="result.getSearchResult">
        SELECT
            * 
        FROM
            (SELECT
                CPX.CR_LIST_TXT         CR_LIST_TXT
               ,CPX.CR_LIST_GNRN_NUM    CR_LIST_GNRN_NUM
               ,CPX.CSA_PRC_CATG_CD     CSA_PRC_CATG_CD
               ,PC.PRC_CATG_NM          PRC_CATG_NM
               ,CPX.EFF_FROM_DT         EFF_FROM_DT
               ,CPX.EFF_THRU_DT         EFF_THRU_DT
               ,CPX.CSMP_PRC_XREF_PK    CSMP_PRC_XREF_PK
               ,CPX.EZUPTIME            EZUPTIME
               ,CPX.EZUPTIMEZONE        EZUPTIMEZONE
            FROM 
                CSMP_PRC_XREF CPX
               ,PRC_CATG      PC
            WHERE
                CPX.GLBL_CMPY_CD    = #glblCmpyCd#
        <isNotNull property="csmpPrcList">
            AND CPX.CR_LIST_TXT     LIKE #csmpPrcList#
        </isNotNull>
        <isNotNull property="csmpGeneration">
            AND CPX.CR_LIST_GNRN_NUM LIKE #csmpGeneration#
        </isNotNull>
        <isNotNull property="effFromDtFr">
            AND CPX.EFF_FROM_DT     &gt;= #effFromDtFr#
        </isNotNull>
        <isNotNull property="effFromDtTo">
            AND CPX.EFF_FROM_DT     &lt;= #effFromDtTo#
        </isNotNull>
        <isNotNull property="effThruDtFr">
            AND ( CPX.EFF_THRU_DT &gt;= #effThruDtFr# OR CPX.EFF_THRU_DT IS NULL )
        </isNotNull>
        <isNotNull property="effThruDtTo">
            AND ( CPX.EFF_THRU_DT &lt;= #effThruDtTo# OR CPX.EFF_THRU_DT IS NULL )
        </isNotNull>
            AND CPX.EZCANCELFLAG    = '0'
            
            AND CPX.GLBL_CMPY_CD    = PC.GLBL_CMPY_CD
            AND CPX.CSA_PRC_CATG_CD = PC.PRC_CATG_CD
        <isNotNull property="csaPrcList">
            AND PC.PRC_CATG_NM      LIKE #csaPrcList#
        </isNotNull>
            AND PC.EZCANCELFLAG    = '0'
            ORDER BY
                CPX.CR_LIST_TXT
               ,CPX.CR_LIST_GNRN_NUM
               ,CPX.CSA_PRC_CATG_CD
        ) SRC_TBL
        WHERE
            ROWNUM &lt;= #rowNum#
    </statement>

    <resultMap id="result.getSearchResult" class="NMAL7410_ASMsg">
        <result property="crListTxt_A"          column="CR_LIST_TXT"                javaType="EZDCStringItem"/>
        <result property="crListGnrnNum_A"      column="CR_LIST_GNRN_NUM"           javaType="EZDCStringItem"/>
        <result property="csaPrcCatgCd_A"       column="CSA_PRC_CATG_CD"            javaType="EZDCStringItem"/>
        <result property="prcCatgNm_A"          column="PRC_CATG_NM"                javaType="EZDCStringItem"/>
        <result property="effFromDt_A"          column="EFF_FROM_DT"                javaType="EZDCStringItem"/>
        <result property="effThruDt_A"          column="EFF_THRU_DT"                javaType="EZDCStringItem"/>
        <result property="csmpPrcXrefPk_A"      column="CSMP_PRC_XREF_PK"           javaType="EZDCBigDecimalItem"/>
        <result property="ezUpTime_A"           column="EZUPTIME"                   javaType="EZDCStringItem"/>
        <result property="ezUpTimeZone_A"       column="EZUPTIMEZONE"               javaType="EZDCStringItem"/>
    </resultMap>
    
</sqlMap>
