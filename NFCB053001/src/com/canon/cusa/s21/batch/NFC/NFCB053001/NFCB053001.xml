<?xml version="1.0" encoding="UTF-8"?>

<sqlMap namespace="NFCB053001">
    <statement id="getArBatRcptNm" parameterClass="Map">
        SELECT
            A.AR_BAT_RCPT_NM
           ,RCV_FUNC_ID
        FROM
            AR_RCPT_RCV_INTFC A
        WHERE
            A.GLBL_CMPY_CD =  #glblCmpyCd#
        AND A.AR_CUST_ID_STS_CD =  #arCustIdStsNotComp#
        AND (    A.AR_LOCK_BOX_STS_CD = #arLockBoxStsWorkInProgress# 
             OR  A.AR_LOCK_BOX_STS_CD IS NULL )
        AND A.EZCANCELFLAG  =  '0'
        GROUP BY
            A.AR_BAT_RCPT_NM
           ,RCV_FUNC_ID
        ORDER BY
            A.AR_BAT_RCPT_NM
    </statement>

    <statement id="customerCheck" parameterClass="Map">
        SELECT
             SELL_TO_CUST_CD AS PAYER_CUST_CD
            ,SELL_TO_CUST_PK AS DS_ACCT_CUST_PK
        FROM
             SELL_TO_CUST   STC
        WHERE
                STC.GLBL_CMPY_CD     = #glblCmpyCd#
            AND STC.EZCANCELFLAG     = '0'
            AND STC.SELL_TO_CUST_CD  = #cust#
    </statement>
    
    <statement id="getCustomerAccountByMicr" parameterClass="Map">
        SELECT
             DAC.SELL_TO_CUST_CD AS PAYER_CUST_CD
            ,DBA.DS_BANK_ACCT_PK AS CUST_DS_BANK_ACCT_PK
            ,DAC.SELL_TO_CUST_PK AS DS_ACCT_CUST_PK
            ,BAR.EFF_FROM_DT
        FROM
             DS_BANK_ACCT            DBA
            ,DS_CUST_BANK_ACCT_RELN  BAR
            ,SELL_TO_CUST            DAC
        WHERE
                 DBA.GLBL_CMPY_CD        =  #glblCmpyCd#
            AND  REPLACE(DBA.DS_BANK_MICR_NUM,' ','')    =  #custBankMicrNum#
            AND  DBA.DS_BANK_ACCT_TP_CD  =  #dsBankAcctTpCdExternal#
            AND  DBA.DS_BANK_ACCT_PK     =  BAR.DS_BANK_ACCT_PK
            AND  DBA.GLBL_CMPY_CD        =  BAR.GLBL_CMPY_CD
            AND  BAR.EZCANCELFLAG        =  '0'
            AND  BAR.DS_ACCT_CUST_PK     =  DAC.SELL_TO_CUST_PK
            AND  BAR.GLBL_CMPY_CD        =  DAC.GLBL_CMPY_CD
            AND  DAC.EZCANCELFLAG        =  '0'
            AND (BAR.EFF_FROM_DT                    &lt;= #procDt#
            AND  NVL(BAR.EFF_THRU_DT, '99991231')   &gt;= #procDt#)
            AND  DBA.EZCANCELFLAG        =  '0'
            <isNotNull property="arLockBoxCd">
            AND  DBA.AR_LOCK_BOX_CD      =  #arLockBoxCd#
            </isNotNull>
            AND  ROWNUM              &lt;=  2
    </statement>

    <statement id="getCustomerAccountByMicrWODateCond" parameterClass="Map">
        SELECT
             DAC.SELL_TO_CUST_CD AS PAYER_CUST_CD
            ,DBA.DS_BANK_ACCT_PK AS CUST_DS_BANK_ACCT_PK
            ,DAC.SELL_TO_CUST_PK AS DS_ACCT_CUST_PK
            ,BAR.EFF_FROM_DT
        FROM
             DS_BANK_ACCT            DBA
            ,DS_CUST_BANK_ACCT_RELN  BAR
            ,SELL_TO_CUST            DAC
        WHERE
                 DBA.GLBL_CMPY_CD        =  #glblCmpyCd#
            AND  REPLACE(DBA.DS_BANK_MICR_NUM,' ','')    =  #custBankMicrNum#
            AND  DBA.DS_BANK_ACCT_TP_CD  =  #dsBankAcctTpCdExternal#
            AND  DBA.EZCANCELFLAG        =  '0'
            AND  DBA.DS_BANK_ACCT_PK     =  BAR.DS_BANK_ACCT_PK
            AND  DBA.GLBL_CMPY_CD        =  BAR.GLBL_CMPY_CD
            AND  BAR.EZCANCELFLAG        =  '0'
            AND  BAR.DS_ACCT_CUST_PK     =  DAC.SELL_TO_CUST_PK
            AND  BAR.GLBL_CMPY_CD        =  DAC.GLBL_CMPY_CD
            AND  DAC.EZCANCELFLAG        =  '0'
            <isNotNull property="arLockBoxCd">
            AND  DBA.AR_LOCK_BOX_CD      =  #arLockBoxCd#
            </isNotNull>
        ORDER BY BAR.EFF_FROM_DT DESC
    </statement>
    
    <statement id="getBankAccountByMicrAndCustAccount" parameterClass="Map">
        SELECT
            DBA.DS_BANK_ACCT_PK AS CUST_DS_BANK_ACCT_PK
        FROM
             DS_BANK_ACCT            DBA
            ,DS_CUST_BANK_ACCT_RELN  BAR
        WHERE
                 DBA.GLBL_CMPY_CD        =  #glblCmpyCd#
            AND  DBA.DS_BANK_MICR_NUM    =  #custBankMicrNum#
            AND  DBA.DS_BANK_ACCT_TP_CD  =  #dsBankAcctTpCdExternal#
            AND  DBA.DS_BANK_ACCT_PK     =  BAR.DS_BANK_ACCT_PK
            AND  DBA.GLBL_CMPY_CD        =  BAR.GLBL_CMPY_CD
            AND  BAR.DS_ACCT_CUST_PK     =  #dsAcctCustPk#
            AND  BAR.EZCANCELFLAG        =  '0'
            <isNotNull property="arLockBoxCd">
            AND  DBA.AR_LOCK_BOX_CD      =  #arLockBoxCd#
            </isNotNull>
    </statement>
    
    <statement id="getBankAccountByMicr" parameterClass="Map" resultClass="Map">
        SELECT
            DBA.DS_BANK_ACCT_PK AS CUST_DS_BANK_ACCT_PK
           ,BAR.DS_CUST_BANK_ACCT_RELN_PK AS DS_CUST_BANK_ACCT_RELN_PK
        FROM
             DS_BANK_ACCT            DBA
            ,DS_CUST_BANK_ACCT_RELN  BAR
        WHERE
                 DBA.GLBL_CMPY_CD        =  #glblCmpyCd#
            AND  DBA.DS_BANK_MICR_NUM    =  #custBankMicrNum#
            AND  DBA.DS_BANK_ACCT_TP_CD  =  #dsBankAcctTpCdExternal#
            AND  DBA.DS_BANK_ACCT_PK     =  BAR.DS_BANK_ACCT_PK(+)
            AND  DBA.GLBL_CMPY_CD        =  BAR.GLBL_CMPY_CD(+)
            AND  BAR.DS_ACCT_CUST_PK (+) =  #dsAcctCustPk#
            AND  BAR.EZCANCELFLAG(+)     =  '0'
            <isNotNull property="arLockBoxCd">
            AND  DBA.AR_LOCK_BOX_CD      =  #arLockBoxCd#
            </isNotNull>
        ORDER BY 
            DS_CUST_BANK_ACCT_RELN_PK NULLS LAST
    </statement>
    
    <!-- DEL START 2018/02/26 S21_NA#24219 -->
<!--    <statement id="getCustomerAccountByConsolidatedInvNum" parameterClass="Map">-->
<!--        SELECT-->
<!--             A.PAYER_CUST_CD-->
<!--            ,DAC.SELL_TO_CUST_PK AS DS_ACCT_CUST_PK-->
<!--            ,BTC.LOC_NUM-->
<!--        FROM-->
<!--            (   SELECT-->
<!--                   ATB.BILL_TO_CUST_ACCT_CD AS PAYER_CUST_CD-->
<!--                   ,ATB.BILL_TO_CUST_CD-->
<!--                FROM-->
<!--                    AR_TRX_BAL ATB-->
<!--                WHERE-->
<!--                     ATB.GLBL_CMPY_CD      =  #glblCmpyCd#-->
<!--                AND  ATB.GRP_INV_NUM       =  #custInvNum#-->
<!--                AND  ATB.AR_TRX_TP_CD      &lt;&gt; #arTrxTpCdRcpt#-->
<!--                AND  ATB.EZCANCELFLAG      =  '0'-->
<!--                GROUP BY-->
<!--                    ATB.BILL_TO_CUST_ACCT_CD-->
<!--                   ,ATB.BILL_TO_CUST_CD-->
<!--            ) A-->
<!--            ,SELL_TO_CUST DAC-->
<!--            ,BILL_TO_CUST BTC-->
<!--        WHERE-->
<!--                A.PAYER_CUST_CD      =  DAC.SELL_TO_CUST_CD-->
<!--            AND DAC.GLBL_CMPY_CD     =  #glblCmpyCd#-->
<!--            AND DAC.EZCANCELFLAG     =  '0'-->
<!--            AND A.BILL_TO_CUST_CD    =  BTC.BILL_TO_CUST_CD(+)-->
<!--            AND BTC.GLBL_CMPY_CD(+)  =  #glblCmpyCd#-->
<!--            AND BTC.EZCANCELFLAG(+)  =  '0'-->
<!--    </statement>-->
    <!-- DEL END 2018/02/26 S21_NA#24219 -->

    <statement id="getCustomerAccountByInvNum" parameterClass="Map">
        SELECT
             PAYER_CUST_CD
            ,DS_ACCT_CUST_PK
            ,LOC_NUM
            ,TRX_LEVEL
        FROM
            (
             SELECT
                 A.PAYER_CUST_CD
                ,DAC.SELL_TO_CUST_PK AS DS_ACCT_CUST_PK
                ,BTC.LOC_NUM
<!-- ADD Start QC#50202 2019/05/17 -->
                ,A.TRX_LEVEL
                ,ROW_NUMBER() OVER(ORDER BY A.TRX_LEVEL) AS LEVEL_NUM
<!-- ADD End QC#50202 2019/05/17 -->
             FROM
                 (SELECT
                      ATB.BILL_TO_CUST_ACCT_CD AS PAYER_CUST_CD
                     ,ATB.BILL_TO_CUST_CD
                     ,1                        AS TRX_LEVEL
                  FROM
                      AR_TRX_BAL ATB
                  WHERE
                      ATB.GLBL_CMPY_CD      =  #glblCmpyCd#
                  AND ATB.GRP_INV_NUM       =  #custInvNum#
                  AND ATB.AR_TRX_TP_CD      &lt;&gt; #arTrxTpCdRcpt#
                  AND ATB.EZCANCELFLAG      =  '0'
                  GROUP BY
                      ATB.BILL_TO_CUST_ACCT_CD
                     ,ATB.BILL_TO_CUST_CD
                  UNION ALL
                  SELECT
                      ATB.BILL_TO_CUST_ACCT_CD AS PAYER_CUST_CD
                     ,ATB.BILL_TO_CUST_CD
                     ,2                        AS TRX_LEVEL
                  FROM
                      AR_TRX_BAL ATB
                  WHERE
                      ATB.GLBL_CMPY_CD      =  #glblCmpyCd#
                  AND ATB.AR_TRX_NUM        =  #custInvNum#
                  AND ATB.AR_TRX_TP_CD      &lt;&gt; #arTrxTpCdRcpt#
                  AND ATB.EZCANCELFLAG      =  '0'
                  GROUP BY
                      ATB.BILL_TO_CUST_ACCT_CD
                     ,ATB.BILL_TO_CUST_CD
                  UNION ALL
                  SELECT
                      ATB.BILL_TO_CUST_ACCT_CD AS PAYER_CUST_CD
                     ,ATB.BILL_TO_CUST_CD
                     ,3                        AS TRX_LEVEL
                  FROM
                      AR_TRX_BAL ATB
                  WHERE
                      ATB.GLBL_CMPY_CD      =  #glblCmpyCd#
                  AND ATB.SRC_SYS_DOC_NUM   =  #custInvNum#
                  AND ATB.AR_TRX_TP_CD      &lt;&gt; #arTrxTpCdRcpt#
                  AND ATB.EZCANCELFLAG  =  '0'
                  GROUP BY
                      ATB.BILL_TO_CUST_ACCT_CD
                     ,ATB.BILL_TO_CUST_CD
                  UNION ALL
                  SELECT
                     ATB.BILL_TO_CUST_ACCT_CD AS PAYER_CUST_CD
                    ,ATB.BILL_TO_CUST_CD
                    ,4                        AS TRX_LEVEL
                  FROM
                     AR_TRX_BAL ATB
                  WHERE
                      ATB.GLBL_CMPY_CD      =  #glblCmpyCd#
                  AND ATB.AR_CUST_REF_NUM   =  #custInvNum#
                  AND ATB.AR_TRX_TP_CD      &lt;&gt; #arTrxTpCdRcpt#
                  AND ATB.EZCANCELFLAG  =  '0'
                  GROUP BY
                      ATB.BILL_TO_CUST_ACCT_CD
                     ,ATB.BILL_TO_CUST_CD
                 ) A
                ,SELL_TO_CUST DAC
                ,BILL_TO_CUST BTC
             WHERE
                 A.PAYER_CUST_CD      =  DAC.SELL_TO_CUST_CD
             AND DAC.GLBL_CMPY_CD     =  #glblCmpyCd#
             AND DAC.EZCANCELFLAG     =  '0'
             AND A.BILL_TO_CUST_CD    =  BTC.BILL_TO_CUST_CD(+)
             AND BTC.GLBL_CMPY_CD(+)  =  #glblCmpyCd#
             AND BTC.EZCANCELFLAG(+)  =  '0'
             ORDER BY A.TRX_LEVEL
            ) B
<!-- ADD Start QC#50202 2019/05/17 -->
        WHERE 
            B.LEVEL_NUM = 1
<!-- ADD End QC#50202 2019/05/17 -->
    </statement>

    <!-- DEL START 2018/02/26 S21_NA#24219 -->
<!--    <statement id="getCustomerAccountByDocSrcNum" parameterClass="Map">-->
<!--        SELECT-->
<!--             A.PAYER_CUST_CD-->
<!--            ,DAC.SELL_TO_CUST_PK AS DS_ACCT_CUST_PK-->
<!--            ,BTC.LOC_NUM-->
<!--        FROM-->
<!--            (   SELECT-->
<!--                    ATB.BILL_TO_CUST_ACCT_CD AS PAYER_CUST_CD-->
<!--                   ,ATB.BILL_TO_CUST_CD-->
<!--                FROM-->
<!--                    AR_TRX_BAL ATB-->
<!--                WHERE-->
<!--                     ATB.GLBL_CMPY_CD      =  #glblCmpyCd#-->
<!--                AND  ATB.SRC_SYS_DOC_NUM   =  #custInvNum#-->
<!--                AND  ATB.AR_TRX_TP_CD      &lt;&gt; #arTrxTpCdRcpt#-->
<!--                AND  ATB.EZCANCELFLAG  =  '0'-->
<!--                GROUP BY-->
<!--                     ATB.BILL_TO_CUST_ACCT_CD-->
<!--                    ,ATB.BILL_TO_CUST_CD-->
<!--            ) A-->
<!--            ,SELL_TO_CUST DAC-->
<!--            ,BILL_TO_CUST BTC-->
<!--        WHERE-->
<!--                A.PAYER_CUST_CD      =  DAC.SELL_TO_CUST_CD-->
<!--            AND DAC.GLBL_CMPY_CD     =  #glblCmpyCd#-->
<!--            AND DAC.EZCANCELFLAG     =  '0'-->
<!--            AND A.BILL_TO_CUST_CD    =  BTC.BILL_TO_CUST_CD(+)-->
<!--            AND BTC.GLBL_CMPY_CD(+)  =  #glblCmpyCd#-->
<!--            AND BTC.EZCANCELFLAG(+)  =  '0'-->
<!--    </statement>-->
    <!-- DEL END 2018/02/26 S21_NA#24219 -->
    
    <statement id="getBankBranch" parameterClass="Map">
        SELECT
            DBB.BANK_RTE_NUM
           ,DB.DS_BANK_CD
           ,DBB.DS_BANK_BR_PK
        FROM
            DS_BANK_BR DBB
           ,DS_BANK    DB
        WHERE
                 DBB.GLBL_CMPY_CD      =  #glblCmpyCd#
            AND  DBB.BANK_RTE_NUM      =  #custBankRteNum#
            AND  DBB.EZCANCELFLAG      =  '0'
            AND  DBB.DS_BANK_CD        =  DB.DS_BANK_CD
            AND  DBB.GLBL_CMPY_CD      =  DB.GLBL_CMPY_CD
            AND  DB.EZCANCELFLAG       =  '0'
    </statement>
    
    <statement id="countArRcptRcvWrk" parameterClass="Map">
        SELECT
            COUNT(ARRW.PAYER_CUST_CD) AS CNT
        FROM
            AR_RCPT_RCV_WRK ARRW
        WHERE
                 ARRW.GLBL_CMPY_CD      =  #glblCmpyCd#
            AND  ARRW.CHK_30_NUM        =  #custRcptNum#
            AND  ARRW.PAYER_CUST_CD     =  #payerCustCd#
            AND  ARRW.CHK_AMT           =  #custRcptAmt#
            AND  ARRW.EZCANCELFLAG      =  '0'
    </statement>

    <statement id="countArRcpt" parameterClass="Map">
        SELECT
            COUNT(AR.PAYER_CUST_CD) AS CNT
        FROM
            AR_RCPT AR
        WHERE
                 AR.GLBL_CMPY_CD      =  #glblCmpyCd#
            AND  AR.AR_ORG_RCPT_NUM   =  #custRcptNum#
            AND  AR.PAYER_CUST_CD     =  #payerCustCd#
            AND  AR.DEAL_RCPT_AMT     =  #custRcptAmt#
            AND  AR.EZCANCELFLAG      =  '0'
    </statement>

    <statement id="getBankAccoutPK" parameterClass="Map" resultClass="BigDecimal">
        SELECT
             DBA.DS_BANK_ACCT_PK
        FROM
             DS_BANK_ACCT            DBA
        WHERE
                 DBA.GLBL_CMPY_CD                       =  #glblCmpyCd#
            AND  DBA.DS_BANK_MICR_NUM                   =  #custBankMicrNum#
            AND  DBA.EZCANCELFLAG                       =  '0'
            AND (DBA.EFF_FROM_DT                    &lt;= #procDt#
            AND  NVL(DBA.EFF_THRU_DT, '99991231')   &gt;= #procDt#)
        ORDER BY DBA.EFF_FROM_DT DESC
    </statement>

    <statement id="getRelatedCustomer" parameterClass="Map" resultMap="String">
        SELECT
            RELN_DS_ACCT_NUM
        FROM
            DS_ACCT_RELN    DAR
           ,DS_ACCT_RELN_TP ART
        WHERE
            DAR.GLBL_CMPY_CD             = #glblCmpyCd#
        AND DAR.EZCANCELFLAG             = '0'
        AND DAR.GLBL_CMPY_CD             = ART.GLBL_CMPY_CD
        AND DAR.EZCANCELFLAG             = ART.EZCANCELFLAG
        AND DAR.DS_ACCT_NUM              = #payerCustCd#
        AND DAR.DS_ACCT_RELN_BILL_TO_FLG = #flgY#
        AND DAR.DS_ACCT_RELN_TP_CD       = ART.DS_ACCT_RELN_TP_CD
        AND DAR.DS_ACCT_RELN_TP_CD &lt;&gt; #dsAcctRelnTpCd#
        AND DAR.EFF_FROM_DT          &lt;= #slsDt#
        AND (DAR.EFF_THRU_DT &gt;= #slsDt# OR DAR.EFF_THRU_DT IS NULL)
    </statement>
    
    <statement id="getRelatedCustomerMap" parameterClass="Map" resultClass="Map">
        SELECT
            RELN_DS_ACCT_NUM
           ,DATA_TYPE
        FROM
            (SELECT
                 RELN_DS_ACCT_NUM AS RELN_DS_ACCT_NUM
                ,'1'              AS DATA_TYPE
             FROM
                 DS_ACCT_RELN    DAR
                ,DS_ACCT_RELN_TP ART
             WHERE
                 DAR.GLBL_CMPY_CD             = #glblCmpyCd#
             AND DAR.EZCANCELFLAG             = '0'
             AND DAR.GLBL_CMPY_CD             = ART.GLBL_CMPY_CD
             AND DAR.EZCANCELFLAG             = ART.EZCANCELFLAG
             AND DAR.DS_ACCT_NUM              = #payerCustCd#
             AND DAR.DS_ACCT_RELN_BILL_TO_FLG = #flgY#
             AND DAR.DS_ACCT_RELN_TP_CD       = ART.DS_ACCT_RELN_TP_CD
             AND DAR.DS_ACCT_RELN_TP_CD &lt;&gt; #dsAcctRelnTpCd#
             AND DAR.EFF_FROM_DT          &lt;= #slsDt#
             AND (DAR.EFF_THRU_DT &gt;= #slsDt# OR DAR.EFF_THRU_DT IS NULL)
             UNION
             SELECT
                 DS_ACCT_NUM AS RELN_DS_ACCT_NUM
                ,'2'         AS DATA_TYPE
             FROM
                 DS_ACCT_RELN    DAR
                ,DS_ACCT_RELN_TP ART
             WHERE
                 DAR.GLBL_CMPY_CD             = #glblCmpyCd#
             AND DAR.EZCANCELFLAG             = '0'
             AND DAR.GLBL_CMPY_CD             = ART.GLBL_CMPY_CD
             AND DAR.EZCANCELFLAG             = ART.EZCANCELFLAG
             AND DAR.RELN_DS_ACCT_NUM         = #payerCustCd#
             AND DAR.DS_ACCT_RELN_BILL_TO_FLG = #flgY#
             AND DAR.DS_ACCT_RELN_TP_CD       = ART.DS_ACCT_RELN_TP_CD
             AND DAR.DS_ACCT_RELN_TP_CD &lt;&gt; #dsAcctRelnTpCd#
             AND DAR.EFF_FROM_DT          &lt;= #slsDt#
             AND (DAR.EFF_THRU_DT &gt;= #slsDt# OR DAR.EFF_THRU_DT IS NULL)
            )
    </statement>
    <!-- ADD START 2018/02/26 S21_NA#25731 -->
    <statement id="getLineNum" parameterClass="Map" resultClass="Map">
        SELECT
            AR_LOCK_BOX_BAT_LINE_NUM
        FROM
            AR_RCPT_RCV_INTFC
        WHERE
            GLBL_CMPY_CD   = #glblCmpyCd#
        AND
            EZCANCELFLAG   = '0'
        AND
            AR_BAT_RCPT_NM = #arBatRcptNm#
        AND
            RCV_FUNC_ID    = #rcvFuncId#
        GROUP BY
            AR_LOCK_BOX_BAT_LINE_NUM
    </statement>

    <statement id="getArRcptRcvIntfc" parameterClass="Map" resultClass="Map">
        SELECT
             EZTABLEID
            ,EZCANCELFLAG
            ,EZINTIME
            ,EZINTIMEZONE
            ,EZINCOMPANYCODE
            ,EZINUSERID
            ,EZINAPLID
            ,EZUPTIME
            ,EZUPTIMEZONE
            ,EZUPCOMPANYCODE
            ,EZUPUSERID
            ,EZUPAPLID
            ,GLBL_CMPY_CD
            ,AR_RCPT_RCV_INTFC_PK
            ,RCV_FUNC_ID
            ,RCV_DT
            ,DEP_DT
            ,DEP_TM
            ,AR_BAT_RCPT_NM
            ,REM_BANK_RTE_NUM
            ,REM_DS_BANK_ACCT_NUM
            ,REM_DS_BANK_MICR_NUM
            ,REM_DS_BANK_ACCT_PK
            ,CUST_BANK_RTE_NUM
            ,CUST_DS_BANK_ACCT_NUM
            ,CUST_DS_BANK_MICR_NUM
            ,CUST_DS_BANK_ACCT_PK
            ,CUST_ACCT_REF_NUM
            ,PAYER_CUST_CD
            ,BILL_TO_CUST_CD
            ,CUST_RCPT_NUM
            ,VLD_CUST_RCPT_NUM
            ,CUST_RCPT_AMT
            ,CUST_INV_NUM
            ,AR_TRX_NUM
            ,GRP_INV_NUM
            ,CUST_INV_AMT
            ,AR_RCPT_SRC_CD
            ,AR_RCPT_RCV_ERR_FLG
            ,AR_CUST_ID_STS_CD
            ,AR_RCPT_RCV_WRK_CRAT_FLG
            ,AR_LOCK_BOX_STS_CD
            ,AR_LOCK_BOX_FILE_NM
            ,AR_LOCK_BOX_BAT_NUM
            ,AR_LOCK_BOX_BAT_LINE_NUM
            ,AR_LOCK_BOX_BAT_LINE_SQ_NUM
            ,AR_LOCK_BOX_CD
            ,HDR_LOCK_BOX_NUM_TXT
            ,BAT_LOCK_BOX_NUM_TXT
            ,TRAIL_LOCK_BOX_NUM_TXT
            ,AR_LOCK_BOX_FILE_ERR_FLG
            ,INTFC_FILE_REC_CNT
            ,LOCK_BOX_REC_CNT
            ,LOCK_BOX_TOT_AMT
            ,BAT_RCPT_REC_CNT
            ,BAT_RCPT_TOT_AMT
            ,LOCK_BOX_NTFY_STS_CD
        FROM
            AR_RCPT_RCV_INTFC
        WHERE
            GLBL_CMPY_CD   = #glblCmpyCd#
        AND
            EZCANCELFLAG   = '0'
        AND
            AR_BAT_RCPT_NM = #arBatRcptNm#
        AND
            RCV_FUNC_ID    = #rcvFuncId#
        <isNotNull property="lineList">
           <iterate property="lineList" var="lineList[]" open="AND AR_LOCK_BOX_BAT_LINE_NUM IN (" close=")" conjunction=",">
               #lineList[]#
           </iterate>
       </isNotNull>
       ORDER BY 
           AR_RCPT_RCV_INTFC_PK ASC
    </statement>
    <!-- ADD END   2018/02/26 S21_NA#25731 -->

    <!-- START 2021/06/07 G.Delgado [QC#58800,ADD] -->
    <statement id="getCustRcptNumSeqFromArRcptRcvWrk" parameterClass="Map" resultClass="String">
        SELECT
            CHK.CHK_30_NUM
        FROM
            (
                SELECT
                    ARRW.CHK_30_NUM
                   ,LENGTH(ARRW.CHK_30_NUM) AS LEN
                FROM
                    AR_RCPT_RCV_WRK ARRW
                WHERE
                         ARRW.GLBL_CMPY_CD      =  #glblCmpyCd#
                    AND  ARRW.PAYER_CUST_CD     =  #payerCustCd#
                    AND  ARRW.CHK_AMT           =  #custRcptAmt#
                    AND  REGEXP_LIKE(ARRW.CHK_30_NUM, #custRcptNumPtrn#)
                    AND  ARRW.EZCANCELFLAG      =  '0'
                ORDER BY
                    LEN             DESC
                   ,ARRW.CHK_30_NUM DESC
            ) CHK
        WHERE ROWNUM &lt;= 1
    </statement>

    <statement id="getCustRcptNumSeqFromArRcpt" parameterClass="Map" resultClass="String">
        SELECT
            RCPT.AR_ORG_RCPT_NUM
        FROM
            (
                SELECT
                    AR.AR_ORG_RCPT_NUM
                   ,LENGTH(AR.AR_ORG_RCPT_NUM)  AS LEN
                FROM
                    AR_RCPT AR
                WHERE
                         AR.GLBL_CMPY_CD      =  #glblCmpyCd#
                    AND  AR.PAYER_CUST_CD     =  #payerCustCd#
                    AND  AR.DEAL_RCPT_AMT     =  #custRcptAmt#
                    AND  REGEXP_LIKE(AR.AR_ORG_RCPT_NUM, #custRcptNumPtrn#)
                    AND  AR.EZCANCELFLAG      =  '0'
                ORDER BY
                    LEN                 DESC
                   ,AR.AR_ORG_RCPT_NUM  DESC
            ) RCPT
        WHERE ROWNUM &lt;= 1
    </statement>
    <!-- END 2021/06/07 G.Delgado [QC#58800,ADD] -->

    <!-- START 2021/10/18 S.Go [QC#59273,ADD] -->
    <statement id="countArRcptRcvIntfc" parameterClass="Map">
        SELECT
            COUNT(ARRI.PAYER_CUST_CD) AS CNT
        FROM
            AR_RCPT_RCV_INTFC ARRI
        WHERE
                 ARRI.GLBL_CMPY_CD      =  #glblCmpyCd#
            AND  ARRI.CUST_RCPT_NUM     =  #custRcptNum#
            AND  ARRI.PAYER_CUST_CD     =  #payerCustCd#
            AND  ARRI.CUST_RCPT_AMT     =  #custRcptAmt#
            AND  ARRI.EZCANCELFLAG      =  '0'
    </statement>

    <statement id="getCustRcptNumSeqFromArRcptRcvIntfc" parameterClass="Map" resultClass="String">
        SELECT
            CHK.CUST_RCPT_NUM
        FROM
            (
                SELECT
                    ARRI.CUST_RCPT_NUM
                   ,LENGTH(ARRI.CUST_RCPT_NUM) AS LEN
                FROM
                    AR_RCPT_RCV_INTFC ARRI
                WHERE
                         ARRI.GLBL_CMPY_CD      =  #glblCmpyCd#
                    AND  ARRI.PAYER_CUST_CD     =  #payerCustCd#
                    AND  ARRI.CUST_RCPT_AMT     =  #custRcptAmt#
                    AND  REGEXP_LIKE(ARRI.CUST_RCPT_NUM, #custRcptNumPtrn#)
                    AND  ARRI.EZCANCELFLAG      =  '0'
                ORDER BY
                    LEN                DESC
                   ,ARRI.CUST_RCPT_NUM DESC
            ) CHK
        WHERE ROWNUM &lt;= 1
    </statement>
    <!-- END 2021/10/18 S.Go [QC#59273,ADD] -->

</sqlMap>
