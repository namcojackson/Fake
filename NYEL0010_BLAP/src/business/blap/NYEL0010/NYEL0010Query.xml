<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NYEL0010Query">
  
    <statement id="getTabInfoListForProc" parameterClass="Map" resultClass="Map">
       SELECT   TAB.BIZ_APP_ID   AS BIZ_APP_ID
               ,PRC.OTH_SYS_URL  AS OTH_SYS_URL
        FROM    MENU_PROC    PRC
               ,UP_TAB_RELN  REL
               ,UP_TAB       TAB
               ,AOM02        AOM
        WHERE   PRC.GLBL_CMPY_CD     = #GLBL_CMPY_CD#
          AND   PRC.MENU_PROC_ID     = #MENU_PROC_ID#
          AND   PRC.EZCANCELFLAG     = '0'
          AND   REL.GLBL_CMPY_CD_P0  = PRC.GLBL_CMPY_CD
          AND   REL.MENU_PROC_ID     = PRC.MENU_PROC_ID
          AND   REL.EZCANCELFLAG     = '0'
          AND   TAB.GLBL_CMPY_CD     = REL.GLBL_CMPY_CD_T0
          AND   TAB.UP_TAB_CD        = REL.UP_TAB_CD
          AND   TAB.EZCANCELFLAG     = '0'
          AND   AOM.EZBUSINESSID     = TAB.BIZ_APP_ID
          AND   AOM.EZCOMPANYCODE    = #USR_CMPY_CD#
          AND   AOM.EZONLSTOPFLAG    = '0'
          AND   AOM.EZONLSTARTTIME   &lt;= #NOW_TM#
          AND   AOM.EZONLENDTIME     &gt;= #NOW_TM#
          AND   AOM.EZCANCELFLAG     = '0'
        ORDER BY
                PRC.MENU_PROC_ID
               ,REL.UP_TAB_SORT_NUM
               ,TAB.UP_TAB_OP_SORT_NUM
    </statement>

	<statement id="getMyProcessInfoList" parameterClass="Map" resultClass="Map">
        SELECT  TAB.BIZ_APP_ID
        FROM    MY_PROC   MYP
               ,UP_TAB    TAB
               ,AOM02        AOM
        WHERE   MYP.GLBL_CMPY_CD  = #GLBL_CMPY_CD#
          AND   MYP.USR_CMPY_CD   = #USR_CMPY_CD#
          AND   MYP.USR_NM        = #USR_NM#
          AND   MYP.EZCANCELFLAG  = '0'
          AND   TAB.GLBL_CMPY_CD  = MYP.GLBL_CMPY_CD
          AND   TAB.UP_TAB_CD     = MYP.UP_TAB_CD
          AND   MY_PROC_USBLE_FLG = 'Y'
          AND   TAB.EZCANCELFLAG  = '0'
          AND   AOM.EZBUSINESSID  = TAB.BIZ_APP_ID
          AND   AOM.EZCOMPANYCODE = #USR_CMPY_CD#
          AND   AOM.EZONLSTOPFLAG = '0'
          AND   AOM.EZONLSTARTTIME &lt;= #NOW_TM#
          AND   AOM.EZONLENDTIME   &gt;= #NOW_TM#
          AND   AOM.EZCANCELFLAG  = '0'
        ORDER BY
               MYP.UP_TAB_OP_SORT_NUM
	</statement>

	<statement id="getSharedMyProcessInfoList" parameterClass="Map" resultClass="Map">
        SELECT  TAB.BIZ_APP_ID
        FROM    AUTH_PSN       AUTH
               ,USR_ROLE       US_R
               ,ROLE           R
               ,MY_PROC   MYP
               ,UP_TAB    TAB
               ,AOM02        AOM
        WHERE   AUTH.USR_NM       = #USR_NM#
          AND   AUTH.GLBL_CMPY_CD = #GLBL_CMPY_CD#
          AND   AUTH.AUTH_PSN_ID  = US_R.AUTH_PSN_ID
          AND   US_R.ROLE_ID      = R.ROLE_ID
          AND   US_R.EZCANCELFLAG = '0'
          AND   R.GLBL_CMPY_CD    = #GLBL_CMPY_CD#
          AND   R.EZCANCELFLAG    = '0'
          AND   MYP.GLBL_CMPY_CD  = #GLBL_CMPY_CD#
          AND   MYP.USR_CMPY_CD   = MYP.GLBL_CMPY_CD
          AND   MYP.USR_NM        = R.ROLE_NM
          AND   MYP.EZCANCELFLAG  = '0'
          AND   TAB.GLBL_CMPY_CD  = MYP.GLBL_CMPY_CD
          AND   TAB.UP_TAB_CD     = MYP.UP_TAB_CD
          AND   MY_PROC_USBLE_FLG = 'Y'
          AND   TAB.EZCANCELFLAG  = '0'
          AND   AOM.EZBUSINESSID  = TAB.BIZ_APP_ID
          AND   AOM.EZCOMPANYCODE = #USR_CMPY_CD#
          AND   AOM.EZONLSTOPFLAG = '0'
          AND   AOM.EZONLSTARTTIME &lt;= #NOW_TM#
          AND   AOM.EZONLENDTIME   &gt;= #NOW_TM#
          AND   AOM.EZCANCELFLAG  = '0'
        ORDER BY
               TAB.UP_TAB_NM ASC
	</statement>

    <statement id="getWfBizAppList" parameterClass="Map" resultClass="Map">
       SELECT   TAB.BIZ_APP_ID   AS BIZ_APP_ID
        FROM    MENU_PROC_GRP  GRP
               ,MENU_PROC_RELN PRE
               ,MENU_PROC      PRC
               ,UP_TAB_RELN    REL
               ,UP_TAB         TAB
        WHERE   GRP.GLBL_CMPY_CD     = #GLBL_CMPY_CD#
          AND   GRP.MENU_PROC_GRP_CD = #MENU_PROC_GRP_CD#
          AND   GRP.EZCANCELFLAG     = '0' 
          AND   PRE.GLBL_CMPY_CD_G0  = GRP.GLBL_CMPY_CD
          AND   PRE.MENU_PROC_GRP_CD = GRP.MENU_PROC_GRP_CD
          AND   PRE.EZCANCELFLAG     = '0'
          AND   PRC.GLBL_CMPY_CD     = PRE.GLBL_CMPY_CD_P0
          AND   PRC.MENU_PROC_ID     = PRE.MENU_PROC_ID
          AND   PRC.EZCANCELFLAG     = '0'
          AND   REL.GLBL_CMPY_CD_P0  = PRC.GLBL_CMPY_CD
          AND   REL.MENU_PROC_ID     = PRC.MENU_PROC_ID
          AND   REL.EZCANCELFLAG     = '0'
          AND   TAB.GLBL_CMPY_CD     = REL.GLBL_CMPY_CD_T0
          AND   TAB.UP_TAB_CD        = REL.UP_TAB_CD
          AND   TAB.EZCANCELFLAG     = '0'
    </statement>

	<statement id="getInformationList" parameterClass="Map" resultClass="Map">
        SELECT INF.MENU_INFO_TXT
        FROM   MENU_INFO INF
        WHERE  INF.GLBL_CMPY_CD         =  #GLBL_CMPY_CD#
          AND  COALESCE(INF.MENU_EFF_FROM_DT,'        ') || COALESCE(INF.MENU_EFF_FROM_TM,'      ') &lt;= #NOW_DT# || #NOW_TM#
          AND  COALESCE(INF.MENU_EFF_THRU_DT,'99999999') || COALESCE(INF.MENU_EFF_THRU_TM,'999999') &gt;= #NOW_DT# || #NOW_TM#
          AND   INF.MENU_INFO_VWBLE_FLG  =  'Y'
          AND   INF.EZCANCELFLAG         =  '0'
        ORDER BY
               INF.MENU_INFO_SORT_NUM
              ,INF.MENU_EFF_FROM_DT DESC
              ,INF.MENU_INFO_PK DESC
	</statement>
	
	<statement id="getCDMenuBizAppList" parameterClass="Map" resultClass="Map">
		SELECT  CD.BIZ_APP_ID AS BIZ_APP_ID
	    FROM
	    	CD_MENU_TBL  CD, 
	    	AOM02        AOM
	    WHERE  CD.GLBL_CMPY_CD = #GLBL_CMPY_CD#
	      AND  CD.ACTV_FLG     = 'Y'
		  AND  CD.EZCANCELFLAG = '0'
		  AND  AOM.EZBUSINESSID  = CD.BIZ_APP_ID
          AND  AOM.EZCOMPANYCODE = #USR_CMPY_CD#
          AND  AOM.EZONLSTOPFLAG = '0'
          AND  AOM.EZONLSTARTTIME &lt;= #NOW_TM#
          AND  AOM.EZONLENDTIME   &gt;= #NOW_TM#
          AND  AOM.EZCANCELFLAG  = '0'
	</statement>
    
</sqlMap>
