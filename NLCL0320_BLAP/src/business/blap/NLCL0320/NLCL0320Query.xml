<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NLCL0320Query">

    <typeAlias alias="NLCL0320CMsg"      type="business.blap.NLCL0320.NLCL0320CMsg"/>
    <typeAlias alias="NLCL0320_ASMsg"    type="business.blap.NLCL0320.NLCL0320_ASMsg"/>

    <resultMap id="result.getAdjAcctAlias"      class="NLCL0320_ASMsg">
        <result property="rtlWhCd_A"               column="RTL_WH_CD_A"                javaType="EZDSStringItem"/>
        <result property="adjAcctAliasNm_A"        column="ADJ_ACCT_ALIAS_NM_A"        javaType="EZDSStringItem"/>
        <result property="adjAcctAliasDescTxt_A"   column="ADJ_ACCT_ALIAS_DESC_TXT_A"  javaType="EZDSStringItem"/>
        <result property="xxScrItem130Txt_A"       column="XX_SCR_ITEM_130_TXT_A"      javaType="EZDSStringItem"/>
        <result property="effFromDt_A"             column="EFF_FROM_DT_A"              javaType="EZDSDateItem"/>
        <result property="effThruDt_A"             column="EFF_THRU_DT_A"              javaType="EZDSDateItem"/>
        <result property="coaCmpyCd_A"             column="COA_CMPY_CD_A"              javaType="EZDSStringItem"/>
        <result property="coaBrCd_A"               column="COA_BR_CD_A"                javaType="EZDSStringItem"/>
        <result property="coaAcctCd_A"             column="COA_ACCT_CD_A"              javaType="EZDSStringItem"/>
        <result property="coaProdCd_A"             column="COA_PROD_CD_A"              javaType="EZDSStringItem"/>
        <result property="coaChCd_A"               column="COA_CH_CD_A"                javaType="EZDSStringItem"/>
        <result property="coaCcCd_A"               column="COA_CC_CD_A"                javaType="EZDSStringItem"/>
        <result property="coaAfflCd_A"             column="COA_AFFL_CD_A"              javaType="EZDSStringItem"/>
        <result property="coaExtnCd_A"             column="COA_EXTN_CD_A"              javaType="EZDSStringItem"/>
        <result property="coaProjCd_A"             column="COA_PROJ_CD_A"              javaType="EZDSStringItem"/>
        <result property="ezUpTime_A"              column="EZUPTIME_A"                 javaType="EZDSStringItem"/>
        <result property="ezUpTimeZone_A"          column="EZUPTIMEZONE_A"             javaType="EZDSStringItem"/>
        <result property="effFromDt_A0"            column="EFF_FROM_DT_A0"             javaType="EZDSDateItem"/>
        <result property="effThruDt_A0"            column="EFF_THRU_DT_A0"             javaType="EZDSDateItem"/>
    </resultMap>

    <statement id="getAdjAcctAlias" parameterClass="Map" resultMap="result.getAdjAcctAlias">
        SELECT 
             AAA.RTL_WH_CD                     RTL_WH_CD_A
            ,AAA.ADJ_ACCT_ALIAS_NM             ADJ_ACCT_ALIAS_NM_A
            ,AAA.EFF_FROM_DT                   EFF_FROM_DT_A
            ,AAA.EFF_THRU_DT                   EFF_THRU_DT_A
            ,AAA.COA_CMPY_CD                   COA_CMPY_CD_A
            ,AAA.COA_BR_CD                     COA_BR_CD_A
            ,AAA.COA_ACCT_CD                   COA_ACCT_CD_A
            ,AAA.COA_PROD_CD                   COA_PROD_CD_A
            ,AAA.COA_CH_CD                     COA_CH_CD_A
            ,AAA.COA_CC_CD                     COA_CC_CD_A
            ,AAA.COA_AFFL_CD                   COA_AFFL_CD_A
            ,AAA.COA_EXTN_CD                   COA_EXTN_CD_A
            ,AAA.COA_PROJ_CD                   COA_PROJ_CD_A
            ,AAA.ADJ_ACCT_ALIAS_DESC_TXT       ADJ_ACCT_ALIAS_DESC_TXT_A
            ,AAA.COA_CMPY_CD
             ||'.'|| AAA.COA_BR_CD
             ||'.'|| AAA.COA_CC_CD
             ||'.'|| AAA.COA_ACCT_CD
             ||'.'|| AAA.COA_PROD_CD
             ||'.'|| AAA.COA_CH_CD
             ||'.'|| AAA.COA_AFFL_CD
             ||'.'|| AAA.COA_PROJ_CD
             ||'.'|| AAA.COA_EXTN_CD           XX_SCR_ITEM_130_TXT_A
            ,NVL(AAA.EZUPTIME, '*')            EZUPTIME_A
            ,NVL(AAA.EZUPTIMEZONE, '*')        EZUPTIMEZONE_A
            ,AAA.EFF_FROM_DT                   EFF_FROM_DT_A0
            ,AAA.EFF_THRU_DT                   EFF_THRU_DT_A0
        FROM 
            ADJ_ACCT_ALIAS AAA
        WHERE
                   AAA.GLBL_CMPY_CD          = #glblCmpyCd#
            AND    AAA.EZCANCELFLAG          = '0'
        <isNotNull property="rtlWhCd">
            AND    AAA.RTL_WH_CD             = #rtlWhCd#
        </isNotNull>

        <isEqual property="xxChkBox" compareValue="Y">
            AND    AAA.EFF_FROM_DT                  &lt;= #slsDt#
            AND    NVL(AAA.EFF_THRU_DT, '99991231') &gt;= #slsDt#
        </isEqual>
            AND    ROWNUM &lt;= $rowNum$
        ORDER BY
            RTL_WH_CD
           ,ADJ_ACCT_ALIAS_NM
           ,EFF_FROM_DT
    </statement>

    <statement id="countDuplicate" parameterClass="Map" resultClass="BigDecimal">
        SELECT 
            COUNT(1)
        FROM 
            ADJ_ACCT_ALIAS AAA
        WHERE
                AAA.GLBL_CMPY_CD                 =     #glblCmpyCd#
            AND AAA.RTL_WH_CD                    =     #rtlWhCd#
            AND AAA.ADJ_ACCT_ALIAS_NM            =     #adjAcctAliasNm#
        <isEqual property="isUpdateFlg" compareValue="Y">
            AND AAA.EFF_FROM_DT                  &lt;&gt;  #effFromDt#
        </isEqual>
            AND AAA.EFF_FROM_DT                  &lt;= #effThruDt#
            AND NVL(AAA.EFF_THRU_DT, '99991231') &gt;= #effFromDt#
            AND AAA.EZCANCELFLAG                 =     '0'
    </statement>

</sqlMap>
