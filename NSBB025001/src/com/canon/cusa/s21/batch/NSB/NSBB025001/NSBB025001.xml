<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NSBB025001">
    <statement id="getTargetData" parameterClass="Map" resultClass="Map">
        SELECT
             CSRUS.GLBL_CMPY_CD
            ,CSRUS.CRS_SVC_RCV_UPD_STAGE_PK
            ,TASK.FSR_NUM
            ,CSRUS.CRS_SVC_CRAT_TS_ORIG_TXT
            ,CSRUS.CRS_SVC_CALL_TP_CD
            ,CSRUS.CRS_SVC_FSR_STS_CD
            ,CSRUS.FSR_PRTY_TXT
            ,CSRUS.MDL_NM
            ,CSRUS.SER_NUM
            ,CSRUS.CRS_SVC_S21_SVC_TASK_NUM
            ,CSRUS.CRS_SVC_TASK_NM
            ,CSRUS.CRS_SVC_TASK_STS_CD
            ,CSRUS.SVC_CMNT_TXT_01
            ,CSRUS.CRS_SVC_SR_NUM
            ,CSRUS.CRS_SVC_TASK_NUM
            ,CSRUS.CRS_SVC_NOTE_ID_ADD_TXT
            ,CSRUS.CRS_SVC_RESRC_ID
            ,CSRUS.SVC_CMNT_TXT_02
            ,CSRUS.CRS_SVC_FILE_NM
            ,CSRUS.CRS_SVC_ACT_CD
            ,CSRUS.CRS_SVC_PROC_STS_CD
        FROM
            CRS_SVC_RCV_UPD_STAGE CSRUS
            ,SVC_TASK TASK
        WHERE
                CSRUS.GLBL_CMPY_CD              = #glblCmpyCd#
            AND CSRUS.CRS_SVC_PROC_STS_CD       = #inCompleted#
            AND CSRUS.EZCANCELFLAG              = '0'
            AND CSRUS.GLBL_CMPY_CD              = TASK.GLBL_CMPY_CD(+)
            AND CSRUS.CRS_SVC_S21_SVC_TASK_NUM  = TASK.SVC_TASK_NUM(+)
            AND TASK.EZCANCELFLAG(+)            = '0'
        ORDER BY
             TASK.FSR_NUM
            ,TASK.SVC_TASK_NUM
            ,CSRUS.CRS_SVC_CRAT_TS_ORIG_TXT
            ,CSRUS.CRS_SVC_RCV_UPD_STAGE_PK
    </statement>

    <statement id="getFsrVisitTask" parameterClass="Map" resultClass="Map">
        SELECT
             FVT.FSR_VISIT_NUM
        FROM
            FSR_VISIT_TASK FVT
        WHERE
                FVT.GLBL_CMPY_CD         = #glblCmpyCd#
            AND FVT.SVC_TASK_NUM         = #svcTaskNum#
            AND FVT.FSR_NUM              = #fsrNum#
            AND FVT.EZCANCELFLAG         = '0'
    </statement>
</sqlMap>