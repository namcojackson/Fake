<?xml version="1.0" encoding="UTF-8"?>

<sqlMap namespace="NLCL0600Query">
    <typeAlias alias="NLCL0600CMsg" type="business.blap.NLCL0600.NLCL0600CMsg" />
    <typeAlias alias="NLCL0600SMsg" type="business.blap.NLCL0600.NLCL0600SMsg" />
    <typeAlias alias="NLCL0600_ASMsg" type="business.blap.NLCL0600.NLCL0600_ASMsg" />

    <statement id="getRtlWh" parameterClass="Map"
        resultClass="Map">
        SELECT
            RW.RTL_WH_CD
            ,RW.RTL_WH_NM
            ,RW.LOC_TP_CD
        FROM
            RTL_WH RW
        WHERE
                RW.GLBL_CMPY_CD                        =    #glblCmpyCd#
            AND RW.RTL_WH_CD                           =    #rtlWhCd#
            <iterate property="locTpCd" var="locTpCd[]" open=" AND RW.LOC_TP_CD IN (" close=")" conjunction=",">
                #locTpCd[]#
            </iterate>
            
            <iterate property="whOwnrCd" var="whOwnrCd[]" open=" AND RW.WH_OWNR_CD IN (" close=")" conjunction=",">
                #whOwnrCd[]#
            </iterate>
            AND RW.EFF_FROM_DT                     &lt;=    #salesDate#
            AND NVL(RW.EFF_THRU_DT, '99991231')    &gt;=    #salesDate#
            AND RW.EZCANCELFLAG                        =    '0'
    </statement>
    <statement id="getRtlSwh" parameterClass="Map"
        resultClass="Map">
        SELECT
            RS.RTL_SWH_CD
            ,RS.RTL_SWH_NM
        FROM
            RTL_SWH RS
        WHERE
                RS.GLBL_CMPY_CD                        =    #glblCmpyCd#
            AND RS.RTL_SWH_CD                          =    #rtlSwhCd#
            AND RS.EFF_FROM_DT                     &lt;=    #salesDate#
            AND NVL(RS.EFF_THRU_DT, '99991231')    &gt;=    #salesDate#
            AND RS.EZCANCELFLAG                        =    '0'
            AND ROWNUM                                 =    #rownum#
    </statement>
    <statement id="getLocation" parameterClass="Map"
        resultClass="Map">
        SELECT
            RS.RTL_SWH_CD
            ,RS.RTL_SWH_NM
            ,RS.INVTY_LOC_CD
        FROM
            RTL_SWH RS
        WHERE
                RS.GLBL_CMPY_CD                        =    #glblCmpyCd#
            AND RS.INVTY_LOC_CD                        =    #invtyLocCd#
            AND RS.EFF_FROM_DT                     &lt;=    #salesDate#
            AND NVL(RS.EFF_THRU_DT, '99991231')    &gt;=    #salesDate#
            AND RS.EZCANCELFLAG                        =    '0'
    </statement>
    <statement id="getRtlSwhFromRtlWhCd" parameterClass="Map"
        resultClass="Map">
        SELECT
            RS.RTL_SWH_CD
            ,RS.RTL_SWH_NM
            ,RS.INVTY_LOC_CD
        FROM
            RTL_SWH RS
        WHERE
                RS.GLBL_CMPY_CD                        =    #glblCmpyCd#
            AND RS.RTL_WH_CD                           =    #rtlWhCd#
            AND RS.EFF_FROM_DT                     &lt;=    #salesDate#
            AND NVL(RS.EFF_THRU_DT, '99991231')    &gt;=    #salesDate#
            AND RS.EZCANCELFLAG                        =    '0'
        ORDER BY
            RS.RTL_SWH_CD  ASC
    </statement>
    <statement id="getPhysicalInventoryControlFromName" parameterClass="Map"
        resultClass="Map">
        SELECT
            PIC.PHYS_INVTY_NUM
        FROM
            PHYS_INVTY_CTRL PIC
        WHERE
                PIC.GLBL_CMPY_CD               =  #glblCmpyCd#
            AND PIC.PHYS_INVTY_CTRL_NM         =  #physInvtyCtrlNm#
            AND PIC.EZCANCELFLAG               =  '0'
            AND ROWNUM                         =  #rownum#
    </statement>
    <statement id="checkRtlWhEffectiveDate" parameterClass="Map"
        resultClass="Map">
        SELECT
            RW.RTL_WH_CD
            ,RW.EFF_THRU_DT
        FROM
            RTL_WH RW
        WHERE
                RW.GLBL_CMPY_CD                        =    #glblCmpyCd#
            AND RW.RTL_WH_CD                           =    #rtlWhCd#
            AND NVL(RW.EFF_THRU_DT, '99991231')     &lt;    #physInvtyDt#
            AND RW.EZCANCELFLAG                        =    '0'
    </statement>
    <statement id="getPhysicalInventoryControl" parameterClass="Map"
        resultClass="Map">
        SELECT
            PIC.PHYS_INVTY_CTRL_PK
            ,PIC.EZUPTIME
            ,PIC.EZUPTIMEZONE
        FROM
            PHYS_INVTY_CTRL PIC
        WHERE
                PIC.GLBL_CMPY_CD               =  #glblCmpyCd#
            AND PIC.PHYS_INVTY_NUM             =  #physInvtyNum#
            AND PIC.EZCANCELFLAG               =  '0'
    </statement>
    <statement id="search" parameterClass="Map"
        resultMap="result.NLCL0600_ASMsg">
        SELECT
            T1.RTL_WH_CD
            ,T1.RTL_WH_NM
            ,T1.RTL_SWH_CD
            ,T1.RTL_SWH_NM
            ,T1.INVTY_LOC_CD
            ,T1.PHYS_INVTY_DT
            ,T1.PHYS_INVTY_CTRL_NM
            ,T1.PHYS_INVTY_CTRL_DESC_NM
            ,T1.LOC_TP_CD
            ,T1.EZUPTIME
            ,T1.EZUPTIMEZONE
        FROM
            (SELECT DISTINCT
                DRWV.RTL_WH_CD
                ,DRWV.RTL_WH_NM
                ,DRWV.RTL_SWH_CD
                ,DRWV.RTL_SWH_NM
                ,DRWV.INVTY_LOC_CD
                ,PIC.PHYS_INVTY_DT
                ,PIC.PHYS_INVTY_CTRL_NM
                ,PIC.PHYS_INVTY_CTRL_DESC_NM
                ,PIC.LOC_TP_CD
                ,PIC.EZUPTIME
                ,PIC.EZUPTIMEZONE
            FROM
                PHYS_INVTY_CTRL PIC
                ,DS_RTL_WH_V    DRWV
            WHERE
                    PIC.GLBL_CMPY_CD     =  #glblCmpyCd#
                AND PIC.PHYS_INVTY_NUM   =  #cMsg.physInvtyNum#
                <iterate property="locTpCd" var="locTpCd[]" open=" AND PIC.LOC_TP_CD IN (" close=")" conjunction=",">
                    #locTpCd[]#
                </iterate>
                AND PIC.WH_CD            =  DRWV.INVTY_LOC_CD
                AND PIC.GLBL_CMPY_CD     =  DRWV.GLBL_CMPY_CD
                AND PIC.EZCANCELFLAG     =  '0'
                AND DRWV.EZCANCELFLAG    =  '0'
            ORDER BY
                DRWV.INVTY_LOC_CD ASC
            ) T1
        WHERE
                ROWNUM         &lt;=       #maxRownum#
    </statement>

    <statement id="checkPhysicalInventoryControl" parameterClass="Map"
        resultClass="Map">
        SELECT
            PIC.PHYS_INVTY_DT
           ,PIC.RTL_WH_CD
           ,PIC.RTL_SWH_CD
        FROM
            PHYS_INVTY_CTRL PIC
        WHERE
                PIC.GLBL_CMPY_CD        =    #glblCmpyCd#
            AND PIC.PHYS_INVTY_DT       =    #physInvtyDt#
            AND PIC.RTL_WH_CD           =    #rtlWhCd#
            AND PIC.PHYS_INVTY_NUM     !=    NVL(#physInvtyNum#, '-')
            <iterate property="rtlSwhCd" var="rtlSwhCd[]" open=" AND PIC.RTL_SWH_CD IN (" close=")" conjunction=",">
                #rtlSwhCd[]#
            </iterate>
            AND PIC.EZCANCELFLAG        =    '0'
    </statement>

    <resultMap id="result.NLCL0600_ASMsg" class="NLCL0600_ASMsg">
        <result property="rtlSwhCd_A1"              column="RTL_SWH_CD"                javaType="EZDSStringItem"/>
        <result property="rtlSwhNm_A1"              column="RTL_SWH_NM"                javaType="EZDSStringItem"/>
        <result property="invtyLocCd_A1"            column="INVTY_LOC_CD"              javaType="EZDSStringItem"/>
        <result property="rtlWhCd_A1"               column="RTL_WH_CD"                 javaType="EZDSStringItem"/>
        <result property="rtlWhNm_A1"               column="RTL_WH_NM"                 javaType="EZDSStringItem"/>
        <result property="physInvtyDt_A1"           column="PHYS_INVTY_DT"             javaType="EZDSDateItem"/>
        <result property="physInvtyCtrlNm_A1"       column="PHYS_INVTY_CTRL_NM"        javaType="EZDSStringItem"/>
        <result property="physInvtyCtrlDescNm_A1"   column="PHYS_INVTY_CTRL_DESC_NM"   javaType="EZDSStringItem"/>
        <result property="locTpCd_A1"               column="LOC_TP_CD"                 javaType="EZDSStringItem"/>
        <result property="xxRqstTs_A1"              column="EZUPTIME"                  javaType="EZDSStringItem"/>
        <result property="xxRqstTz_A1"              column="EZUPTIMEZONE"              javaType="EZDSStringItem"/>
    </resultMap>
</sqlMap>