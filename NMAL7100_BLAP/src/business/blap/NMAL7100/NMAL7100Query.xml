<?xml version="1.0" encoding="UTF-8"?>
<sqlMap namespace="NMAL7100Query">

    <typeAlias alias="NMAL7100CMsg"    type="business.blap.NMAL7100.NMAL7100CMsg"/>
    <typeAlias alias="NMAL7100_XCMsg"  type="business.blap.NMAL7100.NMAL7100_XCMsg"/>
    <typeAlias alias="NMAL7100_YCMsg"  type="business.blap.NMAL7100.NMAL7100_YCMsg"/>
    <typeAlias alias="NMAL7100_ASMsg"  type="business.blap.NMAL7100.NMAL7100_ASMsg"/>

    <statement id="getPrmoAudcCatg" parameterClass="Map" resultClass="Map">
        SELECT
             MPAC.MKT_PRMO_AUDC_CATG_CD                    -- Marketing Promotion Audience Catalog Code
            ,MPAC.MKT_PRMO_AUDC_CATG_NM                    -- Marketing Promotion Audience Catalog Name
            ,MPAC.MKT_PRMO_AUDC_CATG_DESC_TXT              -- Marketing Promotion Audience Catalog Description Text
            ,MPAC.MKT_PRMO_AUDC_CATG_FLG_01                -- Marketing Promotion Audience Catalog Flag
            ,MPAC.MKT_PRMO_AUDC_CATG_FLG_02                -- Marketing Promotion Audience Catalog Flag
            ,MPAC.MKT_PRMO_AUDC_CATG_FLG_03                -- Marketing Promotion Audience Catalog Flag
        FROM
            MKT_PRMO_AUDC_CATG   MPAC       -- Marketing Promotion Audience Category
        WHERE
            MPAC.EZCANCELFLAG = 0
            AND MPAC.GLBL_CMPY_CD = #glblCmpyCd#
        ORDER BY
            MPAC.MKT_PRMO_AUDC_CATG_SORT_NUM               -- Marketing Promotion Audience Catalog Sort Number
        
    </statement>

    <statement id="getMktPgmHdr" parameterClass="Map" resultMap="result.getMktPgmHdr">
        SELECT
             PMP.PRC_MKT_PRMO_NM                          -- Price Marketing Promotion Name
            ,PMP.PRC_MKT_PRMO_DESC_TXT                    -- Price Marketing Promotion Description Text
            ,PMP.PRC_MKT_PRMO_TP_CD                       -- Price Marketing Promotion Type Code
            ,PMP.EFF_FROM_DT                              -- Effective From Date
            ,PMP.EFF_THRU_DT                              -- Effective Through Date
            ,PMP.ACTV_FLG                                 -- Active Flag
            ,PMP.PRC_MKT_PRMO_CMNT_TXT                    -- Price Market Promotion Comment Text
            ,PMP.EZUPTIME
            ,PMP.EZUPTIMEZONE
        FROM
            PRC_MKT_PRMO         PMP        -- Price Marketing Promotion
        WHERE
            PMP.EZCANCELFLAG = 0
            AND PMP.GLBL_CMPY_CD    = #glblCmpyCd#
            AND PMP.PRC_MKT_PRMO_PK = #prcMktPrmoPk#
            AND PMP.DEL_FLG = 'N'
    </statement>

    <resultMap id="result.getMktPgmHdr"             class="NMAL7100CMsg">
        <result property="prcMktPrmoNm_H1"          column="PRC_MKT_PRMO_NM"        javaType="EZDSStringItem" />
        <result property="prcMktPrmoDescTxt_H1"     column="PRC_MKT_PRMO_DESC_TXT"  javaType="EZDSStringItem" />
        <result property="prcMktPrmoCmntTxt_H1"     column="PRC_MKT_PRMO_CMNT_TXT"  javaType="EZDSStringItem" />
        <result property="prcMktPrmoTpCd_H1"        column="PRC_MKT_PRMO_TP_CD"     javaType="EZDSStringItem" />
        <result property="effFromDt_H1"             column="EFF_FROM_DT"            javaType="EZDCDateItem" />
        <result property="effThruDt_H1"             column="EFF_THRU_DT"            javaType="EZDCDateItem" />
        <result property="actvFlg_H1"               column="ACTV_FLG"               javaType="EZDSStringItem" />
        <result property="ezUpTime_H1"              column="EZUPTIME"               javaType="EZDSStringItem" />
        <result property="ezUpTimeZone_H1"          column="EZUPTIMEZONE"           javaType="EZDSStringItem" />
    </resultMap>

    <statement id="getMktPgmList" parameterClass="Map" resultMap="result.getMktPgmList">
        SELECT
             PMPD.PRC_MKT_PRMO_DTL_PK                        -- Price Marketing Promotion Detail Primary Key
            ,PMPD.PRC_MKT_PRMO_CD                            -- Price Market Promotion Code
            ,PMPD.PRC_QLFY_TP_CD                             -- Price Qualify Type Code
            ,CASE PRC_QLFY_TP_CD
               WHEN  #prcPrmoQlfyTpModel#  THEN  T_MDL_NM
               ELSE                              PRC_QLFY_VAL_TXT
             END                            PRC_QLFY_VAL_TXT -- Price Qualify Value Text
            ,PMPD.MDSE_CD                                    -- Intangible Merchandise Code
            ,M.MDSE_NM                                       -- It is each merchandise name
            ,M.MDSE_DESC_SHORT_TXT                           -- It is each merchandise name
            ,PMPD.PRMO_AMT                                   -- Promotion Amount
            ,PMPD.EFF_FROM_DT                                -- Effective From Date
            ,PMPD.EFF_THRU_DT                                -- Effective Through Date
            ,PMPD.EZINTIME
            ,SUBSTR(PMPD.EZINTIME, 1, 8)    EZINTIME_L8
            ,PMPD.EZINUSERID
            ,PMPD.EZUPTIME
            ,SUBSTR(PMPD.EZUPTIME, 1, 8)    EZUPTIME_L8
            ,PMPD.EZUPUSERID
            ,PMPD.EZUPTIMEZONE
        FROM
            PRC_MKT_PRMO_DTL     PMPD           -- Price Marketing Promotion Detail
            ,ALL_MDSE_V          M              -- All Merchandise View
            ,( SELECT
                 T_GLBL_CMPY_CD
                ,EZCANCELFLAG
                ,TO_CHAR(MN.T_MDL_ID) T_MDL_ID
                ,T_MDL_NM
               FROM
                 MDL_NM MN
               WHERE
                   MN.T_GLBL_CMPY_CD = #glblCmpyCd#
               AND MN.EZCANCELFLAG = '0'
<!-- 2019/12/06 QC#54215 Mod Start -->
            <isNotNull property="mdlNm">
                AND MN.T_MDL_NM LIKE #mdlNm#
            </isNotNull>
<!-- 2019/12/06 QC#54215 Mod End -->
             ) MN
        WHERE
                PMPD.GLBL_CMPY_CD     = #glblCmpyCd#
            AND PMPD.PRC_MKT_PRMO_PK  = #prcMktPrmoPk#
            AND PMPD.EZCANCELFLAG     = '0'
<!-- 2019/12/06 QC#54215 Mod Start -->
        <isNotNull property="prcMktPrmoCd">
        <!-- 2020/01/22 QC#55541 Mod Start -->
        <!--     AND PMPD.PRC_MKT_PRMO_CD LIKE '%' || #prcMktPrmoCd# || '%' -->
        AND PMPD.PRC_MKT_PRMO_CD LIKE #prcMktPrmoCd#
        <!-- 2020/01/22 QC#55541 Mod End -->
        </isNotNull>
        <isNotNull property="prcQlfyValTxt">
            AND PMPD.PRC_QLFY_VAL_TXT LIKE #prcQlfyValTxt#
        </isNotNull>
        <isNotNull property="prcPrmoQlfyTpCd">
            AND PMPD.PRC_QLFY_TP_CD = #prcPrmoQlfyTpCd#
        </isNotNull>
        <isNotNull property="mdseCd">
            AND PMPD.MDSE_CD LIKE #mdseCd#
        </isNotNull>
        <isNotNull property="prmoAmt">
            AND PMPD.PRMO_AMT = #prmoAmt#
        </isNotNull>
        <isNotNull property="effFromDtFr">
            AND PMPD.EFF_FROM_DT &gt;= #effFromDtFr#
        </isNotNull>
        <isNotNull property="effFromDtTo">
            AND PMPD.EFF_FROM_DT &lt;= #effFromDtTo#
        </isNotNull>
<!-- 2019/12/06 QC#54215 Mod End -->
            AND PMPD.GLBL_CMPY_CD     = M.GLBL_CMPY_CD
            AND PMPD.MDSE_CD          = M.MDSE_CD
            AND M.EZCANCELFLAG        = '0'
<!-- 2019/12/06 QC#54215 Mod Start -->
        <isNotNull property="mdseDescShortTxt">
            AND M.MDSE_DESC_SHORT_TXT LIKE #mdseDescShortTxt#
        </isNotNull>
        <isNotNull property="mdlNm">
            AND PMPD.GLBL_CMPY_CD     = MN.T_GLBL_CMPY_CD
            AND PMPD.PRC_QLFY_VAL_TXT = MN.T_MDL_ID
            AND MN.EZCANCELFLAG       = '0'
        </isNotNull>
        <isNull property="mdlNm">
            AND PMPD.GLBL_CMPY_CD     = MN.T_GLBL_CMPY_CD(+)
            AND PMPD.PRC_QLFY_VAL_TXT = MN.T_MDL_ID(+)
            AND MN.EZCANCELFLAG(+)    = '0'
        </isNull>
<!-- 2019/12/06 QC#54215 Mod End -->

        <isNotNull property="prcMktPrmoCd_DH">
            AND PMPD.PRC_MKT_PRMO_CD LIKE '%' || #prcMktPrmoCd_DH# || '%'
        </isNotNull>
        <isEqual property="prcMktPrmoStsCd_DH" compareValue="01">
            AND PMPD.EFF_FROM_DT &lt;= #slsDt#
            AND #slsDt# &lt;= NVL(PMPD.EFF_THRU_DT, #highValDt#)
        </isEqual>
        <isEqual property="prcMktPrmoStsCd_DH" compareValue="02">
            AND (#slsDt# &lt; PMPD.EFF_FROM_DT
            OR   NVL(PMPD.EFF_THRU_DT, #highValDt#) &lt; #slsDt#)
        </isEqual>
        <isEqual property="prcMktPrmoStsCd_DH" compareValue="03">
            AND PMPD.DEL_FLG      = 'Y'
        </isEqual>
        <isEqual property="prcMktPrmoStsCd_DH" compareValue="04">
            AND PMPD.DEL_FLG      = 'N'
        </isEqual>
        ORDER BY
            PMPD.PRC_MKT_PRMO_DTL_PK
    </statement>

    <resultMap id="result.getMktPgmList"        class="NMAL7100_ASMsg">
        <result property="prcMktPrmoDtlPk_DA"   column="PRC_MKT_PRMO_DTL_PK"    javaType="EZDSBigDecimalItem" />
        <result property="prcMktPrmoCd_DA"      column="PRC_MKT_PRMO_CD"        javaType="EZDSStringItem" />
        <result property="prcPrmoQlfyTpCd_DA"   column="PRC_QLFY_TP_CD"         javaType="EZDSStringItem" />
        <result property="prcQlfyValTxt_DA"     column="PRC_QLFY_VAL_TXT"       javaType="EZDSStringItem" />
        <result property="mdseCd_DA"            column="MDSE_CD"                javaType="EZDSStringItem" />
        <result property="mdseDescShortTxt_DA"  column="MDSE_DESC_SHORT_TXT"    javaType="EZDSStringItem" />
        <result property="prmoAmt_DA"           column="PRMO_AMT"               javaType="EZDSBigDecimalItem" />
        <result property="effFromDt_DA"         column="EFF_FROM_DT"            javaType="EZDCDateItem" />
        <result property="effThruDt_DA"         column="EFF_THRU_DT"            javaType="EZDCDateItem" />
        <result property="ezInTime_DA"          column="EZINTIME"               javaType="EZDSStringItem" />
        <result property="xxCratDt_DA"          column="EZINTIME_L8"            javaType="EZDSStringItem" />
        <result property="xxFullNm_D1"          column="EZINUSERID"             javaType="EZDSStringItem" />
        <result property="ezUpTime_DA"          column="EZUPTIME"               javaType="EZDSStringItem" />
        <result property="xxLastEntryDt_DA"     column="EZUPTIME_L8"            javaType="EZDSStringItem" />
        <result property="xxFullNm_D2"          column="EZUPUSERID"             javaType="EZDSStringItem" />
        <result property="ezUpTimeZone_DA"      column="EZUPTIMEZONE"           javaType="EZDSStringItem" />
    </resultMap>

    <statement id="getCannotBeUsedList" parameterClass="Map" resultMap="result.getCannotBeUsedList">
        SELECT
             PMPE.PRC_MKT_PRMO_EXCL_PK                     -- Price Marketing Promotion Exclusion Primary Key
            ,PC.PRC_LIST_TP_CD                             -- Price List Type Code
            ,PMPE.PRC_CATG_CD                              -- Price Category Code
            ,PC.PRC_CATG_NM                                -- Used for description of the code
            ,PMPE.EFF_FROM_DT                              -- Effective From Date
            ,PMPE.EFF_THRU_DT                              -- Effective Through Date
            , PMPE.EZUPTIME
            , PMPE.EZUPTIMEZONE
        FROM
            PRC_MKT_PRMO_EXCL    PMPE       -- Price Marketing Promotion Exclusion
            ,PRC_CATG             PC        -- Price Category
        WHERE
            PMPE.EZCANCELFLAG       = 0
            AND PMPE.GLBL_CMPY_CD   = #glblCmpyCd#
            AND PC.EZCANCELFLAG     = 0
            AND PC.GLBL_CMPY_CD     = #glblCmpyCd#
            AND PMPE.PRC_MKT_PRMO_PK = #prcMktPrmoPk#
            AND PMPE.PRC_CATG_CD    = PC.PRC_CATG_CD
    </statement>
    
    <resultMap id="result.getCannotBeUsedList"      class="NMAL7100_YCMsg">
        <result property="prcMktPrmoExclPk_CX"      column="PRC_MKT_PRMO_EXCL_PK"        javaType="EZDCBigDecimalItem"/>
        <result property="prcListTpCd_CX"           column="PRC_LIST_TP_CD"              javaType="EZDCStringItem"/>
        <result property="prcCatgCd_CX"             column="PRC_CATG_CD"                 javaType="EZDCStringItem"/>
        <result property="prcCatgNm_CX"             column="PRC_CATG_NM"                 javaType="EZDCStringItem"/>
        <result property="effFromDt_CX"             column="EFF_FROM_DT"                 javaType="EZDCDateItem"/>
        <result property="effThruDt_CX"             column="EFF_THRU_DT"                 javaType="EZDCDateItem"/>
        <result property="ezUpTime_CX"              column="EZUPTIME"                    javaType="EZDCStringItem"/>
        <result property="ezUpTimeZone_CX"          column="EZUPTIMEZONE"                javaType="EZDCStringItem"/>
    </resultMap>

    <statement id="getMktAudList" parameterClass="Map" resultMap="result.getMktAudList">
        SELECT 
             PMPAC.PUB_FLG_01
             , CASE
                 WHEN PMPAC.LINE_BIZ_TP_CD_01 IS NOT NULL THEN #lineBizTpCd#
                 WHEN PMPAC.DS_ACCT_NUM_01    IS NOT NULL THEN #dsAcctNum#
                 WHEN PMPAC.COA_CH_CD_01      IS NOT NULL THEN #coaChCd#
                 WHEN PMPAC.DS_ACCT_GRP_CD_01 IS NOT NULL THEN #dsAcctGrpCd#
                 WHEN PMPAC.COA_BR_CD_01      IS NOT NULL THEN #coaBrCd#
                 WHEN PMPAC.CSMP_NUM_01       IS NOT NULL THEN #csmpNum#
                 WHEN PMPAC.PRC_GRP_PK_01     IS NOT NULL THEN #prcGrpPk#
                 ELSE #pub#
               END PRC_CUST_AUDC_CATG_TP_CD_01
             , CASE
                 WHEN PMPAC.LINE_BIZ_TP_CD_01 IS NOT NULL THEN PMPAC.LINE_BIZ_TP_CD_01
                 WHEN PMPAC.DS_ACCT_NUM_01    IS NOT NULL THEN PMPAC.DS_ACCT_NUM_01
                 WHEN PMPAC.COA_CH_CD_01      IS NOT NULL THEN PMPAC.COA_CH_CD_01
                 WHEN PMPAC.DS_ACCT_GRP_CD_01 IS NOT NULL THEN PMPAC.DS_ACCT_GRP_CD_01
                 WHEN PMPAC.COA_BR_CD_01      IS NOT NULL THEN PMPAC.COA_BR_CD_01
                 WHEN PMPAC.CSMP_NUM_01       IS NOT NULL THEN PMPAC.CSMP_NUM_01
                 WHEN PMPAC.PRC_GRP_PK_01     IS NOT NULL THEN TO_CHAR(PMPAC.PRC_GRP_PK_01)
               END CUST_AUDC_VAL_01
             , CASE
                 WHEN PMPAC.LINE_BIZ_TP_CD_01 IS NOT NULL THEN LBT01.LINE_BIZ_TP_DESC_TXT
                 WHEN PMPAC.DS_ACCT_NUM_01    IS NOT NULL THEN STC01.DS_ACCT_NM
                 WHEN PMPAC.COA_CH_CD_01      IS NOT NULL THEN CC01.COA_CH_DESC_TXT
                 WHEN PMPAC.DS_ACCT_GRP_CD_01 IS NOT NULL THEN DAG01.DS_ACCT_GRP_DESC_TXT
                 WHEN PMPAC.COA_BR_CD_01      IS NOT NULL THEN CB01.COA_BR_DESC_TXT
                 WHEN PMPAC.CSMP_NUM_01       IS NOT NULL THEN ''
                 WHEN PMPAC.PRC_GRP_PK_01     IS NOT NULL THEN PG01.PRC_GRP_NM
               END CUST_AUDC_NM_01
             , CASE
                 WHEN PMPAC.DS_ACCT_NUM_02    IS NOT NULL THEN #dsAcctNum#
                 WHEN PMPAC.COA_BR_CD_02      IS NOT NULL THEN #coaBrCd#
                 WHEN PMPAC.CSMP_NUM_02       IS NOT NULL THEN #csmpNum#
                 WHEN PMPAC.DS_ACCT_GRP_CD_02 IS NOT NULL THEN #dsAcctGrpCd#
                 WHEN PMPAC.PRC_GRP_PK_02     IS NOT NULL THEN #prcGrpPk#
               END PRC_CUST_AUDC_CATG_TP_CD_02
             , CASE
                 WHEN PMPAC.DS_ACCT_NUM_02    IS NOT NULL THEN PMPAC.DS_ACCT_NUM_02
                 WHEN PMPAC.COA_BR_CD_02      IS NOT NULL THEN PMPAC.COA_BR_CD_02
                 WHEN PMPAC.CSMP_NUM_02       IS NOT NULL THEN PMPAC.CSMP_NUM_02
                 WHEN PMPAC.DS_ACCT_GRP_CD_02 IS NOT NULL THEN PMPAC.DS_ACCT_GRP_CD_02
                 WHEN PMPAC.PRC_GRP_PK_02     IS NOT NULL THEN TO_CHAR(PMPAC.PRC_GRP_PK_02)
               END CUST_AUDC_VAL_02
             , CASE
                 WHEN PMPAC.DS_ACCT_NUM_02    IS NOT NULL THEN STC02.DS_ACCT_NM
                 WHEN PMPAC.COA_BR_CD_02      IS NOT NULL THEN CB02.COA_BR_DESC_TXT
                 WHEN PMPAC.CSMP_NUM_02       IS NOT NULL THEN ''
                 WHEN PMPAC.DS_ACCT_GRP_CD_02 IS NOT NULL THEN DAG02.DS_ACCT_GRP_DESC_TXT
                 WHEN PMPAC.PRC_GRP_PK_02     IS NOT NULL THEN PG02.PRC_GRP_NM
               END CUST_AUDC_NM_02
             , CASE
                 WHEN PMPAC.DS_ACCT_NUM_03    IS NOT NULL THEN #dsAcctNum#
                 WHEN PMPAC.COA_BR_CD_03      IS NOT NULL THEN #coaBrCd#
                 WHEN PMPAC.CSMP_NUM_03       IS NOT NULL THEN #csmpNum#
                 WHEN PMPAC.DS_ACCT_GRP_CD_03 IS NOT NULL THEN #dsAcctGrpCd#
                 WHEN PMPAC.PRC_GRP_PK_03     IS NOT NULL THEN #prcGrpPk#
               END PRC_CUST_AUDC_CATG_TP_CD_03
             , CASE
                 WHEN PMPAC.DS_ACCT_NUM_03    IS NOT NULL THEN PMPAC.DS_ACCT_NUM_03
                 WHEN PMPAC.COA_BR_CD_03      IS NOT NULL THEN PMPAC.COA_BR_CD_03
                 WHEN PMPAC.CSMP_NUM_03       IS NOT NULL THEN PMPAC.CSMP_NUM_03
                 WHEN PMPAC.DS_ACCT_GRP_CD_03 IS NOT NULL THEN PMPAC.DS_ACCT_GRP_CD_03
                 WHEN PMPAC.PRC_GRP_PK_03     IS NOT NULL THEN TO_CHAR(PMPAC.PRC_GRP_PK_03)
               END CUST_AUDC_VAL_03
             , CASE
                 WHEN PMPAC.DS_ACCT_NUM_03    IS NOT NULL THEN STC03.DS_ACCT_NM
                 WHEN PMPAC.COA_BR_CD_03      IS NOT NULL THEN CB03.COA_BR_DESC_TXT
                 WHEN PMPAC.CSMP_NUM_03       IS NOT NULL THEN ''
                 WHEN PMPAC.DS_ACCT_GRP_CD_03 IS NOT NULL THEN DAG03.DS_ACCT_GRP_DESC_TXT
                 WHEN PMPAC.PRC_GRP_PK_03     IS NOT NULL THEN PG03.PRC_GRP_NM
               END CUST_AUDC_NM_03
             , PMPAC.EFF_FROM_DT
             , PMPAC.EFF_THRU_DT
             , PMPAC.PRC_MKT_PRMO_AUDC_CTRL_PK
             , PMPAC.EZUPTIME
             , PMPAC.EZUPTIMEZONE
          FROM 
               PRC_MKT_PRMO_AUDC_CTRL PMPAC
             , LINE_BIZ_TP LBT01
             , SELL_TO_CUST STC01
             , SELL_TO_CUST STC02
             , SELL_TO_CUST STC03
             , COA_CH CC01
             , DS_ACCT_GRP DAG01
             , DS_ACCT_GRP DAG02
             , DS_ACCT_GRP DAG03
             , COA_BR CB01
             , COA_BR CB02
             , COA_BR CB03
             , PRC_GRP PG01
             , PRC_GRP PG02
             , PRC_GRP PG03
         WHERE PMPAC.GLBL_CMPY_CD = #glblCmpyCd#
           AND PMPAC.EZCANCELFLAG = '0'
           AND PMPAC.PRC_MKT_PRMO_PK  = #prcMktPrmoPk#
           AND PMPAC.GLBL_CMPY_CD = LBT01.GLBL_CMPY_CD(+)
           AND PMPAC.EZCANCELFLAG = LBT01.EZCANCELFLAG(+)
           AND PMPAC.LINE_BIZ_TP_CD_01 = LBT01.LINE_BIZ_TP_CD(+)
           AND PMPAC.GLBL_CMPY_CD = STC01.GLBL_CMPY_CD(+)
           AND PMPAC.EZCANCELFLAG = STC01.EZCANCELFLAG(+)
           AND PMPAC.DS_ACCT_NUM_01 = STC01.SELL_TO_CUST_CD(+)
           AND PMPAC.GLBL_CMPY_CD = STC02.GLBL_CMPY_CD(+)
           AND PMPAC.EZCANCELFLAG = STC02.EZCANCELFLAG(+)
           AND PMPAC.DS_ACCT_NUM_02 = STC02.SELL_TO_CUST_CD(+)
           AND PMPAC.GLBL_CMPY_CD = STC03.GLBL_CMPY_CD(+)
           AND PMPAC.EZCANCELFLAG = STC03.EZCANCELFLAG(+)
           AND PMPAC.DS_ACCT_NUM_03 = STC03.SELL_TO_CUST_CD(+)
           AND PMPAC.GLBL_CMPY_CD = CC01.GLBL_CMPY_CD(+)
           AND PMPAC.EZCANCELFLAG = CC01.EZCANCELFLAG(+)
           AND PMPAC.COA_CH_CD_01 = CC01.COA_CH_CD(+)
           AND PMPAC.GLBL_CMPY_CD = DAG01.GLBL_CMPY_CD(+)
           AND PMPAC.EZCANCELFLAG = DAG01.EZCANCELFLAG(+)
           AND PMPAC.DS_ACCT_GRP_CD_01 = DAG01.DS_ACCT_GRP_CD(+)
           AND PMPAC.GLBL_CMPY_CD = DAG02.GLBL_CMPY_CD(+)
           AND PMPAC.EZCANCELFLAG = DAG02.EZCANCELFLAG(+)
           AND PMPAC.DS_ACCT_GRP_CD_02 = DAG02.DS_ACCT_GRP_CD(+)
           AND PMPAC.GLBL_CMPY_CD = DAG03.GLBL_CMPY_CD(+)
           AND PMPAC.EZCANCELFLAG = DAG03.EZCANCELFLAG(+)
           AND PMPAC.DS_ACCT_GRP_CD_03 = DAG03.DS_ACCT_GRP_CD(+)
           AND PMPAC.GLBL_CMPY_CD = CB01.GLBL_CMPY_CD(+)
           AND PMPAC.EZCANCELFLAG = CB01.EZCANCELFLAG(+)
           AND PMPAC.COA_BR_CD_01 = CB01.COA_BR_CD(+)
           AND PMPAC.GLBL_CMPY_CD = CB02.GLBL_CMPY_CD(+)
           AND PMPAC.EZCANCELFLAG = CB02.EZCANCELFLAG(+)
           AND PMPAC.COA_BR_CD_02 = CB02.COA_BR_CD(+)
           AND PMPAC.GLBL_CMPY_CD = CB03.GLBL_CMPY_CD(+)
           AND PMPAC.EZCANCELFLAG = CB03.EZCANCELFLAG(+)
           AND PMPAC.COA_BR_CD_03 = CB03.COA_BR_CD(+)
           AND PMPAC.GLBL_CMPY_CD = PG01.GLBL_CMPY_CD(+)
           AND PMPAC.EZCANCELFLAG = PG01.EZCANCELFLAG(+)
           AND PMPAC.PRC_GRP_PK_01 = PG01.PRC_GRP_PK(+)
           AND #mktPrcGrp#     = PG01.PRC_GRP_TP_CD(+)
           AND PMPAC.GLBL_CMPY_CD = PG02.GLBL_CMPY_CD(+)
           AND PMPAC.EZCANCELFLAG = PG02.EZCANCELFLAG(+)
           AND PMPAC.PRC_GRP_PK_02 = PG02.PRC_GRP_PK(+)
           AND #mktPrcGrp#     = PG02.PRC_GRP_TP_CD(+)
           AND PMPAC.GLBL_CMPY_CD = PG03.GLBL_CMPY_CD(+)
           AND PMPAC.EZCANCELFLAG = PG03.EZCANCELFLAG(+)
           AND PMPAC.PRC_GRP_PK_03 = PG03.PRC_GRP_PK(+)
           AND #mktPrcGrp#     = PG03.PRC_GRP_TP_CD(+)
        ORDER BY
            PMPAC.PRC_MKT_PRMO_AUDC_CTRL_PK
    </statement>

    <resultMap id="result.getMktAudList"            class="NMAL7100_XCMsg">
        <result property="pubFlg_MX"                column="PUB_FLG_01"                  javaType="EZDCStringItem"/>
        <result property="mktPrmoAudcCatgCd_X1"     column="PRC_CUST_AUDC_CATG_TP_CD_01" javaType="EZDCStringItem"/>
        <result property="xxScrItem30Txt_X1"        column="CUST_AUDC_VAL_01"            javaType="EZDCStringItem"/>
        <result property="xxRecNmTxt_X1"            column="CUST_AUDC_NM_01"             javaType="EZDCStringItem"/>
        <result property="mktPrmoAudcCatgCd_X2"     column="PRC_CUST_AUDC_CATG_TP_CD_02" javaType="EZDCStringItem"/>
        <result property="xxScrItem30Txt_X2"        column="CUST_AUDC_VAL_02"            javaType="EZDCStringItem"/>
        <result property="xxRecNmTxt_X2"            column="CUST_AUDC_NM_02"             javaType="EZDCStringItem"/>
        <result property="mktPrmoAudcCatgCd_X3"     column="PRC_CUST_AUDC_CATG_TP_CD_03" javaType="EZDCStringItem"/>
        <result property="xxScrItem30Txt_X3"        column="CUST_AUDC_VAL_03"            javaType="EZDCStringItem"/>
        <result property="xxRecNmTxt_X3"            column="CUST_AUDC_NM_03"             javaType="EZDCStringItem"/>
        <result property="effFromDt_MX"             column="EFF_FROM_DT"                 javaType="EZDCDateItem"/>
        <result property="effThruDt_MX"             column="EFF_THRU_DT"                 javaType="EZDCDateItem"/>
        <result property="prcMktPrmoAudcCtrlPk_MX"  column="PRC_MKT_PRMO_AUDC_CTRL_PK"   javaType="EZDCBigDecimalItem"/>
        <result property="ezUpTime_MX"              column="EZUPTIME"                    javaType="EZDCStringItem"/>
        <result property="ezUpTimeZone_MX"          column="EZUPTIMEZONE"                javaType="EZDCStringItem"/>
    </resultMap>

    <statement id="getPrcMktPrmoTp" parameterClass="Map" resultClass="Map">
        SELECT
            PMPT.PRC_MKT_PRMO_TP_DESC_TXT                 -- Price Marketing Promotion Type Description Text
        FROM
            PRC_MKT_PRMO_TP      PMPT       -- Price Marketing Promotion Type
        WHERE
            PMPT.EZCANCELFLAG           = 0
            AND PMPT.GLBL_CMPY_CD       = #glblCmpyCd#
            AND PMPT.PRC_MKT_PRMO_TP_CD = #prcMktPrmoTpCd#
    </statement>

    <statement id="getPrcGrp" parameterClass="Map" resultClass="Map">
        SELECT PG.PRC_GRP_PK
             , PG.PRC_GRP_NM
          FROM PRC_GRP PG
         WHERE PG.GLBL_CMPY_CD = #glblCmpyCd#
           AND PG.EZCANCELFLAG = '0'
        <isEqual property="prcGrpTpCd" compareValue="03">
           AND PG.PRC_GRP_PK    = #prcGrpPk#
        </isEqual>
        <isEqual property="prcGrpTpCd" compareValue="04">
           AND PG.PRC_GRP_NM    = #prcGrpNm#
        </isEqual>
           AND PG.PRC_GRP_TP_CD = #prcGrpTpCd#
    </statement>

    <statement id="getPromItmCd" parameterClass="Map" resultClass="String">
        SELECT
             M.MDSE_DESC_SHORT_TXT
        FROM
            MDSE                 M           -- Entity Definition
            ,MDSE_TP_CTX_TP       MTCT       -- Merchandise Type Context Type
            ,MDSE_TP_VAL_SET      MTVS       -- Merchandise Type Value Set
        WHERE
            M.GLBL_CMPY_CD                  = #glblCmpyCd#
            AND M.EZCANCELFLAG              = 0
            AND MTCT.EZCANCELFLAG           = 0
            AND MTCT.GLBL_CMPY_CD           = #glblCmpyCd#
            AND MTVS.EZCANCELFLAG           = 0
            AND MTVS.GLBL_CMPY_CD           = #glblCmpyCd#
            AND M.MDSE_CD                   = #mdseCd#
            AND M.COA_MDSE_TP_CD        $sign$ MTVS.COA_MDSE_TP_CD
            AND MTVS.MDSE_TP_CTX_TP_CD      = MTCT.MDSE_TP_CTX_TP_CD 
            AND MTCT.MDSE_TP_CTX_TP_CD      = #mdseTpCtxTpCd#
    </statement>

    <statement id="getDsAcctNm" parameterClass="Map" resultClass="String">
        SELECT
            DS_ACCT_NM
        FROM
            SELL_TO_CUST A
        WHERE
                A.GLBL_CMPY_CD      = #glblCmpyCd#
            AND A.EZCANCELFLAG      = '0'
            AND A.SELL_TO_CUST_CD   = #dsAcctNum#
    </statement>

    <statement id="getDsAcctNmByCsmp" parameterClass="Map" resultClass="String">
        SELECT
            DS_ACCT_NUM
        FROM
            CSMP_CONTR A
        WHERE
                A.GLBL_CMPY_CD      = #glblCmpyCd#
            AND A.EZCANCELFLAG      = '0'
            AND A.CSMP_NUM          = #csmpNum#
    </statement>


    <statement id="getMdlId" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            T_MDL_ID
        FROM
            MDL_NM A
        WHERE
                A.T_GLBL_CMPY_CD    = #glblCmpyCd#
            AND A.EZCANCELFLAG      = '0'
            AND A.T_MDL_NM          = #tMdlNm#
    </statement>


</sqlMap>
