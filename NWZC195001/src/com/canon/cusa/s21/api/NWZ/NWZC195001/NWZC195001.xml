<?xml version="1.0" encoding="UTF-8"?>

<sqlMap namespace="NWZC195001">
    <statement id="countManualPriceChange" parameterClass="Map" resultMap="Integer">
        SELECT
            COUNT(A.ORD_PRC_CALC_BASE_PK)
        FROM
            ORD_PRC_CALC_BASE A
        WHERE
                A.GLBL_CMPY_CD  = #glblCmpyCd#
            AND A.CPO_ORD_NUM   = #cpoOrdNum#
            AND A.EZCANCELFLAG  = 0
            AND (
                    (A.PRC_COND_TP_CD  = #prcCondTpManualPrice#)
                 OR
                    (
                     <iterate property="prcDtlGrpCdList" var="prcDtlGrpCd[]" open="A.PRC_DTL_GRP_CD IN (" close=")" conjunction=",">
                         #prcDtlGrpCd[]#
                     </iterate>
                     AND (   A.PRC_COND_MAN_ENTRY_FLG = 'Y'
                          OR A.PRC_COND_MAN_ADD_FLG   = 'Y'
                          OR A.PRC_COND_MAN_DEL_FLG   = 'Y')
                    )
                )
    </statement>
</sqlMap>
