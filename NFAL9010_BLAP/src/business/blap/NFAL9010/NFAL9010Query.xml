<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NFAL9010Query">

	<typeAlias alias="NFAL9010CMsg"		type="business.blap.NFAL9010.NFAL9010CMsg"/>
	<typeAlias alias="NFAL9010_ASMsg"	type="business.blap.NFAL9010.NFAL9010_ASMsg"/>
	
	<statement id="getResultCountNFAL9010" parameterClass="Map" resultMap="result.NFAL9010CMsg">
		SELECT 
			COUNT(DISTINCT CA.COA_ACCT_CD) AS XX_TOT_CNT 
		FROM 
			COA_ACCT		CA
		,	TRIAL_BAL_TP	TB
		,	PL_CATG			PC
		WHERE 
			CA.EZCANCELFLAG		= '0'
		AND	CA.GLBL_CMPY_CD		=	#glblCmpyCd#
		AND	(TB.EZCANCELFLAG    = '0'  OR TB.EZCANCELFLAG  IS NULL)
		AND	(PC.EZCANCELFLAG    = '0'  OR PC.EZCANCELFLAG  IS NULL)
		AND	CA.GLBL_CMPY_CD    	= TB.GLBL_CMPY_CD(+)
		AND	CA.GLBL_CMPY_CD    	= PC.GLBL_CMPY_CD(+)
		AND	CA.TRIAL_BAL_TP_CD	= TB.TRIAL_BAL_TP_CD(+)
		AND	CA.PL_CATG_CD	    = PC.PL_CATG_CD(+)
		<isNotNull	property="bizMsg.coaAcctCd">   
		AND	CA.COA_ACCT_CD		LIKE	#coaAcctCd#
		</isNotNull>
		<isNotNull	property="bizMsg.coaAcctNm">   
		AND	CA.COA_ACCT_NM		LIKE	#coaAcctNm#
		</isNotNull>
		<isNotNull	property="bizMsg.trialBalTpCd_3">   
		AND CA.TRIAL_BAL_TP_CD 	= #trialBalTpCd#
		</isNotNull>
		<isNotNull	property="bizMsg.drCrTpCd_3">   
		AND	TB.DR_CR_TP_CD		= #drCrTpCd#
		</isNotNull>			
		<isNotNull	property="bizMsg.bsPlTpCd_3">   
		AND	TB.BS_PL_TP_CD		= #bsPlTpCd#
		</isNotNull>
		<isNotNull	property="bizMsg.plCatgCd_3">   
		AND	CA.PL_CATG_CD		= #plCatgCd#
		</isNotNull>
	</statement>
	
	<resultMap id="result.NFAL9010CMsg" class="NFAL9010CMsg">
		<result property="xxTotCnt"	column="XX_TOT_CNT"	 javaType="EZDSBigDecimalItem"/>
	</resultMap>
	
	<statement id="getResultNFAL9010" parameterClass="Map" resultMap="result.NFAL9010_ASMsg">
		SELECT
			COA_ACCT_CD
		,	COA_ACCT_NM
		,	TRIAL_BAL_TP_CD
		,	TRIAL_BAL_TP_NM
		FROM (
			SELECT 
				CA.COA_ACCT_CD		AS COA_ACCT_CD
			,	CA.COA_ACCT_NM		AS COA_ACCT_NM
			,	CA.TRIAL_BAL_TP_CD	AS TRIAL_BAL_TP_CD
			,	TB.TRIAL_BAL_TP_NM	AS TRIAL_BAL_TP_NM
			,	TB.DR_CR_TP_CD		AS DR_CR_TP_CD
			,	TB.DR_CR_TP_NM		AS DR_CR_TP_NM
			,	TB.BS_PL_TP_CD		AS BS_PL_TP_CD
			,	TB.BS_PL_TP_NM		AS BS_PL_TP_NM
			FROM 
				COA_ACCT		CA
			,	TRIAL_BAL_TP	TB
			WHERE 
				CA.EZCANCELFLAG		= '0'
			AND	CA.GLBL_CMPY_CD		=	#glblCmpyCd#
			AND	(TB.EZCANCELFLAG    = '0'  OR TB.EZCANCELFLAG  IS NULL)
			AND	CA.GLBL_CMPY_CD    	= TB.GLBL_CMPY_CD(+)
			AND	CA.TRIAL_BAL_TP_CD	= TB.TRIAL_BAL_TP_CD(+)
			<isNotNull	property="bizMsg.coaAcctCd">   
			AND	CA.COA_ACCT_CD		LIKE	#coaAcctCd#
			</isNotNull>
			<isNotNull	property="bizMsg.coaAcctNm">   
			AND	CA.COA_ACCT_NM		LIKE	#coaAcctNm#
			</isNotNull>
			<isNotNull	property="bizMsg.trialBalTpCd_3">   
			AND CA.TRIAL_BAL_TP_CD 	= #trialBalTpCd#
			</isNotNull>
			ORDER BY
				CA.COA_ACCT_CD
		) WHERE ROWNUM &lt; #rowNum#
	</statement>
	
	<statement id="back_getResultNFAL9010" parameterClass="Map" resultMap="result.NFAL9010_ASMsg">
		SELECT
			COA_ACCT_CD
		,	COA_ACCT_NM
		,	TRIAL_BAL_TP_CD
		,	TRIAL_BAL_TP_NM
		,	DR_CR_TP_CD
		,	DR_CR_TP_NM
		,	BS_PL_TP_CD
		,	BS_PL_TP_NM
		,	PL_CATG_CD
		,	PL_CATG_NM
		,	FRONT_ENTRY_FLG
		,	CC_EXP_FLG
		FROM (
			SELECT 
				CA.COA_ACCT_CD		AS COA_ACCT_CD
			,	CA.COA_ACCT_NM		AS COA_ACCT_NM
			,	CA.TRIAL_BAL_TP_CD	AS TRIAL_BAL_TP_CD
			,	TB.TRIAL_BAL_TP_NM	AS TRIAL_BAL_TP_NM
			,	TB.DR_CR_TP_CD		AS DR_CR_TP_CD
			,	TB.DR_CR_TP_NM		AS DR_CR_TP_NM
			,	TB.BS_PL_TP_CD		AS BS_PL_TP_CD
			,	TB.BS_PL_TP_NM		AS BS_PL_TP_NM
			,	CA.PL_CATG_CD		AS PL_CATG_CD
			,	PC.PL_CATG_NM		AS PL_CATG_NM
			,	CA.FRONT_ENTRY_FLG	AS FRONT_ENTRY_FLG
			,	CA.CC_EXP_FLG		AS CC_EXP_FLG
			FROM 
				COA_ACCT		CA
			,	TRIAL_BAL_TP	TB
			,	PL_CATG			PC
			WHERE 
				CA.EZCANCELFLAG		= '0'
			AND	CA.GLBL_CMPY_CD		=	#glblCmpyCd#
			AND	(TB.EZCANCELFLAG    = '0'  OR TB.EZCANCELFLAG  IS NULL)
			AND	(PC.EZCANCELFLAG    = '0'  OR PC.EZCANCELFLAG  IS NULL)
			AND	CA.GLBL_CMPY_CD    	= TB.GLBL_CMPY_CD(+)
			AND	CA.GLBL_CMPY_CD    	= PC.GLBL_CMPY_CD(+)
			AND	CA.TRIAL_BAL_TP_CD	= TB.TRIAL_BAL_TP_CD(+)
			AND	CA.PL_CATG_CD	    = PC.PL_CATG_CD(+)
			<isNotNull	property="bizMsg.coaAcctCd">   
			AND	CA.COA_ACCT_CD		LIKE	#coaAcctCd#
			</isNotNull>
			<isNotNull	property="bizMsg.coaAcctNm">   
			AND	CA.COA_ACCT_NM		LIKE	#coaAcctNm#
			</isNotNull>
			<isNotNull	property="bizMsg.trialBalTpCd_3">   
			AND CA.TRIAL_BAL_TP_CD 	= #trialBalTpCd#
			</isNotNull>
			<isNotNull	property="bizMsg.drCrTpCd_3">   
			AND	TB.DR_CR_TP_CD		= #drCrTpCd#
			</isNotNull>			
			<isNotNull	property="bizMsg.bsPlTpCd_3">   
			AND	TB.BS_PL_TP_CD		= #bsPlTpCd#
			</isNotNull>
			<isNotNull	property="bizMsg.plCatgCd_3">   
			AND	CA.PL_CATG_CD		= #plCatgCd#
			</isNotNull>
			ORDER BY
				CA.COA_ACCT_CD
		) WHERE ROWNUM &lt; #rowNum#
	</statement>
	
	<resultMap id="result.NFAL9010_ASMsg" 	class="NFAL9010_ASMsg">
		<result property="coaAcctCd_A"		column="COA_ACCT_CD"	  	javaType="EZDSStringItem"/>
		<result property="coaAcctNm_A"		column="COA_ACCT_NM" 		javaType="EZDSStringItem"/>
		<result property="trialBalTpCd_A"	column="TRIAL_BAL_TP_CD"	javaType="EZDSStringItem"/>		
		<result property="trialBalTpNm_A"	column="TRIAL_BAL_TP_NM"	javaType="EZDSStringItem"/>	
	</resultMap>
	
	<statement id="getTrialBalTp"  parameterClass="Map" resultClass="Map">
		SELECT
		  TRIAL_BAL_TP_CD
		, TRIAL_BAL_TP_NM
		FROM
		  TRIAL_BAL_TP
		WHERE
		  	EZCANCELFLAG	= '0' 
		AND GLBL_CMPY_CD	= #glblCmpyCd#
		ORDER BY
		  TRIAL_BAL_TP_SORT_NUM
	</statement>
	
	<statement id="getDrCrTp"  parameterClass="Map" resultClass="Map">
		SELECT
		  DR_CR_TP_CD
		, DR_CR_TP_NM
		FROM
		  TRIAL_BAL_TP
		WHERE
		  	EZCANCELFLAG	= '0' 
		AND GLBL_CMPY_CD	= #glblCmpyCd#
		GROUP BY 
		  DR_CR_TP_CD
		, DR_CR_TP_NM		
	</statement>
	
	<statement id="getBsPl"  parameterClass="Map" resultClass="Map">
		SELECT
			BS_PL_TP_CD
		,	BS_PL_TP_NM
		FROM
			TRIAL_BAL_TP
		WHERE
				EZCANCELFLAG	= '0' 
		AND 	GLBL_CMPY_CD	= #glblCmpyCd#
		GROUP BY 
			BS_PL_TP_CD
		,	BS_PL_TP_NM
		ORDER BY
			BS_PL_TP_CD	
	</statement>
	
	<statement id="getPlCatg"  parameterClass="Map" resultClass="Map">
		SELECT
		  PL_CATG_CD
		, PL_CATG_NM
		FROM
		  PL_CATG
		WHERE
		  	EZCANCELFLAG	= '0' 
		AND GLBL_CMPY_CD	= #glblCmpyCd#
		ORDER BY
		  PL_CATG_SORT_NUM
	</statement>

</sqlMap>
