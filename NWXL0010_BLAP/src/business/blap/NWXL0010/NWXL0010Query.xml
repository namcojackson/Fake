<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NWXL0010Query">


	<typeAlias alias="NWXL0010CMsg"		type="business.blap.NWXL0010.NWXL0010CMsg"/>
	<typeAlias alias="NWXL0010_ASMsg"	type="business.blap.NWXL0010.NWXL0010_ASMsg"/>
	<typeAlias alias="NWXL0010_BSMsg"	type="business.blap.NWXL0010.NWXL0010_BSMsg"/>
	
	
	<statement id="execRptSQL" parameterClass="String" resultClass="Map">
		$SQL$
	</statement>


	<statement id="getRptSqlInfoList" parameterClass="Map" resultMap="result.getRptSqlInfoList">
		SELECT
		  	RPT_SQL_ID
		  , RPT_SQL_NM
		  , RPT_SQL_DESC_TXT
		  , RPT_SQL_FUNC_ID
		  , RPT_SQL_DATA_TMG_TXT
		  , RPT_SQL_REQ_PSN_CD
		  , RPT_SQL_REQ_DT

		FROM
		  RPT_SQL

		WHERE
				GLBL_CMPY_CD = #glblCmpyCd#
			AND EZCANCELFLAG = '0'
		  <isNotNull property="cMsg.rptSqlId">
		  	AND RPT_SQL_ID       LIKE #cMsg.rptSqlId# || '%'
		  </isNotNull>
		  <isNotNull property="cMsg.rptSqlNm">
		  	AND RPT_SQL_NM		 LIKE #cMsg.rptSqlNm# || '%'
		  </isNotNull>			
		  <isNotNull property="cMsg.rptSqlDescTxt">
		  	AND RPT_SQL_DESC_TXT LIKE #cMsg.rptSqlDescTxt# || '%'
		  </isNotNull>
		  
		  <iterate property="funcIdList" var="funcId[]" open="AND (" close=")" conjunction=" OR ">
		  	RPT_SQL_FUNC_ID = #funcId[]#
		  </iterate>
		
		ORDER BY
		  RPT_SQL_ID
	</statement>	
    <resultMap id="result.getRptSqlInfoList" class="NWXL0010_ASMsg">
        <result property="rptSqlId_A"			column="RPT_SQL_ID"				javaType="EZDSStringItem"/>
        <result property="rptSqlNm_A"			column="RPT_SQL_NM"				javaType="EZDSStringItem"/>
        <result property="rptSqlDescTxt_A"		column="RPT_SQL_DESC_TXT"		javaType="EZDSStringItem"/>
        <result property="rptSqlFuncId_A"		column="RPT_SQL_FUNC_ID"		javaType="EZDSStringItem"/>
        <result property="rptSqlDataTmgTxt_A"	column="RPT_SQL_DATA_TMG_TXT"	javaType="EZDSStringItem"/>
        <result property="rptSqlReqPsnCd_A"		column="RPT_SQL_REQ_PSN_CD"		javaType="EZDSStringItem"/>
        <result property="rptSqlReqDt_A"		column="RPT_SQL_REQ_DT"			javaType="EZDSDateItem"/>
    </resultMap>


	<statement id="getRptSqlInfo" parameterClass="Map" resultMap="result.getRptSqlInfo">
		SELECT
		    RPT_SQL_ID
		  , RPT_SQL_NM
		  , RPT_SQL_DESC_TXT
		  , RPT_SQL_FUNC_ID
		  , RPT_SQL_DATA_TMG_TXT
		  , RPT_SQL_REQ_PSN_CD
		  , RPT_SQL_REQ_DT
		  , RPT_SQL_RGTN_PSN_CD
		  , RPT_SQL_RGTN_DT
		  , EZUPTIME
		  , EZUPTIMEZONE
		  
		FROM
		  RPT_SQL
		
		WHERE
			  GLBL_CMPY_CD = #glblCmpyCd#
		  AND RPT_SQL_ID   = #cMsg.rptSqlId_01#
		  AND EZCANCELFLAG = #ezcancelflag#
		  
		  <iterate property="funcIdList" var="funcId[]" open="AND (" close=")" conjunction=" OR ">
		  	RPT_SQL_FUNC_ID = #funcId[]#
		  </iterate>
		  
	</statement>
    <resultMap id="result.getRptSqlInfo" class="NWXL0010CMsg">
        <result property="rptSqlId_01"			column="RPT_SQL_ID"				javaType="EZDCStringItem"/>
        <result property="rptSqlNm_01"			column="RPT_SQL_NM"				javaType="EZDCStringItem"/>
        <result property="rptSqlFuncId_01"		column="RPT_SQL_FUNC_ID"		javaType="EZDCStringItem"/>
        <result property="rptSqlDataTmgTxt_01"	column="RPT_SQL_DATA_TMG_TXT"	javaType="EZDCStringItem"/>
        <result property="rptSqlReqPsnCd_01"	column="RPT_SQL_REQ_PSN_CD"		javaType="EZDCStringItem"/>
        <result property="rptSqlReqDt_01"		column="RPT_SQL_REQ_DT"			javaType="EZDCDateItem"/>
        <result property="rptSqlRgtnPsnCd_01"	column="RPT_SQL_RGTN_PSN_CD"	javaType="EZDCStringItem"/>
        <result property="rptSqlRgtnDt_01"		column="RPT_SQL_RGTN_DT"		javaType="EZDCDateItem"/>
        <result property="rptSqlDescTxt_01"		column="RPT_SQL_DESC_TXT"		javaType="EZDCStringItem"/>
        <result property="ezUpTime"				column="EZUPTIME"				javaType="EZDCStringItem"/>
        <result property="ezUpTimeZone"			column="EZUPTIMEZONE"			javaType="EZDCStringItem"/>
    </resultMap>
	

	<statement id="getRptDownloadHistoryList" parameterClass="Map" resultMap="result.getRptDownloadHistoryList">
		SELECT
		    DOC_ID					AS 	RPT_SQL_ID
		  , BIZ_PROC_CMNT_TXT_01	AS 	RPT_SQL_NM
		  , BIZ_PROC_CMNT_TXT_02	AS 	RPT_SQL_REQ_PSN_CD
		  , BIZ_PROC_CMNT_TXT_03	AS 	RPT_SQL_REQ_DT

		FROM
		  BIZ_PROC_LOG

		WHERE
		    	PROC_ID      = #bizId#
		  	AND PRNT_DOC_ID  = #cMsg.rptSqlId_A#
		  	AND DOC_ID       = #cMsg.rptSqlId_A#
		    AND EZCANCELFLAG = '0'

		ORDER BY
		  DOC_ID
	</statement>	
    <resultMap id="result.getRptDownloadHistoryList" class="NWXL0010_BSMsg">
        <result property="rptSqlId_B"			column="RPT_SQL_ID"				javaType="EZDSStringItem"/>
        <result property="rptSqlNm_B"			column="RPT_SQL_NM"				javaType="EZDSStringItem"/>
        <result property="rptSqlReqPsnCd_B"		column="RPT_SQL_REQ_PSN_CD"		javaType="EZDSStringItem"/>
        <result property="rptSqlReqDt_B"		column="RPT_SQL_REQ_DT"			javaType="EZDSDateItem"/>
    </resultMap>
	
			
</sqlMap>
