<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NSAB058001">
    <statement id="getDsOrgUnitRg" parameterClass="Map" resultClass="Map">
        SELECT
             C.ORG_NM
            ,C.ORG_DESC_TXT
<!-- START 2016/07/29 T.Tomita [QC#12534, MOD] -->
<!--        ,C.TRTY_GRP_TP_CD -->
            ,C.LINE_BIZ_TP_CD
<!-- END 2016/07/29 T.Tomita [QC#12534, MOD] -->
            ,C.EFF_FROM_DT
            ,C.EFF_THRU_DT
            ,C.ORG_CD
        FROM
             STRU_DFN          A
            ,ORG_HRCH_STRU_DFN B
            ,DS_ORG_UNIT       C
        WHERE
                A.EZCANCELFLAG    = '0'
            AND A.GLBL_CMPY_CD    = #glblCmpyCd#
            AND A.RG_FLG          = 'Y'
            AND B.EZCANCELFLAG    = '0'
            AND A.GLBL_CMPY_CD    = B.GLBL_CMPY_CD
            AND A.STRU_DFN_CD     = B.STRU_DFN_CD
            AND C.EZCANCELFLAG    = '0'
            AND B.GLBL_CMPY_CD    = C.GLBL_CMPY_CD
            AND B.ORG_STRU_TP_CD  = C.ORG_STRU_TP_CD
            AND B.BIZ_AREA_ORG_CD = C.FIRST_ORG_CD
            AND B.ORG_TIER_CD     = C.ORG_TIER_CD
            AND C.FIRST_ORG_CD    = #firstOrgCd#
        ORDER BY
            C.ORG_CD
    </statement>

    <statement id="getSvcRg" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            D.SVC_RG_PK
        FROM
            SVC_RG D
        WHERE
                D.EZCANCELFLAG = '0'
            AND D.GLBL_CMPY_CD = #glblCmpyCd#
            AND NOT EXISTS (
                SELECT
                    1
                FROM
                     STRU_DFN          A
                    ,ORG_HRCH_STRU_DFN B
                    ,DS_ORG_UNIT       C
                WHERE
                        A.EZCANCELFLAG    = '0'
                    AND A.GLBL_CMPY_CD    = D.GLBL_CMPY_CD
                    AND A.RG_FLG          = 'Y'
                    AND B.EZCANCELFLAG    = '0'
                    AND A.GLBL_CMPY_CD    = B.GLBL_CMPY_CD
                    AND A.STRU_DFN_CD     = B.STRU_DFN_CD
                    AND C.EZCANCELFLAG    = '0'
                    AND B.GLBL_CMPY_CD    = C.GLBL_CMPY_CD
                    AND B.ORG_STRU_TP_CD  = C.ORG_STRU_TP_CD
                    AND B.BIZ_AREA_ORG_CD = C.FIRST_ORG_CD
                    AND B.ORG_TIER_CD     = C.ORG_TIER_CD
                    AND C.FIRST_ORG_CD    = #firstOrgCd#
                    AND C.ORG_CD          = D.ORG_CD
                )
        ORDER BY
            D.SVC_RG_PK
    </statement>

    <statement id="getDsOrgUnitBr" parameterClass="Map" resultClass="Map">
        SELECT
             C.ORG_NM
            ,C.ORG_DESC_TXT
            ,C.AUTO_EST_FLG
            ,C.EFF_FROM_DT
            ,C.EFF_THRU_DT
            ,C.ORG_CD
        FROM
             STRU_DFN          A
            ,ORG_HRCH_STRU_DFN B
            ,DS_ORG_UNIT       C
        WHERE
                A.EZCANCELFLAG    = '0'
            AND A.GLBL_CMPY_CD    = #glblCmpyCd#
            AND A.BR_FLG          = 'Y'
            AND B.EZCANCELFLAG    = '0'
            AND A.GLBL_CMPY_CD    = B.GLBL_CMPY_CD
            AND A.STRU_DFN_CD     = B.STRU_DFN_CD
            AND C.EZCANCELFLAG    = '0'
            AND B.GLBL_CMPY_CD    = C.GLBL_CMPY_CD
            AND B.ORG_STRU_TP_CD  = C.ORG_STRU_TP_CD
            AND B.BIZ_AREA_ORG_CD = C.FIRST_ORG_CD
            AND B.ORG_TIER_CD     = C.ORG_TIER_CD
            AND C.FIRST_ORG_CD    = #firstOrgCd#
        ORDER BY
            C.ORG_CD
    </statement>

    <statement id="getSvcContrBr" parameterClass="Map" resultClass="String">
        SELECT
            D.SVC_CONTR_BR_CD
        FROM
            SVC_CONTR_BR D
        WHERE
                D.EZCANCELFLAG = '0'
            AND D.GLBL_CMPY_CD = #glblCmpyCd#
            AND NOT EXISTS (
                SELECT
                    1
                FROM
                     STRU_DFN          A
                    ,ORG_HRCH_STRU_DFN B
                    ,DS_ORG_UNIT       C
                WHERE
                        A.EZCANCELFLAG    = '0'
                    AND A.GLBL_CMPY_CD    = D.GLBL_CMPY_CD
                    AND A.BR_FLG          = 'Y'
                    AND B.EZCANCELFLAG    = '0'
                    AND A.GLBL_CMPY_CD    = B.GLBL_CMPY_CD
                    AND A.STRU_DFN_CD     = B.STRU_DFN_CD
                    AND C.EZCANCELFLAG    = '0'
                    AND B.GLBL_CMPY_CD    = C.GLBL_CMPY_CD
                    AND B.ORG_STRU_TP_CD  = C.ORG_STRU_TP_CD
                    AND B.BIZ_AREA_ORG_CD = C.FIRST_ORG_CD
                    AND B.ORG_TIER_CD     = C.ORG_TIER_CD
                    AND C.FIRST_ORG_CD    = #firstOrgCd#
                    AND C.ORG_CD          = D.ORG_CD
                )
        ORDER BY
            D.SVC_CONTR_BR_CD
    </statement>

    <statement id="getDsOrgUnitRgBr" parameterClass="Map" resultClass="Map">
        WITH TMP_PRNT_ORG AS (
            SELECT
                 A.GLBL_CMPY_CD
                ,A.ORG_CD
                ,A.PRNT_ORG_CD
                ,A.ORG_STRU_TP_CD
                ,D.RG_FLG
                ,C.ORG_HRCH_STRU_DFN_PK
                ,D.STRU_DFN_CD
                ,E.SVC_RG_PK
            FROM
                 DS_ORG_RELN       A
                ,DS_ORG_UNIT       B
                ,ORG_HRCH_STRU_DFN C
                ,STRU_DFN          D
                ,SVC_RG            E
            WHERE
                    A.EZCANCELFLAG       = '0'
                AND A.GLBL_CMPY_CD       = #glblCmpyCd#
                AND B.EZCANCELFLAG       = '0'
                AND A.GLBL_CMPY_CD       = B.GLBL_CMPY_CD
                AND A.PRNT_ORG_CD        = B.ORG_CD
                AND A.ORG_STRU_TP_CD     = B.ORG_STRU_TP_CD
                AND C.EZCANCELFLAG       = '0'
                AND B.GLBL_CMPY_CD       = C.GLBL_CMPY_CD
                AND B.ORG_STRU_TP_CD     = C.ORG_STRU_TP_CD
                AND B.ORG_TIER_CD        = C.ORG_TIER_CD
                AND C.BIZ_AREA_ORG_CD    = #firstOrgCd#
                AND D.EZCANCELFLAG       = '0'
                AND C.GLBL_CMPY_CD       = D.GLBL_CMPY_CD
                AND C.STRU_DFN_CD        = D.STRU_DFN_CD
<!-- START 2016/12/14 [QC#16208, MOD] -->
                AND E.EZCANCELFLAG(+)    = '0'
                AND B.GLBL_CMPY_CD       = E.GLBL_CMPY_CD(+)
                AND B.ORG_CD             = E.ORG_CD(+)
<!-- END 2016/12/14 [QC#16208, MOD] -->
        )
        
        SELECT
             H.ORG_CD          AS SVC_BR_ORG_CD
<!-- START 2016/12/12 [QC#16273, ADD] -->
            ,H.ORG_NM          AS SVC_BR_ORG_NM
<!-- END   2016/12/12 [QC#16273, ADD] -->
            ,I.SVC_CONTR_BR_CD AS SVC_CONTR_BR_CD
            ,CASE
                WHEN P01.RG_FLG = 'Y' THEN P01.PRNT_ORG_CD
                WHEN P02.RG_FLG = 'Y' THEN P02.PRNT_ORG_CD
                WHEN P03.RG_FLG = 'Y' THEN P03.PRNT_ORG_CD
                WHEN P04.RG_FLG = 'Y' THEN P04.PRNT_ORG_CD
                WHEN P05.RG_FLG = 'Y' THEN P05.PRNT_ORG_CD
                WHEN P06.RG_FLG = 'Y' THEN P06.PRNT_ORG_CD
                WHEN P07.RG_FLG = 'Y' THEN P07.PRNT_ORG_CD
                WHEN P08.RG_FLG = 'Y' THEN P08.PRNT_ORG_CD
                WHEN P09.RG_FLG = 'Y' THEN P09.PRNT_ORG_CD
                WHEN P10.RG_FLG = 'Y' THEN P10.PRNT_ORG_CD
             END AS SVC_RG_ORG_CD
            ,CASE
                WHEN P01.RG_FLG = 'Y' THEN P01.SVC_RG_PK
                WHEN P02.RG_FLG = 'Y' THEN P02.SVC_RG_PK
                WHEN P03.RG_FLG = 'Y' THEN P03.SVC_RG_PK
                WHEN P04.RG_FLG = 'Y' THEN P04.SVC_RG_PK
                WHEN P05.RG_FLG = 'Y' THEN P05.SVC_RG_PK
                WHEN P06.RG_FLG = 'Y' THEN P06.SVC_RG_PK
                WHEN P07.RG_FLG = 'Y' THEN P07.SVC_RG_PK
                WHEN P08.RG_FLG = 'Y' THEN P08.SVC_RG_PK
                WHEN P09.RG_FLG = 'Y' THEN P09.SVC_RG_PK
                WHEN P10.RG_FLG = 'Y' THEN P10.SVC_RG_PK
             END AS SVC_RG_PK
        FROM
             STRU_DFN          F
            ,ORG_HRCH_STRU_DFN G
            ,DS_ORG_UNIT       H
            ,(SELECT
                  SUBSTR(C.ORG_NM, 1, 3) AS SVC_CONTR_BR_CD
                 ,C.ORG_CD
                 ,C.GLBL_CMPY_CD
                 ,C.EZCANCELFLAG
              FROM
                  STRU_DFN          A
                 ,ORG_HRCH_STRU_DFN B
                 ,DS_ORG_UNIT       C
              WHERE
                      A.EZCANCELFLAG    = '0'
                  AND A.GLBL_CMPY_CD    = #glblCmpyCd#
                  AND A.BR_FLG          = 'Y'
                  AND B.EZCANCELFLAG    = '0'
                  AND A.GLBL_CMPY_CD    = B.GLBL_CMPY_CD
                  AND A.STRU_DFN_CD     = B.STRU_DFN_CD
                  AND C.EZCANCELFLAG    = '0'
                  AND B.GLBL_CMPY_CD    = C.GLBL_CMPY_CD
                  AND B.ORG_STRU_TP_CD  = C.ORG_STRU_TP_CD
                  AND B.BIZ_AREA_ORG_CD = C.FIRST_ORG_CD
                  AND B.ORG_TIER_CD     = C.ORG_TIER_CD
                  AND C.FIRST_ORG_CD    = #firstOrgCd#
             )      I
            ,TMP_PRNT_ORG      P01
            ,TMP_PRNT_ORG      P02
            ,TMP_PRNT_ORG      P03
            ,TMP_PRNT_ORG      P04
            ,TMP_PRNT_ORG      P05
            ,TMP_PRNT_ORG      P06
            ,TMP_PRNT_ORG      P07
            ,TMP_PRNT_ORG      P08
            ,TMP_PRNT_ORG      P09
            ,TMP_PRNT_ORG      P10
        WHERE
                F.EZCANCELFLAG     = '0'
            AND F.GLBL_CMPY_CD     = #glblCmpyCd#
            AND F.BR_FLG           = 'Y'
            AND G.EZCANCELFLAG     = '0'
            AND F.GLBL_CMPY_CD     = G.GLBL_CMPY_CD
            AND F.STRU_DFN_CD      = G.STRU_DFN_CD
            AND G.BIZ_AREA_ORG_CD  = #firstOrgCd#
            AND H.EZCANCELFLAG     = '0'
            AND G.GLBL_CMPY_CD     = H.GLBL_CMPY_CD
            AND G.ORG_STRU_TP_CD   = H.ORG_STRU_TP_CD
            AND G.BIZ_AREA_ORG_CD  = H.FIRST_ORG_CD
            AND G.ORG_TIER_CD      = H.ORG_TIER_CD
            AND I.EZCANCELFLAG     = '0'
            AND H.GLBL_CMPY_CD     = I.GLBL_CMPY_CD
            AND H.ORG_CD           = I.ORG_CD
            AND H.GLBL_CMPY_CD     = P01.GLBL_CMPY_CD(+)
            AND H.ORG_CD           = P01.ORG_CD(+)
            AND H.ORG_STRU_TP_CD   = P01.ORG_STRU_TP_CD(+)
            AND P01.GLBL_CMPY_CD   = P02.GLBL_CMPY_CD(+)
            AND P01.PRNT_ORG_CD    = P02.ORG_CD(+)
            AND P01.ORG_STRU_TP_CD = P02.ORG_STRU_TP_CD(+)
            AND P02.GLBL_CMPY_CD   = P03.GLBL_CMPY_CD(+)
            AND P02.PRNT_ORG_CD    = P03.ORG_CD(+)
            AND P02.ORG_STRU_TP_CD = P03.ORG_STRU_TP_CD(+)
            AND P03.GLBL_CMPY_CD   = P04.GLBL_CMPY_CD(+)
            AND P03.PRNT_ORG_CD    = P04.ORG_CD(+)
            AND P03.ORG_STRU_TP_CD = P04.ORG_STRU_TP_CD(+)
            AND P04.GLBL_CMPY_CD   = P05.GLBL_CMPY_CD(+)
            AND P04.PRNT_ORG_CD    = P05.ORG_CD(+)
            AND P04.ORG_STRU_TP_CD = P05.ORG_STRU_TP_CD(+)
            AND P05.GLBL_CMPY_CD   = P06.GLBL_CMPY_CD(+)
            AND P05.PRNT_ORG_CD    = P06.ORG_CD(+)
            AND P05.ORG_STRU_TP_CD = P06.ORG_STRU_TP_CD(+)
            AND P06.GLBL_CMPY_CD   = P07.GLBL_CMPY_CD(+)
            AND P06.PRNT_ORG_CD    = P07.ORG_CD(+)
            AND P06.ORG_STRU_TP_CD = P07.ORG_STRU_TP_CD(+)
            AND P07.GLBL_CMPY_CD   = P08.GLBL_CMPY_CD(+)
            AND P07.PRNT_ORG_CD    = P08.ORG_CD(+)
            AND P07.ORG_STRU_TP_CD = P08.ORG_STRU_TP_CD(+)
            AND P08.GLBL_CMPY_CD   = P09.GLBL_CMPY_CD(+)
            AND P08.PRNT_ORG_CD    = P09.ORG_CD(+)
            AND P08.ORG_STRU_TP_CD = P09.ORG_STRU_TP_CD(+)
            AND P09.GLBL_CMPY_CD   = P10.GLBL_CMPY_CD(+)
            AND P09.PRNT_ORG_CD    = P10.ORG_CD(+)
            AND P09.ORG_STRU_TP_CD = P10.ORG_STRU_TP_CD(+)
        ORDER BY
             SVC_BR_ORG_CD
            ,SVC_RG_ORG_CD
    </statement>

    <statement id="getSvcRgBrReln" parameterClass="Map" resultClass="BigDecimal">
        WITH TMP_PRNT_ORG AS (
            SELECT
                 A.GLBL_CMPY_CD
                ,A.ORG_CD
                ,A.PRNT_ORG_CD
                ,A.ORG_STRU_TP_CD
                ,D.RG_FLG
                ,C.ORG_HRCH_STRU_DFN_PK
                ,D.STRU_DFN_CD
                ,E.SVC_RG_PK
            FROM
                 DS_ORG_RELN       A
                ,DS_ORG_UNIT       B
                ,ORG_HRCH_STRU_DFN C
                ,STRU_DFN          D
                ,SVC_RG            E
            WHERE
                    A.EZCANCELFLAG       = '0'
                AND A.GLBL_CMPY_CD       = #glblCmpyCd#
                AND B.EZCANCELFLAG       = '0'
                AND A.GLBL_CMPY_CD       = B.GLBL_CMPY_CD
                AND A.PRNT_ORG_CD        = B.ORG_CD
                AND A.ORG_STRU_TP_CD     = B.ORG_STRU_TP_CD
                AND C.EZCANCELFLAG       = '0'
                AND B.GLBL_CMPY_CD       = C.GLBL_CMPY_CD
                AND B.ORG_STRU_TP_CD     = C.ORG_STRU_TP_CD
                AND B.ORG_TIER_CD        = C.ORG_TIER_CD
                AND C.BIZ_AREA_ORG_CD    = #firstOrgCd#
                AND D.EZCANCELFLAG       = '0'
                AND C.GLBL_CMPY_CD       = D.GLBL_CMPY_CD
                AND C.STRU_DFN_CD        = D.STRU_DFN_CD
<!-- START 2016/12/14 [QC#16208, MOD] -->
                AND E.EZCANCELFLAG(+)    = '0'
                AND B.GLBL_CMPY_CD       = E.GLBL_CMPY_CD(+)
                AND B.ORG_CD             = E.ORG_CD(+)
<!-- END 2016/12/14 [QC#16208, MOD] -->
        )
        
        SELECT
            SVC_RG_BR_RELN_PK
        FROM
            SVC_RG_BR_RELN J
        WHERE
                J.EZCANCELFLAG = '0'
            AND J.GLBL_CMPY_CD = #glblCmpyCd#
            AND NOT EXISTS (
                    SELECT
                        1
                    FROM (
                        SELECT
                             H.GLBL_CMPY_CD    AS GLBL_CMPY_CD
                            ,H.ORG_CD          AS SVC_BR_ORG_CD
                            ,I.SVC_CONTR_BR_CD AS SVC_CONTR_BR_CD
                            ,CASE
                                WHEN P01.RG_FLG = 'Y' THEN P01.PRNT_ORG_CD
                                WHEN P02.RG_FLG = 'Y' THEN P02.PRNT_ORG_CD
                                WHEN P03.RG_FLG = 'Y' THEN P03.PRNT_ORG_CD
                                WHEN P04.RG_FLG = 'Y' THEN P04.PRNT_ORG_CD
                                WHEN P05.RG_FLG = 'Y' THEN P05.PRNT_ORG_CD
                                WHEN P06.RG_FLG = 'Y' THEN P06.PRNT_ORG_CD
                                WHEN P07.RG_FLG = 'Y' THEN P07.PRNT_ORG_CD
                                WHEN P08.RG_FLG = 'Y' THEN P08.PRNT_ORG_CD
                                WHEN P09.RG_FLG = 'Y' THEN P09.PRNT_ORG_CD
                                WHEN P10.RG_FLG = 'Y' THEN P10.PRNT_ORG_CD
                             END AS SVC_RG_ORG_CD
                            ,CASE
                                WHEN P01.RG_FLG = 'Y' THEN P01.SVC_RG_PK
                                WHEN P02.RG_FLG = 'Y' THEN P02.SVC_RG_PK
                                WHEN P03.RG_FLG = 'Y' THEN P03.SVC_RG_PK
                                WHEN P04.RG_FLG = 'Y' THEN P04.SVC_RG_PK
                                WHEN P05.RG_FLG = 'Y' THEN P05.SVC_RG_PK
                                WHEN P06.RG_FLG = 'Y' THEN P06.SVC_RG_PK
                                WHEN P07.RG_FLG = 'Y' THEN P07.SVC_RG_PK
                                WHEN P08.RG_FLG = 'Y' THEN P08.SVC_RG_PK
                                WHEN P09.RG_FLG = 'Y' THEN P09.SVC_RG_PK
                                WHEN P10.RG_FLG = 'Y' THEN P10.SVC_RG_PK
                             END AS SVC_RG_PK
                        FROM
                             STRU_DFN          F
                            ,ORG_HRCH_STRU_DFN G
                            ,DS_ORG_UNIT       H
                            ,(SELECT
                                  SUBSTR(C.ORG_NM, 1, 3) AS SVC_CONTR_BR_CD
                                 ,C.ORG_CD
                                 ,C.GLBL_CMPY_CD
                                 ,C.EZCANCELFLAG
                              FROM
                                  STRU_DFN          A
                                 ,ORG_HRCH_STRU_DFN B
                                 ,DS_ORG_UNIT       C
                              WHERE
                                      A.EZCANCELFLAG    = '0'
                                  AND A.GLBL_CMPY_CD    = #glblCmpyCd#
                                  AND A.BR_FLG          = 'Y'
                                  AND B.EZCANCELFLAG    = '0'
                                  AND A.GLBL_CMPY_CD    = B.GLBL_CMPY_CD
                                  AND A.STRU_DFN_CD     = B.STRU_DFN_CD
                                  AND C.EZCANCELFLAG    = '0'
                                  AND B.GLBL_CMPY_CD    = C.GLBL_CMPY_CD
                                  AND B.ORG_STRU_TP_CD  = C.ORG_STRU_TP_CD
                                  AND B.BIZ_AREA_ORG_CD = C.FIRST_ORG_CD
                                  AND B.ORG_TIER_CD     = C.ORG_TIER_CD
                                  AND C.FIRST_ORG_CD    = #firstOrgCd#
                             )       I
                            ,TMP_PRNT_ORG      P01
                            ,TMP_PRNT_ORG      P02
                            ,TMP_PRNT_ORG      P03
                            ,TMP_PRNT_ORG      P04
                            ,TMP_PRNT_ORG      P05
                            ,TMP_PRNT_ORG      P06
                            ,TMP_PRNT_ORG      P07
                            ,TMP_PRNT_ORG      P08
                            ,TMP_PRNT_ORG      P09
                            ,TMP_PRNT_ORG      P10
                        WHERE
                                F.EZCANCELFLAG     = '0'
                            AND F.GLBL_CMPY_CD     = #glblCmpyCd#
                            AND F.BR_FLG           = 'Y'
                            AND G.EZCANCELFLAG     = '0'
                            AND F.GLBL_CMPY_CD     = G.GLBL_CMPY_CD
                            AND F.STRU_DFN_CD      = G.STRU_DFN_CD
                            AND G.BIZ_AREA_ORG_CD  = #firstOrgCd#
                            AND H.EZCANCELFLAG     = '0'
                            AND G.GLBL_CMPY_CD     = H.GLBL_CMPY_CD
                            AND G.ORG_STRU_TP_CD   = H.ORG_STRU_TP_CD
                            AND G.BIZ_AREA_ORG_CD  = H.FIRST_ORG_CD
                            AND G.ORG_TIER_CD      = H.ORG_TIER_CD
                            AND I.EZCANCELFLAG     = '0'
                            AND H.GLBL_CMPY_CD     = I.GLBL_CMPY_CD
                            AND H.ORG_CD           = I.ORG_CD
                            AND H.GLBL_CMPY_CD     = P01.GLBL_CMPY_CD(+)
                            AND H.ORG_CD           = P01.ORG_CD(+)
                            AND H.ORG_STRU_TP_CD   = P01.ORG_STRU_TP_CD(+)
                            AND P01.GLBL_CMPY_CD   = P02.GLBL_CMPY_CD(+)
                            AND P01.PRNT_ORG_CD    = P02.ORG_CD(+)
                            AND P01.ORG_STRU_TP_CD = P02.ORG_STRU_TP_CD(+)
                            AND P02.GLBL_CMPY_CD   = P03.GLBL_CMPY_CD(+)
                            AND P02.PRNT_ORG_CD    = P03.ORG_CD(+)
                            AND P02.ORG_STRU_TP_CD = P03.ORG_STRU_TP_CD(+)
                            AND P03.GLBL_CMPY_CD   = P04.GLBL_CMPY_CD(+)
                            AND P03.PRNT_ORG_CD    = P04.ORG_CD(+)
                            AND P03.ORG_STRU_TP_CD = P04.ORG_STRU_TP_CD(+)
                            AND P04.GLBL_CMPY_CD   = P05.GLBL_CMPY_CD(+)
                            AND P04.PRNT_ORG_CD    = P05.ORG_CD(+)
                            AND P04.ORG_STRU_TP_CD = P05.ORG_STRU_TP_CD(+)
                            AND P05.GLBL_CMPY_CD   = P06.GLBL_CMPY_CD(+)
                            AND P05.PRNT_ORG_CD    = P06.ORG_CD(+)
                            AND P05.ORG_STRU_TP_CD = P06.ORG_STRU_TP_CD(+)
                            AND P06.GLBL_CMPY_CD   = P07.GLBL_CMPY_CD(+)
                            AND P06.PRNT_ORG_CD    = P07.ORG_CD(+)
                            AND P06.ORG_STRU_TP_CD = P07.ORG_STRU_TP_CD(+)
                            AND P07.GLBL_CMPY_CD   = P08.GLBL_CMPY_CD(+)
                            AND P07.PRNT_ORG_CD    = P08.ORG_CD(+)
                            AND P07.ORG_STRU_TP_CD = P08.ORG_STRU_TP_CD(+)
                            AND P08.GLBL_CMPY_CD   = P09.GLBL_CMPY_CD(+)
                            AND P08.PRNT_ORG_CD    = P09.ORG_CD(+)
                            AND P08.ORG_STRU_TP_CD = P09.ORG_STRU_TP_CD(+)
                            AND P09.GLBL_CMPY_CD   = P10.GLBL_CMPY_CD(+)
                            AND P09.PRNT_ORG_CD    = P10.ORG_CD(+)
                            AND P09.ORG_STRU_TP_CD = P10.ORG_STRU_TP_CD(+)
                        ) K
                    WHERE
                            K.GLBL_CMPY_CD    = J.GLBL_CMPY_CD
                        AND K.SVC_CONTR_BR_CD = J.SVC_CONTR_BR_CD
                        AND K.SVC_RG_ORG_CD   = J.SVC_RG_ORG_CD
            )
    </statement>

    <statement id="getDsOrgUnitResrc" parameterClass="Map" resultClass="Map">
        SELECT
             C.ORG_CD
<!-- START 2016/12/12 [QC#16273, ADD] -->
            ,C.ORG_NM
<!-- END   2016/12/12 [QC#16273, ADD] -->
            ,G.SVC_CONTR_BR_CD
            ,E.PSN_CD
            ,E.EFF_FROM_DT
            ,E.EFF_THRU_DT
            ,F.ORG_FUNC_ROLE_TP_CD
            ,F.ASG_CUST_FROM_NM
            ,F.ASG_CUST_TO_NM
        FROM
             STRU_DFN          A
            ,ORG_HRCH_STRU_DFN B
            ,DS_ORG_UNIT       C
            ,TOC_ORG_STRU_RELN D
            ,ORG_FUNC_ASG      E
            ,ORG_TOC_CHNG_RQST F
            ,(SELECT
                  SUBSTR(C.ORG_NM, 1, 3) AS SVC_CONTR_BR_CD
                 ,C.ORG_CD
                 ,C.GLBL_CMPY_CD
                 ,C.EZCANCELFLAG
              FROM
                  STRU_DFN          A
                 ,ORG_HRCH_STRU_DFN B
                 ,DS_ORG_UNIT       C
              WHERE
                      A.EZCANCELFLAG    = '0'
                  AND A.GLBL_CMPY_CD    = #glblCmpyCd#
                  AND A.BR_FLG          = 'Y'
                  AND B.EZCANCELFLAG    = '0'
                  AND A.GLBL_CMPY_CD    = B.GLBL_CMPY_CD
                  AND A.STRU_DFN_CD     = B.STRU_DFN_CD
                  AND C.EZCANCELFLAG    = '0'
                  AND B.GLBL_CMPY_CD    = C.GLBL_CMPY_CD
                  AND B.ORG_STRU_TP_CD  = C.ORG_STRU_TP_CD
                  AND B.BIZ_AREA_ORG_CD = C.FIRST_ORG_CD
                  AND B.ORG_TIER_CD     = C.ORG_TIER_CD
                  AND C.FIRST_ORG_CD    = #firstOrgCd#
             )      G
        WHERE
                A.EZCANCELFLAG    = '0'
            AND A.GLBL_CMPY_CD    = #glblCmpyCd#
            AND A.BR_FLG          = 'Y'
            AND B.EZCANCELFLAG    = '0'
            AND A.GLBL_CMPY_CD    = B.GLBL_CMPY_CD
            AND A.STRU_DFN_CD     = B.STRU_DFN_CD
            AND C.EZCANCELFLAG    = '0'
            AND B.GLBL_CMPY_CD    = C.GLBL_CMPY_CD
            AND B.ORG_STRU_TP_CD  = C.ORG_STRU_TP_CD
            AND B.BIZ_AREA_ORG_CD = C.FIRST_ORG_CD
            AND B.ORG_TIER_CD     = C.ORG_TIER_CD
            AND C.FIRST_ORG_CD    = #firstOrgCd#
            AND D.EZCANCELFLAG    = '0'
            AND C.GLBL_CMPY_CD    = D.GLBL_CMPY_CD
            AND C.ORG_CD          = D.ORG_CD
            AND C.ORG_STRU_TP_CD  = D.ORG_STRU_TP_CD
            AND E.EZCANCELFLAG    = '0'
            AND D.GLBL_CMPY_CD    = E.GLBL_CMPY_CD
            AND D.TOC_CD          = E.TOC_CD
            AND F.EZCANCELFLAG    = '0'
            AND D.GLBL_CMPY_CD    = F.GLBL_CMPY_CD
            AND D.TOC_CD          = F.TOC_CD
            AND G.EZCANCELFLAG    = '0'
            AND C.GLBL_CMPY_CD    = G.GLBL_CMPY_CD
            AND C.ORG_CD          = G.ORG_CD
        ORDER BY
             G.SVC_CONTR_BR_CD
            ,E.PSN_CD
    </statement>

    <statement id="getSvcBrResrcReln" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            H.SVC_BR_RESRC_RELN_PK
        FROM
            SVC_BR_RESRC_RELN H
        WHERE
                H.EZCANCELFLAG = '0'
            AND H.GLBL_CMPY_CD = #glblCmpyCd#
            AND NOT EXISTS (
                SELECT
                    1
                FROM
                     STRU_DFN          A
                    ,ORG_HRCH_STRU_DFN B
                    ,DS_ORG_UNIT       C
                    ,TOC_ORG_STRU_RELN D
                    ,ORG_FUNC_ASG      E
                    ,ORG_TOC_CHNG_RQST F
                    ,(SELECT
                          SUBSTR(C.ORG_NM, 1, 3) AS SVC_CONTR_BR_CD
                         ,C.ORG_CD
                         ,C.GLBL_CMPY_CD
                         ,C.EZCANCELFLAG
                      FROM
                          STRU_DFN          A
                         ,ORG_HRCH_STRU_DFN B
                         ,DS_ORG_UNIT       C
                      WHERE
                              A.EZCANCELFLAG    = '0'
                          AND A.GLBL_CMPY_CD    = #glblCmpyCd#
                          AND A.BR_FLG          = 'Y'
                          AND B.EZCANCELFLAG    = '0'
                          AND A.GLBL_CMPY_CD    = B.GLBL_CMPY_CD
                          AND A.STRU_DFN_CD     = B.STRU_DFN_CD
                          AND C.EZCANCELFLAG    = '0'
                          AND B.GLBL_CMPY_CD    = C.GLBL_CMPY_CD
                          AND B.ORG_STRU_TP_CD  = C.ORG_STRU_TP_CD
                          AND B.BIZ_AREA_ORG_CD = C.FIRST_ORG_CD
                          AND B.ORG_TIER_CD     = C.ORG_TIER_CD
                          AND C.FIRST_ORG_CD    = #firstOrgCd#
                     )      G
                WHERE
                        A.EZCANCELFLAG        = '0'
                    AND A.GLBL_CMPY_CD        = H.GLBL_CMPY_CD
                    AND A.BR_FLG              = 'Y'
                    AND B.EZCANCELFLAG        = '0'
                    AND A.GLBL_CMPY_CD        = B.GLBL_CMPY_CD
                    AND A.STRU_DFN_CD         = B.STRU_DFN_CD
                    AND C.EZCANCELFLAG        = '0'
                    AND B.GLBL_CMPY_CD        = C.GLBL_CMPY_CD
                    AND B.ORG_STRU_TP_CD      = C.ORG_STRU_TP_CD
                    AND B.BIZ_AREA_ORG_CD     = C.FIRST_ORG_CD
                    AND B.ORG_TIER_CD         = C.ORG_TIER_CD
                    AND C.FIRST_ORG_CD        = #firstOrgCd#
                    AND D.EZCANCELFLAG        = '0'
                    AND C.GLBL_CMPY_CD        = D.GLBL_CMPY_CD
                    AND C.ORG_CD              = D.ORG_CD
                    AND C.ORG_STRU_TP_CD      = D.ORG_STRU_TP_CD
                    AND E.EZCANCELFLAG        = '0'
                    AND D.GLBL_CMPY_CD        = E.GLBL_CMPY_CD
                    AND D.TOC_CD              = E.TOC_CD
                    AND E.PSN_CD              = H.PSN_CD
                    AND F.EZCANCELFLAG        = '0'
                    AND D.GLBL_CMPY_CD        = F.GLBL_CMPY_CD
                    AND D.TOC_CD              = F.TOC_CD
                    AND F.ORG_FUNC_ROLE_TP_CD = H.SVC_ORG_FUNC_ROLE_TP_CD
                    AND G.SVC_CONTR_BR_CD     = H.SVC_CONTR_BR_CD
                    AND G.EZCANCELFLAG        = '0'
                    AND C.GLBL_CMPY_CD        = G.GLBL_CMPY_CD
                    AND C.ORG_CD              = G.ORG_CD
                )
        ORDER BY
             H.SVC_CONTR_BR_CD
            ,H.PSN_CD
    </statement>

    <statement id="getSvcRgPkByOrgCd" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            A.SVC_RG_PK
        FROM
            SVC_RG A
        WHERE
                A.EZCANCELFLAG = '0'
            AND A.GLBL_CMPY_CD = #glblCmpyCd#
            AND A.ORG_CD       = #orgCd#
    </statement>

    <statement id="getSvcRgBrRelnPk" parameterClass="Map" resultClass="BigDecimal">
            SELECT
            A.SVC_RG_BR_RELN_PK
        FROM
            SVC_RG_BR_RELN A
        WHERE
                A.EZCANCELFLAG    = '0'
            AND A.GLBL_CMPY_CD    = #glblCmpyCd#
            AND A.SVC_RG_PK       = #svcRgPk#
            AND A.SVC_CONTR_BR_CD = #svcContrBrCd#
    </statement>

    <statement id="getSvcBrResrcRelnPk" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            A.SVC_BR_RESRC_RELN_PK
        FROM
            SVC_BR_RESRC_RELN A
        WHERE
                A.EZCANCELFLAG            = '0'
            AND A.GLBL_CMPY_CD            = #glblCmpyCd#
            AND A.SVC_ORG_FUNC_ROLE_TP_CD = #orgFuncRoleTpCd#
            AND A.PSN_CD                  = #psnCd#
            AND A.SVC_CONTR_BR_CD         = #brCd#
    </statement>
</sqlMap>