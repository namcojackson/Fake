<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NSAL1290Query">
    <typeAlias alias="NSAL1290_ASMsg"   type="business.blap.NSAL1290.NSAL1290_ASMsg"/>

    <statement id="getSearchData" parameterClass="Map" resultMap="result.getSearchData">
        SELECT
             BMM.BLLG_MTR_MAP_PK        AS BLLG_MTR_MAP_PK
            ,BMM.BLLG_MTR_LB_CD         AS BLLG_MTR_LB_CD
            ,MLB.MTR_LB_NM              AS BLLG_MTR_LB_NM
            ,MLB.MTR_LB_DESC_TXT        AS BLLG_MTR_LB_DESC_TXT
            ,BMM.BLLG_MTR_MAP_LVL_NUM   AS BLLG_MTR_MAP_LVL_NUM
            ,BMM.ACTV_FLG               AS ACTV_FLG
            ,BMM.EFF_FROM_DT            AS EFF_FROM_DT
            ,BMM.EFF_THRU_DT            AS EFF_THRU_DT
            ,BMM.EZUPTIME               AS EZUPTIME
            ,BMM.EZUPTIMEZONE           AS EZUPTIMEZONE
            ,BMM.MDL_MTR_LB_CD          AS REG_MTR_LB_CD
            ,MLR.MTR_LB_NM              AS REG_MTR_LB_NM
            ,MLR.MTR_LB_DESC_TXT        AS REG_MTR_LB_DESC_TXT
            ,MLR.MTR_IDX_CD             AS REG_MTR_IDX_CD
            <!-- START 2016/12/07 K.Kojima [QC#14204, ADD] -->
            ,BMM.EZINTIME               AS XX_REC_HIST_CRAT_TS_A
            ,BMM.EZINUSERID             AS XX_REC_HIST_CRAT_BY_NM_A
            ,BMM.EZUPTIME               AS XX_REC_HIST_UPD_TS_A
            ,BMM.EZUPUSERID             AS XX_REC_HIST_UPD_BY_NM_A
            ,BMM.EZTABLEID              AS XX_REC_HIST_TBL_NM_A
            <!-- END 2016/12/07 K.Kojima [QC#14204, ADD] -->
        FROM
             BLLG_MTR_MAP BMM
            ,MTR_LB       MLR
            ,MTR_LB       MLB
        WHERE
                MLR.GLBL_CMPY_CD   = #glblCmpyCd#
            AND MLR.EZCANCELFLAG   = '0'
            AND MLR.MTR_LB_NM      = #mtrLbNm#
            AND MLR.MTR_LB_TP_CD   = #mtrLbTpCd#
            AND BMM.GLBL_CMPY_CD   = MLR.GLBL_CMPY_CD
            AND BMM.EZCANCELFLAG   = '0'
            AND BMM.MDL_MTR_LB_CD  = MLR.MTR_LB_CD
            AND MLB.MTR_LB_CD      = BMM.BLLG_MTR_LB_CD
            AND MLB.GLBL_CMPY_CD   = BMM.GLBL_CMPY_CD
            AND MLB.EZCANCELFLAG   = '0'
            AND ROWNUM &lt;= #limitNum#
        ORDER BY
            MLB.MTR_LB_SORT_NUM ASC
    </statement>
    <resultMap id="result.getSearchData"      class="NSAL1290_ASMsg">
        <result property="bllgMtrMapPk_A"      column="BLLG_MTR_MAP_PK"        javaType="EZDSBigDecimalItem"/>
        <result property="bllgMtrLbCd_BC"      column="BLLG_MTR_LB_CD"         javaType="EZDSStringItem"/>
        <result property="mtrLbNm_BC"          column="BLLG_MTR_LB_NM"         javaType="EZDSStringItem"/>
        <result property="mtrLbDescTxt_BC"     column="BLLG_MTR_LB_DESC_TXT"   javaType="EZDSStringItem"/>
        <result property="bllgMtrMapLvlNum_A"  column="BLLG_MTR_MAP_LVL_NUM"   javaType="EZDSStringItem"/>
        <result property="actvFlg_A"           column="ACTV_FLG"               javaType="EZDSStringItem"/>
        <result property="effFromDt_A"         column="EFF_FROM_DT"            javaType="EZDSStringItem"/>
        <result property="effThruDt_A"         column="EFF_THRU_DT"            javaType="EZDSStringItem"/>
        <result property="ezUpTime_A"          column="EZUPTIME"               javaType="EZDSStringItem"/>
        <result property="ezUpTimeZone_A"      column="EZUPTIMEZONE"           javaType="EZDSStringItem"/>
        <result property="mdlMtrLbCd_RG"       column="REG_MTR_LB_CD"          javaType="EZDSStringItem"/>
        <result property="mtrLbNm_RG"          column="REG_MTR_LB_NM"          javaType="EZDSStringItem"/>
        <result property="mtrIdxCd_RG"         column="REG_MTR_IDX_CD"         javaType="EZDSStringItem"/>
        <!-- START 2016/12/07 K.Kojima [QC#14204, ADD] -->
        <result property="xxRecHistCratTs_A"   column="XX_REC_HIST_CRAT_TS_A"    javaType="EZDSStringItem"/>
        <result property="xxRecHistCratByNm_A" column="XX_REC_HIST_CRAT_BY_NM_A" javaType="EZDSStringItem"/>
        <result property="xxRecHistUpdTs_A"    column="XX_REC_HIST_UPD_TS_A"     javaType="EZDSStringItem"/>
        <result property="xxRecHistUpdByNm_A"  column="XX_REC_HIST_UPD_BY_NM_A"  javaType="EZDSStringItem"/>
        <result property="xxRecHistTblNm_A"    column="XX_REC_HIST_TBL_NM_A"     javaType="EZDSStringItem"/>
        <!-- END 2016/12/07 K.Kojima [QC#14204, ADD] -->
    </resultMap>
    <statement id="getBllgMtrMap" parameterClass="Map" resultClass="Map">
        SELECT
             BMM.BLLG_MTR_MAP_PK        AS BLLG_MTR_MAP_PK
            ,BMM.ACTV_FLG               AS ACTV_FLG
            ,BMM.EFF_FROM_DT            AS EFF_FROM_DT
            ,BMM.EFF_THRU_DT            AS EFF_THRU_DT
            ,BMM.BLLG_MTR_LB_CD         AS BLLG_MTR_LB_CD
            ,BMM.BLLG_MTR_MAP_LVL_NUM   AS BLLG_MTR_MAP_LVL_NUM
        FROM
             BLLG_MTR_MAP BMM
        WHERE
                BMM.GLBL_CMPY_CD   = #glblCmpyCd#
            AND BMM.EZCANCELFLAG   = '0'
            AND BMM.MDL_MTR_LB_CD  = #mtrLbCd#
    </statement>
</sqlMap>
