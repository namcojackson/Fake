<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NWZC108001">

    <typeAlias alias="INVTY_LOC_VTMsg"            type="business.db.INVTY_LOC_VTMsg"/>
    <typeAlias alias="ORD_TAKE_MDSETMsg"        type="business.db.ORD_TAKE_MDSETMsg"/>
    <typeAlias alias="PO_DTLTMsg"                type="business.db.PO_DTLTMsg"/>
    <typeAlias alias="SOFT_ALLOCTMsg"            type="business.db.SOFT_ALLOCTMsg"/>
    <typeAlias alias="HARD_ALLOCTMsg"            type="business.db.HARD_ALLOCTMsg"/>
    <typeAlias alias="ATP_INFOTMsg"                type="business.db.ATP_INFOTMsg"/>
    <typeAlias alias="DIST_PLN_DTLTMsg"            type="business.db.DIST_PLN_DTLTMsg"/>
    <typeAlias alias="SPLY_INFOTMsg"            type="business.db.SPLY_INFOTMsg"/>
    <typeAlias alias="CMPSNTMsg"                type="business.db.CMPSNTMsg"/>
    <typeAlias alias="HLD_PROC_DFNTMsg"            type="business.db.HLD_PROC_DFNTMsg"/>
    <typeAlias alias="ATP_BAT_WRKTMsg"             type="business.db.ATP_BAT_WRKTMsg"/>


    <statement id="getAtpBatWrk" parameterClass="EZDMsg">
        SELECT
             GLBL_CMPY_CD
            ,BAT_GRP_CD
            ,PROC_GRP_NUM
            ,PROC_SQ_NUM
            ,SHPG_PLN_NUM
            ,SOFT_ALLOC_PK
            ,DIST_PK
            ,DIST_TM_FRAME_NUM
            
        FROM
            ATP_BAT_WRK
            
        WHERE
                GLBL_CMPY_CD   = #glblCmpyCd#
            AND BAT_GRP_CD     = #batGrpCd#
            AND PROC_GRP_NUM   = #procGrpNum#
             AND EZCANCELFLAG   = '0'
             
         ORDER BY 
              TO_NUMBER(PROC_GRP_NUM)
             ,TO_NUMBER(PROC_SQ_NUM)
    </statement>
    

    <statement id="getInvtyLocV" parameterClass="EZDMsg" resultMap="result.INVTY_LOC_VTMsg">
        SELECT
             GLBL_CMPY_CD
            ,INVTY_LOC_CD
            ,INVTY_LOC_TP_CD
            
        FROM 
            SHIP_FROM_LOC_LIST_V
        
        WHERE
                GLBL_CMPY_CD = #glblCmpyCd#
            AND    INVTY_LOC_CD = #invtyLocCd#
            AND    EZCANCELFLAG = '0'
    </statement>
    
    <statement id="getPoDtlList" parameterClass="EZDMsg" resultMap="result.PO_DTLTMsg">
        SELECT
             GLBL_CMPY_CD
            ,PO_ORD_NUM
            ,PO_ORD_DTL_LINE_NUM
            ,PO_STS_CD
            ,SHPG_PLN_NUM
            ,ETA_DT
        FROM
            PO_DTL
        WHERE
                GLBL_CMPY_CD = #glblCmpyCd#
            AND    SHPG_PLN_NUM = #shpgPlnNum#
            AND    EZCANCELFLAG = '0'
    </statement>

    
    <statement id="getHardAllocList" parameterClass="EZDMsg" resultMap="result.HARD_ALLOCTMsg">
        SELECT
                 HA.GLBL_CMPY_CD
                ,HA.INVTY_LOC_CD
                ,HA.STK_STS_CD
                ,HA.MDSE_CD
                ,HA.HARD_ALLOC_QTY
        FROM
                HARD_ALLOC HA
        WHERE
                HA.GLBL_CMPY_CD = #glblCmpyCd#
            AND HA.SHPG_PLN_NUM = #shpgPlnNum#
            AND    HA.EZCANCELFLAG = '0'
    </statement>

    <statement id="getAtpInfoByOrderNumDataRs" resultMap="result.ATP_INFOTMsg" parameterClass="EZDMsg">
        SELECT
             GLBL_CMPY_CD
            ,ATP_INFO_PK
            ,ATP_CALC_TS
            ,TRX_SRC_TP_CD
            ,TRX_HDR_NUM
            ,TRX_LINE_NUM
            ,TRX_LINE_SUB_NUM
            ,SHPG_PLN_NUM
            ,SHPG_STS_CD
            ,DIST_PK
            ,DIST_TM_FRAME_NUM
            ,MDSE_CD
            ,INBD_VIS_EVENT_CD
            ,IMPT_INV_NUM
            ,VND_INV_DO_NUM
            ,IMPT_CNTNR_NUM
            ,INVTY_LOC_CD
            ,CPO_QTY
            ,ALLOC_QTY
            ,PSD_DT
            ,PDD_DT
            ,WH_ETA_DT
        
        FROM 
            ATP_INFO
        
        WHERE
                GLBL_CMPY_CD        = #glblCmpyCd#
            AND    EZCANCELFLAG        = '0'
        <isNotNull property="trxSrcTpCd">
            AND TRX_SRC_TP_CD        = #trxSrcTpCd#
        </isNotNull>
        <isNotNull property="trxHdrNum">
            AND TRX_HDR_NUM            = #trxHdrNum#
        </isNotNull>
        <isNotNull property="trxLineNum">
            AND TRX_LINE_NUM        = #trxLineNum#
        </isNotNull>
        <isNotNull property="trxLineSubNum">
            AND TRX_LINE_SUB_NUM    = #trxLineSubNum#
        </isNotNull>
        <isNotNull property="distPk">
            AND DIST_PK             = #distPk#
        </isNotNull>
        <isNotNull property="distTmFrameNum">
            AND DIST_TM_FRAME_NUM     = #distTmFrameNum#
        </isNotNull>
        <isNotNull property="shpgPlnNum">
            AND SHPG_PLN_NUM         = #shpgPlnNum#
        </isNotNull>
    </statement>
    
    
    <statement id="getAtpInfoListByShpgPlnNum" parameterClass="EZDMsg" resultMap="result.ATP_INFOTMsg">
            SELECT
             GLBL_CMPY_CD
            ,ATP_INFO_PK
            ,ATP_CALC_TS
            ,TRX_SRC_TP_CD
            ,TRX_HDR_NUM
            ,TRX_LINE_NUM
            ,TRX_LINE_SUB_NUM
            ,SHPG_PLN_NUM
            ,SHPG_STS_CD
            ,DIST_PK
            ,DIST_TM_FRAME_NUM
            ,MDSE_CD
            ,INBD_VIS_EVENT_CD
            ,IMPT_INV_NUM
            ,VND_INV_DO_NUM
            ,IMPT_CNTNR_NUM
            ,INVTY_LOC_CD
            ,CPO_QTY
            ,ALLOC_QTY
            ,PSD_DT
            ,PDD_DT
            ,WH_ETA_DT
        
        FROM 
            ATP_INFO
        
        WHERE
                GLBL_CMPY_CD    = #glblCmpyCd#
            AND TRX_SRC_TP_CD    = #trxSrcTpCd#
            AND TRX_HDR_NUM        = #trxHdrNum#
            AND SHPG_PLN_NUM    = #shpgPlnNum#
            AND    EZCANCELFLAG    = '0'
    </statement>
    
    
    <statement id="getAtpInfoListDistRemainder" parameterClass="EZDMsg" resultMap="result.ATP_INFOTMsg">
        SELECT
             GLBL_CMPY_CD
            ,ATP_INFO_PK
            ,ATP_CALC_TS
            ,TRX_SRC_TP_CD
            ,TRX_HDR_NUM
            ,TRX_LINE_NUM
            ,TRX_LINE_SUB_NUM
            ,SHPG_PLN_NUM
            ,SHPG_STS_CD
            ,DIST_PK
            ,DIST_TM_FRAME_NUM
            ,MDSE_CD
            ,INBD_VIS_EVENT_CD
            ,IMPT_INV_NUM
            ,VND_INV_DO_NUM
            ,IMPT_CNTNR_NUM
            ,INVTY_LOC_CD
            ,CPO_QTY
            ,ALLOC_QTY
            ,PSD_DT
            ,PDD_DT
            ,WH_ETA_DT
            
        FROM 
            ATP_INFO
        
        WHERE
                GLBL_CMPY_CD        = #glblCmpyCd#
            AND    EZCANCELFLAG        = '0'
            AND SHPG_PLN_NUM        IS NULL
            
        <isNotNull property="distPk">
            AND DIST_PK                = #distPk#
        </isNotNull>
        <isNotNull property="distTmFrameNum">
            AND DIST_TM_FRAME_NUM    = #distTmFrameNum#
        </isNotNull>
    </statement>

    <statement id="getDistPlnDtl" resultMap="result.DIST_PLN_DTLTMsg" parameterClass="EZDMsg">
        SELECT
             GLBL_CMPY_CD
            ,DIST_PK
            ,DIST_TM_FRAME_NUM
            ,DIST_PLN_NUM
            ,ORD_TAKE_MDSE_CD
            ,MDSE_CD
            ,INVTY_LOC_CD
            ,DIST_PLN_AVAL_QTY
            ,DIST_PLN_SAVE_QTY
            ,DIST_PLN_STS_CD
            
        FROM
            DIST_PLN_DTL
        
        WHERE
                GLBL_CMPY_CD        = #glblCmpyCd#
            AND    DIST_PK                = #distPk#
            AND    DIST_TM_FRAME_NUM    = #distTmFrameNum#
            AND    DIST_PLN_STS_CD        = '2'
            AND    DIST_PLN_AVAL_QTY + DIST_PLN_SAVE_QTY > 0
            AND    EZCANCELFLAG        = '0'
    </statement>

    <statement id="getSplyInfoList" parameterClass="Map" resultMap="result.SPLY_INFOTMsg">
        SELECT
             SPLY.GLBL_CMPY_CD
            ,SPLY.SPLY_INFO_PK
            ,SPLY.INBD_VIS_EVENT_CD
            ,SPLY.IMPT_INV_NUM
            ,SPLY.IMPT_CNTNR_NUM
            ,SPLY.VND_INV_DO_NUM
            ,SPLY.INVTY_LOC_CD
            ,SPLY.STK_STS_CD
            ,SPLY.RCV_PLN_QTY
            ,SPLY.MDSE_CD
            ,SPLY.AVAL_QTY
            ,SPLY.ETA_OR_ETD_DT
            ,SPLY.SPLY_CALC_DT
        
        FROM
             SPLY_INFO    SPLY
            ,MDSE        MDSE
            ,WH WH
            
        WHERE
                SPLY.GLBL_CMPY_CD = #glblCmpyCd#
            AND    SPLY.GLBL_CMPY_CD = MDSE.GLBL_CMPY_CD
            AND    SPLY.MDSE_CD like #mdseCd#
            AND    SPLY.MDSE_CD = MDSE.MDSE_CD
        <isNotNull property="invtyLocCd">
            AND    SPLY.INVTY_LOC_CD = #invtyLocCd#
        </isNotNull>
        <isNotNull property="stkStsCd">
            AND    SPLY.STK_STS_CD = #stkStsCd#
        </isNotNull>
        <isNotNull property="avalQty">
            AND    SPLY.AVAL_QTY > 0
        </isNotNull>
            AND SPLY.GLBL_CMPY_CD = WH.GLBL_CMPY_CD
            AND SPLY.INVTY_LOC_CD = WH.WH_CD
            <iterate property="whSysTpCd" var="whSysTpCd[]" open=" AND WH.WH_SYS_TP_CD IN (" close=")" conjunction=",">
                   #whSysTpCd[]#
            </iterate>
            AND WH.EZCANCELFLAG = '0'
            AND MDSE.EZCANCELFLAG = '0'
            AND    SPLY.EZCANCELFLAG = '0'
        
        ORDER BY
             DECODE(SPLY.IMPT_INV_NUM,'STOCK',1,2)    ASC
            ,SPLY.ETA_OR_ETD_DT                        ASC
            ,SPLY.MDSE_CD                            ASC
    </statement>

    <statement id="getSplyInfoListForResetDistributionReminder" parameterClass="EZDMsg" resultMap="result.SPLY_INFOTMsg">
        SELECT
                 A.GLBL_CMPY_CD
                ,A.SPLY_INFO_PK
                ,A.INBD_VIS_EVENT_CD
                ,A.IMPT_INV_NUM
                ,A.IMPT_CNTNR_NUM
                ,A.VND_INV_DO_NUM
                ,A.INVTY_LOC_CD
                ,A.STK_STS_CD
                ,A.RCV_PLN_QTY
                ,A.MDSE_CD
                ,A.AVAL_QTY
                ,A.ETA_OR_ETD_DT
                ,A.SPLY_CALC_DT
        FROM
                SPLY_INFO A
                ,WH WH
        WHERE
                A.GLBL_CMPY_CD = #glblCmpyCd#
        AND        A.MDSE_CD = #mdseCd#
        <isNotNull property="invtyLocCd">
            AND        A.INVTY_LOC_CD = #invtyLocCd#
        </isNotNull>
        AND        A.INBD_VIS_EVENT_CD = #inbdVisEventCd#
        AND        A.IMPT_INV_NUM = #imptInvNum#
        AND        A.IMPT_CNTNR_NUM = #imptCntnrNum#
        AND        A.VND_INV_DO_NUM = #vndInvDoNum#
        AND        A.ETA_OR_ETD_DT = #etaOrEtdDt#
        AND        A.AVAL_QTY != A.RCV_PLN_QTY
        AND     A.GLBL_CMPY_CD = WH.GLBL_CMPY_CD
        AND     A.INVTY_LOC_CD = WH.WH_CD
        <iterate property="whSysTpCd" var="whSysTpCd[]" open=" AND WH.WH_SYS_TP_CD IN (" close=")" conjunction=",">
                   #whSysTpCd[]#
        </iterate>
        AND WH.EZCANCELFLAG = '0'
        AND        A.EZCANCELFLAG = '0'
        ORDER BY DECODE(A.IMPT_INV_NUM,'STOCK',1,2) ASC, A.ETA_OR_ETD_DT ASC
    </statement>

    <statement id="getCmpsnList" parameterClass="EZDMsg" resultMap="result.CMPSNTMsg">
        SELECT
             GLBL_CMPY_CD
            ,PRNT_MDSE_CD
            ,CMPSN_PK
            ,MDSE_CMPSN_TP_CD
            ,CHILD_MDSE_CD
            ,CHILD_ORD_TAKE_MDSE_CD
            ,CHILD_KIT_MAT_CD
            ,CHILD_MDSE_QTY
            ,EFF_FROM_DT
            ,EFF_THRU_DT
            ,ALLOC_RATIO
            ,CHILD_BOM_CMPT_CD
            ,CHILD_BOM_CMPT_NM
            ,CHILD_BOM_PRC_AMT
            
        FROM
            CMPSN
        
        WHERE
                GLBL_CMPY_CD = #glblCmpyCd#
            AND PRNT_MDSE_CD = #prntMdseCd#
            AND    EZCANCELFLAG = '0'
            
        ORDER BY
            CMPSN_PK ASC
    </statement>

    <statement id="getExistHoldRs" resultMap="result.HLD_PROC_DFNTMsg" parameterClass="Map">
        SELECT 
             HLD_RSN_CD
            ,REL_PNT_HARD_ALLOC_FLG
            ,REL_PNT_SO_CRAT_FLG
        FROM (
            SELECT
                 H.HLD_RSN_CD AS HLD_RSN_CD
                ,HPD.REL_PNT_HARD_ALLOC_FLG AS REL_PNT_HARD_ALLOC_FLG
                ,HPD.REL_PNT_SO_CRAT_FLG    AS REL_PNT_SO_CRAT_FLG
            FROM
                 HLD                            H
                ,HLD_RSN                        HR
                ,HLD_PROC_DFN                    HPD
            WHERE
                H.GLBL_CMPY_CD                    = #glblCmpyCd#
                AND H.REL_FLG                    = 'N'
                AND H.CPO_ORD_NUM                = #cpoOrdNum#
                AND HR.GLBL_CMPY_CD                = H.GLBL_CMPY_CD
                AND HR.HLD_RSN_CD                = H.HLD_RSN_CD
                AND HR.HLD_LVL_CD                = '01'
                AND HPD.GLBL_CMPY_CD            = HR.GLBL_CMPY_CD
                AND HPD.HLD_RSN_CD                = HR.HLD_RSN_CD
                AND H.EZCANCELFLAG                 = '0'
                AND HR.EZCANCELFLAG                 = '0' 
                AND HPD.EZCANCELFLAG            = '0'
        UNION ALL
            SELECT
                 H.HLD_RSN_CD AS HLD_RSN_CD
                ,HPD.REL_PNT_HARD_ALLOC_FLG AS REL_PNT_HARD_ALLOC_FLG
                ,HPD.REL_PNT_SO_CRAT_FLG    AS REL_PNT_SO_CRAT_FLG
            FROM
                 HLD                            H
                ,HLD_RSN                        HR
                ,HLD_PROC_DFN                    HPD
            WHERE
                H.GLBL_CMPY_CD                    = #glblCmpyCd#
                AND H.REL_FLG                    = 'N'
                AND H.CPO_ORD_NUM                = #cpoOrdNum#
                AND H.CPO_DTL_LINE_NUM            = #cpoDtlLineNum#
                AND H.CPO_DTL_LINE_SUB_NUM        = #cpoDtlLineSubNum#
                AND HR.GLBL_CMPY_CD                = H.GLBL_CMPY_CD
                AND HR.HLD_RSN_CD                = H.HLD_RSN_CD
                AND HR.HLD_LVL_CD                = '02'
                AND HPD.GLBL_CMPY_CD            = HR.GLBL_CMPY_CD
                AND HPD.HLD_RSN_CD                 = HR.HLD_RSN_CD
                AND H.EZCANCELFLAG                = '0'
                AND HR.EZCANCELFLAG                = '0' 
                AND HPD.EZCANCELFLAG            = '0' 
        UNION ALL
            SELECT
                 H.HLD_RSN_CD AS HLD_RSN_CD
                ,HPD.REL_PNT_HARD_ALLOC_FLG AS REL_PNT_HARD_ALLOC_FLG
                ,HPD.REL_PNT_SO_CRAT_FLG    AS REL_PNT_SO_CRAT_FLG
            FROM
                 HLD                            H
                ,HLD_RSN                        HR
                ,HLD_PROC_DFN                    HPD
            WHERE
                H.GLBL_CMPY_CD                     = #glblCmpyCd#
                AND H.REL_FLG                    = 'N'
                AND H.CPO_ORD_NUM                = #cpoOrdNum#
                AND H.CPO_DTL_LINE_NUM            = #cpoDtlLineNum#
                AND H.CPO_DTL_LINE_SUB_NUM        = #cpoDtlLineSubNum#
                AND H.SHPG_PLN_NUM                = #shpgPlnNum#
                AND HR.GLBL_CMPY_CD                = H.GLBL_CMPY_CD
                AND HR.HLD_RSN_CD                = H.HLD_RSN_CD
                AND HR.HLD_LVL_CD                = '03'
                AND HPD.GLBL_CMPY_CD            = HR.GLBL_CMPY_CD
                AND HPD.HLD_RSN_CD                = HR.HLD_RSN_CD
                AND H.EZCANCELFLAG                = '0'
                AND HR.EZCANCELFLAG                = '0' 
                AND HPD.EZCANCELFLAG            = '0' 
        )
    </statement>

    <statement id="getPoDtlListByTrxNum" parameterClass="EZDMsg" resultMap="result.PO_DTLTMsg">
        SELECT
             GLBL_CMPY_CD
            ,PO_ORD_NUM
            ,PO_ORD_DTL_LINE_NUM
            ,PO_STS_CD
            ,SHPG_PLN_NUM
            ,ETA_DT
        FROM
            PO_DTL
        WHERE
                GLBL_CMPY_CD = #glblCmpyCd#
            AND CPO_ORD_NUM = #cpoOrdNum#
            AND CPO_DTL_LINE_NUM = #cpoDtlLineNum#
            AND CPO_DTL_LINE_SUB_NUM = #cpoDtlLineSubNum#
            AND EZCANCELFLAG = '0'
    </statement>
    <statement id="getSplyInfoListForCusa" parameterClass="Map" resultClass="Map">
        SELECT
             SI1.GLBL_CMPY_CD AS GLBL_CMPY_CD
             ,SI1.ETA_OR_ETD_DT AS ETA_DT
             ,SI2.ETA_OR_ETD_DT AS ETD_DT
             ,SI1.AVAL_QTY AS AVAL_QTY
             ,SI1.IMPT_INV_NUM AS IMPT_INV_NUM
             ,SI1.VND_INV_DO_NUM AS VND_INV_DO_NUM
             ,SI1.IMPT_CNTNR_NUM AS IMPT_CNTNR_NUM
             ,SI1.INBD_VIS_EVENT_CD AS INBD_VIS_EVENT_CD
        FROM
            SPLY_INFO SI1
            ,(
                SELECT
                    SI2.GLBL_CMPY_CD
                    ,SI2.VND_INV_DO_NUM
                    ,SI2.ETA_OR_ETD_DT
                FROM
                    SPLY_INFO SI2
                WHERE
                        SI2.GLBL_CMPY_CD = #glblCmpyCd#
                    AND SI2.INBD_VIS_DATA_TP_CD = #inbdVisDataTpCdStkOut#
                    AND SI2.EZCANCELFLAG = '0'
            ) SI2
        WHERE
                SI1.GLBL_CMPY_CD = #glblCmpyCd#
            AND SI1.VND_INV_DO_NUM LIKE #vndInvDoNum#
            AND SI1.INBD_VIS_DATA_TP_CD = #inbdVisDataTpCdStkIn#
            AND SI1.GLBL_CMPY_CD = SI2.GLBL_CMPY_CD(+)
            AND SI1.VND_INV_DO_NUM = SI2.VND_INV_DO_NUM(+)
            AND SI1.EZCANCELFLAG = '0'
        ORDER BY
             SI2.ETA_OR_ETD_DT NULLS FIRST
    </statement>

    <resultMap id="result.INVTY_LOC_VTMsg" class="INVTY_LOC_VTMsg">
        <result property="glblCmpyCd"           column="GLBL_CMPY_CD"            javaType="EZDTStringItem"/>
        <result property="invtyLocCd"           column="INVTY_LOC_CD"            javaType="EZDTStringItem"/>
        <result property="invtyLocTpCd"           column="INVTY_LOC_TP_CD"        javaType="EZDTStringItem"/>
    </resultMap>

    <resultMap id="result.ORD_TAKE_MDSETMsg" class="ORD_TAKE_MDSETMsg">
        <result property="glblCmpyCd"           column="GLBL_CMPY_CD"            javaType="EZDTStringItem"/>
        <result property="ordTakeMdseCd"           column="ORD_TAKE_MDSE_CD"        javaType="EZDTStringItem"/>
        <result property="mdseCd"               column="MDSE_CD"                javaType="EZDTStringItem"/>
    </resultMap>

    <resultMap id="result.PO_DTLTMsg" class="PO_DTLTMsg">
        <result property="glblCmpyCd"           column="GLBL_CMPY_CD"            javaType="EZDTStringItem"/>
        <result property="poOrdNum"               column="PO_ORD_NUM"                javaType="EZDTStringItem"/>
        <result property="poOrdDtlLineNum"       column="PO_ORD_DTL_LINE_NUM"    javaType="EZDTStringItem"/>
        <result property="poStsCd"               column="PO_STS_CD"                javaType="EZDTStringItem"/>
        <result property="shpgPlnNum"           column="SHPG_PLN_NUM"            javaType="EZDTStringItem"/>
        <result property="etaDt"                   column="ETA_DT"                    javaType="EZDTDateItem"/>
    </resultMap>

    <resultMap id="result.SOFT_ALLOCTMsg" class="SOFT_ALLOCTMsg">
        <result property="glblCmpyCd"           column="GLBL_CMPY_CD"            javaType="EZDTStringItem"/>
        <result property="softAllocPk"           column="SOFT_ALLOC_PK"            javaType="EZDTBigDecimalItem"/>
        <result property="softAllocQty"           column="SOFT_ALLOC_QTY"            javaType="EZDTBigDecimalItem"/>
        <result property="shpgPlnNum"           column="SHPG_PLN_NUM"            javaType="EZDTStringItem"/>
        <result property="mdseCd"               column="MDSE_CD"                javaType="EZDTStringItem"/>
        <result property="distPlnNum"           column="DIST_PLN_NUM"            javaType="EZDTStringItem"/>
        <result property="distPk"               column="DIST_PK"                javaType="EZDTBigDecimalItem"/>
        <result property="distTmFrameNum"       column="DIST_TM_FRAME_NUM"        javaType="EZDTStringItem"/>
        <result property="distStruSegPk"           column="DIST_STRU_SEG_PK"        javaType="EZDTBigDecimalItem"/>
    </resultMap>
    
    <resultMap id="result.HARD_ALLOCTMsg" class="HARD_ALLOCTMsg">
        <result property="glblCmpyCd"           column="GLBL_CMPY_CD"            javaType="EZDTStringItem"/>
        <result property="invtyLocCd"           column="INVTY_LOC_CD"            javaType="EZDTStringItem"/>
        <result property="stkStsCd"               column="STK_STS_CD"                javaType="EZDTStringItem"/>
        <result property="mdseCd"               column="MDSE_CD"                javaType="EZDTStringItem"/>
        <result property="hardAllocQty"           column="HARD_ALLOC_QTY"            javaType="EZDTBigDecimalItem"/>
    </resultMap>

    <resultMap id="result.ATP_INFOTMsg" class="ATP_INFOTMsg">
        <result property="glblCmpyCd"           column="GLBL_CMPY_CD"            javaType="EZDTStringItem"/>
        <result property="atpInfoPk"               column="ATP_INFO_PK"            javaType="EZDTBigDecimalItem"/>
        <result property="atpCalcTs"               column="ATP_CALC_TS"            javaType="EZDTStringItem"/>
        <result property="trxSrcTpCd"           column="TRX_SRC_TP_CD"            javaType="EZDTStringItem"/>
        <result property="trxHdrNum"               column="TRX_HDR_NUM"            javaType="EZDTStringItem"/>
        <result property="trxLineNum"           column="TRX_LINE_NUM"            javaType="EZDTStringItem"/>
        <result property="trxLineSubNum"           column="TRX_LINE_SUB_NUM"        javaType="EZDTStringItem"/>
        <result property="shpgPlnNum"           column="SHPG_PLN_NUM"            javaType="EZDTStringItem"/>
        <result property="shpgStsCd"               column="SHPG_STS_CD"            javaType="EZDTStringItem"/>
        <result property="distPk"               column="DIST_PK"                javaType="EZDTBigDecimalItem"/>
        <result property="distTmFrameNum"       column="DIST_TM_FRAME_NUM"        javaType="EZDTStringItem"/>
        <result property="mdseCd"               column="MDSE_CD"                javaType="EZDTStringItem"/>
        <result property="inbdVisEventCd"       column="INBD_VIS_EVENT_CD"        javaType="EZDTStringItem"/>
        <result property="imptInvNum"           column="IMPT_INV_NUM"            javaType="EZDTStringItem"/>
        <result property="vndInvDoNum"           column="VND_INV_DO_NUM"            javaType="EZDTStringItem"/>
        <result property="imptCntnrNum"           column="IMPT_CNTNR_NUM"            javaType="EZDTStringItem"/>
        <result property="invtyLocCd"           column="INVTY_LOC_CD"            javaType="EZDTStringItem"/>
        <result property="cpoQty"               column="CPO_QTY"                javaType="EZDTBigDecimalItem"/>
        <result property="allocQty"               column="ALLOC_QTY"                javaType="EZDTBigDecimalItem"/>
        <result property="psdDt"                   column="PSD_DT"                    javaType="EZDTDateItem"/>
        <result property="pddDt"                   column="PDD_DT"                    javaType="EZDTDateItem"/>
        <result property="whEtaDt"               column="WH_ETA_DT"                javaType="EZDTDateItem"/>
    </resultMap>

    <resultMap id="result.DIST_PLN_DTLTMsg" class="DIST_PLN_DTLTMsg">
        <result property="glblCmpyCd"           column="GLBL_CMPY_CD"            javaType="EZDTStringItem"/>
        <result property="distPk"               column="DIST_PK"                javaType="EZDTBigDecimalItem"/>
        <result property="distTmFrameNum"       column="DIST_TM_FRAME_NUM"        javaType="EZDTStringItem"/>
        <result property="distPlnNum"           column="DIST_PLN_NUM"            javaType="EZDTStringItem"/>
        <result property="ordTakeMdseCd"        column="ORD_TAKE_MDSE_CD"        javaType="EZDTStringItem"/>
        <result property="mdseCd"               column="MDSE_CD"                javaType="EZDTStringItem"/>
        <result property="invtyLocCd"           column="INVTY_LOC_CD"            javaType="EZDTStringItem"/>
        <result property="distPlnAvalQty"       column="DIST_PLN_AVAL_QTY"        javaType="EZDTBigDecimalItem"/>
        <result property="distPlnSaveQty"       column="DIST_PLN_SAVE_QTY"        javaType="EZDTBigDecimalItem"/>
        <result property="distPlnStsCd"           column="DIST_PLN_STS_CD"        javaType="EZDTStringItem"/>
    </resultMap>

    <resultMap id="result.SPLY_INFOTMsg" class="SPLY_INFOTMsg">
        <result property="glblCmpyCd"           column="GLBL_CMPY_CD"            javaType="EZDTStringItem"/>
        <result property="splyInfoPk"           column="SPLY_INFO_PK"            javaType="EZDTBigDecimalItem"/>
        <result property="inbdVisEventCd"       column="INBD_VIS_EVENT_CD"        javaType="EZDTStringItem"/>
        <result property="imptInvNum"           column="IMPT_INV_NUM"            javaType="EZDTStringItem"/>
        <result property="imptCntnrNum"           column="IMPT_CNTNR_NUM"            javaType="EZDTStringItem"/>
        <result property="vndInvDoNum"           column="VND_INV_DO_NUM"            javaType="EZDTStringItem"/>
        <result property="invtyLocCd"           column="INVTY_LOC_CD"            javaType="EZDTStringItem"/>
        <result property="stkStsCd"               column="STK_STS_CD"                javaType="EZDTStringItem"/>
        <result property="rcvPlnQty"               column="RCV_PLN_QTY"            javaType="EZDTBigDecimalItem"/>
        <result property="mdseCd"               column="MDSE_CD"                javaType="EZDTStringItem"/>
        <result property="avalQty"               column="AVAL_QTY"                javaType="EZDTBigDecimalItem"/>
        <result property="etaOrEtdDt"           column="ETA_OR_ETD_DT"            javaType="EZDTDateItem"/>
        <result property="splyCalcDt"           column="SPLY_CALC_DT"            javaType="EZDTDateItem"/>
    </resultMap>

    <resultMap id="result.CMPSNTMsg" class="CMPSNTMsg">
        <result property="glblCmpyCd"           column="GLBL_CMPY_CD"            javaType="EZDTStringItem"/>
        <result property="prntMdseCd"           column="PRNT_MDSE_CD"            javaType="EZDTStringItem"/>
        <result property="cmpsnPk"               column="CMPSN_PK"                javaType="EZDTStringItem"/>
        <result property="mdseCmpsnTpCd"           column="MDSE_CMPSN_TP_CD"        javaType="EZDTStringItem"/>
        <result property="childMdseCd"           column="CHILD_MDSE_CD"            javaType="EZDTStringItem"/>
        <result property="childOrdTakeMdseCd"   column="CHILD_ORD_TAKE_MDSE_CD"    javaType="EZDTStringItem"/>
        <result property="childKitMatCd"           column="CHILD_KIT_MAT_CD"        javaType="EZDTStringItem"/>
        <result property="childMdseQty"           column="CHILD_MDSE_QTY"            javaType="EZDTStringItem"/>
        <result property="effFromDt"               column="EFF_FROM_DT"            javaType="EZDTStringItem"/>
        <result property="effThruDt"               column="EFF_THRU_DT"            javaType="EZDTStringItem"/>
        <result property="allocRatio"           column="ALLOC_RATIO"            javaType="EZDTStringItem"/>
        <result property="childBomCmptCd"       column="CHILD_BOM_CMPT_CD"        javaType="EZDTStringItem"/>
        <result property="childBomCmptNm"       column="CHILD_BOM_CMPT_NM"        javaType="EZDTStringItem"/>
        <result property="childBomPrcAmt"       column="CHILD_BOM_PRC_AMT"        javaType="EZDTStringItem"/>
    </resultMap>
    
    <resultMap id="result.HLD_PROC_DFNTMsg" class="HLD_PROC_DFNTMsg">
        <result property="hldRsnCd"               column="HLD_RSN_CD"                javaType="EZDTStringItem"/>
        <result property="relPntHardAllocFlg"   column="REL_PNT_HARD_ALLOC_FLG"    javaType="EZDTStringItem"/>
        <result property="relPntSoCratFlg"       column="REL_PNT_SO_CRAT_FLG"    javaType="EZDTStringItem"/>
    </resultMap>

    <statement id="getSvcMachMstrStatus" parameterClass="Map" resultClass="Map">
        SELECT
             SMM.SVC_MACH_USG_STS_CD
           , SMM.SVC_MACH_MSTR_STS_CD
           , SMM.SVC_MACH_MAINT_AVAL_FLG AS ALLC_FLG
           , SMM.CPO_ORD_NUM
           , SMM.CPO_DTL_LINE_NUM
           , SMM.CPO_DTL_LINE_SUB_NUM
           , SMM.SVC_CONFIG_MSTR_PK
           , SMM.CUR_LOC_NUM 
        FROM
             SVC_MACH_MSTR SMM
        WHERE
            SMM.GLBL_CMPY_CD      = #glblCmpyCd#
            AND SMM.MDSE_CD       Like #mdseCd# || '%'
            AND SMM.SER_NUM       = #serNum#
            AND SMM.CUR_LOC_NUM   = #invtyLocCd#
            AND SMM.EZCANCELFLAG  = '0'
    
    </statement>

    <statement id="getOrdCmpsnList" parameterClass="Map" resultClass="Map">
        SELECT DCDV.CHILD_MDSE_QTY
             , DCDV.MDSE_CD
          FROM CPO_DTL_V DCDV
         WHERE DCDV.GLBL_CMPY_CD  = #glblCmpyCd#
           AND DCDV.EZCANCELFLAG  = '0'
           AND DCDV.CPO_ORD_NUM   = #cpoOrdNum#
           AND DCDV.CPO_DTL_LINE_NUM     = #cpoDtlLineNum#
           AND DCDV.CPO_DTL_LINE_SUB_NUM &lt;&gt; #cpoDtlLineSubNum#
    </statement>

    <statement id="getOrdInfo" parameterClass="Map" resultClass="Map">
        SELECT SP.SHPG_PLN_NUM
             , CDV.CPO_ORD_NUM
             , CDV.CPO_DTL_LINE_NUM
             , CDV.CPO_DTL_LINE_SUB_NUM
             , CDV.ORD_QTY
             , CDV.DS_ORD_POSN_NUM
             , AMV.BACK_ORD_IMPCT_TP_CD
          FROM SHPG_PLN   SP
             , CPO_DTL_V CDV
             , ALL_MDSE_V AMV
         WHERE SP.GLBL_CMPY_CD  = #glblCmpyCd#
           AND SP.EZCANCELFLAG  = '0'
           AND SP.TRX_SRC_TP_CD = #trxSrcTpCd#
           AND SP.TRX_HDR_NUM   = #trxHdrNum#
           AND SP.GLBL_CMPY_CD  = CDV.GLBL_CMPY_CD
           AND SP.EZCANCELFLAG  = CDV.EZCANCELFLAG
           AND SP.TRX_HDR_NUM   = CDV.CPO_ORD_NUM
           AND SP.TRX_LINE_NUM  = CDV.CPO_DTL_LINE_NUM
           AND SP.TRX_LINE_SUB_NUM = CDV.CPO_DTL_LINE_SUB_NUM
           AND SP.GLBL_CMPY_CD  = AMV.GLBL_CMPY_CD
           AND SP.EZCANCELFLAG  = AMV.EZCANCELFLAG
           AND SP.MDSE_CD       = AMV.MDSE_CD
    </statement>
</sqlMap>
