<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NSAL0590Query">

    <typeAlias alias="NSAL0590CMsg"      type="business.blap.NSAL0590.NSAL0590CMsg"/>
    <typeAlias alias="NSAL0590_ASMsg"    type="business.blap.NSAL0590.NSAL0590_ASMsg"/>

    <statement id="getDsContracReportGroupInfoList" parameterClass="Map" resultMap="result.NSAL0590_ASMsg">
       SELECT
               A.DS_CONTR_RPT_GRP_NUM
              ,A.DS_CONTR_RPT_GRP_DESC_TXT
              ,A.DS_CONTR_RPT_GRP_START_DT
              ,A.DS_CONTR_RPT_GRP_END_DT
              ,A.EZUPTIME
              ,A.EZUPTIMEZONE
       FROM (
            SELECT
                DS_CONTR_RPT_GRP_NUM               AS DS_CONTR_RPT_GRP_NUM
               ,DS_CONTR_RPT_GRP_DESC_TXT          AS DS_CONTR_RPT_GRP_DESC_TXT
               ,DS_CONTR_RPT_GRP_START_DT          AS DS_CONTR_RPT_GRP_START_DT
               ,DS_CONTR_RPT_GRP_END_DT            AS DS_CONTR_RPT_GRP_END_DT
               ,EZUPTIME                           AS EZUPTIME
               ,EZUPTIMEZONE                       AS EZUPTIMEZONE

            FROM
                DS_CONTR_RPT_GRP
            WHERE
               GLBL_CMPY_CD                        =      #glblCmpyCd#
               <isNotNull property="bizMsg.dsContrRptGrpNum_H">
               AND DS_CONTR_RPT_GRP_NUM            LIKE   #bizMsg.dsContrRptGrpNum_H#
               </isNotNull>
               <isNotNull property="bizMsg.dsContrRptGrpDescTxt_H">
               AND DS_CONTR_RPT_GRP_DESC_TXT       LIKE   #bizMsg.dsContrRptGrpDescTxt_H#
               </isNotNull>
               <isNotNull property="bizMsg.dsContrRptGrpStartDt_H">
               AND DS_CONTR_RPT_GRP_START_DT       &gt;=  #bizMsg.dsContrRptGrpStartDt_H#
               </isNotNull>
               <isNotNull property="bizMsg.dsContrRptGrpStartDt_HE">
               AND DS_CONTR_RPT_GRP_START_DT       &lt;=  #bizMsg.dsContrRptGrpStartDt_HE#
               </isNotNull>
<!-- START 2016/03/25 M.Gotou [QC#4919, MOD] -->
               <isNotNull property="bizMsg.dsContrRptGrpEndDt_H">
<!--           AND DS_CONTR_RPT_GRP_END_DT         &gt;=  #bizMsg.dsContrRptGrpEndDt_H# -->
               AND NVL(DS_CONTR_RPT_GRP_END_DT, #endDt#)
                                                   &gt;=  #bizMsg.dsContrRptGrpEndDt_H#
               </isNotNull>
               <isNotNull property="bizMsg.dsContrRptGrpEndDt_HE">
<!--           AND DS_CONTR_RPT_GRP_END_DT         &lt;=  #bizMsg.dsContrRptGrpEndDt_HE# -->
               AND NVL(DS_CONTR_RPT_GRP_END_DT, #endDt#)
                                                   &lt;=  #bizMsg.dsContrRptGrpEndDt_HE#
               </isNotNull>
<!-- END 2016/03/25 M.Gotou [QC#4919, MOD] -->
               AND EZCANCELFLAG                        = '0'

            ORDER BY
               DS_CONTR_RPT_GRP_NUM ASC
       ) A
       WHERE
           ROWNUM  &lt;=   #limitCount#
    </statement>

    <resultMap id="result.NSAL0590_ASMsg" class="NSAL0590_ASMsg">
        <result property="dsContrRptGrpNum"           column="DS_CONTR_RPT_GRP_NUM"                javaType="EZDSStringItem"/>
        <result property="dsContrRptGrpDescTxt"       column="DS_CONTR_RPT_GRP_DESC_TXT"           javaType="EZDSStringItem"/>
        <result property="dsContrRptGrpStartDt"       column="DS_CONTR_RPT_GRP_START_DT"           javaType="EZDSStringItem"/>
        <result property="dsContrRptGrpEndDt"         column="DS_CONTR_RPT_GRP_END_DT"             javaType="EZDSStringItem"/>
        <result property="ezUpTime"                   column="EZUPTIME"                            javaType="EZDSStringItem"/>
        <result property="ezUpTimeZone"               column="EZUPTIMEZONE"                        javaType="EZDSStringItem"/>
    </resultMap>

</sqlMap>
