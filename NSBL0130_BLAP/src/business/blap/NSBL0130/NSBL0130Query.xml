<?xml version="1.0" encoding="UTF-8"?>
<sqlMap namespace="NSBL0130Query">
    <typeAlias alias="NSBL0130_ASMsg" type="business.blap.NSBL0130.NSBL0130_ASMsg"/>

    <statement id="searchList" parameterClass="Map" resultMap="result.NSBL0130_ASMsg">
        SELECT
               TSK.SVC_TASK_NUM
               , TSK.SER_NUM
               , TSK.CUST_MACH_CTRL_NUM
               , HLD.SVC_TASK_HLD_RSN_CD
               , HLD.SVC_TASK_REL_DT
               , HLD.SVC_TASK_REL_USR_ID
               , RSN.SVC_TASK_HLD_RSN_NM

        FROM     
               SVC_TASK             TSK
               , SVC_TASK_HLD       HLD
               , SVC_TASK_HLD_RSN   RSN

        WHERE 
                 TSK.GLBL_CMPY_CD        = #glblCmpyCd#
          AND    TSK.FSR_NUM             = #fsrNum#
          AND    TSK.EZCANCELFLAG        = '0'
          AND    HLD.GLBL_CMPY_CD        = TSK.GLBL_CMPY_CD
          AND    HLD.SVC_TASK_NUM        = TSK.SVC_TASK_NUM
          AND    HLD.EZCANCELFLAG        = '0'

          AND    HLD.SVC_TASK_HLD_RSN_CD = RSN.SVC_TASK_HLD_RSN_CD
          AND    HLD.GLBL_CMPY_CD        = RSN.GLBL_CMPY_CD
          AND    HLD.EZCANCELFLAG        = '0'

        ORDER BY HLD.SVC_TASK_HLD_RSN_CD
    </statement>
    <resultMap id="result.NSBL0130_ASMsg" class="NSBL0130_ASMsg">
        <result property="svcTaskNum"           column="SVC_TASK_NUM"             javaType="EZDSStringItem"/>
        <result property="serNum"               column="SER_NUM"                  javaType="EZDSStringItem"/>
        <result property="custMachCtrlNum"      column="CUST_MACH_CTRL_NUM"       javaType="EZDSStringItem"/>
        <result property="svcTaskHldRsnCd"      column="SVC_TASK_HLD_RSN_CD"      javaType="EZDSStringItem"/>
        <result property="svcTaskRelDt"         column="SVC_TASK_REL_DT"          javaType="EZDSStringItem"/>
        <result property="svcTaskRelUsrId"      column="SVC_TASK_REL_USR_ID"      javaType="EZDSStringItem"/>
        <result property="svcTaskHldRsnNm"      column="SVC_TASK_HLD_RSN_NM"      javaType="EZDSStringItem"/>
    </resultMap>
</sqlMap>
