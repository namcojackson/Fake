<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NFAL0210Query">
    <typeAlias alias="NFAL0210_ASMsg" type="business.blap.NFAL0210.NFAL0210_ASMsg"/>
    <statement id="getSearchData" parameterClass="Map" resultMap="result.getSearchData">
        SELECT
             MAN_JRNL_NM
            ,JRNL_CATG_DESC_TXT
            ,GL_PER_NM
            ,GL_DT
            ,GL_SEND_CPLT_FLG
            ,RVSL_CPLT_FLG
            ,ACTL_RVSL_DT
            ,MAN_JRNL_CPLT_FLG
            ,AUTO_RVSL_FLG
            ,MAN_JRNL_ENTRY_HDR_PK
        FROM
            (
                SELECT
                     MJEH.MAN_JRNL_NM
                    ,JC.JRNL_CATG_DESC_TXT
                    ,MJEH.GL_PER_NM
                    ,MJEH.GL_DT
                    ,MJEH.GL_SEND_CPLT_FLG
                    ,MJEH.RVSL_CPLT_FLG
                    ,MJEH.ACTL_RVSL_DT
                    ,MJEH.MAN_JRNL_CPLT_FLG
                    ,MJEH.AUTO_RVSL_FLG
                    ,MJEH.MAN_JRNL_ENTRY_HDR_PK
                FROM
                     MAN_JRNL_ENTRY_HDR MJEH
                    ,JRNL_CATG          JC
                WHERE
                        MJEH.GLBL_CMPY_CD      = #glblCmpyCd#
                    <isNotNull property="manJrnlNm" >
                    AND UPPER(MJEH.MAN_JRNL_NM) LIKE UPPER(#manJrnlNm#)
                    </isNotNull>
                    <isNotNull property="glPerNm" >
                    AND MJEH.GL_PER_NM         = #glPerNm#
                    </isNotNull>
                    <isNotNull property="glDtFrom" >
                    AND MJEH.GL_DT             &gt;= #glDtFrom#
                    </isNotNull>
                    <isNotNull property="glDtTo" >
                    AND MJEH.GL_DT             &lt;= #glDtTo#
                    </isNotNull>
                    <isNotNull property="jrnlCatgCd" >
                    AND MJEH.JRNL_CATG_CD      = #jrnlCatgCd#
                    </isNotNull>
                    <isNotNull property="glSendCpltFlg" >
                    AND MJEH.GL_SEND_CPLT_FLG  = #glSendCpltFlg#
                    </isNotNull>
                    <isNotNull property="rvslCpltFlg" >
                    AND MJEH.RVSL_CPLT_FLG     = #rvslCpltFlg#
                    </isNotNull>
                    <isNotNull property="manJrnlCpltFlg" >
                    AND MJEH.MAN_JRNL_CPLT_FLG = #manJrnlCpltFlg#
                    </isNotNull>
                    <isNotNull property="autoRvslFlg" >
                    AND MJEH.AUTO_RVSL_FLG     = #autoRvslFlg#
                    </isNotNull>
                    AND MJEH.GLBL_CMPY_CD      = JC.GLBL_CMPY_CD(+)
                    AND MJEH.JRNL_CATG_CD      = JC.JRNL_CATG_CD(+)
                    AND MJEH.EZCANCELFLAG      = '0'
                    AND JC.EZCANCELFLAG        = '0'
                ORDER BY
                     MJEH.GL_DT DESC
                    ,MJEH.EZINTIME DESC
                    ,MJEH.MAN_JRNL_ENTRY_HDR_PK DESC
            )
        WHERE
            ROWNUM &lt;= #rowNum#
    </statement>
    <resultMap id="result.getSearchData" class="NFAL0210_ASMsg">
        <result property="manJrnlNm_A"         column="MAN_JRNL_NM"           javaType="EZDSStringItem"/>
        <result property="jrnlCatgDescTxt_A"   column="JRNL_CATG_DESC_TXT"    javaType="EZDSStringItem"/>
        <result property="glPerNm_A"           column="GL_PER_NM"             javaType="EZDSStringItem"/>
        <result property="glDt_A"              column="GL_DT"                 javaType="EZDSStringItem"/>
        <result property="glSendCpltFlg_A"     column="GL_SEND_CPLT_FLG"      javaType="EZDSStringItem"/>
        <result property="rvslCpltFlg_A"       column="RVSL_CPLT_FLG"         javaType="EZDSStringItem"/>
        <result property="actlRvslDt_A"        column="ACTL_RVSL_DT"          javaType="EZDSStringItem"/>
        <result property="manJrnlCpltFlg_A"    column="MAN_JRNL_CPLT_FLG"     javaType="EZDSStringItem"/>
        <result property="autoRvslFlg_A"       column="AUTO_RVSL_FLG"         javaType="EZDSStringItem"/>
        <result property="manJrnlEntryHdrPk_A" column="MAN_JRNL_ENTRY_HDR_PK" javaType="EZDSBigDecimalItem"/>
    </resultMap>
</sqlMap>
