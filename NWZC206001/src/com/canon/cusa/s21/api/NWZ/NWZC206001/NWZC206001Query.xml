<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NWZC206001Query">

    <statement id="getSupdInfoTo" parameterClass="Map" resultClass="Map">
        SELECT
           R.SUPD_TO_MDSE_CD,
           S.INCG_FLG,
           M.MDSE_NM,
           M.SELL_HLD_FLG,
           M.DSCTN_FLG,
           M.RGTN_STS_CD
        FROM
           SUPD_RELN R,
           SUPD S,
           MDSE M
        WHERE
           R.EZCANCELFLAG          = '0'
           AND R.GLBL_CMPY_CD      = #glblCmpyCd#
           AND R.SUPD_FROM_MDSE_CD = #supdFromMdseCd#
           AND S.EZCANCELFLAG      = '0'
           AND S.GLBL_CMPY_CD      = R.GLBL_CMPY_CD
           AND S.MDSE_CD           = R.SUPD_TO_MDSE_CD
           AND M.EZCANCELFLAG      = '0'
           AND M.GLBL_CMPY_CD      = S.GLBL_CMPY_CD
           AND M.MDSE_CD           = S.MDSE_CD
    </statement>

    <statement id="getSupdInfoFrom" parameterClass="Map" resultClass="Map">
        SELECT
           R.SUPD_FROM_MDSE_CD,
           S.INCG_FLG,
           M.MDSE_NM,
           M.SELL_HLD_FLG,
           M.DSCTN_FLG,
           M.RGTN_STS_CD
        FROM
           SUPD_RELN R,
           SUPD S,
           MDSE M
        WHERE
           R.EZCANCELFLAG          = '0'
           AND R.GLBL_CMPY_CD      = #glblCmpyCd#
           AND R.SUPD_TO_MDSE_CD   = #supdToMdseCd#
           AND S.EZCANCELFLAG      = '0'
           AND S.GLBL_CMPY_CD      = R.GLBL_CMPY_CD
           AND S.MDSE_CD           = R.SUPD_FROM_MDSE_CD
           AND S.INCG_FLG          = 'Y'
           AND M.EZCANCELFLAG      = '0'
           AND M.GLBL_CMPY_CD      = S.GLBL_CMPY_CD
           AND M.MDSE_CD           = S.MDSE_CD
    </statement>

    <statement id="getSupdInfoFromIncgFlgN" parameterClass="Map" resultClass="Map">
        SELECT
           R.SUPD_FROM_MDSE_CD,
           S.INCG_FLG
        FROM
           SUPD_RELN R,
           SUPD S
        WHERE
           R.EZCANCELFLAG          = '0'
           AND R.GLBL_CMPY_CD      = #glblCmpyCd#
           AND R.SUPD_TO_MDSE_CD   = #supdToMdseCd#
           AND S.EZCANCELFLAG      = '0'
           AND S.GLBL_CMPY_CD      = R.GLBL_CMPY_CD
           AND S.MDSE_CD           = R.SUPD_FROM_MDSE_CD
           AND S.INCG_FLG          = 'N'
    </statement>

    <statement id="getInvtyAvalQty" parameterClass="Map" resultClass="Map">
        SELECT
           MDSE_CD,
           INVTY_AVAL_QTY
        FROM
           INVTY
        WHERE
           EZCANCELFLAG     = '0'
           AND GLBL_CMPY_CD = #glblCmpyCd#
           <iterate property="mdseCdList" var="mdseCd[]" open=" AND MDSE_CD IN (" close=")" conjunction=",">
               #mdseCd[]#
           </iterate>
           AND INVTY_LOC_CD = #whCd#
           AND STK_STS_CD   = #stkStsCd#
           AND LOC_STS_CD   = '03'
           AND LOC_TP_CD    IN (#locTpWh#, #locTpTech#)
    </statement>

</sqlMap>
