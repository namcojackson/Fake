<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NWZC1650">

    <statement id="WF_ORDER_CAT_SQL" parameterClass="Map" resultClass="Map">
        SELECT
              COND_VAL_TXT_01                  as  COND_STR1
            , COND_VAL_TXT_02                  as  COND_STR2
            , COND_VAL_TXT_03                  as  COND_STR3
            , COND_VAL_NUM_01                  as  COND_NUM1
            , COND_VAL_NUM_02                  as  COND_NUM2
            , ATTRB_COND_VAL_TXT_01            as  VAL_STR1
        FROM
            WF_UTIL_COND
        WHERE
                    EZCANCELFLAG = '0'
            AND     GLBL_CMPY_CD = #glblCmpyCd#
            AND     WF_BIZ_APP_ID   = #bizId#
            AND     COND_VAL_TXT_10    = '1'
    </statement>

    <statement id="WF_RULES_BU_SQL" parameterClass="Map" resultClass="Map">
        SELECT
              COND_VAL_TXT_01                  as  COND_STR1
            , COND_VAL_TXT_04                  as  COND_STR4
            , COND_VAL_NUM_01                  as  COND_NUM1
            , COND_VAL_NUM_02                  as  COND_NUM2
            , ATTRB_COND_VAL_TXT_01            as  VAL_STR1
        FROM
            WF_UTIL_COND
        WHERE
                    EZCANCELFLAG = '0'
            AND     GLBL_CMPY_CD = #glblCmpyCd#
            AND     WF_BIZ_APP_ID   = #bizId#
            AND     COND_VAL_TXT_10    = '2'
    </statement>

    <statement id="WF_RULES_BRANCH_SQL" parameterClass="Map" resultClass="Map">
        SELECT
              COND_VAL_TXT_01                  as  COND_STR1
            , COND_VAL_TXT_05                  as  COND_STR5
            , COND_VAL_NUM_01                  as  COND_NUM1
            , COND_VAL_NUM_02                  as  COND_NUM2
            , ATTRB_COND_VAL_TXT_01            as  VAL_STR1
        FROM
            WF_UTIL_COND
        WHERE
                    EZCANCELFLAG = '0'
            AND     GLBL_CMPY_CD = #glblCmpyCd#
            AND     WF_BIZ_APP_ID   = #bizId#
            AND     COND_VAL_TXT_10    = '3'
    </statement>

    <statement id="WF_RULES_LAS_BYOT_SQL" parameterClass="Map" resultClass="Map">
        SELECT
              COND_VAL_TXT_01                  as  COND_STR1
            , COND_VAL_TXT_02                  as  COND_STR2
            , COND_VAL_NUM_01                  as  COND_NUM1
            , COND_VAL_NUM_02                  as  COND_NUM2
            , ATTRB_COND_VAL_TXT_01            as  VAL_STR1
        FROM
            WF_UTIL_COND
        WHERE
                    EZCANCELFLAG = '0'
            AND     GLBL_CMPY_CD = #glblCmpyCd#
            AND     WF_BIZ_APP_ID   = #bizId#
            AND     COND_VAL_TXT_01    = #condStr1#
            AND     COND_VAL_TXT_02    = #condStr2#
       ORDER BY WF_COND_LINE_NUM
    </statement>

    <statement id="WF_RULES_PRFT_APVL_SQL" parameterClass="Map" resultClass="Map">
            SELECT
                 COND_STR1
                ,VAL_STR1
            FROM
                (
                SELECT
                     COND_VAL_TXT_01       AS COND_STR1
                    ,ATTRB_COND_VAL_TXT_01 AS VAL_STR1
                    ,1                     AS PRIORITY
                FROM
                    WF_UTIL_COND
                WHERE
                        EZCANCELFLAG    = '0'
                    AND GLBL_CMPY_CD    = #glblCmpyCd#
                    AND WF_BIZ_APP_ID   = #bizId#
                    AND COND_VAL_TXT_10 = '3'
                    AND COND_VAL_TXT_01 = #condStr1#
                    AND COND_VAL_TXT_05 = #condStr5#
                    AND COND_VAL_NUM_01 &lt;= #condNum1#
                    AND COND_VAL_NUM_02 &gt; #condNum1#
                UNION
                SELECT
                     COND_VAL_TXT_01       AS COND_STR1
                    ,ATTRB_COND_VAL_TXT_01 AS VAL_STR1
                    ,2                     AS PRIORITY
                FROM
                    WF_UTIL_COND
                WHERE
                        EZCANCELFLAG    = '0'
                    AND GLBL_CMPY_CD    = #glblCmpyCd#
                    AND WF_BIZ_APP_ID   = #bizId#
                    AND COND_VAL_TXT_10 = '2'
                    AND COND_VAL_TXT_01 = #condStr1#
                    AND COND_VAL_TXT_04 = #condStr4#
                    AND COND_VAL_NUM_01 &lt;= #condNum1#
                    AND COND_VAL_NUM_02 &gt; #condNum1#
                UNION
                SELECT
                     COND_VAL_TXT_01       AS COND_STR1
                    ,ATTRB_COND_VAL_TXT_01 AS VAL_STR1
                    ,3                     AS PRIORITY
                FROM
                    WF_UTIL_COND
                WHERE
                        EZCANCELFLAG    = '0'
                    AND GLBL_CMPY_CD    = #glblCmpyCd#
                    AND WF_BIZ_APP_ID   = #bizId#
                    AND COND_VAL_TXT_10 = '1'
                    AND COND_VAL_TXT_01 = #condStr1#
                    AND COND_VAL_TXT_02 = #condStr2#
                    AND COND_VAL_TXT_03 = #condStr3#
                    AND COND_VAL_NUM_01 &lt;= #condNum1#
                    AND COND_VAL_NUM_02 &gt; #condNum1#
                UNION
                SELECT
                     COND_VAL_TXT_01       AS COND_STR1
                    ,ATTRB_COND_VAL_TXT_01 AS VAL_STR1
                    ,4                     AS PRIORITY
                FROM
                    WF_UTIL_COND
                WHERE
                        EZCANCELFLAG    = '0'
                    AND GLBL_CMPY_CD    = #glblCmpyCd#
                    AND WF_BIZ_APP_ID   = #bizId#
                    AND COND_VAL_TXT_10 = '1'
                    AND COND_VAL_TXT_01 = #condStr1#
                    AND COND_VAL_TXT_02 = #condStr2#
                    AND COND_VAL_TXT_03 IS NULL
                    AND COND_VAL_NUM_01 &lt;= #condNum1#
                    AND COND_VAL_NUM_02 &gt; #condNum1#
                ORDER BY
                    PRIORITY
                )
            WHERE
                ROWNUM = 1
    </statement>

    <statement id="WF_RULES_PRFT_CONF_SQL" parameterClass="Map" resultClass="Map">
            SELECT
                 COND_STR1
                ,VAL_STR1
                ,DEC_COND
                ,COND_STR_9
            FROM
                (
                SELECT
                     COND_VAL_TXT_01       AS COND_STR1
                    ,ATTRB_COND_VAL_TXT_01 AS VAL_STR1
                    ,COND_VAL_TXT_09       AS DEC_COND
                    ,COND_VAL_TXT_09       AS COND_STR_9
                    ,1                     AS PRIORITY
                FROM
                    WF_UTIL_COND
                WHERE
                        EZCANCELFLAG    = '0'
                    AND GLBL_CMPY_CD    = #glblCmpyCd#
                    AND WF_BIZ_APP_ID   = #bizId#
                    AND COND_VAL_TXT_10 = '3'
                    AND COND_VAL_TXT_01 = #condStr1#
                    AND COND_VAL_TXT_05 = #condStr5#
                    AND COND_VAL_NUM_01 &lt;= #condNum1#
                    AND COND_VAL_NUM_02 &gt; #condNum1#
                UNION
                SELECT
                     COND_VAL_TXT_01       AS COND_STR1
                    ,ATTRB_COND_VAL_TXT_01 AS VAL_STR1
                    ,COND_VAL_TXT_09       AS DEC_COND
                    ,COND_VAL_TXT_09       AS COND_STR_9
                    ,2                     AS PRIORITY
                FROM
                    WF_UTIL_COND
                WHERE
                        EZCANCELFLAG    = '0'
                    AND GLBL_CMPY_CD    = #glblCmpyCd#
                    AND WF_BIZ_APP_ID   = #bizId#
                    AND COND_VAL_TXT_10 = '2'
                    AND COND_VAL_TXT_01 = #condStr1#
                    AND COND_VAL_TXT_04 = #condStr4#
                    AND COND_VAL_NUM_01 &lt;= #condNum1#
                    AND COND_VAL_NUM_02 &gt; #condNum1#
                UNION
                SELECT
                     COND_VAL_TXT_01       AS COND_STR1
                    ,ATTRB_COND_VAL_TXT_01 AS VAL_STR1
                    ,COND_VAL_TXT_09       AS DEC_COND
                    ,COND_VAL_TXT_09       AS COND_STR_9
                    ,3                     AS PRIORITY
                FROM
                    WF_UTIL_COND
                WHERE
                        EZCANCELFLAG    = '0'
                    AND GLBL_CMPY_CD    = #glblCmpyCd#
                    AND WF_BIZ_APP_ID   = #bizId#
                    AND COND_VAL_TXT_10 = '1'
                    AND COND_VAL_TXT_01 = #condStr1#
                    AND COND_VAL_TXT_02 = #condStr2#
                    AND COND_VAL_TXT_03 = #condStr3#
                    AND COND_VAL_NUM_01 &lt;= #condNum1#
                    AND COND_VAL_NUM_02 &gt; #condNum1#
                UNION
                SELECT
                     COND_VAL_TXT_01       AS COND_STR1
                    ,ATTRB_COND_VAL_TXT_01 AS VAL_STR1
                    ,COND_VAL_TXT_09       AS DEC_COND
                    ,COND_VAL_TXT_09       AS COND_STR_9
                    ,4                     AS PRIORITY
                FROM
                    WF_UTIL_COND
                WHERE
                        EZCANCELFLAG    = '0'
                    AND GLBL_CMPY_CD    = #glblCmpyCd#
                    AND WF_BIZ_APP_ID   = #bizId#
                    AND COND_VAL_TXT_10 = '1'
                    AND COND_VAL_TXT_01 = #condStr1#
                    AND COND_VAL_TXT_02 = #condStr2#
                    AND COND_VAL_TXT_03 IS NULL
                    AND COND_VAL_NUM_01 &lt;= #condNum1#
                    AND COND_VAL_NUM_02 &gt; #condNum1#
                ORDER BY
                    PRIORITY
                )
            WHERE
                ROWNUM = 1
    </statement>

    <statement id="WF_RULES_PRFT_NO_PROC_SQL" parameterClass="Map" resultClass="Map">
            SELECT
                COND_VAL_TXT_01       AS COND_STR1
               ,ATTRB_COND_VAL_TXT_01 AS VAL_STR1
            FROM
                WF_UTIL_COND
            WHERE
                ROWNUM = 0
    </statement>

    <!-- 2016/09/13 S21_NA#5394 Add Start -->
    <statement id="WF_ORD_ADMIN_CONDITION" parameterClass="Map" resultClass="Map">
        SELECT
              #bizId#           AS BIZ_ID
            , #userGroup#       AS USER_GROUP_NAME
            , '000'             AS USER_GROUP_LEVEL
            , C.ADMIN_PSN_CD    AS WF_USR_ID
        FROM
            CPO C
        WHERE
            C.GLBL_CMPY_CD      = #glblCmpyCd#
            AND C.CPO_ORD_NUM   = #cpoOrdNum#
            AND C.ADMIN_PSN_CD  IS NOT NULL
            AND C.EZCANCELFLAG  = '0'
        UNION
        SELECT DISTINCT
            #bizId# AS BIZ_ID
            , #userGroup# AS USER_GROUP_NAME
            , '000' AS USER_GROUP_LEVEL
            , OTMD2.ORD_TEAM_ATTRB_VAL_TXT AS WF_USR_ID
        FROM
            CPO C
            , ORD_TEAM_MSTR_DTL OTMD
            , ORD_TEAM_MSTR_HDR OTMH
            , ORD_TEAM_MSTR_DTL OTMD2
            , (
                SELECT
                    GLBL_CMPY_CD
                    , MGT_DT
                FROM
                    DT_MGT
                WHERE
                    DT_PROC_CD = 'S'
                    AND DT_MGT_PGM_ID = '*'
                    AND EZCANCELFLAG = '0'
                    AND ROWNUM <![CDATA[<=]]> 1
            ) DT_MGT
        WHERE
            C.GLBL_CMPY_CD = #glblCmpyCd#
            AND C.CPO_ORD_NUM = #cpoOrdNum#
            AND C.EZCANCELFLAG = '0'
            AND C.GLBL_CMPY_CD = OTMD.GLBL_CMPY_CD
            AND C.ADMIN_PSN_CD = OTMD.ORD_TEAM_ATTRB_VAL_TXT
            AND OTMD.ORD_TEAM_ATTRB_TP_CD = '10'
            AND OTMD.EZCANCELFLAG = '0'

            AND OTMD.GLBL_CMPY_CD = OTMH.GLBL_CMPY_CD
            AND OTMD.ORD_TEAM_MSTR_HDR_PK = OTMH.ORD_TEAM_MSTR_HDR_PK
            AND OTMH.GLBL_CMPY_CD = DT_MGT.GLBL_CMPY_CD
            AND OTMH.EFF_FROM_DT <![CDATA[<=]]> DT_MGT.MGT_DT
            AND NVL(OTMH.EFF_THRU_DT, '99991231') <![CDATA[>=]]> DT_MGT.MGT_DT
            AND OTMH.EZCANCELFLAG = '0'

            AND OTMH.GLBL_CMPY_CD = OTMD2.GLBL_CMPY_CD
            AND OTMH.ORD_TEAM_MSTR_HDR_PK = OTMD2.ORD_TEAM_MSTR_HDR_PK
            AND OTMD2.ORD_TEAM_ATTRB_TP_CD = '10'
            AND OTMD2.EZCANCELFLAG = '0'
    </statement>
    <!-- 2016/09/13 S21_NA#5394 Add End -->
    <!-- 2018/04/24 QC#20149 Add Start -->
    <statement id="WF_REJ_NTFY_COND" parameterClass="Map" resultClass="Map">
        SELECT
              #bizId#           AS BIZ_ID
            , #userGroup#       AS USER_GROUP_NAME
            , '000'             AS USER_GROUP_LEVEL
            , C.ADMIN_PSN_CD    AS WF_USR_ID
        FROM
            CPO C
        WHERE
            C.GLBL_CMPY_CD      = #glblCmpyCd#
            AND C.CPO_ORD_NUM   = #cpoOrdNum#
            AND C.ADMIN_PSN_CD  IS NOT NULL
            AND C.EZCANCELFLAG  = '0'
    </statement>
    <!-- 2018/04/24 QC#20149 Add End -->
</sqlMap>