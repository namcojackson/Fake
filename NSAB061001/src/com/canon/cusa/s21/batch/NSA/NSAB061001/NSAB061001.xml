<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NSAB061001">
    <statement id="getSvcSlnUpldWrk" parameterClass="Map" resultClass="Map">
        SELECT
             A.UPLD_CSV_RQST_PK
            ,A.UPLD_CSV_RQST_ROW_NUM
            ,A.SVC_SLN_NM
            ,A.SVC_CONFIG_MSTR_PK_01
            ,A.SVC_CONFIG_MSTR_PK_02
            ,A.SVC_CONFIG_MSTR_PK_03
            ,A.SVC_CONFIG_MSTR_PK_04
            ,A.SVC_CONFIG_MSTR_PK_05
            ,A.SVC_CONFIG_MSTR_PK_06
            ,A.SVC_CONFIG_MSTR_PK_07
            ,B.SVC_CONFIG_MSTR_PK    AS SVC_CONFIG_MSTR_PK_01_FOR_MSTR
            ,C.SVC_CONFIG_MSTR_PK    AS SVC_CONFIG_MSTR_PK_02_FOR_MSTR
            ,D.SVC_CONFIG_MSTR_PK    AS SVC_CONFIG_MSTR_PK_03_FOR_MSTR
            ,E.SVC_CONFIG_MSTR_PK    AS SVC_CONFIG_MSTR_PK_04_FOR_MSTR
            ,F.SVC_CONFIG_MSTR_PK    AS SVC_CONFIG_MSTR_PK_05_FOR_MSTR
            ,G.SVC_CONFIG_MSTR_PK    AS SVC_CONFIG_MSTR_PK_06_FOR_MSTR
            ,H.SVC_CONFIG_MSTR_PK    AS SVC_CONFIG_MSTR_PK_07_FOR_MSTR
            ,(
                SELECT
                    SCM.SVC_SLN_SQ
                FROM
                    SVC_CONFIG_MSTR SCM
                WHERE
                        SCM.GLBL_CMPY_CD = A.GLBL_CMPY_CD
                    AND SCM.SVC_SLN_NM   = A.SVC_SLN_NM
                    AND SCM.EZCANCELFLAG = '0'
                    AND ROWNUM           = 1
             ) AS SVC_SLN_SQ
        FROM
             (
                SELECT
                     AA.GLBL_CMPY_CD
                    ,AA.UPLD_CSV_RQST_PK
                    ,AA.UPLD_CSV_RQST_ROW_NUM
                    ,UPPER(AA.SVC_SLN_NM)                                                AS SVC_SLN_NM
                    ,DECODE(AA.SVC_CONFIG_MSTR_PK_01, 0, NULL, AA.SVC_CONFIG_MSTR_PK_01) AS SVC_CONFIG_MSTR_PK_01
                    ,DECODE(AA.SVC_CONFIG_MSTR_PK_02, 0, NULL, AA.SVC_CONFIG_MSTR_PK_02) AS SVC_CONFIG_MSTR_PK_02
                    ,DECODE(AA.SVC_CONFIG_MSTR_PK_03, 0, NULL, AA.SVC_CONFIG_MSTR_PK_03) AS SVC_CONFIG_MSTR_PK_03
                    ,DECODE(AA.SVC_CONFIG_MSTR_PK_04, 0, NULL, AA.SVC_CONFIG_MSTR_PK_04) AS SVC_CONFIG_MSTR_PK_04
                    ,DECODE(AA.SVC_CONFIG_MSTR_PK_05, 0, NULL, AA.SVC_CONFIG_MSTR_PK_05) AS SVC_CONFIG_MSTR_PK_05
                    ,DECODE(AA.SVC_CONFIG_MSTR_PK_06, 0, NULL, AA.SVC_CONFIG_MSTR_PK_06) AS SVC_CONFIG_MSTR_PK_06
                    ,DECODE(AA.SVC_CONFIG_MSTR_PK_07, 0, NULL, AA.SVC_CONFIG_MSTR_PK_07) AS SVC_CONFIG_MSTR_PK_07
                FROM
                    SVC_SLN_UPLD_WRK AA
                WHERE
                        AA.GLBL_CMPY_CD     = #glblCmpyCd#
                    AND AA.EZCANCELFLAG     = '0'
                    AND AA.UPLD_CSV_RQST_PK = #upldCsvRqstPk#
             ) A
            ,SVC_CONFIG_MSTR  B
            ,SVC_CONFIG_MSTR  C
            ,SVC_CONFIG_MSTR  D
            ,SVC_CONFIG_MSTR  E
            ,SVC_CONFIG_MSTR  F
            ,SVC_CONFIG_MSTR  G
            ,SVC_CONFIG_MSTR  H
        WHERE
                A.GLBL_CMPY_CD              = B.GLBL_CMPY_CD       (+)
            AND A.SVC_CONFIG_MSTR_PK_01     = B.SVC_CONFIG_MSTR_PK (+)
            AND B.EZCANCELFLAG          (+) = '0'
            AND A.GLBL_CMPY_CD              = C.GLBL_CMPY_CD       (+)
            AND A.SVC_CONFIG_MSTR_PK_02     = C.SVC_CONFIG_MSTR_PK (+)
            AND C.EZCANCELFLAG          (+) = '0'
            AND A.GLBL_CMPY_CD              = D.GLBL_CMPY_CD       (+)
            AND A.SVC_CONFIG_MSTR_PK_03     = D.SVC_CONFIG_MSTR_PK (+)
            AND D.EZCANCELFLAG          (+) = '0'
            AND A.GLBL_CMPY_CD              = E.GLBL_CMPY_CD       (+)
            AND A.SVC_CONFIG_MSTR_PK_04     = E.SVC_CONFIG_MSTR_PK (+)
            AND E.EZCANCELFLAG          (+) = '0'
            AND A.GLBL_CMPY_CD              = F.GLBL_CMPY_CD       (+)
            AND A.SVC_CONFIG_MSTR_PK_05     = F.SVC_CONFIG_MSTR_PK (+)
            AND F.EZCANCELFLAG          (+) = '0'
            AND A.GLBL_CMPY_CD              = G.GLBL_CMPY_CD       (+)
            AND A.SVC_CONFIG_MSTR_PK_06     = G.SVC_CONFIG_MSTR_PK (+)
            AND G.EZCANCELFLAG          (+) = '0'
            AND A.GLBL_CMPY_CD              = H.GLBL_CMPY_CD       (+)
            AND A.SVC_CONFIG_MSTR_PK_07     = H.SVC_CONFIG_MSTR_PK (+)
            AND H.EZCANCELFLAG          (+) = '0'
        ORDER BY
            A.UPLD_CSV_RQST_ROW_NUM
    </statement>
</sqlMap>
