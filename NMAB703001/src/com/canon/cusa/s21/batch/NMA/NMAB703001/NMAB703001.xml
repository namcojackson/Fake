<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NMAB703001">
    <statement id="getPriceListStruType" parameterClass="Map" resultClass="Map">
    SELECT
         PLS.PRC_LIST_STRU_TP_CD
        ,PC.PRC_CATG_CD
    FROM
         PRC_CATG PC
        ,PRC_LIST_TP PL
        ,PRC_LIST_STRU_TP PLS
    WHERE
            PC.GLBL_CMPY_CD  = #glblCmpyCd#
        AND PC.EZCANCELFLAG  = '0'
        AND PC.PRC_CATG_NM   = #prcCatgNm#

        AND PC.PRC_LIST_TP_CD  = PL.PRC_LIST_TP_CD
        AND PC.GLBL_CMPY_CD    = PL.GLBL_CMPY_CD
        AND PL.EZCANCELFLAG    = '0'

        AND PL.PRC_LIST_STRU_TP_CD = PLS.PRC_LIST_STRU_TP_CD
        AND PL.GLBL_CMPY_CD        = PLS.GLBL_CMPY_CD
        AND PLS.EZCANCELFLAG       = '0'
    </statement>
    <statement id="getPriceListPeriod" parameterClass="Map" resultClass="Map">
    SELECT
         MAX(PC.EFF_FROM_DT)  AS HEADER_FROM
        ,MAX(PC.EFF_THRU_DT)  AS HEADER_TO
        ,MIN(PL.EFF_FROM_DT)  AS DETAIL_FROM
        ,MAX(PL.EFF_THRU_DT)  AS DETAIL_TO
    FROM
         PRC_CATG           PC
        ,$priceListTableNm$ PL
    WHERE
        PC.GLBL_CMPY_CD = #glblCmpyCd#
    AND PC.EZCANCELFLAG = '0'
    AND PC.PRC_CATG_NM  = #prcCatgNm#

    AND PC.PRC_CATG_CD     = PL.PRC_CATG_CD(+)
    AND PC.GLBL_CMPY_CD    = PL.GLBL_CMPY_CD(+)
    AND PL.EZCANCELFLAG(+) = '0'
    AND PL.DEL_FLG (+)     = #delFlgN#

    </statement>
    <statement id="checkExistPrcCatgNm" parameterClass="Map" resultClass="Map">
    SELECT
        PC.PRC_CATG_NM
    FROM
        PRC_CATG PC
    WHERE
        PC.GLBL_CMPY_CD = #glblCmpyCd#
    AND PC.EZCANCELFLAG = '0'
    AND PC.PRC_CATG_NM = #prcCatgNm#
    AND PC.DEL_FLG  = #delFlgN#
    </statement>
    <statement id="getPrcCatgMaxSortNum" parameterClass="Map" resultClass="Map">
    SELECT
         MAX(PC.PRC_CATG_SORT_NUM) MAX_SORT_NUM
    FROM
         PRC_CATG PC
    WHERE
         PC.GLBL_CMPY_CD = #glblCmpyCd#
     AND PC.EZCANCELFLAG = '0'
    </statement>
    <statement id="getPrcCustAudcPk" parameterClass="Map" resultClass="Map">
    SELECT
        PCA.PRC_CUST_AUDC_PK
    FROM
        PRC_CUST_AUDC PCA
    WHERE
        PCA.GLBL_CMPY_CD = #glblCmpyCd#
    AND PCA.EZCANCELFLAG = '0'
    AND PCA.PRC_CATG_CD  = #prcCatgCd#
    <!-- QC#27264 -->
    <isNotNull property="effFromDt">
    AND PCA.EFF_FROM_DT &lt;= #effFromDt#
    AND ( 
        PCA.EFF_THRU_DT &gt;= #effThruDt#
        OR PCA.EFF_THRU_DT IS NULL
    )
    </isNotNull>
    </statement>

    <statement id="getPrcTrxAudcPk" parameterClass="Map" resultClass="Map">
    SELECT
        PTA.PRC_TRX_AUDC_PK
    FROM
        PRC_TRX_AUDC PTA
    WHERE
        PTA.GLBL_CMPY_CD = #glblCmpyCd#
    AND PTA.EZCANCELFLAG = '0'
    AND PTA.PRC_CATG_CD  = #prcCatgCd#
    <!-- QC#27264 -->
    <isNotNull property="effFromDt">
    AND PTA.EFF_FROM_DT &lt;= #effFromDt#
    AND ( 
        PTA.EFF_THRU_DT &gt;= #effThruDt#
        OR PTA.EFF_THRU_DT IS NULL
    )
    </isNotNull>
    </statement>

    <statement id="getPrcLstEquipPk" parameterClass="Map" resultClass="Map">
    SELECT
        PLE.PRC_LIST_EQUIP_PK
    FROM
        PRC_LIST_EQUIP PLE
    WHERE
        PLE.GLBL_CMPY_CD = #glblCmpyCd#
    AND PLE.EZCANCELFLAG = '0'
    AND PLE.PRC_CATG_CD  = #prcCatgCd#
    AND PLE.DEL_FLG      = #delFlgN#
    <!-- QC#27264 -->
    <isNotNull property="effFromDt">
    AND PLE.EFF_FROM_DT &lt;= #effFromDt#
    AND ( 
        PLE.EFF_THRU_DT &gt;= #effThruDt#
        OR PLE.EFF_THRU_DT IS NULL
    )
    </isNotNull>
    </statement>

    <statement id="getPrcLstEquipDtl" parameterClass="Map" resultClass="Map">
    SELECT
        PLE.PRC_LIST_EQUIP_DTL_PK
    FROM
        PRC_LIST_EQUIP_DTL PLE
    WHERE
        PLE.GLBL_CMPY_CD      = #glblCmpyCd#
    AND PLE.EZCANCELFLAG      = '0'
    AND PLE.PRC_LIST_EQUIP_PK = #prcListEquipPk#
    AND PLE.DEL_FLG           = #delFlgN#
    </statement>

    <statement id="getPrcLstSvc" parameterClass="Map" resultClass="Map">
    SELECT
        PLS.PRC_LIST_SVC_PK
    FROM
        PRC_LIST_SVC PLS
    WHERE
        PLS.GLBL_CMPY_CD = #glblCmpyCd#
    AND PLS.EZCANCELFLAG = '0'
    AND PLS.PRC_CATG_CD  = #prcCatgCd#
    AND PLS.DEL_FLG      = #delFlgN#
    <!-- QC#27264 -->
    <isNotNull property="effFromDt">
    AND PLS.EFF_FROM_DT &lt;= #effFromDt#
    AND ( 
        PLS.EFF_THRU_DT &gt;= #effThruDt#
        OR PLS.EFF_THRU_DT IS NULL
    )
    </isNotNull>
    </statement>

    <statement id="getPrcLstSvcTier" parameterClass="Map" resultClass="Map">
    SELECT
        PLS.PRC_LIST_SVC_TIER_PK
    FROM
        PRC_LIST_SVC_TIER PLS
    WHERE
        PLS.GLBL_CMPY_CD = #glblCmpyCd#
    AND PLS.EZCANCELFLAG = '0'
    AND PLS.PRC_CATG_CD  = #prcCatgCd#
    AND PLS.DEL_FLG      = #delFlgN#
    <!-- QC#27264 -->
    <isNotNull property="effFromDt">
    AND PLS.EFF_FROM_DT &lt;= #effFromDt#
    AND ( 
        PLS.EFF_THRU_DT &gt;= #effThruDt#
        OR PLS.EFF_THRU_DT IS NULL
    )
    </isNotNull>
    </statement>

    <statement id="getPrcLstAddlChrg" parameterClass="Map" resultClass="Map">
    SELECT
        PLA.PRC_LIST_ADDL_CHRG_PK
    FROM
        PRC_LIST_ADDL_CHRG PLA
    WHERE
        PLA.GLBL_CMPY_CD = #glblCmpyCd#
    AND PLA.EZCANCELFLAG = '0'
    AND PLA.PRC_CATG_CD  = #prcCatgCd#
    AND PLA.DEL_FLG      = #delFlgN#
    <!-- QC#27264 -->
    <isNotNull property="effFromDt">
    AND PLA.EFF_FROM_DT &lt;= #effFromDt#
    AND ( 
        PLA.EFF_THRU_DT &gt;= #effThruDt#
        OR PLA.EFF_THRU_DT IS NULL
    )
    </isNotNull>
    </statement>

    <statement id="getPrcListSplyPgmPk" parameterClass="Map" resultClass="Map">
    SELECT
        PLS.PRC_LIST_SPLY_PGM_PK
    FROM
        PRC_LIST_SPLY_PGM PLS
    WHERE
        PLS.GLBL_CMPY_CD = #glblCmpyCd#
    AND PLS.EZCANCELFLAG = '0'
    AND PLS.PRC_CATG_CD  = #prcCatgCd#
    AND PLS.DEL_FLG      = #delFlgN#
    <!-- QC#27264 -->
    <isNotNull property="effFromDt">
    AND PLS.EFF_FROM_DT &lt;= #effFromDt#
    AND ( 
        PLS.EFF_THRU_DT &gt;= #effThruDt#
        OR PLS.EFF_THRU_DT IS NULL
    )
    </isNotNull>
    </statement>

    <statement id="getPrcListLeaseRatePk" parameterClass="Map" resultClass="Map">
    SELECT
        PLL.PRC_LIST_LEASE_RATE_PK
    FROM
        PRC_LIST_LEASE_RATE PLL
    WHERE
        PLL.GLBL_CMPY_CD = #glblCmpyCd#
    AND PLL.EZCANCELFLAG = '0'
    AND PLL.PRC_CATG_CD  = #prcCatgCd#
    AND PLL.DEL_FLG      = #delFlgN#
    <!-- QC#27264 -->
    <isNotNull property="effFromDt">
    AND PLL.EFF_FROM_DT &lt;= #effFromDt#
    AND ( 
        PLL.EFF_THRU_DT &gt;= #effThruDt#
        OR PLL.EFF_THRU_DT IS NULL
    )
    </isNotNull>
    </statement>

    <statement id="getPrcListLeaseRtrnPk" parameterClass="Map" resultClass="Map">
    SELECT
        PLL.PRC_LIST_LEASE_RTRN_PK
    FROM
        PRC_LIST_LEASE_RTRN PLL
    WHERE
        PLL.GLBL_CMPY_CD = #glblCmpyCd#
    AND PLL.EZCANCELFLAG = '0'
    AND PLL.PRC_CATG_CD  = #prcCatgCd#
    AND PLL.DEL_FLG      = #delFlgN#
    <!-- QC#27264 -->
    <isNotNull property="effFromDt">
    AND PLL.EFF_FROM_DT &lt;= #effFromDt#
    AND ( 
        PLL.EFF_THRU_DT &gt;= #effThruDt#
        OR PLL.EFF_THRU_DT IS NULL
    )
    </isNotNull>
    </statement>
    <statement id="getPrcListTiValPk" parameterClass="Map" resultClass="Map">
    SELECT
        PLT.PRC_LIST_TI_VAL_PK
    FROM
        PRC_LIST_TI_VAL PLT
    WHERE
        PLT.GLBL_CMPY_CD = #glblCmpyCd#
    AND PLT.EZCANCELFLAG = '0'
    AND PLT.PRC_CATG_CD  = #prcCatgCd#
    AND PLT.DEL_FLG      = #delFlgN#
    <!-- QC#27264 -->
    <isNotNull property="effFromDt">
    AND PLT.EFF_FROM_DT &lt;= #effFromDt#
    AND ( 
        PLT.EFF_THRU_DT &gt;= #effThruDt#
        OR PLT.EFF_THRU_DT IS NULL
    )
    </isNotNull>
    </statement>

    <statement id="checkEquipDuplicate" parameterClass="Map" resultClass="Map">
    SELECT
        EQ.DETAILCOUNT
    FROM
    (
    SELECT 
         PRE.PRC_LIST_EQUIP_CONFIG_NUM
        ,PRE.PRC_LIST_EQUIP_CONFIG_NM
        ,PRE.PRC_QLFY_TP_CD
        ,PRE.PRC_QLFY_VAL_TXT
        ,PRE.PKG_UOM_CD
        ,PRE.PRC_TERM_UOM_CD
        ,PRE.PRC_TERM_AOT
        ,COUNT(1) AS DETAILCOUNT
    FROM
        PRC_LIST_EQUIP  PRE
    WHERE
            PRE.GLBL_CMPY_CD = #glblCmpyCd#
        AND PRE.EZCANCELFLAG = '0'
        AND PRE.PRC_CATG_CD  = #prcCatgCd#
        <!-- QC#27264 -->
<!--        AND NVL(PRE.EFF_THRU_DT, #compDtMax#) &gt;= #effFromDt#-->
        AND PRE.EFF_FROM_DT &lt;= #effFromDt#
        AND ( 
            PRE.EFF_THRU_DT &gt;= #effThruDt#
            OR PRE.EFF_THRU_DT IS NULL
        )
        AND PRE.DEL_FLG      = #delFlgN#
    HAVING
        COUNT(1) &gt; #exCount#
    GROUP BY
        PRE.PRC_LIST_EQUIP_CONFIG_NUM
       ,PRE.PRC_LIST_EQUIP_CONFIG_NM
       ,PRE.PRC_QLFY_TP_CD
       ,PRE.PRC_QLFY_VAL_TXT
       ,PRE.PKG_UOM_CD
       ,PRE.PRC_TERM_UOM_CD
       ,PRE.PRC_TERM_AOT)EQ
    WHERE
        ROWNUM &lt;= #rowNum#
    </statement>

    <statement id="checkSvcDuplicate" parameterClass="Map" resultClass="Map">
    SELECT
        EQ.DETAILCOUNT
    FROM
    (
    SELECT 
         PLS.MDL_ID
        ,PLS.PRC_MTR_PKG_PK
        ,PLS.PRC_LIST_MDSE_CD
        ,PLS.PRC_SVC_PLN_TP_CD
        ,PLS.PRC_SVC_CONTR_TP_CD
        ,PLS.BLLG_MTR_LB_CD
        ,PLS.PRC_LIST_BAND_CD
        ,PLS.TERM_FROM_MTH_AOT
        ,PLS.TERM_THRU_MTH_AOT
        ,COUNT(1) AS DETAILCOUNT
    FROM
        PRC_LIST_SVC  PLS
    WHERE
            PLS.GLBL_CMPY_CD = #glblCmpyCd#
        AND PLS.EZCANCELFLAG = '0'
        AND PLS.PRC_CATG_CD = #prcCatgCd#
        <!-- QC#27264 -->
<!--        AND NVL(PLS.EFF_THRU_DT, #compDtMax#) &gt;= #effFromDt#-->
        AND PLS.EFF_FROM_DT &lt;= #effFromDt#
        AND (
            PLS.EFF_THRU_DT &gt;= #effThruDt#
            OR PLS.EFF_THRU_DT IS NULL
        )
        AND PLS.DEL_FLG = #delFlgN#
    HAVING
        COUNT(1) &gt; #exCount#
    GROUP BY
         PLS.MDL_ID
        ,PLS.PRC_MTR_PKG_PK
        ,PLS.PRC_LIST_MDSE_CD
        ,PLS.PRC_SVC_PLN_TP_CD
        ,PLS.PRC_SVC_CONTR_TP_CD
        ,PLS.BLLG_MTR_LB_CD
        ,PLS.PRC_LIST_BAND_CD
        ,PLS.TERM_FROM_MTH_AOT
        ,PLS.TERM_THRU_MTH_AOT
    )EQ
    WHERE
        ROWNUM &lt;= #rowNum#
    </statement>

    <statement id="checkSvcTierDuplicate" parameterClass="Map" resultClass="Map">
    SELECT
        SVCT.DETAILCOUNT
    FROM
    (
    SELECT
          PLS.MDL_ID
         ,PLS.PRC_SVC_TIER_TP_CD
         ,PLS.PRC_MTR_PKG_PK
         ,PLS.PRC_SVC_PLN_TP_CD
         ,PLS.PRC_SVC_CONTR_TP_CD
         ,PLS.BLLG_MTR_LB_CD
         ,PLS.PRC_LIST_BAND_CD
         ,PLS.TERM_FROM_MTH_AOT
         ,PLS.TERM_THRU_MTH_AOT
         ,COUNT(1) AS DETAILCOUNT
    FROM
        PRC_LIST_SVC_TIER  PLS
    WHERE
            PLS.GLBL_CMPY_CD = #glblCmpyCd#
        AND PLS.EZCANCELFLAG = '0'
        AND PLS.PRC_CATG_CD  = #prcCatgCd#
        <!-- QC#27264 -->
<!--        AND NVL(PLS.EFF_THRU_DT, #compDtMax#) &gt;= #effFromDt#-->
        AND PLS.EFF_FROM_DT &lt;= #effFromDt#
        AND (
            PLS.EFF_THRU_DT &gt;= #effThruDt#
            OR PLS.EFF_THRU_DT IS NULL
        )
        AND PLS.DEL_FLG = #delFlgN#
    HAVING
        COUNT(1) &gt; #exCount#
    GROUP BY
          PLS.MDL_ID
         ,PLS.PRC_SVC_TIER_TP_CD
         ,PLS.PRC_MTR_PKG_PK
         ,PLS.PRC_SVC_PLN_TP_CD
         ,PLS.PRC_SVC_CONTR_TP_CD
         ,PLS.BLLG_MTR_LB_CD
         ,PLS.PRC_LIST_BAND_CD
         ,PLS.TERM_FROM_MTH_AOT
         ,PLS.TERM_THRU_MTH_AOT
    )SVCT
    WHERE
        ROWNUM &lt;= #rowNum#
    </statement>

    <statement id="checkAddlChrgDuplicate" parameterClass="Map" resultClass="Map">
    SELECT
        ADL.DETAILCOUNT
    FROM
    (
    SELECT
         PLA.MDSE_CD
        ,PLA.MKT_MDL_SEG_CD
        ,PLA.MDL_ID
        ,PLA.MDL_NM
        ,COUNT(1) AS DETAILCOUNT
    FROM
        PRC_LIST_ADDL_CHRG  PLA
    WHERE
            PLA.GLBL_CMPY_CD = #glblCmpyCd#
        AND PLA.EZCANCELFLAG = '0'
        AND PLA.PRC_CATG_CD = #prcCatgCd#
        <!-- QC#27264 -->
<!--        AND NVL(PLA.EFF_THRU_DT, #compDtMax#) &gt;= #effFromDt#-->
        AND PLA.EFF_FROM_DT &lt;= #effFromDt#
        AND (
            PLA.EFF_THRU_DT &gt;= #effThruDt#
            OR PLA.EFF_THRU_DT IS NULL
        )
        AND PLA.DEL_FLG = #delFlgN#
    HAVING
        COUNT(1) &gt; #exCount#
    GROUP BY
         PLA.MDSE_CD
        ,PLA.MKT_MDL_SEG_CD
        ,PLA.MDL_ID
        ,PLA.MDL_NM
    )ADL
   WHERE
       ROWNUM &lt;= #rowNum#
    </statement>

    <statement id="checkSplyPgmDuplicate" parameterClass="Map" resultClass="Map">
    SELECT
        SPL.DETAILCOUNT
    FROM
    (
    SELECT
          PLS.MDL_ID
         ,PLS.PRC_MTR_PKG_PK
         ,PLS.PRC_SVC_PLN_TP_CD
         ,PLS.PRC_SVC_CONTR_TP_CD
         ,PLS.BLLG_MTR_LB_CD
         ,PLS.PRC_LIST_BAND_CD
         ,PLS.TERM_FROM_MTH_AOT
         ,PLS.TERM_THRU_MTH_AOT
         ,COUNT(1) AS DETAILCOUNT
    FROM
        PRC_LIST_SPLY_PGM  PLS
    WHERE
            PLS.GLBL_CMPY_CD = #glblCmpyCd#
        AND PLS.EZCANCELFLAG = '0'
        AND PLS.PRC_CATG_CD = #prcCatgCd#
        <!-- QC#27264 -->
<!--        AND NVL(PLS.EFF_THRU_DT, #compDtMax#) &gt;= #effFromDt#-->
        AND PLS.EFF_FROM_DT &lt;= #effFromDt#
        AND (
            PLS.EFF_THRU_DT &gt;= #effThruDt#
            OR PLS.EFF_THRU_DT IS NULL
        )
        AND PLS.DEL_FLG = #delFlgN#
    HAVING
        COUNT(1) &gt; #exCount#
    GROUP BY 
          PLS.MDL_ID
         ,PLS.PRC_MTR_PKG_PK
         ,PLS.PRC_SVC_PLN_TP_CD
         ,PLS.PRC_SVC_CONTR_TP_CD
         ,PLS.BLLG_MTR_LB_CD
         ,PLS.PRC_LIST_BAND_CD
         ,PLS.TERM_FROM_MTH_AOT
         ,PLS.TERM_THRU_MTH_AOT
    )SPL
    WHERE
        ROWNUM &lt;= #rowNum#
    </statement>

    <statement id="checkLeaseRateDuplicate" parameterClass="Map" resultClass="Map">
    SELECT
        LEA.DETAILCOUNT
    FROM
    (
    SELECT
         PLL.PRC_LEASE_CMPY_ABBR_NM
        ,PLL.DS_ACCT_NM
        ,PLL.PRC_PGM_TP_CD
        ,PLL.PRC_EQUIP_TP_CD
        ,PLL.MDL_ID
        ,PLL.TERM_FROM_MTH_AOT
        ,PLL.TERM_THRU_MTH_AOT
        ,COUNT(1) AS DETAILCOUNT
    FROM
        PRC_LIST_LEASE_RATE  PLL
    WHERE
            PLL.GLBL_CMPY_CD = #glblCmpyCd#
        AND PLL.EZCANCELFLAG = '0'
        AND PLL.PRC_CATG_CD = #prcCatgCd#
        <!-- QC#27264 -->
<!--        AND NVL(PLL.EFF_THRU_DT, #compDtMax#) &gt;= #effFromDt#-->
        AND PLL.EFF_FROM_DT &lt;= #effFromDt#
        AND (
            PLL.EFF_THRU_DT &gt;= #effThruDt#
            OR PLL.EFF_THRU_DT IS NULL
        )
        AND PLL.DEL_FLG = #delFlgN#
    HAVING
        COUNT(1) &gt; #exCount#
    GROUP BY
         PLL.PRC_LEASE_CMPY_ABBR_NM
        ,PLL.DS_ACCT_NM
        ,PLL.PRC_PGM_TP_CD
        ,PLL.PRC_EQUIP_TP_CD
        ,PLL.MDL_ID
        ,PLL.TERM_FROM_MTH_AOT
        ,PLL.TERM_THRU_MTH_AOT
    )LEA
   WHERE
       ROWNUM &lt;= #rowNum#
    </statement>

    <statement id="checkLeaseRtrnDuplicate" parameterClass="Map" resultClass="Map">
    SELECT
        LEA.DETAILCOUNT
    FROM
    (
    SELECT
         PLR.PRC_LEASE_CMPY_ABBR_NM
        ,PLR.SVC_SEG_CD
        ,PLR.PRC_IN_OUT_RG_CD
        ,PLR.DST_MILE_AMT
        ,COUNT(1) AS DETAILCOUNT
    FROM
        PRC_LIST_LEASE_RTRN  PLR
    WHERE 
            PLR.GLBL_CMPY_CD = #glblCmpyCd#
        AND PLR.EZCANCELFLAG = '0'
        AND PLR.PRC_CATG_CD = #prcCatgCd#
        <!-- QC#27264 -->
<!--        AND NVL(PLR.EFF_THRU_DT, #compDtMax#) &gt;= #effFromDt#-->
        AND PLR.EFF_FROM_DT &lt;= #effFromDt#
        AND (
            PLR.EFF_THRU_DT &gt;= #effThruDt#
            OR PLR.EFF_THRU_DT IS NULL
        )
        AND PLR.DEL_FLG = #delFlgN#
    HAVING
        COUNT(1) &gt; #exCount#	
    GROUP BY 
         PLR.PRC_LEASE_CMPY_ABBR_NM
        ,PLR.SVC_SEG_CD
        ,PLR.PRC_IN_OUT_RG_CD
        ,PLR.DST_MILE_AMT
    )LEA
   WHERE
       ROWNUM &lt;= #rowNum#
    </statement>

    <statement id="checkTiValDuplicate" parameterClass="Map" resultClass="Map">
    SELECT
        TIV.DETAILCOUNT
    FROM
    (
    SELECT
          PLT.MDL_ID
         ,PLT.FROM_MTR_COPY_VOL_CNT
         ,PLT.THRU_MTR_COPY_VOL_CNT
         ,COUNT(1) AS DETAILCOUNT
    FROM
        PRC_LIST_TI_VAL  PLT
    WHERE 
            PLT.GLBL_CMPY_CD = #glblCmpyCd#
        AND PLT.EZCANCELFLAG = '0'
        AND PLT.PRC_CATG_CD = #prcCatgCd#
        <!-- QC#27264 -->
<!--        AND NVL(PLT.EFF_THRU_DT, #compDtMax#) &gt;= #effFromDt#-->
        AND PLT.EFF_FROM_DT &lt;= #effFromDt#
        AND (
            PLT.EFF_THRU_DT &gt;= #effThruDt#
            OR PLT.EFF_THRU_DT IS NULL
        )
        AND PLT.DEL_FLG = #delFlgN#
    HAVING
        COUNT(1) &gt; #exCount#		
    GROUP BY 
          PLT.MDL_ID
         ,PLT.FROM_MTR_COPY_VOL_CNT
         ,PLT.THRU_MTR_COPY_VOL_CNT
    )TIV
    WHERE
        ROWNUM &lt;= #rowNum#
    </statement>

</sqlMap>
