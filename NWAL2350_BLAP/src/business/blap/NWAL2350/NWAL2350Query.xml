<?xml version="1.0" encoding="UTF-8"?>
<sqlMap namespace="NWAL2350Query">
    <typeAlias alias="NWAL2350SMsg" type="business.blap.NWAL2350.NWAL2350SMsg" />
    <statement id="search" parameterClass="Map" resultMap="result.NWAL2350SMsg">
        SELECT
             DIO.DS_IMPT_ORD_PK
            ,NVL(DIO.NEGO_DEAL_AMT, 0 )              AS NEGO_DEAL_AMT
            ,NVL(DSP.TOT_REP_REV_AMT , 0 )           AS TOT_REP_REV_AMT
            ,NVL(DSP.SOM_FINAL_FL_AMT , 0 )          AS SOM_FINAL_FL_AMT
            ,NVL(DSP.SOM_MKUP_AMT , 0 )              AS SOM_MKUP_AMT
<!-- QC#17120 mod Start
            ,NVL(DSP.GP_WOT_COST_TRNSF_AMT , 0 )     AS GP_WOT_COST_TRNSF_AMT
            ,NVL(DSP.SOM_PCT_MKUP_RATE, 0)           AS SOM_PCT_MKUP_RATE-->
            ,NVL(DSP.GP_WOT_COST_TRNSF_RATE , 0 ) * 100 AS GP_WOT_COST_TRNSF_RATE
            ,NVL(DSP.GP_COST_PCT_TRNSF_RATE, 0) * 100   AS GP_COST_PCT_TRNSF_RATE
<!-- QC#17120 mod End -->
            ,DSP.LEASE_CMPY_NM                       AS LEASE_CMPY_NM
            ,NVL(DSP.LEASE_PMT_AMT , 0 )             AS LEASE_PMT_AMT
            ,NVL(DIO.LEASE_TERM_MTH_AOT , 0 )        AS LEASE_TERM_MTH_AOT
            ,NVL(DSP.SOM_TOT_FIN_AMT , 0 )           AS SOM_TOT_FIN_AMT
            ,DSP.LEASE_TP_TXT                        AS LEASE_TP_TXT

            ,NVL(DSP.MSRP_LIST_PRC_AMT , 0 )         AS MSRP_LIST_PRC_AMT
            ,NVL(DSP.EXT_FL_PRC_AMT , 0 )            AS EXT_FL_PRC_AMT
            ,NVL(DSP.FL_ADJ_AMT , 0 )                AS FL_ADJ_AMT
            ,DSP.CSMP_IND_SOM_TXT                    AS CSMP_IND_SOM_TXT
            ,NVL(DSP.CSMP_CR_AMT , 0 )               AS CSMP_CR_AMT
            ,DIO.CSMP_CONTR_NUM                      AS CSMP_CONTR_NUM
            ,CC.PRC_CATG_CD                          AS PRC_CATG_CD
            ,NVL(DSP.SOM_BYOT_FIN_AMT , 0 )          AS SOM_BYOT_FIN_AMT
            ,NVL(DSP.SOM_SVC_REV_TRNSF_AMT , 0 )     AS SOM_SVC_REV_TRNSF_AMT
            ,NVL(DSP.SVC_COST_TRNSF_AMT , 0 )        AS SVC_COST_TRNSF_AMT
            ,NVL(DSP.SBSCR_SVC_AMT , 0 )             AS SBSCR_SVC_AMT
            ,NVL(DSP.SOM_SVC_FIN_AMT , 0 )           AS SOM_SVC_FIN_AMT
            ,NVL(DSP.SOM_SPLY_FIN_AMT , 0 )          AS SOM_SPLY_FIN_AMT
            ,NVL(DSP.SOM_PRMO_AMT , 0 )              AS SOM_PRMO_AMT
            ,NVL(DSP.SOM_TOT_COST_TRNSF_AMT , 0 )    AS SOM_TOT_COST_TRNSF_AMT
            ,NVL(DSP.PRO_SVC_AMT , 0 )               AS PRO_SVC_AMT

            ,NVL(DSP.SOM_CBS_INV_AMT , 0 )           AS SOM_CBS_INV_AMT
            ,NVL(DSP.SOM_TAX_ABLE_AMT , 0 )          AS SOM_TAX_ABLE_AMT
            ,NVL(DSP.SOM_TAX_AMT , 0 )               AS SOM_TAX_AMT
            ,NVL(DSP.NON_TAX_ABLE_AMT , 0 )          AS NON_TAX_ABLE_AMT

            ,NVL(DSP.GP_EQUIP_REV_AMT , 0 )          AS GP_EQUIP_REV_AMT
            ,NVL(DSP.INTER_RG_REV_AMT , 0 )          AS INTER_RG_REV_AMT
            ,NVL(DSP.SPIFF_REV_AMT , 0 )             AS SPIFF_REV_AMT
            ,NVL(DSP.INTER_TRTY_REV_AMT , 0 )        AS INTER_TRTY_REV_AMT
            ,NVL(DSP.UNIT_SLD_REV_AMT , 0 )          AS UNIT_SLD_REV_AMT

            ,NVL(DSP.GP_EQUIP_EARN_AMT , 0 )         AS GP_EQUIP_EARN_AMT
            ,NVL(DSP.INTER_RG_EARN_AMT , 0 )         AS INTER_RG_EARN_AMT
            ,NVL(DSP.SPIFF_EARN_AMT , 0 )            AS SPIFF_EARN_AMT
            ,NVL(DSP.INTER_TRTY_EARN_AMT , 0 )       AS INTER_TRTY_EARN_AMT
            ,NVL(DSP.UNIT_SLD_EARN_AMT , 0 )         AS UNIT_SLD_EARN_AMT
            ,NVL(DSP.SOM_TOT_EARN_AMT , 0 )          AS SOM_TOT_EARN_AMT
        FROM
             DS_IMPT_ORD          DIO
            ,DS_IMPT_ORD_SOM_PRFT DSP
            ,CSMP_CONTR CC
        WHERE
                DIO.GLBL_CMPY_CD      = #glblCmpyCd#
            AND DIO.DS_IMPT_ORD_PK    = #dsImptOrdPk#
            AND DIO.EZCANCELFLAG      = '0'
            AND DIO.GLBL_CMPY_CD      = DSP.GLBL_CMPY_CD (+)
            AND DIO.DS_IMPT_ORD_PK    = DSP.DS_IMPT_ORD_PK (+)
            AND DSP.EZCANCELFLAG (+)  = '0'
            AND DIO.GLBL_CMPY_CD      = CC.GLBL_CMPY_CD (+)
            AND DIO.CSMP_CONTR_NUM    = CC.CSMP_NUM (+)
            AND DIO.SELL_TO_CUST_CD   = CC.DS_ACCT_NUM (+)
            AND CC.EFF_FROM_DT (+) &lt;= SUBSTR(DIO.ORD_SRC_IMPT_TS, 0, 8)
            AND NVL(CC.EFF_THRU_DT (+), '99999999')   &gt;= SUBSTR(DIO.ORD_SRC_IMPT_TS, 0, 8)
            AND CC.EZCANCELFLAG (+)   = '0'
    </statement>
    <resultMap id="result.NWAL2350SMsg" class="NWAL2350SMsg">
        <result property="dsImptOrdPk" column="DS_IMPT_ORD_PK" javaType="EZDSBigDecimalItem"/>
        <result property="negoDealAmt" column="NEGO_DEAL_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="totRepRevAmt" column="TOT_REP_REV_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="somFinalFlAmt" column="SOM_FINAL_FL_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="somMkupAmt" column="SOM_MKUP_AMT" javaType="EZDSBigDecimalItem"/>
<!-- QC#17120 mod Start
        <result property="gpWotCostTrnsfAmt" column="GP_WOT_COST_TRNSF_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="somPctMkupRate" column="SOM_PCT_MKUP_RATE" javaType="EZDSBigDecimalItem"/> -->
        <result property="gpWotCostTrnsfRate" column="GP_WOT_COST_TRNSF_RATE" javaType="EZDSBigDecimalItem"/>
        <result property="gpCostPctTrnsfRate" column="GP_COST_PCT_TRNSF_RATE" javaType="EZDSBigDecimalItem"/>
<!-- QC#17120 mod End -->
        <result property="leaseCmpyNm" column="LEASE_CMPY_NM" javaType="EZDSStringItem"/>
        <result property="leasePmtAmt" column="LEASE_PMT_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="leaseTermMthAot" column="LEASE_TERM_MTH_AOT" javaType="EZDSBigDecimalItem"/>
        <result property="somTotFinAmt" column="SOM_TOT_FIN_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="leaseTpTxt" column="LEASE_TP_TXT" javaType="EZDSStringItem"/>
        <result property="msrpListPrcAmt" column="MSRP_LIST_PRC_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="extFlPrcAmt" column="EXT_FL_PRC_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="flAdjAmt" column="FL_ADJ_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="csmpIndSomTxt" column="CSMP_IND_SOM_TXT" javaType="EZDSStringItem"/>
        <result property="csmpCrAmt" column="CSMP_CR_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="csmpContrNum" column="CSMP_CONTR_NUM" javaType="EZDSStringItem"/>
        <result property="prcCatgCd" column="PRC_CATG_CD" javaType="EZDSStringItem"/>
        <result property="somByotFinAmt" column="SOM_BYOT_FIN_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="somSvcRevTrnsfAmt" column="SOM_SVC_REV_TRNSF_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="svcCostTrnsfAmt" column="SVC_COST_TRNSF_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="sbscrSvcAmt" column="SBSCR_SVC_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="somSvcFinAmt" column="SOM_SVC_FIN_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="somSplyFinAmt" column="SOM_SPLY_FIN_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="somPrmoAmt" column="SOM_PRMO_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="somTotCostTrnsfAmt" column="SOM_TOT_COST_TRNSF_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="proSvcAmt" column="PRO_SVC_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="somCbsInvAmt" column="SOM_CBS_INV_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="somTaxAbleAmt" column="SOM_TAX_ABLE_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="somTaxAmt" column="SOM_TAX_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="nonTaxAbleAmt" column="NON_TAX_ABLE_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="gpEquipRevAmt" column="GP_EQUIP_REV_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="interRgRevAmt" column="INTER_RG_REV_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="spiffRevAmt" column="SPIFF_REV_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="interTrtyRevAmt" column="INTER_TRTY_REV_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="unitSldRevAmt" column="UNIT_SLD_REV_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="gpEquipEarnAmt" column="GP_EQUIP_EARN_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="interRgEarnAmt" column="INTER_RG_EARN_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="spiffEarnAmt" column="SPIFF_EARN_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="interTrtyEarnAmt" column="INTER_TRTY_EARN_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="unitSldEarnAmt" column="UNIT_SLD_EARN_AMT" javaType="EZDSBigDecimalItem"/>
        <result property="somTotEarnAmt" column="SOM_TOT_EARN_AMT" javaType="EZDSBigDecimalItem"/>
    </resultMap>
</sqlMap>
                