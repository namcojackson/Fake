<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="ZZML0040Query">

	<typeAlias alias="ZZML0040CMsg"		type="business.blap.ZZML0040.ZZML0040CMsg"/>
	<typeAlias alias="ZZML0040_ASMsg"	type="business.blap.ZZML0040.ZZML0040_ASMsg"/>

	<!-- Mail Template Configuration -->
	<statement id="getList" parameterClass="Map" resultMap="result.ZZML0040_ASMsg">
		SELECT
				rownum					AS	ML_NUM
			,	T.ML_TMPL_ID			AS	ML_TMPL_ID
			,	T.ML_LOC_ID				AS	ML_LOC_ID
			,	T.ML_SUBJ_TMPL_TXT		AS	ML_SUBJ_TMPL_TXT
			,	T.EZUPTIME				AS	EZUPTIME
			,	T.EZUPTIMEZONE			AS	EZUPTIMEZONE
		FROM
		        ML_TMPL T
		WHERE	
			T.EZCANCELFLAG  = '0'
			AND T.GLBL_CMPY_CD  = #glblCmpyCd#

		<!-- Mail Template ID -->
		<isNotNull property="mlTmplId">
			AND T.ML_TMPL_ID LIKE #mlTmplId#
		</isNotNull>

		<!-- Subject -->
		<isNotNull property="mlSubjTxt">
			AND T.ML_SUBJ_TMPL_TXT LIKE #mlSubjTxt#
		</isNotNull>
	
	</statement>
	
	<!-- Mail Template Configuration Console -->
	<statement id="getDetail" parameterClass="Map" resultMap="result">
		SELECT
				T.GLBL_CMPY_CD			AS	GLBL_CMPY_CD
			,	T.ML_TMPL_ID			AS	ML_TMPL_ID
			,	T.ML_LOC_ID				AS	ML_LOC_ID
			,	T.ML_SUBJ_TMPL_TXT		AS	ML_SUBJ_TMPL_TXT
			,	T.ML_BODY_TMPL_TXT		AS	ML_BODY_TMPL_TXT
			,	T.EZUPTIME				AS	EZUPTIME
			,	T.EZUPTIMEZONE			AS	EZUPTIMEZONE
		FROM
		        ML_TMPL T
		WHERE
				T.EZCANCELFLAG  = '0'
			AND T.GLBL_CMPY_CD  = #glblCmpyCd#
			AND T.ML_TMPL_ID    = #mlTmplId#
			AND T.ML_LOC_ID     = #mlLocId#
	
	</statement>

	<!-- select ML_BODY_TMPL_TXT -->
	<statement id="selMlBody" parameterClass="Map" resultClass="Map">
		SELECT
				DBMS_LOB.GETCHUNKSIZE(ML_SUBJ_TMPL_TXT) AS CHUNK_SIZE
		    ,   ML_BODY_TMPL_TXT
		FROM
				ML_TMPL
		WHERE
				EZCANCELFLAG  = '0'
			AND GLBL_CMPY_CD  = #glblCmpyCd#
			AND ML_TMPL_ID    = #mlTmplId#
			AND ML_LOC_ID     = #mlLocId#
    </statement>

	<!-- update ML_BODY_TMPL_TXT -->
	<statement id="updMlBody" parameterClass="Map">
		UPDATE
				ML_TMPL
		SET
		        ML_BODY_TMPL_TXT = #mlBodyTmplTxt#
		WHERE
				EZCANCELFLAG  = '0'
			AND GLBL_CMPY_CD  = #glblCmpyCd#
			AND ML_TMPL_ID    = #mlTmplId#
			AND ML_LOC_ID     = #mlLocId#
    </statement>
    
	<resultMap id="result" 						class="ZZML0040CMsg">
		<result property="glblCmpyCd_01"		column="GLBL_CMPY_CD"		javaType="EZDCStringItem"/>
		<result property="mlTmplId_01"			column="ML_TMPL_ID"			javaType="EZDCStringItem"/>
		<result property="mlLocId_01"			column="ML_LOC_ID"			javaType="EZDCStringItem"/>
		<result property="mlSubjTmplTxt_01"		column="ML_SUBJ_TMPL_TXT"	javaType="EZDCStringItem"/>
		<!-- <result property="xxMlBodyTxt_01"		column="ML_BODY_TMPL_TXT"	javaType="EZDCStringItem"/> -->
		<result property="ezUpTime_01"			column="EZUPTIME"			javaType="EZDCStringItem"/>
		<result property="ezUpTimeZone_01"		column="EZUPTIMEZONE"		javaType="EZDCStringItem"/>
	</resultMap>

	<resultMap id="result.ZZML0040_ASMsg" 		class="ZZML0040_ASMsg">
		<result property="xxNum_A"				column="ML_NUM"				javaType="EZDSBigDecimalItem"/>
		<result property="mlTmplId_A"			column="ML_TMPL_ID"			javaType="EZDSStringItem"/>
		<result property="mlLocId_A"			column="ML_LOC_ID"			javaType="EZDSStringItem"/>
		<result property="langNm_A"				column="ML_LOC_ID"			javaType="EZDSStringItem"/>
		<result property="mlSubjTmplTxt_A"		column="ML_SUBJ_TMPL_TXT"	javaType="EZDSStringItem"/>
		<result property="ezUpTime_A"			column="EZUPTIME"			javaType="EZDSStringItem"/>
		<result property="ezUpTimeZone_A"		column="EZUPTIMEZONE"		javaType="EZDSStringItem"/>
	</resultMap>
	
</sqlMap>