<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NMZC601001">

    <statement id="getCmpyPk" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            PLW.CMPY_PK 
        FROM
            LOC_USG       LU
          , PTY_LOC_WRK PLW 
        WHERE
            LU.LOC_ROLE_TP_CD    = #CUSA_PRIN# 
        AND PLW.PTY_LOC_PK       = LU.PTY_LOC_PK 
        AND LU.GLBL_CMPY_CD      = #msg.glblCmpyCd# 
        AND PLW.GLBL_CMPY_CD     = #msg.glblCmpyCd# 
        AND LU.EZCANCELFLAG      = '0' 
        AND PLW.EZCANCELFLAG     = '0'
    </statement>

    <statement id="getLocGroup" parameterClass="Map" resultClass="Map">
        SELECT
            LT.LOC_TP_CD
          , LT.LOC_GRP_CD
          , LT.LOC_ROLE_TP_CD 
        FROM
            RTL_WH_CATG RWC
          , LOC_TP LT 
        WHERE
            RWC.RTL_WH_CATG_CD = #msg.rtlWhCatgCd# 
        AND LT.LOC_TP_CD       = RWC.LOC_TP_CD 
        AND RWC.GLBL_CMPY_CD   = #msg.glblCmpyCd# 
        AND LT.GLBL_CMPY_CD    = #msg.glblCmpyCd# 
        AND RWC.EZCANCELFLAG   = '0' 
        AND LT.EZCANCELFLAG    = '0'
    </statement>

    <!-- Followings will be replaced by single table access --><!--
    
    <statement id="getNonDefaultLocRoleTpCd" parameterClass="Map" resultClass="String">
		SELECT
		  X.LOC_ROLE_TP_CD 
		FROM
		  RTL_WH_CATG_LOC_USG_XREF X 
		WHERE
		  X.RTL_WH_CATG_CD = #msg.rtlWhCatgCd# 
		  AND X.GLBL_CMPY_CD = #msg.glblCmpyCd# 
		  AND X.EZCANCELFLAG = '0'
		ORDER BY
		  X.LOC_ROLE_TP_CD
    </statement>

    <typeAlias alias="WHTMsg"  type="business.db.WHTMsg"/>
    <statement id="selectWHByPtyLocPk" parameterClass="Map" resultMap="WHTMsg">
		SELECT
		  *
		FROM
		  WH
		WHERE
		  WH_CD = #whCd#
		  AND GLBL_CMPY_CD = #msg.glblCmpyCd#
		  AND EZCANCELFLAG = '0'
    </statement>
    <resultMap id="WHTMsg" class="WHTMsg">
		<result property="glblCmpyCd" column="GLBL_CMPY_CD" javaType="EZDTStringItem" />
		<result property="whPk" column="WH_PK" javaType="EZDTBigDecimalItem" />
		<result property="whCd" column="WH_CD" javaType="EZDTStringItem" />
		<result property="firstLineAddr" column="FIRST_LINE_ADDR" javaType="EZDTStringItem" />
		<result property="scdLineAddr" column="SCD_LINE_ADDR" javaType="EZDTStringItem" />
		<result property="thirdLineAddr" column="THIRD_LINE_ADDR" javaType="EZDTStringItem" />
		<result property="frthLineAddr" column="FRTH_LINE_ADDR" javaType="EZDTStringItem" />
		<result property="ctyAddr" column="CTY_ADDR" javaType="EZDTStringItem" />
		<result property="cntyPk" column="CNTY_PK" javaType="EZDTBigDecimalItem" />
		<result property="provNm" column="PROV_NM" javaType="EZDTStringItem" />
		<result property="stCd" column="ST_CD" javaType="EZDTStringItem" />
		<result property="postCd" column="POST_CD" javaType="EZDTStringItem" />
		<result property="ctryCd" column="CTRY_CD" javaType="EZDTStringItem" />
		<result property="locNum" column="LOC_NUM" javaType="EZDTStringItem" />
		<result property="locNm" column="LOC_NM" javaType="EZDTStringItem" />
		<result property="addlLocNm" column="ADDL_LOC_NM" javaType="EZDTStringItem" />
		<result property="glnNum" column="GLN_NUM" javaType="EZDTBigDecimalItem" />
		<result property="firstRefCmntTxt" column="FIRST_REF_CMNT_TXT" javaType="EZDTStringItem" />
		<result property="scdRefCmntTxt" column="SCD_REF_CMNT_TXT" javaType="EZDTStringItem" />
		<result property="dbaNm" column="DBA_NM" javaType="EZDTStringItem" />
		<result property="dunsNum" column="DUNS_NUM" javaType="EZDTStringItem" />
		<result property="rgtnStsCd" column="RGTN_STS_CD" javaType="EZDTStringItem" />
		<result property="ptyLocPk" column="PTY_LOC_PK" javaType="EZDTBigDecimalItem" />
		<result property="locRoleTpCd" column="LOC_ROLE_TP_CD" javaType="EZDTStringItem" />
		<result property="locGrpCd" column="LOC_GRP_CD" javaType="EZDTStringItem" />
		<result property="effFromDt" column="EFF_FROM_DT" javaType="EZDTDateItem" />
		<result property="effThruDt" column="EFF_THRU_DT" javaType="EZDTDateItem" />
		<result property="soPrinReqFlg" column="SO_PRIN_REQ_FLG" javaType="EZDTStringItem" />
		<result property="rwsPrinReqFlg" column="RWS_PRIN_REQ_FLG" javaType="EZDTStringItem" />
		<result property="whSysTpCd" column="WH_SYS_TP_CD" javaType="EZDTStringItem" />
		<result property="tmZoneCd" column="TM_ZONE_CD" javaType="EZDTStringItem" />
		<result property="cmpyPk" column="CMPY_PK" javaType="EZDTBigDecimalItem" />
		<result property="faxNum" column="FAX_NUM" javaType="EZDTStringItem" />
		<result property="telNum" column="TEL_NUM" javaType="EZDTStringItem" />
		<result property="attnNm" column="ATTN_NM" javaType="EZDTStringItem" />
		<result property="physWhCd" column="PHYS_WH_CD" javaType="EZDTStringItem" />
    </resultMap>

	<typeAlias alias="TECH_LOCTMsg"  type="business.db.TECH_LOCTMsg"/>
    <statement id="selectTECH_LOCByPtyLocPk" parameterClass="Map" resultMap="TECH_LOCTMsg">
		SELECT
		  * 
		FROM
		  TECH_LOC 
		WHERE
		  TECH_LOC_CD = #techLocCd# 
		  AND GLBL_CMPY_CD = #msg.glblCmpyCd# 
		  AND EZCANCELFLAG = '0'
    </statement>
   <resultMap id="TECH_LOCTMsg" class="TECH_LOCTMsg">
		<result property="glblCmpyCd" column="GLBL_CMPY_CD" javaType="EZDTStringItem" />
		<result property="techLocPk" column="TECH_LOC_PK" javaType="EZDTBigDecimalItem" />
		<result property="techLocCd" column="TECH_LOC_CD" javaType="EZDTStringItem" />
		<result property="locTpCd" column="LOC_TP_CD" javaType="EZDTStringItem" />
		<result property="locRoleTpCd" column="LOC_ROLE_TP_CD" javaType="EZDTStringItem" />
		<result property="techLocTpCd" column="TECH_LOC_TP_CD" javaType="EZDTStringItem" />
		<result property="locGrpCd" column="LOC_GRP_CD" javaType="EZDTStringItem" />
		<result property="locNm" column="LOC_NM" javaType="EZDTStringItem" />
		<result property="techTocCd" column="TECH_TOC_CD" javaType="EZDTStringItem" />
		<result property="firstLineAddr" column="FIRST_LINE_ADDR" javaType="EZDTStringItem" />
		<result property="scdLineAddr" column="SCD_LINE_ADDR" javaType="EZDTStringItem" />
		<result property="thirdLineAddr" column="THIRD_LINE_ADDR" javaType="EZDTStringItem" />
		<result property="frthLineAddr" column="FRTH_LINE_ADDR" javaType="EZDTStringItem" />
		<result property="ctyAddr" column="CTY_ADDR" javaType="EZDTStringItem" />
		<result property="cntyPk" column="CNTY_PK" javaType="EZDTBigDecimalItem" />
		<result property="provNm" column="PROV_NM" javaType="EZDTStringItem" />
		<result property="stCd" column="ST_CD" javaType="EZDTStringItem" />
		<result property="postCd" column="POST_CD" javaType="EZDTStringItem" />
		<result property="ctryCd" column="CTRY_CD" javaType="EZDTStringItem" />
		<result property="faxNum" column="FAX_NUM" javaType="EZDTStringItem" />
		<result property="telNum" column="TEL_NUM" javaType="EZDTStringItem" />
		<result property="rgtnStsCd" column="RGTN_STS_CD" javaType="EZDTStringItem" />
		<result property="firstRefCmntTxt" column="FIRST_REF_CMNT_TXT" javaType="EZDTStringItem" />
		<result property="scdRefCmntTxt" column="SCD_REF_CMNT_TXT" javaType="EZDTStringItem" />
		<result property="ptyLocPk" column="PTY_LOC_PK" javaType="EZDTBigDecimalItem" />
		<result property="effFromDt" column="EFF_FROM_DT" javaType="EZDTDateItem" />
		<result property="effThruDt" column="EFF_THRU_DT" javaType="EZDTDateItem" />
		<result property="allwAutoRcptFlg" column="ALLW_AUTO_RCPT_FLG" javaType="EZDTStringItem" />
		<result property="allwAutoExpFlg" column="ALLW_AUTO_EXP_FLG" javaType="EZDTStringItem" />
		<result property="trkEmerOrdInfoFlg" column="TRK_EMER_ORD_INFO_FLG" javaType="EZDTStringItem" />
		<result property="rplshMonFlg" column="RPLSH_MON_FLG" javaType="EZDTStringItem" />
		<result property="rplshTueFlg" column="RPLSH_TUE_FLG" javaType="EZDTStringItem" />
		<result property="rplshWedFlg" column="RPLSH_WED_FLG" javaType="EZDTStringItem" />
		<result property="rplshThuFlg" column="RPLSH_THU_FLG" javaType="EZDTStringItem" />
		<result property="rplshFriFlg" column="RPLSH_FRI_FLG" javaType="EZDTStringItem" />
		<result property="blockRplshFlg" column="BLOCK_RPLSH_FLG" javaType="EZDTStringItem" />
		<result property="blockRplshDt" column="BLOCK_RPLSH_DT" javaType="EZDTDateItem" />
		<result property="blockRplshUpdUsrId" column="BLOCK_RPLSH_UPD_USR_ID" javaType="EZDTStringItem" />
		<result property="blockRplshUpdDt" column="BLOCK_RPLSH_UPD_DT" javaType="EZDTDateItem" />
		<result property="locTrmnDt" column="LOC_TRMN_DT" javaType="EZDTDateItem" />
		<result property="trmnFlgUpdUsrId" column="TRMN_FLG_UPD_USR_ID" javaType="EZDTStringItem" />
		<result property="trmnFlgUpdUsrDt" column="TRMN_FLG_UPD_USR_DT" javaType="EZDTDateItem" />
		<result property="prtyLocFlg" column="PRTY_LOC_FLG" javaType="EZDTStringItem" />
    </resultMap>-->

    <statement id="getDsAcctNum" parameterClass="Map" resultClass="String">
        SELECT
            WDC.DS_ACCT_NUM 
        FROM
            WH_DEF_CUST WDC
        WHERE
            WDC.GLBL_CMPY_CD = #msg.glblCmpyCd#
        AND WDC.EZCANCELFLAG = '0'
    </statement>

    <statement id="getShipToCustMapList" parameterClass="Map" resultClass="Map">
        SELECT
            STC.SHIP_TO_CUST_PK      AS SHIP_TO_CUST_PK
          , STC.PTY_LOC_PK           AS PTY_LOC_PK
        FROM 
            SHIP_TO_CUST             STC
        WHERE
            STC.EZCANCELFLAG         = '0'
        AND STC.GLBL_CMPY_CD         = #glblCmpyCd#
        <iterate property="locNumList" var="elem[]" open="AND (STC.LOC_NUM =" close=")" conjunction="OR STC.LOC_NUM =">
                #elem[]#
        </iterate>
    </statement>

    <statement id="getAcctLocMapList" parameterClass="Map" resultClass="Map">
        SELECT
            AL.ACCT_LOC_PK           AS ACCT_LOC_PK
        FROM 
            ACCT_LOC                 AL
        WHERE
            AL.EZCANCELFLAG          = '0'
        AND AL.GLBL_CMPY_CD          = #glblCmpyCd#
        <iterate property="locNumList" var="elem[]" open="AND (AL.LOC_NUM =" close=")" conjunction="OR AL.LOC_NUM =">
                #elem[]#
        </iterate>
    </statement>

    <statement id="getWhMapList" parameterClass="Map" resultClass="Map">
        SELECT
            W.WH_PK                  AS WH_PK
          , W.PTY_LOC_PK             AS PTY_LOC_PK
        FROM 
            WH                       W
        WHERE
            W.EZCANCELFLAG           = '0'
        AND W.GLBL_CMPY_CD           = #glblCmpyCd#
        <iterate property="whCdList" var="elem[]" open="AND (W.WH_CD =" close=")" conjunction="OR W.WH_CD =">
                #elem[]#
        </iterate>
    </statement>

    <statement id="getTechLocMapList" parameterClass="Map" resultClass="Map">
        SELECT
            TL.TECH_LOC_PK           AS TECH_LOC_PK
          , TL.PTY_LOC_PK            AS PTY_LOC_PK
        FROM 
            TECH_LOC                 TL
        WHERE
            TL.EZCANCELFLAG          = '0'
        AND TL.GLBL_CMPY_CD          = #glblCmpyCd#
        <iterate property="techLocCdList" var="elem[]" open="AND (TL.TECH_LOC_CD =" close=")" conjunction="OR TL.TECH_LOC_CD =">
                #elem[]#
        </iterate>
    </statement>

    <statement id="getLocUsgMapList" parameterClass="Map" resultClass="Map">
        SELECT
            LU.LOC_USG_PK
        FROM 
            LOC_USG                  LU
        WHERE
            LU.EZCANCELFLAG          = '0'
        AND LU.GLBL_CMPY_CD          = #glblCmpyCd#
        <iterate property="ptyLocPkList" var="elem[]" open="AND (LU.PTY_LOC_PK =" close=")" conjunction="OR LU.PTY_LOC_PK =">
                #elem[]#
        </iterate>
    </statement>

    <statement id="getRtlSwhMapList" parameterClass="Map" resultClass="Map">
        SELECT
            RS.RTL_WH_CD                  AS RTL_WH_CD
          , RS.RTL_SWH_CD                 AS RTL_SWH_CD
          , RS.RTL_WH_CD || RS.RTL_SWH_CD AS INVTY_LOC_CD
        FROM 
            RTL_SWH                  RS
        WHERE
            RS.EZCANCELFLAG          = '0'
        AND RS.GLBL_CMPY_CD          = #glblCmpyCd#
        AND RS.RTL_WH_CD             = #rtlWhCd#
    </statement>

    <statement id="getVndShipToXrefMapList" parameterClass="Map" resultClass="Map">
        SELECT
            VSTX.VND_SHIP_TO_XREF_PK AS VND_SHIP_TO_XREF_PK
        FROM 
            VND_SHIP_TO_XREF         VSTX
        WHERE
            VSTX.GLBL_CMPY_CD        = #glblCmpyCd#
        AND VSTX.RTL_WH_CD           = #rtlWhCd#
        AND VSTX.EZCANCELFLAG        = '0'
    </statement>

    <statement id="getSuffixForRtrnTo" parameterClass="Map" resultClass="String">
        SELECT
               VCC.VAR_CHAR_CONST_VAL
          FROM 
               VAR_CHAR_CONST  VCC
         WHERE
               VCC.GLBL_CMPY_CD        = #glblCmpyCd#
           AND VCC.VAR_CHAR_CONST_NM   = #varCharConstNm#
           AND VCC.EZCANCELFLAG        = '0'
    </statement>

    <statement id="cntShipToCustForRtrnTo" parameterClass="Map" resultClass="Integer">
        SELECT
                count(*)
          FROM
               SHIP_TO_CUST      STC
         WHERE
               STC.GLBL_CMPY_CD             = #glblCmpyCd#
           AND STC.SHIP_TO_CUST_CD          = #rtrnToCustCd#
           AND STC.EZCANCELFLAG             = '0'
           AND ROWNUM                       =  1
    </statement>

</sqlMap>
