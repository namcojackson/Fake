<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NPAB100001">
    <statement id="searchPoAckHdrWrkList" parameterClass="Map" resultClass="Map">
    SELECT
         ACK_EDI_PROC_STS_CD
        ,EDI_PO_ORD_NUM
        ,EDI_RCV_DATE_TS
        ,GLBL_CMPY_CD
        ,ITRL_INTFC_ID
        ,ORD_HDR_STS_CD
        ,ORD_LAST_UPD_TS
        ,ORD_LAST_UPD_TS
        ,PO_ACK_HDR_WRK_PK
        ,PO_ORD_NUM
        ,VND_CPO_ORD_NUM
        ,PO_ACK_HDR_PK
        ,PO_ACK_NUM
        <!-- 2018/12/05 QC#29494 Add Start -->
        ,VND_CD
        <!-- 2018/12/05 QC#29494 Add END -->
    FROM
        PO_ACK_HDR_WRK
    WHERE 1=1
        AND EZCANCELFLAG        = '0'
        AND GLBL_CMPY_CD        = #glblCmpyCd#
        AND PO_ACK_UPD_PROC_FLG = #poACkUpdProcFlg#
        <isNotNull property="itrlIntfcId">
            AND ITRL_INTFC_ID   = #itrlIntfcId#
    </isNotNull>
        AND ACK_EDI_PROC_STS_CD IN (
        <iterate property="ackEdiProcStsCdList" var="ackEdiProcStsCd[]" open="" close="" conjunction=",">
            #ackEdiProcStsCd[]#
    </iterate>
        )
        ORDER BY
        EDI_PO_ORD_NUM
        ,TO_NUMBER(PO_ACK_NUM)
        </statement>



	<statement id="searchPoAckDtlWrkList" parameterClass="Map" resultClass="Map">
        SELECT
            CCY_CD
            ,EDI_PO_ORD_DTL_LINE_NUM
            ,EDI_PO_ORD_NUM
            ,ETA_DT
            ,ETD_DT
            ,MDSE_CD
            ,MDSE_NM
            ,ORD_DTL_LAST_UPD_TS
            ,ORD_QTY
            ,ORIG_ORD_QTY
            ,ORIG_TRD_PTNR_SKU_CD
            ,ORIG_VND_MDSE_CD
            ,PO_ACK_DTL_WRK_PK
            ,PO_ACK_HDR_WRK_PK
            ,PO_ACK_LINE_STS_CD
            ,PO_ORD_DTL_LINE_NUM
            ,PO_ORD_DTL_SUB_LINE_NUM
            ,PO_ORD_NUM
            ,PRO_NUM
            ,SHPG_PLN_DPLY_LINE_NUM
            ,SHPG_PLN_NUM
            ,SHPG_STS_CD
            ,THIS_MTH_FOB_COST_AMT
            ,TRD_PTNR_SKU_CD
            ,UOM_CD
            ,VND_CHILD_BOM_PRC_AMT
            ,VND_CPO_CRAT_TS
            ,VND_CPO_DTL_LINE_NUM
            ,VND_CPO_DTL_LINE_SUB_NUM
            ,VND_CPO_LINE_STS_CD
            ,VND_CPO_ORD_NUM
            ,VND_INVTY_LOC_CD
            ,VND_ISS_PO_ORD_NUM
            ,VND_OTBD_CARR_CD
            ,VND_OTBD_CARR_NM
            ,VND_PO_ACK_LINE_STS_TXT
            ,VND_PO_ACK_STS_CD
            ,VND_SELL_TO_CUST_CD
            ,VND_SELL_TO_CUST_LOC_NM
            ,VND_SHIP_TO_CUST_CD
            ,VND_SHIP_TO_CUST_LOC_NM
            ,VND_SO_NUM
            ,VND_SO_SLP_NUM
        FROM
            PO_ACK_DTL_WRK
        WHERE 1=1
        AND EZCANCELFLAG      = '0'
        AND GLBL_CMPY_CD      = #glblCmpyCd#
        AND PO_ACK_HDR_WRK_PK = #poAckHdrWrkPk#
        ORDER BY
            EDI_PO_ORD_NUM
            ,EDI_PO_ORD_DTL_LINE_NUM
            ,PO_ACK_DTL_WRK_PK
    </statement>

    <statement id="getMdseCdFromAsl" parameterClass="Map" resultClass="Map">
        SELECT
             PRNT_VND_CD
            ,MDSE_CD
            ,SPLY_ITEM_NUM
            ,VND_CD
        FROM(
            SELECT
             AH.PRNT_VND_CD
            ,AD.MDSE_CD
            ,NVL(AD.SPLY_ITEM_NUM , AD.MDSE_CD) AS SPLY_ITEM_NUM
            ,AD.VND_CD
        FROM
             ASL_HDR AH
            ,ASL_DTL AD
        WHERE 1=1
        AND AH.EZCANCELFLAG                           = '0'
        AND AH.GLBL_CMPY_CD                           = #glblCmpyCd#
        AND AH.GLBL_CMPY_CD                           = AD.GLBL_CMPY_CD
        AND AH.ASL_HDR_PK                             = AD.ASL_HDR_PK
        <isNotNull property="slsDate">
        AND NVL(AH.ASL_START_DT , #aslStartDt# ) &lt; =#slsDate#
        AND NVL(AH.ASL_END_DT   , #aslEndDt#   ) &gt; =#slsDate#
        </isNotNull>
        AND AD.EZCANCELFLAG                           = '0'
        AND AD.VND_CD                                 = #vndCd#
<!-- START 2018/11/14 M.Naito [QC#29047,ADD] -->
        <isNull property="tstImpresoFlg">
        AND NVL(AD.SPLY_ITEM_NUM , AD.MDSE_CD)        = #splyItemNum#
        </isNull>
        <isNotNull property="tstImpresoFlg">
        AND AD.MDSE_CD                                = #splyItemNum#
        </isNotNull>
<!-- END 2018/11/14 M.Naito [QC#29047,ADD] -->
        <isNotNull property="slsDate">
        AND NVL(AD.EFF_FROM_DT , #effFromDt# )   &lt; =#slsDate#
        AND NVL(AD.EFF_THRU_DT , #effThruDt# )   &gt; =#slsDate#
        </isNotNull>
        ORDER BY 
            AD.MDSE_CD
           ,AH.ASL_NM
        )
<!-- START 2018/01/11 M.Naito [QC#29694,DEL] -->
    <!--WHERE  -->
    <!--    ROWNUM = 1 -->
<!-- END 2018/01/11 M.Naito [QC#29694,DEL] -->
    </statement>
    
    <statement id="getMdseNm" parameterClass="Map" resultClass="String">
    SELECT
        MDSE_NM
    FROM
        MDSE
    WHERE 1=1
    AND GLBL_CMPY_CD  = #glblCmpyCd#
    AND EZCANCELFLAG  = '0'
    AND MDSE_CD       = #mdseCd#
    AND RGTN_STS_CD IN (
    <iterate property="rgtnStsList" var="rgtnSts[]" open="" close="" conjunction=",">
    #rgtnSts[]#
    </iterate>
    )
    AND ROWNUM =1
    </statement>
 
    <statement id="getOldMdseCd" parameterClass="Map" resultClass="String">
    SELECT
        1
    FROM
        MDSE
    WHERE 1=1
    AND EZCANCELFLAG  = '0'
    AND GLBL_CMPY_CD  = #glblCmpyCd#
    AND MDSE_CD       = #mdseCd#
    AND ROWNUM = 1
    </statement>

    <statement id="searchPoDtlList" parameterClass="Map" resultClass="Map">
    SELECT
        PO_ORD_NUM
       ,PO_ORD_DTL_LINE_NUM
       ,PO_STS_CD
       ,MDSE_CD
       ,PO_QTY
    FROM
        PO_DTL
    WHERE 1=1
    AND EZCANCELFLAG        = '0'
    AND GLBL_CMPY_CD        = #glblCmpyCd#
    AND PO_ORD_NUM          = #poOrdNum#
    <isNotNull property="poOrdDtlLineNum">
    AND PO_ORD_DTL_LINE_NUM = #poOrdDtlLineNum#
    </isNotNull>
    <isNotNull property="mdseCd">
    AND MDSE_CD             = #mdseCd#
    </isNotNull>
    AND ROWNUM = 1
    </statement>

    <statement id="getPoAckHdrPkList" parameterClass="Map" resultClass="Map">
    SELECT
        PO_ACK_HDR_PK
    FROM
        PO_ACK_HDR
    WHERE 1=1
    AND EZCANCELFLAG    = '0'
    AND GLBL_CMPY_CD    = #glblCmpyCd#
    AND PO_ORD_NUM      = #poOrdNum#
    AND PO_ACK_HDR_PK  != #poAckHdrPk#
    </statement>

    <statement id="getPoAckHdr" parameterClass="Map" resultClass="Map">
    SELECT
         PO_ACK_NUM
        ,PO_SEND_TS
    FROM
        PO_ACK_HDR
    WHERE 1=1
    AND EZCANCELFLAG          = '0'
    AND GLBL_CMPY_CD          = #glblCmpyCd#
    AND PO_ORD_NUM            = #poOrdNum#
    AND PO_ACK_HDR_LTST_FLG   = #poAckHdrLtstFlg#
    AND ROWNUM = 1
    </statement>

    <statement id="getUpdateTargetPoAckDtlPk" parameterClass="Map" resultClass="Map">
    SELECT
        PO_ACK_DTL_PK
    FROM
        PO_ACK_DTL
    WHERE 1=1
    AND EZCANCELFLAG        = '0'
    AND GLBL_CMPY_CD        = #glblCmpyCd#
    AND PO_ORD_NUM          = #poOrdNum#
    AND PO_ORD_DTL_LINE_NUM = #poOrdDtlLineNum#
    AND PO_ACK_DTL_PK      != #poAckDtlPk#
    </statement>
    
    <statement id="checkPrmoItem" parameterClass="Map" resultClass="BigDecimal">
    SELECT
        PRMO_UNIT_PRC_AMT
    FROM(
        SELECT
            PRMO_UNIT_PRC_AMT
        FROM
            PO_PRMO_ITEM
        WHERE 1=1
        AND EZCANCELFLAG        = '0'
        AND GLBL_CMPY_CD        = #glblCmpyCd#
        AND #vndMdseCd#         LIKE VND_MDSE_CD || '%'
        AND NVL(EFF_FROM_DT , #effFromDt#)  &lt; = #slsDate#
        AND NVL(EFF_THRU_DT , #effThruDt#)  &gt; = #slsDate#
        ORDER BY 
            VND_MDSE_CD
           ,EFF_FROM_DT
       )
     WHERE ROWNUM = 1
    </statement>

    <statement id="checkSupercedeStage" parameterClass="Map" resultClass="String">
    SELECT
        1
    FROM
        SUPD_RELN_STAGE
    WHERE 1=1
    AND EZCANCELFLAG        = '0'
    AND GLBL_CMPY_CD        = #glblCmpyCd#
    AND SUPD_FROM_MDSE_CD   = #supdFromMdseCd#
    AND SUPD_TO_MDSE_CD     = #supdToMdseCd#
    AND ROWNUM = 1
    </statement> 

    <statement id="checkSupercedeReln" parameterClass="Map" resultClass="String">
    SELECT
        1
    FROM
        SUPD_RELN
    WHERE 1=1
    AND EZCANCELFLAG        = '0'
    AND GLBL_CMPY_CD        = #glblCmpyCd#
    AND SUPD_FROM_MDSE_CD   = #supdFromMdseCd#
    AND SUPD_TO_MDSE_CD     = #supdToMdseCd#
    AND ROWNUM = 1
    </statement> 
    
    <statement id="getPoAckErrWrkList" parameterClass="Map" resultClass="Map">
    SELECT
        PO_ACK_ERR_WRK_PK
    FROM
        PO_ACK_ERR_WRK
    WHERE 1=1
    AND EZCANCELFLAG        = '0'
    AND GLBL_CMPY_CD        = #glblCmpyCd#
    AND PO_ACK_HDR_WRK_PK   = #poAckHdrWrkPk#
    </statement> 

    <statement id="searchPoDtl" parameterClass="Map" resultClass="String">
    SELECT
        PO_MDSE_CMPSN_TP_CD
    FROM
        PO_DTL
    WHERE 1=1
    AND EZCANCELFLAG        = '0'
    AND GLBL_CMPY_CD        = #glblCmpyCd#
    AND PO_ORD_NUM          = #poOrdNum#
    AND PO_ORD_DTL_LINE_NUM = #poOrdDtlLineNum#
    AND ROWNUM = 1
    </statement>


    <statement id="logicalDeleteTargetPoAckDtlPkList" parameterClass="Map" resultClass="Map">
    SELECT
        PO_ACK_DTL_PK
    FROM
        PO_ACK_DTL
    WHERE 1=1
    AND EZCANCELFLAG        = '0'
    AND GLBL_CMPY_CD        = #glblCmpyCd#
    AND PO_ACK_HDR_PK       = #poAckHdrPk#
    </statement>
    
    
    <statement id="searchCostUpdateTarget" parameterClass="Map" resultClass="Map">
    SELECT  
         PO.DS_PO_TP_CD
        ,PO.DS_PO_TP_NM
        ,PO.PO_QLFY_CD
        ,PO.PO_SUBMT_PSN_CD
        ,PO.PO_SUBMT_TS
        ,PO.PO_APVL_STS_CD
        ,PO.PO_APVL_PSN_CD
        ,PO.PO_APVL_DT
        ,PO.PO_APVL_TS
        ,PO.DEST_RTL_WH_CD
        ,PO.SRC_RTL_WH_CD
        ,PO.PO_ORD_SRC_CD
        ,PO.PRNT_VND_CD
        ,PO.PRNT_VND_NM
        ,PO.VND_CD
        ,PO.VND_NM
        ,PD.CCY_CD
        ,PO.VND_DROP_SHIP_FLG
        ,PD.PRCH_GRP_CD
        ,PO.VND_PMT_TERM_CD
        ,PO.VND_PMT_TERM_DESC_TXT
        ,PO.RQST_TECH_TOC_CD
        ,PO.RQST_RCV_DT
        ,PO.RQST_RCV_TM
        <!-- START 2023/07/20 S.Dong [QC#61638, ADD] -->
        ,PO.RQST_SHIP_DT
        <!-- END 2023/07/20 S.Dong [QC#61638, ADD] -->
        ,PD.SHIP_TO_CUST_CD
        ,PD.SHIP_TO_LOC_NM
        ,PD.SHIP_TO_ACCT_NM
        ,PD.SHIP_TO_ADDL_LOC_NM
        ,PD.SHIP_TO_FIRST_LINE_ADDR
        ,PD.SHIP_TO_SCD_LINE_ADDR
        ,PD.SHIP_TO_THIRD_LINE_ADDR
        ,PD.SHIP_TO_FRTH_LINE_ADDR
        ,PD.SHIP_TO_FIRST_REF_CMNT_TXT
        ,PD.SHIP_TO_SCD_REF_CMNT_TXT
        ,PD.SHIP_TO_CTY_ADDR
        ,PD.SHIP_TO_ST_CD
        ,PD.SHIP_TO_PROV_NM
        ,PD.SHIP_TO_CNTY_NM
        ,PD.SHIP_TO_POST_CD
        ,PD.SHIP_TO_CTRY_CD
        ,PD.CTAC_PSN_NM
        ,PO.RTRN_SHIP_TO_RTL_WH_CD
        ,PO.SHIP_FROM_SO_NUM_LIST_TXT AS DP_SHIP_FROM_SO_NUM_LIST_TXT
        ,PD.CARR_CD
        ,PO.CARR_ACCT_NUM
        ,PD.SHPG_SVC_LVL_CD
        ,PD.FRT_CHRG_TO_CD
        ,PD.FRT_CHRG_METH_CD
        ,PO.LINE_BIZ_TP_CD
        ,PO.PO_ORD_CMNT_TXT
        ,PO.TRSMT_METH_TP_CD
        ,PO.SEND_PO_FAX_NUM
        ,PO.SEND_PO_EML_ADDR
        ,PO.PO_SEND_FLG
        ,PO.PO_SEND_TS
        ,PO.PO_PRINT_FLG
        ,PO.VND_ISS_ORD_NUM
        ,PO.EIP_RPT_RQST_PK
        ,PD.PO_ORD_DTL_LINE_NUM
        ,PD.DISP_PO_DTL_LINE_NUM
        ,PD.PO_LINE_TP_CD
        ,PD.PO_MDSE_CMPSN_TP_CD
        ,PD.SET_PO_ORD_DTL_LINE_NUM
        ,PD.MDSE_CD
        ,PD.MDSE_NM
        ,PD.MDSE_DESC_SHORT_TXT
        ,PD.PO_QTY
        ,PD.PO_DISP_QTY
        ,PD.PO_INV_QTY
        ,PD.PO_DISP_UOM_CD
        ,PD.THIS_MTH_FOB_COST_AMT
        ,PD.EXCH_RATE
        ,PD.CUST_UOM_CD
        ,PD.DEST_RTL_SWH_CD
        ,PD.SRC_RTL_SWH_CD
        ,PD.INVTY_LOC_CD
        ,PD.RQST_RCV_DT
        ,PD.RQST_RCV_TM
        <!-- START 2023/07/20 S.Dong [QC#61638, ADD] -->
        ,PD.RQST_SHIP_DT      AS     DTL_RQST_SHIP_DT
        <!-- END 2023/07/20 S.Dong [QC#61638, ADD] -->
        ,PD.FRT_COND_CD
        ,PD.ORIG_MDSE_CD
        ,PD.FROM_STK_STS_CD
        ,PD.TO_STK_STS_CD
        ,PD.ADMIN_PSN_CD
        ,PD.PO_MATCH_TP_CD
        ,PD.ORD_QTY
        ,PD.CPO_ORD_NUM
        ,PD.CPO_DTL_LINE_NUM
        ,PD.CPO_DTL_LINE_SUB_NUM
        ,PD.CUST_ISS_PO_NUM
        ,PD.CUST_ISS_PO_DT
        ,PD.CPO_ORD_TP_CD
        ,PD.BILL_TO_CUST_CD
        ,PD.SELL_TO_CUST_CD
        ,PD.SHPG_PLN_NUM
        ,PD.PO_ORD_DTL_CMNT_TXT
        ,PD.PRCH_REQ_NUM
        ,PD.PRCH_REQ_LINE_NUM
        ,PD.PRCH_REQ_LINE_SUB_NUM
        ,PD.TRX_REF_NUM
        ,PD.TRX_REF_LINE_NUM
        ,PD.TRX_REF_LINE_SUB_NUM
        ,PD.ASL_DTL_PK
        ,PD.ASL_MDSE_CD
        ,PD.ASL_UNIT_PRC_AMT
        ,PD.SHIP_FROM_SO_NUM_LIST_TXT AS DPD_SHIP_FROM_SO_NUM_LIST_TXT
        ,PD.VND_INVTY_LOC_CD
        ,PD.VND_ISS_PO_ORD_NUM
        ,PD.PRO_NUM
        ,PD.VND_PO_ACK_STS_CD
        ,PD.ORIG_PO_ORD_NUM
        ,PD.ORIG_PO_ORD_DTL_LINE_NUM
        ,PD.ORIG_DISP_PO_DTL_LINE_NUM
        ,PD.SVC_CONFIG_MSTR_PK
        ,PD.PO_SEND_TS
    FROM 
         PO           PO 
        ,PO_DTL       PD
    WHERE 1=1 
        AND PO.GLBL_CMPY_CD         = #glblCmpyCd#
        AND PO.PO_ORD_NUM           = #poOrdNum#
        AND PO.EZCANCELFLAG         = '0'
        AND PO.GLBL_CMPY_CD         = PD.GLBL_CMPY_CD
        AND PO.PO_ORD_NUM           = PD.PO_ORD_NUM
        AND PD.EZCANCELFLAG         = '0'
        AND PD.PO_ORD_DTL_LINE_NUM  = #poOrdDtlLineNum#
        AND ROWNUM                  = 1
    </statement>
    <statement id="searchSetChildrenTarget" parameterClass="Map" resultClass="Map">
    SELECT  
         PO.DS_PO_TP_CD
        ,PO.DS_PO_TP_NM
        ,PO.PO_QLFY_CD
        ,PO.PO_SUBMT_PSN_CD
        ,PO.PO_SUBMT_TS
        ,PO.PO_APVL_STS_CD
        ,PO.PO_APVL_PSN_CD
        ,PO.PO_APVL_DT
        ,PO.PO_APVL_TS
        ,PO.DEST_RTL_WH_CD
        ,PO.SRC_RTL_WH_CD
        ,PO.PO_ORD_SRC_CD
        ,PO.PRNT_VND_CD
        ,PO.PRNT_VND_NM
        ,PO.VND_CD
        ,PO.VND_NM
        ,PD.CCY_CD
        ,PO.VND_DROP_SHIP_FLG
        ,PD.PRCH_GRP_CD
        ,PO.VND_PMT_TERM_CD
        ,PO.VND_PMT_TERM_DESC_TXT
        ,PO.RQST_TECH_TOC_CD
        ,PO.RQST_RCV_DT
        ,PO.RQST_RCV_TM
        <!-- START 2023/07/20 S.Dong [QC#61638, ADD] -->
        ,PO.RQST_SHIP_DT
        <!-- END 2023/07/20 S.Dong [QC#61638, ADD] -->
        ,PD.SHIP_TO_CUST_CD
        ,PD.SHIP_TO_LOC_NM
        ,PD.SHIP_TO_ACCT_NM
        ,PD.SHIP_TO_ADDL_LOC_NM
        ,PD.SHIP_TO_FIRST_LINE_ADDR
        ,PD.SHIP_TO_SCD_LINE_ADDR
        ,PD.SHIP_TO_THIRD_LINE_ADDR
        ,PD.SHIP_TO_FRTH_LINE_ADDR
        ,PD.SHIP_TO_FIRST_REF_CMNT_TXT
        ,PD.SHIP_TO_SCD_REF_CMNT_TXT
        ,PD.SHIP_TO_CTY_ADDR
        ,PD.SHIP_TO_ST_CD
        ,PD.SHIP_TO_PROV_NM
        ,PD.SHIP_TO_CNTY_NM
        ,PD.SHIP_TO_POST_CD
        ,PD.SHIP_TO_CTRY_CD
        ,PD.CTAC_PSN_NM
        ,PO.RTRN_SHIP_TO_RTL_WH_CD
        ,PO.SHIP_FROM_SO_NUM_LIST_TXT AS DP_SHIP_FROM_SO_NUM_LIST_TXT
        ,PD.CARR_CD
        ,PO.CARR_ACCT_NUM
        ,PD.SHPG_SVC_LVL_CD
        ,PD.FRT_CHRG_TO_CD
        ,PD.FRT_CHRG_METH_CD
        ,PO.LINE_BIZ_TP_CD
        ,PO.PO_ORD_CMNT_TXT
        ,PO.TRSMT_METH_TP_CD
        ,PO.SEND_PO_FAX_NUM
        ,PO.SEND_PO_EML_ADDR
        ,PO.PO_SEND_FLG
        ,PO.PO_SEND_TS
        ,PO.PO_PRINT_FLG
        ,PO.VND_ISS_ORD_NUM
        ,PO.EIP_RPT_RQST_PK
        ,PD.PO_ORD_DTL_LINE_NUM
        ,PD.DISP_PO_DTL_LINE_NUM
        ,PD.PO_LINE_TP_CD
        ,PD.PO_MDSE_CMPSN_TP_CD
        ,PD.SET_PO_ORD_DTL_LINE_NUM
        ,PD.MDSE_CD
        ,PD.MDSE_NM
        ,PD.MDSE_DESC_SHORT_TXT
        ,PD.PO_QTY
        ,PD.PO_DISP_QTY
        ,PD.PO_INV_QTY
        ,PD.PO_DISP_UOM_CD
        ,PD.THIS_MTH_FOB_COST_AMT
        ,PD.EXCH_RATE
        ,PD.CUST_UOM_CD
        ,PD.DEST_RTL_SWH_CD
        ,PD.SRC_RTL_SWH_CD
        ,PD.INVTY_LOC_CD
        ,PD.RQST_RCV_DT
        ,PD.RQST_RCV_TM
        <!-- START 2023/07/20 S.Dong [QC#61638, ADD] -->
        ,PD.RQST_SHIP_DT      AS     DTL_RQST_SHIP_DT
        <!-- END 2023/07/20 S.Dong [QC#61638, ADD] -->
        ,PD.FRT_COND_CD
        ,PD.ORIG_MDSE_CD
        ,PD.FROM_STK_STS_CD
        ,PD.TO_STK_STS_CD
        ,PD.ADMIN_PSN_CD
        ,PD.PO_MATCH_TP_CD
        ,PD.ORD_QTY
        ,PD.CPO_ORD_NUM
        ,PD.CPO_DTL_LINE_NUM
        ,PD.CPO_DTL_LINE_SUB_NUM
        ,PD.CUST_ISS_PO_NUM
        ,PD.CUST_ISS_PO_DT
        ,PD.CPO_ORD_TP_CD
        ,PD.BILL_TO_CUST_CD
        ,PD.SELL_TO_CUST_CD
        ,PD.SHPG_PLN_NUM
        ,PD.PO_ORD_DTL_CMNT_TXT
        ,PD.PRCH_REQ_NUM
        ,PD.PRCH_REQ_LINE_NUM
        ,PD.PRCH_REQ_LINE_SUB_NUM
        ,PD.TRX_REF_NUM
        ,PD.TRX_REF_LINE_NUM
        ,PD.TRX_REF_LINE_SUB_NUM
        ,PD.ASL_DTL_PK
        ,PD.ASL_MDSE_CD
        ,PD.ASL_UNIT_PRC_AMT
        ,PD.SHIP_FROM_SO_NUM_LIST_TXT AS DPD_SHIP_FROM_SO_NUM_LIST_TXT
        ,PD.VND_INVTY_LOC_CD
        ,PD.VND_ISS_PO_ORD_NUM
        ,PD.PRO_NUM
        ,PD.VND_PO_ACK_STS_CD
        ,PD.ORIG_PO_ORD_NUM
        ,PD.ORIG_PO_ORD_DTL_LINE_NUM
        ,PD.ORIG_DISP_PO_DTL_LINE_NUM
        ,PD.SVC_CONFIG_MSTR_PK
        ,PD.PO_SEND_TS
        ,PD.ETA_DT
        ,PD.ENT_DEAL_NET_UNIT_PRC_AMT
        ,PD.ENT_FUNC_NET_UNIT_PRC_AMT
        ,PD.ENT_PO_DTL_DEAL_NET_AMT
        ,PD.ENT_PO_DTL_FUNC_NET_AMT
    FROM 
         PO           PO 
        ,PO_DTL       PD
    WHERE 1=1 
        AND PO.GLBL_CMPY_CD             = #glblCmpyCd#
        AND PO.PO_ORD_NUM               = #poOrdNum#
        AND PO.EZCANCELFLAG             = '0'
        AND PO.GLBL_CMPY_CD             = PD.GLBL_CMPY_CD
        AND PO.PO_ORD_NUM               = PD.PO_ORD_NUM
        AND PD.EZCANCELFLAG             = '0'
        AND PD.SET_PO_ORD_DTL_LINE_NUM  = #poOrdDtlLineNum#
    </statement>

    <statement id="updateCheckMdseCost" parameterClass="Map" resultClass="Map">
    SELECT
        MCUHD.MDSE_CD
       ,MCUHD.RQST_TOT_STD_COST_AMT
       ,MCUHD.PKG_UOM_CD
       ,MCUHD.MDSE_CST_UPD_EFF_FROM_DT
       ,MCUHD.MDSE_CST_UPD_STS_CD
    FROM
        MDSE_CST_UPD_HIST_HDR MCUHH
       ,MDSE_CST_UPD_HIST_DTL MCUHD
    WHERE
        MCUHH.GLBL_CMPY_CD             = #glblCmpyCd#
    AND MCUHH.GLBL_CMPY_CD             = MCUHD.GLBL_CMPY_CD
    AND MCUHH.MDSE_CST_UPD_HIST_HDR_PK = MCUHD.MDSE_CST_UPD_HIST_HDR_PK
    AND MCUHD.MDSE_CD                  = #mdseCd#
    AND MCUHD.MDSE_CST_UPD_STS_CD      = #pending#
    AND MCUHH.EZCANCELFLAG             = '0'
    AND MCUHD.EZCANCELFLAG             = '0'
    </statement>

    <statement id="getSplyItemNumFromAsl" parameterClass="Map" resultClass="String">
        SELECT
            AD.SPLY_ITEM_NUM
        FROM
             ASL_HDR AH
            ,ASL_DTL AD
        WHERE 1=1
        AND AH.GLBL_CMPY_CD                           = #glblCmpyCd#
        AND AH.GLBL_CMPY_CD                           = AD.GLBL_CMPY_CD
        AND AH.ASL_HDR_PK                             = AD.ASL_HDR_PK
        AND AH.ASL_START_DT                      &lt; = #slsDate#
        AND NVL(AH.ASL_END_DT   , '99991231'   ) &gt; = #slsDate#
        AND AD.VND_CD                                 = #vndCd#
        AND AD.MDSE_CD                                = #mdseCd#
        AND AD.EFF_FROM_DT                       &lt; = #slsDate#
        AND NVL(AD.EFF_THRU_DT , '99991231' )    &gt; = #slsDate#
    </statement>

    <statement id="getNewAslMdseCd" parameterClass="Map" resultClass="Map">
        SELECT
            ASL_MDSE_CD
           ,PO_ORD_DTL_LINE_NUM
        FROM
            PO_DTL
        WHERE 1=1
        AND EZCANCELFLAG             = '0'
        AND GLBL_CMPY_CD             = #glblCmpyCd#
        AND PO_ORD_NUM               = #poOrdNum#
        AND PO_ORD_DTL_LINE_NUM      = #poOrdDtlLineNum#
    </statement>

    <statement id="getSetCompAckStsCd" parameterClass="Map" resultClass="Map">
        SELECT DISTINCT
            PAD.PO_ACK_DTL_PK
            ,PD2.VND_PO_ACK_STS_CD
        FROM
            PO_ACK_DTL PAD
            ,PO_DTL    PD
            ,PO_DTL    PD2
        WHERE
            PAD.GLBL_CMPY_CD        = #glblCmpyCd#
        AND PAD.PO_ORD_NUM          = #poOrdNum#
        AND PAD.PO_ACK_DTL_LTST_FLG = #poAckDtlLtstFlgY#
        AND PAD.VND_PO_ACK_STS_CD   = #vndPoAckStsCdIb#
        AND PAD.GLBL_CMPY_CD        = PD.GLBL_CMPY_CD 
        AND PAD.PO_ORD_NUM          = PD.PO_ORD_NUM
        AND PAD.PO_ORD_DTL_LINE_NUM = PD.PO_ORD_DTL_LINE_NUM
        AND PD.PO_ORD_DTL_LINE_NUM  = #poOrdDtlLineNum#
        AND PD.PO_MDSE_CMPSN_TP_CD  = #poMdseCmpsnTpCdParent#
        AND PD.PO_ORD_NUM           = PD2.PO_ORD_NUM
        AND PD.PO_ORD_DTL_LINE_NUM  = PD2.SET_PO_ORD_DTL_LINE_NUM
        AND PAD.EZCANCELFLAG        = '0'
        AND PD.EZCANCELFLAG         = '0'
        AND PD2.EZCANCELFLAG        = '0'
    </statement>

<!-- START 2018/11/14 M.Naito [QC#29047,ADD] -->
    <statement id="getVndSysTpCd" parameterClass="Map" resultClass="String">
            SELECT
                VND_SYS_TP_CD
            FROM
                RCV_ASN_VND
            WHERE 1=1
            AND GLBL_CMPY_CD     = #glblCmpyCd#
            AND RCV_ASN_VND_CD   = #rcvAsnVndCd#
            AND EZCANCELFLAG     = '0'
            AND ROWNUM           = 1
    </statement>
<!-- END 2018/11/14 M.Naito [QC#29047,ADD] -->

<!-- START 2019/11/15 M.Naito [QC#53502,ADD] -->
    <statement id="getLatestShippedAck" parameterClass="Map" resultClass="Map">
        SELECT
            PO_ACK_DTL_PK
        FROM
            PO_ACK_DTL
        WHERE 1=1
        AND EZCANCELFLAG        = '0'
        AND GLBL_CMPY_CD        = #glblCmpyCd#
        AND PO_ACK_DTL_LTST_FLG = 'Y'
        AND VND_PO_ACK_STS_CD   = #vndPoAckStsCd#
        AND PO_ORD_NUM          = #poOrdNum#
        AND PO_ORD_DTL_LINE_NUM = #poOrdDtlLineNum#
    </statement> 
<!-- END 2019/11/15 M.Naito [QC#53502,ADD] -->
</sqlMap>
