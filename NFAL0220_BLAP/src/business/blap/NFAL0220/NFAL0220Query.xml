<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NFAL0220Query">

     <typeAlias alias="NFAL0220_ASMsg"  type="business.blap.NFAL0220.NFAL0220_ASMsg"/>
     <statement id="searchManJrnlEntry" parameterClass="Map" resultMap="result.searchManJrnlEntry">
     SELECT
              MJ_ENTRY.MAN_JRNL_LINE_NUM
             ,MJ_ENTRY.COA_CMPY_CD
             ,MJ_ENTRY.COA_BR_CD
             ,MJ_ENTRY.COA_CC_CD
             ,MJ_ENTRY.COA_ACCT_CD
             ,MJ_ENTRY.COA_PROD_CD
             ,MJ_ENTRY.COA_CH_CD
             ,MJ_ENTRY.COA_AFFL_CD
             ,MJ_ENTRY.COA_PROJ_CD
             ,MJ_ENTRY.COA_EXTN_CD
             ,MJ_ENTRY.COA_CMPY_CD||'.'||MJ_ENTRY.COA_BR_CD||'.'||MJ_ENTRY.COA_CC_CD||'.'||MJ_ENTRY.COA_ACCT_CD||'.'||MJ_ENTRY.COA_PROD_CD||'.'||MJ_ENTRY.COA_CH_CD||'.'||MJ_ENTRY.COA_AFFL_CD||'.'||MJ_ENTRY.COA_PROJ_CD||'.'||MJ_ENTRY.COA_EXTN_CD AS SCR_ITEM
             ,MJ_ENTRY.DR_CR_TP_CD
             ,MJ_ENTRY.JRNL_DEAL_AMT_A1
             ,MJ_ENTRY.JRNL_DEAL_AMT_A2
             ,MJ_ENTRY.JRNL_DEAL_AMT
             ,MJ_ENTRY.MAN_JRNL_LINE_TXT
             ,MJ_ENTRY.DS_ACCT_NUM
             ,MJ_ENTRY.SER_NUM
             ,MJ_ENTRY.JRNL_ENTRY_SRC_VAL_TXT
             ,MJ_ENTRY.MD_EZUPTIME
             ,MJ_ENTRY.MD_EZUPTIMEZONE
             ,MJ_ENTRY.JRNL_ENTRY_SRC_TP_CD
             ,MJ_ENTRY.MAN_JRNL_ENTRY_DTL_PK
             ,MJ_ENTRY.JRNL_CATG_DESC_TXT
             ,MJ_ENTRY.JRNL_ENTRY_SRC_TP_NM
     FROM 
     (

         SELECT
              MD.MAN_JRNL_LINE_NUM                   AS MAN_JRNL_LINE_NUM
             ,MD.COA_CMPY_CD                         AS COA_CMPY_CD
             ,MD.COA_BR_CD                           AS COA_BR_CD
             ,MD.COA_CC_CD                           AS COA_CC_CD
             ,MD.COA_ACCT_CD                         AS COA_ACCT_CD
             ,MD.COA_PROD_CD                         AS COA_PROD_CD
             ,MD.COA_CH_CD                           AS COA_CH_CD
             ,MD.COA_AFFL_CD                         AS COA_AFFL_CD
             ,MD.COA_PROJ_CD                         AS COA_PROJ_CD
             ,MD.COA_EXTN_CD                         AS COA_EXTN_CD
             ,MD.DR_CR_TP_CD                         AS DR_CR_TP_CD
             ,CASE
                   WHEN MD.DR_CR_TP_CD = #debit# THEN MD.JRNL_DEAL_AMT END JRNL_DEAL_AMT_A1
             ,CASE
                   WHEN MD.DR_CR_TP_CD = #credit# THEN MD.JRNL_DEAL_AMT END JRNL_DEAL_AMT_A2
             ,MD.JRNL_DEAL_AMT                       AS JRNL_DEAL_AMT
             ,MD.MAN_JRNL_LINE_TXT                   AS MAN_JRNL_LINE_TXT
             ,MD.DS_ACCT_NUM                         AS DS_ACCT_NUM
             ,MD.SER_NUM                             AS SER_NUM
             ,MD.JRNL_ENTRY_SRC_VAL_TXT              AS JRNL_ENTRY_SRC_VAL_TXT
             ,MD.EZUPTIME                            AS MD_EZUPTIME
             ,MD.EZUPTIMEZONE                        AS MD_EZUPTIMEZONE
             ,MD.JRNL_ENTRY_SRC_TP_CD                AS JRNL_ENTRY_SRC_TP_CD
             ,MD.MAN_JRNL_ENTRY_DTL_PK               AS MAN_JRNL_ENTRY_DTL_PK
             ,JC.JRNL_CATG_DESC_TXT                  AS JRNL_CATG_DESC_TXT
             ,JT.JRNL_ENTRY_SRC_TP_NM                AS JRNL_ENTRY_SRC_TP_NM
         FROM
              MAN_JRNL_ENTRY_HDR MH
             ,MAN_JRNL_ENTRY_DTL MD
             ,JRNL_CATG          JC
             ,JRNL_ENTRY_SRC_TP  JT
         WHERE
                  MH.GLBL_CMPY_CD                  = #glblCmpyCd#
              AND MH.MAN_JRNL_ENTRY_HDR_PK         = #manJrnlEntryHdrPk#
              AND MH.EZCANCELFLAG                  = '0'

              AND MD.GLBL_CMPY_CD                  = #glblCmpyCd#
              AND MD.MAN_JRNL_ENTRY_HDR_PK         = #manJrnlEntryHdrPk#
              AND MD.EZCANCELFLAG                  = '0'

              AND JC.GLBL_CMPY_CD                  = #glblCmpyCd#
              AND JC.JRNL_CATG_CD                  = MH.JRNL_CATG_CD
              AND JC.EZCANCELFLAG                  = '0'

              AND JT.GLBL_CMPY_CD (+)              = #glblCmpyCd#
              AND JT.JRNL_ENTRY_SRC_TP_CD (+)      = MD.JRNL_ENTRY_SRC_TP_CD
              AND JT.EZCANCELFLAG (+)              = '0'
           ORDER BY
              MD.MAN_JRNL_LINE_NUM
     ) MJ_ENTRY
     WHERE
      ROWNUM                            &lt;=   #limitCount#

    </statement>

    <resultMap id="result.searchManJrnlEntry" class="NFAL0220_ASMsg">
        <result property="xxNum_A"                          column="MAN_JRNL_LINE_NUM"          javaType="EZDSBigDecimalItem"/>
        <result property="coaCmpyCd_A"                      column="COA_CMPY_CD"                javaType="EZDSStringItem"/>
        <result property="coaBrCd_A"                        column="COA_BR_CD"                  javaType="EZDSStringItem"/>
        <result property="coaCcCd_A"                        column="COA_CC_CD"                  javaType="EZDSStringItem"/>
        <result property="coaAcctCd_A"                      column="COA_ACCT_CD"                javaType="EZDSStringItem"/>
        <result property="coaProdCd_A"                      column="COA_PROD_CD"                javaType="EZDSStringItem"/>
        <result property="coaChCd_A"                        column="COA_CH_CD"                  javaType="EZDSStringItem"/>
        <result property="coaAfflCd_A"                      column="COA_AFFL_CD"                javaType="EZDSStringItem"/>
        <result property="coaProjCd_A"                      column="COA_PROJ_CD"                javaType="EZDSStringItem"/>
        <result property="coaExtnCd_A"                      column="COA_EXTN_CD"                javaType="EZDSStringItem"/>
        <result property="xxScrItem61Txt_A"                 column="SCR_ITEM"                   javaType="EZDSStringItem"/>
        <result property="drCrTpCd_A"                       column="DR_CR_TP_CD"                javaType="EZDSStringItem"/>
        <result property="jrnlDealAmt_A1"                   column="JRNL_DEAL_AMT_A1"           javaType="EZDSBigDecimalItem"/>
        <result property="jrnlDealAmt_A2"                   column="JRNL_DEAL_AMT_A2"           javaType="EZDSBigDecimalItem"/>
        <result property="manJrnlLineTxt_A"                 column="MAN_JRNL_LINE_TXT"          javaType="EZDSStringItem"/>
        <result property="dsAcctNum_A"                      column="DS_ACCT_NUM"                javaType="EZDSStringItem"/>
        <result property="serNum_A"                         column="SER_NUM"                    javaType="EZDSStringItem"/>
        <result property="jrnlEntrySrcValTxt_A"             column="JRNL_ENTRY_SRC_VAL_TXT"     javaType="EZDSStringItem"/>
        <result property="jrnlEntrySrcTpCd_LS"              column="JRNL_ENTRY_SRC_TP_CD"       javaType="EZDSStringItem"/>
        <result property="ezUpTime_A"                       column="MD_EZUPTIME"                javaType="EZDSStringItem"/>
        <result property="ezUpTimeZone_A"                   column="MD_EZUPTIMEZONE"            javaType="EZDSStringItem"/>
        <result property="manJrnlEntryDtlPk_A"              column="MAN_JRNL_ENTRY_DTL_PK"      javaType="EZDSBigDecimalItem"/>
    </resultMap>
</sqlMap>
