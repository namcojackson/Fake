<!--<?xml version="1.0" encoding="UTF-8"?>-->

<sqlMap namespace="NFCB024001">

    <statement id="getArAcctDt" parameterClass="Map">
     SELECT
               A.ACCT_DT
     FROM
               AR_ACCT_DT  A
     WHERE
                    A.GLBL_CMPY_CD   =  #glblCmpyCd#
               AND  A.SUB_SYS_CD     =  #subSysCd#
               AND  A.ONL_BAT_TP_CD  =  #onlBatTpCd#
               AND  A.EZCANCELFLAG   =  '0'
    </statement>

    <statement id="getArRcptRcvWrk" parameterClass="Map">
     SELECT
               A.EZTABLEID
              ,A.EZCANCELFLAG
              ,A.EZINTIME
              ,A.EZINTIMEZONE
              ,A.EZINCOMPANYCODE
              ,A.EZINUSERID
              ,A.EZINAPLID
              ,A.EZUPTIME
              ,A.EZUPTIMEZONE
              ,A.EZUPCOMPANYCODE
              ,A.EZUPUSERID
              ,A.EZUPAPLID
              ,A.GLBL_CMPY_CD
              ,A.RCV_SQ_PK
              ,A.RCV_HDR_NUM
              ,A.RCV_DTL_NUM
              ,A.RCV_DT
              ,A.RCV_FUNC_ID
              ,A.ANSI_INCG_SEND_ID
              ,A.ANSI_INCG_CTRL_NUM
              ,A.ANSI_TRX_CD
              ,A.ANSI_INCG_RCV_ID
              ,A.ANSI_FUNC_ID
              ,A.ENTRY_DT_01
              ,A.ENTRY_TM_01
              ,A.FIRST_BILL_TO_CUST_CD
              ,A.CHK_30_NUM
              ,A.BANK_ID_NUM
              ,A.BAT_NUM
              ,A.RCV_CHK_NUM
              ,A.DEP_DT_01
              ,A.ANSI_TRX_HDLG_CD
              ,A.CHK_AMT
              ,A.ANSI_CR_DR_FLG
              ,A.ANSI_PMT_METH_CD
              ,A.ANSI_PMT_FMT_CD
              ,A.CUST_BANK_ID_NUM
              ,A.CUST_BANK_ACCT_NUM
              ,A.CANON_BANK_ID_NUM
              ,A.ANSI_CD_ORIG_COMP_ID
              ,A.SELL_TP_CD
              ,A.AR_RCPT_RCV_TRX_TP_CD
              ,A.TRX_TP_NUM
              ,A.CHK_30_NUM_CD
              ,A.CHK_DT_CD
              ,A.CHK_APPLY_DT
              ,A.EFF_DT_CD
              ,A.CHK_EFF_DT
              ,A.APVL_FLG_01
              ,A.BR_BANK_CD
              ,A.ACCT_MA_CD
              ,A.ENTRY_DT_02
              ,A.ENTRY_TM_02
              ,A.ENTRY_OP_CD_01
              ,A.ENTRY_TERM_CD_01
              ,A.UPD_DT_01
              ,A.UPD_TM_01
              ,A.UPD_OP_CD_01
              ,A.UPD_TERM_CD_01
              ,A.DEP_DT_02
              ,A.APVL_FLG_02
              ,A.INV_30_NUM
              ,A.SCD_BILL_TO_CUST_CD
              ,A.INV_30_NUM_CD
              ,A.INV_30_ORIG_NUM
              ,A.CHK_RCPT_TOT_AMT
              ,A.INV_ORIG_TOT_AMT
              ,A.INV_DISC_TOT_AMT
              ,A.ANSI_PMT_ACT_CD
              ,A.ANSI_DT
              ,A.ENTRY_DT_03
              ,A.ENTRY_TM_03
              ,A.ENTRY_OP_CD_02
              ,A.ENTRY_TERM_CD_02
              ,A.UPD_DT_02
              ,A.UPD_TM_02
              ,A.UPD_OP_CD_02
              ,A.UPD_TERM_CD_02
              ,A.CASH_APPLY_AMT
              ,A.ANSI_RSN_CD
              ,A.REF_CD
              ,A.REF_NUM
              ,A.RCV_STS_CD
              ,A.ANSI_NM
              ,A.UPLD_CRAT_METH_TP_CD
              ,A.UPLD_AR_RCPT_TP_CD
              ,A.UPLD_GL_DT
              ,A.UPLD_AR_RCPT_TRX_TP_CD
              ,A.UPLD_RCPT_BAT_NUM
              ,A.UPLD_AR_BANK_ACCT_CD
              ,A.UPLD_DEAL_CCY_CD
              ,A.UPLD_AR_CUST_REF_NUM
              ,A.UPLD_AR_CUST_REF_TP_CD
              ,A.UPLD_RCPT_FIRST_CMNT_TXT
              ,A.UPLD_RCPT_SCD_CMNT_TXT
              ,A.UPLD_TOC_CD
              ,A.UPLD_COA_PROD_CD
              ,A.RCPT_BAT_SQ_NUM
              ,A.UPLD_CSV_RQST_PK
              ,A.EXPT_FLG
<!-- for North America(CSA) 2015/04/06 Add Start -->
              ,A.PAYER_CUST_CD
              ,A.AR_BAT_RCPT_NM
              ,A.REM_DS_BANK_ACCT_PK
              ,A.CUST_DS_BANK_ACCT_PK
              ,A.CUST_ACCT_REF_NUM
              ,A.CUST_RCPT_NUM
              ,A.CUST_INV_NUM
              ,A.INV_CONSL_TP_CD
              ,A.AR_RCPT_SRC_CD
              ,A.AR_CUST_ID_STS_CD
              ,A.AR_LOCK_BOX_FILE_NM
              ,A.AR_LOCK_BOX_CD
              ,A.BAT_RCPT_REC_CNT
              ,A.BAT_RCPT_TOT_AMT
<!-- for North America(CSA) 2015/04/06 Add End -->
              ,A.CR_CARD_APVL_CD
     FROM
               AR_RCPT_RCV_WRK  A
     WHERE 
                    A.GLBL_CMPY_CD  =  #glblCmpyCd#
               AND  A.RCV_FUNC_ID   =  #rcvFuncId#
               AND  A.RCV_STS_CD    =  #rcvStsCd#
               AND  A.EZCANCELFLAG  =  '0'
               <isNotNull property="lineList">
                    <iterate property="lineList" var="lineList[]" open="AND A.RCPT_BAT_SQ_NUM IN (" close=")" conjunction=",">
                        #lineList[]#
                    </iterate>
               </isNotNull>
     ORDER BY
                    A.RCV_SQ_PK
                   ,A.RCV_HDR_NUM
                   ,A.RCV_DTL_NUM
    </statement>

    <statement id="getBillToCust" parameterClass="Map">
     SELECT
               A.BILL_TO_CUST_CD
     FROM
               BILL_TO_CUST  A
     WHERE
                    A.GLBL_CMPY_CD     =  #glblCmpyCd#
               AND  A.BILL_TO_CUST_CD  =  #billToCustCd#
               AND  A.RGTN_STS_CD      IN ($rgtnStsCd$)               
               AND  A.EZCANCELFLAG     =  '0'
    </statement>
    
    <statement id="getDsAcctCust" parameterClass="Map">
     SELECT
               A.SELL_TO_CUST_CD  AS BILL_TO_CUST_CD
     FROM
               SELL_TO_CUST  A
     WHERE
                    A.GLBL_CMPY_CD     =  #glblCmpyCd#
               AND  A.SELL_TO_CUST_CD  =  #billToCustCd#
               AND  A.RGTN_STS_CD      IN ($rgtnStsCd$)               
               AND  A.EZCANCELFLAG     =  '0'
    </statement>

    <statement id="getArInvInfoFromGrpInvChk" parameterClass="Map">
<!--       QC#50201 2019/05/20 Mod Start -->
<!--     SELECT-->
<!--               A.PAYER_CUST_CD-->
<!--     FROM-->
<!--               INV  A-->
<!--     WHERE-->
<!--                    A.GLBL_CMPY_CD  =  #glblCmpyCd#-->
<!--               AND  A.GRP_INV_NUM   =  #invNum#-->
<!--               AND  A.EZCANCELFLAG  =  '0'-->
     SELECT
               A.PAYER_CUST_CD
     FROM
               AR_TRX_BAL  A
     WHERE
                    A.GLBL_CMPY_CD  =  #glblCmpyCd#
               AND  A.GRP_INV_NUM            =  #invNum#
               AND  A.DEAL_RMNG_BAL_GRS_AMT  &lt;&gt;  0
               AND  A.EZCANCELFLAG  =  '0'
<!--       QC#50201 2019/05/20 Mod End -->
               
    </statement>

    <statement id="getArInvInfoFromInvChk" parameterClass="Map">
     SELECT
               A.AR_TRX_NUM INV_NUM
<!-- for North America(CSA) 2015/04/06 Add Start -->
              ,A.DEAL_RMNG_BAL_GRS_AMT
              ,A.AR_TRX_TP_CD
              ,A.AR_TRX_BAL_PK
              ,A.EZUPTIME
              ,A.EZUPTIMEZONE
<!-- for North America(CSA) 2015/04/06 Add End -->
     FROM
               AR_TRX_BAL   A
               
     WHERE
                    A.GLBL_CMPY_CD  =  #glblCmpyCd#
               AND  A.AR_TRX_NUM    =  #invNum#
               AND (
	                      A.AR_CASH_APPLY_STS_CD  =  #arCashApplyStsCd01#
	                  OR  A.AR_CASH_APPLY_STS_CD  =  #arCashApplyStsCd02#
                    )
               AND  A.EXPT_FLG      =  #exptFlg#
               AND  A.EZCANCELFLAG  =  '0'
               <!-- QC#55180 2020/01/14 MOD START -->
               <!-- AND  A.AR_TRX_TP_CD  &lt;&gt; #arTrxTpCd# -->
               AND  A.AR_TRX_TP_CD NOT IN (#rcp#, #acc#)
               <!-- QC#55180 2020/01/14 MOD END -->
    </statement>
    
    <statement id="getArInvInfoFromInvChkSQS" parameterClass="Map">
     SELECT
               A.AR_TRX_NUM INV_NUM
     FROM
               AR_TRX_BAL   A
               
     WHERE
                    A.GLBL_CMPY_CD  =  #glblCmpyCd#
               AND  A.AR_TRX_NUM    =  #invNum#
               AND (
	                      A.AR_CASH_APPLY_STS_CD  =  #arCashApplyStsCd01#
	                  OR  A.AR_CASH_APPLY_STS_CD  =  #arCashApplyStsCd02#
                    )
               AND  A.EXPT_FLG      =  #exptFlg#
               AND  A.EZCANCELFLAG  =  '0'
               AND  EXISTS
               	   (
               		SELECT * 
               		FROM 
               			INV B
               		WHERE
               			    B.GLBL_CMPY_CD = A.GLBL_CMPY_CD
               			AND B.INV_NUM      = A.AR_TRX_NUM
               			AND B.INV_NUM      = #invNum#
               			AND ( 
               			         B.SYS_SRC_CD   = #sysSrcCdSQS#
               			      OR B.SYS_SRC_CD   = #sysSrcCdSQS1#
               			)
               			AND LENGTH(B.INV_NUM) = 10
               			AND SUBSTR(B.INV_NUM,9,2) = '00'
               			AND B.EZCANCELFLAG = '0'
               	   )
    </statement>

    <statement id="getArInvBolInfoFromInvChk" parameterClass="Map">
     SELECT
               A.INV_NUM
     FROM
               INV_BOL          A
              ,AR_TRX_BAL       B
     WHERE
                    A.GLBL_CMPY_CD  =  #glblCmpyCd#
               AND  A.SO_NUM        =  #soNum#
               AND  A.EZCANCELFLAG  =  '0'
               AND (
	                      B.AR_CASH_APPLY_STS_CD  =  #arCashApplyStsCd01#
	                  OR  B.AR_CASH_APPLY_STS_CD  =  #arCashApplyStsCd02#
                    )
               AND  B.EXPT_FLG      =  #exptFlg#
               AND  B.EZCANCELFLAG  =  '0'
               AND  A.GLBL_CMPY_CD  =  B.GLBL_CMPY_CD
               AND  B.AR_TRX_NUM    LIKE CONCAT(A.INV_NUM, '%')
    </statement>

    <statement id="getArTrxBalFromInvChk" parameterClass="Map">
     SELECT
               A.AR_CUST_REF_NUM
              ,A.AR_TRX_NUM
     FROM
               AR_TRX_BAL  A
     WHERE
                    A.GLBL_CMPY_CD     =  #glblCmpyCd#
               AND  A.AR_CUST_REF_NUM  =  #arCustRefNum#
               AND (
	                  A.AR_CASH_APPLY_STS_CD  =  #arCashApplyStsCd01#
	              OR  A.AR_CASH_APPLY_STS_CD  =  #arCashApplyStsCd02#
               )
               AND  A.EXPT_FLG         =  #exptFlg#
               AND  A.EZCANCELFLAG     =  '0'
               <!-- QC#55180 2020/01/14 MOD START -->
               <!-- AND  A.AR_TRX_TP_CD  &lt;&gt; #arTrxTpCd# -->
               AND  A.AR_TRX_TP_CD NOT IN (#rcp#, #acc#)
               <!-- QC#55180 2020/01/14 MOD END -->
    </statement>

    <statement id="getArTrxBal" parameterClass="Map">
     SELECT
               A.PAYER_CUST_CD
              ,A.DEAL_RMNG_BAL_GRS_AMT
              ,A.AR_TRX_TP_CD
              ,A.AR_TRX_BAL_PK
              ,A.EZUPTIME
              ,A.EZUPTIMEZONE
     FROM
               AR_TRX_BAL  A
     WHERE
                    A.GLBL_CMPY_CD  =  #glblCmpyCd#
               AND  A.EZCANCELFLAG  =  '0'
               AND  A.AR_TRX_NUM    =  #inv30Num#
               <!-- QC#55180 2020/01/14 MOD START -->
               <!-- AND  A.AR_TRX_TP_CD  &lt;&gt; #arTrxTpCd# -->
               AND  A.AR_TRX_TP_CD NOT IN (#rcp#, #acc#)
               <!-- QC#55180 2020/01/14 MOD END -->
    </statement>

    <statement id="getArEdiInvNumEdit" parameterClass="Map">
     SELECT
               A.INV_NUM_EDIT_PROC_TP_CD
              ,A.ADD_CHAR_TXT
              ,A.DEL_CHAR_CNT
     FROM
               AR_EDI_INV_NUM_EDIT  A
     WHERE
                    A.GLBL_CMPY_CD  =  #glblCmpyCd#
               AND  A.EZCANCELFLAG  =  '0'
    </statement>

    <statement id="getArCustNmConvDict" parameterClass="Map">
     SELECT
               A.BILL_TO_CUST_CD
     FROM
               AR_CUST_NM_CONV_DICT  A
     WHERE
                    A.GLBL_CMPY_CD     =  #glblCmpyCd#
               AND  A.EDI_RCV_CUST_NM  =  #ediRcvCustNm#
               AND  A.EZCANCELFLAG     =  '0'
    </statement>

    <statement id="getCustCrPrfl" parameterClass="Map">
     SELECT
               A.BILL_TO_CUST_CD
      <!--    ,A.CR_MGR_PSN_CD DEL 2017/01/04 [QC#16867]-->
              ,A.CCY_CD
              ,A.CR_ANLST_GRP_TOC_CD
     FROM
               CUST_CR_PRFL  A
     WHERE
                    A.GLBL_CMPY_CD     =  #glblCmpyCd#
               AND  A.BILL_TO_CUST_CD  =  #billToCustCd#
               AND  A.EZCANCELFLAG     =  '0'
    </statement>
    
    <statement id="getAcctCrPrfl" parameterClass="Map">
     SELECT
         <!--  A.CR_MGR_PSN_CD  DEL 2017/01/04 [QC#16867]-->
               A.CCY_CD
              ,A.CR_ANLST_GRP_TOC_CD
     FROM
               DS_ACCT_CR_PRFL  A
     WHERE
                    A.GLBL_CMPY_CD     =  #glblCmpyCd#
               AND  A.DS_ACCT_NUM      =  #billToCustCd#
               AND  A.EZCANCELFLAG     =  '0'
    </statement>
    

	<statement id="getArCcyCtrl" parameterClass="Map">
     SELECT
               A.AFT_DECL_PNT_DIGIT_NUM
     FROM
               AR_CCY_CTRL  A
     WHERE
                    A.GLBL_CMPY_CD  =  #glblCmpyCd#
               AND  A.CCY_CD        =  #ccyCd#
	</statement>
	
	<statement id="getArRcptRcvCnt" parameterClass="Map">
     SELECT
               COUNT(A.RCV_HDR_NUM) RCV_HDR_CNT
     FROM
               AR_RCPT_RCV_WRK  A
     WHERE 
                    A.GLBL_CMPY_CD  =  #glblCmpyCd#
               AND  A.RCV_HDR_NUM   =  #rcvHdrNum#
               AND  A.RCV_SQ_PK     =  #rcvSqPk#
               AND  A.EZCANCELFLAG  =  '0'
    </statement>
    
    <statement id="getArRctRcvWrkCsvCnt" parameterClass="Map">
     SELECT
               COUNT(DISTINCT(A.UPLD_AR_CUST_REF_NUM)) INV_NUM_CNT
     FROM
               AR_RCPT_RCV_WRK  A
     WHERE 
                    A.GLBL_CMPY_CD  =  #glblCmpyCd#
               AND  A.RCV_HDR_NUM   =  #rcvHdrNum#
               AND  A.RCV_SQ_PK     =  #rcvSqPk#
               AND  A.EZCANCELFLAG  =  '0'
    </statement>
    
    <statement id="getArRctRcvWrkEdiCnt" parameterClass="Map">
     SELECT
               COUNT(DISTINCT(A.INV_30_NUM)) INV_NUM_CNT
     FROM
               AR_RCPT_RCV_WRK  A
     WHERE 
                    A.GLBL_CMPY_CD  =  #glblCmpyCd#
               AND  A.RCV_HDR_NUM   =  #rcvHdrNum#
               AND  A.RCV_SQ_PK     =  #rcvSqPk#
               AND  A.EZCANCELFLAG  =  '0'
    </statement>

    <statement id="getArRcptRcvWrkSqNumList" parameterClass="Map">
     SELECT    A.RCPT_BAT_SQ_NUM
     FROM
               AR_RCPT_RCV_WRK  A
     WHERE 
                    A.GLBL_CMPY_CD  =  #glblCmpyCd#
               AND  A.RCV_FUNC_ID   =  #rcvFuncId#
               AND  A.RCV_STS_CD    =  #rcvStsCd#
               AND  A.EZCANCELFLAG  =  '0'
     GROUP BY
                    A.RCPT_BAT_SQ_NUM
    </statement>
</sqlMap>
