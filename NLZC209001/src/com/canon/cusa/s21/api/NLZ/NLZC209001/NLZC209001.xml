<?xml version="1.0" encoding="UTF-8"?>
<sqlMap namespace="NLZC209001">
    <!-- ==== Type Aliases ==== -->
    <!-- ==== Result Mapping ==== -->

    <statement id="getScIcCcSwItInfo" parameterClass="Map">
     SELECT
               R_HDR.RWS_NUM
              ,R_HDR.WH_CD
              ,R_HDR.SCE_ORD_TP_CD
              ,R_HDR.RWS_REF_NUM
              ,R_HDR.TRX_ORD_NUM
              ,R_HDR.SYS_SRC_CD
              ,R_HDR.FROM_LOC_CD
              ,R_DTL.RWS_DTL_LINE_NUM
           -- ,R_DTL.INVTY_STK_STS_CD
              ,R_DTL.RWS_QTY
              ,R_DTL.RWS_PUT_AWAY_QTY
              ,R_DTL.MDSE_CD
              ,R_DTL.TRX_LINE_NUM
              ,R_DTL.RWS_STS_CD
              ,S_DTL.SO_NUM
              ,S_DTL.SO_SLP_NUM
              ,S_DTL.TRX_HDR_NUM           AS INVTY_ORD_NUM
              ,S_DTL.TRX_LINE_NUM          AS INVTY_ORD_LINE_NUM
              ,S_DTL.TRX_HDR_NUM           AS INVTY_TRX_SLP_NUM
              ,R_DTL.INVTY_LOC_CD
              ,R_DTL.SHIP_FROM_INVTY_LOC_CD
              ,R_DTL.PRCH_REQ_NUM
              ,R_DTL.PRCH_REQ_LINE_NUM
              ,R_DTL.PRCH_REQ_LINE_SUB_NUM
              ,NVL(WRK.INVTY_STK_STS_CD , R_DTL.INVTY_STK_STS_CD) AS INVTY_STK_STS_CD
              ,WRK.RWS_STK_QTY
              ,WRK.WRK_TRX_ID
              ,WRK.SQ_ID
     FROM
               RWS_HDR          R_HDR
              ,RWS_DTL          R_DTL
              ,SHPG_ORD_DTL     S_DTL
              ,RWS_PUT_AWAY_WRK WRK
     WHERE
                    R_HDR.GLBL_CMPY_CD     =  #glblCmpyCd#
               AND  R_HDR.RWS_NUM          =  #rwsNum#
               AND  R_HDR.EZCANCELFLAG     =  '0'
               AND  R_HDR.GLBL_CMPY_CD     =  R_DTL.GLBL_CMPY_CD
               AND  R_HDR.RWS_NUM          =  R_DTL.RWS_NUM
               AND  R_DTL.EZCANCELFLAG     =  '0'
               AND  R_HDR.GLBL_CMPY_CD     =  S_DTL.GLBL_CMPY_CD
               AND  R_HDR.TRX_ORD_NUM      =  S_DTL.SO_NUM
               AND  R_DTL.TRX_LINE_NUM     =  S_DTL.SO_SLP_NUM
               AND  S_DTL.EZCANCELFLAG     =  '0'
               AND  R_DTL.RWS_NUM          =  WRK.RWS_NUM(+)
               AND  R_DTL.RWS_DTL_LINE_NUM =  WRK.RWS_DTL_LINE_NUM(+)
               AND  R_DTL.GLBL_CMPY_CD     =  WRK.GLBL_CMPY_CD(+)
               AND  WRK.EZCANCELFLAG(+)    =  '0'
     ORDER BY
                    R_DTL.RWS_DTL_LINE_NUM
    </statement>

    <statement id="getRmInfoRm" parameterClass="Map">
        SELECT
             R_HDR.RWS_NUM
            ,R_HDR.WH_CD
            ,R_HDR.SCE_ORD_TP_CD
            ,R_HDR.RWS_REF_NUM
            ,R_HDR.SYS_SRC_CD
            ,R_HDR.TRX_ORD_NUM
            ,R_DTL.RWS_DTL_LINE_NUM
          --,R_DTL.INVTY_STK_STS_CD
            ,R_DTL.RWS_QTY
            ,R_DTL.RWS_PUT_AWAY_QTY
            ,R_DTL.MDSE_CD
            ,R_DTL.TRX_LINE_NUM
            ,R_DTL.RWS_STS_CD
            ,R_DTL.INVTY_LOC_CD   AS INVTY_LOC_CD
            ,S_DTL.SO_NUM
            ,S_DTL.SO_SLP_NUM
            ,S_DTL.TRX_HDR_NUM    AS INVTY_TRX_SLP_NUM
            ,S_DTL.TRX_LINE_NUM   AS TRX_LINE_NUM_SOD
            ,NVL(WRK.INVTY_STK_STS_CD , R_DTL.INVTY_STK_STS_CD) AS INVTY_STK_STS_CD
            ,WRK.RWS_STK_QTY
            ,WRK.WRK_TRX_ID
            ,WRK.SQ_ID
        FROM
            RWS_HDR          R_HDR
           ,RWS_DTL          R_DTL
           ,SHPG_ORD_DTL     S_DTL
           ,RWS_PUT_AWAY_WRK WRK
        WHERE
            R_HDR.GLBL_CMPY_CD     = #glblCmpyCd#
        AND R_HDR.RWS_NUM          = #rwsNum#
        AND R_HDR.EZCANCELFLAG     = '0'
        AND R_HDR.GLBL_CMPY_CD     = R_DTL.GLBL_CMPY_CD
        AND R_HDR.RWS_NUM          = R_DTL.RWS_NUM
        AND R_DTL.EZCANCELFLAG     = '0'
        AND R_HDR.GLBL_CMPY_CD     = S_DTL.GLBL_CMPY_CD
        AND R_HDR.IMPT_INV_NUM     = S_DTL.SO_NUM
        AND R_DTL.TRX_LINE_NUM     = S_DTL.SO_SLP_NUM
        AND S_DTL.EZCANCELFLAG     = '0'
        AND R_DTL.RWS_NUM          = WRK.RWS_NUM(+)
        AND R_DTL.RWS_DTL_LINE_NUM = WRK.RWS_DTL_LINE_NUM(+)
        AND R_DTL.GLBL_CMPY_CD     = WRK.GLBL_CMPY_CD(+)
        AND WRK.EZCANCELFLAG(+)    = '0'
        ORDER BY
            R_DTL.RWS_DTL_LINE_NUM
    </statement>

    <statement id="getRmInfoRu" parameterClass="Map">
        SELECT DISTINCT
             R_HDR.RWS_NUM
            ,R_HDR.WH_CD
            ,R_HDR.SCE_ORD_TP_CD
            ,R_HDR.RWS_REF_NUM
            ,R_HDR.SYS_SRC_CD
            ,R_HDR.TRX_ORD_NUM
            ,R_DTL.RWS_DTL_LINE_NUM
        --  ,R_DTL.INVTY_STK_STS_CD
            ,R_DTL.RWS_QTY
            ,R_DTL.RWS_PUT_AWAY_QTY
            ,R_DTL.MDSE_CD
            ,R_DTL.TRX_LINE_NUM
            ,R_DTL.RWS_STS_CD
            ,R_DTL.INVTY_LOC_CD
            ,S_DTL.SO_NUM
            ,S_DTL.SO_SLP_NUM
            ,S_DTL.TRX_HDR_NUM    AS INVTY_TRX_SLP_NUM
            ,NVL(WRK.INVTY_STK_STS_CD , R_DTL.INVTY_STK_STS_CD) AS INVTY_STK_STS_CD
            ,WRK.RWS_STK_QTY
            ,WRK.WRK_TRX_ID
            ,WRK.SQ_ID
        FROM
            RWS_HDR          R_HDR
           ,RWS_DTL          R_DTL
           ,SHPG_ORD         S_HDR
           ,SHPG_ORD_DTL     S_DTL
           ,RWS_PUT_AWAY_WRK WRK
        WHERE
            R_HDR.GLBL_CMPY_CD     = #glblCmpyCd#
        AND R_HDR.RWS_NUM          = #rwsNum#
        AND R_HDR.SCE_ORD_TP_CD    = #remanUsage#
        AND R_HDR.EZCANCELFLAG     = '0'
        AND R_HDR.GLBL_CMPY_CD     = R_DTL.GLBL_CMPY_CD
        AND R_HDR.RWS_NUM          = R_DTL.RWS_NUM
        AND R_DTL.EZCANCELFLAG     = '0'
        AND R_HDR.GLBL_CMPY_CD     = S_DTL.GLBL_CMPY_CD
        AND R_HDR.SRC_ORD_NUM      = S_DTL.TRX_HDR_NUM
        AND R_DTL.MDSE_CD          = S_DTL.MDSE_CD
        AND S_DTL.EZCANCELFLAG     = '0'
        AND R_HDR.SCE_ORD_TP_CD    = S_HDR.SCE_ORD_TP_CD
        AND S_DTL.GLBL_CMPY_CD     = S_HDR.GLBL_CMPY_CD
        AND S_DTL.SO_NUM           = S_HDR.SO_NUM
        AND S_HDR.EZCANCELFLAG     = '0'
        AND R_DTL.RWS_NUM          = WRK.RWS_NUM(+)
        AND R_DTL.RWS_DTL_LINE_NUM = WRK.RWS_DTL_LINE_NUM(+)
        AND R_DTL.GLBL_CMPY_CD     = WRK.GLBL_CMPY_CD(+)
        AND WRK.EZCANCELFLAG(+)    = '0'
        ORDER BY
            R_DTL.RWS_DTL_LINE_NUM
    </statement>

    <statement id="getRmInfo" parameterClass="Map">
        SELECT
             R_HDR.RWS_NUM
            ,R_HDR.WH_CD
            ,R_HDR.SCE_ORD_TP_CD
            ,R_HDR.RWS_REF_NUM
            ,R_HDR.SYS_SRC_CD
            ,R_HDR.TRX_ORD_NUM
            ,R_DTL.RWS_DTL_LINE_NUM
        --  ,R_DTL.INVTY_STK_STS_CD
            ,R_DTL.RWS_QTY
            ,R_DTL.RWS_PUT_AWAY_QTY
            ,R_DTL.MDSE_CD
            ,R_DTL.TRX_LINE_NUM
            ,R_DTL.RWS_STS_CD
            ,R_DTL.INVTY_LOC_CD
            ,S_DTL.SO_NUM
            ,S_DTL.SO_SLP_NUM
            ,S_DTL.TRX_HDR_NUM    AS INVTY_TRX_SLP_NUM
            ,NVL(WRK.INVTY_STK_STS_CD , R_DTL.INVTY_STK_STS_CD) AS INVTY_STK_STS_CD
            ,WRK.RWS_STK_QTY
            ,WRK.WRK_TRX_ID
            ,WRK.SQ_ID
        FROM
            RWS_HDR          R_HDR
           ,RWS_DTL          R_DTL
           ,SHPG_ORD_DTL     S_DTL
           ,RWS_PUT_AWAY_WRK WRK
        WHERE
            R_HDR.GLBL_CMPY_CD     = #glblCmpyCd#
        AND R_HDR.RWS_NUM          = #rwsNum#
        AND R_HDR.EZCANCELFLAG     = '0'
        AND R_HDR.GLBL_CMPY_CD     = R_DTL.GLBL_CMPY_CD
        AND R_HDR.RWS_NUM          = R_DTL.RWS_NUM
        AND R_DTL.EZCANCELFLAG     = '0'
        AND R_HDR.GLBL_CMPY_CD     = S_DTL.GLBL_CMPY_CD
        AND R_HDR.TRX_ORD_NUM      = S_DTL.SO_NUM
        AND R_DTL.TRX_LINE_NUM     = S_DTL.SO_SLP_NUM
        AND S_DTL.EZCANCELFLAG     = '0'
        AND R_DTL.RWS_NUM          = WRK.RWS_NUM(+)
        AND R_DTL.RWS_DTL_LINE_NUM = WRK.RWS_DTL_LINE_NUM(+)
        AND R_DTL.GLBL_CMPY_CD     = WRK.GLBL_CMPY_CD(+)
        AND WRK.EZCANCELFLAG(+)    = '0'
        ORDER BY
            R_DTL.RWS_DTL_LINE_NUM
    </statement>

    <statement id="getKtKuInfo" parameterClass="Map">
        SELECT
            R_HDR.RWS_NUM
           ,R_HDR.WH_CD
           ,R_HDR.SCE_ORD_TP_CD
           ,R_HDR.RWS_REF_NUM
           ,R_HDR.TRX_ORD_NUM
           ,R_HDR.SYS_SRC_CD
           ,R_HDR.FROM_LOC_CD
           ,R_DTL.RWS_DTL_LINE_NUM
        -- ,R_DTL.INVTY_STK_STS_CD
           ,R_DTL.RWS_QTY
           ,R_DTL.RWS_PUT_AWAY_QTY
           ,R_DTL.MDSE_CD
           ,R_DTL.TRX_LINE_NUM
           ,R_DTL.RWS_STS_CD
           ,S_ORD.TRX_HDR_NUM              AS WRK_ORD_NUM
           ,R_HDR.TRX_SRC_TP_CD
           ,R_DTL.INVTY_LOC_CD
           ,R_DTL.SHIP_FROM_INVTY_LOC_CD
           ,NVL(WRK.INVTY_STK_STS_CD , R_DTL.INVTY_STK_STS_CD) AS INVTY_STK_STS_CD
           ,WRK.RWS_STK_QTY
           ,WRK.WRK_TRX_ID
           ,WRK.SQ_ID
        FROM
            RWS_HDR          R_HDR
           ,RWS_DTL          R_DTL
           ,PO_RCV_HDR       P_HDR
           ,PO_RCV_DTL       P_DTL
           ,SHPG_ORD         S_ORD
           ,RWS_PUT_AWAY_WRK WRK
        WHERE
            R_HDR.GLBL_CMPY_CD        =  #glblCmpyCd#
        AND R_HDR.RWS_NUM             =  #rwsNum#
        AND R_HDR.EZCANCELFLAG        =  '0'
        AND R_HDR.GLBL_CMPY_CD        =  R_DTL.GLBL_CMPY_CD
        AND R_HDR.RWS_NUM             =  R_DTL.RWS_NUM
        AND R_DTL.EZCANCELFLAG        =  '0'
        AND R_HDR.GLBL_CMPY_CD        =  P_HDR.GLBL_CMPY_CD
        AND R_HDR.TRX_ORD_NUM         =  P_HDR.PO_RCV_NUM
        AND P_HDR.EZCANCELFLAG        =  '0'
        AND R_HDR.GLBL_CMPY_CD        =  P_DTL.GLBL_CMPY_CD
        AND R_HDR.TRX_ORD_NUM         =  P_DTL.PO_RCV_NUM
        AND R_DTL.TRX_LINE_NUM        =  P_DTL.PO_RCV_LINE_NUM
        AND P_DTL.EZCANCELFLAG        =  '0'
        AND P_HDR.GLBL_CMPY_CD        = S_ORD.GLBL_CMPY_CD
        AND P_HDR.PO_RCV_TRX_HDR_NUM  = S_ORD.SO_NUM
        AND S_ORD.EZCANCELFLAG        = '0'
        AND R_DTL.RWS_NUM             = WRK.RWS_NUM(+)
        AND R_DTL.RWS_DTL_LINE_NUM    = WRK.RWS_DTL_LINE_NUM(+)
        AND R_DTL.GLBL_CMPY_CD        = WRK.GLBL_CMPY_CD(+)
        AND WRK.EZCANCELFLAG(+)       = '0'
        ORDER BY
            R_DTL.RWS_DTL_LINE_NUM
    </statement>

    <statement id="getKcInfo" parameterClass="Map">
        SELECT
            R_HDR.RWS_NUM
           ,R_HDR.WH_CD
           ,R_HDR.SCE_ORD_TP_CD
           ,R_HDR.RWS_REF_NUM
           ,R_HDR.TRX_ORD_NUM
           ,R_HDR.SYS_SRC_CD
           ,R_HDR.FROM_LOC_CD
           ,R_DTL.RWS_DTL_LINE_NUM
        -- ,R_DTL.INVTY_STK_STS_CD
           ,R_DTL.RWS_QTY
           ,R_DTL.RWS_PUT_AWAY_QTY
           ,R_DTL.MDSE_CD
           ,R_DTL.TRX_LINE_NUM
           ,R_DTL.RWS_STS_CD
           ,S_ORD.TRX_HDR_NUM              AS WRK_ORD_NUM
           ,S_DTL.TRX_LINE_NUM             AS WRK_ORD_LINE_NUM
           ,R_HDR.TRX_SRC_TP_CD
           ,R_DTL.INVTY_LOC_CD
           ,R_DTL.SHIP_FROM_INVTY_LOC_CD
           ,NVL(WRK.INVTY_STK_STS_CD , R_DTL.INVTY_STK_STS_CD) AS INVTY_STK_STS_CD
           ,WRK.RWS_STK_QTY
           ,WRK.WRK_TRX_ID
           ,WRK.SQ_ID
        FROM
            RWS_HDR          R_HDR
           ,RWS_DTL          R_DTL
           ,PO_RCV_HDR       P_HDR
           ,PO_RCV_DTL       P_DTL
           ,SHPG_ORD         S_ORD
           ,SHPG_ORD_DTL     S_DTL
           ,RWS_PUT_AWAY_WRK WRK
        WHERE
            R_HDR.GLBL_CMPY_CD        =  #glblCmpyCd#
        AND R_HDR.RWS_NUM             =  #rwsNum#
        AND R_HDR.EZCANCELFLAG        =  '0'
        AND R_HDR.GLBL_CMPY_CD        =  R_DTL.GLBL_CMPY_CD
        AND R_HDR.RWS_NUM             =  R_DTL.RWS_NUM
        AND R_DTL.EZCANCELFLAG        =  '0'
        AND R_HDR.GLBL_CMPY_CD        =  P_HDR.GLBL_CMPY_CD
        AND R_HDR.TRX_ORD_NUM         =  P_HDR.PO_RCV_NUM
        AND P_HDR.EZCANCELFLAG        =  '0'
        AND R_HDR.GLBL_CMPY_CD        =  P_DTL.GLBL_CMPY_CD
        AND R_HDR.TRX_ORD_NUM         =  P_DTL.PO_RCV_NUM
        AND R_DTL.TRX_LINE_NUM        =  P_DTL.PO_RCV_LINE_NUM
        AND P_DTL.EZCANCELFLAG        =  '0'
        AND P_HDR.GLBL_CMPY_CD        =  S_ORD.GLBL_CMPY_CD
        AND P_HDR.PO_RCV_TRX_HDR_NUM  =  S_ORD.SO_NUM
        AND S_ORD.EZCANCELFLAG        =  '0'
        AND S_ORD.GLBL_CMPY_CD        =  S_DTL.GLBL_CMPY_CD
        AND S_ORD.SO_NUM              =  S_DTL.SO_NUM
        AND R_DTL.PO_RCV_TRX_LINE_NUM =  S_DTL.SO_SLP_NUM
        AND S_DTL.EZCANCELFLAG        =  '0'
        AND R_DTL.RWS_NUM             =  WRK.RWS_NUM(+)
        AND R_DTL.RWS_DTL_LINE_NUM    =  WRK.RWS_DTL_LINE_NUM(+)
        AND R_DTL.GLBL_CMPY_CD        =  WRK.GLBL_CMPY_CD(+)
        AND WRK.EZCANCELFLAG(+)       = '0'
        ORDER BY
            R_DTL.RWS_DTL_LINE_NUM
    </statement>

    <statement id="getShipMdseKtKuKcInfoList" parameterClass="Map" resultClass="Map">
        SELECT
            RH.RWS_NUM
           ,RH.RWS_REF_NUM
           ,RH.SYS_SRC_CD
           ,RH.TRX_ORD_NUM
           ,RD.TRX_LINE_NUM
           ,RD.RWS_DTL_LINE_NUM
           ,SO.TRX_HDR_NUM   AS WRK_ORD_NUM
           ,SOD.TRX_LINE_NUM AS WRK_ORD_LINE_NUM
           ,SOD.MDSE_CD      AS SHIP_MDSE_CD
           ,SOD.FROM_STK_STS_CD
           ,SOD.SHIP_QTY
           ,SOD.TO_INVTY_LOC_CD
           ,WO.DS_WRK_ORD_TP_CD
        FROM
            RWS_HDR         RH
           ,RWS_DTL         RD
           ,SHPG_ORD        SO
           ,SHPG_ORD_DTL    SOD
           ,WRK_ORD         WO
        WHERE
            RH.GLBL_CMPY_CD        = #glblCmpyCd#
        AND RH.RWS_NUM             = #rwsNum#
        AND RH.EZCANCELFLAG        = '0'
        AND RH.GLBL_CMPY_CD        = RD.GLBL_CMPY_CD
        AND RH.RWS_NUM             = RD.RWS_NUM
        <isNotEqual property="sceOrdTpCd" compareValue="KC">
        AND RD.RWS_DTL_LINE_NUM    = '001'
        </isNotEqual>
        AND RD.EZCANCELFLAG        = '0'
        AND RH.GLBL_CMPY_CD        = SO.GLBL_CMPY_CD
        AND RH.PO_RCV_TRX_HDR_NUM  = SO.SO_NUM
        AND SO.EZCANCELFLAG        = '0'
        AND SO.GLBL_CMPY_CD        = SOD.GLBL_CMPY_CD
        AND SO.SO_NUM              = SOD.SO_NUM
        <isEqual property="sceOrdTpCd" compareValue="KC">
        AND RD.PO_RCV_TRX_LINE_NUM = SOD.SO_SLP_NUM
        </isEqual>
        AND SOD.EZCANCELFLAG       = '0'
        AND SO.GLBL_CMPY_CD        = WO.GLBL_CMPY_CD
        AND SO.TRX_HDR_NUM         = WO.WRK_ORD_NUM
        AND WO.EZCANCELFLAG       = '0'
        ORDER BY
            SO.TRX_HDR_NUM
           ,SOD.TRX_LINE_NUM
    </statement>

    <statement id="getRpInfo" parameterClass="Map">
    <!-- QC#21989 -->
     SELECT
               R_HDR.RWS_NUM
              ,R_HDR.WH_CD
              ,R_HDR.SCE_ORD_TP_CD
              ,R_HDR.RWS_REF_NUM
              ,R_HDR.TRX_ORD_NUM
              ,R_HDR.SYS_SRC_CD
              ,R_HDR.FROM_LOC_CD
              ,R_DTL.RWS_DTL_LINE_NUM
            --,R_DTL.INVTY_STK_STS_CD
              ,R_DTL.RWS_QTY
              ,R_DTL.RWS_PUT_AWAY_QTY
              ,R_DTL.MDSE_CD
              ,R_DTL.TRX_LINE_NUM
              ,R_DTL.RWS_STS_CD
              ,R_DTL.INVTY_LOC_CD
              ,R_DTL.SHIP_FROM_INVTY_LOC_CD
              ,R_HDR.PO_RCV_TRX_HDR_NUM       AS PO_ORD_NUM
              ,R_DTL.PO_RCV_TRX_LINE_NUM      AS PO_ORD_DTL_LINE_NUM
              ,PO_HDR.VND_CD
              ,NVL(WRK.INVTY_STK_STS_CD , R_DTL.INVTY_STK_STS_CD) AS INVTY_STK_STS_CD
              ,WRK.RWS_STK_QTY
              ,WRK.WRK_TRX_ID
              ,WRK.SQ_ID
              ,R_DTL.RWS_PUT_AWAY_QTY
     FROM
               RWS_HDR          R_HDR
              ,RWS_DTL          R_DTL
              ,PO               PO_HDR
              ,RWS_PUT_AWAY_WRK WRK
     WHERE
               R_HDR.GLBL_CMPY_CD        =  #glblCmpyCd#
       AND     R_HDR.RWS_NUM             =  #rwsNum#
       AND     R_HDR.EZCANCELFLAG        =  '0'
       AND     R_HDR.GLBL_CMPY_CD        =  R_DTL.GLBL_CMPY_CD
       AND     R_HDR.RWS_NUM             =  R_DTL.RWS_NUM
       AND     R_DTL.EZCANCELFLAG        =  '0'
       AND     R_HDR.GLBL_CMPY_CD        =  PO_HDR.GLBL_CMPY_CD
       AND     R_HDR.PO_RCV_TRX_HDR_NUM  =  PO_HDR.PO_ORD_NUM
       AND     PO_HDR.EZCANCELFLAG       =  '0'
       AND     R_DTL.RWS_NUM             =  WRK.RWS_NUM(+)
       AND     R_DTL.RWS_DTL_LINE_NUM    =  WRK.RWS_DTL_LINE_NUM(+)
       AND     R_DTL.GLBL_CMPY_CD        =  WRK.GLBL_CMPY_CD(+)
       AND     WRK.EZCANCELFLAG(+)       = '0'
     ORDER BY
               R_DTL.RWS_DTL_LINE_NUM
    </statement>

    <statement id="getShipMdseRpInfoList" parameterClass="Map" resultClass="Map">
     SELECT
               R_HDR.RWS_NUM
              ,R_HDR.RWS_REF_NUM
              ,R_DTL.RWS_DTL_LINE_NUM
              ,R_HDR.SYS_SRC_CD
              ,R_HDR.TRX_ORD_NUM
              ,R_DTL.TRX_LINE_NUM
              ,S_DTL.SO_NUM
              ,S_DTL.SO_SLP_NUM
              ,S_DTL.MDSE_CD                  AS SHIP_MDSE_CD
              ,S_DTL.TRX_HDR_NUM              AS INVTY_ORD_NUM
              ,S_DTL.TRX_LINE_NUM             AS INVTY_ORD_LINE_NUM
              ,S_DTL.FROM_STK_STS_CD
              ,S_DTL.SHIP_QTY
              ,S_DTL.TO_INVTY_LOC_CD
              ,PR_DTL.PO_ORD_NUM
              ,PR_DTL.PO_ORD_DTL_LINE_NUM
              ,PO_HDR.VND_CD
      FROM
               RWS_HDR          R_HDR
              ,RWS_DTL          R_DTL
              ,PRCH_REQ_DTL     PR_DTL
              ,SHPG_ORD_DTL     S_DTL
              ,PO               PO_HDR
    WHERE
               R_HDR.GLBL_CMPY_CD           =  #glblCmpyCd#
       AND     R_HDR.RWS_NUM                =  #rwsNum#
       AND     R_HDR.EZCANCELFLAG           =  '0'
       AND     R_HDR.GLBL_CMPY_CD           =  R_DTL.GLBL_CMPY_CD
       AND     R_HDR.RWS_NUM                =  R_DTL.RWS_NUM
       AND     R_DTL.EZCANCELFLAG           =  '0'
       AND     R_HDR.GLBL_CMPY_CD           =  PR_DTL.GLBL_CMPY_CD
       AND     R_HDR.PO_RCV_TRX_HDR_NUM     =  PR_DTL.PO_ORD_NUM
       AND     R_DTL.PO_RCV_TRX_LINE_NUM    =  PR_DTL.PO_ORD_DTL_LINE_NUM
       AND     R_DTL.RWS_DTL_LINE_NUM       =  #rwsDtlLineNum#
       AND     PR_DTL.EZCANCELFLAG          =  '0'
       AND     PR_DTL.GLBL_CMPY_CD          =  S_DTL.GLBL_CMPY_CD
       AND     PR_DTL.PRCH_REQ_NUM          =  S_DTL.PRCH_REQ_NUM
       AND     PR_DTL.PRCH_REQ_LINE_NUM     =  S_DTL.PRCH_REQ_LINE_NUM
       AND     PR_DTL.PRCH_REQ_LINE_SUB_NUM =  S_DTL.PRCH_REQ_LINE_SUB_NUM
       AND     S_DTL.EZCANCELFLAG          =  '0'
       AND     PR_DTL.GLBL_CMPY_CD          =  PO_HDR.GLBL_CMPY_CD
       AND     PR_DTL.PO_ORD_NUM            =  PO_HDR.PO_ORD_NUM
       AND     PO_HDR.EZCANCELFLAG          =  '0'
       AND NOT EXISTS(
               SELECT
                   1
               FROM
                   INVTY_TRX IT
               WHERE
                   IT.GLBL_CMPY_CD = PR_DTL.GLBL_CMPY_CD
               AND IT.PO_ORD_NUM   = PR_DTL.PO_ORD_NUM
               AND IT.PO_ORD_DTL_LINE_NUM   = PR_DTL.PO_ORD_DTL_LINE_NUM
               AND IT.TRX_CD       = #adjustment#
               AND IT.TRX_RSN_CD   = #trxRsnCd15#
               AND IT.LOC_STS_CD   = #wipSubCon#
               AND IT.EZCANCELFLAG = '0'
       )
     ORDER BY
               S_DTL.SO_NUM
              ,S_DTL.SO_SLP_NUM
    </statement>

    <statement id="getBbInfo" parameterClass="Map">
     SELECT
               R_HDR.RWS_NUM
              ,R_HDR.WH_CD
              ,R_HDR.SCE_ORD_TP_CD
              ,R_HDR.RWS_REF_NUM
              ,R_HDR.TRX_ORD_NUM
              ,R_HDR.SYS_SRC_CD
              ,R_HDR.FROM_LOC_CD
              ,R_DTL.RWS_DTL_LINE_NUM
            --,R_DTL.INVTY_STK_STS_CD
              ,R_DTL.RWS_QTY
              ,R_DTL.RWS_PUT_AWAY_QTY
              ,R_DTL.MDSE_CD
              ,R_DTL.TRX_LINE_NUM
              ,R_DTL.RWS_STS_CD
              ,P_HDR.PO_RCV_TRX_HDR_NUM       AS PO_ORD_NUM
              ,P_DTL.PO_RCV_TRX_LINE_NUM      AS PO_ORD_DTL_LINE_NUM
              ,R_DTL.INVTY_LOC_CD
              ,S_DTL.SO_NUM
              ,S_DTL.SO_SLP_NUM
              ,PO_HDR.VND_CD
              ,NVL(WRK.INVTY_STK_STS_CD , R_DTL.INVTY_STK_STS_CD) AS INVTY_STK_STS_CD
              ,WRK.RWS_STK_QTY
              ,WRK.WRK_TRX_ID
              ,WRK.SQ_ID
     FROM
               RWS_HDR           R_HDR
              ,RWS_DTL           R_DTL
              ,PO_RCV_HDR        P_HDR
              ,PO_RCV_DTL        P_DTL
              ,SHPG_ORD_DTL      S_DTL
              ,PO                PO_HDR
              ,RWS_PUT_AWAY_WRK  WRK
     WHERE
                    R_HDR.GLBL_CMPY_CD        =  #glblCmpyCd#
               AND  R_HDR.RWS_NUM             =  #rwsNum#
               AND  R_HDR.EZCANCELFLAG        =  '0'
               AND  R_HDR.GLBL_CMPY_CD        =  R_DTL.GLBL_CMPY_CD
               AND  R_HDR.RWS_NUM             =  R_DTL.RWS_NUM
               AND  R_DTL.EZCANCELFLAG        =  '0'
               AND  R_HDR.GLBL_CMPY_CD        =  P_HDR.GLBL_CMPY_CD
               AND  R_HDR.TRX_ORD_NUM         =  P_HDR.PO_RCV_NUM
               AND  P_HDR.EZCANCELFLAG        =  '0'
               AND  R_HDR.GLBL_CMPY_CD        =  P_DTL.GLBL_CMPY_CD
               AND  R_HDR.TRX_ORD_NUM         =  P_DTL.PO_RCV_NUM
               AND  R_DTL.TRX_LINE_NUM        =  P_DTL.PO_RCV_LINE_NUM
               AND  P_DTL.EZCANCELFLAG        =  '0'
               AND  P_HDR.GLBL_CMPY_CD        =  S_DTL.GLBL_CMPY_CD
               AND  P_HDR.PO_RCV_TRX_HDR_NUM  =  S_DTL.TRX_HDR_NUM
               AND  P_DTL.PO_RCV_TRX_LINE_NUM =  S_DTL.TRX_LINE_NUM
               AND  S_DTL.EZCANCELFLAG        =  '0'
               AND  P_HDR.GLBL_CMPY_CD        =  PO_HDR.GLBL_CMPY_CD
               AND  P_HDR.PO_RCV_TRX_HDR_NUM  =  PO_HDR.PO_ORD_NUM
               AND  PO_HDR.EZCANCELFLAG       =  '0'
               AND  R_DTL.RWS_NUM             =  WRK.RWS_NUM(+)
               AND  R_DTL.RWS_DTL_LINE_NUM    =  WRK.RWS_DTL_LINE_NUM(+)
               AND  R_DTL.GLBL_CMPY_CD        =  WRK.GLBL_CMPY_CD(+)
               AND  WRK.EZCANCELFLAG(+)       = '0'
     ORDER BY
                    R_DTL.RWS_DTL_LINE_NUM
    </statement>

    <statement id="getDpDgDnInfo" parameterClass="Map">
     SELECT
               R_HDR.RWS_NUM
              ,R_HDR.WH_CD
              ,R_HDR.SCE_ORD_TP_CD
              ,R_HDR.RWS_REF_NUM
              ,R_HDR.TRX_ORD_NUM
              ,R_HDR.SYS_SRC_CD
              ,R_HDR.FROM_LOC_CD
              ,R_DTL.RWS_DTL_LINE_NUM
           -- ,R_DTL.INVTY_STK_STS_CD
              ,R_DTL.RWS_QTY
              ,R_DTL.RWS_PUT_AWAY_QTY
              ,R_DTL.MDSE_CD
              ,R_DTL.TRX_LINE_NUM
              ,R_DTL.RWS_STS_CD
              ,P_HDR.PO_RCV_TRX_HDR_NUM       AS PO_ORD_NUM
              ,P_DTL.PO_RCV_TRX_LINE_NUM      AS PO_ORD_DTL_LINE_NUM
              ,P_HDR.DOM_INV_NUM AS DOM_INV_NUM
              ,R_DTL.INVTY_LOC_CD
              ,R_DTL.INVTY_STK_STS_CD AS RWS_INVTY_STK_STS_CD
     FROM
               RWS_HDR           R_HDR
              ,RWS_DTL           R_DTL
              ,PO_RCV_HDR        P_HDR
              ,PO_RCV_DTL        P_DTL
     WHERE
                    R_HDR.GLBL_CMPY_CD        =  #glblCmpyCd#
               AND  R_HDR.RWS_NUM             =  #rwsNum#
               AND  R_HDR.EZCANCELFLAG        =  '0'
               AND  R_HDR.GLBL_CMPY_CD        =  R_DTL.GLBL_CMPY_CD
               AND  R_HDR.RWS_NUM             =  R_DTL.RWS_NUM
               AND  R_DTL.EZCANCELFLAG        =  '0'
               AND  R_HDR.GLBL_CMPY_CD        =  P_HDR.GLBL_CMPY_CD
               AND  R_HDR.TRX_ORD_NUM         =  P_HDR.PO_RCV_NUM
               AND  P_HDR.EZCANCELFLAG        =  '0'
               AND  R_HDR.GLBL_CMPY_CD        =  P_DTL.GLBL_CMPY_CD
               AND  R_HDR.TRX_ORD_NUM         =  P_DTL.PO_RCV_NUM
               AND  R_DTL.TRX_LINE_NUM        =  P_DTL.PO_RCV_LINE_NUM
               AND  P_DTL.EZCANCELFLAG        =  '0'
     ORDER BY
                    R_DTL.RWS_DTL_LINE_NUM
    </statement>

    <statement id="getDtInfo" parameterClass="Map">
        SELECT
            R_HDR.RWS_NUM
           ,R_HDR.WH_CD
           ,R_HDR.SCE_ORD_TP_CD
           ,R_HDR.RWS_REF_NUM
           ,R_HDR.TRX_ORD_NUM
           ,R_HDR.SYS_SRC_CD
           ,R_HDR.FROM_LOC_CD
           ,R_DTL.RWS_DTL_LINE_NUM
        --   ,R_DTL.INVTY_STK_STS_CD
           ,R_DTL.RWS_QTY
           ,R_DTL.RWS_PUT_AWAY_QTY
           ,R_DTL.MDSE_CD
           ,R_DTL.TRX_LINE_NUM
           ,R_DTL.RWS_STS_CD
           ,S_DTL.TRX_HDR_NUM      AS CPO_ORD_NUM
           ,S_DTL.TRX_LINE_NUM     AS CPO_DTL_LINE_NUM
           ,S_DTL.TRX_LINE_SUB_NUM AS CPO_DTL_LINE_SUB_NUM
           ,R_DTL.INVTY_LOC_CD
           ,R_DTL.SHIP_FROM_INVTY_LOC_CD
           ,R_WH.INVTY_OWNR_CD
           ,CD.OPEN_FLG            AS ORD_LINE_OPEN_FLG
           ,CD.ORD_LINE_STS_CD
           ,R_WH.INVTY_ACCT_CD
           ,IO.CMPY_INVTY_FLG
           <!-- Del Start 2024/01/24 QC#63471 -->
<!--           ,NVL(WRK.INVTY_STK_STS_CD , R_DTL.INVTY_STK_STS_CD) AS INVTY_STK_STS_CD-->
           <!-- Del End 2024/01/24 QC#63471 -->
           ,R_DTL.INVTY_STK_STS_CD                             AS RWS_INVTY_STK_STS_CD
           ,R_DTL.PRCH_REQ_NUM
           ,R_DTL.PRCH_REQ_LINE_NUM
           ,R_DTL.PRCH_REQ_LINE_SUB_NUM
           
        FROM
            RWS_HDR           R_HDR
           ,RWS_DTL           R_DTL
           ,PO_RCV_HDR        P_HDR
           ,PO_RCV_DTL        P_DTL
           ,SHPG_ORD_DTL      S_DTL
           ,RTL_WH            R_WH
           ,CPO_DTL           CD
           ,INVTY_OWNR        IO
           <!-- Del Start 2024/01/24 QC#63471 -->
<!--           ,RWS_PUT_AWAY_WRK  WRK-->
           <!-- Del End 2024/01/24 QC#63471 -->
        WHERE
            R_HDR.GLBL_CMPY_CD         =  #glblCmpyCd#
        AND R_HDR.RWS_NUM              =  #rwsNum#
        AND R_HDR.EZCANCELFLAG         =  '0'
        AND R_HDR.GLBL_CMPY_CD         =  R_DTL.GLBL_CMPY_CD
        AND R_HDR.RWS_NUM              =  R_DTL.RWS_NUM
        AND R_DTL.EZCANCELFLAG         =  '0'
        AND R_HDR.GLBL_CMPY_CD         =  P_HDR.GLBL_CMPY_CD
        AND R_HDR.TRX_ORD_NUM          =  P_HDR.PO_RCV_NUM
        AND P_HDR.EZCANCELFLAG         =  '0'
        AND R_HDR.GLBL_CMPY_CD         =  P_DTL.GLBL_CMPY_CD
        AND R_HDR.TRX_ORD_NUM          =  P_DTL.PO_RCV_NUM
        AND R_DTL.TRX_LINE_NUM         =  P_DTL.PO_RCV_LINE_NUM
        AND P_DTL.EZCANCELFLAG         =  '0'
        AND P_HDR.GLBL_CMPY_CD         =  S_DTL.GLBL_CMPY_CD
        AND P_HDR.PO_RCV_TRX_HDR_NUM   =  S_DTL.SO_NUM
        AND P_DTL.PO_RCV_TRX_LINE_NUM  =  S_DTL.SO_SLP_NUM
        AND S_DTL.EZCANCELFLAG         =  '0'
        AND R_DTL.GLBL_CMPY_CD         =  R_WH.GLBL_CMPY_CD
        AND R_DTL.RTL_WH_CD            =  R_WH.RTL_WH_CD
        AND R_WH.EZCANCELFLAG          =  '0'
        AND S_DTL.GLBL_CMPY_CD         =  CD.GLBL_CMPY_CD
        AND S_DTL.TRX_HDR_NUM          =  CD.CPO_ORD_NUM
        AND S_DTL.TRX_LINE_NUM         =  CD.CPO_DTL_LINE_NUM
        AND S_DTL.TRX_LINE_SUB_NUM     =  CD.CPO_DTL_LINE_SUB_NUM
        AND CD.EZCANCELFLAG            =  '0'
        AND R_WH.GLBL_CMPY_CD          =  IO.GLBL_CMPY_CD
        AND R_WH.INVTY_OWNR_CD         =  IO.INVTY_OWNR_CD
        AND IO.EZCANCELFLAG            =  '0'
        <!-- Del Start 2024/01/24 QC#63471 -->
<!--        AND R_DTL.RWS_NUM              =  WRK.RWS_NUM(+)-->
<!--        AND R_DTL.RWS_DTL_LINE_NUM     =  WRK.RWS_DTL_LINE_NUM(+)-->
<!--        AND R_DTL.GLBL_CMPY_CD         =  WRK.GLBL_CMPY_CD(+)-->
<!--        AND WRK.EZCANCELFLAG(+)        = '0'-->
        <!-- Del End 2024/01/24 QC#63471 -->
        ORDER BY
            R_DTL.RWS_DTL_LINE_NUM
    </statement>

    <statement id="getTrInfo" parameterClass="Map">
    SELECT
              R_HDR.RWS_NUM
             ,R_HDR.WH_CD
             ,R_HDR.SCE_ORD_TP_CD
             ,R_HDR.RWS_REF_NUM
             ,R_HDR.TRX_ORD_NUM
             ,R_HDR.SYS_SRC_CD
             ,R_HDR.FROM_LOC_CD
             ,R_DTL.RWS_DTL_LINE_NUM
          -- ,R_DTL.INVTY_STK_STS_CD
             ,R_DTL.RWS_QTY
             ,R_DTL.RWS_PUT_AWAY_QTY
             ,R_DTL.MDSE_CD
             ,R_DTL.TRX_LINE_NUM
             ,R_DTL.RWS_STS_CD
             ,S_DTL.TRX_HDR_NUM AS INVTY_ORD_NUM
             ,S_DTL.TRX_LINE_NUM AS INVTY_ORD_LINE_NUM
             ,S_DTL.FROM_STK_STS_CD
             ,R_DTL.INVTY_LOC_CD
             ,R_DTL.SHIP_FROM_INVTY_LOC_CD
             ,R_DTL.PRCH_REQ_NUM
             ,R_DTL.PRCH_REQ_LINE_NUM
             ,R_DTL.PRCH_REQ_LINE_SUB_NUM
             ,R_WH.LOC_TP_CD
             <!-- 2020/07/08 QC#57220 MOD
             ,NVL(WRK.INVTY_STK_STS_CD , R_DTL.INVTY_STK_STS_CD) AS INVTY_STK_STS_CD
             -->
             ,R_DTL.INVTY_STK_STS_CD                             AS RWS_INVTY_STK_STS_CD
    FROM
              RWS_HDR           R_HDR
             ,RWS_DTL           R_DTL
             ,PO_RCV_HDR        P_HDR
             ,PO_RCV_DTL        P_DTL
             ,SHPG_ORD_DTL      S_DTL
             ,RTL_WH            R_WH
             <!-- 2020/07/08 QC#57220 MOD
             ,RWS_PUT_AWAY_WRK  WRK
             -->
    WHERE
                   R_HDR.GLBL_CMPY_CD         =  #glblCmpyCd#
              AND  R_HDR.RWS_NUM              =  #rwsNum#
              AND  R_HDR.EZCANCELFLAG         =  '0'
              AND  R_HDR.GLBL_CMPY_CD         =  R_DTL.GLBL_CMPY_CD
              AND  R_HDR.RWS_NUM              =  R_DTL.RWS_NUM
              AND  R_DTL.EZCANCELFLAG         =  '0'
              AND  R_HDR.GLBL_CMPY_CD         =  P_HDR.GLBL_CMPY_CD
              AND  R_HDR.TRX_ORD_NUM          =  P_HDR.PO_RCV_NUM
              AND  P_HDR.EZCANCELFLAG         =  '0'
              AND  R_HDR.GLBL_CMPY_CD         =  P_DTL.GLBL_CMPY_CD
              AND  R_HDR.TRX_ORD_NUM          =  P_DTL.PO_RCV_NUM
              AND  R_DTL.TRX_LINE_NUM         =  P_DTL.PO_RCV_LINE_NUM
              AND  P_DTL.EZCANCELFLAG         =  '0'
              AND  P_HDR.GLBL_CMPY_CD         =  S_DTL.GLBL_CMPY_CD
              AND  P_HDR.PO_RCV_TRX_HDR_NUM   =  S_DTL.SO_NUM
              AND  P_DTL.PO_RCV_TRX_LINE_NUM  =  S_DTL.SO_SLP_NUM
              AND  S_DTL.EZCANCELFLAG         =  '0'
              AND  R_DTL.GLBL_CMPY_CD         =  R_WH.GLBL_CMPY_CD
              AND  R_DTL.RTL_WH_CD            =  R_WH.RTL_WH_CD
              AND  R_WH.EZCANCELFLAG          =  '0'
              <!-- 2020/07/08 QC#57220 MOD
              AND  R_DTL.RWS_NUM              =  WRK.RWS_NUM(+)
              AND  R_DTL.RWS_DTL_LINE_NUM     =  WRK.RWS_DTL_LINE_NUM(+)
              AND  R_DTL.GLBL_CMPY_CD         =  WRK.GLBL_CMPY_CD(+)
              AND  WRK.EZCANCELFLAG(+)        = '0'
              -->
    ORDER BY
                   R_DTL.RWS_DTL_LINE_NUM
    </statement>

    <statement id="getRtInfo" parameterClass="Map">
     SELECT
               R_HDR.RWS_NUM
              ,R_HDR.WH_CD
              ,R_HDR.SCE_ORD_TP_CD
              ,R_HDR.RWS_REF_NUM
              ,R_HDR.TRX_ORD_NUM
              ,R_HDR.SYS_SRC_CD
              ,R_HDR.FROM_LOC_CD
              ,R_DTL.RWS_DTL_LINE_NUM
            --,R_DTL.INVTY_STK_STS_CD
              ,R_DTL.RWS_QTY
              ,R_DTL.RWS_PUT_AWAY_QTY
              ,R_DTL.MDSE_CD
              ,R_DTL.TRX_LINE_NUM
              ,R_DTL.TRX_LINE_SUB_NUM
              ,R_DTL.RWS_STS_CD
              ,DCR_DTL.ORIG_CPO_ORD_NUM
              ,DCR_DTL.ORIG_CPO_DTL_LINE_NUM
              ,DCR_DTL.ORIG_CPO_DTL_LINE_SUB_NUM
              ,DCR_DTL.RTRN_QTY
              ,C_HDR.SELL_TO_CUST_CD
              ,DC_CONFIG.BILL_TO_CUST_LOC_CD AS BILL_TO_CUST_CD
              ,R_DTL.INVTY_LOC_CD
              ,R_DTL.TRX_CD
              ,R_DTL.TRX_RSN_CD
              ,NVL(WRK.INVTY_STK_STS_CD , R_DTL.INVTY_STK_STS_CD) AS INVTY_STK_STS_CD
     FROM
               RWS_HDR           R_HDR
              ,RWS_DTL           R_DTL
              ,DS_CPO_RTRN_DTL   DCR_DTL
              ,CPO               C_HDR
              ,DS_CPO_CONFIG     DC_CONFIG
              ,RWS_PUT_AWAY_WRK  WRK
     WHERE
                    R_HDR.GLBL_CMPY_CD        =  #glblCmpyCd#
               AND  R_HDR.RWS_NUM             =  #rwsNum#
               AND  R_HDR.EZCANCELFLAG        =  '0'
               AND  R_HDR.GLBL_CMPY_CD        =  R_DTL.GLBL_CMPY_CD
               AND  R_HDR.RWS_NUM             =  R_DTL.RWS_NUM
               AND  R_DTL.EZCANCELFLAG        =  '0'
               AND  R_HDR.GLBL_CMPY_CD        =  DCR_DTL.GLBL_CMPY_CD
               AND  R_HDR.TRX_ORD_NUM         =  DCR_DTL.CPO_ORD_NUM
               AND  R_DTL.TRX_LINE_NUM        =  DCR_DTL.DS_CPO_RTRN_LINE_NUM
               AND  R_DTL.TRX_LINE_SUB_NUM    =  DCR_DTL.DS_CPO_RTRN_LINE_SUB_NUM
               AND  DCR_DTL.EZCANCELFLAG      =  '0'
               AND  DCR_DTL.GLBL_CMPY_CD      =  C_HDR.GLBL_CMPY_CD
               AND  DCR_DTL.CPO_ORD_NUM       =  C_HDR.CPO_ORD_NUM
               AND  C_HDR.EZCANCELFLAG        =  '0'
               AND  DCR_DTL.GLBL_CMPY_CD      =  DC_CONFIG.GLBL_CMPY_CD
               AND  DCR_DTL.DS_CPO_CONFIG_PK  =  DC_CONFIG.DS_CPO_CONFIG_PK
               AND  DC_CONFIG.EZCANCELFLAG    =  '0'
               AND  R_DTL.RWS_NUM             =  WRK.RWS_NUM(+)
               AND  R_DTL.RWS_DTL_LINE_NUM    =  WRK.RWS_DTL_LINE_NUM(+)
               AND  R_DTL.GLBL_CMPY_CD        =  WRK.GLBL_CMPY_CD(+)
               AND  WRK.EZCANCELFLAG(+)       = '0'
     ORDER BY
                    R_DTL.RWS_DTL_LINE_NUM
    </statement>

    <statement id="getIVInfo" parameterClass="Map">
     SELECT
          WS.GLBL_CMPY_CD                GLBL_CMPY_CD
         ,WS.WH_SCHD_PK                  WH_SCHD_PK
     FROM
          RWS_HDR  RH
         ,WH_SCHD  WS
     WHERE
               RH.GLBL_CMPY_CD        =  #glblCmpyCd#
          AND  RH.RWS_NUM             =  #rwsNum#
          AND  RH.EZCANCELFLAG        =  '0'
          AND  RH.GLBL_CMPY_CD        =  WS.GLBL_CMPY_CD
          AND  RH.RWS_REF_NUM         =  WS.RWS_REF_NUM
          AND  RH.WH_CD               =  WS.INVTY_LOC_CD
          AND  WS.EZCANCELFLAG        =  '0'
    </statement>
    
    <statement id="getCTInfo" parameterClass="Map">
     SELECT
          WS.GLBL_CMPY_CD                GLBL_CMPY_CD
         ,WS.WH_SCHD_PK                  WH_SCHD_PK
     FROM
          RWS_HDR  RH
         ,WH_SCHD  WS
     WHERE
               RH.GLBL_CMPY_CD        =  #glblCmpyCd#
          AND  RH.RWS_NUM             =  #rwsNum#
          AND  RH.EZCANCELFLAG        =  '0'
          AND  RH.GLBL_CMPY_CD        =  WS.GLBL_CMPY_CD
          AND  RH.RWS_REF_NUM         =  WS.RWS_REF_NUM
          AND  RH.IMPT_CNTNR_LOT_NUM  =  WS.IMPT_CNTNR_LOT_NUM
          AND  RH.WH_CD               =  WS.INVTY_LOC_CD
          AND  WS.EZCANCELFLAG        =  '0'
    </statement>
    
    <statement id="getIOInfo" parameterClass="Map">
     SELECT
          WS.GLBL_CMPY_CD                GLBL_CMPY_CD
         ,WS.WH_SCHD_PK                  WH_SCHD_PK
         ,WS.WH_SCHD_REF_KEY_NUM_SQ      WH_SCHD_REF_KEY_NUM_SQ
     FROM
          RWS_HDR  RH
         ,WH_SCHD  WS
     WHERE
               RH.GLBL_CMPY_CD        =  #glblCmpyCd#
          AND  RH.RWS_NUM             =  #rwsNum#
          AND  RH.EZCANCELFLAG        =  '0'
          AND  RH.GLBL_CMPY_CD        =  WS.GLBL_CMPY_CD
          AND  RH.IMPT_INV_NUM        =  WS.IMPT_INV_NUM
          AND  RH.WH_CD               =  WS.INVTY_LOC_CD
          AND  WS.INBD_VIS_EVENT_CD  IN (#inbdVisEventCd03#
                                        ,#inbdVisEventCd04#
                                        ,#inbdVisEventCd05#)
          AND  WS.EZCANCELFLAG        =  '0'
    </statement>
    
    <statement id="getSameCntnrDifferentWhInfoForIO" parameterClass="Map">
     SELECT
          WS.WH_SCHD_PK                  WH_SCHD_PK
     FROM
          RWS_HDR  RH
         ,WH_SCHD  WS
     WHERE
               RH.GLBL_CMPY_CD        =  #glblCmpyCd#
          AND  RH.RWS_NUM             =  #rwsNum#
          AND  RH.EZCANCELFLAG        =  '0'
          AND  RH.GLBL_CMPY_CD        =  WS.GLBL_CMPY_CD
          AND  RH.IMPT_INV_NUM        =  WS.IMPT_INV_NUM
          AND  RH.WH_CD              !=  WS.INVTY_LOC_CD
          AND  WS.INBD_VIS_EVENT_CD   =  #inbdVisEventCd03#
          AND  WS.EZCANCELFLAG        =  '0'
    </statement>

    <statement id="getCOInfo" parameterClass="Map">

     SELECT
          WS.GLBL_CMPY_CD                GLBL_CMPY_CD
         ,WS.WH_SCHD_PK                  WH_SCHD_PK
         ,WS.WH_SCHD_REF_KEY_NUM_SQ      WH_SCHD_REF_KEY_NUM_SQ
     FROM
          RWS_HDR  RH
         ,WH_SCHD  WS
     WHERE
               RH.GLBL_CMPY_CD        =  #glblCmpyCd#
          AND  RH.RWS_NUM             =  #rwsNum#
          AND  RH.EZCANCELFLAG        =  '0'
          AND  RH.GLBL_CMPY_CD        =  WS.GLBL_CMPY_CD
          AND  RH.RWS_REF_NUM         =  WS.RWS_REF_NUM
          AND  RH.IMPT_CNTNR_LOT_NUM  =  WS.IMPT_CNTNR_LOT_NUM
          AND  RH.WH_CD               =  WS.INVTY_LOC_CD
          AND  WS.INBD_VIS_EVENT_CD  IN (#inbdVisEventCd03#
                                        ,#inbdVisEventCd04#
                                        ,#inbdVisEventCd05#)
          AND  WS.EZCANCELFLAG        =  '0'
    </statement>

    <statement id="getSameCntnrDifferentWhInfoForCO" parameterClass="Map">
     SELECT
          WS.WH_SCHD_PK                  WH_SCHD_PK
     FROM
          RWS_HDR  RH
         ,WH_SCHD  WS
     WHERE
               RH.GLBL_CMPY_CD        =  #glblCmpyCd#
          AND  RH.RWS_NUM             =  #rwsNum#
          AND  RH.EZCANCELFLAG        =  '0'
          AND  RH.GLBL_CMPY_CD        =  WS.GLBL_CMPY_CD
          AND  RH.RWS_REF_NUM         =  WS.RWS_REF_NUM
          AND  RH.IMPT_CNTNR_LOT_NUM  =  WS.IMPT_CNTNR_LOT_NUM
          AND  RH.WH_CD              !=  WS.INVTY_LOC_CD
          AND  WS.INBD_VIS_EVENT_CD   =  #inbdVisEventCd03#
          AND  WS.EZCANCELFLAG        =  '0'
    </statement>

    <statement id="getNLRcvSCPInfo" parameterClass="Map">
     SELECT
          WS.GLBL_CMPY_CD                    GLBL_CMPY_CD
         ,WS.WH_SCHD_PK                      WH_SCHD_PK
     FROM
          WH_SCHD  WS
     WHERE
               WS.GLBL_CMPY_CD            =  #glblCmpyCd#
          AND  WS.WH_SCHD_REF_KEY_NUM_SQ  =  #whSchdRefKeyNumSq01#
          AND  WS.INBD_VIS_EVENT_CD      IN (#inbdVisEventCd01#
                                            ,#inbdVisEventCd02#
                                            ,#inbdVisEventCd07#
                                            ,#inbdVisEventCd08#)
          AND  WS.EZCANCELFLAG            =  '0'
    </statement>

    <statement id="getCAInfo" parameterClass="Map">
     WITH WS_LTST_V AS (
         SELECT
              MAX(WS.LTST_REC_FLG) LTST_REC_FLG
             ,WS.IMPT_PACK_SLP_STS_PK
             ,WS.GLBL_CMPY_CD
         FROM
              RWS_HDR          RH
             ,LGSC_SCP_ORD_DTL LD
             ,WH_SCHD          WS
         WHERE
                 RH.GLBL_CMPY_CD          = #glblCmpyCd#
             AND RH.RWS_NUM               = #rwsNum#
             AND RH.EZCANCELFLAG          = '0'
             AND RH.GLBL_CMPY_CD          = LD.GLBL_CMPY_CD
             AND RH.TRUCK_CNTNR_PK        = LD.TRUCK_CNTNR_PK
             AND LD.EZCANCELFLAG          = '0'
             AND LD.GLBL_CMPY_CD          = WS.GLBL_CMPY_CD
             AND LD.IMPT_PACK_SLP_STS_PK  = WS.IMPT_PACK_SLP_STS_PK
             AND WS.INBD_VIS_EVENT_CD    IN (#inbdVisEventCd03#
                                            ,#inbdVisEventCd04#
                                            ,#inbdVisEventCd05#
                                            ,#inbdVisEventCd06#
                                            ,#inbdVisEventCd07#
                                            ,#inbdVisEventCd08#)
             AND WS.EZCANCELFLAG = '0'
         GROUP BY
              WS.IMPT_PACK_SLP_STS_PK
             ,WS.GLBL_CMPY_CD
     )
     SELECT
          WS.GLBL_CMPY_CD
         ,WS.WH_SCHD_PK
         ,WS.INBD_VIS_EVENT_CD
         ,WS.WH_SCHD_REF_KEY_NUM_SQ
         ,WS.IMPT_INV_NUM 
     FROM
          WS_LTST_V LV
         ,WH_SCHD   WS
     WHERE
             LV.LTST_REC_FLG         = 'N'
         AND LV.GLBL_CMPY_CD         = WS.GLBL_CMPY_CD
         AND LV.IMPT_PACK_SLP_STS_PK = WS.IMPT_PACK_SLP_STS_PK
         AND WS.EZCANCELFLAG         = '0'
     ORDER BY
          WS.IMPT_INV_NUM           ASC
         ,WS.WH_SCHD_REF_KEY_NUM_SQ ASC
    </statement>

    <statement id="getSameInvDifferentWhInfoForCA" parameterClass="Map">
     SELECT
          WS.WH_SCHD_PK                      WH_SCHD_PK
     FROM
          RWS_HDR           RH
         ,LGSC_SCP_ORD_DTL  LD
         ,WH_SCHD           WS
     WHERE
               RH.GLBL_CMPY_CD            =  #glblCmpyCd#
          AND  RH.RWS_NUM                 =  #rwsNum#
          AND  RH.EZCANCELFLAG            =  '0'
          AND  RH.GLBL_CMPY_CD            =  LD.GLBL_CMPY_CD
          AND  RH.TRUCK_CNTNR_PK          =  LD.TRUCK_CNTNR_PK
          AND  LD.EZCANCELFLAG            =  '0'
          AND  LD.GLBL_CMPY_CD            =  WS.GLBL_CMPY_CD
          AND  LD.IMPT_CNTNR_NUM          =  WS.RWS_REF_NUM
          AND  LD.IMPT_CNTNR_LOT_NUM      =  WS.IMPT_CNTNR_LOT_NUM
          AND  LD.REQ_STK_IN_WH_CD       !=  WS.INVTY_LOC_CD
          AND  WS.IMPT_INV_NUM            =  #imptInvNum#
          AND  WS.INBD_VIS_EVENT_CD       =  #inbdVisEventCd03#
          AND  WS.EZCANCELFLAG            =  '0'
    </statement>
    
    <statement id="getNLRcvCAInfo" parameterClass="Map">
     SELECT
          WS.GLBL_CMPY_CD                    GLBL_CMPY_CD
         ,WS.WH_SCHD_PK                      WH_SCHD_PK
     FROM
          WH_SCHD  WS
     WHERE
               WS.GLBL_CMPY_CD            =  #glblCmpyCd#
          AND  (
                <iterate property="whSchdRefKeyNumSq02" var="elem[]" open="WS.WH_SCHD_REF_KEY_NUM_SQ IN (" close=") AND " conjunction=",">
                    #elem[]#
                </iterate>
                WS.INBD_VIS_EVENT_CD      IN (#inbdVisEventCd01#
                                             ,#inbdVisEventCd02#
                                             ,#inbdVisEventCd07#
                                             ,#inbdVisEventCd08#)
               )
          AND  WS.IMPT_INV_NUM            =  #imptInvNum#
          AND  WS.EZCANCELFLAG            =  '0'
    </statement>
    
    <statement id="getPOInfo" parameterClass="Map">
     SELECT
          WS.GLBL_CMPY_CD                    GLBL_CMPY_CD
         ,WS.WH_SCHD_PK                      WH_SCHD_PK
     FROM
          RWS_HDR  RH
         ,WH_SCHD  WS
     WHERE
               RH.GLBL_CMPY_CD            =  #glblCmpyCd#
          AND  RH.RWS_NUM                 =  #rwsNum#
          AND  RH.EZCANCELFLAG            =  '0'
          AND  RH.GLBL_CMPY_CD            =  WS.GLBL_CMPY_CD
          AND  RH.TRX_ORD_NUM             =  WS.PO_RCV_NUM
          AND  WS.EZCANCELFLAG            =  '0'
    </statement>

    <statement id="getRwsPutAwaySerWrk" parameterClass="Map">
        SELECT
             PASW.RWS_NUM
            ,PASW.RWS_DTL_LINE_NUM
            ,PASW.INVTY_STK_STS_CD
            ,PASW.SER_NUM
            ,PASW.MDSE_CD
        FROM
            RWS_PUT_AWAY_SER_WRK PASW
        WHERE
                PASW.GLBL_CMPY_CD      = #glblCmpyCd01#
            AND PASW.RWS_NUM           = #rwsNum01#
            AND PASW.RWS_DTL_LINE_NUM  = #rwsDtlLineNum01#
            AND PASW.EZCANCELFLAG      = '0'
        ORDER BY 
             PASW.RWS_NUM
            ,PASW.RWS_DTL_LINE_NUM
            ,PASW.SER_LINE_NUM
    </statement>

    <statement id="getRwsPutAwaySerWrkForBb" parameterClass="Map">
        SELECT
             PASW.RWS_NUM
            ,PASW.RWS_DTL_LINE_NUM
            ,PASW.SER_NUM
            ,SOD.MDSE_CD
            ,SOD.SO_NUM
            ,SOD.SO_SLP_NUM
            ,SOD.INVTY_LOC_CD
        FROM
             RWS_PUT_AWAY_SER_WRK PASW
            ,RWS_DTL RD
            ,RWS_HDR RH
            ,SHPG_ORD_DTL SOD
        WHERE
                PASW.GLBL_CMPY_CD      = #glblCmpyCd01#
            AND PASW.RWS_NUM           = #rwsNum01#
            AND PASW.RWS_DTL_LINE_NUM  = #rwsDtlLineNum01#
            AND PASW.WRK_TRX_ID        = #wrkTrxId01#
            AND PASW.SQ_ID             = #sqId01#
            AND PASW.EZCANCELFLAG      = '0'
            AND PASW.GLBL_CMPY_CD      = RD.GLBL_CMPY_CD
            AND PASW.RWS_NUM           = RD.RWS_NUM
            AND PASW.RWS_DTL_LINE_NUM  = RD.RWS_DTL_LINE_NUM
            AND RD.EZCANCELFLAG        = '0'
            AND RD.RWS_NUM             = RH.RWS_NUM
            AND RH.EZCANCELFLAG        = '0'
            AND RH.PO_RCV_TRX_HDR_NUM  = SOD.TRX_HDR_NUM
            AND RD.PO_RCV_TRX_LINE_NUM = SOD.TRX_LINE_NUM
            AND SOD.EZCANCELFLAG       = '0'
        ORDER BY 
             PASW.RWS_NUM
            ,PASW.RWS_DTL_LINE_NUM
            ,PASW.SER_LINE_NUM
    </statement>

    <statement id="getRwsPutAwaySerWrkForSwScCc" parameterClass="Map">
        SELECT
            RPAW.MDSE_CD
           ,RH.TRX_ORD_NUM            AS SO_NUM
           ,RD.SHIP_FROM_INVTY_LOC_CD AS INVTY_LOC_CD
           ,RPAW.SER_NUM
           ,RD.TRX_LINE_NUM           AS SO_SLP_NUM
        FROM
            RWS_PUT_AWAY_SER_WRK RPAW
           ,RWS_DTL              RD
           ,RWS_HDR              RH
        WHERE
            RPAW.GLBL_CMPY_CD     = #glblCmpyCd01#
        AND RPAW.RWS_NUM          = #rwsNum01#
        AND RPAW.RWS_DTL_LINE_NUM = #rwsDtlLineNum01#
        AND RPAW.WRK_TRX_ID       = #wrkTrxId01#
        AND RPAW.SQ_ID            = #sqId01#
        AND RPAW.EZCANCELFLAG     = '0'
        AND RPAW.GLBL_CMPY_CD     = RD.GLBL_CMPY_CD
        AND RPAW.RWS_NUM          = RD.RWS_NUM
        AND RPAW.RWS_DTL_LINE_NUM = RD.RWS_DTL_LINE_NUM
        AND RD.EZCANCELFLAG       = '0'
        AND RD.GLBL_CMPY_CD       = RH.GLBL_CMPY_CD
        AND RD.RWS_NUM            = RH.RWS_NUM
        AND RH.EZCANCELFLAG       = '0'
    </statement>

    <statement id="getRwsPutAwaySerWrkForRmRx" parameterClass="Map">
        SELECT
            SS.MDSE_CD
           ,RH.RWS_REF_NUM            AS SO_NUM
           ,SOD.INVTY_LOC_CD
           ,SS.SER_NUM
           ,RD.TRX_LINE_NUM           AS SO_SLP_NUM
        FROM
            RWS_PUT_AWAY_SER_WRK RPAW
           ,RWS_DTL              RD
           ,RWS_HDR              RH
           ,SHPG_ORD             SO
           ,SHPG_ORD_DTL         SOD
           ,SO_SER               SS
        WHERE
            RPAW.GLBL_CMPY_CD      = #glblCmpyCd01#
        AND RPAW.RWS_NUM           = #rwsNum01#
        AND RPAW.RWS_DTL_LINE_NUM  = #rwsDtlLineNum01#
        AND RPAW.WRK_TRX_ID        = #wrkTrxId01#
        AND RPAW.SQ_ID             = #sqId01#
        AND RPAW.EZCANCELFLAG      = '0'
        AND RPAW.GLBL_CMPY_CD      = RD.GLBL_CMPY_CD
        AND RPAW.RWS_NUM           = RD.RWS_NUM
        AND RPAW.RWS_DTL_LINE_NUM  = RD.RWS_DTL_LINE_NUM
        AND RD.EZCANCELFLAG        = '0'
        AND RD.GLBL_CMPY_CD        = RH.GLBL_CMPY_CD
        AND RD.RWS_NUM             = RH.RWS_NUM
        AND RH.EZCANCELFLAG        = '0'
        AND RH.GLBL_CMPY_CD        = SO.GLBL_CMPY_CD
        AND RH.RWS_REF_NUM         = SO.SO_NUM
        AND SO.GLBL_CMPY_CD        = SOD.GLBL_CMPY_CD
        AND SO.SO_NUM              = SOD.SO_NUM
        <!-- START 2018/05/18 S.Katsuma [QC#26117,MOD] -->
        <!-- AND RD.TRX_LINE_NUM       = SOD.SO_SLP_NUM -->
        AND RD.PO_RCV_TRX_LINE_NUM = SOD.SO_SLP_NUM
        <!-- END 2018/05/18 S.Katsuma [QC#26117,MOD] -->
        AND SOD.GLBL_CMPY_CD       = SS.GLBL_CMPY_CD
        AND SOD.SO_NUM             = SS.SO_NUM
        AND SOD.SO_SLP_NUM         = SS.SO_SLP_NUM
        AND SS.EZCANCELFLAG        = '0' 
    </statement>

    <statement id="getSoNumForBb" parameterClass="Map" resultClass="String">
        SELECT
            SO.SO_NUM
        FROM
            SHPG_ORD SO
        WHERE
            SO.GLBL_CMPY_CD = #glblCmpyCd#
        AND SO.TRX_HDR_NUM  = #poNum#
        AND SO.EZCANCELFLAG = '0'
        AND EXISTS (SELECT
                        1
                    FROM
                        SHPG_ORD_DTL SD
                       ,RWS_DTL      RD
                    WHERE
                        SD.GLBL_CMPY_CD = SO.GLBL_CMPY_CD
                    AND SD.SO_NUM       = SO.SO_NUM
                    AND SD.EZCANCELFLAG = '0'
                    AND SD.GLBL_CMPY_CD = RD.GLBL_CMPY_CD
                    AND SD.TRX_LINE_NUM = RD.PO_RCV_TRX_LINE_NUM
                    AND RD.RWS_NUM      = #rwsNum#
                    AND RD.EZCANCELFLAG = '0'
                   )
    </statement>

    <statement id="getInvtyLocNm" parameterClass="Map" resultClass="String">
    SELECT
        INV.INVTY_LOC_NM
    FROM
        DS_INVTY_LOC_V INV
    WHERE 1=1
    AND INV.GLBL_CMPY_CD = #glblCmpyCd#
    AND INV.INVTY_LOC_CD = #invtyLocCd#
    AND ROWNUM = 1
    </statement>

    <statement id="getOpenRwsCntPO" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            COUNT(*)
        FROM
            RWS_HDR RH
           ,RWS_STS RS
        WHERE
            RH.GLBL_CMPY_CD       = #glblCmpyCd#
        AND RH.PO_RCV_TRX_HDR_NUM = #poOrdNum#
        AND RH.EZCANCELFLAG       = '0'
        AND RH.GLBL_CMPY_CD       = RS.GLBL_CMPY_CD
        AND RH.RWS_STS_CD         = RS.RWS_STS_CD
        AND RS.RWS_OPEN_FLG       = #rwsOpenFlg#
        AND RS.EZCANCELFLAG       = '0'
    </statement>

    <statement id="queryCpoDtlUpdateJudgement" parameterClass="Map" resultClass="Integer">
        SELECT
            COUNT(*)
        FROM
            (
             SELECT
                 SP.SHPG_PLN_NUM
             FROM
                 SHPG_PLN SP
                ,SHPG_STS SS
             WHERE
                 SP.GLBL_CMPY_CD      = #glblCmpyCd#
             AND SP.TRX_HDR_NUM       = #cpoOrdNum#
             AND SP.TRX_LINE_NUM      = #cpoDtlLineNum#
             AND SP.TRX_LINE_SUB_NUM  = #cpoDtlLineSubNum#
             AND SP.SHIP_PLN_CANC_FLG = #shipPlnCancFlgN#
             AND SP.EZCANCELFLAG      = '0'
             AND SP.GLBL_CMPY_CD      = SS.GLBL_CMPY_CD
             AND SP.SHPG_STS_CD       = SS.SHPG_STS_CD
             AND SS.SHIP_FLG          = #shipFlgN#
             AND SS.EZCANCELFLAG      = '0'
             UNION
             SELECT
                 RH.RWS_NUM
             FROM
                 SHPG_ORD_DTL SOD
                ,RWS_HDR      RH
                ,RWS_DTL      RD
                ,RWS_STS      RS
             WHERE
                 SOD.GLBL_CMPY_CD     = #glblCmpyCd#
             AND SOD.TRX_HDR_NUM      = #cpoOrdNum#
             AND SOD.TRX_LINE_NUM     = #cpoDtlLineNum#
             AND SOD.TRX_LINE_SUB_NUM = #cpoDtlLineSubNum#
             AND SOD.EZCANCELFLAG     = '0'
             AND SOD.GLBL_CMPY_CD     = RH.GLBL_CMPY_CD
             AND SOD.SO_NUM           = RH.PO_RCV_TRX_HDR_NUM
             AND RH.EZCANCELFLAG      = '0'
             AND SOD.GLBL_CMPY_CD     = RD.GLBL_CMPY_CD
             AND RH.RWS_NUM           = RD.RWS_NUM
             AND SOD.SO_SLP_NUM       = RD.PO_RCV_TRX_LINE_NUM
             AND RD.EZCANCELFLAG      = '0'
             AND RD.GLBL_CMPY_CD      = RS.GLBL_CMPY_CD
             AND RD.RWS_STS_CD        = RS.RWS_STS_CD
             AND RS.RWS_OPEN_FLG      = #rwsOpenFlgY#
             AND RS.EZCANCELFLAG      = '0'
            )
    </statement>

    <statement id="queryCpoUpdateJudgement" parameterClass="Map" resultClass="Integer">
        SELECT
            COUNT(CPO_DTL_LINE_NUM)
        FROM
            CPO_DTL
        WHERE
            GLBL_CMPY_CD = #glblCmpyCd#
        AND CPO_ORD_NUM  = #cpoOrdNum#
        AND ORD_LINE_STS_CD NOT IN (#ordLineStsCdClosed#, #ordLineStsCdCancelled#)
        AND EZCANCELFLAG = '0'
    </statement>

    <statement id="checkRwsPutAwayWork" parameterClass="Map" resultClass="Integer">
        SELECT
            COUNT(WRK_TRX_ID)
        FROM
            RWS_PUT_AWAY_WRK
        WHERE
            GLBL_CMPY_CD = #glblCmpyCd#
        AND RWS_NUM      = #rwsNum#
        AND EZCANCELFLAG = '0'
    </statement>

    <statement id="checkAllRelatedRwsClosed" parameterClass="Map" resultClass="Integer">
        SELECT
            COUNT(1)
        FROM
            RWS_HDR RH
           ,SHPG_ORD SO
        WHERE
            RH.GLBL_CMPY_CD        = #glblCmpyCd#
        AND RH.RWS_NUM      &lt;&gt; #rwsNum#
        AND RH.RWS_STS_CD   &lt;&gt; #rwsStsReceived#
        AND RH.EZCANCELFLAG        = '0'
        AND SO.GLBL_CMPY_CD        = RH.GLBL_CMPY_CD
        AND SO.SO_NUM              = RH.TRX_ORD_NUM
        <isNotNull property="soNum">
        AND SO.SO_NUM              = #soNum#
        </isNotNull>
        <isNotNull property="invtyOrdNum">
        AND SO.TRX_HDR_NUM         = #invtyOrdNum#
        </isNotNull>
        AND SO.EZCANCELFLAG        = '0'
    </statement>

    <statement id="getTrxRefNum" parameterClass="Map" resultClass="String">
        SELECT
            IOD.TRX_REF_NUM
        FROM
            INVTY_ORD_DTL IOD
        WHERE
            IOD.GLBL_CMPY_CD = #glblCmpyCd#
        AND IOD.INVTY_ORD_NUM = #invtyOrdNum#
        AND IOD.INVTY_ORD_LINE_NUM = #invtyOrdLineNum#
        AND IOD.EZCANCELFLAG = '0'
    </statement>

    <statement id="getRwsPutAwaySerNumList" parameterClass="Map" resultClass="String">
        SELECT
            PASW.SER_NUM
        FROM
            RWS_PUT_AWAY_SER_WRK PASW
        WHERE
                PASW.GLBL_CMPY_CD      = #glblCmpyCd#
            AND PASW.RWS_NUM           = #rwsNum#
            AND PASW.RWS_DTL_LINE_NUM  = #rwsDtlLineNum#
            AND PASW.EZCANCELFLAG      = '0'
    </statement>

    <statement id="getShipSerNumListIcCcScSwIT" parameterClass="Map" resultClass="String">
        SELECT
            IOS.SER_NUM
        FROM
            INVTY_ORD_SER IOS
        WHERE
            IOS.GLBL_CMPY_CD       = #glblCmpyCd#
        AND IOS.INVTY_ORD_NUM      = #invtyOrdNum#
        AND IOS.INVTY_ORD_LINE_NUM = #invtyOrdLineNum#
        AND IOS.EZCANCELFLAG       = '0'
    </statement>

    <statement id="getShipSerNumListBb" parameterClass="Map" resultClass="String">
        SELECT
            PSN.SER_NUM
        FROM
            PO_SER_NUM PSN
        WHERE
            PSN.GLBL_CMPY_CD       = #glblCmpyCd#
        AND PSN.KEY_INFO_CD_04     = #poOrdNum#
        AND PSN.KEY_INFO_CD_05     = #poOrdDtlLineNum#
        AND PSN.EZCANCELFLAG       = '0'
    </statement>

    <statement id="getShipSerNumListRm" parameterClass="Map" resultClass="String">
        SELECT
            ROD.CMPT_SER_NUM
        FROM
            RMNF_ORD_DTL ROD
        WHERE
            ROD.GLBL_CMPY_CD          = #glblCmpyCd#
        AND ROD.RMNF_ORD_NUM          = #rmnfOrdNum#
        AND ROD.RMNF_ORD_DTL_LINE_NUM = #rmnfOrdDtlLineNum#
        AND ROD.EZCANCELFLAG          = '0'
    </statement>

    <statement id="getRwsSerNumListLoanRt" parameterClass="Map" resultClass="String">
        SELECT
            MM.SER_NUM
        FROM
            RWS_HDR         RH
           ,RWS_DTL         RD
           ,RWS_SER         RS
           ,SVC_MACH_MSTR   MM
        WHERE
            RH.GLBL_CMPY_CD        = #glblCmpyCd#
        AND RH.RWS_NUM             = #rwsNum#
        AND RH.EZCANCELFLAG        = '0'
        AND RH.GLBL_CMPY_CD        = RD.GLBL_CMPY_CD
        AND RH.RWS_NUM             = RD.RWS_NUM
        AND RD.RWS_DTL_LINE_NUM    = #rwsDtlLineNum#
        AND RD.EZCANCELFLAG        = '0'
        AND RD.GLBL_CMPY_CD        = RS.GLBL_CMPY_CD
        AND RD.RWS_NUM             = RS.RWS_NUM
        AND RD.RWS_DTL_LINE_NUM    = RS.RWS_LINE_NUM
        AND RS.EZCANCELFLAG        = '0'
        AND RD.GLBL_CMPY_CD        = MM.GLBL_CMPY_CD
        AND RH.TRX_ORD_NUM         = MM.TRX_HDR_NUM
        AND RD.TRX_LINE_NUM        = MM.TRX_LINE_NUM
        AND RD.TRX_LINE_SUB_NUM    = MM.TRX_LINE_SUB_NUM
        AND RS.MDSE_CD             = MM.MDSE_CD
        AND RS.SER_NUM             = MM.SER_NUM
        AND MM.EZCANCELFLAG        = '0'
    </statement>

    <statement id="getDsCpoRtrnDtl" parameterClass="Map" resultClass="Map">
        SELECT
            DCRD.CPO_ORD_NUM
          , DCRD.DS_CPO_RTRN_LINE_NUM
          , DCRD.DS_CPO_RTRN_LINE_SUB_NUM
        FROM
            DS_CPO_RTRN_DTL DCRD
        WHERE
            DCRD.GLBL_CMPY_CD             = #glblCmpyCd#
        AND DCRD.CPO_ORD_NUM              = #trxOrdNum#
        AND DCRD.DS_CPO_RTRN_LINE_NUM     = #trxLineNum#
        AND DCRD.DS_CPO_RTRN_LINE_SUB_NUM = #trxLineSubNum#
        AND DCRD.EZCANCELFLAG     = '0'
    </statement>

    <statement id="getRmMachMstrPk" parameterClass="Map" resultClass="Map">
        SELECT
             ROD.SVC_MACH_MSTR_PK
            ,ROD.RMNF_TO_CMPT_SER_NUM
            ,RO.SVC_CONFIG_MSTR_PK
        FROM
             RMNF_ORD RO
            ,RMNF_ORD_DTL ROD
        WHERE
            RO.GLBL_CMPY_CD           = #glblCmpyCd#
        AND RO.RMNF_ORD_NUM           = #trxOrdNum#
        AND RO.GLBL_CMPY_CD           = ROD.GLBL_CMPY_CD
        AND RO.RMNF_ORD_NUM           = ROD.RMNF_ORD_NUM
        AND ROD.RMNF_ORD_DTL_LINE_NUM = #trxLineNum#
        AND RO.EZCANCELFLAG           = '0'
        AND ROD.EZCANCELFLAG          = '0'
    </statement>

    <statement id="getSoSerForIc" parameterClass="Map" resultClass="Map">
        SELECT
             SS.SER_NUM
            ,SS.SVC_MACH_MSTR_PK
        FROM
            SHPG_ORD             SO
           ,SHPG_ORD_DTL         SOD
           ,SO_SER               SS
        WHERE
            SO.GLBL_CMPY_CD       = #glblCmpyCd#
        AND SO.SO_NUM             = #soNum#
        AND SO.GLBL_CMPY_CD       = SOD.GLBL_CMPY_CD
        AND SO.SO_NUM             = SOD.SO_NUM
        AND SOD.SO_SLP_NUM        = #soSlpNum#
        AND SOD.GLBL_CMPY_CD      = SS.GLBL_CMPY_CD
        AND SOD.SO_NUM            = SS.SO_NUM
        AND SOD.SO_SLP_NUM        = SS.SO_SLP_NUM
        AND SS.MDSE_CD            = #mdseCd#
        <isNotNull property="whPickFlgY">
        AND SS.WH_PICK_FLG        = #whPickFlgY#
        </isNotNull>
        <isNotNull property="ordAsgFlgY">
        AND SS.ORD_ASG_FLG        = #ordAsgFlgY#
        </isNotNull>
        AND SO.EZCANCELFLAG       = '0'
        AND SOD.EZCANCELFLAG      = '0'
        AND SS.EZCANCELFLAG       = '0'
    </statement>

    <statement id="getIbListNonSerItem" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            SMM.SVC_MACH_MSTR_PK
        FROM
             SVC_MACH_MSTR SMM
        WHERE
            SMM.GLBL_CMPY_CD       = #glblCmpyCd#
        AND SMM.TRX_HDR_NUM        = #trxHdrNum#
        AND SMM.TRX_LINE_NUM       = #trxLineNum#
        AND SMM.SER_NUM            IS NULL
        AND SMM.EZCANCELFLAG       = '0'
        AND ROWNUM             &lt;= #rowNum#
    </statement>

    <statement id="checkShippingOrder" parameterClass="Map" resultClass="Integer">
        SELECT
            COUNT(1)
        FROM
            SHPG_ORD SO
        WHERE
            SO.GLBL_CMPY_CD        = #glblCmpyCd#
        AND SO.SO_NUM              = #soNum#
        AND SO.SHPG_STS_CD         = #shipped#
        AND SO.EZCANCELFLAG        = '0'
    </statement>
</sqlMap>
