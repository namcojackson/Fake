<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NWZC175001Query">

    <statement id="cntBuyoutApprovalHold" parameterClass="Map" resultClass="Integer">
        SELECT
            COUNT(H.GLBL_CMPY_CD)
        FROM
            HLD H
        WHERE
            H.GLBL_CMPY_CD         = #glblCmpyCd#
        AND H.CPO_ORD_NUM          = #dsCpoDtlTMsg.cpoOrdNum#
        AND H.CPO_DTL_LINE_NUM     = #dsCpoDtlTMsg.cpoDtlLineNum#
        AND H.CPO_DTL_LINE_SUB_NUM = #dsCpoDtlTMsg.cpoDtlLineSubNum#
        AND H.HLD_RSN_CD           = #hldRsnCd#
        AND H.EZCANCELFLAG         = '0'
    </statement>

    <statement id="cntCreditOrder" parameterClass="Map" resultClass="Integer">
        SELECT
            COUNT(CD.GLBL_CMPY_CD)
        FROM
            CPO_DTL CD
        WHERE
            CD.GLBL_CMPY_CD         = #pMsg.glblCmpyCd#
        AND CD.EZCANCELFLAG         = '0'
        AND CD.CPO_ORD_NUM          = #pMsg.cpoOrdNum_I#
        AND CD.ORD_LINE_STS_CD      &lt;&gt; #ordLineStsCd#
        AND CD.CR_REBIL_CD          = #crRebilCd#
    </statement>
    
    <statement id="getRqstProcFlg" parameterClass="Map" resultClass="String">
        SELECT
            PT.CHK_RQST_PROC_FLG
        FROM
            DS_ORD_LINE_PROC_DFN PD
           ,ORD_PROC_TP PT
        WHERE
            PD.GLBL_CMPY_CD        = #pMsg.glblCmpyCd#
        AND PD.EZCANCELFLAG        = '0'
        AND PD.DS_ORD_TP_CD        = #dsCpoTMsg.dsOrdTpCd#
        AND PD.DS_ORD_LINE_CATG_CD = #dsCpoDtlTMsg.dsOrdLineCatgCd# 
        AND PD.EFF_FROM_DT         &lt;= #pMsg.slsDt#
        AND (PD.EFF_THRU_DT        &gt;= #pMsg.slsDt#
         OR PD.EFF_THRU_DT         IS NULL)
        AND PD.ACTV_FLG            = 'Y'
        AND PD.GLBL_CMPY_CD        = PT.GLBL_CMPY_CD
        AND PD.ORD_PROC_TP_CD      = PT.ORD_PROC_TP_CD
        AND PT.EFF_FROM_DT         &lt;= #pMsg.slsDt#
        AND (PT.EFF_THRU_DT        &gt;= #pMsg.slsDt#
         OR PT.EFF_THRU_DT         IS NULL)
        AND PT.ACTV_FLG            = 'Y'
        AND PT.EZCANCELFLAG        = '0'
    </statement>
</sqlMap>
