<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NMAB701001">
    <statement id="getPrcListEquipWrk" parameterClass="Map" resultClass="Map">
        SELECT 
            PLEW.UPLD_CSV_RQST_PK
            ,PLEW.UPLD_CSV_RQST_ROW_NUM
            <!-- 2018/03/20 S21_NA#23399 Mod -->
            <!-- ,PLEW.PRC_CATG_NM  -->
            ,UPPER(PLEW.PRC_CATG_NM) AS PRC_CATG_NM
            <!-- 2018/03/20 S21_NA#23399 Mod -->  
            ,PLEW.PRC_LIST_TP_DESC_TXT
            ,PLEW.PRC_LIST_EQUIP_CONFIG_NUM
            ,PLEW.PRC_LIST_EQUIP_CONFIG_NM
            ,PLEW.PRC_QLFY_TP_DESC_TXT
            ,PLEW.PRC_QLFY_VAL_TXT
            ,PLEW.PKG_UOM_DESC_TXT
            ,PLEW.PRC_LIST_EQUIP_PRC_AMT
            ,PLEW.MIN_PRC_AMT
            ,PLEW.MAX_PRC_AMT
            ,PLEW.PRC_TERM_AOT
            ,PLEW.PRC_TERM_UOM_DESC_TXT
            ,PLEW.CUST_BID_QTY
            ,PLEW.MLY_PMT_AMT
            ,PLEW.MIN_LEASE_PMT_AMT
            ,PLEW.MAX_LEASE_PMT_AMT
            ,PLEW.PRC_FMLA_NM
            <!-- 2018/06/06 S21_QC#26292 Mod -->
            <!-- ,PLEW.OPEN_MKT_FLG -->
            ,PLEW.OPEN_MKT_DESC_TXT
            <!-- 2018/06/06 S21_QC#26292 Mod -->
            ,PLEW.QUOT_REV_AMT
            ,PLEW.COMP_CD
            ,PLEW.EFF_FROM_DT
            ,PLEW.EFF_THRU_DT
            ,PLEW.UPLD_CSV_RQST_CMNT_TXT
        FROM
            PRC_LIST_EQUIP_WRK PLEW
        WHERE
                PLEW.GLBL_CMPY_CD = #glblCmpyCd#
            AND PLEW.EZCANCELFLAG = '0'
            AND PLEW.UPLD_CSV_RQST_PK = #uploadRequestPk#
            <!-- 2018/05/08 QC#20269 H.Kumagai Mod Start -->
            AND PLEW.UPLD_CSV_RQST_CMNT_TXT IS NULL
            <!-- 2018/05/08 QC#20269 H.Kumagai Mod End -->
    </statement>
    
        <statement id="getEquip" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            PLE.PRC_LIST_EQUIP_PK
        FROM
            PRC_LIST_EQUIP PLE
        WHERE
                PLE.GLBL_CMPY_CD              = #glblCmpyCd#
            AND PLE.EZCANCELFLAG              = '0'
            AND PLE.PRC_CATG_CD               = #prcCatgCd#
            AND PLE.DEL_FLG                   = 'N'

            <isNotNull property="prcListEquipConfigNum">
            AND PLE.PRC_LIST_EQUIP_CONFIG_NUM = #prcListEquipConfigNum#
            </isNotNull>
            <isNull property = "prcListEquipConfigNum">
            AND PLE.PRC_LIST_EQUIP_CONFIG_NUM IS NULL
            </isNull>
            <isNotNull property="prcListEquipConfigNm">
            AND PLE.PRC_LIST_EQUIP_CONFIG_NM  = #prcListEquipConfigNm#
            </isNotNull>
            <isNull property = "prcListEquipConfigNm">
            AND PLE.PRC_LIST_EQUIP_CONFIG_NM  IS NULL
            </isNull>
            <isNotNull property="prcQlfyTpCd">
            AND PLE.PRC_QLFY_TP_CD            = #prcQlfyTpCd#
            </isNotNull>
            <isNull property = "prcQlfyTpCd">
            AND PLE.PRC_QLFY_TP_CD            IS NULL
            </isNull>
            <isNotNull property="prcQlfyValTxt">
            AND PLE.PRC_QLFY_VAL_TXT          = #prcQlfyValTxt#
            </isNotNull>
            <isNull property = "prcQlfyValTxt">
            AND PLE.PRC_QLFY_VAL_TXT          IS NULL
            </isNull>
            <isNotNull property="pkgUomCd">
            AND PLE.PKG_UOM_CD                = #pkgUomCd#
            </isNotNull>
            <isNull property = "pkgUomCd">
            AND PLE.PKG_UOM_CD                IS NULL
            </isNull>
            <isNotNull property="prcTermUomCd">
            AND PLE.PRC_TERM_UOM_CD           = #prcTermUomCd#
            </isNotNull>
            <isNull property = "prcTermUomCd">
            AND PLE.PRC_TERM_UOM_CD           IS NULL
            </isNull>
            <isNotNull property="prcTermAot">
            AND PLE.PRC_TERM_AOT              = #prcTermAot#
            </isNotNull>
            <isNull property = "prcTermAot">
            AND PLE.PRC_TERM_AOT              IS NULL
            </isNull>
            AND ((PLE.EFF_FROM_DT            &gt; #effFromDt#
            AND PLE.EFF_FROM_DT              &lt;= #effThruDt#)
             OR (PLE.EFF_FROM_DT             &lt; #effFromDt#
            AND NVL(PLE.EFF_THRU_DT , '99991231') &gt;= #effFromDt#)
             OR PLE.EFF_FROM_DT              = #effFromDt#)
            AND ROWNUM                        &lt;= 1
    </statement>

    <statement id="getPrcCatgMaxSortNum" parameterClass="Map" resultClass="BigDecimal">
        SELECT
             MAX(PC.PRC_CATG_SORT_NUM) MAX_SORT_NUM
        FROM
             PRC_CATG PC
        WHERE
             PC.GLBL_CMPY_CD = #glblCmpyCd#
         AND PC.EZCANCELFLAG = '0'
    </statement>

    <statement id="getPrcListSvcWrk" parameterClass="Map" resultClass="Map">
        SELECT
            PLSW.UPLD_CSV_RQST_PK
            ,PLSW.UPLD_CSV_RQST_ROW_NUM
            <!-- 2018/03/20 S21_NA#23399 Mod -->
            <!-- ,PLSW.PRC_CATG_NM  -->
            ,UPPER(PLSW.PRC_CATG_NM) AS PRC_CATG_NM
            <!-- 2018/03/20 S21_NA#23399 Mod --> 
            ,PLSW.PRC_LIST_TP_DESC_TXT
            ,PLSW.PRC_RATE_TP_DESC_TXT
            ,PLSW.MDL_NM
            ,PLSW.PRC_MTR_PKG_NM
            ,PLSW.PRC_SVC_PLN_TP_DESC_TXT
            ,PLSW.PRC_SVC_CONTR_TP_DESC_TXT
            ,PLSW.MTR_LB_NM
            ,PLSW.MIN_COPY_VOL_CNT
            ,PLSW.MAX_COPY_VOL_CNT
            ,PLSW.PRC_LIST_BAND_DESC_TXT
            ,PLSW.BASE_AMT
            ,PLSW.MIN_BASE_AMT
            ,PLSW.MAX_BASE_AMT
            ,PLSW.CPC_AMT_RATE
            ,PLSW.MIN_CPC_AMT_RATE
            ,PLSW.MAX_CPC_AMT_RATE
            ,PLSW.TERM_FROM_MTH_AOT
            ,PLSW.TERM_THRU_MTH_AOT
            ,PLSW.PRC_SVC_ZONE_DESC_TXT
            ,PLSW.MDSE_CD
            ,PLSW.EFF_FROM_DT
            ,PLSW.EFF_THRU_DT
            ,PLSW.UPLD_CSV_RQST_CMNT_TXT
            ,PLSW.QUOT_REV_AMT
            ,PLSW.COMP_CD
            ,PLSW.PRC_LIST_MDSE_CD
        FROM 
            PRC_LIST_SVC_WRK PLSW
        WHERE
                PLSW.GLBL_CMPY_CD = #glblCmpyCd#
            AND PLSW.EZCANCELFLAG = '0'
            AND PLSW.UPLD_CSV_RQST_PK = #uploadRequestPk#
            <!-- 2018/05/08 QC#20269 H.Kumagai Mod Start -->
            AND PLSW.UPLD_CSV_RQST_CMNT_TXT IS NULL
            <!-- 2018/05/08 QC#20269 H.Kumagai Mod End -->
    </statement>
    <statement id="getPrcListSvcTierWrk" parameterClass="Map" resultClass="Map">
        SELECT
            PLSTW.UPLD_CSV_RQST_PK
            ,PLSTW.UPLD_CSV_RQST_ROW_NUM
            <!-- 2018/03/20 S21_NA#23399 Mod -->
            <!-- ,PLSTW.PRC_CATG_NM  -->
            ,UPPER(PLSTW.PRC_CATG_NM) AS PRC_CATG_NM
            <!-- 2018/03/20 S21_NA#23399 Mod -->
            ,PLSTW.PRC_LIST_TP_DESC_TXT
            ,PLSTW.MDL_NM
            ,PLSTW.PRC_SVC_TIER_TP_DESC_TXT
            ,PLSTW.PRC_MTR_PKG_NM
            ,PLSTW.PRC_SVC_PLN_TP_DESC_TXT
            ,PLSTW.PRC_SVC_CONTR_TP_DESC_TXT
            ,PLSTW.MTR_LB_NM
            ,PLSTW.AVG_COPY_VOL_CNT
            ,PLSTW.MIN_COPY_VOL_CNT
            ,PLSTW.MAX_COPY_VOL_CNT
            ,PLSTW.PRC_LIST_BAND_DESC_TXT
            ,PLSTW.BASE_AMT
            ,PLSTW.MIN_BASE_AMT
            ,PLSTW.MAX_BASE_AMT
            ,PLSTW.CPC_AMT_RATE
            ,PLSTW.MIN_CPC_AMT_RATE
            ,PLSTW.MAX_CPC_AMT_RATE
            ,PLSTW.TERM_FROM_MTH_AOT
            ,PLSTW.TERM_THRU_MTH_AOT
            ,PLSTW.MDSE_CD
            ,PLSTW.EFF_FROM_DT
            ,PLSTW.EFF_THRU_DT
            ,PLSTW.UPLD_CSV_RQST_CMNT_TXT
        FROM
            PRC_LIST_SVC_TIER_WRK PLSTW
        WHERE
                PLSTW.GLBL_CMPY_CD = #glblCmpyCd#
            AND PLSTW.EZCANCELFLAG = '0'
            AND PLSTW.UPLD_CSV_RQST_PK = #uploadRequestPk#
            <!-- 2018/05/08 QC#20269 H.Kumagai Mod Start -->
            AND PLSTW.UPLD_CSV_RQST_CMNT_TXT IS NULL
            <!-- 2018/05/08 QC#20269 H.Kumagai Mod End -->
    </statement>
    <statement id="getPrcListSplyPgmWrk" parameterClass="Map" resultClass="Map">
        SELECT
            PLSPW.UPLD_CSV_RQST_PK
            ,PLSPW.UPLD_CSV_RQST_ROW_NUM
            <!-- 2018/03/20 S21_NA#23399 Mod -->
            <!-- ,PLSPW.PRC_CATG_NM  -->
            ,UPPER(PLSPW.PRC_CATG_NM) AS PRC_CATG_NM
            <!-- 2018/03/20 S21_NA#23399 Mod -->
            ,PLSPW.PRC_LIST_TP_DESC_TXT
            ,PLSPW.MDL_NM
            ,PLSPW.PRC_MTR_PKG_NM
            ,PLSPW.PRC_SVC_PLN_TP_DESC_TXT
            ,PLSPW.PRC_SVC_CONTR_TP_DESC_TXT
            ,PLSPW.MTR_LB_NM
            ,PLSPW.MIN_COPY_VOL_CNT
            ,PLSPW.MAX_COPY_VOL_CNT
            ,PLSPW.PRC_LIST_BAND_DESC_TXT
            ,PLSPW.TOT_BASE_AMT
            ,PLSPW.SPLY_BASE_AMT
            ,PLSPW.CPC_AMT_RATE
            ,PLSPW.MIN_CPC_AMT_RATE
            ,PLSPW.MAX_CPC_AMT_RATE
            ,PLSPW.TERM_FROM_MTH_AOT
            ,PLSPW.TERM_THRU_MTH_AOT
            ,PLSPW.MDSE_CD
            ,PLSPW.PRC_SVC_ZONE_DESC_TXT
            ,PLSPW.SPLY_AGMT_PLN_NM
            ,PLSPW.EFF_FROM_DT
            ,PLSPW.EFF_THRU_DT
            ,PLSPW.UPLD_CSV_RQST_CMNT_TXT
        FROM
            PRC_LIST_SPLY_PGM_WRK PLSPW
        WHERE
                PLSPW.GLBL_CMPY_CD = #glblCmpyCd#
            AND PLSPW.EZCANCELFLAG = '0'
            AND PLSPW.UPLD_CSV_RQST_PK = #uploadRequestPk#
            <!-- 2018/05/08 QC#20269 H.Kumagai Mod Start -->
            AND PLSPW.UPLD_CSV_RQST_CMNT_TXT IS NULL
            <!-- 2018/05/08 QC#20269 H.Kumagai Mod End -->
    </statement>
    <statement id="getPrcListAddlChrgWrk" parameterClass="Map" resultClass="Map">
        SELECT
            PLACW.UPLD_CSV_RQST_PK
            ,PLACW.UPLD_CSV_RQST_ROW_NUM
            <!-- 2018/03/20 S21_NA#23399 Mod -->
            <!-- ,PLACW.PRC_CATG_NM  -->
            ,UPPER(PLACW.PRC_CATG_NM) AS PRC_CATG_NM
            <!-- 2018/03/20 S21_NA#23399 Mod -->
            ,PLACW.PRC_LIST_TP_DESC_TXT
            ,PLACW.MDSE_CD
            ,PLACW.PRC_ADDL_CHRG_TP_DESC_TXT
            ,PLACW.MKT_MDL_SEG_DESC_TXT
            ,PLACW.MDL_NM
            ,PLACW.ADDL_CHRG_PRC_AMT
            ,PLACW.EFF_FROM_DT
            ,PLACW.EFF_THRU_DT
            ,PLACW.UPLD_CSV_RQST_CMNT_TXT
        FROM 
           PRC_LIST_ADDL_CHRG_WRK PLACW
        WHERE
                PLACW.GLBL_CMPY_CD = #glblCmpyCd#
            AND PLACW.EZCANCELFLAG = '0'
            AND PLACW.UPLD_CSV_RQST_PK = #uploadRequestPk#
            <!-- 2018/05/08 QC#20269 H.Kumagai Mod Start -->
            AND PLACW.UPLD_CSV_RQST_CMNT_TXT IS NULL
            <!-- 2018/05/08 QC#20269 H.Kumagai Mod End -->
    </statement>
    <statement id="getPrcListLeaseRateWrk" parameterClass="Map" resultClass="Map">
        SELECT
            PLLRW.UPLD_CSV_RQST_PK
            ,PLLRW.UPLD_CSV_RQST_ROW_NUM
            <!-- 2018/03/20 S21_NA#23399 Mod -->
            <!-- ,PLLRW.PRC_CATG_NM  -->
            ,UPPER(PLLRW.PRC_CATG_NM) AS PRC_CATG_NM
            <!-- 2018/03/20 S21_NA#23399 Mod -->
            ,PLLRW.PRC_LIST_TP_DESC_TXT
            ,PLLRW.PRC_LEASE_CMPY_ABBR_NM
            ,PLLRW.DS_ACCT_NM
            ,PLLRW.PRC_PGM_TP_DESC_TXT
            ,PLLRW.PRC_EQUIP_TP_DESC_TXT
            ,PLLRW.MDL_NM
            ,PLLRW.MIN_TOT_FIN_AMT
            ,PLLRW.MAX_TOT_FIN_AMT
            ,PLLRW.TERM_FROM_MTH_AOT
            ,PLLRW.TERM_THRU_MTH_AOT
            ,PLLRW.LEASE_RATE
            ,PLLRW.EFF_FROM_DT
            ,PLLRW.EFF_THRU_DT
            ,PLLRW.UPLD_CSV_RQST_CMNT_TXT
        FROM
            PRC_LIST_LEASE_RATE_WRK PLLRW
        WHERE
                PLLRW.GLBL_CMPY_CD = #glblCmpyCd#
            AND PLLRW.EZCANCELFLAG = '0'
            AND PLLRW.UPLD_CSV_RQST_PK = #uploadRequestPk#
            <!-- 2018/05/08 QC#20269 H.Kumagai Mod Start -->
            AND PLLRW.UPLD_CSV_RQST_CMNT_TXT IS NULL
            <!-- 2018/05/08 QC#20269 H.Kumagai Mod End -->
    </statement>
    <statement id="getPrcListLeaseRtrnWrk" parameterClass="Map" resultClass="Map">
        SELECT
            PLLRW.UPLD_CSV_RQST_PK
            ,PLLRW.UPLD_CSV_RQST_ROW_NUM
            <!-- 2018/03/20 S21_NA#23399 Mod -->
            <!-- ,PLLRW.PRC_CATG_NM  -->
            ,UPPER(PLLRW.PRC_CATG_NM) AS PRC_CATG_NM
            <!-- 2018/03/20 S21_NA#23399 Mod -->
            ,PLLRW.PRC_LIST_TP_DESC_TXT
            ,PLLRW.PRC_LEASE_CMPY_ABBR_NM
            ,PLLRW.SVC_SEG_DESC_TXT
            ,PLLRW.PRC_IN_OUT_RG_DESC_TXT
            ,PLLRW.DST_MILE_AMT
            ,PLLRW.RTRN_FEE_AMT
            ,PLLRW.EFF_FROM_DT
            ,PLLRW.EFF_THRU_DT
            ,PLLRW.UPLD_CSV_RQST_CMNT_TXT
        FROM 
            PRC_LIST_LEASE_RTRN_WRK PLLRW
        WHERE
                PLLRW.GLBL_CMPY_CD = #glblCmpyCd#
            AND PLLRW.EZCANCELFLAG = '0'
            AND PLLRW.UPLD_CSV_RQST_PK = #uploadRequestPk#
            <!-- 2018/05/08 QC#20269 H.Kumagai Mod Start -->
            AND PLLRW.UPLD_CSV_RQST_CMNT_TXT IS NULL
            <!-- 2018/05/08 QC#20269 H.Kumagai Mod End -->
    </statement>
    <statement id="getPrcListTradeInWrk" parameterClass="Map" resultClass="Map">
        SELECT
            PLTVW.UPLD_CSV_RQST_PK
            ,PLTVW.UPLD_CSV_RQST_ROW_NUM
            <!-- 2018/03/20 S21_NA#23399 Mod -->
            <!-- ,PLTVW.PRC_CATG_NM  -->
            ,UPPER(PLTVW.PRC_CATG_NM) AS PRC_CATG_NM
            <!-- 2018/03/20 S21_NA#23399 Mod -->
            ,PLTVW.PRC_LIST_TP_DESC_TXT
            ,PLTVW.MDL_NM
            ,PLTVW.TI_AMT
            ,PLTVW.MTR_RNG_REQ_FLG
            ,PLTVW.FROM_MTR_COPY_VOL_CNT
            ,PLTVW.THRU_MTR_COPY_VOL_CNT
            ,PLTVW.EFF_FROM_DT
            ,PLTVW.EFF_THRU_DT
            ,PLTVW.UPLD_CSV_RQST_CMNT_TXT
        FROM 
            PRC_LIST_TI_VAL_WRK PLTVW
        WHERE 
                PLTVW.GLBL_CMPY_CD = #glblCmpyCd#
            AND PLTVW.EZCANCELFLAG = '0'
            AND PLTVW.UPLD_CSV_RQST_PK = #uploadRequestPk#
            <!-- 2018/05/08 QC#20269 H.Kumagai Mod Start -->
            AND PLTVW.UPLD_CSV_RQST_CMNT_TXT IS NULL
            <!-- 2018/05/08 QC#20269 H.Kumagai Mod End -->
    </statement>
    <!-- 2018/05/17 S21_QC#25367 Add -->
    <statement id="getPkgUomCd" parameterClass="Map" resultClass="Map">
        SELECT 
            MSP.PKG_UOM_CD
        FROM
            MDSE_STORE_PKG MSP
		   ,MDSE M
        WHERE
		        MSP.GLBL_CMPY_CD    = M.GLBL_CMPY_CD
            AND MSP.EZCANCELFLAG    = M.EZCANCELFLAG
            AND MSP.MDSE_CD         = M.MDSE_CD

            AND MSP.GLBL_CMPY_CD    = #glblCmpyCd#
            AND MSP.EZCANCELFLAG    = '0'
            AND MSP.BASE_PKG_UOM_CD = #pkgUomCd#
            AND MSP.MDSE_CD         = #prcQlfyValTxt#
        GROUP BY MSP.PKG_UOM_CD
		UNION

		SELECT 
            MSP.PKG_UOM_CD
        FROM
            MDSE_STORE_PKG MSP
		   ,ORD_TAKE_MDSE OTM
        WHERE
		        MSP.GLBL_CMPY_CD     = OTM.GLBL_CMPY_CD
            AND MSP.EZCANCELFLAG     = OTM.EZCANCELFLAG
            AND MSP.MDSE_CD          = OTM.MDSE_CD

            AND MSP.GLBL_CMPY_CD     = #glblCmpyCd#
            AND MSP.EZCANCELFLAG     = '0'
            AND MSP.BASE_PKG_UOM_CD  = #pkgUomCd#
            AND OTM.ORD_TAKE_MDSE_CD = #prcQlfyValTxt#
        GROUP BY MSP.PKG_UOM_CD
    </statement>
    <!-- 2018/05/17 S21_QC#25367 Add -->
</sqlMap>
