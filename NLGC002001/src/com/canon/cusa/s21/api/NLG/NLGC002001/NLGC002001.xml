<?xml version="1.0" encoding="UTF-8"?>

<sqlMap namespace="NLGC002001">

    <typeAlias alias="MDSE_STORE_PKGTMsg"   type="business.db.MDSE_STORE_PKGTMsg"/>

    <resultMap id="result.MDSE_STORE_PKGTMsg" class="MDSE_STORE_PKGTMsg">
        <result property="glblCmpyCd"         column="GLBL_CMPY_CD"           javaType="EZDTStringItem"/>
        <result property="pkgUomCd"           column="PKG_UOM_CD"             javaType="EZDTStringItem"/>
        <result property="mdseCd"             column="MDSE_CD"                javaType="EZDTStringItem"/>
        <result property="scc14Num"           column="SCC14_NUM"              javaType="EZDTStringItem"/>
        <result property="gtinCd"             column="GTIN_CD"                javaType="EZDTStringItem"/>
        <result property="inEachQty"          column="IN_EACH_QTY"            javaType="EZDTBigDecimalItem"/>
        <result property="inInchLg"           column="IN_INCH_LG"             javaType="EZDTBigDecimalItem"/>
        <result property="inInchWdt"          column="IN_INCH_WDT"            javaType="EZDTBigDecimalItem"/>
        <result property="inInchHgt"          column="IN_INCH_HGT"            javaType="EZDTBigDecimalItem"/>
        <result property="inPoundWt"          column="IN_POUND_WT"            javaType="EZDTBigDecimalItem"/>
        <result property="inInchVol"          column="IN_INCH_VOL"            javaType="EZDTBigDecimalItem"/>
        <result property="ovrdUpcOrScc14Num"  column="OVRD_UPC_OR_SCC14_NUM"  javaType="EZDTStringItem"/>
        <result property="upcOrScc14LbFlg"    column="UPC_OR_SCC14_LB_FLG"    javaType="EZDTStringItem"/>
        <result property="qtyPkgApvlUserId"   column="QTY_PKG_APVL_USER_ID"   javaType="EZDTStringItem"/>
        <result property="qtyPkgApvlUpdDt"    column="QTY_PKG_APVL_UPD_DT"    javaType="EZDTStringItem"/>
        <result property="qtyPkgApvlStsCd"    column="QTY_PKG_APVL_STS_CD"    javaType="EZDTStringItem"/>
        <result property="dmnPkgApvlUserId"   column="DMN_PKG_APVL_USER_ID"   javaType="EZDTStringItem"/>
        <result property="dmnPkgApvlUpdDt"    column="DMN_PKG_APVL_UPD_DT"    javaType="EZDTStringItem"/>
        <result property="dmnPkgApvlStsCd"    column="DMN_PKG_APVL_STS_CD"    javaType="EZDTStringItem"/>
        <result property="adminPkgApvlUserId" column="ADMIN_PKG_APVL_USER_ID" javaType="EZDTStringItem"/>
        <result property="adminPkgApvlUpdDt"  column="ADMIN_PKG_APVL_UPD_DT"  javaType="EZDTStringItem"/>
        <result property="adminPkgApvlStsCd"  column="ADMIN_PKG_APVL_STS_CD"  javaType="EZDTStringItem"/>
    </resultMap>

    <statement id="getMdseStorePkg" parameterClass="Map" resultMap="result.MDSE_STORE_PKGTMsg">
        SELECT
               MSP.PKG_UOM_CD
              ,MSP.MDSE_CD
              ,MSP.SCC14_NUM
              ,MSP.OVRD_UPC_OR_SCC14_NUM
              ,MSP.IN_EACH_QTY
              ,NVL(MSP.IN_POUND_WT, 0)                     AS IN_POUND_WT
              ,ROUND(NVL(MSP.IN_INCH_LG,  0), #declPlace#) AS IN_INCH_LG
              ,ROUND(NVL(MSP.IN_INCH_WDT, 0), #declPlace#) AS IN_INCH_WDT
              ,ROUND(NVL(MSP.IN_INCH_HGT, 0), #declPlace#) AS IN_INCH_HGT
              ,NVL(MSP.IN_INCH_VOL, 0)                     AS IN_INCH_VOL
          FROM
               MDSE_STORE_PKG MSP
              ,PKG_UOM        PU
         WHERE
               MSP.GLBL_CMPY_CD   = #glblCmpyCd#
           AND PU.GLBL_CMPY_CD    = #glblCmpyCd#
           AND MSP.EZCANCELFLAG   = '0'
           AND PU.EZCANCELFLAG    = '0'
           AND MSP.PKG_UOM_CD     = PU.PKG_UOM_CD
           AND PU.PKG_UOM_STD_FLG = #pkgUomStdFlg#
           AND MSP.MDSE_CD        = #mdseCd#
           AND DECODE(NVL(MSP.QTY_PKG_APVL_STS_CD, #qtyPkgApvlStsCdSa#), #qtyPkgApvlStsCdSa#, 'N', #qtyPkgApvlStsCdSu#, 'Y') = #qtyPkgApvlStsCdFlg#
    </statement>

    <statement id="getMdseSerNumRng" parameterClass="Map">
        SELECT DISTINCT
               TO_CHAR(LG_SER_NUM, #fmtLgSerNumFm09#) AS FMT_LG_SER_NUM
              ,LG_SER_NUM
              ,COUNT(DISTINCT LG_SER_NUM) OVER()      AS NUM_RNG
              ,MIN(LG_SER_NUM) OVER()                 AS MIN_LEN
              ,MAX(LG_SER_NUM) OVER()                 AS MAX_LEN
              ,SER_NUM_DEF_FLG
              ,FROM_SER_NUM
              ,THRU_SER_NUM
              ,MDSE_SER_NUM_RNG_PK
              ,MDSE_CD
              ,TO_CHAR(MIN(LG_SER_NUM) OVER(), #fmtLgSerNumFm09#) AS FMT_MIN_LEN
              ,TO_CHAR(MAX(LG_SER_NUM) OVER(), #fmtLgSerNumFm09#) AS FMT_MAX_LEN
          FROM
               MDSE_SER_NUM_RNG
         WHERE
               GLBL_CMPY_CD          = #glblCmpyCd#
           AND EZCANCELFLAG          = '0'
           AND MDSE_CD               = #mdseCd#
           AND NVL(LG_SER_NUM, 0) &gt; 0
         ORDER BY
               MDSE_SER_NUM_RNG_PK ASC
    </statement>
</sqlMap>
