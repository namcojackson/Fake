<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="NFCL3140Query">
    <typeAlias alias="NFCL3140CMsg" type="business.blap.NFCL3140.NFCL3140CMsg"/>
    <typeAlias alias="NFCL3140_ACMsg" type="business.blap.NFCL3140.NFCL3140_ACMsg"/>
    <typeAlias alias="NFCL3140_BCMsg" type="business.blap.NFCL3140.NFCL3140_BCMsg"/>
    <statement id="getPulldownListInvTp" parameterClass="Map" resultClass="Map">
        SELECT
             INV_TP_CD
            ,INV_TP_DESC_TXT
        FROM
            (
                SELECT
                     IT.INV_TP_CD
                    ,IT.INV_TP_DESC_TXT
                FROM
                    INV_TP IT
                WHERE
                        IT.GLBL_CMPY_CD = #glblCmpyCd#
                    AND IT.INV_TP_CD IN (#invoice#, #creditMemo#)
                    AND IT.EZCANCELFLAG = '0'
                ORDER BY
                    IT.INV_TP_SORT_NUM
            )
        WHERE
            ROWNUM &lt;= #rowNum#
    </statement>
    <statement id="getPulldownListGrouping" parameterClass="Map" resultMap="result.getPulldownListGrouping">
        SELECT
             DS_INV_GRP_COL_DESC_TXT
        FROM
            (
                SELECT
                     DIGC.DS_INV_GRP_COL_DESC_TXT
                FROM
                    DS_INV_GRP_COL DIGC
                WHERE
                        DIGC.GLBL_CMPY_CD = #glblCmpyCd#
                    AND DIGC.EZCANCELFLAG = '0'
                ORDER BY
                    DIGC.DS_INV_GRP_COL_SORT_NUM
            )
        WHERE
            ROWNUM &lt;= #rowNum#
    </statement>
    <statement id="getDetailData" parameterClass="Map" resultMap="result.getDetailData">
        SELECT
             DIT.DS_INV_TP_CD
            ,DIT.EZUPTIME
            ,DIT.EZUPTIMEZONE
            ,DIT.DS_INV_TP_NM
            ,DIT.DS_INV_TP_DESC_TXT
            ,DIT.INV_TP_CD
            ,DIT.CR_DS_INV_TP_CD
            ,DIT_CR.DS_INV_TP_NM                                    AS CR_DS_INV_TP_NM
            ,DIT.INV_SRC_TXT
            ,CASE WHEN DIT.EZCANCELFLAG = '0' THEN 'Y' ELSE 'N' END AS ACTIVE_FLAG
            ,DIT.POST_TO_GL_FLG
            ,DIT.OPEN_AR_FLG
            ,DIT.TAX_CALC_FLG
            ,DIT.TAX_EXEM_FLG
            ,DIT.INV_PRINT_FLG
            ,DIT.AUTO_INV_NUM_FLG
            ,DIT.AR_COA_CMPY_CD
            ,DIT.AR_COA_BR_CD
            ,DIT.AR_COA_CC_CD
            ,DIT.AR_COA_ACCT_CD
            ,DIT.AR_COA_PROD_CD
            ,DIT.AR_COA_CH_CD
            ,DIT.AR_COA_AFFL_CD
            ,DIT.AR_COA_PROJ_CD
            ,DIT.AR_COA_EXTN_CD
            ,DIT.SLS_COA_CMPY_CD
            ,DIT.SLS_COA_BR_CD
            ,DIT.SLS_COA_CC_CD
            ,DIT.SLS_COA_ACCT_CD
            ,DIT.SLS_COA_PROD_CD
            ,DIT.SLS_COA_CH_CD
            ,DIT.SLS_COA_AFFL_CD
            ,DIT.SLS_COA_PROJ_CD
            ,DIT.SLS_COA_EXTN_CD
            ,DIT.TAX_COA_CMPY_CD
            ,DIT.TAX_COA_BR_CD
            ,DIT.TAX_COA_CC_CD
            ,DIT.TAX_COA_ACCT_CD
            ,DIT.TAX_COA_PROD_CD
            ,DIT.TAX_COA_CH_CD
            ,DIT.TAX_COA_AFFL_CD
            ,DIT.TAX_COA_PROJ_CD
            ,DIT.TAX_COA_EXTN_CD
            ,DIT.UN_EARN_COA_CMPY_CD
            ,DIT.UN_EARN_COA_BR_CD
            ,DIT.UN_EARN_COA_CC_CD
            ,DIT.UN_EARN_COA_ACCT_CD
            ,DIT.UN_EARN_COA_PROD_CD
            ,DIT.UN_EARN_COA_CH_CD
            ,DIT.UN_EARN_COA_AFFL_CD
            ,DIT.UN_EARN_COA_PROJ_CD
            ,DIT.UN_EARN_COA_EXTN_CD
            ,DIT.AUTO_SEQ_CD
        FROM
             DS_INV_TP DIT
            ,DS_INV_TP DIT_CR
        WHERE
                DIT.GLBL_CMPY_CD    = #glblCmpyCd#
            AND DIT.DS_INV_TP_CD    = #dsInvTpCd#
            AND DIT.GLBL_CMPY_CD    = DIT_CR.GLBL_CMPY_CD(+)
            AND DIT.CR_DS_INV_TP_CD = DIT_CR.DS_INV_TP_CD(+)
    </statement>
    <statement id="getGroupingData" parameterClass="Map" resultMap="result.getGroupingData">
        SELECT
            INV_GRP_ATTRB_TXT
        FROM
            (
                SELECT
                    DIGA.INV_GRP_ATTRB_TXT
                FROM
                    DS_INV_GRP_ATTRB DIGA
                WHERE
                        DIGA.GLBL_CMPY_CD = #glblCmpyCd#
                    AND DIGA.DS_INV_TP_CD = #dsInvTpCd#
                    AND DIGA.EZCANCELFLAG = '0'
                ORDER BY
                    DIGA.INV_GRP_ATTRB_SQ_NUM
            )
        WHERE
            ROWNUM &lt;= #rowNum#
    </statement>
    <statement id="getSameNmData" parameterClass="Map" resultClass="String">
        SELECT
            1
        FROM
            DS_INV_TP DIT
        WHERE
                DIT.GLBL_CMPY_CD = #glblCmpyCd#
            AND DIT.DS_INV_TP_NM = #dsInvTpNm#
            <isNotNull property="dsInvTpCd">
            AND DIT.DS_INV_TP_CD &lt;&gt; #dsInvTpCd#
            </isNotNull>
            AND ROWNUM = 1
    </statement>
    <statement id="getMaxData" parameterClass="Map" resultClass="Map">
        SELECT
             MAX(DIT.DS_INV_TP_CD)       AS MAX_DS_INV_TP_CD
            ,MAX(DIT.DS_INV_TP_SORT_NUM) AS MAX_DS_INV_TP_SORT_NUM
        FROM
            DS_INV_TP DIT
        WHERE
            DIT.GLBL_CMPY_CD = #glblCmpyCd#
    </statement>
    <statement id="getBeforeData" parameterClass="Map" resultClass="Map">
        SELECT
             DIT.EZCANCELFLAG
            ,DIT.EZUPTIME
            ,DIT.EZUPTIMEZONE
            ,DIT.DS_INV_TP_SORT_NUM
        FROM
             DS_INV_TP DIT
        WHERE
                DIT.GLBL_CMPY_CD    = #glblCmpyCd#
            AND DIT.DS_INV_TP_CD    = #dsInvTpCd#
        FOR UPDATE NOWAIT
    </statement>
    <statement id="getDeleteTarget" parameterClass="Map" resultClass="BigDecimal">
        SELECT
            DIGA.INV_GRP_ATTRB_SQ_NUM
        FROM
            DS_INV_GRP_ATTRB DIGA
        WHERE
                DIGA.GLBL_CMPY_CD = #glblCmpyCd#
            AND DIGA.DS_INV_TP_CD = #dsInvTpCd#
            AND DIGA.EZCANCELFLAG = '0'
    </statement>
    <statement id="getCrDsInvTpCd" parameterClass="Map" resultClass="String">
        SELECT
            1
        FROM
            DS_INV_TP DIT
        WHERE
                DIT.GLBL_CMPY_CD    = #glblCmpyCd#
            AND DIT.CR_DS_INV_TP_CD = #crDsInvTpCd#
            AND DIT.EZCANCELFLAG    = '0'
            AND ROWNUM = 1
    </statement>
    <statement id="getExtCurSqNum" parameterClass="Map" resultClass="String">
        SELECT
            ASE.EXT_CUR_SQ_NUM
        FROM
            AUTO_SQ_EXTN ASE
        WHERE
                ASE.GLBL_CMPY_CD = #glblCmpyCd#
            AND ASE.AUTO_SEQ_CD  = #autoSeqCd#
            AND ASE.EZCANCELFLAG = '0'
    </statement>
    <resultMap id="result.getPulldownListGrouping" class="NFCL3140_BCMsg">
        <result property="invGrpAttrbTxt"   column="DS_INV_GRP_COL_DESC_TXT"   javaType="EZDSStringItem"/>
    </resultMap>
    <resultMap id="result.getDetailData" class="NFCL3140CMsg">
        <result property="dsInvTpCd"           column="DS_INV_TP_CD"            javaType="EZDSStringItem"/>
        <result property="ezUpTime"            column="EZUPTIME"                javaType="EZDSStringItem"/>
        <result property="ezUpTimeZone"        column="EZUPTIMEZONE"            javaType="EZDSStringItem"/>
        <result property="dsInvTpNm"           column="DS_INV_TP_NM"            javaType="EZDSStringItem"/>
        <result property="dsInvTpDescTxt"      column="DS_INV_TP_DESC_TXT"      javaType="EZDSStringItem"/>
        <result property="invTpCd_SV"          column="INV_TP_CD"               javaType="EZDSStringItem"/>
        <result property="dsInvTpCd_AC"        column="CR_DS_INV_TP_CD"         javaType="EZDSStringItem"/>
        <result property="dsInvTpNm_AC"        column="CR_DS_INV_TP_NM"         javaType="EZDSStringItem"/>
        <result property="invSrcTxt"           column="INV_SRC_TXT"             javaType="EZDSStringItem"/>
        <result property="actvFlg"             column="ACTIVE_FLAG"             javaType="EZDSStringItem"/>
        <result property="postToGlFlg"         column="POST_TO_GL_FLG"          javaType="EZDSStringItem"/>
        <result property="openArFlg"           column="OPEN_AR_FLG"             javaType="EZDSStringItem"/>
        <result property="taxCalcFlg"          column="TAX_CALC_FLG"            javaType="EZDSStringItem"/>
        <result property="taxExemFlg"          column="TAX_EXEM_FLG"            javaType="EZDSStringItem"/>
        <result property="invPrintFlg"         column="INV_PRINT_FLG"           javaType="EZDSStringItem"/>
        <result property="autoInvNumFlg"       column="AUTO_INV_NUM_FLG"        javaType="EZDSStringItem"/>
        <result property="arCoaCmpyCd"         column="AR_COA_CMPY_CD"          javaType="EZDSStringItem"/>
        <result property="arCoaBrCd"           column="AR_COA_BR_CD"            javaType="EZDSStringItem"/>
        <result property="arCoaCcCd"           column="AR_COA_CC_CD"            javaType="EZDSStringItem"/>
        <result property="arCoaAcctCd"         column="AR_COA_ACCT_CD"          javaType="EZDSStringItem"/>
        <result property="arCoaProdCd"         column="AR_COA_PROD_CD"          javaType="EZDSStringItem"/>
        <result property="arCoaChCd"           column="AR_COA_CH_CD"            javaType="EZDSStringItem"/>
        <result property="arCoaAfflCd"         column="AR_COA_AFFL_CD"          javaType="EZDSStringItem"/>
        <result property="arCoaProjCd"         column="AR_COA_PROJ_CD"          javaType="EZDSStringItem"/>
        <result property="arCoaExtnCd"         column="AR_COA_EXTN_CD"          javaType="EZDSStringItem"/>
        <result property="slsCoaCmpyCd"        column="SLS_COA_CMPY_CD"         javaType="EZDSStringItem"/>
        <result property="slsCoaBrCd"          column="SLS_COA_BR_CD"           javaType="EZDSStringItem"/>
        <result property="slsCoaCcCd"          column="SLS_COA_CC_CD"           javaType="EZDSStringItem"/>
        <result property="slsCoaAcctCd"        column="SLS_COA_ACCT_CD"         javaType="EZDSStringItem"/>
        <result property="slsCoaProdCd"        column="SLS_COA_PROD_CD"         javaType="EZDSStringItem"/>
        <result property="slsCoaChCd"          column="SLS_COA_CH_CD"           javaType="EZDSStringItem"/>
        <result property="slsCoaAfflCd"        column="SLS_COA_AFFL_CD"         javaType="EZDSStringItem"/>
        <result property="slsCoaProjCd"        column="SLS_COA_PROJ_CD"         javaType="EZDSStringItem"/>
        <result property="slsCoaExtnCd"        column="SLS_COA_EXTN_CD"         javaType="EZDSStringItem"/>
        <result property="taxCoaCmpyCd"        column="TAX_COA_CMPY_CD"         javaType="EZDSStringItem"/>
        <result property="taxCoaBrCd"          column="TAX_COA_BR_CD"           javaType="EZDSStringItem"/>
        <result property="taxCoaCcCd"          column="TAX_COA_CC_CD"           javaType="EZDSStringItem"/>
        <result property="taxCoaAcctCd"        column="TAX_COA_ACCT_CD"         javaType="EZDSStringItem"/>
        <result property="taxCoaProdCd"        column="TAX_COA_PROD_CD"         javaType="EZDSStringItem"/>
        <result property="taxCoaChCd"          column="TAX_COA_CH_CD"           javaType="EZDSStringItem"/>
        <result property="taxCoaAfflCd"        column="TAX_COA_AFFL_CD"         javaType="EZDSStringItem"/>
        <result property="taxCoaProjCd"        column="TAX_COA_PROJ_CD"         javaType="EZDSStringItem"/>
        <result property="taxCoaExtnCd"        column="TAX_COA_EXTN_CD"         javaType="EZDSStringItem"/>
        <result property="unEarnCoaCmpyCd"     column="UN_EARN_COA_CMPY_CD"     javaType="EZDSStringItem"/>
        <result property="unEarnCoaBrCd"       column="UN_EARN_COA_BR_CD"       javaType="EZDSStringItem"/>
        <result property="unEarnCoaCcCd"       column="UN_EARN_COA_CC_CD"       javaType="EZDSStringItem"/>
        <result property="unEarnCoaAcctCd"     column="UN_EARN_COA_ACCT_CD"     javaType="EZDSStringItem"/>
        <result property="unEarnCoaProdCd"     column="UN_EARN_COA_PROD_CD"     javaType="EZDSStringItem"/>
        <result property="unEarnCoaChCd"       column="UN_EARN_COA_CH_CD"       javaType="EZDSStringItem"/>
        <result property="unEarnCoaAfflCd"     column="UN_EARN_COA_AFFL_CD"     javaType="EZDSStringItem"/>
        <result property="unEarnCoaProjCd"     column="UN_EARN_COA_PROJ_CD"     javaType="EZDSStringItem"/>
        <result property="unEarnCoaExtnCd"     column="UN_EARN_COA_EXTN_CD"     javaType="EZDSStringItem"/>
        <result property="autoSeqCd_SV"        column="AUTO_SEQ_CD"             javaType="EZDSStringItem"/>
    </resultMap>
    <resultMap id="result.getGroupingData" class="NFCL3140_ACMsg">
        <result property="invGrpAttrbTxt_SV"   column="INV_GRP_ATTRB_TXT"   javaType="EZDSStringItem"/>
    </resultMap>
</sqlMap>
