<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NSAB084001">
    <statement id="getEndSlsRepContrInfo" parameterClass="Map" resultClass="Map">
        SELECT
             T.TOC_CD            AS TOC_CD
            ,T.TOC_NM            AS TOC_NM
            ,C.DS_CONTR_NUM      AS DS_CONTR_NUM
            ,C.DS_CONTR_PK       AS DS_CONTR_PK
            ,SP.EFF_FROM_DT      AS EFF_FROM_DT
            ,SP.EFF_THRU_DT      AS EFF_THRU_DT
            ,C.DS_CONTR_STS_CD   AS DS_CONTR_STS_CD
            ,C.SVC_LINE_BIZ_CD   AS SVC_LINE_BIZ_CD
        FROM
            DS_CONTR          C
            ,DS_CONTR_STS_V   V
            ,TOC              T
            ,ORG_FUNC_ROLE_TP OFRT
            ,BIZ_AREA_ORG     BAO
            ,ORG_FUNC_ASG     OFA
            ,S21_PSN          SP
        WHERE
                T.GLBL_CMPY_CD            = #glblCmpyCd#
            AND T.TOC_CD                  = C.TOC_CD
            AND T.GLBL_CMPY_CD            = OFRT.GLBL_CMPY_CD
            AND T.ORG_FUNC_ROLE_TP_CD     = OFRT.ORG_FUNC_ROLE_TP_CD
            AND OFRT.SLS_REP_FLG          = 'Y'
            AND OFRT.EZCANCELFLAG         = '0'
            AND OFRT.GLBL_CMPY_CD         = BAO.GLBL_CMPY_CD
            AND OFRT.FIRST_ORG_CD         = BAO.BIZ_AREA_ORG_CD
            AND BAO.SLS_FLG               = 'Y'
            AND BAO.ORG_STRU_TP_CD        = #ostBos#
            AND T.GLBL_CMPY_CD            = OFA.GLBL_CMPY_CD
            AND T.TOC_CD                  = OFA.TOC_CD
            AND OFA.EZCANCELFLAG          = '0'
            AND OFA.GLBL_CMPY_CD          = SP.GLBL_CMPY_CD
            AND OFA.PSN_CD                = SP.PSN_CD
            AND (
                SP.EFF_FROM_DT            &gt; #slsDt#
                OR SP.EFF_THRU_DT         &lt; #slsDt#
                )
            AND SP.EZCANCELFLAG           = '0' 
            AND C.DS_CONTR_PK             = V.DS_CONTR_PK 
            AND V.ETTL_AVAL_FLG           = 'Y'
            AND C.DS_CONTR_STS_CD         NOT IN (#dcsExpired#, #dcsTerminated#)
    </statement>
</sqlMap>
    