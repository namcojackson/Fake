<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<sqlMap namespace="ZZIL0120Query">

	<typeAlias alias="HashMap"			type="java.util.HashMap"/>
	<typeAlias alias="ZZIL0120_ASMsg"	type="business.blap.ZZIL0120.ZZIL0120_ASMsg"/>
	
	<statement id="getMasterTableNames" parameterClass="Map" resultMap="masterTableNames">
		SELECT
				C.ITRL_INTFC_TRX_CONFIG_ID	AS	ITRL_INTFC_TRX_CONFIG_ID
			,	C.ITRL_INTFC_TRX_TBL_ID		AS	ITRL_INTFC_TRX_TBL_ID
			,	C.ITRL_INTFC_MSTR_TBL_ID	AS	ITRL_INTFC_MSTR_TBL_ID
			,	C.ITRL_INTFC_TRX_CONFIG_NM	AS	ITRL_INTFC_TRX_CONFIG_NM
		FROM
				ITRL_INTFC_TRX_CONFIG C
		WHERE
				C.GLBL_CMPY_CD  = #glblCmpyCd#
				AND C.ITRL_INTFC_TRX_CONFIG_ID != 'ITRL_ID_MYID'
				AND C.EZCANCELFLAG  = '0'
	</statement>
	
	<statement id="getItrlIntfcIdsForMap" parameterClass="Map" resultMap="itrlIntfcIds">
		SELECT
				#tblName#					AS	MSTR_TBL
			,	M.ITRL_INTFC_ID				AS	ITRL_INTFC_ID
			,	COUNT(*)					AS	TBL_COUNT
			,	MIN(M.EZINTIME)				AS	EZINTIME
			,	MAX(M.EZUPTIME)				AS	EZUPTIME
			<!-- 
			,	M.EZUPTIMEZONE				AS	EZUPTIMEZONE
			-->
		FROM
				$tblName$ M
		WHERE
			M.EZCANCELFLAG  = '0'
			AND M.ITRL_INTFC_TRX_CONFIG_ID = #configId#
		<isNotNull property="cMsg.itrlIntfcId">
			AND M.ITRL_INTFC_ID LIKE #cMsg.itrlIntfcId#
		</isNotNull>
		GROUP BY
			M.ITRL_INTFC_ID
		ORDER BY
			M.ITRL_INTFC_ID
	</statement>

	<resultMap id="masterTableNames" class="HashMap">
		<result property="mstr_tbl_id"				column="ITRL_INTFC_MSTR_TBL_ID"		javaType="String" />
		<result property="trx_tbl_id"				column="ITRL_INTFC_TRX_TBL_ID"		javaType="String" />
		<result property="configId"					column="ITRL_INTFC_TRX_CONFIG_ID"	javaType="String" />
		<result property="config_name"				column="ITRL_INTFC_TRX_CONFIG_NM"	javaType="String" />
	</resultMap>
	
	<resultMap id="itrlIntfcIds" class="HashMap">
		<result property="itrlIntfcId_A"			column="ITRL_INTFC_ID"		javaType="String"/>
		<result property="xxIntfcInterCntNum_A"		column="TBL_COUNT"			javaType="String"/>
		<result property="xxDtTm_AC"				column="EZINTIME"			javaType="String"/>
		<result property="xxDtTm_AU"				column="EZUPTIME"			javaType="String"/>
	</resultMap>

	<resultMap id="result.ZZIL0120_ASMsg" 		class="ZZIL0120_ASMsg">
		<result property="itrlIntfcId_A"			column="ITRL_INTFC_ID"		javaType="EZDSStringItem"/>
		<result property="xxIntfcInterCntNum_A"		column="TBL_COUNT"			javaType="EZDSBigDecimalItem"/>
		<result property="xxDtTm_AC"				column="EZINTIME"			javaType="EZDSStringItem"/>
		<result property="xxDtTm_AU"				column="EZUPTIME"			javaType="EZDSStringItem"/>
	</resultMap>
</sqlMap>