<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NFCL2640Query">

    <typeAlias alias="NFCL2640_ASMsg"  type="business.blap.NFCL2640.NFCL2640_ASMsg"/>

    <statement id="getArStmtCtrl" parameterClass="Map" resultMap="result.getArStmtCtrl">
        SELECT
             AR_STMT_DT
            ,AR_STMT_STS_CD
            ,AR_STMT_DATA_CRAT_DT
            ,AR_STMT_PRINT_DT
            ,LATE_FEE_CALC_FLG
            ,AR_STMT_CTRL_PK
            ,EZUPTIME
            ,EZUPTIMEZONE
        FROM
            AR_STMT_CTRL
        WHERE
                GLBL_CMPY_CD         = #glblCmpyCd#
            AND EZCANCELFLAG         ='0'
          <isNotNull property="arStmtIssCycleCd">
            AND AR_STMT_ISS_CYCLE_CD = #arStmtIssCycleCd#
          </isNotNull>
            AND AR_STMT_DT     BETWEEN #arStmtDt_FR# AND #arStmtDt_TO#
          <isNotNull property="arStmtStsCd">
            AND AR_STMT_STS_CD       = #arStmtStsCd#
          </isNotNull>
        ORDER BY
            AR_STMT_DT
    </statement>
    <resultMap id="result.getArStmtCtrl" class="NFCL2640_ASMsg">
        <result property="arStmtDt_A1"         column="AR_STMT_DT"           javaType="EZDSDateItem" />
        <result property="arStmtStsCd_A1"      column="AR_STMT_STS_CD"       javaType="EZDSStringItem" />
        <result property="arStmtDataCratDt_A1" column="AR_STMT_DATA_CRAT_DT" javaType="EZDSDateItem" />
        <result property="arStmtPrintDt_A1"    column="AR_STMT_PRINT_DT"     javaType="EZDSDateItem" />
        <result property="lateFeeCalcFlg_A1"   column="LATE_FEE_CALC_FLG"    javaType="EZDSStringItem" />
        <result property="arStmtCtrlPk_A1"     column="AR_STMT_CTRL_PK"      javaType="EZDSBigDecimalItem" />
        <result property="ezUpTime_A1"         column="EZUPTIME"             javaType="EZDSStringItem" />
        <result property="ezUpTimeZone_A1"     column="EZUPTIMEZONE"         javaType="EZDSStringItem" />
    </resultMap>

    <statement id="countStmtDt" parameterClass="Map" resultClass="Integer">
        SELECT 
            COUNT(*)
        FROM 
            AR_STMT_CTRL
        WHERE
                EZCANCELFLAG ='0'
            AND GLBL_CMPY_CD = #glblCmpyCd#
            AND AR_STMT_DT   = #arStmtDt_AD#
    </statement>

    <statement id="maxStmtDt" parameterClass="Map" resultClass="String">
        SELECT 
            MAX(AR_STMT_DT)
        FROM 
            AR_STMT_CTRL
        WHERE
                EZCANCELFLAG         ='0'
            AND GLBL_CMPY_CD         = #glblCmpyCd#
            AND AR_STMT_ISS_CYCLE_CD = #arStmtIssCycleCd#
    </statement>

</sqlMap>
