<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NWAL1710Query">

    <typeAlias alias="NWAL1710SMsg"    type="business.blap.NWAL1710.NWAL1710SMsg"/>
    <typeAlias alias="NWAL1710_ASMsg"  type="business.blap.NWAL1710.NWAL1710_ASMsg"/>

    <statement id="getOrderCategoryList" parameterClass="Map" resultClass="Map">
    SELECT
         OCS.DS_ORD_CATG_NM
        ,OCS.DS_ORD_CATG_CD
        ,OCS.DS_ORD_TP_NM
        ,OCS.DS_ORD_TP_DESC_TXT
        ,OCS.DS_ORD_TP_CD
        ,OCS.ORD_PROC_TP_NM
        ,OCS.LINE_BIZ_TP_NM
        ,OCS.EFF_FROM_DT
        ,OCS.EFF_THRU_DT
        ,OCS.ACTV_FLG
        ,OCS.DS_ORD_RSN_GRP_NM
    FROM
    (
    SELECT
         OC.DS_ORD_CATG_NM
        ,OC.DS_ORD_CATG_CD
        ,OT.DS_ORD_TP_NM
        ,OT.DS_ORD_TP_DESC_TXT
        ,PD.DS_ORD_TP_CD
        ,OP.ORD_PROC_TP_NM
        ,LB.LINE_BIZ_TP_NM
        ,PD.EFF_FROM_DT
        ,PD.EFF_THRU_DT
        ,PD.ACTV_FLG
        ,OG.DS_ORD_RSN_GRP_NM
    FROM
        DS_ORD_TP OT
       ,DS_ORD_CATG OC
       ,DS_ORD_TP_PROC_DFN PD
       ,ORD_PROC_TP OP
       ,LINE_BIZ_TP LB
       ,DS_ORD_RSN_GRP OG
    WHERE
        OT.GLBL_CMPY_CD = #glblCmpyCd#
    AND OT.EZCANCELFLAG = '0'
    AND OT.DS_ORD_TP_CD = PD.DS_ORD_TP_CD
    AND OT.GLBL_CMPY_CD = PD.GLBL_CMPY_CD
    AND PD.EZCANCELFLAG = '0'

    AND OT.DS_ORD_CATG_CD = OC.DS_ORD_CATG_CD
    AND OT.GLBL_CMPY_CD = OC.GLBL_CMPY_CD
    AND OC.EZCANCELFLAG = '0'

    AND PD.ORD_PROC_TP_CD = OP.ORD_PROC_TP_CD
    AND PD.GLBL_CMPY_CD = OP.GLBL_CMPY_CD
    AND OP.EZCANCELFLAG = '0'

    AND PD.LINE_BIZ_TP_CD = LB.LINE_BIZ_TP_CD
    AND PD.GLBL_CMPY_CD = LB.GLBL_CMPY_CD
    AND LB.EZCANCELFLAG = '0'

    AND PD.DS_ORD_RSN_GRP_CD = OG.DS_ORD_RSN_GRP_CD(+)
    AND PD.GLBL_CMPY_CD = OG.GLBL_CMPY_CD(+)
    AND OG.EZCANCELFLAG(+) = '0'

    <isNotNull property="orderCategory">
    AND OC.DS_ORD_CATG_NM LIKE #orderCategory#
    </isNotNull>
    <isNotNull property="reasonCode">
    AND OT.DS_ORD_TP_NM LIKE #reasonCode#
    </isNotNull>
    <isNotNull property="workFlow">
    AND PD.ORD_PROC_TP_CD = #workFlow#
    </isNotNull>
    <isNotNull property="lineOfBusiness">
    AND PD.LINE_BIZ_TP_CD = #lineOfBusiness#
    </isNotNull>
    <isNotNull property="effectiveFrom">
    AND PD.EFF_FROM_DT &gt;= #effectiveFrom#
    </isNotNull>
    
    <isNotNull property="effectiveThru">
    AND NVL(PD.EFF_THRU_DT, #compDtMax#) &lt;= #effectiveThru#
    </isNotNull>
    <isNotNull property="activeOnly">
        AND PD.ACTV_FLG = 'Y'
    </isNotNull>

    ORDER BY
        OC.DS_ORD_CATG_CD
        ,OT.DS_ORD_TP_NM
    ) OCS
    <isNotNull property="rowNum">
        WHERE ROWNUM &lt;= #rowNum#
    </isNotNull>
    </statement>

    <statement id="getWorkflowPulldownList" parameterClass="Map" resultClass="Map">
        SELECT 
            ORD_PROC_TP_CD
           ,ORD_PROC_TP_DESC_TXT
        FROM 
            ORD_PROC_TP
        WHERE
            GLBL_CMPY_CD = #glblCmpyCd#
        AND ORD_PROC_TP_LVL_CD  = #ordProcTpLvlCd#
        AND EZCANCELFLAG = '0'
        ORDER BY
            ORD_PROC_TP_SORT_NUM
    </statement>
</sqlMap>
