<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NMAL2800Query">

    <typeAlias alias="NMAL2800SMsg"    type="business.blap.NMAL2800.NMAL2800SMsg"/>
    <typeAlias alias="NMAL2800_ASMsg"  type="business.blap.NMAL2800.NMAL2800_ASMsg"/>
    <typeAlias alias="STTMsg"          type="business.db.STTMsg"/>

    <statement id="search" parameterClass="Map" resultMap="result.search">
        WITH RSLT_V AS (
           SELECT
                  PR.PROS_RVW_STS_CD
                , PR.RVW_PROS_NUM
                , PR.BEF_DS_ACCT_NM
                <!-- 2017/10/17 QC#21782 mod start-->
                <!--
                , PR.BEF_BILL_TO_FIRST_LINE_ADDR
                , PR.BEF_BILL_TO_SCD_LINE_ADDR
                , PR.BEF_BILL_TO_THIRD_LINE_ADDR
                , PR.BEF_BILL_TO_FRTH_LINE_ADDR
                , PR.BEF_BILL_TO_CTY_ADDR
                , PR.BEF_BILL_TO_ST_CD
                , PR.BEF_BILL_TO_POST_CD
                , PR.BEF_BILL_TO_CNTY_NM
                -->
                , PR.BEF_LOC_FIRST_LINE_ADDR
                , PR.BEF_LOC_SCD_LINE_ADDR
                , PR.BEF_LOC_THIRD_LINE_ADDR
                , PR.BEF_LOC_FRTH_LINE_ADDR
                , PR.BEF_SHIP_TO_CTY_ADDR
                , PR.BEF_SHIP_TO_ST_NM
                , PR.BEF_SHIP_TO_POST_CD
                , PR.BEF_SHIP_TO_CNTY_NM
                <!-- 2017/10/17 QC#21782 mod end-->
                , PR.BEF_CTRY_NM
                , P.PSN_FIRST_NM ||' '|| P.PSN_LAST_NM AS XX_SCR_ITEM_61_TXT
                , L.LINE_BIZ_TP_DESC_TXT
                , PR.RESRC_TRTY_ORG_NM
                , PR.CANDI_TRTY_NM
                , PR.XTRNL_CRAT_DT_TM_TS
                , PR.MATCH_ACCT_LOC_NUM
                , PR.AFT_TRTY_ORG_CD
                , PR.TRTY_ORG_NM
                , P2.PSN_CD
                , P2.PSN_FIRST_NM ||' '|| P2.PSN_LAST_NM AS XX_SCR_ITEM_61_TXT_A2
                , PR.AFT_LOC_NUM
                , PR.AFT_DS_XREF_ACCT_CD
                , PR.AFT_LOC_FIRST_LINE_ADDR
                , PR.AFT_LOC_SCD_LINE_ADDR
                , PR.AFT_LOC_THIRD_LINE_ADDR
                , PR.AFT_LOC_FRTH_LINE_ADDR
                , PR.AFT_LOC_CTY_ADDR
                , PR.AFT_LOC_ST_CD
                , PR.AFT_LOC_POST_CD
                , PR.AFT_CTRY_CD
                , C.CNTY_NM
                , PR.BEF_TEL_NUM
                , PR.AFT_TEL_NUM
                , PR.BEF_FAX_NUM
                , PR.AFT_FAX_NUM
                , PR.XTRNL_LAST_CRAT_DT_TM_TS
                , PR.BEF_DUNS_NUM
                , PR.BEF_DS_CUST_SIC_CD
                , PR.BEF_DS_ULT_DUNS_NUM
                , PR.AFT_DS_ACCT_DUNS_NM
                , PR.AFT_DS_LOC_REV_AMT
                , PR.AFT_DUNS_NUM
                , PR.AFT_DS_CUST_SIC_DESC_TXT
                , PR.AFT_DS_LOC_EMP_NUM
                , PR.AFT_DS_CUST_SIC_CD
                , PR.AFT_DS_ULT_DUNS_NUM
                <!-- Del Start 2018/03/28 QC#23145 -->
                <!-- , PR.AFT_GLN_NUM -->
                <!-- Del End 2018/03/28 QC#23145 -->
                , PR.AFT_DS_PRNT_DUNS_NUM
                , PR.AFT_HQ_DUNS_NUM
                , PR.AFT_DS_CMPY_SIC_CD
                , PR.AFT_DS_CMPY_SIC_DESC_TXT
                , PR.DS_ACCT_NUM
                , PR.LOC_NUM
                , PR.DS_ACCT_RVW_PROS_PK
                , PR.EZUPTIME
                , PR.EZUPTIMEZONE
                , PR.DS_ACCT_URL
                , NVL(DXAT.DS_XREF_ACCT_TP_CD, '99') AS DS_XREF_ACCT_TP_CD
                , PR.ACCT_SRC_TXT
                , PR.BEF_PSN_NUM
                , P.EML_ADDR
            FROM
                  DS_ACCT_RVW_PROS  PR
                , CNTY              C
                , S21_PSN           P
                , LINE_BIZ_TP       L
                , DS_ORG_RESRC_RELN DOR2
                , S21_PSN           P2
        <isNotNull property="bizMsg.orgNm_H1">
                , DS_ORG_RESRC_RELN DOR
                , DS_ORG_UNIT       DOU
        </isNotNull>
                , DS_XREF_ACCT_TP   DXAT
            WHERE               
                    PR.GLBL_CMPY_CD = #glblCmpyCd#
        <isNotNull property="bizMsg.xxDt10Dt_H1">
                AND PR.XTRNL_CRAT_DT_TM_TS &gt;= #tmTsFrom#
        </isNotNull>
        <isNotNull property="bizMsg.xxDt10Dt_H2">
                AND PR.XTRNL_CRAT_DT_TM_TS &lt;= #tmTsTo#
        </isNotNull>
        <isNotNull property="bizMsg.befDsAcctNm_H1">
                <!-- QC#14223
                AND PR.BEF_DS_ACCT_NM  LIKE #bizMsg.befDsAcctNm_H1#
                 -->
                AND UPPER(PR.BEF_DS_ACCT_NM)  LIKE UPPER(#bizMsg.befDsAcctNm_H1#)
        </isNotNull>
        <isNotNull property="bizMsg.rvwProsNum_H1">
                AND PR.RVW_PROS_NUM LIKE #bizMsg.rvwProsNum_H1#
        </isNotNull>
        <isNotNull property="bizMsg.befPsnNum_H1">
                AND PR.BEF_PSN_NUM  LIKE #bizMsg.befPsnNum_H1#
        </isNotNull>
        <isNull property="allFlg">
            <isNull property="blankFlg">
                <isNotNull property="bizMsg.prosRvwStsCd_H1">
                AND PR.PROS_RVW_STS_CD  = #bizMsg.prosRvwStsCd_H1#
                </isNotNull>
            </isNull>
            <isNotNull property="blankFlg">
                AND PR.PROS_RVW_STS_CD IS NULL
            </isNotNull>
        </isNull>
        <isNotNull property="bizMsg.dupAcctLocFlg_H1">
                AND PR.DUP_ACCT_LOC_FLG = #bizMsg.dupAcctLocFlg_H1#
        </isNotNull>
        <isNotNull property="bizMsg.shipAddrAllTxt_H1">
                <!-- QC#14223
                AND PR.BEF_BILL_TO_FIRST_LINE_ADDR || PR.BEF_BILL_TO_SCD_LINE_ADDR || 
                    PR.BEF_BILL_TO_THIRD_LINE_ADDR || PR.BEF_BILL_TO_FRTH_LINE_ADDR LIKE #bizMsg.shipAddrAllTxt_H1#
                 -->
                <!-- 2017/10/17 QC#21782 mod start-->
                <!-- AND UPPER(PR.BEF_BILL_TO_FIRST_LINE_ADDR || PR.BEF_BILL_TO_SCD_LINE_ADDR || 
                    PR.BEF_BILL_TO_THIRD_LINE_ADDR || PR.BEF_BILL_TO_FRTH_LINE_ADDR) LIKE UPPER(#bizMsg.shipAddrAllTxt_H1#
                -->
                AND UPPER(PR.BEF_LOC_FIRST_LINE_ADDR || PR.BEF_LOC_SCD_LINE_ADDR || 
                    PR.BEF_LOC_THIRD_LINE_ADDR || PR.BEF_LOC_FRTH_LINE_ADDR) LIKE UPPER(#bizMsg.shipAddrAllTxt_H1#)
                <!-- 2017/10/17 QC#21782 mod end-->
        </isNotNull>
        <isNotNull property="bizMsg.befShipToCtyAddr_H1">
                <!-- QC#14223
                AND PR.BEF_BILL_TO_CTY_ADDR LIKE #bizMsg.befBillToCtyAddr_H1#
                -->
                <!-- 2017/10/17 QC#21782 mod start-->
                <!-- AND UPPER(PR.BEF_BILL_TO_CTY_ADDR) LIKE UPPER(#bizMsg.befBillToCtyAddr_H1#) -->
                AND UPPER(PR.BEF_SHIP_TO_CTY_ADDR) LIKE UPPER(#bizMsg.befShipToCtyAddr_H1#)
                <!-- 2017/10/17 QC#21782 mod End-->
        </isNotNull>
        <!-- START 2017/12/04 Hd.Sugawara [QC#21957,MOD] -->
        <!-- <isNotNull property="bizMsg.befShipToStCd_H1"> -->
        <isNotNull property="bizMsg.befShipToStNm_H1">
        <!-- END 2017/12/04 Hd.Sugawara [QC#21957,MOD] -->
                <!-- 2017/10/17 QC#21782 mod start-->
                AND PR.BEF_SHIP_TO_ST_NM = #bizMsg.befShipToStNm_H1#
                <!-- 2017/10/17 QC#21782 mod end-->
        </isNotNull>
        <isNotNull property="bizMsg.befShipToPostCd_H1">
                <!-- 2017/10/17 QC#21782 mod start-->
                <!-- AND PR.BEF_BILL_TO_POST_CD  LIKE #bizMsg.befBillToPostCd_H1# -->
                AND PR.BEF_SHIP_TO_POST_CD  LIKE #bizMsg.befShipToPostCd_H1#
                <!-- 2017/10/17 QC#21782 mod end-->
        </isNotNull>
                AND PR.EZCANCELFLAG      = '0'
                
                AND PR.GLBL_CMPY_CD    = C.GLBL_CMPY_CD(+)
                AND PR.AFT_LOC_CNTY_PK = C.CNTY_PK(+)
                AND C.EZCANCELFLAG(+)  = '0'
                
                <!-- QC#13666 -->
                AND PR.GLBL_CMPY_CD  = P.GLBL_CMPY_CD(+)
                AND PR.BEF_PSN_NUM   = P.PSN_NUM(+)
        <isNotNull property="bizMsg.lineBizTpCd_H1">
                AND P.LINE_BIZ_TP_CD = #bizMsg.lineBizTpCd_H1#
        </isNotNull>
        <isNotNull property="bizMsg.xxScrItem61Txt_H1">
                <!-- QC#14223
                AND P.PSN_FIRST_NM ||' '|| P.PSN_LAST_NM LIKE #bizMsg.xxScrItem61Txt_H1#
                -->
                AND UPPER(P.PSN_FIRST_NM ||' '|| P.PSN_LAST_NM) LIKE UPPER(#bizMsg.xxScrItem61Txt_H1#)
        </isNotNull>
                AND P.EZCANCELFLAG(+)   = '0'
                
                AND P.GLBL_CMPY_CD   = L.GLBL_CMPY_CD(+)
                AND P.LINE_BIZ_TP_CD = L.LINE_BIZ_TP_CD(+)
                AND L.EZCANCELFLAG(+)   = '0'
                
                AND PR.GLBL_CMPY_CD       = DOR2.GLBL_CMPY_CD (+)
                AND PR.AFT_TRTY_ORG_CD    = DOR2.ORG_CD (+)
                
                AND DOR2.ACCT_TEAM_ROLE_TP_CD IS NULL
                AND DOR2.GNRN_TP_CD (+)   = #gnrnTpCd#
                AND DOR2.EZCANCELFLAG (+) = '0'

                AND DOR2.GLBL_CMPY_CD     = P2.GLBL_CMPY_CD (+)
                AND DOR2.PSN_CD           = P2.PSN_CD (+)
                AND P2.EZCANCELFLAG (+) = '0'
                
        <isNotNull property="bizMsg.orgNm_H1">
                AND P.GLBL_CMPY_CD   = DOR.GLBL_CMPY_CD
                AND P.PSN_CD         = DOR.PSN_CD
                AND DOR.EZCANCELFLAG = '0'
                
                AND DOR.GLBL_CMPY_CD = DOU.GLBL_CMPY_CD
                AND DOR.ORG_CD       = DOU.ORG_CD
                AND DOU.ORG_NM LIKE #bizMsg.orgNm_H1#
                AND DOU.EZCANCELFLAG = '0'
        </isNotNull>
                AND PR.GLBL_CMPY_CD  = DXAT.GLBL_CMPY_CD (+)
                AND PR.EZCANCELFLAG  = DXAT.EZCANCELFLAG (+)
                AND PR.ACCT_SRC_TXT  = DXAT.DS_XREF_ACCT_TP_DESC_TXT (+)
            )
        
        
        SELECT
              PROS_RVW_STS_CD
            , RVW_PROS_NUM
            , BEF_DS_ACCT_NM
            <!-- 2017/10/17 QC#21782 mod start-->
            <!--
            , BEF_BILL_TO_FIRST_LINE_ADDR
            , BEF_BILL_TO_SCD_LINE_ADDR
            , BEF_BILL_TO_THIRD_LINE_ADDR
            , BEF_BILL_TO_FRTH_LINE_ADDR
            , BEF_BILL_TO_CTY_ADDR
            , BEF_BILL_TO_ST_CD
            , BEF_BILL_TO_POST_CD
            , BEF_BILL_TO_CNTY_NM
            -->
            , BEF_LOC_FIRST_LINE_ADDR
            , BEF_LOC_SCD_LINE_ADDR
            , BEF_LOC_THIRD_LINE_ADDR
            , BEF_LOC_FRTH_LINE_ADDR
            , BEF_SHIP_TO_CTY_ADDR
            , BEF_SHIP_TO_ST_NM
            , BEF_SHIP_TO_POST_CD
            , BEF_SHIP_TO_CNTY_NM
            <!-- 2017/10/17 QC#21782 mod end-->
            , XX_SCR_ITEM_61_TXT
            , LINE_BIZ_TP_DESC_TXT
            , RESRC_TRTY_ORG_NM
            , CANDI_TRTY_NM
            , XTRNL_CRAT_DT_TM_TS
            , MATCH_ACCT_LOC_NUM
            , AFT_TRTY_ORG_CD
            , TRTY_ORG_NM
            , PSN_CD
            , XX_SCR_ITEM_61_TXT_A2
            , AFT_LOC_NUM
            , AFT_DS_XREF_ACCT_CD
            , AFT_LOC_FIRST_LINE_ADDR
            , AFT_LOC_SCD_LINE_ADDR
            , AFT_LOC_THIRD_LINE_ADDR
            , AFT_LOC_FRTH_LINE_ADDR
            , AFT_LOC_CTY_ADDR
            , AFT_LOC_ST_CD
            , AFT_LOC_POST_CD
            , CNTY_NM
            , AFT_CTRY_CD
            , BEF_TEL_NUM
            , AFT_TEL_NUM
            , BEF_FAX_NUM
            , AFT_FAX_NUM
            , XTRNL_LAST_CRAT_DT_TM_TS
            , BEF_DUNS_NUM
            , BEF_DS_CUST_SIC_CD
            , BEF_DS_ULT_DUNS_NUM
            , AFT_DS_ACCT_DUNS_NM
            , AFT_DS_LOC_REV_AMT
            , AFT_DUNS_NUM
            , AFT_DS_CUST_SIC_DESC_TXT
            , AFT_DS_LOC_EMP_NUM
            , AFT_DS_CUST_SIC_CD
            , AFT_DS_ULT_DUNS_NUM
            <!-- Del Start 2018/03/28 QC#23145 -->
            <!-- , AFT_GLN_NUM -->
            <!-- Del End 2018/03/28 QC#23145 -->
            , AFT_DS_PRNT_DUNS_NUM
            , AFT_HQ_DUNS_NUM
            , AFT_DS_CMPY_SIC_CD
            , AFT_DS_CMPY_SIC_DESC_TXT
            , DS_ACCT_NUM
            , LOC_NUM
            , DS_ACCT_RVW_PROS_PK
            , EZUPTIME
            , EZUPTIMEZONE
            , DS_ACCT_URL
            , DS_XREF_ACCT_TP_CD
            , ACCT_SRC_TXT
            , BEF_PSN_NUM
            , EML_ADDR
            , BEF_CTRY_NM
        FROM
            (
            SELECT DISTINCT <!-- 2017/10/16 QC#20630 add-->
                  RSLT_V.PROS_RVW_STS_CD
                , RSLT_V.RVW_PROS_NUM
                , RSLT_V.BEF_DS_ACCT_NM
                <!-- 2017/10/17 QC#21782 mod start-->
                <!--
                , RSLT_V.BEF_BILL_TO_FIRST_LINE_ADDR
                , RSLT_V.BEF_BILL_TO_SCD_LINE_ADDR
                , RSLT_V.BEF_BILL_TO_THIRD_LINE_ADDR
                , RSLT_V.BEF_BILL_TO_FRTH_LINE_ADDR
                , RSLT_V.BEF_BILL_TO_CTY_ADDR
                , RSLT_V.BEF_BILL_TO_ST_CD
                , RSLT_V.BEF_BILL_TO_POST_CD
                , RSLT_V.BEF_BILL_TO_CNTY_NM
                -->
                , RSLT_V.BEF_LOC_FIRST_LINE_ADDR
                , RSLT_V.BEF_LOC_SCD_LINE_ADDR
                , RSLT_V.BEF_LOC_THIRD_LINE_ADDR
                , RSLT_V.BEF_LOC_FRTH_LINE_ADDR
                , RSLT_V.BEF_SHIP_TO_CTY_ADDR
                , RSLT_V.BEF_SHIP_TO_ST_NM
                , RSLT_V.BEF_SHIP_TO_POST_CD
                , RSLT_V.BEF_SHIP_TO_CNTY_NM
                <!-- 2017/10/17 QC#21782 mod end-->
                , RSLT_V.BEF_CTRY_NM
                , RSLT_V.XX_SCR_ITEM_61_TXT
                , RSLT_V.LINE_BIZ_TP_DESC_TXT
                , RSLT_V.RESRC_TRTY_ORG_NM
                , RSLT_V.CANDI_TRTY_NM
                , RSLT_V.XTRNL_CRAT_DT_TM_TS
                , RSLT_V.MATCH_ACCT_LOC_NUM
                , RSLT_V.AFT_TRTY_ORG_CD
                , RSLT_V.TRTY_ORG_NM
                , RSLT_V.PSN_CD
                , RSLT_V.XX_SCR_ITEM_61_TXT_A2
                , RSLT_V.AFT_LOC_NUM
                , RSLT_V.AFT_DS_XREF_ACCT_CD
                , RSLT_V.AFT_LOC_FIRST_LINE_ADDR
                , RSLT_V.AFT_LOC_SCD_LINE_ADDR
                , RSLT_V.AFT_LOC_THIRD_LINE_ADDR
                , RSLT_V.AFT_LOC_FRTH_LINE_ADDR
                , RSLT_V.AFT_LOC_CTY_ADDR
                , RSLT_V.AFT_LOC_ST_CD
                , RSLT_V.AFT_LOC_POST_CD
                , RSLT_V.AFT_CTRY_CD
                , RSLT_V.CNTY_NM
                , RSLT_V.BEF_TEL_NUM
                , RSLT_V.AFT_TEL_NUM
                , RSLT_V.BEF_FAX_NUM
                , RSLT_V.AFT_FAX_NUM
                , RSLT_V.XTRNL_LAST_CRAT_DT_TM_TS
                , RSLT_V.BEF_DUNS_NUM
                , RSLT_V.BEF_DS_CUST_SIC_CD
                , RSLT_V.BEF_DS_ULT_DUNS_NUM
                , RSLT_V.AFT_DS_ACCT_DUNS_NM
                , RSLT_V.AFT_DS_LOC_REV_AMT
                , RSLT_V.AFT_DUNS_NUM
                , RSLT_V.AFT_DS_CUST_SIC_DESC_TXT
                , RSLT_V.AFT_DS_LOC_EMP_NUM
                , RSLT_V.AFT_DS_CUST_SIC_CD
                , RSLT_V.AFT_DS_ULT_DUNS_NUM
                <!-- Del Start 2018/03/28 QC#23145 -->
                <!-- , RSLT_V.AFT_GLN_NUM -->
                <!-- Del End 2018/03/28 QC#23145 -->
                , RSLT_V.AFT_DS_PRNT_DUNS_NUM
                , RSLT_V.AFT_HQ_DUNS_NUM
                , RSLT_V.AFT_DS_CMPY_SIC_CD
                , RSLT_V.AFT_DS_CMPY_SIC_DESC_TXT
                , RSLT_V.DS_ACCT_NUM
                , RSLT_V.LOC_NUM
                , RSLT_V.DS_ACCT_RVW_PROS_PK
                , RSLT_V.EZUPTIME
                , RSLT_V.EZUPTIMEZONE
                , RSLT_V.DS_ACCT_URL
                , RSLT_V.DS_XREF_ACCT_TP_CD
                , RSLT_V.ACCT_SRC_TXT
                , RSLT_V.BEF_PSN_NUM
                , RSLT_V.EML_ADDR
            FROM
                  RSLT_V
            UNION ALL
            SELECT DISTINCT <!-- 2017/10/16 QC#20630 add-->
                  PR.PROS_RVW_STS_CD
                , PR.RVW_PROS_NUM
                , PR.BEF_DS_ACCT_NM
                <!-- 2017/10/17 QC#21782 mod start-->
                <!--
                , PR.BEF_BILL_TO_FIRST_LINE_ADDR
                , PR.BEF_BILL_TO_SCD_LINE_ADDR
                , PR.BEF_BILL_TO_THIRD_LINE_ADDR
                , PR.BEF_BILL_TO_FRTH_LINE_ADDR
                , PR.BEF_BILL_TO_CTY_ADDR
                , PR.BEF_BILL_TO_ST_CD
                , PR.BEF_BILL_TO_POST_CD
                , PR.BEF_BILL_TO_CNTY_NM
                -->
                , PR.BEF_LOC_FIRST_LINE_ADDR
                , PR.BEF_LOC_SCD_LINE_ADDR
                , PR.BEF_LOC_THIRD_LINE_ADDR
                , PR.BEF_LOC_FRTH_LINE_ADDR
                , PR.BEF_SHIP_TO_CTY_ADDR
                , PR.BEF_SHIP_TO_ST_NM
                , PR.BEF_SHIP_TO_POST_CD
                , PR.BEF_SHIP_TO_CNTY_NM
                <!-- 2017/10/17 QC#21782 mod end-->
                , PR.BEF_CTRY_NM
                , P.PSN_FIRST_NM ||' '|| P.PSN_LAST_NM AS XX_SCR_ITEM_61_TXT
                , L.LINE_BIZ_TP_DESC_TXT
                , PR.RESRC_TRTY_ORG_NM
                , PR.CANDI_TRTY_NM
                , PR.XTRNL_CRAT_DT_TM_TS
                , PR.MATCH_ACCT_LOC_NUM
                , PR.AFT_TRTY_ORG_CD
                , PR.TRTY_ORG_NM
                , P2.PSN_CD
                , P2.PSN_FIRST_NM ||' '|| P2.PSN_LAST_NM AS XX_SCR_ITEM_61_TXT_A2
                , PR.AFT_LOC_NUM
                , PR.AFT_DS_XREF_ACCT_CD
                , PR.AFT_LOC_FIRST_LINE_ADDR
                , PR.AFT_LOC_SCD_LINE_ADDR
                , PR.AFT_LOC_THIRD_LINE_ADDR
                , PR.AFT_LOC_FRTH_LINE_ADDR
                , PR.AFT_LOC_CTY_ADDR
                , PR.AFT_LOC_ST_CD
                , PR.AFT_LOC_POST_CD
                , PR.AFT_CTRY_CD
                , C.CNTY_NM
                , PR.BEF_TEL_NUM
                , PR.AFT_TEL_NUM
                , PR.BEF_FAX_NUM
                , PR.AFT_FAX_NUM
                , PR.XTRNL_LAST_CRAT_DT_TM_TS
                , PR.BEF_DUNS_NUM
                , PR.BEF_DS_CUST_SIC_CD
                , PR.BEF_DS_ULT_DUNS_NUM
                , PR.AFT_DS_ACCT_DUNS_NM
                , PR.AFT_DS_LOC_REV_AMT
                , PR.AFT_DUNS_NUM
                , PR.AFT_DS_CUST_SIC_DESC_TXT
                , PR.AFT_DS_LOC_EMP_NUM
                , PR.AFT_DS_CUST_SIC_CD
                , PR.AFT_DS_ULT_DUNS_NUM
                <!-- Del Start 2018/03/28 QC#23145 -->
                <!-- , PR.AFT_GLN_NUM -->
                <!-- Del End 2018/03/28 QC#23145 -->
                , PR.AFT_DS_PRNT_DUNS_NUM
                , PR.AFT_HQ_DUNS_NUM
                , PR.AFT_DS_CMPY_SIC_CD
                , PR.AFT_DS_CMPY_SIC_DESC_TXT
                , PR.DS_ACCT_NUM
                , PR.LOC_NUM
                , PR.DS_ACCT_RVW_PROS_PK
                , PR.EZUPTIME
                , PR.EZUPTIMEZONE
                , PR.DS_ACCT_URL
                , NVL(DXAT.DS_XREF_ACCT_TP_CD, '99') AS DS_XREF_ACCT_TP_CD
                , PR.ACCT_SRC_TXT
                , PR.BEF_PSN_NUM
                , P.EML_ADDR
            FROM
                  DS_ACCT_RVW_PROS  PR
                , CNTY              C
                , S21_PSN           P
                , LINE_BIZ_TP       L
                , S21_PSN           P2
        <isNotNull property="bizMsg.orgNm_H1">
                , DS_ORG_RESRC_RELN DOR
                , DS_ORG_UNIT       DOU
        </isNotNull>
                , DS_XREF_ACCT_TP   DXAT
            WHERE               
                    PR.GLBL_CMPY_CD = #glblCmpyCd#
        <isNotNull property="bizMsg.xxDt10Dt_H1">
                AND PR.XTRNL_CRAT_DT_TM_TS &gt;= #tmTsFrom#
        </isNotNull>
        <isNotNull property="bizMsg.xxDt10Dt_H2">
                AND PR.XTRNL_CRAT_DT_TM_TS &lt;= #tmTsTo#
        </isNotNull>
        <isNotNull property="bizMsg.befDsAcctNm_H1">
                AND UPPER(PR.BEF_DS_ACCT_NM)  LIKE UPPER(#bizMsg.befDsAcctNm_H1#)
        </isNotNull>
        <isNotNull property="bizMsg.rvwProsNum_H1">
                AND PR.RVW_PROS_NUM LIKE #bizMsg.rvwProsNum_H1#
        </isNotNull>
        <isNotNull property="bizMsg.befPsnNum_H1">
                AND PR.BEF_PSN_NUM  LIKE #bizMsg.befPsnNum_H1#
        </isNotNull>
        <isNotNull property="bizMsg.trtyOrgNm_H1">
                AND PR.TRTY_ORG_NM  LIKE #bizMsg.trtyOrgNm_H1#
        </isNotNull>
        <isNull property="allFlg">
            <isNull property="blankFlg">
                <isNotNull property="bizMsg.prosRvwStsCd_H1">
                AND PR.PROS_RVW_STS_CD  = #bizMsg.prosRvwStsCd_H1#
                </isNotNull>
            </isNull>
            <isNotNull property="blankFlg">
                AND PR.PROS_RVW_STS_CD IS NULL
            </isNotNull>
        </isNull>
        <isNotNull property="bizMsg.dupAcctLocFlg_H1">
                AND PR.DUP_ACCT_LOC_FLG = #bizMsg.dupAcctLocFlg_H1#
        </isNotNull>
        <isNotNull property="bizMsg.shipAddrAllTxt_H1">
                <!-- 2017/10/17 QC#21782 mod start-->
                <!-- AND UPPER(PR.BEF_BILL_TO_FIRST_LINE_ADDR || PR.BEF_BILL_TO_SCD_LINE_ADDR || 
                    PR.BEF_BILL_TO_THIRD_LINE_ADDR || PR.BEF_BILL_TO_FRTH_LINE_ADDR) LIKE UPPER(#bizMsg.shipAddrAllTxt_H1#)
                -->
                AND UPPER(PR.BEF_LOC_FIRST_LINE_ADDR || PR.BEF_LOC_SCD_LINE_ADDR || 
                    PR.BEF_LOC_THIRD_LINE_ADDR || PR.BEF_LOC_FRTH_LINE_ADDR) LIKE UPPER(#bizMsg.shipAddrAllTxt_H1#)
                <!-- 2017/10/17 QC#21782 mod end-->
        </isNotNull>
        <isNotNull property="bizMsg.befShipToCtyAddr_H1">
                <!-- 2017/10/17 QC#21782 mod start-->
                <!-- AND UPPER(PR.BEF_BILL_TO_CTY_ADDR) LIKE UPPER(#bizMsg.befBillToCtyAddr_H1#) -->
                AND UPPER(PR.BEF_SHIP_TO_CTY_ADDR) LIKE UPPER(#bizMsg.befShipToCtyAddr_H1#)
                <!-- 2017/10/17 QC#21782 mod end-->
        </isNotNull>
        <isNotNull property="bizMsg.befShipToStNm_H1">
                <!-- 2017/10/17 QC#21782 mod start-->
                <!-- AND PR.BEF_BILL_TO_ST_CD = #bizMsg.befBillToStCd_H1# -->
                AND PR.BEF_SHIP_TO_ST_NM = #bizMsg.befShipToStNm_H1#
                <!-- 2017/10/17 QC#21782 mod end-->
        </isNotNull>
        <!-- START 2017/12/04 Hd.Sugawara [QC#21957,MOD] -->
        <!-- <isNotNull property="bizMsg.befBillToPostCd_H1"> -->
        <isNotNull property="bizMsg.befShipToPostCd_H1">
        <!-- END 2017/12/04 Hd.Sugawara [QC#21957,MOD] -->
                <!-- 2017/10/17 QC#21782 mod start-->
                <!-- AND PR.BEF_BILL_TO_POST_CD  LIKE #bizMsg.befBillToPostCd_H1# -->
                AND PR.BEF_SHIP_TO_POST_CD  LIKE #bizMsg.befShipToPostCd_H1#
                <!-- 2017/10/17 QC#21782 mod end-->
        </isNotNull>
                AND PR.EZCANCELFLAG      = '0'
                
                AND PR.GLBL_CMPY_CD    = C.GLBL_CMPY_CD(+)
                AND PR.AFT_LOC_CNTY_PK = C.CNTY_PK(+)
                AND C.EZCANCELFLAG(+)  = '0'
                
                AND PR.GLBL_CMPY_CD  = P.GLBL_CMPY_CD(+)
                AND PR.BEF_PSN_NUM   = P.PSN_NUM(+)
        <isNotNull property="bizMsg.lineBizTpCd_H1">
                AND P.LINE_BIZ_TP_CD = #bizMsg.lineBizTpCd_H1#
        </isNotNull>
        <isNotNull property="bizMsg.xxScrItem61Txt_H1">
                AND UPPER(P.PSN_FIRST_NM ||' '|| P.PSN_LAST_NM) LIKE UPPER(#bizMsg.xxScrItem61Txt_H1#)
        </isNotNull>
                AND P.EZCANCELFLAG(+)   = '0'
                
                AND P.GLBL_CMPY_CD   = L.GLBL_CMPY_CD(+)
                AND P.LINE_BIZ_TP_CD = L.LINE_BIZ_TP_CD(+)
                AND L.EZCANCELFLAG(+)   = '0'

                AND PR.GLBL_CMPY_CD     = P2.GLBL_CMPY_CD (+)
                AND PR.BEF_PSN_NUM      = P2.PSN_CD (+)
                AND P2.EZCANCELFLAG (+) = '0'
                
        <isNotNull property="bizMsg.orgNm_H1">
                AND P.GLBL_CMPY_CD   = DOR.GLBL_CMPY_CD
                AND P.PSN_CD         = DOR.PSN_CD
                AND DOR.EZCANCELFLAG = '0'
                
                AND DOR.GLBL_CMPY_CD = DOU.GLBL_CMPY_CD
                AND DOR.ORG_CD       = DOU.ORG_CD
                AND DOU.ORG_NM LIKE #bizMsg.orgNm_H1#
                AND DOU.EZCANCELFLAG = '0'
        </isNotNull>
                AND PR.GLBL_CMPY_CD  = DXAT.GLBL_CMPY_CD (+)
                AND PR.EZCANCELFLAG  = DXAT.EZCANCELFLAG (+)
                AND PR.ACCT_SRC_TXT  = DXAT.DS_XREF_ACCT_TP_DESC_TXT (+)
                AND NOT EXISTS (
                                SELECT
                                   RSLT_V.PROS_RVW_STS_CD
                                FROM
                                   RSLT_V
                                WHERE
                                   RSLT_V.RVW_PROS_NUM = PR.RVW_PROS_NUM
                               )
            )
        WHERE
            ROWNUM &lt;= #rowNum#
        ORDER BY
            RVW_PROS_NUM
    </statement>

    <resultMap id="result.search" class="NMAL2800_ASMsg">
        <result property="prosRvwStsCd_A1"            column="PROS_RVW_STS_CD"              javaType="EZDSStringItem" />
        <result property="rvwProsNum_A1"              column="RVW_PROS_NUM"                 javaType="EZDSStringItem" />
        <result property="befDsAcctNm_A1"             column="BEF_DS_ACCT_NM"               javaType="EZDSStringItem" />
        <result property="befLocFirstLineAddr_A1"     column="BEF_LOC_FIRST_LINE_ADDR"      javaType="EZDSStringItem" />
        <result property="befLocScdLineAddr_A1"       column="BEF_LOC_SCD_LINE_ADDR"        javaType="EZDSStringItem" />
        <result property="befLocThirdLineAddr_A1"     column="BEF_LOC_THIRD_LINE_ADDR"      javaType="EZDSStringItem" />
        <result property="befLocFrthLineAddr_A1"      column="BEF_LOC_FRTH_LINE_ADDR"       javaType="EZDSStringItem" />
        <result property="befShipToCtyAddr_A1"        column="BEF_SHIP_TO_CTY_ADDR"         javaType="EZDSStringItem" />
        <result property="befShipToStNm_A1"           column="BEF_SHIP_TO_ST_NM"            javaType="EZDSStringItem" />
        <result property="befShipToPostCd_A1"         column="BEF_SHIP_TO_POST_CD"          javaType="EZDSStringItem" />
        <result property="befShipToCntyNm_A1"         column="BEF_SHIP_TO_CNTY_NM"          javaType="EZDSStringItem" />
        <result property="befCtryNm_A1"               column="BEF_CTRY_NM"                  javaType="EZDSStringItem" />
        <result property="xxScrItem61Txt_A1"          column="XX_SCR_ITEM_61_TXT"           javaType="EZDSStringItem" />
        <result property="lineBizTpDescTxt_A1"        column="LINE_BIZ_TP_DESC_TXT"         javaType="EZDSStringItem" />
        <result property="resrcTrtyOrgNm_A1"          column="RESRC_TRTY_ORG_NM"            javaType="EZDSStringItem" />
        <result property="candiTrtyNm_A1"             column="CANDI_TRTY_NM"                javaType="EZDSStringItem" />
        <result property="xtrnlCratDtTmTs_A1"         column="XTRNL_CRAT_DT_TM_TS"          javaType="EZDSStringItem" />
        <result property="matchAcctLocNum_A1"         column="MATCH_ACCT_LOC_NUM"           javaType="EZDSStringItem" />
        <result property="aftTrtyOrgCd_A1"            column="AFT_TRTY_ORG_CD"              javaType="EZDSStringItem" />
        <result property="trtyOrgNm_A1"               column="TRTY_ORG_NM"                  javaType="EZDSStringItem" />
        <result property="xxScrItem61Txt_A2"          column="XX_SCR_ITEM_61_TXT_A2"        javaType="EZDSStringItem" />
        <result property="aftLocNum_A1"               column="AFT_LOC_NUM"                  javaType="EZDSStringItem" />
        <result property="aftDsXrefAcctCd_A1"         column="AFT_DS_XREF_ACCT_CD"          javaType="EZDSStringItem" />
        <result property="aftLocFirstLineAddr_A1"     column="AFT_LOC_FIRST_LINE_ADDR"      javaType="EZDSStringItem" />
        <result property="aftLocScdLineAddr_A1"       column="AFT_LOC_SCD_LINE_ADDR"        javaType="EZDSStringItem" />
        <result property="aftLocThirdLineAddr_A1"     column="AFT_LOC_THIRD_LINE_ADDR"      javaType="EZDSStringItem" />
        <result property="aftLocFrthLineAddr_A1"      column="AFT_LOC_FRTH_LINE_ADDR"       javaType="EZDSStringItem" />
        <result property="aftLocCtyAddr_A1"           column="AFT_LOC_CTY_ADDR"             javaType="EZDSStringItem" />
        <result property="aftLocStCd_A1"              column="AFT_LOC_ST_CD"                javaType="EZDSStringItem" />
        <result property="aftLocPostCd_A1"            column="AFT_LOC_POST_CD"              javaType="EZDSStringItem" />
        <result property="cntyNm_A1"                  column="CNTY_NM"                      javaType="EZDSStringItem" />
        <result property="aftCtryCd_A1"               column="AFT_CTRY_CD"                  javaType="EZDSStringItem" />
        <result property="befTelNum_A1"               column="BEF_TEL_NUM"                  javaType="EZDSStringItem" />
        <result property="aftTelNum_A1"               column="AFT_TEL_NUM"                  javaType="EZDSStringItem" />
        <result property="befFaxNum_A1"               column="BEF_FAX_NUM"                  javaType="EZDSStringItem" />
        <result property="aftFaxNum_A1"               column="AFT_FAX_NUM"                  javaType="EZDSStringItem" />
        <result property="xtrnlLastCratDtTmTs_A1"     column="XTRNL_LAST_CRAT_DT_TM_TS"     javaType="EZDSStringItem" />
        <result property="befDunsNum_A1"              column="BEF_DUNS_NUM"                 javaType="EZDSStringItem" />
        <result property="befDsCustSicCd_A1"          column="BEF_DS_CUST_SIC_CD"           javaType="EZDSStringItem" />
        <result property="befDsUltDunsNum_A1"         column="BEF_DS_ULT_DUNS_NUM"          javaType="EZDSStringItem" />
        <result property="aftDsAcctDunsNm_A1"         column="AFT_DS_ACCT_DUNS_NM"          javaType="EZDSStringItem" />
        <result property="aftDsLocRevAmt_A1"          column="AFT_DS_LOC_REV_AMT"           javaType="EZDSBigDecimalItem" />
        <result property="aftDunsNum_A1"              column="AFT_DUNS_NUM"                 javaType="EZDSStringItem" />
        <result property="aftDsCustSicDescTxt_A1"     column="AFT_DS_CUST_SIC_DESC_TXT"     javaType="EZDSStringItem" />
        <result property="aftDsLocEmpNum_A1"          column="AFT_DS_LOC_EMP_NUM"           javaType="EZDSBigDecimalItem" />
        <result property="aftDsCustSicCd_A1"          column="AFT_DS_CUST_SIC_CD"           javaType="EZDSStringItem" />
        <result property="aftDsUltDunsNum_A1"         column="AFT_DS_ULT_DUNS_NUM"          javaType="EZDSStringItem" />
        <!-- Del Start 2018/03/28 QC#23145 -->
        <!-- <result property="aftGlnNum_A1"               column="AFT_GLN_NUM"                  javaType="EZDSBigDecimalItem" /> -->
        <!-- Del End 2018/03/28 QC#23145 -->
        <result property="aftDsPrntDunsNum_A1"        column="AFT_DS_PRNT_DUNS_NUM"         javaType="EZDSStringItem" />
        <result property="aftHqDunsNum_A1"            column="AFT_HQ_DUNS_NUM"              javaType="EZDSStringItem" />
        <result property="aftDsCmpySicCd_A1"          column="AFT_DS_CMPY_SIC_CD"           javaType="EZDSStringItem" />
        <result property="aftDsCmpySicDescTxt_A1"     column="AFT_DS_CMPY_SIC_DESC_TXT"     javaType="EZDSStringItem" />
        <result property="dsAcctNum_A1"               column="DS_ACCT_NUM"                  javaType="EZDSStringItem" />
        <result property="locNum_A1"                  column="LOC_NUM"                      javaType="EZDSStringItem" />
        <result property="dsAcctRvwProsPk_A1"         column="DS_ACCT_RVW_PROS_PK"          javaType="EZDSBigDecimalItem" />
        <result property="ezUpTime_A1"                column="EZUPTIME"                     javaType="EZDSStringItem" />
        <result property="ezUpTimeZone_A1"            column="EZUPTIMEZONE"                 javaType="EZDSStringItem" />
        <result property="dsAcctUrl_A1"               column="DS_ACCT_URL"                  javaType="EZDSStringItem" />
        <result property="dsXrefAcctTpCd_A1"          column="DS_XREF_ACCT_TP_CD"           javaType="EZDSStringItem" />
        <result property="acctSrcTxt_A1"              column="ACCT_SRC_TXT"                 javaType="EZDSStringItem" />
        <result property="befPsnNum_A1"               column="BEF_PSN_NUM"                  javaType="EZDSStringItem" />
        <result property="emlAddr_A1"                 column="EML_ADDR"                     javaType="EZDSStringItem" />
        <result property="prosRvwStsCd_AB"            column="PROS_RVW_STS_CD"              javaType="EZDSStringItem" />
    </resultMap>
    <statement id="getTrtyCandiByResrc" parameterClass="Map" resultClass="Map">
        SELECT 
            OU.ORG_NM
        FROM
              S21_PSN           P
            , DS_ORG_RESRC_RELN ORR
            , DS_ORG_UNIT       OU
            , ORG_STRU_TP       OST
        WHERE
                P.GLBL_CMPY_CD = #glblCmpyCd#
            AND P.EZCANCELFLAG = '0'
            AND P.PSN_NUM      = #psnNum#
            AND P.GLBL_CMPY_CD   = ORR.GLBL_CMPY_CD
            AND P.PSN_CD         = ORR.PSN_CD
            AND ORR.GNRN_TP_CD   = #gntnTpCd_Reln#
            AND ORR.EZCANCELFLAG = '0'
            AND ORR.GLBL_CMPY_CD   = OU.GLBL_CMPY_CD
            AND ORR.ORG_STRU_TP_CD = OU.ORG_STRU_TP_CD
            AND ORR.ORG_CD         = OU.ORG_CD
            AND OU.GNRN_TP_CD &lt;&gt; #gntnTpCd_OU#
            AND OU.GLBL_CMPY_CD   = OST.GLBL_CMPY_CD
            AND OU.ORG_STRU_TP_CD = OST.ORG_STRU_TP_CD 
            AND OST.TRTY_STRU_FLG = 'Y'
            AND OST.EZCANCELFLAG  = '0'
    </statement>
    <statement id="getDsAcctNumForCust" parameterClass="Map" resultClass="Map">
        SELECT
              A.SELL_TO_CUST_CD
            , AL.PTY_LOC_PK
            , A.DS_ACCT_NM
            , A.DS_ACCT_ITRL_FLG
            , A.DS_ACCT_CLS_CD
            , A.COA_CH_CD
            , A.COA_AFFL_CD
            , A.DS_ACCT_DLR_CD
            , A.DS_ACCT_LEGAL_NM
            , A.DBA_NM
            , A.RGTN_STS_CD
            , A.DS_ACCT_URL
            , A.DS_ACCT_DUNS_NUM
            , A.DS_ULT_DUNS_NUM
            , A.DS_ACCT_ALT_NM
            , A.DS_LOC_EMP_NUM
            , A.DS_LOC_REV_AMT
            , A.DS_XTRNL_REF_TXT
            , A.DS_DATA_SRC_TXT
            , L.EFF_FROM_DT
            , L.EFF_THRU_DT
            , L.ADDL_LOC_NM
            , L.FAX_NUM
            , L.PROV_NM
            , L.FIRST_LINE_ADDR
            , L.SCD_LINE_ADDR
            , L.THIRD_LINE_ADDR
            , L.FRTH_LINE_ADDR
            , L.CTY_ADDR
            , L.ST_CD
            , L.POST_CD
            , L.CNTY_PK
            , L.CTRY_CD
            , L.GLN_NUM
            , L.TEL_NUM
            , L.LINE_BIZ_TP_CD
            , L.DUNS_TRADE_STYLE_NM
            , L.DUNS_ACTV_CD
            , L.DUNS_LINE_ADDR
            , L.DUNS_BIZ_NM
            , L.DS_LOC_NM
            , L.DS_LAST_RCV_DUNS_TXT
            , L.DS_LAST_RCV_DUNS_DT
            , L.DUNS_SEND_CNT
        FROM
              ACCT_LOC       AL
            , SELL_TO_CUST   A
            , PTY_LOC_WRK    L
        WHERE
                AL.GLBL_CMPY_CD = #glblCmpyCd#
            AND AL.LOC_NUM      = #locNum#
            AND AL.EZCANCELFLAG = '0'
            
            AND AL.GLBL_CMPY_CD = A.GLBL_CMPY_CD
            AND AL.DS_ACCT_NUM  = A.SELL_TO_CUST_CD
            AND A.EZCANCELFLAG  = '0'
                        
            AND AL.GLBL_CMPY_CD = L.GLBL_CMPY_CD
            AND AL.LOC_NUM      = L.LOC_NUM
            AND L.EZCANCELFLAG  = '0'
    </statement>
    <statement id="getDsAcctNumForPros" parameterClass="Map" resultClass="Map">
        SELECT
              P.DS_ACCT_NUM
            , P.PTY_LOC_PK
            , P.DS_ACCT_NM
            , P.DS_ACCT_ITRL_FLG
            , P.DS_ACCT_CLS_CD
            , P.COA_CH_CD
            , P.COA_AFFL_CD
            , P.DS_ACCT_DLR_CD
            , P.DS_ACCT_LEGAL_NM
            , P.DBA_NM
            , P.RGTN_STS_CD
            , P.DS_ACCT_URL
            , P.DS_ACCT_DUNS_NUM
            , P.DS_ULT_DUNS_NUM
            , P.DS_ACCT_ALT_NM
            , P.DS_LOC_EMP_NUM
            , P.DS_LOC_REV_AMT
            , P.DS_XTRNL_REF_TXT
            , P.DS_DATA_SRC_TXT
            , L.EFF_FROM_DT
            , L.EFF_THRU_DT
            , L.ADDL_LOC_NM
            , L.FAX_NUM
            , L.PROV_NM
            , L.FIRST_LINE_ADDR
            , L.SCD_LINE_ADDR
            , L.THIRD_LINE_ADDR
            , L.FRTH_LINE_ADDR
            , L.CTY_ADDR
            , L.ST_CD
            , L.POST_CD
            , L.CNTY_PK
            , L.CTRY_CD
            , L.GLN_NUM
            , L.TEL_NUM
            , L.LINE_BIZ_TP_CD
            , L.DUNS_TRADE_STYLE_NM
            , L.DUNS_ACTV_CD
            , L.DUNS_LINE_ADDR
            , L.DUNS_BIZ_NM
            , L.DS_LAST_RCV_DUNS_TXT
            , L.DS_LAST_RCV_DUNS_DT
            , L.DUNS_SEND_CNT
            , L.DS_LOC_NM
        FROM
              DS_ACCT_PROS   P
            , PROS_PTY_LOC_WRK    L
        WHERE
                P.GLBL_CMPY_CD  = #glblCmpyCd#
            AND P.LOC_NUM       = #locNum#
            AND P.EZCANCELFLAG  = '0'
            
            AND P.GLBL_CMPY_CD  = L.GLBL_CMPY_CD
            AND P.LOC_NUM       = L.LOC_NUM
            AND L.EZCANCELFLAG  = '0'
    </statement>
    <statement id="getCurrentOwnerInfo" parameterClass="Map" resultClass="Map">
       SELECT
              P.PSN_FIRST_NM ||' '|| P.PSN_LAST_NM AS XX_SCR_ITEM_61_TXT
            , L.LINE_BIZ_TP_DESC_TXT
            , L.LINE_BIZ_TP_CD
        FROM
              S21_PSN           P
            , LINE_BIZ_TP       L
        WHERE
                P.GLBL_CMPY_CD = #glblCmpyCd#
            AND P.PSN_NUM      = #psnNum#
            AND P.EZCANCELFLAG  = '0'
            
            AND P.GLBL_CMPY_CD   = L.GLBL_CMPY_CD
            AND P.LINE_BIZ_TP_CD = L.LINE_BIZ_TP_CD
            AND L.EZCANCELFLAG   = '0'
    </statement>
    <statement id="getSalesRep" parameterClass="Map" resultClass="Map">
        SELECT
              P.PSN_CD
            , P.LINE_BIZ_TP_CD
            , P.PSN_NUM
            , P.PSN_FIRST_NM
            , P.PSN_LAST_NM
        FROM
              DS_ORG_RESRC_RELN DOR
            , S21_PSN           P
        WHERE
                DOR.GLBL_CMPY_CD = #glblCmpyCd#
            AND DOR.ORG_CD       = #orgCd#
            AND DOR.ACCT_TEAM_ROLE_TP_CD IS NULL
            AND DOR.EZCANCELFLAG = '0'
            
            AND DOR.GLBL_CMPY_CD = P.GLBL_CMPY_CD
            AND DOR.PSN_CD       = P.PSN_CD
            AND P.EZCANCELFLAG   = '0'
    </statement>
    <statement id="getTrtyInfo" parameterClass="Map" resultClass="Map">
        SELECT
              DOU.ORG_STRU_TP_CD
            , P.PSN_CD
        FROM
              DS_ORG_UNIT       DOU
            , ORG_STRU_TP       OST
            , DS_ORG_RESRC_RELN DOR
            , S21_PSN           P
        WHERE
                DOU.GLBL_CMPY_CD = #glblCmpyCd#
            AND DOU.ORG_CD       = #orgCd#
        <iterate property="gnrnTpCd" var="gnrnTpCd[]" open="AND DOU.GNRN_TP_CD IN (" close=")" conjunction=",">
            #gnrnTpCd[]#
        </iterate>
            AND DOU.EZCANCELFLAG = '0'
            
            AND DOU.GLBL_CMPY_CD   = OST.GLBL_CMPY_CD
            AND DOU.ORG_STRU_TP_CD = OST.ORG_STRU_TP_CD
            AND OST.TRTY_STRU_FLG  = 'Y'
            AND OST.EZCANCELFLAG   = '0'
            
            AND DOU.GLBL_CMPY_CD     = DOR.GLBL_CMPY_CD (+)
            AND DOU.ORG_CD           = DOR.ORG_CD (+)
            AND DOU.ORG_STRU_TP_CD   = DOR.ORG_STRU_TP_CD (+)
        <iterate property="gnrnTpCd" var="gnrnTpCd[]" open="AND DOR.GNRN_TP_CD (+) IN (" close=")" conjunction=",">
            #gnrnTpCd[]#
        </iterate>
            AND DOR.ACCT_TEAM_ROLE_TP_CD (+) IS NULL
            AND DOR.EZCANCELFLAG (+) = '0'
            
            AND DOR.GLBL_CMPY_CD   = P.GLBL_CMPY_CD (+)
            AND DOR.PSN_CD         = P.PSN_CD (+)
            AND P.EZCANCELFLAG (+) = '0'
    </statement>
    <statement id="getTrtyGrpInfo" parameterClass="Map" resultClass="Map">
        SELECT
            OU.ORG_CD
        FROM
              DS_ORG_UNIT       OU
            , ORG_STRU_TP       OST
            , TRTY_GRP_TP       TGT
            , BIZ_AREA_ORG      BAO
            , DS_ORG_RESRC_RELN ORR
        WHERE
                OU.GLBL_CMPY_CD = #glblCmpyCd#
            AND OU.ORG_CD       = #orgCd#
            AND OU.GNRN_TP_CD   = #gnrnTpCd#
            AND OU.EZCANCELFLAG = '0'
            
            AND OU.GLBL_CMPY_CD   = OST.GLBL_CMPY_CD
            AND OU.ORG_STRU_TP_CD = OST.ORG_STRU_TP_CD
            AND OST.TRTY_STRU_FLG = 'Y'
            AND OST.EZCANCELFLAG  = '0'
            
            AND OU.GLBL_CMPY_CD     = TGT.GLBL_CMPY_CD
            AND OU.TRTY_GRP_TP_CD   = TGT.TRTY_GRP_TP_CD
            AND TGT.NON_SLS_REP_FLG = #nonSlsRepFlg#
            AND TGT.EZCANCELFLAG    = '0'
            
            AND OU.GLBL_CMPY_CD   = BAO.GLBL_CMPY_CD
            AND OU.FIRST_ORG_CD   = BAO.BIZ_AREA_ORG_CD
            AND OU.ORG_STRU_TP_CD = BAO.ORG_STRU_TP_CD
            AND BAO.EZCANCELFLAG  = '0'
            
            AND OU.GLBL_CMPY_CD   = ORR.GLBL_CMPY_CD
            AND OU.ORG_CD         = ORR.ORG_CD
        <isNotNull property="nonSlsRep">
            AND ORR.ACCT_TEAM_ROLE_TP_CD IS NULL
        </isNotNull>
            AND ORR.GNRN_TP_CD    = #gnrnTpCd#
            AND ORR.EZCANCELFLAG  = '0'
    </statement>
    <statement id="searchUpldTrgt" parameterClass="Map" resultClass="Map">
        <!-- 2017/11/17 QC#22632 mod start -->
        <!-- SELECT
              RVW_PROS_NUM
            , BEF_DS_ACCT_NM
            , BEF_BILL_TO_FIRST_LINE_ADDR
            , BEF_BILL_TO_SCD_LINE_ADDR
            , BEF_BILL_TO_THIRD_LINE_ADDR
            , BEF_BILL_TO_FRTH_LINE_ADDR
            , BEF_BILL_TO_CTY_ADDR
            , BEF_BILL_TO_ST_CD
            , BEF_BILL_TO_POST_CD
            , BEF_BILL_TO_CNTY_NM
            , BEF_LOC_FIRST_LINE_ADDR
            , BEF_LOC_SCD_LINE_ADDR
            , BEF_LOC_THIRD_LINE_ADDR
            , BEF_LOC_FRTH_LINE_ADDR
            , BEF_SHIP_TO_CTY_ADDR
            , BEF_SHIP_TO_ST_NM
            , BEF_SHIP_TO_POST_CD
            , BEF_SHIP_TO_CNTY_NM
            , BEF_CTRY_NM
            , BEF_DUNS_NUM
            , BEF_DS_LOC_EMP_NUM
            , BEF_DS_CUST_SIC_CD
            , BEF_DS_ULT_DUNS_NUM
            , BEF_TEL_NUM
            , BEF_FAX_NUM
            , ACCT_ID_ADDR_RVW_PROS_FLG
            , AFT_DS_XREF_ACCT_CD
            , TRTY_ORG_NM
            , BEF_PSN_NUM
            , XX_SCR_ITEM_61_TXT
            , AFT_LOC_NUM
            , CANDI_TRTY_NM
            , XTRNL_CRAT_DT_TM_TS
            , XTRNL_LAST_CRAT_DT_TM_TS
            , AFT_DS_ACCT_NM
            , AFT_LOC_FIRST_LINE_ADDR
            , AFT_LOC_SCD_LINE_ADDR
            , AFT_LOC_THIRD_LINE_ADDR
            , AFT_LOC_FRTH_LINE_ADDR
            , AFT_LOC_CTY_ADDR
            , AFT_LOC_ST_CD
            , AFT_LOC_POST_CD
            , CNTY_NM
            , AFT_CTRY_CD
            , AFT_TRTY_ORG_CD
            , AFT_TEL_NUM
            , AFT_FAX_NUM
            , AFT_DS_ACCT_DUNS_NM
            , AFT_DS_LOC_REV_AMT
            , AFT_DUNS_NUM
            , AFT_DS_CUST_SIC_DESC_TXT
            , AFT_DS_LOC_EMP_NUM
            , AFT_DS_CUST_SIC_CD
            , AFT_DS_ULT_DUNS_NUM
            , AFT_GLN_NUM
            , AFT_DS_PRNT_DUNS_NUM
            , AFT_HQ_DUNS_NUM
            , AFT_DS_CMPY_SIC_CD
            , AFT_DS_CMPY_SIC_DESC_TXT
            , MATCH_ACCT_LOC_NUM
            , RETAN_FLD_TXT
            , PROS_RVW_STS_CD
        FROM
            (
            SELECT
                  PR.RVW_PROS_NUM
                , PR.BEF_DS_ACCT_NM
                , PR.BEF_BILL_TO_FIRST_LINE_ADDR
                , PR.BEF_BILL_TO_SCD_LINE_ADDR
                , PR.BEF_BILL_TO_THIRD_LINE_ADDR
                , PR.BEF_BILL_TO_FRTH_LINE_ADDR
                , PR.BEF_BILL_TO_CTY_ADDR
                , PR.BEF_BILL_TO_ST_CD
                , PR.BEF_BILL_TO_POST_CD
                , PR.BEF_BILL_TO_CNTY_NM
                , PR.BEF_LOC_FIRST_LINE_ADDR
                , PR.BEF_LOC_SCD_LINE_ADDR
                , PR.BEF_LOC_THIRD_LINE_ADDR
                , PR.BEF_LOC_FRTH_LINE_ADDR
                , PR.BEF_SHIP_TO_CTY_ADDR
                , PR.BEF_SHIP_TO_ST_NM
                , PR.BEF_SHIP_TO_POST_CD
                , PR.BEF_SHIP_TO_CNTY_NM
                , PR.BEF_CTRY_NM
                , PR.BEF_DUNS_NUM
                , PR.BEF_DS_LOC_EMP_NUM
                , PR.BEF_DS_CUST_SIC_CD
                , PR.BEF_DS_ULT_DUNS_NUM
                , PR.BEF_TEL_NUM
                , PR.BEF_FAX_NUM
                , PR.ACCT_ID_ADDR_RVW_PROS_FLG
                , PR.AFT_DS_XREF_ACCT_CD
                , PR.TRTY_ORG_NM
                , PR.BEF_PSN_NUM
                , P.PSN_FIRST_NM ||' '|| P.PSN_LAST_NM AS XX_SCR_ITEM_61_TXT
                , PR.AFT_LOC_NUM
                , PR.CANDI_TRTY_NM
                , PR.XTRNL_CRAT_DT_TM_TS
                , PR.XTRNL_LAST_CRAT_DT_TM_TS
                , PR.AFT_DS_ACCT_NM
                , PR.AFT_LOC_FIRST_LINE_ADDR
                , PR.AFT_LOC_SCD_LINE_ADDR
                , PR.AFT_LOC_THIRD_LINE_ADDR
                , PR.AFT_LOC_FRTH_LINE_ADDR
                , PR.AFT_LOC_CTY_ADDR
                , PR.AFT_LOC_ST_CD
                , PR.AFT_LOC_POST_CD
                , C.CNTY_NM
                , PR.AFT_CTRY_CD
                , PR.AFT_TRTY_ORG_CD
                , PR.AFT_TEL_NUM
                , PR.AFT_FAX_NUM
                , PR.AFT_DS_ACCT_DUNS_NM
                , PR.AFT_DS_LOC_REV_AMT
                , PR.AFT_DUNS_NUM
                , PR.AFT_DS_CUST_SIC_DESC_TXT
                , PR.AFT_DS_LOC_EMP_NUM
                , PR.AFT_DS_CUST_SIC_CD
                , PR.AFT_DS_ULT_DUNS_NUM
                , PR.AFT_GLN_NUM
                , PR.AFT_DS_PRNT_DUNS_NUM
                , PR.AFT_HQ_DUNS_NUM
                , PR.AFT_DS_CMPY_SIC_CD
                , PR.AFT_DS_CMPY_SIC_DESC_TXT
                , PR.MATCH_ACCT_LOC_NUM
                , PR.RETAN_FLD_TXT
                , PR.PROS_RVW_STS_CD
            FROM
                  DS_ACCT_RVW_PROS PR
                , CNTY             C
                , S21_PSN          P
                , LINE_BIZ_TP       L
            WHERE               
                    PR.GLBL_CMPY_CD = #glblCmpyCd#
                AND PR.PROS_RVW_STS_CD IS NULL
                AND PR.EZCANCELFLAG = '0'

                AND PR.GLBL_CMPY_CD     = C.GLBL_CMPY_CD (+)
                AND PR.AFT_LOC_CNTY_PK  = C.CNTY_PK (+)
                AND C.EZCANCELFLAG (+)  = '0'

                AND PR.GLBL_CMPY_CD    = P.GLBL_CMPY_CD (+) 
                AND PR.BEF_PSN_NUM     = P.PSN_NUM (+) 
                AND P.EZCANCELFLAG (+) = '0'

                AND P.GLBL_CMPY_CD   = L.GLBL_CMPY_CD
                AND P.LINE_BIZ_TP_CD = L.LINE_BIZ_TP_CD
                AND L.EZCANCELFLAG   = '0'
                
                ORDER BY
                    PR.RVW_PROS_NUM
                )
            WHERE
                ROWNUM &lt;= #rowNum# -->
       WITH RSLT_V AS (
           SELECT
                  PR.RVW_PROS_NUM
                , PR.BEF_DS_ACCT_NM
                , PR.BEF_BILL_TO_FIRST_LINE_ADDR
                , PR.BEF_BILL_TO_SCD_LINE_ADDR
                , PR.BEF_BILL_TO_THIRD_LINE_ADDR
                , PR.BEF_BILL_TO_FRTH_LINE_ADDR
                , PR.BEF_BILL_TO_CTY_ADDR
                , PR.BEF_BILL_TO_ST_CD
                , PR.BEF_BILL_TO_POST_CD
                , PR.BEF_BILL_TO_CNTY_NM
                , PR.BEF_LOC_FIRST_LINE_ADDR
                , PR.BEF_LOC_SCD_LINE_ADDR
                , PR.BEF_LOC_THIRD_LINE_ADDR
                , PR.BEF_LOC_FRTH_LINE_ADDR
                , PR.BEF_SHIP_TO_CTY_ADDR
                , PR.BEF_SHIP_TO_ST_NM
                , PR.BEF_SHIP_TO_POST_CD
                , PR.BEF_SHIP_TO_CNTY_NM
                , PR.BEF_CTRY_NM
                , PR.BEF_DUNS_NUM
                , PR.BEF_DS_LOC_EMP_NUM
                , PR.BEF_DS_CUST_SIC_CD
                , PR.BEF_DS_ULT_DUNS_NUM
                , PR.BEF_TEL_NUM
                , PR.BEF_FAX_NUM
                , PR.ACCT_ID_ADDR_RVW_PROS_FLG
                , PR.AFT_DS_XREF_ACCT_CD
                , PR.TRTY_ORG_NM
                , PR.BEF_PSN_NUM
                , P.PSN_FIRST_NM ||' '|| P.PSN_LAST_NM AS XX_SCR_ITEM_61_TXT
                , PR.AFT_LOC_NUM
                <!-- START 2018/01/16 Hd.Sugawara [QC#23148,ADD] -->
                , PR.RESRC_TRTY_ORG_NM
                <!-- END 2018/01/16 Hd.Sugawara [QC#23148,ADD] -->
                , PR.CANDI_TRTY_NM
                , PR.XTRNL_CRAT_DT_TM_TS
                , PR.XTRNL_LAST_CRAT_DT_TM_TS
                , PR.AFT_DS_ACCT_NM
                <!-- START 2018/01/16 Hd.Sugawara [QC#23148,DEL] -->
                <!-- , PR.AFT_LOC_FIRST_LINE_ADDR -->
                <!-- , PR.AFT_LOC_SCD_LINE_ADDR -->
                <!-- , PR.AFT_LOC_THIRD_LINE_ADDR -->
                <!-- , PR.AFT_LOC_FRTH_LINE_ADDR -->
                <!-- , PR.AFT_LOC_CTY_ADDR -->
                <!-- , PR.AFT_LOC_ST_CD -->
                <!-- , PR.AFT_LOC_POST_CD -->
                <!-- , C.CNTY_NM -->
                <!-- , PR.AFT_CTRY_CD -->
                <!-- END 2018/01/16 Hd.Sugawara [QC#23148,DEL] -->
                , PR.AFT_TRTY_ORG_CD
                , PR.AFT_TEL_NUM
                , PR.AFT_FAX_NUM
                , PR.AFT_DS_ACCT_DUNS_NM
                , PR.AFT_DS_LOC_REV_AMT
                , PR.AFT_DUNS_NUM
                , PR.AFT_DS_CUST_SIC_DESC_TXT
                , PR.AFT_DS_LOC_EMP_NUM
                , PR.AFT_DS_CUST_SIC_CD
                , PR.AFT_DS_ULT_DUNS_NUM
                <!-- Del Start 2018/03/28 QC#23145 -->
                <!-- , PR.AFT_GLN_NUM -->
                <!-- Del End 2018/03/28 QC#23145 -->
                , PR.AFT_DS_PRNT_DUNS_NUM
                , PR.AFT_HQ_DUNS_NUM
                , PR.AFT_DS_CMPY_SIC_CD
                , PR.AFT_DS_CMPY_SIC_DESC_TXT
                , PR.MATCH_ACCT_LOC_NUM
                , PR.RETAN_FLD_TXT
                , PR.PROS_RVW_STS_CD
            FROM
                  DS_ACCT_RVW_PROS  PR
                <!-- START 2018/01/16 Hd.Sugawara [QC#23148,DEL] -->
                <!-- , CNTY              C -->
                <!-- END 2018/01/16 Hd.Sugawara [QC#23148,DEL] -->
                , S21_PSN           P
                , LINE_BIZ_TP       L
                , DS_ORG_RESRC_RELN DOR2
                , S21_PSN           P2
        <isNotNull property="bizMsg.orgNm_H1">
                , DS_ORG_RESRC_RELN DOR
                , DS_ORG_UNIT       DOU
        </isNotNull>
                , DS_XREF_ACCT_TP   DXAT
            WHERE               
                    PR.GLBL_CMPY_CD = #glblCmpyCd#
        <isNotNull property="bizMsg.xxDt10Dt_H1">
                AND PR.XTRNL_CRAT_DT_TM_TS &gt;= #tmTsFrom#
        </isNotNull>
        <isNotNull property="bizMsg.xxDt10Dt_H2">
                AND PR.XTRNL_CRAT_DT_TM_TS &lt;= #tmTsTo#
        </isNotNull>
        <isNotNull property="bizMsg.befDsAcctNm_H1">
                AND UPPER(PR.BEF_DS_ACCT_NM)  LIKE UPPER(#bizMsg.befDsAcctNm_H1#)
        </isNotNull>
        <isNotNull property="bizMsg.rvwProsNum_H1">
                AND PR.RVW_PROS_NUM LIKE #bizMsg.rvwProsNum_H1#
        </isNotNull>
        <isNotNull property="bizMsg.befPsnNum_H1">
                AND PR.BEF_PSN_NUM  LIKE #bizMsg.befPsnNum_H1#
        </isNotNull>
        <isNull property="allFlg">
            <isNull property="blankFlg">
                <isNotNull property="bizMsg.prosRvwStsCd_H1">
                AND PR.PROS_RVW_STS_CD  = #bizMsg.prosRvwStsCd_H1#
                </isNotNull>
            </isNull>
            <isNotNull property="blankFlg">
                AND PR.PROS_RVW_STS_CD IS NULL
            </isNotNull>
        </isNull>
        <isNotNull property="bizMsg.dupAcctLocFlg_H1">
                AND PR.DUP_ACCT_LOC_FLG = #bizMsg.dupAcctLocFlg_H1#
        </isNotNull>
        <isNotNull property="bizMsg.shipAddrAllTxt_H1">
                AND UPPER(PR.BEF_LOC_FIRST_LINE_ADDR || PR.BEF_LOC_SCD_LINE_ADDR || 
                    PR.BEF_LOC_THIRD_LINE_ADDR || PR.BEF_LOC_FRTH_LINE_ADDR) LIKE UPPER(#bizMsg.shipAddrAllTxt_H1#)
        </isNotNull>
        <isNotNull property="bizMsg.befShipToCtyAddr_H1">
                AND UPPER(PR.BEF_SHIP_TO_CTY_ADDR) LIKE UPPER(#bizMsg.befShipToCtyAddr_H1#)
        </isNotNull>
        <!-- START 2017/12/04 Hd.Sugawara [QC#21957,MOD] -->
        <!-- <isNotNull property="bizMsg.befShipToStCd_H1"> -->
        <isNotNull property="bizMsg.befShipToStNm_H1">
        <!-- END 2017/12/04 Hd.Sugawara [QC#21957,MOD] -->
                AND PR.BEF_SHIP_TO_ST_NM = #bizMsg.befShipToStNm_H1#
        </isNotNull>
        <isNotNull property="bizMsg.befShipToPostCd_H1">
                AND PR.BEF_SHIP_TO_POST_CD  LIKE #bizMsg.befShipToPostCd_H1#
        </isNotNull>
                AND PR.EZCANCELFLAG      = '0'

                <!-- START 2018/01/16 Hd.Sugawara [QC#23148,DEL] -->
                <!-- AND PR.GLBL_CMPY_CD    = C.GLBL_CMPY_CD(+) -->
                <!-- AND PR.AFT_LOC_CNTY_PK = C.CNTY_PK(+) -->
                <!-- AND C.EZCANCELFLAG(+)  = '0' -->
                <!-- END 2018/01/16 Hd.Sugawara [QC#23148,DEL] -->

                AND PR.GLBL_CMPY_CD  = P.GLBL_CMPY_CD(+)
                AND PR.BEF_PSN_NUM   = P.PSN_NUM(+)
        <isNotNull property="bizMsg.lineBizTpCd_H1">
                AND P.LINE_BIZ_TP_CD = #bizMsg.lineBizTpCd_H1#
        </isNotNull>
        <isNotNull property="bizMsg.xxScrItem61Txt_H1">
                AND UPPER(P.PSN_FIRST_NM ||' '|| P.PSN_LAST_NM) LIKE UPPER(#bizMsg.xxScrItem61Txt_H1#)
        </isNotNull>
                AND P.EZCANCELFLAG(+)   = '0'
                
                AND P.GLBL_CMPY_CD   = L.GLBL_CMPY_CD(+)
                AND P.LINE_BIZ_TP_CD = L.LINE_BIZ_TP_CD(+)
                AND L.EZCANCELFLAG(+)   = '0'
                
                AND PR.GLBL_CMPY_CD       = DOR2.GLBL_CMPY_CD (+)
                AND PR.AFT_TRTY_ORG_CD    = DOR2.ORG_CD (+)
                
                AND DOR2.ACCT_TEAM_ROLE_TP_CD IS NULL
                AND DOR2.GNRN_TP_CD (+)   = #gnrnTpCd#
                AND DOR2.EZCANCELFLAG (+) = '0'

                AND DOR2.GLBL_CMPY_CD     = P2.GLBL_CMPY_CD (+)
                AND DOR2.PSN_CD           = P2.PSN_CD (+)
                AND P2.EZCANCELFLAG (+) = '0'
                
        <isNotNull property="bizMsg.orgNm_H1">
                AND P.GLBL_CMPY_CD   = DOR.GLBL_CMPY_CD
                AND P.PSN_CD         = DOR.PSN_CD
                AND DOR.EZCANCELFLAG = '0'
                
                AND DOR.GLBL_CMPY_CD = DOU.GLBL_CMPY_CD
                AND DOR.ORG_CD       = DOU.ORG_CD
                AND DOU.ORG_NM LIKE #bizMsg.orgNm_H1#
                AND DOU.EZCANCELFLAG = '0'
        </isNotNull>
                AND PR.GLBL_CMPY_CD  = DXAT.GLBL_CMPY_CD (+)
                AND PR.EZCANCELFLAG  = DXAT.EZCANCELFLAG (+)
                AND PR.ACCT_SRC_TXT  = DXAT.DS_XREF_ACCT_TP_DESC_TXT (+)
            )

        SELECT
              RVW_PROS_NUM
            , BEF_DS_ACCT_NM
            , BEF_BILL_TO_FIRST_LINE_ADDR
            , BEF_BILL_TO_SCD_LINE_ADDR
            , BEF_BILL_TO_THIRD_LINE_ADDR
            , BEF_BILL_TO_FRTH_LINE_ADDR
            , BEF_BILL_TO_CTY_ADDR
            , BEF_BILL_TO_ST_CD
            , BEF_BILL_TO_POST_CD
            , BEF_BILL_TO_CNTY_NM
            , BEF_LOC_FIRST_LINE_ADDR
            , BEF_LOC_SCD_LINE_ADDR
            , BEF_LOC_THIRD_LINE_ADDR
            , BEF_LOC_FRTH_LINE_ADDR
            , BEF_SHIP_TO_CTY_ADDR
            , BEF_SHIP_TO_ST_NM
            , BEF_SHIP_TO_POST_CD
            , BEF_SHIP_TO_CNTY_NM
            , BEF_CTRY_NM
            , BEF_DUNS_NUM
            , BEF_DS_LOC_EMP_NUM
            , BEF_DS_CUST_SIC_CD
            , BEF_DS_ULT_DUNS_NUM
            , BEF_TEL_NUM
            , BEF_FAX_NUM
            , ACCT_ID_ADDR_RVW_PROS_FLG
            , AFT_DS_XREF_ACCT_CD
            , TRTY_ORG_NM
            , BEF_PSN_NUM
            , XX_SCR_ITEM_61_TXT
            , AFT_LOC_NUM
            <!-- START 2018/01/16 Hd.Sugawara [QC#23148,ADD] -->
            , RESRC_TRTY_ORG_NM
            <!-- END 2018/01/16 Hd.Sugawara [QC#23148,ADD] -->
            , CANDI_TRTY_NM
            , XTRNL_CRAT_DT_TM_TS
            , XTRNL_LAST_CRAT_DT_TM_TS
            , AFT_DS_ACCT_NM
            <!-- START 2018/01/16 Hd.Sugawara [QC#23148,DEL] -->
            <!-- , AFT_LOC_FIRST_LINE_ADDR -->
            <!-- , AFT_LOC_SCD_LINE_ADDR -->
            <!-- , AFT_LOC_THIRD_LINE_ADDR -->
            <!-- , AFT_LOC_FRTH_LINE_ADDR -->
            <!-- , AFT_LOC_CTY_ADDR -->
            <!-- , AFT_LOC_ST_CD -->
            <!-- , AFT_LOC_POST_CD -->
            <!-- , CNTY_NM -->
            <!-- , AFT_CTRY_CD -->
            <!-- END 2018/01/16 Hd.Sugawara [QC#23148,DEL] -->
            , AFT_TRTY_ORG_CD
            , AFT_TEL_NUM
            , AFT_FAX_NUM
            , AFT_DS_ACCT_DUNS_NM
            , AFT_DS_LOC_REV_AMT
            , AFT_DUNS_NUM
            , AFT_DS_CUST_SIC_DESC_TXT
            , AFT_DS_LOC_EMP_NUM
            , AFT_DS_CUST_SIC_CD
            , AFT_DS_ULT_DUNS_NUM
            <!-- Del Start 2018/03/28 QC#23145 -->
            <!-- , AFT_GLN_NUM -->
            <!-- Del End 2018/03/28 QC#23145 -->
            , AFT_DS_PRNT_DUNS_NUM
            , AFT_HQ_DUNS_NUM
            , AFT_DS_CMPY_SIC_CD
            , AFT_DS_CMPY_SIC_DESC_TXT
            , MATCH_ACCT_LOC_NUM
            , RETAN_FLD_TXT
            , PROS_RVW_STS_CD
        FROM
            (
            SELECT DISTINCT
                RSLT_V.RVW_PROS_NUM
                , RSLT_V.BEF_DS_ACCT_NM
                , RSLT_V.BEF_BILL_TO_FIRST_LINE_ADDR
                , RSLT_V.BEF_BILL_TO_SCD_LINE_ADDR
                , RSLT_V.BEF_BILL_TO_THIRD_LINE_ADDR
                , RSLT_V.BEF_BILL_TO_FRTH_LINE_ADDR
                , RSLT_V.BEF_BILL_TO_CTY_ADDR
                , RSLT_V.BEF_BILL_TO_ST_CD
                , RSLT_V.BEF_BILL_TO_POST_CD
                , RSLT_V.BEF_BILL_TO_CNTY_NM
                , RSLT_V.BEF_LOC_FIRST_LINE_ADDR
                , RSLT_V.BEF_LOC_SCD_LINE_ADDR
                , RSLT_V.BEF_LOC_THIRD_LINE_ADDR
                , RSLT_V.BEF_LOC_FRTH_LINE_ADDR
                , RSLT_V.BEF_SHIP_TO_CTY_ADDR
                , RSLT_V.BEF_SHIP_TO_ST_NM
                , RSLT_V.BEF_SHIP_TO_POST_CD
                , RSLT_V.BEF_SHIP_TO_CNTY_NM
                , RSLT_V.BEF_CTRY_NM
                , RSLT_V.BEF_DUNS_NUM
                , RSLT_V.BEF_DS_LOC_EMP_NUM
                , RSLT_V.BEF_DS_CUST_SIC_CD
                , RSLT_V.BEF_DS_ULT_DUNS_NUM
                , RSLT_V.BEF_TEL_NUM
                , RSLT_V.BEF_FAX_NUM
                , RSLT_V.ACCT_ID_ADDR_RVW_PROS_FLG
                , RSLT_V.AFT_DS_XREF_ACCT_CD
                , RSLT_V.TRTY_ORG_NM
                , RSLT_V.BEF_PSN_NUM
                , RSLT_V.XX_SCR_ITEM_61_TXT
                , RSLT_V.AFT_LOC_NUM
                <!-- START 2018/01/16 Hd.Sugawara [QC#23148,ADD] -->
                , RSLT_V.RESRC_TRTY_ORG_NM
                <!-- END 2018/01/16 Hd.Sugawara [QC#23148,ADD] -->
                , RSLT_V.CANDI_TRTY_NM
                , RSLT_V.XTRNL_CRAT_DT_TM_TS
                , RSLT_V.XTRNL_LAST_CRAT_DT_TM_TS
                , RSLT_V.AFT_DS_ACCT_NM
                <!-- START 2018/01/16 Hd.Sugawara [QC#23148,DEL] -->
                <!-- , RSLT_V.AFT_LOC_FIRST_LINE_ADDR -->
                <!-- , RSLT_V.AFT_LOC_SCD_LINE_ADDR -->
                <!-- , RSLT_V.AFT_LOC_THIRD_LINE_ADDR -->
                <!-- , RSLT_V.AFT_LOC_FRTH_LINE_ADDR -->
                <!-- , RSLT_V.AFT_LOC_CTY_ADDR -->
                <!-- , RSLT_V.AFT_LOC_ST_CD -->
                <!-- , RSLT_V.AFT_LOC_POST_CD -->
                <!-- , RSLT_V.CNTY_NM -->
                <!-- , RSLT_V.AFT_CTRY_CD -->
                <!-- END 2018/01/16 Hd.Sugawara [QC#23148,DEL] -->
                , RSLT_V.AFT_TRTY_ORG_CD
                , RSLT_V.AFT_TEL_NUM
                , RSLT_V.AFT_FAX_NUM
                , RSLT_V.AFT_DS_ACCT_DUNS_NM
                , RSLT_V.AFT_DS_LOC_REV_AMT
                , RSLT_V.AFT_DUNS_NUM
                , RSLT_V.AFT_DS_CUST_SIC_DESC_TXT
                , RSLT_V.AFT_DS_LOC_EMP_NUM
                , RSLT_V.AFT_DS_CUST_SIC_CD
                , RSLT_V.AFT_DS_ULT_DUNS_NUM
                <!-- Del Start 2018/03/28 QC#23145 -->
                <!-- , RSLT_V.AFT_GLN_NUM -->
                <!-- Del End 2018/03/28 QC#23145 -->
                , RSLT_V.AFT_DS_PRNT_DUNS_NUM
                , RSLT_V.AFT_HQ_DUNS_NUM
                , RSLT_V.AFT_DS_CMPY_SIC_CD
                , RSLT_V.AFT_DS_CMPY_SIC_DESC_TXT
                , RSLT_V.MATCH_ACCT_LOC_NUM
                , RSLT_V.RETAN_FLD_TXT
                , RSLT_V.PROS_RVW_STS_CD
            FROM
                  RSLT_V
            UNION ALL
            SELECT DISTINCT
                  PR.RVW_PROS_NUM
                , PR.BEF_DS_ACCT_NM
                , PR.BEF_BILL_TO_FIRST_LINE_ADDR
                , PR.BEF_BILL_TO_SCD_LINE_ADDR
                , PR.BEF_BILL_TO_THIRD_LINE_ADDR
                , PR.BEF_BILL_TO_FRTH_LINE_ADDR
                , PR.BEF_BILL_TO_CTY_ADDR
                , PR.BEF_BILL_TO_ST_CD
                , PR.BEF_BILL_TO_POST_CD
                , PR.BEF_BILL_TO_CNTY_NM
                , PR.BEF_LOC_FIRST_LINE_ADDR
                , PR.BEF_LOC_SCD_LINE_ADDR
                , PR.BEF_LOC_THIRD_LINE_ADDR
                , PR.BEF_LOC_FRTH_LINE_ADDR
                , PR.BEF_SHIP_TO_CTY_ADDR
                , PR.BEF_SHIP_TO_ST_NM
                , PR.BEF_SHIP_TO_POST_CD
                , PR.BEF_SHIP_TO_CNTY_NM
                , PR.BEF_CTRY_NM
                , PR.BEF_DUNS_NUM
                , PR.BEF_DS_LOC_EMP_NUM
                , PR.BEF_DS_CUST_SIC_CD
                , PR.BEF_DS_ULT_DUNS_NUM
                , PR.BEF_TEL_NUM
                , PR.BEF_FAX_NUM
                , PR.ACCT_ID_ADDR_RVW_PROS_FLG
                , PR.AFT_DS_XREF_ACCT_CD
                , PR.TRTY_ORG_NM
                , PR.BEF_PSN_NUM
                , P.PSN_FIRST_NM ||' '|| P.PSN_LAST_NM AS XX_SCR_ITEM_61_TXT
                , PR.AFT_LOC_NUM
                <!-- START 2018/01/16 Hd.Sugawara [QC#23148,ADD] -->
                , PR.RESRC_TRTY_ORG_NM
                <!-- END 2018/01/16 Hd.Sugawara [QC#23148,ADD] -->
                , PR.CANDI_TRTY_NM
                , PR.XTRNL_CRAT_DT_TM_TS
                , PR.XTRNL_LAST_CRAT_DT_TM_TS
                , PR.AFT_DS_ACCT_NM
                <!-- START 2018/01/16 Hd.Sugawara [QC#23148,DEL] -->
                <!-- , PR.AFT_LOC_FIRST_LINE_ADDR -->
                <!-- , PR.AFT_LOC_SCD_LINE_ADDR -->
                <!-- , PR.AFT_LOC_THIRD_LINE_ADDR -->
                <!-- , PR.AFT_LOC_FRTH_LINE_ADDR -->
                <!-- , PR.AFT_LOC_CTY_ADDR -->
                <!-- , PR.AFT_LOC_ST_CD -->
                <!-- , PR.AFT_LOC_POST_CD -->
                <!-- , C.CNTY_NM -->
                <!-- , PR.AFT_CTRY_CD -->
                <!-- END 2018/01/16 Hd.Sugawara [QC#23148,DEL] -->
                , PR.AFT_TRTY_ORG_CD
                , PR.AFT_TEL_NUM
                , PR.AFT_FAX_NUM
                , PR.AFT_DS_ACCT_DUNS_NM
                , PR.AFT_DS_LOC_REV_AMT
                , PR.AFT_DUNS_NUM
                , PR.AFT_DS_CUST_SIC_DESC_TXT
                , PR.AFT_DS_LOC_EMP_NUM
                , PR.AFT_DS_CUST_SIC_CD
                , PR.AFT_DS_ULT_DUNS_NUM
                <!-- Del Start 2018/03/28 QC#23145 -->
                <!-- , PR.AFT_GLN_NUM -->
                <!-- Del End 2018/03/28 QC#23145 -->
                , PR.AFT_DS_PRNT_DUNS_NUM
                , PR.AFT_HQ_DUNS_NUM
                , PR.AFT_DS_CMPY_SIC_CD
                , PR.AFT_DS_CMPY_SIC_DESC_TXT
                , PR.MATCH_ACCT_LOC_NUM
                , PR.RETAN_FLD_TXT
                , PR.PROS_RVW_STS_CD
            FROM
                  DS_ACCT_RVW_PROS  PR
                <!-- START 2018/01/16 Hd.Sugawara [QC#23148,DEL] -->
                <!-- , CNTY              C -->
                <!-- END 2018/01/16 Hd.Sugawara [QC#23148,DEL] -->
                , S21_PSN           P
                , LINE_BIZ_TP       L
                , S21_PSN           P2
        <isNotNull property="bizMsg.orgNm_H1">
                , DS_ORG_RESRC_RELN DOR
                , DS_ORG_UNIT       DOU
        </isNotNull>
                , DS_XREF_ACCT_TP   DXAT
            WHERE               
                    PR.GLBL_CMPY_CD = #glblCmpyCd#
        <isNotNull property="bizMsg.xxDt10Dt_H1">
                AND PR.XTRNL_CRAT_DT_TM_TS &gt;= #tmTsFrom#
        </isNotNull>
        <isNotNull property="bizMsg.xxDt10Dt_H2">
                AND PR.XTRNL_CRAT_DT_TM_TS &lt;= #tmTsTo#
        </isNotNull>
        <isNotNull property="bizMsg.befDsAcctNm_H1">
                AND UPPER(PR.BEF_DS_ACCT_NM)  LIKE UPPER(#bizMsg.befDsAcctNm_H1#)
        </isNotNull>
        <isNotNull property="bizMsg.rvwProsNum_H1">
                AND PR.RVW_PROS_NUM LIKE #bizMsg.rvwProsNum_H1#
        </isNotNull>
        <isNotNull property="bizMsg.befPsnNum_H1">
                AND PR.BEF_PSN_NUM  LIKE #bizMsg.befPsnNum_H1#
        </isNotNull>
        <isNotNull property="bizMsg.trtyOrgNm_H1">
                AND PR.TRTY_ORG_NM  LIKE #bizMsg.trtyOrgNm_H1#
        </isNotNull>
        <isNull property="allFlg">
            <isNull property="blankFlg">
                <isNotNull property="bizMsg.prosRvwStsCd_H1">
                AND PR.PROS_RVW_STS_CD  = #bizMsg.prosRvwStsCd_H1#
                </isNotNull>
            </isNull>
            <isNotNull property="blankFlg">
                AND PR.PROS_RVW_STS_CD IS NULL
            </isNotNull>
        </isNull>
        <isNotNull property="bizMsg.dupAcctLocFlg_H1">
                AND PR.DUP_ACCT_LOC_FLG = #bizMsg.dupAcctLocFlg_H1#
        </isNotNull>
        <isNotNull property="bizMsg.shipAddrAllTxt_H1">
                AND UPPER(PR.BEF_LOC_FIRST_LINE_ADDR || PR.BEF_LOC_SCD_LINE_ADDR || 
                    PR.BEF_LOC_THIRD_LINE_ADDR || PR.BEF_LOC_FRTH_LINE_ADDR) LIKE UPPER(#bizMsg.shipAddrAllTxt_H1#)
        </isNotNull>
        <isNotNull property="bizMsg.befShipToCtyAddr_H1">
                AND UPPER(PR.BEF_SHIP_TO_CTY_ADDR) LIKE UPPER(#bizMsg.befShipToCtyAddr_H1#)
        </isNotNull>
        <isNotNull property="bizMsg.befShipToStNm_H1">
                AND PR.BEF_SHIP_TO_ST_NM = #bizMsg.befShipToStNm_H1#
        </isNotNull>
        <!-- START 2017/12/04 Hd.Sugawara [QC#21957,MOD] -->
        <!-- <isNotNull property="bizMsg.befBillToPostCd_H1"> -->
        <isNotNull property="bizMsg.befShipToPostCd_H1">
        <!-- END 2017/12/04 Hd.Sugawara [QC#21957,MOD] -->
                AND PR.BEF_SHIP_TO_POST_CD  LIKE #bizMsg.befShipToPostCd_H1#
        </isNotNull>
                AND PR.EZCANCELFLAG      = '0'
                
                <!-- START 2018/01/16 Hd.Sugawara [QC#23148,DEL] -->
                <!-- AND PR.GLBL_CMPY_CD    = C.GLBL_CMPY_CD(+) -->
                <!-- AND PR.AFT_LOC_CNTY_PK = C.CNTY_PK(+) -->
                <!-- AND C.EZCANCELFLAG(+)  = '0' -->
                <!-- END 2018/01/16 Hd.Sugawara [QC#23148,DEL] -->
                
                AND PR.GLBL_CMPY_CD  = P.GLBL_CMPY_CD(+)
                AND PR.BEF_PSN_NUM   = P.PSN_NUM(+)
        <isNotNull property="bizMsg.lineBizTpCd_H1">
                AND P.LINE_BIZ_TP_CD = #bizMsg.lineBizTpCd_H1#
        </isNotNull>
        <isNotNull property="bizMsg.xxScrItem61Txt_H1">
                AND UPPER(P.PSN_FIRST_NM ||' '|| P.PSN_LAST_NM) LIKE UPPER(#bizMsg.xxScrItem61Txt_H1#)
        </isNotNull>
                AND P.EZCANCELFLAG(+)   = '0'
                
                AND P.GLBL_CMPY_CD   = L.GLBL_CMPY_CD(+)
                AND P.LINE_BIZ_TP_CD = L.LINE_BIZ_TP_CD(+)
                AND L.EZCANCELFLAG(+)   = '0'

                AND PR.GLBL_CMPY_CD     = P2.GLBL_CMPY_CD (+)
                AND PR.BEF_PSN_NUM      = P2.PSN_CD (+)
                AND P2.EZCANCELFLAG (+) = '0'
                
        <isNotNull property="bizMsg.orgNm_H1">
                AND P.GLBL_CMPY_CD   = DOR.GLBL_CMPY_CD
                AND P.PSN_CD         = DOR.PSN_CD
                AND DOR.EZCANCELFLAG = '0'
                
                AND DOR.GLBL_CMPY_CD = DOU.GLBL_CMPY_CD
                AND DOR.ORG_CD       = DOU.ORG_CD
                AND DOU.ORG_NM LIKE #bizMsg.orgNm_H1#
                AND DOU.EZCANCELFLAG = '0'
        </isNotNull>
                AND PR.GLBL_CMPY_CD  = DXAT.GLBL_CMPY_CD (+)
                AND PR.EZCANCELFLAG  = DXAT.EZCANCELFLAG (+)
                AND PR.ACCT_SRC_TXT  = DXAT.DS_XREF_ACCT_TP_DESC_TXT (+)
                AND NOT EXISTS (
                                SELECT
                                   RSLT_V.PROS_RVW_STS_CD
                                FROM
                                   RSLT_V
                                WHERE
                                   RSLT_V.RVW_PROS_NUM = PR.RVW_PROS_NUM
                               )
            )
        WHERE
            ROWNUM &lt;= #rowNum#
        ORDER BY
            RVW_PROS_NUM
    <!-- 2017/11/17 QC#22632 mod end -->
    </statement>
    <statement id="getDsAcctNm" parameterClass="Map" resultClass="Map">
        SELECT
            SBQ.DS_ACCT_NM
            ,SBQ.DS_ACCT_NUM
        FROM
              (
                SELECT 
                      AP.DS_ACCT_NM
                    , AP.DS_ACCT_NUM
                FROM
                    DS_ACCT_PROS AP
                WHERE
                        AP.GLBL_CMPY_CD = #glblCmpyCd#
                    AND AP.EZCANCELFLAG = '0'
                    AND AP.LOC_NUM      = #locNum#
                UNION ALL
                SELECT 
                      SC.DS_ACCT_NM
                    , AL.DS_ACCT_NUM
                FROM
                    SELL_TO_CUST SC
                  , ACCT_LOC     AL
                WHERE
                        AL.GLBL_CMPY_CD = #glblCmpyCd#
                    AND AL.EZCANCELFLAG = '0'
                    AND AL.GLBL_CMPY_CD = SC.GLBL_CMPY_CD
                    AND AL.DS_ACCT_NUM  = SC.SELL_TO_CUST_CD
                    AND AL.LOC_NUM      = #locNum#
                    AND SC.EZCANCELFLAG = '0'
              ) SBQ
        WHERE
                ROWNUM = 1
    </statement>
    <statement id="getOrgInfo" parameterClass="Map" resultClass="Map">
        SELECT
              O.ORG_CD
            , O.ORG_NM
            , O.ORG_DESC_TXT
            , G.TRTY_GRP_TP_DESC_TXT
        FROM
              DS_ORG_UNIT O
            , TRTY_GRP_TP G
        WHERE
                O.GLBL_CMPY_CD = #glblCmpyCd#
            AND O.ORG_NM       = #orgNm#
            AND O.EZCANCELFLAG = '0'

            AND O.GLBL_CMPY_CD   = G.GLBL_CMPY_CD
            AND O.TRTY_GRP_TP_CD = G.TRTY_GRP_TP_CD
            AND G.EZCANCELFLAG   = '0'
            
            AND ROWNUM = 1
    </statement>
    <statement id="getStateList" parameterClass="Map" resultMap="result.STTMsg">
        SELECT 
            ST_CD
            , ST_DESC_TXT
        FROM
            ST
        WHERE 
            ST.GLBL_CMPY_CD = #glblCmpyCd#
        AND ST.EZCANCELFLAG = '0'
    <isNotNull property="ctryCd">
      AND ST.CTRY_CD = #ctryCd#
    </isNotNull>
    </statement>
    <resultMap id="result.STTMsg" class="STTMsg">
        <result property="stCd"       column="ST_CD"        javaType="EZDTStringItem"/>
        <result property="stDescTxt"  column="ST_DESC_TXT"  javaType="EZDTStringItem"/>
    </resultMap>
    <!-- Mod Start 2018/03/28 QC#23149 -->
    <statement id="getCtryCd" parameterClass="Map" resultClass="String">
        SELECT CTRY_CD FROM (
            SELECT C.CTRY_CD
                FROM CTRY C
                WHERE
                    C.GLBL_CMPY_CD     = #glblCmpyCd#
                AND C.EZCANCELFLAG     = '0'
                AND (
                       C.CTRY_CD       = #ctryNm#
                    OR C.CTRY_DESC_TXT = #ctryNm#
                    )
                ORDER BY C.CTRY_SORT_NUM)
        WHERE ROWNUM = 1
    </statement>
    <!-- Mod End 2018/03/28 QC#23149 -->
    <statement id="getTrtyOrgCd" parameterClass="Map" resultClass="String">
        SELECT ORG_CD FROM (
            SELECT
                ORG.ORG_CD
            FROM
                 DS_ORG_UNIT ORG
                ,ORG_STRU_TP STRU
            WHERE
                ORG.GLBL_CMPY_CD    =  #glblCmpyCd#
            AND ORG.ORG_NM          =  #trtyOrgNm#
            AND ORG.GNRN_TP_CD      =  #gnrnTpCd#
            AND ORG.EZCANCELFLAG     =  '0'

            AND ORG.ORG_STRU_TP_CD   =  STRU.ORG_STRU_TP_CD
            AND ORG.GLBL_CMPY_CD     =  STRU.GLBL_CMPY_CD
            AND STRU.TRTY_STRU_FLG   =  #trtyStruFlg#
            AND STRU.EZCANCELFLAG    =  '0'
            ORDER BY
                ORG.ORG_CD
            )
        WHERE ROWNUM = 1
    </statement>
    <!-- 2017/10/10 QC#20662 Add Start -->
    <statement id="checkExistlocNum" parameterClass="Map" resultClass="Integer">
        SELECT
               SUM(A.CNT)
        FROM (
            SELECT
                   COUNT(P.LOC_NUM) CNT
            FROM
                   PTY_LOC_WRK     P
            WHERE
                   P.GLBL_CMPY_CD       = #glblCmpyCd#
               AND P.LOC_NUM            = #locNum#
               AND P.RGTN_STS_CD       != #rgtnStsCd#
               AND P.EFF_FROM_DT    &lt;= #slsDt#
               AND ( 
                   P.EFF_THRU_DT    &gt;= #slsDt#
                   OR P.EFF_THRU_DT    IS NULL
                   ) 
                AND P.EZCANCELFLAG      = '0'
            
            UNION ALL
            SELECT
                   COUNT(P.LOC_NUM) CNT
            FROM
                   PROS_PTY_LOC_WRK P
            WHERE
                   P.GLBL_CMPY_CD       = #glblCmpyCd#
               AND P.LOC_NUM            = #locNum#
               AND P.RGTN_STS_CD       != #rgtnStsCd#
               AND P.EFF_FROM_DT    &lt;= #slsDt#
               AND ( 
                   P.EFF_THRU_DT    &gt;= #slsDt#
                   OR P.EFF_THRU_DT    IS NULL
                   ) 
               AND P.EZCANCELFLAG       = '0'
        ) A
    </statement>
    <!-- 2017/10/10 QC#20662 Add End -->
    <!-- 2017/12/14 QC#22244 Add Start -->
    <statement id="checkExistRvwProsNum" parameterClass="Map" resultClass="Integer">
        SELECT COUNT(DARP.RVW_PROS_NUM) CNT
        FROM DS_ACCT_RVW_PROS DARP
        WHERE DARP.GLBL_CMPY_CD = #glblCmpyCd#
        AND   DARP.RVW_PROS_NUM = #rvwProsNum#
        AND   (DARP.PROS_RVW_STS_CD IS NULL OR DARP.PROS_RVW_STS_CD &lt;&gt; #prosRvwStsCd#)
        AND   DARP.EZCANCELFLAG = '0'
    </statement>
    <!-- 2017/12/14 QC#22244 Add End -->
    <!-- START 2018/01/16 Hd.Sugawara [QC#23148,ADD] -->
    <statement id="getSalesRepByTrtyOrgNm" parameterClass="Map" resultClass="Map">
    SELECT
            P.PSN_FIRST_NM || ' ' || P.PSN_LAST_NM AS XX_SCR_ITEM_61_TXT_A2 
    FROM
            DS_ACCT_RVW_PROS PR
          , DS_ORG_RESRC_RELN DORR
          , S21_PSN P 
    WHERE
            PR.GLBL_CMPY_CD           = #glblCmpyCd#
        AND PR.TRTY_ORG_NM            = #trtyOrgNm#
        AND PR.EZCANCELFLAG           = '0'
        AND PR.GLBL_CMPY_CD           = DORR.GLBL_CMPY_CD
        AND PR.AFT_TRTY_ORG_CD        = DORR.ORG_CD
        AND DORR.ACCT_TEAM_ROLE_TP_CD IS NULL
        AND DORR.GNRN_TP_CD           = #gnrnTpCd#
        AND DORR.EZCANCELFLAG         = '0'
        AND DORR.GLBL_CMPY_CD         = P.GLBL_CMPY_CD
        AND DORR.PSN_CD               = P.PSN_CD
        AND P.EZCANCELFLAG            = '0'
    </statement>
    <!-- END 2018/01/16 Hd.Sugawara [QC#23148,ADD] -->

    <!-- Add Start 2018/03/28 QC#23149 -->
    <statement id="getLocStCd" parameterClass="Map" resultClass="Map">
    SELECT
          ST.ST_CD 
    FROM
        ST ST 
    WHERE
            ST.GLBL_CMPY_CD   = #glblCmpyCd# 
        AND ST.EZCANCELFLAG   = '0' 
        AND (
               ST.ST_CD       = #stValue# 
            OR ST.ST_DESC_TXT = #stValue# 
            )
    ORDER BY
          ST.ST_SORT_NUM
    </statement>
    <!-- Add End 2018/03/28 QC#23149 -->
</sqlMap>
