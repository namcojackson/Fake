<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<sqlMap namespace="NSZC117001">
    <statement id="getSvcPhysclMtrReadGrpSq" parameterClass="Map" resultClass="Map">
        SELECT
             SPMR.SVC_PHYS_MTR_READ_GRP_SQ
            ,SPMR.MTR_READ_DT
        FROM
             SVC_MACH_MSTR     SMM
            ,SVC_PHYS_MTR_READ SPMR
        WHERE
            SMM.GLBL_CMPY_CD      = #glblCmpyCd#
        AND SMM.MDSE_CD           = #mdseCd#
        AND SMM.SER_NUM           = #serNum#
        AND SMM.EZCANCELFLAG      = '0'
        AND SPMR.GLBL_CMPY_CD     = SMM.GLBL_CMPY_CD
        AND SPMR.SVC_MACH_MSTR_PK = SMM.SVC_MACH_MSTR_PK
        AND SPMR.VLD_MTR_FLG      = #flgOn_Y#
        AND SPMR.MTR_READ_DT      &gt;= #mtrRdPstDay#
        AND SPMR.MTR_READ_DT      &lt;= #slsDt#
        AND SPMR.READ_MTR_CNT     IS NOT NULL
        AND SPMR.EZCANCELFLAG     = '0'
        UNION
        SELECT
             SPMR.SVC_PHYS_MTR_READ_GRP_SQ
            ,SPMR.MTR_READ_DT
        FROM
             SVC_MACH_MSTR     SMM
            ,SVC_PHYS_MTR_READ SPMR
        WHERE
            SMM.GLBL_CMPY_CD      = #glblCmpyCd#
        AND SMM.MDSE_CD           = #mdseCd#
        AND SMM.SER_NUM           = #serNum#
        AND SMM.EZCANCELFLAG      = '0'
        AND SPMR.GLBL_CMPY_CD     = SMM.GLBL_CMPY_CD
        AND SPMR.SVC_MACH_MSTR_PK = SMM.SVC_MACH_MSTR_PK
        AND SPMR.VLD_MTR_FLG      = #flgOn_Y#
        AND SPMR.MTR_READ_DT      &lt; #mtrRdPstDay#
        AND SPMR.READ_MTR_CNT     IS NOT NULL
        AND SPMR.EZCANCELFLAG     = '0'
        ORDER BY
           MTR_READ_DT DESC
          ,SVC_PHYS_MTR_READ_GRP_SQ DESC
    </statement>

    <statement id="getMeterReadCount" parameterClass="Map" resultClass="Map">
        SELECT
             SPMR.MTR_LB_CD
            ,SPM.MDL_MTR_LB_NOTE_TXT
            ,SPMR.READ_MTR_CNT
        FROM
             SVC_MACH_MSTR     SMM
            ,SVC_PHYS_MTR      SPM
            ,SVC_PHYS_MTR_READ SPMR
        WHERE
            SMM.GLBL_CMPY_CD                  = #glblCmpyCd#
        AND SMM.MDSE_CD                       = #mdseCd#
        AND SMM.SER_NUM                       = #serNum#
        AND SMM.EZCANCELFLAG                  = '0'
        AND SPM.GLBL_CMPY_CD                  = SMM.GLBL_CMPY_CD
        AND SPM.SVC_MACH_MSTR_PK              = SMM.SVC_MACH_MSTR_PK
        AND SPM.EZCANCELFLAG                  = '0'
        AND SPMR.GLBL_CMPY_CD (+)             = SPM.GLBL_CMPY_CD
        AND SPMR.SVC_PHYS_MTR_PK (+)          = SPM.SVC_PHYS_MTR_PK
        AND SPMR.SVC_PHYS_MTR_READ_GRP_SQ (+) = #svcPhysMtrRdGrpSq#
        AND SPMR.EZCANCELFLAG (+)             = '0'
    </statement>

    <!-- QC#23918 Add -->
    <statement id="getMeterInfo" parameterClass="Map" resultClass="Map">
        SELECT
             SPM.MDL_MTR_LB_CD                  MTR_LB_CD
            ,SPM.MDL_MTR_LB_NOTE_TXT
            , 0                                 READ_MTR_CNT
        FROM
             SVC_MACH_MSTR     SMM
            ,SVC_PHYS_MTR      SPM
        WHERE
            SMM.GLBL_CMPY_CD                  = #glblCmpyCd#
        AND SMM.MDSE_CD                       = #mdseCd#
        AND SMM.SER_NUM                       = #serNum#
        AND SMM.EZCANCELFLAG                  = '0'
        AND SPM.GLBL_CMPY_CD                  = SMM.GLBL_CMPY_CD
        AND SPM.SVC_MACH_MSTR_PK              = SMM.SVC_MACH_MSTR_PK
        AND SPM.ACTV_FLG                      = #flgOn_Y#
        AND #slsDt# BETWEEN SMM.EFF_FROM_DT AND NVL(SMM.EFF_THRU_DT, '99991231')
        AND SPM.EZCANCELFLAG                  = '0'
    </statement>
</sqlMap>